!(function(){var d_=Object.defineProperty,h_=Object.defineProperties;var p_=Object.getOwnPropertyDescriptors;var $d=Object.getOwnPropertySymbols;var Mg=Object.prototype.hasOwnProperty,bg=Object.prototype.propertyIsEnumerable;var su=Math.pow,Sg=(an,St,se)=>St in an?d_(an,St,{enumerable:!0,configurable:!0,writable:!0,value:se}):an[St]=se,Rt=(an,St)=>{for(var se in St||(St={}))Mg.call(St,se)&&Sg(an,se,St[se]);if($d)for(var se of $d(St))bg.call(St,se)&&Sg(an,se,St[se]);return an},si=(an,St)=>h_(an,p_(St));var qa=(an,St)=>{var se={};for(var X in an)Mg.call(an,X)&&St.indexOf(X)<0&&(se[X]=an[X]);if(an!=null&&$d)for(var X of $d(an))St.indexOf(X)<0&&bg.call(an,X)&&(se[X]=an[X]);return se};var Bc=(an,St,se)=>new Promise((X,ce)=>{var te=fn=>{try{Ut(se.next(fn))}catch(de){ce(de)}},Ue=fn=>{try{Ut(se.throw(fn))}catch(de){ce(de)}},Ut=fn=>fn.done?X(fn.value):Promise.resolve(fn.value).then(te,Ue);Ut((se=se.apply(an,St)).next())});(self.webpackChunkantd_color_editor=self.webpackChunkantd_color_editor||[]).push([[243],{71462:function(an,St,se){"use strict";se.d(St,{Z:function(){return de}});var X=se(87462),ce=se(67294),te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"},Ue=te,Ut=se(13401),fn=function(ve,ze){return ce.createElement(Ut.Z,(0,X.Z)({},ve,{ref:ze,icon:Ue}))},de=ce.forwardRef(fn)},35038:function(an,St,se){"use strict";se.d(St,{Z:function(){return de}});var X=se(87462),ce=se(67294),te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-200 0H360v-72h304v72z"}}]},name:"delete",theme:"filled"},Ue=te,Ut=se(13401),fn=function(ve,ze){return ce.createElement(Ut.Z,(0,X.Z)({},ve,{ref:ze,icon:Ue}))},de=ce.forwardRef(fn)},4107:function(an,St,se){"use strict";se.d(St,{Z:function(){return de}});var X=se(87462),ce=se(67294),te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 305H624V192c0-17.7-14.3-32-32-32H184v-40c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v784c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V640h248v113c0 17.7 14.3 32 32 32h416c17.7 0 32-14.3 32-32V337c0-17.7-14.3-32-32-32zM184 568V232h368v336H184zm656 145H504v-73h112c4.4 0 8-3.6 8-8V377h216v336z"}}]},name:"flag",theme:"outlined"},Ue=te,Ut=se(13401),fn=function(ve,ze){return ce.createElement(Ut.Z,(0,X.Z)({},ve,{ref:ze,icon:Ue}))},de=ce.forwardRef(fn)},28997:function(an,St,se){"use strict";se.d(St,{Z:function(){return de}});var X=se(87462),ce=se(67294),te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M793 242H366v-74c0-6.7-7.7-10.4-12.9-6.3l-142 112a8 8 0 000 12.6l142 112c5.2 4.1 12.9.4 12.9-6.3v-74h415v470H175c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h618c35.3 0 64-28.7 64-64V306c0-35.3-28.7-64-64-64z"}}]},name:"rollback",theme:"outlined"},Ue=te,Ut=se(13401),fn=function(ve,ze){return ce.createElement(Ut.Z,(0,X.Z)({},ve,{ref:ze,icon:Ue}))},de=ce.forwardRef(fn)},11277:function(an,St,se){"use strict";se.d(St,{Z:function(){return de}});var X=se(87462),ce=se(67294),te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},Ue=te,Ut=se(13401),fn=function(ve,ze){return ce.createElement(Ut.Z,(0,X.Z)({},ve,{ref:ze,icon:Ue}))},de=ce.forwardRef(fn)},61974:function(an,St,se){"use strict";se.d(St,{Z:function(){return de}});var X=se(87462),ce=se(67294),te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"},Ue=te,Ut=se(13401),fn=function(ve,ze){return ce.createElement(Ut.Z,(0,X.Z)({},ve,{ref:ze,icon:Ue}))},de=ce.forwardRef(fn)},21054:function(an,St,se){"use strict";se.d(St,{Z:function(){return de}});var X=se(87462),ce=se(67294),te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},Ue=te,Ut=se(13401),fn=function(ve,ze){return ce.createElement(Ut.Z,(0,X.Z)({},ve,{ref:ze,icon:Ue}))},de=ce.forwardRef(fn)},98851:function(an,St,se){"use strict";se.d(St,{H:function(){return yu}});var X=se(1413),ce=se(97685),te=se(4107),Ue=se(71462),Ut=se(61974),fn=se(28997),de=se(88165),Xn=se(92808),ve=se(85893),ze=se(87462),Wt=se(63366),Ae=se(67294);function ut(d){var M,P,z="";if(typeof d=="string"||typeof d=="number")z+=d;else if(typeof d=="object")if(Array.isArray(d))for(M=0;M<d.length;M++)d[M]&&(P=ut(d[M]))&&(z&&(z+=" "),z+=P);else for(M in d)d[M]&&(z&&(z+=" "),z+=M);return z}function it(){for(var d,M,P=0,z="";P<arguments.length;)(d=arguments[P++])&&(M=ut(d))&&(z&&(z+=" "),z+=M);return z}var en=it,Rn=se(71068),tn=se(11463),ee=se(70444),Ir=se(50649),dr=se(27278),tr=Rn.Z,zn=function(M){return M!=="theme"},Zn=function(M){return typeof M=="string"&&M.charCodeAt(0)>96?tr:zn},Yn=function(M,P,z){var J;if(P){var oe=P.shouldForwardProp;J=M.__emotion_forwardProp&&oe?function(Re){return M.__emotion_forwardProp(Re)&&oe(Re)}:oe}return typeof J!="function"&&z&&(J=M.__emotion_forwardProp),J},vn=`You have illegal escape sequence in your template literal, most likely inside content's property value.
Because you write your CSS inside a JavaScript string you actually have to do double escaping, so for example "content: '\\00d7';" should become "content: '\\\\00d7';".
You can read more about this here:
https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#ES2018_revision_of_illegal_escape_sequences`,pn=function(M){var P=M.cache,z=M.serialized,J=M.isStringTag;return(0,ee.hC)(P,z,J),(0,dr.L)(function(){return(0,ee.My)(P,z,J)}),null},dt=function d(M,P){var z=M.__emotion_real===M,J=z&&M.__emotion_base||M,oe,Re;P!==void 0&&(oe=P.label,Re=P.target);var pt=Yn(M,P,z),Bt=pt||Zn(J),i=!Bt("as");return function(){var s=arguments,u=z&&M.__emotion_styles!==void 0?M.__emotion_styles.slice(0):[];if(oe!==void 0&&u.push("label:"+oe+";"),s[0]==null||s[0].raw===void 0)u.push.apply(u,s);else{u.push(s[0][0]);for(var p=s.length,y=1;y<p;y++)u.push(s[y],s[0][y])}var A=(0,tn.w)(function(V,pe,Fe){var nt=i&&V.as||J,Nt="",kt=[],un=V;if(V.theme==null){un={};for(var mr in V)un[mr]=V[mr];un.theme=Ae.useContext(tn.T)}typeof V.className=="string"?Nt=(0,ee.fp)(pe.registered,kt,V.className):V.className!=null&&(Nt=V.className+" ");var yn=(0,Ir.O)(u.concat(kt),pe.registered,un);Nt+=pe.key+"-"+yn.name,Re!==void 0&&(Nt+=" "+Re);var Ci=i&&pt===void 0?Zn(nt):Bt,ts={};for(var Ee in V)i&&Ee==="as"||Ci(Ee)&&(ts[Ee]=V[Ee]);return ts.className=Nt,ts.ref=Fe,Ae.createElement(Ae.Fragment,null,Ae.createElement(pn,{cache:pe,serialized:yn,isStringTag:typeof nt=="string"}),Ae.createElement(nt,ts))});return A.displayName=oe!==void 0?oe:"Styled("+(typeof J=="string"?J:J.displayName||J.name||"Component")+")",A.defaultProps=M.defaultProps,A.__emotion_real=A,A.__emotion_base=J,A.__emotion_styles=u,A.__emotion_forwardProp=pt,Object.defineProperty(A,"toString",{value:function(){return"."+Re}}),A.withComponent=function(V,pe){return d(V,(0,ze.Z)({},P,pe,{shouldForwardProp:Yn(A,pe,!0)})).apply(void 0,u)},A}},hr=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],gr=dt.bind();hr.forEach(function(d){gr[d]=gr(d)});function ke(d,M){return gr(d,M)}const Kt=(d,M)=>{Array.isArray(d.__emotion_styles)&&(d.__emotion_styles=M(d.__emotion_styles))};function Lt(d){let M="https://mui.com/production-error/?code="+d;for(let P=1;P<arguments.length;P+=1)M+="&args[]="+encodeURIComponent(arguments[P]);return"Minified MUI error #"+d+"; visit "+M+" for the full message."}function Qe(d){if(typeof d!="string")throw new Error(Lt(7));return d.charAt(0).toUpperCase()+d.slice(1)}function Se(d){return d!==null&&typeof d=="object"&&d.constructor===Object}function we(d){if(!Se(d))return d;const M={};return Object.keys(d).forEach(P=>{M[P]=we(d[P])}),M}function Pe(d,M,P={clone:!0}){const z=P.clone?(0,ze.Z)({},d):d;return Se(d)&&Se(M)&&Object.keys(M).forEach(J=>{J!=="__proto__"&&(Se(M[J])&&J in d&&Se(d[J])?z[J]=Pe(d[J],M[J],P):P.clone?z[J]=Se(M[J])?we(M[J]):M[J]:z[J]=M[J])}),z}function Ve(d,M){return M?Pe(d,M,{clone:!1}):d}var Ne=Ve;const Oe={xs:0,sm:600,md:900,lg:1200,xl:1536},wt={keys:["xs","sm","md","lg","xl"],up:d=>`@media (min-width:${Oe[d]}px)`};function ct(d,M,P){const z=d.theme||{};if(Array.isArray(M)){const oe=z.breakpoints||wt;return M.reduce((Re,pt,Bt)=>(Re[oe.up(oe.keys[Bt])]=P(M[Bt]),Re),{})}if(typeof M=="object"){const oe=z.breakpoints||wt;return Object.keys(M).reduce((Re,pt)=>{if(Object.keys(oe.values||Oe).indexOf(pt)!==-1){const Bt=oe.up(pt);Re[Bt]=P(M[pt],pt)}else{const Bt=pt;Re[Bt]=M[Bt]}return Re},{})}return P(M)}function Nn(d){const M=P=>{const z=P.theme||{},J=d(P),oe=z.breakpoints||wt,Re=oe.keys.reduce((pt,Bt)=>(P[Bt]&&(pt=pt||{},pt[oe.up(Bt)]=d(_extends({theme:z},P[Bt]))),pt),null);return merge(J,Re)};return M.propTypes={},M.filterProps=["xs","sm","md","lg","xl",...d.filterProps],M}function ur(d={}){var M;return((M=d.keys)==null?void 0:M.reduce((z,J)=>{const oe=d.up(J);return z[oe]={},z},{}))||{}}function rr(d,M){return d.reduce((P,z)=>{const J=P[z];return(!J||Object.keys(J).length===0)&&delete P[z],P},M)}function yr(d,...M){const P=ur(d),z=[P,...M].reduce((J,oe)=>deepmerge(J,oe),{});return rr(Object.keys(P),z)}function zr(d,M){if(typeof d!="object")return{};const P={},z=Object.keys(M);return Array.isArray(d)?z.forEach((J,oe)=>{oe<d.length&&(P[J]=!0)}):z.forEach(J=>{d[J]!=null&&(P[J]=!0)}),P}function Ur({values:d,breakpoints:M,base:P}){const z=P||zr(d,M),J=Object.keys(z);if(J.length===0)return d;let oe;return J.reduce((Re,pt,Bt)=>(Array.isArray(d)?(Re[pt]=d[Bt]!=null?d[Bt]:d[oe],oe=Bt):typeof d=="object"?(Re[pt]=d[pt]!=null?d[pt]:d[oe],oe=pt):Re[pt]=d,Re),{})}var Lr=null;function Yr(d,M,P=!0){if(!M||typeof M!="string")return null;if(d&&d.vars&&P){const z=`vars.${M}`.split(".").reduce((J,oe)=>J&&J[oe]?J[oe]:null,d);if(z!=null)return z}return M.split(".").reduce((z,J)=>z&&z[J]!=null?z[J]:null,d)}function Bn(d,M,P,z=P){let J;return typeof d=="function"?J=d(P):Array.isArray(d)?J=d[P]||z:J=Yr(d,P)||z,M&&(J=M(J,z,d)),J}function sn(d){const{prop:M,cssProperty:P=d.prop,themeKey:z,transform:J}=d,oe=Re=>{if(Re[M]==null)return null;const pt=Re[M],Bt=Re.theme,i=Yr(Bt,z)||{};return ct(Re,pt,u=>{let p=Bn(i,J,u);return u===p&&typeof u=="string"&&(p=Bn(i,J,`${M}${u==="default"?"":Qe(u)}`,u)),P===!1?p:{[P]:p}})};return oe.propTypes={},oe.filterProps=[M],oe}var Tn=sn;function _r(d){const M={};return P=>(M[P]===void 0&&(M[P]=d(P)),M[P])}const ai={m:"margin",p:"padding"},Tr={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},qr={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Si=_r(d=>{if(d.length>2)if(qr[d])d=qr[d];else return[d];const[M,P]=d.split(""),z=ai[M],J=Tr[P]||"";return Array.isArray(J)?J.map(oe=>z+oe):[z+J]}),Ei=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],zi=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],Ss=[...Ei,...zi];function ei(d,M,P,z){var J;const oe=(J=Yr(d,M,!1))!=null?J:P;return typeof oe=="number"?Re=>typeof Re=="string"?Re:oe*Re:Array.isArray(oe)?Re=>typeof Re=="string"?Re:oe[Re]:typeof oe=="function"?oe:()=>{}}function ii(d){return ei(d,"spacing",8,"spacing")}function ui(d,M){if(typeof M=="string"||M==null)return M;const P=Math.abs(M),z=d(P);return M>=0?z:typeof z=="number"?-z:`-${z}`}function ls(d,M){return P=>d.reduce((z,J)=>(z[J]=ui(M,P),z),{})}function Hr(d,M,P,z){if(M.indexOf(P)===-1)return null;const J=Si(P),oe=ls(J,z),Re=d[P];return ct(d,Re,oe)}function Xi(d,M){const P=ii(d.theme);return Object.keys(d).map(z=>Hr(d,M,z,P)).reduce(Ne,{})}function Wr(d){return Xi(d,Ei)}Wr.propTypes={},Wr.filterProps=Ei;function Ln(d){return Xi(d,zi)}Ln.propTypes={},Ln.filterProps=zi;function Ts(d){return Xi(d,Ss)}Ts.propTypes={},Ts.filterProps=Ss;var Q=null;function ye(...d){const M=d.reduce((z,J)=>(J.filterProps.forEach(oe=>{z[oe]=J}),z),{}),P=z=>Object.keys(z).reduce((J,oe)=>M[oe]?Ne(J,M[oe](z)):J,{});return P.propTypes={},P.filterProps=d.reduce((z,J)=>z.concat(J.filterProps),[]),P}var Ce=ye;function ge(d){return typeof d!="number"?d:`${d}px solid`}const vt=Tn({prop:"border",themeKey:"borders",transform:ge}),Ht=Tn({prop:"borderTop",themeKey:"borders",transform:ge}),Jt=Tn({prop:"borderRight",themeKey:"borders",transform:ge}),_t=Tn({prop:"borderBottom",themeKey:"borders",transform:ge}),ht=Tn({prop:"borderLeft",themeKey:"borders",transform:ge}),Ge=Tn({prop:"borderColor",themeKey:"palette"}),st=Tn({prop:"borderTopColor",themeKey:"palette"}),Ft=Tn({prop:"borderRightColor",themeKey:"palette"}),kn=Tn({prop:"borderBottomColor",themeKey:"palette"}),On=Tn({prop:"borderLeftColor",themeKey:"palette"}),$n=d=>{if(d.borderRadius!==void 0&&d.borderRadius!==null){const M=ei(d.theme,"shape.borderRadius",4,"borderRadius"),P=z=>({borderRadius:ui(M,z)});return ct(d,d.borderRadius,P)}return null};$n.propTypes={},$n.filterProps=["borderRadius"];const Mr=Ce(vt,Ht,Jt,_t,ht,Ge,st,Ft,kn,On,$n);var ti=null;const xe=d=>{if(d.gap!==void 0&&d.gap!==null){const M=ei(d.theme,"spacing",8,"gap"),P=z=>({gap:ui(M,z)});return ct(d,d.gap,P)}return null};xe.propTypes={},xe.filterProps=["gap"];const At=d=>{if(d.columnGap!==void 0&&d.columnGap!==null){const M=ei(d.theme,"spacing",8,"columnGap"),P=z=>({columnGap:ui(M,z)});return ct(d,d.columnGap,P)}return null};At.propTypes={},At.filterProps=["columnGap"];const Pn=d=>{if(d.rowGap!==void 0&&d.rowGap!==null){const M=ei(d.theme,"spacing",8,"rowGap"),P=z=>({rowGap:ui(M,z)});return ct(d,d.rowGap,P)}return null};Pn.propTypes={},Pn.filterProps=["rowGap"];const vr=Tn({prop:"gridColumn"}),ni=Tn({prop:"gridRow"}),Zi=Tn({prop:"gridAutoFlow"}),Ns=Tn({prop:"gridAutoColumns"}),va=Tn({prop:"gridAutoRows"}),js=Tn({prop:"gridTemplateColumns"}),os=Tn({prop:"gridTemplateRows"}),Ji=Tn({prop:"gridTemplateAreas"}),It=Tn({prop:"gridArea"}),k=Ce(xe,At,Pn,vr,ni,Zi,Ns,va,js,os,Ji,It);var Z=null;function le(d,M){return M==="grey"?M:d}const Ye=Tn({prop:"color",themeKey:"palette",transform:le}),He=Tn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:le}),ft=Tn({prop:"backgroundColor",themeKey:"palette",transform:le}),Dn=Ce(Ye,He,ft);var xn=null;function et(d){return d<=1&&d!==0?`${d*100}%`:d}const nn=Tn({prop:"width",transform:et}),_e=d=>{if(d.maxWidth!==void 0&&d.maxWidth!==null){const M=P=>{var z,J;const oe=((z=d.theme)==null||(z=z.breakpoints)==null||(z=z.values)==null?void 0:z[P])||Oe[P];return oe?((J=d.theme)==null||(J=J.breakpoints)==null?void 0:J.unit)!=="px"?{maxWidth:`${oe}${d.theme.breakpoints.unit}`}:{maxWidth:oe}:{maxWidth:et(P)}};return ct(d,d.maxWidth,M)}return null};_e.filterProps=["maxWidth"];const De=Tn({prop:"minWidth",transform:et}),ot=Tn({prop:"height",transform:et}),gt=Tn({prop:"maxHeight",transform:et}),Pt=Tn({prop:"minHeight",transform:et}),Gn=Tn({prop:"size",cssProperty:"width",transform:et}),dn=Tn({prop:"size",cssProperty:"height",transform:et}),Ke=Tn({prop:"boxSizing"}),Xe=Ce(nn,_e,De,ot,gt,Pt,Ke);var Zt=null,ir={border:{themeKey:"borders",transform:ge},borderTop:{themeKey:"borders",transform:ge},borderRight:{themeKey:"borders",transform:ge},borderBottom:{themeKey:"borders",transform:ge},borderLeft:{themeKey:"borders",transform:ge},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:$n},color:{themeKey:"palette",transform:le},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:le},backgroundColor:{themeKey:"palette",transform:le},p:{style:Ln},pt:{style:Ln},pr:{style:Ln},pb:{style:Ln},pl:{style:Ln},px:{style:Ln},py:{style:Ln},padding:{style:Ln},paddingTop:{style:Ln},paddingRight:{style:Ln},paddingBottom:{style:Ln},paddingLeft:{style:Ln},paddingX:{style:Ln},paddingY:{style:Ln},paddingInline:{style:Ln},paddingInlineStart:{style:Ln},paddingInlineEnd:{style:Ln},paddingBlock:{style:Ln},paddingBlockStart:{style:Ln},paddingBlockEnd:{style:Ln},m:{style:Wr},mt:{style:Wr},mr:{style:Wr},mb:{style:Wr},ml:{style:Wr},mx:{style:Wr},my:{style:Wr},margin:{style:Wr},marginTop:{style:Wr},marginRight:{style:Wr},marginBottom:{style:Wr},marginLeft:{style:Wr},marginX:{style:Wr},marginY:{style:Wr},marginInline:{style:Wr},marginInlineStart:{style:Wr},marginInlineEnd:{style:Wr},marginBlock:{style:Wr},marginBlockStart:{style:Wr},marginBlockEnd:{style:Wr},displayPrint:{cssProperty:!1,transform:d=>({"@media print":{display:d}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:xe},rowGap:{style:Pn},columnGap:{style:At},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:et},maxWidth:{style:_e},minWidth:{transform:et},height:{transform:et},maxHeight:{transform:et},minHeight:{transform:et},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function Kn(...d){const M=d.reduce((z,J)=>z.concat(Object.keys(J)),[]),P=new Set(M);return d.every(z=>P.size===Object.keys(z).length)}function Gr(d,M){return typeof d=="function"?d(M):d}function Ar(){function d(P,z,J,oe){const Re={[P]:z,theme:J},pt=oe[P];if(!pt)return{[P]:z};const{cssProperty:Bt=P,themeKey:i,transform:s,style:u}=pt;if(z==null)return null;if(i==="typography"&&z==="inherit")return{[P]:z};const p=Yr(J,i)||{};return u?u(Re):ct(Re,z,A=>{let V=Bn(p,s,A);return A===V&&typeof A=="string"&&(V=Bn(p,s,`${P}${A==="default"?"":Qe(A)}`,A)),Bt===!1?V:{[Bt]:V}})}function M(P){var z;const{sx:J,theme:oe={}}=P||{};if(!J)return null;const Re=(z=oe.unstable_sxConfig)!=null?z:ir;function pt(Bt){let i=Bt;if(typeof Bt=="function")i=Bt(oe);else if(typeof Bt!="object")return Bt;if(!i)return null;const s=ur(oe.breakpoints),u=Object.keys(s);let p=s;return Object.keys(i).forEach(y=>{const A=Gr(i[y],oe);if(A!=null)if(typeof A=="object")if(Re[y])p=Ne(p,d(y,A,oe,Re));else{const V=ct({theme:oe},A,pe=>({[y]:pe}));Kn(V,A)?p[y]=M({sx:A,theme:oe}):p=Ne(p,V)}else p=Ne(p,d(y,A,oe,Re))}),rr(u,p)}return Array.isArray(J)?J.map(pt):pt(J)}return M}const vi=Ar();vi.filterProps=["sx"];var li=vi;const sr=["sx"],Bi=d=>{var M,P;const z={systemProps:{},otherProps:{}},J=(M=d==null||(P=d.theme)==null?void 0:P.unstable_sxConfig)!=null?M:ir;return Object.keys(d).forEach(oe=>{J[oe]?z.systemProps[oe]=d[oe]:z.otherProps[oe]=d[oe]}),z};function ys(d){const{sx:M}=d,P=(0,Wt.Z)(d,sr),{systemProps:z,otherProps:J}=Bi(P);let oe;return Array.isArray(M)?oe=[z,...M]:typeof M=="function"?oe=(...Re)=>{const pt=M(...Re);return Se(pt)?(0,ze.Z)({},z,pt):z}:oe=(0,ze.Z)({},z,M),(0,ze.Z)({},J,{sx:oe})}const Ms=["values","unit","step"],Ja=null,ya=d=>{const M=Object.keys(d).map(P=>({key:P,val:d[P]}))||[];return M.sort((P,z)=>P.val-z.val),M.reduce((P,z)=>(0,ze.Z)({},P,{[z.key]:z.val}),{})};function Ko(d){const{values:M={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:P="px",step:z=5}=d,J=(0,Wt.Z)(d,Ms),oe=ya(M),Re=Object.keys(oe);function pt(p){return`@media (min-width:${typeof M[p]=="number"?M[p]:p}${P})`}function Bt(p){return`@media (max-width:${(typeof M[p]=="number"?M[p]:p)-z/100}${P})`}function i(p,y){const A=Re.indexOf(y);return`@media (min-width:${typeof M[p]=="number"?M[p]:p}${P}) and (max-width:${(A!==-1&&typeof M[Re[A]]=="number"?M[Re[A]]:y)-z/100}${P})`}function s(p){return Re.indexOf(p)+1<Re.length?i(p,Re[Re.indexOf(p)+1]):pt(p)}function u(p){const y=Re.indexOf(p);return y===0?pt(Re[1]):y===Re.length-1?Bt(Re[y]):i(p,Re[Re.indexOf(p)+1]).replace("@media","@media not all and")}return(0,ze.Z)({keys:Re,values:oe,up:pt,down:Bt,between:i,only:s,not:u,unit:P},J)}var Ca={borderRadius:4};function _a(d=8){if(d.mui)return d;const M=ii({spacing:d}),P=(...z)=>(z.length===0?[1]:z).map(oe=>{const Re=M(oe);return typeof Re=="number"?`${Re}px`:Re}).join(" ");return P.mui=!0,P}const ks=["breakpoints","palette","spacing","shape"];function to(d={},...M){const{breakpoints:P={},palette:z={},spacing:J,shape:oe={}}=d,Re=(0,Wt.Z)(d,ks),pt=Ko(P),Bt=_a(J);let i=Pe({breakpoints:pt,direction:"ltr",components:{},palette:(0,ze.Z)({mode:"light"},z),spacing:Bt,shape:(0,ze.Z)({},Ca,oe)},Re);return i=M.reduce((s,u)=>Pe(s,u),i),i.unstable_sxConfig=(0,ze.Z)({},ir,Re==null?void 0:Re.unstable_sxConfig),i.unstable_sx=function(u){return li({sx:u,theme:this})},i}var As=to;function Cs(d){return Object.keys(d).length===0}function no(d=null){const M=Ae.useContext(tn.T);return!M||Cs(M)?d:M}var Ni=no;const Vs=As();function To(d=Vs){return Ni(d)}var oi=To;const la=["className","component"];function xa(d={}){const{themeId:M,defaultTheme:P,defaultClassName:z="MuiBox-root",generateClassName:J}=d,oe=ke("div",{shouldForwardProp:pt=>pt!=="theme"&&pt!=="sx"&&pt!=="as"})(li);return Ae.forwardRef(function(Bt,i){const s=oi(P),u=ys(Bt),{className:p,component:y="div"}=u,A=(0,Wt.Z)(u,la);return(0,ve.jsx)(oe,(0,ze.Z)({as:y,ref:i,className:en(p,J?J(z):z),theme:M&&s[M]||s},A))})}const qo=d=>d;var O=(()=>{let d=qo;return{configure(M){d=M},generate(M){return d(M)},reset(){d=qo}}})();function m(d,M){return(0,ze.Z)({toolbar:{minHeight:56,[d.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[d.up("sm")]:{minHeight:64}}},M)}function v(d,M=0,P=1){return Math.min(Math.max(M,d),P)}function C(d){d=d.slice(1);const M=new RegExp(`.{1,${d.length>=6?2:1}}`,"g");let P=d.match(M);return P&&P[0].length===1&&(P=P.map(z=>z+z)),P?`rgb${P.length===4?"a":""}(${P.map((z,J)=>J<3?parseInt(z,16):Math.round(parseInt(z,16)/255*1e3)/1e3).join(", ")})`:""}function N(d){const M=d.toString(16);return M.length===1?`0${M}`:M}function H(d){if(d.type)return d;if(d.charAt(0)==="#")return H(C(d));const M=d.indexOf("("),P=d.substring(0,M);if(["rgb","rgba","hsl","hsla","color"].indexOf(P)===-1)throw new Error(Lt(9,d));let z=d.substring(M+1,d.length-1),J;if(P==="color"){if(z=z.split(" "),J=z.shift(),z.length===4&&z[3].charAt(0)==="/"&&(z[3]=z[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(J)===-1)throw new Error(Lt(10,J))}else z=z.split(",");return z=z.map(oe=>parseFloat(oe)),{type:P,values:z,colorSpace:J}}const Y=d=>{const M=H(d);return M.values.slice(0,3).map((P,z)=>M.type.indexOf("hsl")!==-1&&z!==0?`${P}%`:P).join(" ")},R=(d,M)=>{try{return Y(d)}catch(P){return d}};function F(d){const{type:M,colorSpace:P}=d;let{values:z}=d;return M.indexOf("rgb")!==-1?z=z.map((J,oe)=>oe<3?parseInt(J,10):J):M.indexOf("hsl")!==-1&&(z[1]=`${z[1]}%`,z[2]=`${z[2]}%`),M.indexOf("color")!==-1?z=`${P} ${z.join(" ")}`:z=`${z.join(", ")}`,`${M}(${z})`}function w(d){if(d.indexOf("#")===0)return d;const{values:M}=H(d);return`#${M.map((P,z)=>N(z===3?Math.round(255*P):P)).join("")}`}function L(d){d=H(d);const{values:M}=d,P=M[0],z=M[1]/100,J=M[2]/100,oe=z*Math.min(J,1-J),Re=(i,s=(i+P/30)%12)=>J-oe*Math.max(Math.min(s-3,9-s,1),-1);let pt="rgb";const Bt=[Math.round(Re(0)*255),Math.round(Re(8)*255),Math.round(Re(4)*255)];return d.type==="hsla"&&(pt+="a",Bt.push(M[3])),F({type:pt,values:Bt})}function G(d){d=H(d);let M=d.type==="hsl"||d.type==="hsla"?H(L(d)).values:d.values;return M=M.map(P=>(d.type!=="color"&&(P/=255),P<=.03928?P/12.92:su((P+.055)/1.055,2.4))),Number((.2126*M[0]+.7152*M[1]+.0722*M[2]).toFixed(3))}function he(d,M){const P=G(d),z=G(M);return(Math.max(P,z)+.05)/(Math.min(P,z)+.05)}function We(d,M){return d=H(d),M=v(M),(d.type==="rgb"||d.type==="hsl")&&(d.type+="a"),d.type==="color"?d.values[3]=`/${M}`:d.values[3]=M,F(d)}function at(d,M,P){try{return We(d,M)}catch(z){return d}}function tt(d,M){if(d=H(d),M=v(M),d.type.indexOf("hsl")!==-1)d.values[2]*=1-M;else if(d.type.indexOf("rgb")!==-1||d.type.indexOf("color")!==-1)for(let P=0;P<3;P+=1)d.values[P]*=1-M;return F(d)}function $e(d,M,P){try{return tt(d,M)}catch(z){return d}}function Ct(d,M){if(d=H(d),M=v(M),d.type.indexOf("hsl")!==-1)d.values[2]+=(100-d.values[2])*M;else if(d.type.indexOf("rgb")!==-1)for(let P=0;P<3;P+=1)d.values[P]+=(255-d.values[P])*M;else if(d.type.indexOf("color")!==-1)for(let P=0;P<3;P+=1)d.values[P]+=(1-d.values[P])*M;return F(d)}function En(d,M,P){try{return Ct(d,M)}catch(z){return d}}function Ot(d,M=.15){return G(d)>.5?tt(d,M):Ct(d,M)}function yt(d,M,P){try{return yt(d,M)}catch(z){return d}}var hn={black:"#000",white:"#fff"},on={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},In={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},lr={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Jr={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},yi={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Kr={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},cs={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};const bs=["mode","contrastThreshold","tonalOffset"],ps={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:hn.white,default:hn.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},ms={text:{primary:hn.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:hn.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function $s(d,M,P,z){const J=z.light||z,oe=z.dark||z*1.5;d[M]||(d.hasOwnProperty(P)?d[M]=d[P]:M==="light"?d.light=Ct(d.main,J):M==="dark"&&(d.dark=tt(d.main,oe)))}function Ws(d="light"){return d==="dark"?{main:yi[200],light:yi[50],dark:yi[400]}:{main:yi[700],light:yi[400],dark:yi[800]}}function $i(d="light"){return d==="dark"?{main:In[200],light:In[50],dark:In[400]}:{main:In[500],light:In[300],dark:In[700]}}function ns(d="light"){return d==="dark"?{main:lr[500],light:lr[300],dark:lr[700]}:{main:lr[700],light:lr[400],dark:lr[800]}}function Bo(d="light"){return d==="dark"?{main:Kr[400],light:Kr[300],dark:Kr[700]}:{main:Kr[700],light:Kr[500],dark:Kr[900]}}function Ao(d="light"){return d==="dark"?{main:cs[400],light:cs[300],dark:cs[700]}:{main:cs[800],light:cs[500],dark:cs[900]}}function Co(d="light"){return d==="dark"?{main:Jr[400],light:Jr[300],dark:Jr[700]}:{main:"#ed6c02",light:Jr[500],dark:Jr[900]}}function Jo(d){const{mode:M="light",contrastThreshold:P=3,tonalOffset:z=.2}=d,J=(0,Wt.Z)(d,bs),oe=d.primary||Ws(M),Re=d.secondary||$i(M),pt=d.error||ns(M),Bt=d.info||Bo(M),i=d.success||Ao(M),s=d.warning||Co(M);function u(V){return he(V,ms.text.primary)>=P?ms.text.primary:ps.text.primary}const p=({color:V,name:pe,mainShade:Fe=500,lightShade:nt=300,darkShade:Nt=700})=>{if(V=(0,ze.Z)({},V),!V.main&&V[Fe]&&(V.main=V[Fe]),!V.hasOwnProperty("main"))throw new Error(Lt(11,pe?` (${pe})`:"",Fe));if(typeof V.main!="string")throw new Error(Lt(12,pe?` (${pe})`:"",JSON.stringify(V.main)));return $s(V,"light",nt,z),$s(V,"dark",Nt,z),V.contrastText||(V.contrastText=u(V.main)),V},y={dark:ms,light:ps};return Pe((0,ze.Z)({common:(0,ze.Z)({},hn),mode:M,primary:p({color:oe,name:"primary"}),secondary:p({color:Re,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:p({color:pt,name:"error"}),warning:p({color:s,name:"warning"}),info:p({color:Bt,name:"info"}),success:p({color:i,name:"success"}),grey:on,contrastThreshold:P,getContrastText:u,augmentColor:p,tonalOffset:z},y[M]),J)}const Qs=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function co(d){return Math.round(d*1e5)/1e5}const _o={textTransform:"uppercase"},us='"Roboto", "Helvetica", "Arial", sans-serif';function Yi(d,M){const P=typeof M=="function"?M(d):M,{fontFamily:z=us,fontSize:J=14,fontWeightLight:oe=300,fontWeightRegular:Re=400,fontWeightMedium:pt=500,fontWeightBold:Bt=700,htmlFontSize:i=16,allVariants:s,pxToRem:u}=P,p=(0,Wt.Z)(P,Qs),y=J/14,A=u||(Fe=>`${Fe/i*y}rem`),V=(Fe,nt,Nt,kt,un)=>(0,ze.Z)({fontFamily:z,fontWeight:Fe,fontSize:A(nt),lineHeight:Nt},z===us?{letterSpacing:`${co(kt/nt)}em`}:{},un,s),pe={h1:V(oe,96,1.167,-1.5),h2:V(oe,60,1.2,-.5),h3:V(Re,48,1.167,0),h4:V(Re,34,1.235,.25),h5:V(Re,24,1.334,0),h6:V(pt,20,1.6,.15),subtitle1:V(Re,16,1.75,.15),subtitle2:V(pt,14,1.57,.1),body1:V(Re,16,1.5,.15),body2:V(Re,14,1.43,.15),button:V(pt,14,1.75,.4,_o),caption:V(Re,12,1.66,.4),overline:V(Re,12,2.66,1,_o),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Pe((0,ze.Z)({htmlFontSize:i,pxToRem:A,fontFamily:z,fontSize:J,fontWeightLight:oe,fontWeightRegular:Re,fontWeightMedium:pt,fontWeightBold:Bt},pe),p,{clone:!1})}const Ra=.2,xo=.14,So=.12;function jr(...d){return[`${d[0]}px ${d[1]}px ${d[2]}px ${d[3]}px rgba(0,0,0,${Ra})`,`${d[4]}px ${d[5]}px ${d[6]}px ${d[7]}px rgba(0,0,0,${xo})`,`${d[8]}px ${d[9]}px ${d[10]}px ${d[11]}px rgba(0,0,0,${So})`].join(",")}var Ua=["none",jr(0,2,1,-1,0,1,1,0,0,1,3,0),jr(0,3,1,-2,0,2,2,0,0,1,5,0),jr(0,3,3,-2,0,3,4,0,0,1,8,0),jr(0,2,4,-1,0,4,5,0,0,1,10,0),jr(0,3,5,-1,0,5,8,0,0,1,14,0),jr(0,3,5,-1,0,6,10,0,0,1,18,0),jr(0,4,5,-2,0,7,10,1,0,2,16,1),jr(0,5,5,-3,0,8,10,1,0,3,14,2),jr(0,5,6,-3,0,9,12,1,0,3,16,2),jr(0,6,6,-3,0,10,14,1,0,4,18,3),jr(0,6,7,-4,0,11,15,1,0,4,20,3),jr(0,7,8,-4,0,12,17,2,0,5,22,4),jr(0,7,8,-4,0,13,19,2,0,5,24,4),jr(0,7,9,-4,0,14,21,2,0,5,26,4),jr(0,8,9,-5,0,15,22,2,0,6,28,5),jr(0,8,10,-5,0,16,24,2,0,6,30,5),jr(0,8,11,-5,0,17,26,2,0,6,32,5),jr(0,9,11,-5,0,18,28,2,0,7,34,6),jr(0,9,12,-6,0,19,29,2,0,7,36,6),jr(0,10,13,-6,0,20,31,3,0,8,38,7),jr(0,10,13,-6,0,21,33,3,0,8,40,7),jr(0,10,14,-6,0,22,35,3,0,8,42,7),jr(0,11,14,-7,0,23,36,3,0,9,44,8),jr(0,11,15,-7,0,24,38,3,0,9,46,8)];const Il=["duration","easing","delay"],Ro={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},uo={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function _s(d){return`${Math.round(d)}ms`}function Sa(d){if(!d)return 0;const M=d/36;return Math.round((4+15*su(M,.25)+M/5)*10)}function Mo(d){const M=(0,ze.Z)({},Ro,d.easing),P=(0,ze.Z)({},uo,d.duration),z=(J=["all"],oe={})=>{const{duration:Re=P.standard,easing:pt=M.easeInOut,delay:Bt=0}=oe,i=(0,Wt.Z)(oe,Il);return(Array.isArray(J)?J:[J]).map(s=>`${s} ${typeof Re=="string"?Re:_s(Re)} ${pt} ${typeof Bt=="string"?Bt:_s(Bt)}`).join(",")};return(0,ze.Z)({getAutoHeightDuration:Sa,create:z},d,{easing:M,duration:P})}var ul={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};const Ma=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function yl(d={},...M){const{mixins:P={},palette:z={},transitions:J={},typography:oe={}}=d,Re=(0,Wt.Z)(d,Ma);if(d.vars)throw new Error(Lt(18));const pt=Jo(z),Bt=As(d);let i=Pe(Bt,{mixins:m(Bt.breakpoints,P),palette:pt,shadows:Ua.slice(),typography:Yi(pt,oe),transitions:Mo(J),zIndex:(0,ze.Z)({},ul)});return i=Pe(i,Re),i=M.reduce((s,u)=>Pe(s,u),i),i.unstable_sxConfig=(0,ze.Z)({},ir,Re==null?void 0:Re.unstable_sxConfig),i.unstable_sx=function(u){return li({sx:u,theme:this})},i}let _c=!1;function Fa(...d){return yl(...d)}var Hs=yl,ca="$$material";const ta=Hs();var Ti=xa({themeId:ca,defaultTheme:ta,defaultClassName:"MuiBox-root",generateClassName:O.generate});function ho(d,M,P=void 0){const z={};return Object.keys(d).forEach(J=>{z[J]=d[J].reduce((oe,Re)=>{if(Re){const pt=M(Re);pt!==""&&oe.push(pt),P&&P[Re]&&oe.push(P[Re])}return oe},[]).join(" ")}),z}var zt=se(73935);function Gs(d,M){typeof d=="function"?d(M):d&&(d.current=M)}function Et(...d){return Ae.useMemo(()=>d.every(M=>M==null)?null:M=>{d.forEach(P=>{Gs(P,M)})},d)}function xr(d){return d&&d.ownerDocument||document}function Po(d){return xr(d).defaultView||window}var Us=typeof window!="undefined"?Ae.useLayoutEffect:Ae.useEffect;function mo(d,M=166){let P;function z(...J){const oe=()=>{d.apply(this,J)};clearTimeout(P),P=setTimeout(oe,M)}return z.clear=()=>{clearTimeout(P)},z}const Io=["onChange","maxRows","minRows","style","value"];function bo(d){return parseInt(d,10)||0}const za={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function Qi(d){return d==null||Object.keys(d).length===0||d.outerHeightStyle===0&&!d.overflow}const Ba=Ae.forwardRef(function(M,P){const{onChange:z,maxRows:J,minRows:oe=1,style:Re,value:pt}=M,Bt=(0,Wt.Z)(M,Io),{current:i}=Ae.useRef(pt!=null),s=Ae.useRef(null),u=Et(P,s),p=Ae.useRef(null),y=Ae.useRef(0),[A,V]=Ae.useState({outerHeightStyle:0}),pe=Ae.useCallback(()=>{const kt=s.current,mr=Po(kt).getComputedStyle(kt);if(mr.width==="0px")return{outerHeightStyle:0};const yn=p.current;yn.style.width=mr.width,yn.value=kt.value||M.placeholder||"x",yn.value.slice(-1)===`
`&&(yn.value+=" ");const Ci=mr.boxSizing,ts=bo(mr.paddingBottom)+bo(mr.paddingTop),Ee=bo(mr.borderBottomWidth)+bo(mr.borderTopWidth),be=yn.scrollHeight;yn.value="x";const Ze=yn.scrollHeight;let Mn=be;oe&&(Mn=Math.max(Number(oe)*Ze,Mn)),J&&(Mn=Math.min(Number(J)*Ze,Mn)),Mn=Math.max(Mn,Ze);const cr=Mn+(Ci==="border-box"?ts+Ee:0),Vr=Math.abs(Mn-be)<=1;return{outerHeightStyle:cr,overflow:Vr}},[J,oe,M.placeholder]),Fe=(kt,un)=>{const{outerHeightStyle:mr,overflow:yn}=un;return y.current<20&&(mr>0&&Math.abs((kt.outerHeightStyle||0)-mr)>1||kt.overflow!==yn)?(y.current+=1,{overflow:yn,outerHeightStyle:mr}):kt},nt=Ae.useCallback(()=>{const kt=pe();Qi(kt)||V(un=>Fe(un,kt))},[pe]);Us(()=>{const kt=()=>{const Ze=pe();Qi(Ze)||zt.flushSync(()=>{V(Mn=>Fe(Mn,Ze))})},un=()=>{y.current=0,kt()};let mr;const yn=()=>{cancelAnimationFrame(mr),mr=requestAnimationFrame(()=>{un()})},Ci=mo(un),ts=s.current,Ee=Po(ts);Ee.addEventListener("resize",Ci);let be;return typeof ResizeObserver!="undefined"&&(be=new ResizeObserver(un),be.observe(ts)),()=>{Ci.clear(),cancelAnimationFrame(mr),Ee.removeEventListener("resize",Ci),be&&be.disconnect()}},[pe]),Us(()=>{nt()}),Ae.useEffect(()=>{y.current=0},[pt]);const Nt=kt=>{y.current=0,i||nt(),z&&z(kt)};return(0,ve.jsxs)(Ae.Fragment,{children:[(0,ve.jsx)("textarea",(0,ze.Z)({value:pt,onChange:Nt,ref:u,rows:oe,style:(0,ze.Z)({height:A.outerHeightStyle,overflow:A.overflow?"hidden":void 0},Re)},Bt)),(0,ve.jsx)("textarea",{"aria-hidden":!0,className:M.className,readOnly:!0,ref:p,tabIndex:-1,style:(0,ze.Z)({},za.shadow,Re,{paddingTop:0,paddingBottom:0})})]})});function ua(d){return typeof d=="string"}function Qa({props:d,states:M,muiFormControl:P}){return M.reduce((z,J)=>(z[J]=d[J],P&&typeof d[J]=="undefined"&&(z[J]=P[J]),z),{})}var Xr=Ae.createContext(void 0);function $r(){return Ae.useContext(Xr)}const Fs=["variant"];function Zs(d){return d.length===0}function U(d){const{variant:M}=d,P=(0,Wt.Z)(d,Fs);let z=M||"";return Object.keys(P).sort().forEach(J=>{J==="color"?z+=Zs(z)?d[J]:Qe(d[J]):z+=`${Zs(z)?J:Qe(J)}${Qe(d[J].toString())}`}),z}const q=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function me(d){return Object.keys(d).length===0}function Je(d){return typeof d=="string"&&d.charCodeAt(0)>96}const xt=(d,M)=>M.components&&M.components[d]&&M.components[d].styleOverrides?M.components[d].styleOverrides:null,je=d=>{const M={};return d&&d.forEach(P=>{const z=U(P.props);M[z]=P.style}),M},Dt=(d,M)=>{let P=[];return M&&M.components&&M.components[d]&&M.components[d].variants&&(P=M.components[d].variants),je(P)},ln=(d,M,P)=>{const{ownerState:z={}}=d,J=[];return P&&P.forEach(oe=>{let Re=!0;Object.keys(oe.props).forEach(pt=>{z[pt]!==oe.props[pt]&&d[pt]!==oe.props[pt]&&(Re=!1)}),Re&&J.push(M[U(oe.props)])}),J},Sn=(d,M,P,z)=>{var J;const oe=P==null||(J=P.components)==null||(J=J[z])==null?void 0:J.variants;return ln(d,M,oe)};function gn(d){return d!=="ownerState"&&d!=="theme"&&d!=="sx"&&d!=="as"}const An=As(),wn=d=>d&&d.charAt(0).toLowerCase()+d.slice(1);function xs({defaultTheme:d,theme:M,themeId:P}){return me(M)?d:M[P]||M}function Dr(d){return d?(M,P)=>P[d]:null}const pr=({styledArg:d,props:M,defaultTheme:P,themeId:z})=>{const J=d((0,ze.Z)({},M,{theme:xs((0,ze.Z)({},M,{defaultTheme:P,themeId:z}))}));let oe;if(J&&J.variants&&(oe=J.variants,delete J.variants),oe){const Re=ln(M,je(oe),oe);return[J,...Re]}return J};function $(d={}){const{themeId:M,defaultTheme:P=An,rootShouldForwardProp:z=gn,slotShouldForwardProp:J=gn}=d,oe=Re=>li((0,ze.Z)({},Re,{theme:xs((0,ze.Z)({},Re,{defaultTheme:P,themeId:M}))}));return oe.__mui_systemSx=!0,(Re,pt={})=>{Kt(Re,kt=>kt.filter(un=>!(un!=null&&un.__mui_systemSx)));const{name:Bt,slot:i,skipVariantsResolver:s,skipSx:u,overridesResolver:p=Dr(wn(i))}=pt,y=(0,Wt.Z)(pt,q),A=s!==void 0?s:i&&i!=="Root"&&i!=="root"||!1,V=u||!1;let pe,Fe=gn;i==="Root"||i==="root"?Fe=z:i?Fe=J:Je(Re)&&(Fe=void 0);const nt=ke(Re,(0,ze.Z)({shouldForwardProp:Fe,label:pe},y)),Nt=(kt,...un)=>{const mr=un?un.map(Ee=>{if(typeof Ee=="function"&&Ee.__emotion_real!==Ee)return be=>pr({styledArg:Ee,props:be,defaultTheme:P,themeId:M});if(Se(Ee)){let be=Ee,Ze;return Ee&&Ee.variants&&(Ze=Ee.variants,delete be.variants,be=Mn=>{let cr=Ee;return ln(Mn,je(Ze),Ze).forEach(Br=>{cr=Pe(cr,Br)}),cr}),be}return Ee}):[];let yn=kt;if(Se(kt)){let Ee;kt&&kt.variants&&(Ee=kt.variants,delete yn.variants,yn=be=>{let Ze=kt;return ln(be,je(Ee),Ee).forEach(cr=>{Ze=Pe(Ze,cr)}),Ze})}else typeof kt=="function"&&kt.__emotion_real!==kt&&(yn=Ee=>pr({styledArg:kt,props:Ee,defaultTheme:P,themeId:M}));Bt&&p&&mr.push(Ee=>{const be=xs((0,ze.Z)({},Ee,{defaultTheme:P,themeId:M})),Ze=xt(Bt,be);if(Ze){const Mn={};return Object.entries(Ze).forEach(([cr,Vr])=>{Mn[cr]=typeof Vr=="function"?Vr((0,ze.Z)({},Ee,{theme:be})):Vr}),p(Ee,Mn)}return null}),Bt&&!A&&mr.push(Ee=>{const be=xs((0,ze.Z)({},Ee,{defaultTheme:P,themeId:M}));return Sn(Ee,Dt(Bt,be),be,Bt)}),V||mr.push(oe);const Ci=mr.length-un.length;if(Array.isArray(kt)&&Ci>0){const Ee=new Array(Ci).fill("");yn=[...kt,...Ee],yn.raw=[...kt.raw,...Ee]}const ts=nt(yn,...mr);return Re.muiName&&(ts.muiName=Re.muiName),ts};return nt.withConfig&&(Nt.withConfig=nt.withConfig),Nt}}var fs=Hs();const ki=d=>gn(d)&&d!=="classes",Ps=null;var Hi=$({themeId:ca,defaultTheme:fs,rootShouldForwardProp:ki});function Lo(d,M){const P=(0,ze.Z)({},M);return Object.keys(d).forEach(z=>{if(z.toString().match(/^(components|slots)$/))P[z]=(0,ze.Z)({},d[z],P[z]);else if(z.toString().match(/^(componentsProps|slotProps)$/)){const J=d[z]||{},oe=M[z];P[z]={},!oe||!Object.keys(oe)?P[z]=J:!J||!Object.keys(J)?P[z]=oe:(P[z]=(0,ze.Z)({},oe),Object.keys(J).forEach(Re=>{P[z][Re]=Lo(J[Re],oe[Re])}))}else P[z]===void 0&&(P[z]=d[z])}),P}function rs(d){const{theme:M,name:P,props:z}=d;return!M||!M.components||!M.components[P]||!M.components[P].defaultProps?z:Lo(M.components[P].defaultProps,z)}function Ds({props:d,name:M,defaultTheme:P,themeId:z}){let J=oi(P);return z&&(J=J[z]||J),rs({theme:J,name:M,props:d})}function io({props:d,name:M}){return Ds({props:d,name:M,defaultTheme:fs,themeId:ca})}var Ys=Qe,go=Et,as=Us,so=se(70917);function ws(d){return d==null||Object.keys(d).length===0}function Ui(d){const{styles:M,defaultTheme:P={}}=d,z=typeof M=="function"?J=>M(ws(J)?P:J):M;return(0,ve.jsx)(so.xB,{styles:z})}function $o({styles:d,themeId:M,defaultTheme:P={}}){const z=oi(P),J=typeof d=="function"?d(M&&z[M]||z):d;return(0,ve.jsx)(Ui,{styles:J})}var fl=$o;function Do(d){return(0,ve.jsx)(fl,(0,ze.Z)({},d,{defaultTheme:fs,themeId:ca}))}var Pa=Do;function ka(d){return d!=null&&!(Array.isArray(d)&&d.length===0)}function _l(d,M=!1){return d&&(ka(d.value)&&d.value!==""||M&&ka(d.defaultValue)&&d.defaultValue!=="")}function ou(d){return d.startAdornment}const xc={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Ha(d,M,P="Mui"){const z=xc[M];return z?`${P}-${z}`:`${O.generate(d)}-${M}`}function tc(d,M,P="Mui"){const z={};return M.forEach(J=>{z[J]=Ha(d,J,P)}),z}function Vl(d){return Ha("MuiInputBase",d)}var Ll=tc("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);const _i=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],Dl=(d,M)=>{const{ownerState:P}=d;return[M.root,P.formControl&&M.formControl,P.startAdornment&&M.adornedStart,P.endAdornment&&M.adornedEnd,P.error&&M.error,P.size==="small"&&M.sizeSmall,P.multiline&&M.multiline,P.color&&M[`color${Ys(P.color)}`],P.fullWidth&&M.fullWidth,P.hiddenLabel&&M.hiddenLabel]},Ia=(d,M)=>{const{ownerState:P}=d;return[M.input,P.size==="small"&&M.inputSizeSmall,P.multiline&&M.inputMultiline,P.type==="search"&&M.inputTypeSearch,P.startAdornment&&M.inputAdornedStart,P.endAdornment&&M.inputAdornedEnd,P.hiddenLabel&&M.inputHiddenLabel]},yf=d=>{const{classes:M,color:P,disabled:z,error:J,endAdornment:oe,focused:Re,formControl:pt,fullWidth:Bt,hiddenLabel:i,multiline:s,readOnly:u,size:p,startAdornment:y,type:A}=d,V={root:["root",`color${Ys(P)}`,z&&"disabled",J&&"error",Bt&&"fullWidth",Re&&"focused",pt&&"formControl",p&&p!=="medium"&&`size${Ys(p)}`,s&&"multiline",y&&"adornedStart",oe&&"adornedEnd",i&&"hiddenLabel",u&&"readOnly"],input:["input",z&&"disabled",A==="search"&&"inputTypeSearch",s&&"inputMultiline",p==="small"&&"inputSizeSmall",i&&"inputHiddenLabel",y&&"inputAdornedStart",oe&&"inputAdornedEnd",u&&"readOnly"]};return ho(V,Vl,M)},zu=Hi("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Dl})(({theme:d,ownerState:M})=>(0,ze.Z)({},d.typography.body1,{color:(d.vars||d).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Ll.disabled}`]:{color:(d.vars||d).palette.text.disabled,cursor:"default"}},M.multiline&&(0,ze.Z)({padding:"4px 0 5px"},M.size==="small"&&{paddingTop:1}),M.fullWidth&&{width:"100%"})),xl=Hi("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Ia})(({theme:d,ownerState:M})=>{const P=d.palette.mode==="light",z=(0,ze.Z)({color:"currentColor"},d.vars?{opacity:d.vars.opacity.inputPlaceholder}:{opacity:P?.42:.5},{transition:d.transitions.create("opacity",{duration:d.transitions.duration.shorter})}),J={opacity:"0 !important"},oe=d.vars?{opacity:d.vars.opacity.inputPlaceholder}:{opacity:P?.42:.5};return(0,ze.Z)({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":z,"&::-moz-placeholder":z,"&:-ms-input-placeholder":z,"&::-ms-input-placeholder":z,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Ll.formControl} &`]:{"&::-webkit-input-placeholder":J,"&::-moz-placeholder":J,"&:-ms-input-placeholder":J,"&::-ms-input-placeholder":J,"&:focus::-webkit-input-placeholder":oe,"&:focus::-moz-placeholder":oe,"&:focus:-ms-input-placeholder":oe,"&:focus::-ms-input-placeholder":oe},[`&.${Ll.disabled}`]:{opacity:1,WebkitTextFillColor:(d.vars||d).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},M.size==="small"&&{paddingTop:1},M.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},M.type==="search"&&{MozAppearance:"textfield"})}),Sc=(0,ve.jsx)(Pa,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}});var au=Ae.forwardRef(function(M,P){var z;const J=io({props:M,name:"MuiInputBase"}),{"aria-describedby":oe,autoComplete:Re,autoFocus:pt,className:Bt,components:i={},componentsProps:s={},defaultValue:u,disabled:p,disableInjectingGlobalStyles:y,endAdornment:A,fullWidth:V=!1,id:pe,inputComponent:Fe="input",inputProps:nt={},inputRef:Nt,maxRows:kt,minRows:un,multiline:mr=!1,name:yn,onBlur:Ci,onChange:ts,onClick:Ee,onFocus:be,onKeyDown:Ze,onKeyUp:Mn,placeholder:cr,readOnly:Vr,renderSuffix:Br,rows:Oi,slotProps:qs={},slots:Gi={},startAdornment:ao,type:Na="text",value:ef}=J,tf=(0,Wt.Z)(J,_i),ql=nt.value!=null?nt.value:ef,{current:Qc}=Ae.useRef(ql!=null),kl=Ae.useRef(),_u=Ae.useCallback(Fo=>{},[]),eu=go(kl,Nt,nt.ref,_u),[Nc,mc]=Ae.useState(!1),Eo=$r(),sa=Qa({props:J,muiFormControl:Eo,states:["color","disabled","error","hiddenLabel","size","required","filled"]});sa.focused=Eo?Eo.focused:Nc,Ae.useEffect(()=>{!Eo&&p&&Nc&&(mc(!1),Ci&&Ci())},[Eo,p,Nc,Ci]);const is=Eo&&Eo.onFilled,Hl=Eo&&Eo.onEmpty,xu=Ae.useCallback(Fo=>{_l(Fo)?is&&is():Hl&&Hl()},[is,Hl]);as(()=>{Qc&&xu({value:ql})},[ql,xu,Qc]);const Qd=Fo=>{if(sa.disabled){Fo.stopPropagation();return}be&&be(Fo),nt.onFocus&&nt.onFocus(Fo),Eo&&Eo.onFocus?Eo.onFocus(Fo):mc(!0)},eh=Fo=>{Ci&&Ci(Fo),nt.onBlur&&nt.onBlur(Fo),Eo&&Eo.onBlur?Eo.onBlur(Fo):mc(!1)},th=(Fo,...ed)=>{if(!Qc){const td=Fo.target||kl.current;if(td==null)throw new Error(Lt(1));xu({value:td.value})}nt.onChange&&nt.onChange(Fo,...ed),ts&&ts(Fo,...ed)};Ae.useEffect(()=>{xu(kl.current)},[]);const nh=Fo=>{kl.current&&Fo.currentTarget===Fo.target&&kl.current.focus(),Ee&&Ee(Fo)};let Tf=Fe,Jl=nt;mr&&Tf==="input"&&(Oi?Jl=(0,ze.Z)({type:void 0,minRows:Oi,maxRows:Oi},Jl):Jl=(0,ze.Z)({type:void 0,maxRows:kt,minRows:un},Jl),Tf=Ba);const rh=Fo=>{xu(Fo.animationName==="mui-auto-fill-cancel"?kl.current:{value:"x"})};Ae.useEffect(()=>{Eo&&Eo.setAdornedStart(!!ao)},[Eo,ao]);const nf=(0,ze.Z)({},J,{color:sa.color||"primary",disabled:sa.disabled,endAdornment:A,error:sa.error,focused:sa.focused,formControl:Eo,fullWidth:V,hiddenLabel:sa.hiddenLabel,multiline:mr,size:sa.size,startAdornment:ao,type:Na}),Jf=yf(nf),$f=Gi.root||i.Root||zu,Af=qs.root||s.root||{},Qf=Gi.input||i.Input||xl;return Jl=(0,ze.Z)({},Jl,(z=qs.input)!=null?z:s.input),(0,ve.jsxs)(Ae.Fragment,{children:[!y&&Sc,(0,ve.jsxs)($f,(0,ze.Z)({},Af,!ua($f)&&{ownerState:(0,ze.Z)({},nf,Af.ownerState)},{ref:P,onClick:nh},tf,{className:en(Jf.root,Af.className,Bt,Vr&&"MuiInputBase-readOnly"),children:[ao,(0,ve.jsx)(Xr.Provider,{value:null,children:(0,ve.jsx)(Qf,(0,ze.Z)({ownerState:nf,"aria-invalid":sa.error,"aria-describedby":oe,autoComplete:Re,autoFocus:pt,defaultValue:u,disabled:sa.disabled,id:pe,onAnimationStart:rh,name:yn,placeholder:cr,readOnly:Vr,required:sa.required,rows:Oi,value:ql,onKeyDown:Ze,onKeyUp:Mn,type:Na},Jl,!ua(Qf)&&{as:Tf,ownerState:(0,ze.Z)({},nf,Jl.ownerState)},{ref:eu,className:en(Jf.input,Jl.className,Vr&&"MuiInputBase-readOnly"),onBlur:eh,onChange:th,onFocus:Qd}))}),A,Br?Br((0,ze.Z)({},sa,{startAdornment:ao})):null]}))]})});function Da(d){const{children:M,defer:P=!1,fallback:z=null}=d,[J,oe]=Ae.useState(!1);return Us(()=>{P||oe(!0)},[P]),Ae.useEffect(()=>{P&&oe(!0)},[P]),(0,ve.jsx)(Ae.Fragment,{children:J?M:z})}function nc(d){return Ha("MuiSvgIcon",d)}const Wl=tc("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var kc=null;const Mc=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Sl=d=>{const{color:M,fontSize:P,classes:z}=d,J={root:["root",M!=="inherit"&&`color${Ys(M)}`,`fontSize${Ys(P)}`]};return ho(J,nc,z)},dl=Hi("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(d,M)=>{const{ownerState:P}=d;return[M.root,P.color!=="inherit"&&M[`color${Ys(P.color)}`],M[`fontSize${Ys(P.fontSize)}`]]}})(({theme:d,ownerState:M})=>{var P,z,J,oe,Re,pt,Bt,i,s,u,p,y,A;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:M.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(P=d.transitions)==null||(z=P.create)==null?void 0:z.call(P,"fill",{duration:(J=d.transitions)==null||(J=J.duration)==null?void 0:J.shorter}),fontSize:{inherit:"inherit",small:((oe=d.typography)==null||(Re=oe.pxToRem)==null?void 0:Re.call(oe,20))||"1.25rem",medium:((pt=d.typography)==null||(Bt=pt.pxToRem)==null?void 0:Bt.call(pt,24))||"1.5rem",large:((i=d.typography)==null||(s=i.pxToRem)==null?void 0:s.call(i,35))||"2.1875rem"}[M.fontSize],color:(u=(p=(d.vars||d).palette)==null||(p=p[M.color])==null?void 0:p.main)!=null?u:{action:(y=(d.vars||d).palette)==null||(y=y.action)==null?void 0:y.active,disabled:(A=(d.vars||d).palette)==null||(A=A.action)==null?void 0:A.disabled,inherit:void 0}[M.color]}}),Ml=Ae.forwardRef(function(M,P){const z=io({props:M,name:"MuiSvgIcon"}),{children:J,className:oe,color:Re="inherit",component:pt="svg",fontSize:Bt="medium",htmlColor:i,inheritViewBox:s=!1,titleAccess:u,viewBox:p="0 0 24 24"}=z,y=(0,Wt.Z)(z,Mc),A=Ae.isValidElement(J)&&J.type==="svg",V=(0,ze.Z)({},z,{color:Re,component:pt,fontSize:Bt,instanceFontSize:M.fontSize,inheritViewBox:s,viewBox:p,hasSvgAsChild:A}),pe={};s||(pe.viewBox=p);const Fe=Sl(V);return(0,ve.jsxs)(dl,(0,ze.Z)({as:pt,className:en(Fe.root,oe),focusable:"false",color:i,"aria-hidden":u?void 0:!0,role:u?"img":void 0,ref:P},pe,y,A&&J.props,{ownerState:V,children:[A?J.props.children:J,u?(0,ve.jsx)("title",{children:u}):null]}))});Ml.muiName="SvgIcon";var wo=Ml,Bu=d=>{let M;return d<1?M=5.11916*su(d,2):M=4.5*Math.log(d+1)+2,(M/100).toFixed(2)};function ba(d){return Ha("MuiPaper",d)}const da=tc("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);var ku=null;const Hu=["className","component","elevation","square","variant"],Gu=d=>{const{square:M,elevation:P,variant:z,classes:J}=d,oe={root:["root",z,!M&&"rounded",z==="elevation"&&`elevation${P}`]};return ho(oe,ba,J)},ds=Hi("div",{name:"MuiPaper",slot:"Root",overridesResolver:(d,M)=>{const{ownerState:P}=d;return[M.root,M[P.variant],!P.square&&M.rounded,P.variant==="elevation"&&M[`elevation${P.elevation}`]]}})(({theme:d,ownerState:M})=>{var P;return(0,ze.Z)({backgroundColor:(d.vars||d).palette.background.paper,color:(d.vars||d).palette.text.primary,transition:d.transitions.create("box-shadow")},!M.square&&{borderRadius:d.shape.borderRadius},M.variant==="outlined"&&{border:`1px solid ${(d.vars||d).palette.divider}`},M.variant==="elevation"&&(0,ze.Z)({boxShadow:(d.vars||d).shadows[M.elevation]},!d.vars&&d.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${We("#fff",Bu(M.elevation))}, ${We("#fff",Bu(M.elevation))})`},d.vars&&{backgroundImage:(P=d.vars.overlays)==null?void 0:P[M.elevation]}))});var tl=Ae.forwardRef(function(M,P){const z=io({props:M,name:"MuiPaper"}),{className:J,component:oe="div",elevation:Re=1,square:pt=!1,variant:Bt="elevation"}=z,i=(0,Wt.Z)(z,Hu),s=(0,ze.Z)({},z,{component:oe,elevation:Re,square:pt,variant:Bt}),u=Gu(s);return(0,ve.jsx)(ds,(0,ze.Z)({as:oe,ownerState:s,className:en(u.root,J),ref:P},i))}),Ga=Ae.createContext(null);function Ol(){return Ae.useContext(Ga)}var bc=typeof Symbol=="function"&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";function ic(d,M){return typeof M=="function"?M(d):(0,ze.Z)({},d,M)}function Hc(d){const{children:M,theme:P}=d,z=Ol(),J=Ae.useMemo(()=>{const oe=z===null?P:ic(z,P);return oe!=null&&(oe[bc]=z!==null),oe},[P,z]);return(0,ve.jsx)(Ga.Provider,{value:J,children:M})}var wc=Hc;const sc={};function na(d,M,P,z=!1){return Ae.useMemo(()=>{const J=d&&M[d]||M;if(typeof P=="function"){const oe=P(J),Re=d?(0,ze.Z)({},M,{[d]:oe}):oe;return z?()=>Re:Re}return d?(0,ze.Z)({},M,{[d]:P}):(0,ze.Z)({},M,P)},[d,M,P,z])}function Ec(d){const{children:M,theme:P,themeId:z}=d,J=Ni(sc),oe=Ol()||sc,Re=na(z,J,P),pt=na(z,oe,P,!0);return(0,ve.jsx)(wc,{theme:pt,children:(0,ve.jsx)(tn.T.Provider,{value:Re,children:M})})}var bl=Ec;const oc=["theme"];function Gc(d){let{theme:M}=d,P=(0,Wt.Z)(d,oc);const z=M[ca];return(0,ve.jsx)(bl,(0,ze.Z)({},P,{themeId:z?ca:void 0,theme:z||M}))}var Qn=se(43973),ra=se(52798);const{useDebugValue:_f}=Ae,{useSyncExternalStoreWithSelector:Oo}=ra;let ha=!1;function nl(d,M=d.getState,P){P&&!ha&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),ha=!0);const z=Oo(d.subscribe,d.getState,d.getServerState||d.getState,M,P);return _f(z),z}const nr=d=>{typeof d!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const M=typeof d=="function"?(0,Qn.M)(d):d,P=(z,J)=>nl(M,z,J);return Object.assign(P,M),P},ko=d=>d?nr(d):nr;var ac=d=>(console.warn("[DEPRECATED] Default export is deprecated. Instead use `import { create } from 'zustand'`."),ko(d)),Vu=se(20640);function vo(d){var M,P,z="";if(typeof d=="string"||typeof d=="number")z+=d;else if(typeof d=="object")if(Array.isArray(d))for(M=0;M<d.length;M++)d[M]&&(P=vo(d[M]))&&(z&&(z+=" "),z+=P);else for(M in d)d[M]&&(z&&(z+=" "),z+=M);return z}function hl(){for(var d,M,P=0,z="";P<arguments.length;)(d=arguments[P++])&&(M=vo(d))&&(z&&(z+=" "),z+=M);return z}const hs={scheme:"Light Theme",author:"mac gainor (https://github.com/mac-s-g)",base00:"rgba(0, 0, 0, 0)",base01:"rgb(245, 245, 245)",base02:"rgb(235, 235, 235)",base03:"#93a1a1",base04:"rgba(0, 0, 0, 0.3)",base05:"#586e75",base06:"#073642",base07:"#002b36",base08:"#d33682",base09:"#cb4b16",base0A:"#ffd500",base0B:"#859900",base0C:"#6c71c4",base0D:"#586e75",base0E:"#2aa198",base0F:"#268bd2"},Vc={scheme:"Dark Theme",author:"Chris Kempson (http://chriskempson.com)",base00:"#181818",base01:"#282828",base02:"#383838",base03:"#585858",base04:"#b8b8b8",base05:"#d8d8d8",base06:"#e8e8e8",base07:"#f8f8f8",base08:"#ab4642",base09:"#dc9656",base0A:"#f7ca88",base0B:"#a1b56c",base0C:"#86c1b9",base0D:"#7cafc2",base0E:"#ba8baf",base0F:"#a16946"},cu=()=>null;cu.when=()=>!1;const Wu=d=>{var M,P,z,J,oe,Re,pt,Bt,i,s,u,p,y,A,V,pe,Fe,nt;return ko()((Nt,kt)=>({enableClipboard:(M=d.enableClipboard)!==null&&M!==void 0?M:!0,highlightUpdates:(P=d.highlightUpdates)!==null&&P!==void 0?P:!1,indentWidth:(z=d.indentWidth)!==null&&z!==void 0?z:3,groupArraysAfterLength:(J=d.groupArraysAfterLength)!==null&&J!==void 0?J:100,collapseStringsAfterLength:d.collapseStringsAfterLength===!1?Number.MAX_VALUE:(oe=d.collapseStringsAfterLength)!==null&&oe!==void 0?oe:50,maxDisplayLength:(Re=d.maxDisplayLength)!==null&&Re!==void 0?Re:30,rootName:(pt=d.rootName)!==null&&pt!==void 0?pt:"root",onChange:(Bt=d.onChange)!==null&&Bt!==void 0?Bt:()=>{},onCopy:(i=d.onCopy)!==null&&i!==void 0?i:void 0,onSelect:(s=d.onSelect)!==null&&s!==void 0?s:void 0,keyRenderer:(u=d.keyRenderer)!==null&&u!==void 0?u:cu,editable:(p=d.editable)!==null&&p!==void 0?p:!1,defaultInspectDepth:(y=d.defaultInspectDepth)!==null&&y!==void 0?y:5,defaultInspectControl:(A=d.defaultInspectControl)!==null&&A!==void 0?A:void 0,objectSortKeys:(V=d.objectSortKeys)!==null&&V!==void 0?V:!1,quotesOnKeys:(pe=d.quotesOnKeys)!==null&&pe!==void 0?pe:!0,displayDataTypes:(Fe=d.displayDataTypes)!==null&&Fe!==void 0?Fe:!0,inspectCache:{},hoverPath:null,colorspace:hs,value:d.value,prevValue:void 0,displaySize:(nt=d.displaySize)!==null&&nt!==void 0?nt:!0,getInspectCache:(un,mr)=>{const yn=mr!==void 0?un.join(".")+"[".concat(mr,"]nt"):un.join(".");return kt().inspectCache[yn]},setInspectCache:(un,mr,yn)=>{const Ci=yn!==void 0?un.join(".")+"[".concat(yn,"]nt"):un.join(".");Nt(ts=>({inspectCache:si(Rt({},ts.inspectCache),{[Ci]:typeof mr=="function"?mr(ts.inspectCache[Ci]):mr})}))},setHover:(un,mr)=>{Nt({hoverPath:un?{path:un,nestedIndex:mr}:null})}}))},lc=(0,Ae.createContext)(void 0);lc.Provider;const xi=(d,M)=>{const P=(0,Ae.useContext)(lc);return nl(P,d,M)},Wc=()=>xi(d=>d.colorspace.base07),jc=Object.prototype.constructor.toString();function uu(d){if(!d||typeof d!="object")return!1;const M=Object.getPrototypeOf(d);if(M===null)return!0;const P=Object.hasOwnProperty.call(M,"constructor")&&M.constructor;return P===Object?!0:typeof P=="function"&&Function.toString.call(P)===jc}function Cr(d){return d?uu(d)||Array.isArray(d)||d instanceof Map||d instanceof Set:!1}function ju(d){return Array.isArray(d)?Array.prototype.slice.call(d):d instanceof Set?new Set(d):d instanceof Map?new Map(d):typeof d=="object"&&d!==null?Object.assign({},d):d}function fu(d,M,P){if(typeof d!="object"||d===null){if(M.length!==0)throw new Error("path is incorrect");return P}Cr(d)&&(d=ju(d));const[J,...oe]=M;if(J!==void 0){if(J==="__proto__")throw new TypeError("Modification of prototype is not allowed");oe.length>0?d[J]=fu(d[J],oe,P):d[J]=P}return d}function wa(d,M,P,z,J){return{is:d,Component:M,Editor:P,PreComponent:z,PostComponent:J}}function Xu(d){let{is:M,serialize:P,deserialize:z,Component:J,Editor:oe,PreComponent:Re,PostComponent:pt}=d;return{is:M,serialize:P,deserialize:z,Component:J,Editor:oe,PreComponent:Re,PostComponent:pt}}const cc=(d,M,P)=>{if(d===null||P===null||typeof d!="object"||typeof P!="object")return!1;if(Object.is(d,P)&&M.length!==0)return"";const z=[],J=[...M];let oe=d;for(;oe!==P||J.length!==0;){if(typeof oe!="object"||oe===null)return!1;if(Object.is(oe,P))return z.reduce((pt,Bt,i)=>typeof Bt=="number"?pt+"[".concat(Bt,"]"):pt+"".concat(i===0?"":".").concat(Bt),"");const Re=J.shift();z.push(Re),oe=oe[Re]}return!1};function Ho(d){return d===null?0:Array.isArray(d)?d.length:d instanceof Map||d instanceof Set?d.size:d instanceof Date?1:typeof d=="object"?Object.keys(d).length:typeof d=="string"?d.length:1}function jl(d,M){const P=[];let z=0;for(;z<d.length;)P.push(d.slice(z,z+M)),z+=M;return P}function No(d,M){const P=[];function z(J,oe){if(typeof oe=="bigint")return oe.toString();if(oe instanceof Map){if("toJSON"in oe&&typeof oe.toJSON=="function")return oe.toJSON();if(oe.size===0)return{};if(P.includes(oe))return"[Circular]";P.push(oe);const Re=Array.from(oe.entries());return Re.every(pt=>{let[Bt]=pt;return typeof Bt=="string"||typeof Bt=="number"})?Object.fromEntries(Re):{}}if(oe instanceof Set)return"toJSON"in oe&&typeof oe.toJSON=="function"?oe.toJSON():P.includes(oe)?"[Circular]":(P.push(oe),Array.from(oe.values()));if(typeof oe=="object"&&oe!==null&&Object.keys(oe).length){const Re=P.length;if(Re){for(let pt=Re-1;pt>=0&&P[pt][J]!==oe;--pt)P.pop();if(P.includes(oe))return"[Circular]"}P.push(oe)}return oe}return JSON.stringify(d,z,M)}function wi(d){return Bc(this,null,function*(){if("clipboard"in navigator)try{yield navigator.clipboard.writeText(d)}catch(M){}Vu(d)})}function Tc(){let{timeout:d=2e3}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const[M,P]=(0,Ae.useState)(!1),z=(0,Ae.useRef)(null),J=(0,Ae.useCallback)(Bt=>{const i=z.current;i&&window.clearTimeout(i),z.current=window.setTimeout(()=>P(!1),d),P(Bt)},[d]),oe=xi(Bt=>Bt.onCopy),Re=(0,Ae.useCallback)((Bt,i)=>Bc(this,null,function*(){if(typeof oe=="function")try{yield oe(Bt,i,wi),J(!0)}catch(s){console.error("error when copy ".concat(Bt.length===0?"src":"src[".concat(Bt.join(".")),"]"),s)}else try{const s=No(typeof i=="function"?i.toString():i,"  ");yield wi(s),J(!0)}catch(s){console.error("error when copy ".concat(Bt.length===0?"src":"src[".concat(Bt.join(".")),"]"),s)}}),[J,oe]),pt=(0,Ae.useCallback)(()=>{P(!1),z.current&&clearTimeout(z.current)},[]);return{copy:Re,reset:pt,copied:M}}function Va(d,M){const P=xi(z=>z.value);return(0,Ae.useMemo)(()=>cc(P,d,M),[d,M,P])}function Xl(d,M,P){const z=d.length,J=Va(d,M),oe=xi(p=>p.getInspectCache),Re=xi(p=>p.setInspectCache),pt=xi(p=>p.defaultInspectDepth),Bt=xi(p=>p.defaultInspectControl);(0,Ae.useEffect)(()=>{if(oe(d,P)!==void 0)return;if(P!==void 0){Re(d,!1,P);return}const y=J?!1:typeof Bt=="function"?Bt(d,M):z<pt;Re(d,y)},[pt,Bt,z,oe,J,P,d,M,Re]);const[i,s]=(0,Ae.useState)(()=>{const p=oe(d,P);return p!==void 0?p:P!==void 0||J?!1:typeof Bt=="function"?Bt(d,M):z<pt}),u=(0,Ae.useCallback)(p=>{s(y=>{const A=typeof p=="boolean"?p:p(y);return Re(d,A,P),A})},[P,d,Re]);return[i,u]}const Wa=d=>(0,ve.jsx)(Ti,si(Rt({component:"div"},d),{sx:Rt({display:"inline-block"},d.sx)})),pl=d=>{let{dataType:M,enable:P=!0}=d;return P?(0,ve.jsx)(Wa,{className:"data-type-label",sx:{mx:.5,fontSize:"0.7rem",opacity:.8,userSelect:"none"},children:M}):null};function Go(d){let{is:M,serialize:P,deserialize:z,type:J,colorKey:oe,displayTypeLabel:Re=!0,Renderer:pt}=d;const Bt=(0,Ae.memo)(pt),i=u=>{const p=xi(V=>V.displayDataTypes),y=xi(V=>V.colorspace[oe]),A=xi(V=>V.onSelect);return(0,ve.jsxs)(Wa,{onClick:()=>{var V;return(V=A)===null||V===void 0?void 0:V(u.path,u.value)},sx:{color:y},children:[Re&&p&&(0,ve.jsx)(pl,{dataType:J}),(0,ve.jsx)(Wa,{className:"".concat(J,"-value"),children:(0,ve.jsx)(Bt,{path:u.path,inspect:u.inspect,setInspect:u.setInspect,value:u.value,prevValue:u.prevValue})})]})};if(i.displayName="easy-".concat(J,"-type"),!P||!z)return{is:M,Component:i};const s=u=>{let{value:p,setValue:y,abortEditing:A,commitEditing:V}=u;const pe=xi(Nt=>Nt.colorspace[oe]),Fe=(0,Ae.useCallback)(Nt=>{Nt.key==="Enter"&&(Nt.preventDefault(),V(p)),Nt.key==="Escape"&&(Nt.preventDefault(),A())},[A,V,p]),nt=(0,Ae.useCallback)(Nt=>{y(Nt.target.value)},[y]);return(0,ve.jsx)(au,{autoFocus:!0,value:p,onChange:nt,onKeyDown:Fe,size:"small",multiline:!0,sx:{color:pe,padding:.5,borderStyle:"solid",borderColor:"black",borderWidth:1,fontSize:"0.8rem",fontFamily:"monospace",display:"inline-flex"}})};return s.displayName="easy-".concat(J,"-type-editor"),{is:M,serialize:P,deserialize:z,Component:i,Editor:s}}const Nl=Go({is:d=>typeof d=="boolean",type:"bool",colorKey:"base0E",serialize:d=>d.toString(),deserialize:d=>{if(d==="true")return!0;if(d==="false")return!1;throw new Error("Invalid boolean value")},Renderer:d=>{let{value:M}=d;return(0,ve.jsx)(ve.Fragment,{children:M?"true":"false"})}}),Ac={weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"},uc=Go({is:d=>d instanceof Date,type:"date",colorKey:"base0D",Renderer:d=>{let{value:M}=d;return(0,ve.jsx)(ve.Fragment,{children:M.toLocaleTimeString("en-us",Ac)})}}),Cc=d=>{const M=d.toString();let P=!0;const z=M.indexOf(")"),J=M.indexOf("=>");return J!==-1&&J>z&&(P=!1),P?M.substring(M.indexOf("{",z)+1,M.lastIndexOf("}")):M.substring(M.indexOf("=>")+2)},fc=d=>{const M=d.toString();return M.indexOf("function")!==-1?M.substring(8,M.indexOf("{")).trim():M.substring(0,M.indexOf("=>")+2).trim()},Xc="{",Rc="}",eo={is:d=>typeof d=="function",Component:d=>{const M=xi(P=>P.colorspace.base05);return(0,ve.jsx)(Da,{children:(0,ve.jsx)(Ti,{className:"data-function",sx:{display:d.inspect?"block":"inline-block",pl:d.inspect?2:0,color:M},children:d.inspect?Cc(d.value):(0,ve.jsx)(Ti,{component:"span",className:"data-function-body",onClick:()=>d.setInspect(!0),sx:{"&:hover":{cursor:"pointer"},padding:.5},children:"\u2026"})})})},PreComponent:d=>(0,ve.jsxs)(Da,{children:[(0,ve.jsx)(pl,{dataType:"function"}),(0,ve.jsxs)(Ti,{component:"span",className:"data-function-start",sx:{letterSpacing:.5},children:[fc(d.value)," ",Xc]})]}),PostComponent:()=>(0,ve.jsx)(Da,{children:(0,ve.jsx)(Ti,{component:"span",className:"data-function-end",children:Rc})})},es=Go({is:d=>d===null,type:"null",colorKey:"base08",displayTypeLabel:!1,Renderer:()=>{const d=xi(M=>M.colorspace.base02);return(0,ve.jsx)(Ti,{sx:{fontSize:"0.8rem",backgroundColor:d,fontWeight:"bold",borderRadius:"3px",padding:"0.5px 2px"},children:"NULL"})}}),Vo=d=>d%1===0,ia=Go({is:d=>typeof d=="number"&&isNaN(d),type:"NaN",colorKey:"base08",displayTypeLabel:!1,serialize:()=>"NaN",deserialize:d=>parseFloat(d),Renderer:()=>{const d=xi(M=>M.colorspace.base02);return(0,ve.jsx)(Ti,{sx:{backgroundColor:d,fontSize:"0.8rem",fontWeight:"bold",borderRadius:"3px",padding:"0.5px 2px"},children:"NaN"})}}),ja=Go({is:d=>typeof d=="number"&&!Vo(d)&&!isNaN(d),type:"float",colorKey:"base0B",serialize:d=>d.toString(),deserialize:d=>parseFloat(d),Renderer:d=>{let{value:M}=d;return(0,ve.jsx)(ve.Fragment,{children:M})}}),Ks=Go({is:d=>typeof d=="number"&&Vo(d),type:"int",colorKey:"base0F",serialize:d=>d.toString(),deserialize:d=>parseFloat(d),Renderer:d=>{let{value:M}=d;return(0,ve.jsx)(ve.Fragment,{children:M})}}),Uo=Go({is:d=>typeof d=="bigint",type:"bigint",colorKey:"base0F",serialize:d=>d.toString(),deserialize:d=>BigInt(d.replace(/\D/g,"")),Renderer:d=>{let{value:M}=d;return(0,ve.jsx)(ve.Fragment,{children:"".concat(M,"n")})}}),Xa=d=>{let z=d,{d:M}=z,P=qa(z,["d"]);return(0,ve.jsx)(wo,si(Rt({},P),{children:(0,ve.jsx)("path",{d:M})}))},Pc="M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z",Zc="M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z",Ic="M 12 2 C 10.615 1.998 9.214625 2.2867656 7.890625 2.8847656 L 8.9003906 4.6328125 C 9.9043906 4.2098125 10.957 3.998 12 4 C 15.080783 4 17.738521 5.7633175 19.074219 8.3222656 L 17.125 9 L 21.25 11 L 22.875 7 L 20.998047 7.6523438 C 19.377701 4.3110398 15.95585 2 12 2 z M 6.5097656 4.4882812 L 2.2324219 5.0820312 L 3.734375 6.3808594 C 1.6515335 9.4550558 1.3615962 13.574578 3.3398438 17 C 4.0308437 18.201 4.9801562 19.268234 6.1601562 20.115234 L 7.1699219 18.367188 C 6.3019219 17.710187 5.5922656 16.904 5.0722656 16 C 3.5320014 13.332354 3.729203 10.148679 5.2773438 7.7128906 L 6.8398438 9.0625 L 6.5097656 4.4882812 z M 19.929688 13 C 19.794687 14.08 19.450734 15.098 18.927734 16 C 17.386985 18.668487 14.531361 20.090637 11.646484 19.966797 L 12.035156 17.9375 L 8.2402344 20.511719 L 10.892578 23.917969 L 11.265625 21.966797 C 14.968963 22.233766 18.681899 20.426323 20.660156 17 C 21.355156 15.801 21.805219 14.445 21.949219 13 L 19.929688 13 z",Ea="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z",Za="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z",dc="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z",oo="M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z",ml=d=>(0,ve.jsx)(Xa,Rt({d:Pc},d)),Ul=d=>(0,ve.jsx)(Xa,Rt({d:Zc},d)),wl=d=>(0,ve.jsx)(Xa,Rt({d:Ic},d)),Fl=d=>(0,ve.jsx)(Xa,Rt({d:Ea},d)),El=d=>(0,ve.jsx)(Xa,Rt({d:Za},d)),hc=d=>(0,ve.jsx)(Xa,Rt({d:dc},d)),Lc=d=>(0,ve.jsx)(Xa,Rt({d:oo},d)),hu="{",rl="[",gl="}",Wo="]";function Ya(d){const M=Ho(d);let P="";return(d instanceof Map||d instanceof Set)&&(P=d[Symbol.toStringTag]),Object.prototype.hasOwnProperty.call(d,Symbol.toStringTag)&&(P=d[Symbol.toStringTag]),"".concat(M," Items").concat(P?" (".concat(P,")"):"")}const Oa=d=>{const M=xi(i=>i.colorspace.base04),P=Wc(),z=(0,Ae.useMemo)(()=>Array.isArray(d.value),[d.value]),J=(0,Ae.useMemo)(()=>Ho(d.value)===0,[d.value]),oe=(0,Ae.useMemo)(()=>Ya(d.value),[d.value]),Re=xi(i=>i.displaySize),pt=(0,Ae.useMemo)(()=>typeof Re=="function"?Re(d.path,d.value):Re,[Re,d.path,d.value]),Bt=Va(d.path,d.value);return(0,ve.jsxs)(Ti,{component:"span",className:"data-object-start",sx:{letterSpacing:.5},children:[z?rl:hu,pt&&d.inspect&&!J&&(0,ve.jsx)(Ti,{component:"span",sx:{pl:.5,fontStyle:"italic",color:M,userSelect:"none"},children:oe}),Bt&&!d.inspect&&(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(wl,{sx:{fontSize:12,color:P,mx:.5}}),Bt]})]})},Yc=d=>{const M=xi(pt=>pt.colorspace.base04),P=(0,Ae.useMemo)(()=>Array.isArray(d.value),[d.value]),z=(0,Ae.useMemo)(()=>Ho(d.value)===0,[d.value]),J=(0,Ae.useMemo)(()=>Ya(d.value),[d.value]),oe=xi(pt=>pt.displaySize),Re=(0,Ae.useMemo)(()=>typeof oe=="function"?oe(d.path,d.value):oe,[oe,d.path,d.value]);return(0,ve.jsxs)(Ti,{component:"span",className:"data-object-end",children:[P?Wo:gl,Re&&(z||!d.inspect)?(0,ve.jsx)(Ti,{component:"span",sx:{pl:.5,fontStyle:"italic",color:M,userSelect:"none"},children:J}):null]})};function jo(d){var M;return typeof((M=d)===null||M===void 0?void 0:M[Symbol.iterator])=="function"}const pu={is:d=>typeof d=="object",Component:d=>{const M=Wc(),P=xi(y=>y.colorspace.base02),z=xi(y=>y.groupArraysAfterLength),J=Va(d.path,d.value),[oe,Re]=(0,Ae.useState)(xi(y=>y.maxDisplayLength)),pt=xi(y=>y.objectSortKeys),Bt=(0,Ae.useMemo)(()=>{if(!d.inspect)return null;const y=d.value;if(jo(y)&&!Array.isArray(y)){const Fe=[];if(y instanceof Map)y.forEach((nt,Nt)=>{const kt=Nt.toString(),un=[...d.path,kt];Fe.push((0,ve.jsx)(Tl,{path:un,value:nt,prevValue:d.prevValue instanceof Map?d.prevValue.get(Nt):void 0,editable:!1},kt))});else{const nt=y[Symbol.iterator]();let Nt=nt.next(),kt=0;for(;!Nt.done;)Fe.push((0,ve.jsx)(Tl,{path:[...d.path,"iterator:".concat(kt)],value:Nt.value,nestedIndex:kt,editable:!1},kt)),kt++,Nt=nt.next()}return Fe}if(Array.isArray(y)){if(y.length<=z){const Nt=y.slice(0,oe).map((kt,un)=>{const mr=d.nestedIndex?d.nestedIndex*z+un:un,yn=[...d.path,mr];return(0,ve.jsx)(Tl,{path:yn,value:kt,prevValue:Array.isArray(d.prevValue)?d.prevValue[mr]:void 0},mr)});if(y.length>oe){const kt=y.length-oe;Nt.push((0,ve.jsxs)(Wa,{sx:{cursor:"pointer",lineHeight:1.5,color:M,letterSpacing:.5,opacity:.8,userSelect:"none"},onClick:()=>Re(un=>un*2),children:["hidden ",kt," items\u2026"]},"last"))}return Nt}const Fe=jl(y,z),nt=Array.isArray(d.prevValue)?jl(d.prevValue,z):void 0;return Fe.map((Nt,kt)=>{var un;return(0,ve.jsx)(Tl,{path:d.path,value:Nt,nestedIndex:kt,prevValue:(un=nt)===null||un===void 0?void 0:un[kt]},kt)})}let V=Object.entries(y);pt&&(V=pt===!0?V.sort((Fe,nt)=>{let[Nt]=Fe,[kt]=nt;return Nt.localeCompare(kt)}):V.sort((Fe,nt)=>{let[Nt]=Fe,[kt]=nt;return pt(Nt,kt)}));const pe=V.slice(0,oe).map(Fe=>{let[nt,Nt]=Fe;var kt;const un=[...d.path,nt];return(0,ve.jsx)(Tl,{path:un,value:Nt,prevValue:(kt=d.prevValue)===null||kt===void 0?void 0:kt[nt]},nt)});if(V.length>oe){const Fe=V.length-oe;pe.push((0,ve.jsxs)(Wa,{sx:{cursor:"pointer",lineHeight:1.5,color:M,letterSpacing:.5,opacity:.8,userSelect:"none"},onClick:()=>Re(nt=>nt*2),children:["hidden ",Fe," items\u2026"]},"last"))}return pe},[d.inspect,d.value,d.prevValue,d.path,d.nestedIndex,z,oe,M,pt]),i=d.inspect?.6:0,s=xi(y=>y.indentWidth),u=d.inspect?s-i:s;return(0,Ae.useMemo)(()=>Ho(d.value)===0,[d.value])?null:(0,ve.jsx)(Ti,{className:"data-object",sx:{display:d.inspect?"block":"inline-block",pl:d.inspect?u-.6:0,marginLeft:i,color:M,borderLeft:d.inspect?"1px solid ".concat(P):"none"},children:d.inspect?Bt:!J&&(0,ve.jsx)(Ti,{component:"span",className:"data-object-body",onClick:()=>d.setInspect(!0),sx:{"&:hover":{cursor:"pointer"},padding:.5,userSelect:"none"},children:"\u2026"})})},PreComponent:Oa,PostComponent:Yc},mu=Go({is:d=>typeof d=="string",type:"string",colorKey:"base09",serialize:d=>d,deserialize:d=>d,Renderer:d=>{const[M,P]=(0,Ae.useState)(!1),z=xi(Re=>Re.collapseStringsAfterLength),J=M?d.value:d.value.slice(0,z),oe=d.value.length>z;return(0,ve.jsxs)(Ti,{component:"span",sx:{overflowWrap:"anywhere",cursor:oe?"pointer":"inherit"},onClick:()=>{var Re;((Re=window.getSelection())===null||Re===void 0?void 0:Re.type)!=="Range"&&oe&&P(pt=>!pt)},children:['"',J,oe&&!M&&(0,ve.jsx)(Ti,{component:"span",sx:{padding:.5},children:"\u2026"}),'"']})}}),Sf=Go({is:d=>d===void 0,type:"undefined",colorKey:"base05",displayTypeLabel:!1,Renderer:()=>{const d=xi(M=>M.colorspace.base02);return(0,ve.jsx)(Ti,{sx:{fontSize:"0.7rem",backgroundColor:d,borderRadius:"3px",padding:"0.5px 2px"},children:"undefined"})}}),zl=()=>(0,Qn.M)()(d=>({registry:[],registerTypes:M=>{d(P=>({registry:typeof M=="function"?M(P.registry):M}))}})),Kc=(0,Ae.createContext)(void 0);Kc.Provider;const gu=(d,M)=>{const P=(0,Ae.useContext)(Kc);return nl(P,d,M)};function vu(d,M,P){let z;for(const J of P)J.is(d,M)&&(z=J);if(z===void 0){if(typeof d=="object")return pu;throw new Error("No type matched for value: ".concat(d))}return z}function Zl(d,M){const P=gu(z=>z.registry);return(0,Ae.useMemo)(()=>vu(d,M,P),[d,M,P])}function il(d){function M(P,z){var J,oe;return Object.is(P.value,z.value)&&P.inspect&&z.inspect&&((J=P.path)===null||J===void 0?void 0:J.join("."))===((oe=z.path)===null||oe===void 0?void 0:oe.join("."))}return d.Component=(0,Ae.memo)(d.Component,M),d.Editor&&(d.Editor=(0,Ae.memo)(d.Editor,function(z,J){return Object.is(z.value,J.value)})),d.PreComponent&&(d.PreComponent=(0,Ae.memo)(d.PreComponent,M)),d.PostComponent&&(d.PostComponent=(0,Ae.memo)(d.PostComponent,M)),d}const Dc=[il(Nl),il(uc),il(es),il(Sf),il(mu),il(eo),il(ia),il(Ks),il(ja),il(Uo)],pc=d=>(0,ve.jsx)(Ti,si(Rt({component:"span"},d),{sx:Rt({cursor:"pointer",paddingLeft:"0.7rem"},d.sx)})),Tl=d=>{const{value:M,prevValue:P,path:z,nestedIndex:J}=d,{Component:oe,PreComponent:Re,PostComponent:pt,Editor:Bt,serialize:i,deserialize:s}=Zl(M,z);var u;const p=(u=d.editable)!==null&&u!==void 0?u:void 0,y=xi(is=>is.editable),A=(0,Ae.useMemo)(()=>y===!1||p===!1?!1:typeof y=="function"?!!y(z,M):y,[z,p,y,M]),[V,pe]=(0,Ae.useState)(""),Fe=z.length,nt=z[Fe-1],Nt=xi(is=>is.hoverPath),kt=(0,Ae.useMemo)(()=>Nt&&z.every((is,Hl)=>is===Nt.path[Hl]&&J===Nt.nestedIndex),[Nt,z,J]),un=xi(is=>is.setHover),mr=xi(is=>is.value),[yn,Ci]=Xl(z,M,J),[ts,Ee]=(0,Ae.useState)(!1),be=xi(is=>is.onChange),Ze=Wc(),Mn=xi(is=>is.colorspace.base0C),cr=xi(is=>is.colorspace.base0A),Vr=xi(is=>is.quotesOnKeys),Br=xi(is=>is.rootName),Oi=mr===M,qs=Number.isInteger(Number(nt)),Gi=xi(is=>is.enableClipboard),{copy:ao,copied:Na}=Tc(),ef=xi(is=>is.highlightUpdates),tf=(0,Ae.useMemo)(()=>!ef||P===void 0?!1:typeof M!=typeof P?!0:typeof M=="number"?isNaN(M)&&isNaN(P)?!1:M!==P:Array.isArray(M)!==Array.isArray(P)?!0:typeof M=="object"||typeof M=="function"?!1:M!==P,[ef,P,M]),ql=(0,Ae.useRef)();(0,Ae.useEffect)(()=>{ql.current&&tf&&"animate"in ql.current&&ql.current.animate([{backgroundColor:cr},{backgroundColor:""}],{duration:1e3,easing:"ease-in"})},[cr,tf,P,M]);const Qc=(0,Ae.useCallback)(is=>{is.preventDefault(),i&&pe(i(M)),Ee(!0)},[i,M]),kl=(0,Ae.useCallback)(()=>{Ee(!1),pe("")},[Ee,pe]),_u=(0,Ae.useCallback)(is=>{if(Ee(!1),!!s)try{be(z,M,s(is))}catch(Hl){}},[Ee,s,be,z,M]),eu=(0,Ae.useMemo)(()=>ts?(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(pc,{children:(0,ve.jsx)(Fl,{sx:{fontSize:".8rem"},onClick:kl})}),(0,ve.jsx)(pc,{children:(0,ve.jsx)(ml,{sx:{fontSize:".8rem"},onClick:()=>_u(V)})})]}):(0,ve.jsxs)(ve.Fragment,{children:[Gi&&(0,ve.jsx)(pc,{onClick:is=>{is.preventDefault();try{ao(z,M,wi)}catch(Hl){console.error(Hl)}},children:Na?(0,ve.jsx)(ml,{sx:{fontSize:".8rem"}}):(0,ve.jsx)(El,{sx:{fontSize:".8rem"}})}),Bt&&A&&i&&s&&(0,ve.jsx)(pc,{onClick:Qc,children:(0,ve.jsx)(hc,{sx:{fontSize:".8rem"}})})]}),[Bt,i,s,Na,ao,A,ts,Gi,V,z,M,Qc,kl,_u]),Nc=(0,Ae.useMemo)(()=>Ho(M)===0,[M]),mc=!Nc&&!!(Re&&pt),Eo=xi(is=>is.keyRenderer),sa=(0,Ae.useMemo)(()=>({path:z,inspect:yn,setInspect:Ci,value:M,prevValue:P,nestedIndex:J}),[yn,z,Ci,M,P,J]);return(0,ve.jsxs)(Ti,{className:"data-key-pair","data-testid":"data-key-pair"+z.join("."),sx:{userSelect:"text"},onMouseEnter:(0,Ae.useCallback)(()=>un(z,J),[un,z,J]),children:[(0,ve.jsxs)(Wa,{component:"span",className:"data-key",sx:{lineHeight:1.5,color:Ze,letterSpacing:.5,opacity:.8},onClick:(0,Ae.useCallback)(is=>{is.isDefaultPrevented()||Nc||Ci(Hl=>!Hl)},[Nc,Ci]),children:[mc?yn?(0,ve.jsx)(Lc,{sx:{fontSize:".8rem","&:hover":{cursor:"pointer"}}}):(0,ve.jsx)(Ul,{sx:{fontSize:".8rem","&:hover":{cursor:"pointer"}}}):null,(0,ve.jsx)(Ti,{ref:ql,component:"span",children:Oi?Br!==!1?Vr?(0,ve.jsxs)(ve.Fragment,{children:['"',Br,'"']}):(0,ve.jsx)(ve.Fragment,{children:Br}):null:Eo.when(sa)?(0,ve.jsx)(Eo,Rt({},sa)):J===void 0&&(qs?(0,ve.jsx)(Ti,{component:"span",style:{color:Mn},children:nt}):Vr?(0,ve.jsxs)(ve.Fragment,{children:['"',nt,'"']}):(0,ve.jsx)(ve.Fragment,{children:nt}))}),Oi?Br!==!1&&(0,ve.jsx)(Wa,{sx:{mr:.5},children:":"}):J===void 0&&(0,ve.jsx)(Wa,{sx:{mr:.5},children:":"}),Re&&(0,ve.jsx)(Re,Rt({},sa)),kt&&mc&&yn&&eu]}),ts&&A?Bt&&(0,ve.jsx)(Bt,{value:V,setValue:pe,abortEditing:kl,commitEditing:_u}):oe?(0,ve.jsx)(oe,Rt({},sa)):(0,ve.jsx)(Ti,{component:"span",className:"data-value-fallback",children:"fallback: ".concat(M)}),pt&&(0,ve.jsx)(pt,Rt({},sa)),kt&&mc&&!yn&&eu,kt&&!mc&&eu,!kt&&ts&&eu]})},Zu="(prefers-color-scheme: dark)";function Mf(){const[d,M]=(0,Ae.useState)(!1);return(0,Ae.useEffect)(()=>{const P=J=>M(J.matches);M(window.matchMedia(Zu).matches);const z=window.matchMedia(Zu);return z.addEventListener("change",P),()=>z.removeEventListener("change",P)},[]),d}function Ta(d,M){const{setState:P}=(0,Ae.useContext)(lc);(0,Ae.useEffect)(()=>{M!==void 0&&P({[d]:M})},[d,M,P])}const Yu=d=>{const{setState:M}=(0,Ae.useContext)(lc);(0,Ae.useEffect)(()=>{M(s=>({prevValue:s.value,value:d.value}))},[d.value,M]),Ta("editable",d.editable),Ta("indentWidth",d.indentWidth),Ta("onChange",d.onChange),Ta("groupArraysAfterLength",d.groupArraysAfterLength),Ta("keyRenderer",d.keyRenderer),Ta("maxDisplayLength",d.maxDisplayLength),Ta("enableClipboard",d.enableClipboard),Ta("highlightUpdates",d.highlightUpdates),Ta("rootName",d.rootName),Ta("displayDataTypes",d.displayDataTypes),Ta("displaySize",d.displaySize),Ta("onCopy",d.onCopy),Ta("onSelect",d.onSelect),(0,Ae.useEffect)(()=>{d.theme==="light"?M({colorspace:hs}):d.theme==="dark"?M({colorspace:Vc}):typeof d.theme=="object"&&M({colorspace:d.theme})},[M,d.theme]);const P=(0,Ae.useMemo)(()=>typeof d.theme=="object"?"json-viewer-theme-custom":d.theme==="dark"?"json-viewer-theme-dark":"json-viewer-theme-light",[d.theme]),z=(0,Ae.useRef)(!0),J=gu(s=>s.registerTypes);if(z.current){const s=d.valueTypes?[...Dc,...d.valueTypes]:[...Dc];J(s),z.current=!1}(0,Ae.useEffect)(()=>{const s=d.valueTypes?[...Dc,...d.valueTypes]:[...Dc];J(s)},[d.valueTypes,J]);const oe=xi(s=>s.value),Re=xi(s=>s.prevValue),pt=(0,Ae.useMemo)(()=>[],[]),Bt=xi(s=>s.setHover),i=(0,Ae.useCallback)(()=>Bt(null),[Bt]);return(0,ve.jsx)(tl,{elevation:0,className:hl(P,d.className),style:d.style,sx:Rt({fontFamily:"monospace",userSelect:"none",contentVisibility:"auto"},d.sx),onMouseLeave:i,children:(0,ve.jsx)(Tl,{value:oe,prevValue:Re,path:pt})})},Yl=function(M){const P=Mf();var z;const J=(0,Ae.useMemo)(()=>M.theme==="auto"?P?"light":"dark":(z=M.theme)!==null&&z!==void 0?z:"light",[P,M.theme]),oe=(0,Ae.useMemo)(()=>{const i=typeof J=="object"?J.base00:J==="dark"?Vc.base00:hs.base00;return Hs({components:{MuiPaper:{styleOverrides:{root:{backgroundColor:i}}}},palette:{mode:J==="dark"?"dark":"light",background:{default:i}}})},[J]),Re=si(Rt({},M),{theme:J}),pt=(0,Ae.useMemo)(()=>Wu(M),[]),Bt=(0,Ae.useMemo)(()=>zl(),[]);return(0,ve.jsx)(Gc,{theme:oe,children:(0,ve.jsx)(Kc.Provider,{value:Bt,children:(0,ve.jsx)(lc.Provider,{value:pt,children:(0,ve.jsx)(Yu,Rt({},Re))})})})};var bf=se(15867),Bl=se(96074),Ku=se(86738),pa=se(32983),wf=se(8417),qu=se(95511),Al=se(17542),Ef=se(76010),Ju=se(70290),$u=se(8694),qc=se(30168),Ka=se(54239),Jc,Qu,Cl,Oc,Kl=(0,Ka.kc)(function(d,M){var P=d.token,z=d.stylish,J=d.cx,oe=d.css;return{container:J(M,oe(Jc||(Jc=(0,qc.Z)([`
        `,`
      `])),z.textInfo)),empty:J("".concat(M,"-empty"),oe(Qu||(Qu=(0,qc.Z)([`
        padding: 8px;
        background: `,`;
        border-radius: 4px;
        .studio-empty-normal {
          margin: 12px 0;
        }
      `])),P.colorFillQuaternary)),json:J("".concat(M,"-json"),oe(Cl||(Cl=(0,qc.Z)([`
        border-radius: 4px;

        .json-viewer-theme-dark {
          background: none !important;
        }
      `])))),table:oe(Oc||(Oc=(0,qc.Z)([`
      .studio-table-cell {
        padding: 4px !important;
      }
    `])))}}),$c=function(M){var P=M.data,z=M.collapsed,J=M.onVisibleChange,oe=M.className,Re=M.renderEmpty,pt=M.onEmptyClick,Bt=M.showType,i=Bt===void 0?!0:Bt,s=M.extra,u=M.emptyAction,p=M.style,y=M.columns,A=M.onResetClick,V=M.prefixCls,pe=(0,Ju.k2)("data-previewer",V),Fe=(0,$u.r)(),nt=Fe.isDarkMode,Nt=Kl(pe),kt=Nt.styles,un=Nt.cx,mr=(0,Ef.Z)(!1,{value:z,onChange:J}),yn=(0,ce.Z)(mr,2),Ci=yn[0],ts=yn[1],Ee=(0,Ae.useState)(0),be=(0,ce.Z)(Ee,2),Ze=be[0],Mn=be[1],cr=(0,Ae.useState)("object"),Vr=(0,ce.Z)(cr,2),Br=Vr[0],Oi=Vr[1],qs=(0,ve.jsx)(Al.D,{align:"center",children:(0,ve.jsxs)(Al.D,{gap:12,width:"fit-content",align:"center",children:[(0,ve.jsx)("div",{children:"\u6CA1\u6709\u6570\u636E\uFF1F\u6765\u8BD5\u8BD5 Demo \u5427"}),(0,ve.jsxs)(Al.D,{direction:"horizontal",gap:8,children:[(0,ve.jsx)(bf.ZP,{icon:(0,ve.jsx)(te.Z,{}),type:"primary",ghost:!0,size:"small",onClick:pt,children:"\u7ACB\u5373\u5C1D\u8BD5"}),u]})]})}),Gi=(0,Ae.useMemo)(function(){return(0,ve.jsxs)(Al.D,{direction:"horizontal",align:"center",children:[(0,ve.jsx)(Al.D,{children:(0,ve.jsx)(de.Z,{title:"\u663E\u793A\u4E3A".concat(Br==="table"?"\u5BF9\u8C61":"\u8868\u683C"),placement:"bottom",icon:Br==="table"?(0,ve.jsx)(Ue.Z,{}):(0,ve.jsx)(Ut.Z,{}),onClick:function(){Oi(Br==="object"?"table":"object")}})}),(0,ve.jsx)(Bl.Z,{type:"vertical",dashed:!0,style:{margin:"0 4px"}}),(0,ve.jsxs)(Al.D,{horizontal:!0,gap:4,children:[(0,ve.jsx)(Ku.Z,{title:"\u5373\u5C06\u91CD\u7F6E\u5217\u914D\u7F6E\u4E0E\u8868\u683C\u6570\u636E\uFF0C\u5176\u4F59\u914D\u7F6E\uFF08\u5206\u9875\u5668\u3001\u5DE5\u5177\u680F\u7B49\uFF09\u4FDD\u6301\u4E0D\u53D8\u3002\u786E\u5B9A\u91CD\u7F6E\u5417\uFF1F",placement:"left",onConfirm:A,children:(0,ve.jsx)(de.Z,{title:"\u91CD\u7F6E\u6570\u636E",placement:"bottom",icon:(0,ve.jsx)(fn.Z,{})})}),s?(0,ve.jsx)(ve.Fragment,{children:s}):null]})]})},[Br,A,s]);return(0,ve.jsx)("div",{className:un(oe,kt.container),style:p,children:P?(0,ve.jsx)(Xn.Z,{title:"\u6570\u636E\u9884\u89C8",expand:!Ci,onExpandChange:function(Na){ts(!Na)},extra:function(Na){return Na?Gi:null},children:(0,ve.jsx)(Al.D,{children:Br==="object"?(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(Al.D,{style:{overflow:"scroll",maxHeight:200,marginBottom:8},className:kt.json,children:(0,ve.jsx)(Yl,{rootName:"\u7B2C".concat(Ze+1,"\u6761\u6570\u636E"),collapseStringsAfterLength:22,enableClipboard:!1,value:P[Ze],displayDataTypes:i,theme:nt?"dark":"light"})}),(0,ve.jsx)(Bl.Z,{style:{margin:"12px 0"},dashed:!0}),(0,ve.jsx)(Al.D,{align:"flex-end",children:(0,ve.jsx)(wf.Z,{current:Ze+1,showTotal:function(Na){return"\u5171 ".concat(Na," \u6761\u6570\u636E")},onChange:function(Na){Mn(Na-1)},total:P.length,size:"small",pageSize:1})})]}):(0,ve.jsx)(qu.Z,{dataSource:P,size:"small",bordered:!0,className:kt.table,pagination:!1,columns:y&&y.map(function(ao){return(0,X.Z)((0,X.Z)({},ao),{},{ellipsis:!0})})})})}):(0,ve.jsx)("div",{className:kt.empty,children:(0,ve.jsx)(pa.Z,{image:pa.Z.PRESENTED_IMAGE_SIMPLE,description:Re?Re(qs):qs})})})},yu=$c},88091:function(an,St,se){"use strict";se.d(St,{c:function(){return Ji}});var X=se(1413),ce=se(45987),te=se(67294),Ue=se(5738),Ut=se(60887),fn=se(73935),de=se(24285);function Xn(It){return k=>{let{transform:Z}=k;return si(Rt({},Z),{x:Math.ceil(Z.x/It)*It,y:Math.ceil(Z.y/It)*It})}}const ve=It=>{let{transform:k}=It;return si(Rt({},k),{y:0})};function ze(It,k,Z){const le=Rt({},It);return k.top+It.y<=Z.top?le.y=Z.top-k.top:k.bottom+It.y>=Z.top+Z.height&&(le.y=Z.top+Z.height-k.bottom),k.left+It.x<=Z.left?le.x=Z.left-k.left:k.right+It.x>=Z.left+Z.width&&(le.x=Z.left+Z.width-k.right),le}const Wt=It=>{let{containerNodeRect:k,draggingNodeRect:Z,transform:le}=It;return!Z||!k?le:ze(le,Z,k)},Ae=It=>{let{draggingNodeRect:k,transform:Z,scrollableAncestorRects:le}=It;const Ye=le[0];return!k||!Ye?Z:ze(Z,k,Ye)},ut=It=>{let{transform:k}=It;return si(Rt({},k),{x:0})},it=It=>{let{transform:k,draggingNodeRect:Z,windowRect:le}=It;return!Z||!le?k:ze(k,Z,le)},en=It=>{let{activatorEvent:k,draggingNodeRect:Z,transform:le}=It;if(Z&&k){const Ye=getEventCoordinates(k);if(!Ye)return le;const He=Ye.x-Z.left,ft=Ye.y-Z.top;return si(Rt({},le),{x:le.x+He-Z.width/2,y:le.y+ft-Z.height/2})}return le};var Rn=se(45587),tn=se(17542),ee=se(76248),Ir=se(70290),dr=se(54239),tr=se(4942),zn=se(23497),Zn=se(94184),Yn=se.n(Zn),vn=se(35038),pn=se(88165),dt=se(85893),hr=(0,dt.jsx)("svg",{viewBox:"0 0 20 20",width:"16",fill:"currentColor",children:(0,dt.jsx)("path",{d:"M7 2a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 2zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 8zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 14zm6-8a2 2 0 1 0-.001-4.001A2 2 0 0 0 13 6zm0 2a2 2 0 1 0 .001 4.001A2 2 0 0 0 13 8zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 13 14z"})}),gr=(0,dt.jsx)("svg",{width:"10",viewBox:"0 0 70 41",fill:"currentColor",children:(0,dt.jsx)("path",{d:"M30.76 39.2402C31.885 40.3638 33.41 40.995 35 40.995C36.59 40.995 38.115 40.3638 39.24 39.2402L68.24 10.2402C69.2998 9.10284 69.8768 7.59846 69.8494 6.04406C69.822 4.48965 69.1923 3.00657 68.093 1.90726C66.9937 0.807959 65.5106 0.178263 63.9562 0.150837C62.4018 0.123411 60.8974 0.700397 59.76 1.76024L35 26.5102L10.24 1.76024C9.10259 0.700397 7.59822 0.123411 6.04381 0.150837C4.4894 0.178263 3.00632 0.807959 1.90702 1.90726C0.807714 3.00657 0.178019 4.48965 0.150593 6.04406C0.123167 7.59846 0.700153 9.10284 1.75999 10.2402L30.76 39.2402Z"})}),ke=function(k){return _jsx(ActionIcon,_objectSpread({icon:gr},k))},Kt=function(k){return(0,dt.jsx)(pn.Z,(0,X.Z)({icon:hr},k))},Lt=function(k){return(0,dt.jsx)(pn.Z,(0,X.Z)({icon:(0,dt.jsx)(vn.Z,{})},k))},Qe=function(k){return _jsx(ActionIcon,_objectSpread({icon:_jsx(EditFilled,{})},k))},Se=se(30168),we,Pe,Ve,Ne,Oe,wt,ct,Nn,ur,rr,yr="0 0 0 calc(1px / var(--scale-x, 1)) rgba(0, 0, 0, 0.05)",zr="0 1px calc(3px / var(--scale-x, 1)) 0 rgba(0, 0, 0, 0.15)",Ur="".concat(yr," ").concat(zr),Lr=(0,dr.F4)(we||(we=(0,Se.Z)([`
	0% {
		box-shadow: var(--box-shadow);
		transform: scale(1);
	}
	100% {
		box-shadow: var(--box-shadow-picked-up);
		transform: scale(var(--scale));
	}
`]))),Yr=(0,dr.F4)(Pe||(Pe=(0,Se.Z)([`
	0% {
	  opacity: 0;
	}
	100% {
	  opacity: 1;
	}
`]))),Bn=(0,dr.kc)(function(It,k){var Z=It.css,le=It.cx,Ye=It.token,He="".concat(k);return{item:le("".concat(k,"-item"),Z(Ve||(Ve=(0,Se.Z)([`
        position: relative;
        display: flex;
        flex-grow: 1;
        align-items: center;
        justify-content: space-between;
        box-sizing: border-box;
        padding: 1px 0;
        color: `,`;
        font-size: 12px;
        white-space: nowrap;
        list-style: none;
        border-radius: 4px;
        outline: none;
        transform: scale(var(--scale, 1));
        transform-origin: 50% 50%;
        transition: box-shadow 200ms cubic-bezier(0.18, 0.67, 0.6, 1.22);
        -webkit-tap-highlight-color: transparent;

        &:focus-visible {
          box-shadow: 0 0 4px 1px #4c9ffe, `,`;
        }

        &:not(.`,`-item-withHandle) {
          cursor: grab;
          -webkit-user-select: none;
          user-select: none;
          touch-action: none;
        }

        &-dragging:not(.`,`-item-dragOverlay) {
          z-index: 0;
          opacity: var(--dragging-opacity, 0.5);

          &:focus {
            box-shadow: `,`;
          }
        }
      `])),Ye.colorTextSecondary,Ur,He,He,Ur)),disabled:le("".concat(k,"-item-disabled"),Z(Ne||(Ne=(0,Se.Z)([`
        color: #999;
        background-color: #f1f1f1;
        cursor: not-allowed;
        &:focus {
          box-shadow: 0 0 4px 1px rgba(0, 0, 0, 0.1), `,`;
        }
      `])),Ur)),dragOverlay:le("".concat(k,"-item-dragOverlay"),Z(Oe||(Oe=(0,Se.Z)([`
        padding: 4px 0;
        background-color: `,`;
        border: none;
        box-shadow: var(--box-shadow-picked-up);
        transform: scale(var(--scale));
        cursor: inherit;
        opacity: 1;

        /* box-shadow: 0 0px 6px 2px @focused-outline-color; */
        animation: `,` 200ms cubic-bezier(0.18, 0.67, 0.6, 1.22);
      `])),Ye.colorBgElevated,Lr)),wrapper:le("".concat(k,"-item-wrapper"),Z(wt||(wt=(0,Se.Z)([`
        display: flex;
        box-sizing: border-box;
        transform: translate3d(var(--translate-x, 0), var(--translate-y, 0), 0)
          scaleX(var(--scale-x, 1)) scaleY(var(--scale-y, 1));
        transform-origin: 0 0;
        touch-action: manipulation;

        &:not(:last-child) {
          margin-bottom: 2px;
        }
      `])))),wrapperFadeIn:le("".concat(k,"-item-wrapper-fadeIn"),Z(ct||(ct=(0,Se.Z)([`
        animation: `,` 500ms ease;
      `])),Yr)),wrapperdragOverlay:le("".concat(k,"-item-wrapper-dragOverlay"),Z(Nn||(Nn=(0,Se.Z)([`
        --scale: 1.05;
        --box-shadow: `,`;
        --box-shadow-picked-up: `,`, -1px 0 15px 0 rgba(82, 82, 82, 0.01),
          0 15px 15px 0 rgba(82, 82, 82, 0.25);

        z-index: 999;
      `])),Ur,yr)),actions:le("".concat(k,"-item-actions"),Z(ur||(ur=(0,Se.Z)([`
        z-index: 10;
        color: hsla(0, 0, 0, 0.45);
        opacity: 0;
      `])))),content:le("".concat(k,"-item-content"),Z(rr||(rr=(0,Se.Z)([`
        position: relative;
        width: 100%;
        height: 24px;
        border-radius: 2px;
        min-width: 48px;

        &:hover .`,`-item-actions {
          opacity: 1;
        }
      `])),k))}}),sn=["color","dragOverlay","dragging","disabled","fadeIn","handle","index","listeners","onRemove","item","renderItem","renderContent","hideRemove","sorting","style","actions","transition","transform","id","className","prefixCls"],Tn=(0,te.memo)((0,te.forwardRef)(function(It,k){var Z,le,Ye=It.color,He=It.dragOverlay,ft=It.dragging,Dn=It.disabled,xn=It.fadeIn,et=It.handle,nn=et===void 0?!0:et,_e=It.index,De=It.listeners,ot=It.onRemove,gt=It.item,Pt=It.renderItem,Gn=It.renderContent,dn=It.hideRemove,Ke=dn===void 0?!1:dn,Xe=It.sorting,Zt=It.style,Un=It.actions,ir=It.transition,Kn=It.transform,Gr=It.id,Ar=It.className,vi=It.prefixCls,li=(0,ce.Z)(It,sn),sr=(0,zn.S)(),Bi=Bn(vi),ys=Bi.styles,Ms=Yn()("".concat(vi,"-item"));return(0,te.useEffect)(function(){if(He)return document.body.style.cursor="grabbing",function(){document.body.style.cursor=""}},[He]),(0,dt.jsx)("li",{className:Yn()(ys.wrapper,Ar,(Z={},(0,tr.Z)(Z,ys.wrapperFadeIn,xn),(0,tr.Z)(Z,"".concat(Ms,"-wrapper-sorting"),Xe),(0,tr.Z)(Z,ys.wrapperdragOverlay,He),Z)),style:{transition:ir,"--translate-x":Kn?"".concat(Math.round(Kn.x),"px"):void 0,"--translate-y":Kn?"".concat(Math.round(Kn.y),"px"):void 0,"--scale-x":Kn!=null&&Kn.scaleX?"".concat(Kn.scaleX):void 0,"--scale-y":Kn!=null&&Kn.scaleY?"".concat(Kn.scaleY):void 0,"--index":_e,"--color":Ye},"data-testid":"list-item",ref:k,children:(0,dt.jsx)("div",(0,X.Z)((0,X.Z)((0,X.Z)({className:Yn()(ys.item,(le={},(0,tr.Z)(le,"".concat(Ms,"-dragging"),ft),(0,tr.Z)(le,"".concat(Ms,"-withHandle"),nn),(0,tr.Z)(le,ys.dragOverlay,He),(0,tr.Z)(le,ys.disabled,Dn),(0,tr.Z)(le,"".concat(Ms,"-discolorabled"),Ye),le)),style:(0,X.Z)((0,X.Z)({},Zt),{},{backgroundColor:sr.colorBgContainer}),"data-cypress":"draggable-item"},nn?void 0:De),li),{},{tabIndex:nn?void 0:0,children:Pt?Pt(gt,{dragOverlay:!!He,dragging:!!ft,sorting:!!Xe,index:_e,fadeIn:!!xn,listeners:De,ref:k,style:Zt,transform:Kn,transition:ir}):(0,dt.jsxs)(tn.D,{className:ys.content,direction:"horizontal",align:"center",children:[nn?(0,dt.jsx)(Kt,(0,X.Z)({tabIndex:-1,className:Yn()(ys.actions),cursor:"grab","data-cypress":"draggable-handle",style:{width:14,height:24}},De)):null,(0,dt.jsx)(tn.D,{flex:1,style:{paddingLeft:4},children:Gn?Gn(gt,_e):(0,dt.jsx)("div",{children:typeof gt=="string"?gt:_e})}),(0,dt.jsxs)(tn.D,{className:Yn()(ys.actions),direction:"horizontal",align:"center",children:[typeof Un=="function"?Un(gt,_e):Un,Ke?null:(0,dt.jsx)(Lt,{tabIndex:-1,onClick:ot,style:{height:22}})]})]})}))},Gr)})),_r=Tn,ai=se(72307),Tr=se.n(ai),qr=se(19983),Si=se(69020),Ei=function(k){return{activeId:k.activeId,hideRemove:k.hideRemove,renderItem:k.renderItem,renderContent:k.renderContent,getItemStyles:k.getItemStyles}},zi=function(k){var Z=k.prefixCls,le=(0,qr.oR)(Ei,ee.X),Ye=le.activeId,He=le.renderItem,ft=le.hideRemove,Dn=le.getItemStyles,xn=le.renderContent,et=(0,qr.oR)(function(De){return De.value},Tr()),nn=(0,qr.oR)(function(De){return De.keyManager},Tr()),_e=(0,Si._z)(nn,Ye);return(0,dt.jsx)(Ut.y9,{adjustScale:!1,dropAnimation:(0,X.Z)((0,X.Z)({},Ut.RJ),{},{sideEffects:(0,Ut.Ai)({styles:{active:{opacity:"0.5"}}})}),children:Ye?(0,dt.jsx)(_r,{id:Ye,dragOverlay:!0,index:_e,item:et[_e],prefixCls:Z,renderItem:He,renderContent:xn,style:Dn({id:Ye,index:_e,isSorting:!0,isDragging:!0,overIndex:-1,isDragOverlay:!0}),hideRemove:ft}):null})},Ss=(0,te.memo)(zi),ei=se(32983),ii=(0,dr.kc)(function(It,k){var Z=It.css,le=It.cx,Ye=k.prefixCls,He=k.horizontal;return{container:le("".concat(Ye,"-container"),Z({listStyle:"none",display:"grid",gridAutoRows:"max-content",gridGap:"2px",gridTemplateColumns:"repeat(var(--columns, 1), 1fr)",width:"100%",margin:"0",padding:"0",borderRadius:"4px",transition:"background-color 350ms ease",gridAutoFlow:He?"column":void 0}))}}),ui=(0,te.forwardRef)(function(It,k){var Z=It.children,le=It.columns,Ye=le===void 0?1:le,He=It.horizontal,ft=It.style,Dn=It.className,xn=It.prefixCls,et=ii({prefixCls:xn,horizontal:He}),nn=et.styles,_e=Yn()(nn.container,Dn);return(0,dt.jsx)("ul",{ref:k,style:(0,X.Z)((0,X.Z)({},ft),{},{"--columns":Ye}),className:_e,children:Z})}),ls=ui;function Hr(It){var k=It.disabled,Z=It.id,le=It.index,Ye=It.onRemove,He=It.useDragOverlay,ft=He===void 0?!0:He,Dn=It.getItemStyles,xn=It.renderItem,et=It.renderContent,nn=It.item,_e=It.actions,De=It.prefixCls,ot=It.hideRemove,gt=ot===void 0?!1:ot,Pt=(0,Rn.nB)({id:Z,disabled:k}),Gn=Pt.attributes,dn=Pt.isDragging,Ke=Pt.isSorting,Xe=Pt.listeners,Zt=Pt.overIndex,Un=Pt.setNodeRef,ir=Pt.transform,Kn=Pt.transition;return(0,dt.jsx)(_r,(0,X.Z)({ref:Un,id:Z,item:nn,disabled:k,dragging:dn,sorting:Ke,hideRemove:gt,actions:_e,index:le,onRemove:Ye?function(){return Ye(le)}:void 0,transform:ir,transition:!ft&&dn?"none":Kn,renderItem:xn,renderContent:et,style:Dn({index:le,id:Z,isDragging:dn,isSorting:Ke,overIndex:Zt,isDragOverlay:!1}),listeners:Xe,"data-index":le,"data-id":Z,dragOverlay:!ft&&dn,prefixCls:De},Gn),Z)}var Xi=se(24193),Wr=se(15867),Ln=se(35360),Ts,Q,ye,Ce,ge,vt,Ht,Jt,_t,ht,Ge,st=function(k){var Z=k.token,le=k.css,Ye=le(Ts||(Ts=(0,Se.Z)([`
    cursor: pointer;
    transition: 150ms background-color ease-in-out;
    &:hover {
      background: `,`;
    }
  `])),Z.colorFillQuaternary),He=le(Q||(Q=(0,Se.Z)([`
    color: `,`;
    background-color: `,`;
    border-color: transparent;
  `])),Z.colorText,Z.colorFillTertiary),ft=le(ye||(ye=(0,Se.Z)([`
    color: `,` !important;
    background-color: `,` !important;
    border-color: `,` !important;
    box-shadow: none;
  `])),Z.colorText,Z.colorFillQuaternary,Z.colorPrimary),Dn=le(Ce||(Ce=(0,Se.Z)([`
    color: `,`;
    background: `,`;
    border-color: transparent;
  `])),Z.colorTextSecondary,Z.colorFillQuaternary);return{defaultButton:le(ge||(ge=(0,Se.Z)([`
      `,`;

      &:hover {
        color: `,` !important;
        background: `,` !important;
        border-color: transparent !important;
      }
      &:focus {
        `,`;
        border-color: `,` !important;
      }
    `])),Dn,Z.colorText,Z.colorFillSecondary,Dn,Z.colorPrimary),textInfo:le(vt||(vt=(0,Se.Z)([`
      color: `,`;
      &:hover {
        color: `,`;
      }
    `])),Z.colorTextSecondary,Z.colorText),textDefault:le(Ht||(Ht=(0,Se.Z)([`
      color: `,`;
    `])),Z.colorTextSecondary),containerBgHover:le(Jt||(Jt=(0,Se.Z)([`
      cursor: pointer;
      transition: 150ms background-color ease-in-out;

      &:hover {
        background: `,`;
      }
    `])),Z.colorFillQuaternary),containerBgL2:le(_t||(_t=(0,Se.Z)([`
      `,`;
      border-radius: 4px;
      background: `,`;

      &:hover {
        background: `,`;
      }
    `])),Ye,Z.colorFillQuaternary,Z.colorFillTertiary),controlContainerFocused:ft,controlContainer:le(ht||(ht=(0,Se.Z)([`
      &:hover {
        `,`
      }
      &:focus {
        `,`
      }
    `])),He,ft),backgroundBlur:le(Ge||(Ge=(0,Se.Z)([`
      background: `,`;
      backdrop-filter: blur(10px);
    `])),(0,Ln.DZ)(.4)(Z.colorBgElevated))}},Ft,kn=(0,dr.kc)(function(It,k){var Z=It.token,le=It.css,Ye=It.cx,He=st(It);return{btnAdd:Ye("".concat(k,"-btn-add"),le(Ft||(Ft=(0,Se.Z)([`
        height: 24px;
        padding-block: 2px;
        margin-top: `,`px;
        margin-bottom: `,`px;
      `])),Z.marginXXS,Z.marginXXS),He.defaultButton)}}),On=function(k){return{renderItem:k.renderItem,renderContent:k.renderContent,renderEmpty:k.renderEmpty,getItemStyles:k.getItemStyles,keyManager:k.keyManager,actions:k.actions,hideRemove:k.hideRemove,creatorButtonProps:k.creatorButtonProps,dispatchListData:k.dispatchListData}},$n=function(k){var Z=k.prefixCls,le=(0,qr.oR)(On,ee.X),Ye=le.dispatchListData,He=le.renderItem,ft=le.renderContent,Dn=le.renderEmpty,xn=le.creatorButtonProps,et=xn===void 0?!1:xn,nn=le.hideRemove,_e=le.keyManager,De=le.getItemStyles,ot=le.actions,gt=kn(Z),Pt=gt.styles,Gn=(0,qr.oR)(function(Gr){return Gr.value},Tr()),dn=et||{},Ke=dn.record,Xe=dn.creatorButtonText,Zt=Xe===void 0?"\u6DFB\u52A0\u4E00\u5217":Xe,Un=dn.position,ir=Un===void 0?"bottom":Un,Kn=function(Ar){var vi=Ar.empty,li=vi===void 0?!1:vi;return(0,dt.jsx)(Wr.ZP,{block:!li,size:"small",className:Pt.btnAdd,onClick:function(){Ye({type:"addItem",item:Ke(Gn.length)})},icon:(0,dt.jsx)(Xi.Z,{}),children:Zt})};return Array.isArray(Gn)&&Gn.length===0?Dn?Dn():(0,dt.jsx)(dt.Fragment,{children:(0,dt.jsx)(ei.Z,{image:ei.Z.PRESENTED_IMAGE_SIMPLE,description:"\u6682\u65E0\u6570\u636E",children:et!==!1?(0,dt.jsx)(Kn,{empty:!0}):null})}):(0,dt.jsxs)(dt.Fragment,{children:[et!==!1&&ir==="top"?(0,dt.jsx)(Kn,{}):null,(0,dt.jsx)(ls,{prefixCls:Z,children:Gn.map(function(Gr,Ar){return(0,dt.jsx)(Hr,{id:_e[Ar],item:Gr,index:Ar,actions:ot,hideRemove:nn,renderItem:He,renderContent:ft,getItemStyles:De,onRemove:function(){return Ye({type:"removeItem",index:Ar})},useDragOverlay:!0,prefixCls:Z},_e[Ar])})}),et!==!1&&ir==="bottom"?(0,dt.jsx)(Kn,{}):null]})},Mr=(0,te.memo)($n),ti={strategy:Ut.uN.Always},xe=function(k){return{handleDragStart:k.handleDragStart,handleDragCancel:k.handleDragCancel,handleDragEnd:k.handleDragEnd,keyManager:k.keyManager}},At=function(k){var Z=k.className,le=k.style,Ye=k.prefixCls,He=(0,qr.oR)(xe,ee.X),ft=He.handleDragStart,Dn=He.handleDragCancel,xn=He.handleDragEnd,et=He.keyManager,nn=(0,Ir.k2)("sortable-list",Ye),_e=(0,Ut.Dy)((0,Ut.VT)(Ut.MA),(0,Ut.VT)(Ut.LO),(0,Ut.VT)(Ut.Lg,{coordinateGetter:Rn.is})),De=(0,te.useMemo)(function(){return(0,fn.createPortal)((0,dt.jsx)(Ss,{prefixCls:nn}),document.body)},[]);return(0,dt.jsx)(tn.D,{className:(0,dr.cx)(Z,nn),style:le,children:(0,dt.jsx)(Ut.LB,{sensors:_e,collisionDetection:Ut.pE,onDragStart:ft,onDragEnd:xn,measuring:{droppable:ti},onDragCancel:Dn,modifiers:[ut,it],children:(0,dt.jsxs)(Rn.Fo,{items:et,strategy:Rn.qw,children:[(0,dt.jsx)(Mr,{prefixCls:nn}),De]})})})},Pn=At,vr=function(k){var Z=k.children,le=k.showDevtools,Ye=!0,He=(0,dt.jsx)(dt.Fragment,{children:Z});try{(0,qr.AC)()}catch(ft){Ye=!1}return Ye?He:(0,dt.jsx)(qr.zt,{createStore:function(){return(0,qr.MT)(le)},children:He})},ni=se(12902),Zi=function(k){return function(Z,le){var Ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[le],He=arguments.length>3?arguments[3]:void 0,ft=He!=null?He:k.setState;(0,te.useEffect)(function(){typeof le!="undefined"&&ft((0,tr.Z)({},Z,le),!1,{type:"\u{1F4AD} useStoreUpdater / ".concat(Z),payload:le})},Ye)}},Ns=se(79925),va=(0,te.forwardRef)(function(It,k){var Z=It.initialValues,le=It.value,Ye=It.actions,He=It.onChange,ft=It.renderItem,Dn=It.renderContent,xn=It.renderEmpty,et=It.getItemStyles,nn=It.creatorButtonProps,_e=It.hideRemove,De=(0,qr.AC)(),ot=Zi(De),gt=function(dn,Ke){var Xe=De.getState(),Zt=Xe.keyManager,Un=dn[Ke]||[],ir=(0,ni.Uy)(Zt,function(Kn){return Un.forEach(function(Gr,Ar){var vi=Kn[Ar];vi===void 0&&(Kn[Ar]=(0,Si.Fs)(Ar))}),Kn});De.setState({keyManager:ir})};ot("value",Z,[]),ot("value",le),ot("actions",Ye),ot("onChange",He),ot("renderItem",ft),ot("renderContent",Dn),ot("renderEmpty",xn),ot("getItemStyles",et),ot("creatorButtonProps",nn),ot("hideRemove",_e),ot("initialValues",Z,[],function(Gn){gt(Gn,"initialValues")}),ot("value",le,null,function(Gn){return gt(Gn,"value")});var Pt=(0,Ns.t)();return(0,te.useImperativeHandle)(k,function(){return Pt}),null}),js=va,os=["SHOW_STORE_IN_DEVTOOLS","className","style"],Ji=(0,te.memo)((0,te.forwardRef)(function(It,k){var Z=It.SHOW_STORE_IN_DEVTOOLS,le=It.className,Ye=It.style,He=(0,ce.Z)(It,os);return(0,dt.jsx)(Ue.iV,{children:(0,dt.jsxs)(vr,{showDevtools:Z,children:[(0,dt.jsx)(Pn,{style:Ye,className:le}),(0,dt.jsx)(js,(0,X.Z)((0,X.Z)({},He),{},{ref:k}))]})})}))},79925:function(an,St,se){"use strict";se.d(St,{t:function(){return te}});var X=se(22638),ce=se(19983),te=function(){var Ut=(0,ce.AC)(),fn=(0,X.Z)(function(){return Ut.getState().activeId}),de=(0,X.Z)(function(Ae){var ut=Ut.getState(),it=ut.keyManager,en=it[Ae]||null;return en}),Xn=(0,X.Z)(function(){return Ut.getState().value}),ve=function(ut,it){return Ut.getState().dispatchListData({type:"addItem",item:ut,index:it})},ze=function(ut){return Ut.getState().dispatchListData({type:"removeItem",index:ut})},Wt=function(ut,it){return Ut.getState().dispatchListData({type:"updateItem",item:ut,index:it})};return{getActiveId:fn,getValue:Xn,addItem:ve,removeItem:ze,getIdByIndex:de,updateItem:Wt}}},19983:function(an,St,se){"use strict";se.d(St,{zt:function(){return Yn},MT:function(){return dr},oR:function(){return zn},AC:function(){return Zn}});var X=se(64063),ce=se.n(X),te=se(782),Ue=function(pn){return pn?te.mW:function(dt){return dt}},Ut=se(33869),fn=se(50161),de=se(1413),Xn=se(72307),ve=se.n(Xn),ze=se(69020),Wt={activeId:null,value:[],keyManager:[],hideRemove:!1,onChange:void 0,renderItem:void 0,actions:[],getItemStyles:function(){return{}}},Ae=se(45587),ut=se(12902),it=function(pn,dt){switch(dt.type){case"moveItem":var hr=dt.activeIndex,gr=dt.overIndex;return hr===gr||hr<0||hr>=pn.length||gr<0||gr>=pn.length?void 0:(0,ut.Uy)(pn,function(Qe){var Se=(0,Ae.Rp)(Qe,hr,gr);return Se});case"removeItem":var ke=new Set(Array.isArray(dt.index)?dt.index:[dt.index]);return ke.size<=0?void 0:(0,ut.Uy)(pn,function(Qe){var Se=Qe.filter(function(we,Pe){return!ke.has(Pe)});return Se});case"addItem":var Kt=dt.index,Lt=Kt===void 0?pn.length:Kt;return(0,ut.Uy)(pn,function(Qe){return Qe.splice(Lt,0,(0,ze.Fs)(Lt)),Qe});case"updateItem":return(0,ut.Uy)(pn,function(Qe){return Qe})}},en=se(72378),Rn=se.n(en),tn=function(pn,dt){switch(dt.type){case"moveItem":var hr=dt.activeIndex,gr=dt.overIndex;return hr===gr||hr<0||hr>=pn.length||gr<0||gr>=pn.length?void 0:(0,ut.Uy)(pn,function(Se){var we=(0,Ae.Rp)(Se,hr,gr);return we});case"removeItem":var ke=new Set(Array.isArray(dt.index)?dt.index:[dt.index]);return ke.size<=0?void 0:(0,ut.Uy)(pn,function(Se){var we=Se.filter(function(Pe,Ve){return!ke.has(Ve)});return we});case"addItem":var Kt=dt.item,Lt=dt.index,Qe=Lt===void 0?pn.length:Lt;return(0,ut.Uy)(pn,function(Se){return Se.splice(Qe,0,Kt),Se});case"updateItem":return(0,ut.Uy)(pn,function(Se){var we=dt.item,Pe=dt.index;return Se[Pe]=Rn()(Se[Pe],we),Se})}},ee=function(pn,dt){return(0,de.Z)((0,de.Z)({},Wt),{},{handleDragStart:function(gr){var ke=gr.active.id;ke&&pn({activeId:ke})},handleDragEnd:function(gr){var ke=gr.over,Kt=gr.active,Lt=dt(),Qe=Lt.dispatchListData,Se=Lt.keyManager;if(ke){var we=(0,ze._z)(Se,Kt.id),Pe=(0,ze._z)(Se,ke.id);Qe({type:"moveItem",activeIndex:we,overIndex:Pe})}pn({activeId:null})},handleDragCancel:function(){pn({activeId:null})},dispatchListData:function(gr){var ke=dt(),Kt=ke.value,Lt=ke.keyManager,Qe=ke.onChange,Se=tn(Kt,gr),we=it(Lt,gr);if(Se){if(ve()(Kt,Se))return;pn({value:Se,keyManager:we}),Qe&&Qe(Se,gr)}}})},Ir=ee,dr=function(pn){return(0,fn.F)(Ue(pn)(Ir,{name:"SortableList"}),ce())},tr=(0,Ut.k)(),zn=tr.useStore,Zn=tr.useStoreApi,Yn=tr.Provider},69020:function(an,St,se){"use strict";se.d(St,{_z:function(){return Wt},Fs:function(){return Ae}});var X=se(72307);let ce=ut=>crypto.getRandomValues(new Uint8Array(ut)),te=(ut,it,en)=>{let Rn=(2<<Math.log(ut.length-1)/Math.LN2)-1,tn=-~(1.6*Rn*it/ut.length);return(ee=it)=>{let Ir="";for(;;){let dr=en(tn),tr=tn;for(;tr--;)if(Ir+=ut[dr[tr]&Rn]||"",Ir.length===ee)return Ir}}},Ue=(ut,it=21)=>te(ut,it,ce),Ut=(ut=21)=>crypto.getRandomValues(new Uint8Array(ut)).reduce((it,en)=>(en&=63,en<36?it+=en.toString(36):en<62?it+=(en-26).toString(36).toUpperCase():en>62?it+="-":it+="_",it),"");var fn=se(67294),de=function(it){return it};function Xn(ut){var it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:de;return _toConsumableArray(new Array(ut)).map(function(en,Rn){return it(Rn)})}function ve(ut,it,en){var Rn=ut.length;if(it<0||it>=Rn||en<0||en>=Rn)return ut;var tn=ut[it],ee=it-en;return ee>0?[].concat(_toConsumableArray(ut.slice(0,en)),[tn],_toConsumableArray(ut.slice(en,it)),_toConsumableArray(ut.slice(it+1,Rn))):ee<0?[].concat(_toConsumableArray(ut.slice(0,it)),_toConsumableArray(ut.slice(it+1,en+1)),[tn],_toConsumableArray(ut.slice(en+1,Rn))):ut}var ze=function(it){var en=useState(it),Rn=_slicedToArray(en,2),tn=Rn[0],ee=Rn[1];return useEffect(function(){isEqual(it,tn)||ee(it)},[it]),[tn,ee]},Wt=function(it,en){return en?it.findIndex(function(Rn){return Rn===en}):-1},Ae=function(it){return Ut()}},60887:function(an,St,se){"use strict";se.d(St,{LB:function(){return Bi},y9:function(){return ro},g4:function(){return Ln},Lg:function(){return ye},uN:function(){return Pn},MA:function(){return Ge},LO:function(){return Ft},pE:function(){return pn},ey:function(){return dt},RJ:function(){return oi},Ai:function(){return Vs},VK:function(){return Oe},_8:function(){return Yn},hI:function(){return rr},Cj:function(){return Ko},O1:function(){return ya},Zj:function(){return _a},VT:function(){return Rn},Dy:function(){return tn}});var X=se(67294),ce=se(73935),te=se(24285);const Ue={display:"none"};function Ut(O){let{id:m,value:v}=O;return X.createElement("div",{id:m,style:Ue},v)}function fn(O){let{id:m,announcement:v,ariaLiveType:C="assertive"}=O;const N={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return X.createElement("div",{id:m,style:N,role:"status","aria-live":C,"aria-atomic":!0},v)}function de(){const[O,m]=(0,X.useState)("");return{announce:(0,X.useCallback)(C=>{C!=null&&m(C)},[]),announcement:O}}const Xn=(0,X.createContext)(null);function ve(O){const m=(0,X.useContext)(Xn);(0,X.useEffect)(()=>{if(!m)throw new Error("useDndMonitor must be used within a children of <DndContext>");return m(O)},[O,m])}function ze(){const[O]=(0,X.useState)(()=>new Set),m=(0,X.useCallback)(C=>(O.add(C),()=>O.delete(C)),[O]);return[(0,X.useCallback)(C=>{let{type:N,event:H}=C;O.forEach(Y=>{var R;return(R=Y[N])==null?void 0:R.call(Y,H)})},[O]),m]}const Wt={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Ae={onDragStart(O){let{active:m}=O;return"Picked up draggable item "+m.id+"."},onDragOver(O){let{active:m,over:v}=O;return v?"Draggable item "+m.id+" was moved over droppable area "+v.id+".":"Draggable item "+m.id+" is no longer over a droppable area."},onDragEnd(O){let{active:m,over:v}=O;return v?"Draggable item "+m.id+" was dropped over droppable area "+v.id:"Draggable item "+m.id+" was dropped."},onDragCancel(O){let{active:m}=O;return"Dragging was cancelled. Draggable item "+m.id+" was dropped."}};function ut(O){let{announcements:m=Ae,container:v,hiddenTextDescribedById:C,screenReaderInstructions:N=Wt}=O;const{announce:H,announcement:Y}=de(),R=(0,te.Ld)("DndLiveRegion"),[F,w]=(0,X.useState)(!1);if((0,X.useEffect)(()=>{w(!0)},[]),ve((0,X.useMemo)(()=>({onDragStart(G){let{active:he}=G;H(m.onDragStart({active:he}))},onDragMove(G){let{active:he,over:We}=G;m.onDragMove&&H(m.onDragMove({active:he,over:We}))},onDragOver(G){let{active:he,over:We}=G;H(m.onDragOver({active:he,over:We}))},onDragEnd(G){let{active:he,over:We}=G;H(m.onDragEnd({active:he,over:We}))},onDragCancel(G){let{active:he,over:We}=G;H(m.onDragCancel({active:he,over:We}))}}),[H,m])),!F)return null;const L=X.createElement(X.Fragment,null,X.createElement(Ut,{id:C,value:N.draggable}),X.createElement(fn,{id:R,announcement:Y}));return v?(0,ce.createPortal)(L,v):L}var it;(function(O){O.DragStart="dragStart",O.DragMove="dragMove",O.DragEnd="dragEnd",O.DragCancel="dragCancel",O.DragOver="dragOver",O.RegisterDroppable="registerDroppable",O.SetDroppableDisabled="setDroppableDisabled",O.UnregisterDroppable="unregisterDroppable"})(it||(it={}));function en(){}function Rn(O,m){return(0,X.useMemo)(()=>({sensor:O,options:m!=null?m:{}}),[O,m])}function tn(){for(var O=arguments.length,m=new Array(O),v=0;v<O;v++)m[v]=arguments[v];return(0,X.useMemo)(()=>[...m].filter(C=>C!=null),[...m])}const ee=Object.freeze({x:0,y:0});function Ir(O,m){return Math.sqrt(Math.pow(O.x-m.x,2)+Math.pow(O.y-m.y,2))}function dr(O,m){const v=(0,te.DC)(O);if(!v)return"0 0";const C={x:(v.x-m.left)/m.width*100,y:(v.y-m.top)/m.height*100};return C.x+"% "+C.y+"%"}function tr(O,m){let{data:{value:v}}=O,{data:{value:C}}=m;return v-C}function zn(O,m){let{data:{value:v}}=O,{data:{value:C}}=m;return C-v}function Zn(O){let{left:m,top:v,height:C,width:N}=O;return[{x:m,y:v},{x:m+N,y:v},{x:m,y:v+C},{x:m+N,y:v+C}]}function Yn(O,m){if(!O||O.length===0)return null;const[v]=O;return m?v[m]:v}function vn(O,m,v){return m===void 0&&(m=O.left),v===void 0&&(v=O.top),{x:m+O.width*.5,y:v+O.height*.5}}const pn=O=>{let{collisionRect:m,droppableRects:v,droppableContainers:C}=O;const N=vn(m,m.left,m.top),H=[];for(const Y of C){const{id:R}=Y,F=v.get(R);if(F){const w=Ir(vn(F),N);H.push({id:R,data:{droppableContainer:Y,value:w}})}}return H.sort(tr)},dt=O=>{let{collisionRect:m,droppableRects:v,droppableContainers:C}=O;const N=Zn(m),H=[];for(const Y of C){const{id:R}=Y,F=v.get(R);if(F){const w=Zn(F),L=N.reduce((he,We,at)=>he+Ir(w[at],We),0),G=Number((L/4).toFixed(4));H.push({id:R,data:{droppableContainer:Y,value:G}})}}return H.sort(tr)};function hr(O,m){const v=Math.max(m.top,O.top),C=Math.max(m.left,O.left),N=Math.min(m.left+m.width,O.left+O.width),H=Math.min(m.top+m.height,O.top+O.height),Y=N-C,R=H-v;if(C<N&&v<H){const F=m.width*m.height,w=O.width*O.height,L=Y*R,G=L/(F+w-L);return Number(G.toFixed(4))}return 0}const gr=O=>{let{collisionRect:m,droppableRects:v,droppableContainers:C}=O;const N=[];for(const H of C){const{id:Y}=H,R=v.get(Y);if(R){const F=hr(R,m);F>0&&N.push({id:Y,data:{droppableContainer:H,value:F}})}}return N.sort(zn)};function ke(O,m){const{top:v,left:C,bottom:N,right:H}=m;return v<=O.y&&O.y<=N&&C<=O.x&&O.x<=H}const Kt=O=>{let{droppableContainers:m,droppableRects:v,pointerCoordinates:C}=O;if(!C)return[];const N=[];for(const H of m){const{id:Y}=H,R=v.get(Y);if(R&&ke(C,R)){const w=Zn(R).reduce((G,he)=>G+Ir(C,he),0),L=Number((w/4).toFixed(4));N.push({id:Y,data:{droppableContainer:H,value:L}})}}return N.sort(tr)};function Lt(O,m,v){return si(Rt({},O),{scaleX:m&&v?m.width/v.width:1,scaleY:m&&v?m.height/v.height:1})}function Qe(O,m){return O&&m?{x:O.left-m.left,y:O.top-m.top}:ee}function Se(O){return function(v){for(var C=arguments.length,N=new Array(C>1?C-1:0),H=1;H<C;H++)N[H-1]=arguments[H];return N.reduce((Y,R)=>si(Rt({},Y),{top:Y.top+O*R.y,bottom:Y.bottom+O*R.y,left:Y.left+O*R.x,right:Y.right+O*R.x}),Rt({},v))}}const we=Se(1);function Pe(O){if(O.startsWith("matrix3d(")){const m=O.slice(9,-1).split(/, /);return{x:+m[12],y:+m[13],scaleX:+m[0],scaleY:+m[5]}}else if(O.startsWith("matrix(")){const m=O.slice(7,-1).split(/, /);return{x:+m[4],y:+m[5],scaleX:+m[0],scaleY:+m[3]}}return null}function Ve(O,m,v){const C=Pe(m);if(!C)return O;const{scaleX:N,scaleY:H,x:Y,y:R}=C,F=O.left-Y-(1-N)*parseFloat(v),w=O.top-R-(1-H)*parseFloat(v.slice(v.indexOf(" ")+1)),L=N?O.width/N:O.width,G=H?O.height/H:O.height;return{width:L,height:G,top:w,right:F+L,bottom:w+G,left:F}}const Ne={ignoreTransform:!1};function Oe(O,m){m===void 0&&(m=Ne);let v=O.getBoundingClientRect();if(m.ignoreTransform){const{transform:w,transformOrigin:L}=(0,te.Jj)(O).getComputedStyle(O);w&&(v=Ve(v,w,L))}const{top:C,left:N,width:H,height:Y,bottom:R,right:F}=v;return{top:C,left:N,width:H,height:Y,bottom:R,right:F}}function wt(O){return Oe(O,{ignoreTransform:!0})}function ct(O){const m=O.innerWidth,v=O.innerHeight;return{top:0,left:0,right:m,bottom:v,width:m,height:v}}function Nn(O,m){return m===void 0&&(m=(0,te.Jj)(O).getComputedStyle(O)),m.position==="fixed"}function ur(O,m){m===void 0&&(m=(0,te.Jj)(O).getComputedStyle(O));const v=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(N=>{const H=m[N];return typeof H=="string"?v.test(H):!1})}function rr(O,m){const v=[];function C(N){if(m!=null&&v.length>=m||!N)return v;if((0,te.qk)(N)&&N.scrollingElement!=null&&!v.includes(N.scrollingElement))return v.push(N.scrollingElement),v;if(!(0,te.Re)(N)||(0,te.vZ)(N)||v.includes(N))return v;const H=(0,te.Jj)(O).getComputedStyle(N);return N!==O&&ur(N,H)&&v.push(N),Nn(N,H)?v:C(N.parentNode)}return O?C(O):v}function yr(O){const[m]=rr(O,1);return m!=null?m:null}function zr(O){return!te.Nq||!O?null:(0,te.FJ)(O)?O:(0,te.UG)(O)?(0,te.qk)(O)||O===(0,te.r3)(O).scrollingElement?window:(0,te.Re)(O)?O:null:null}function Ur(O){return(0,te.FJ)(O)?O.scrollX:O.scrollLeft}function Lr(O){return(0,te.FJ)(O)?O.scrollY:O.scrollTop}function Yr(O){return{x:Ur(O),y:Lr(O)}}var Bn;(function(O){O[O.Forward=1]="Forward",O[O.Backward=-1]="Backward"})(Bn||(Bn={}));function sn(O){return!te.Nq||!O?!1:O===document.scrollingElement}function Tn(O){const m={x:0,y:0},v=sn(O)?{height:window.innerHeight,width:window.innerWidth}:{height:O.clientHeight,width:O.clientWidth},C={x:O.scrollWidth-v.width,y:O.scrollHeight-v.height},N=O.scrollTop<=m.y,H=O.scrollLeft<=m.x,Y=O.scrollTop>=C.y,R=O.scrollLeft>=C.x;return{isTop:N,isLeft:H,isBottom:Y,isRight:R,maxScroll:C,minScroll:m}}const _r={x:.2,y:.2};function ai(O,m,v,C,N){let{top:H,left:Y,right:R,bottom:F}=v;C===void 0&&(C=10),N===void 0&&(N=_r);const{isTop:w,isBottom:L,isLeft:G,isRight:he}=Tn(O),We={x:0,y:0},at={x:0,y:0},tt={height:m.height*N.y,width:m.width*N.x};return!w&&H<=m.top+tt.height?(We.y=Bn.Backward,at.y=C*Math.abs((m.top+tt.height-H)/tt.height)):!L&&F>=m.bottom-tt.height&&(We.y=Bn.Forward,at.y=C*Math.abs((m.bottom-tt.height-F)/tt.height)),!he&&R>=m.right-tt.width?(We.x=Bn.Forward,at.x=C*Math.abs((m.right-tt.width-R)/tt.width)):!G&&Y<=m.left+tt.width&&(We.x=Bn.Backward,at.x=C*Math.abs((m.left+tt.width-Y)/tt.width)),{direction:We,speed:at}}function Tr(O){if(O===document.scrollingElement){const{innerWidth:H,innerHeight:Y}=window;return{top:0,left:0,right:H,bottom:Y,width:H,height:Y}}const{top:m,left:v,right:C,bottom:N}=O.getBoundingClientRect();return{top:m,left:v,right:C,bottom:N,width:O.clientWidth,height:O.clientHeight}}function qr(O){return O.reduce((m,v)=>(0,te.IH)(m,Yr(v)),ee)}function Si(O){return O.reduce((m,v)=>m+Ur(v),0)}function Ei(O){return O.reduce((m,v)=>m+Lr(v),0)}function zi(O,m){if(m===void 0&&(m=Oe),!O)return;const{top:v,left:C,bottom:N,right:H}=m(O);yr(O)&&(N<=0||H<=0||v>=window.innerHeight||C>=window.innerWidth)&&O.scrollIntoView({block:"center",inline:"center"})}const Ss=[["x",["left","right"],Si],["y",["top","bottom"],Ei]];class ei{constructor(m,v){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const C=rr(v),N=qr(C);this.rect=Rt({},m),this.width=m.width,this.height=m.height;for(const[H,Y,R]of Ss)for(const F of Y)Object.defineProperty(this,F,{get:()=>{const w=R(C),L=N[H]-w;return this.rect[F]+L},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ii{constructor(m){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(v=>{var C;return(C=this.target)==null?void 0:C.removeEventListener(...v)})},this.target=m}add(m,v,C){var N;(N=this.target)==null||N.addEventListener(m,v,C),this.listeners.push([m,v,C])}}function ui(O){const{EventTarget:m}=(0,te.Jj)(O);return O instanceof m?O:(0,te.r3)(O)}function ls(O,m){const v=Math.abs(O.x),C=Math.abs(O.y);return typeof m=="number"?Math.sqrt(su(v,2)+su(C,2))>m:"x"in m&&"y"in m?v>m.x&&C>m.y:"x"in m?v>m.x:"y"in m?C>m.y:!1}var Hr;(function(O){O.Click="click",O.DragStart="dragstart",O.Keydown="keydown",O.ContextMenu="contextmenu",O.Resize="resize",O.SelectionChange="selectionchange",O.VisibilityChange="visibilitychange"})(Hr||(Hr={}));function Xi(O){O.preventDefault()}function Wr(O){O.stopPropagation()}var Ln;(function(O){O.Space="Space",O.Down="ArrowDown",O.Right="ArrowRight",O.Left="ArrowLeft",O.Up="ArrowUp",O.Esc="Escape",O.Enter="Enter"})(Ln||(Ln={}));const Ts={start:[Ln.Space,Ln.Enter],cancel:[Ln.Esc],end:[Ln.Space,Ln.Enter]},Q=(O,m)=>{let{currentCoordinates:v}=m;switch(O.code){case Ln.Right:return si(Rt({},v),{x:v.x+25});case Ln.Left:return si(Rt({},v),{x:v.x-25});case Ln.Down:return si(Rt({},v),{y:v.y+25});case Ln.Up:return si(Rt({},v),{y:v.y-25})}};class ye{constructor(m){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=m;const{event:{target:v}}=m;this.props=m,this.listeners=new ii((0,te.r3)(v)),this.windowListeners=new ii((0,te.Jj)(v)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Hr.Resize,this.handleCancel),this.windowListeners.add(Hr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Hr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:m,onStart:v}=this.props,C=m.node.current;C&&zi(C),v(ee)}handleKeyDown(m){if((0,te.vd)(m)){const{active:v,context:C,options:N}=this.props,{keyboardCodes:H=Ts,coordinateGetter:Y=Q,scrollBehavior:R="smooth"}=N,{code:F}=m;if(H.end.includes(F)){this.handleEnd(m);return}if(H.cancel.includes(F)){this.handleCancel(m);return}const{collisionRect:w}=C.current,L=w?{x:w.left,y:w.top}:ee;this.referenceCoordinates||(this.referenceCoordinates=L);const G=Y(m,{active:v,context:C.current,currentCoordinates:L});if(G){const he=(0,te.$X)(G,L),We={x:0,y:0},{scrollableAncestors:at}=C.current;for(const tt of at){const $e=m.code,{isTop:Ct,isRight:En,isLeft:Ot,isBottom:yt,maxScroll:rn,minScroll:hn}=Tn(tt),$t=Tr(tt),on={x:Math.min($e===Ln.Right?$t.right-$t.width/2:$t.right,Math.max($e===Ln.Right?$t.left:$t.left+$t.width/2,G.x)),y:Math.min($e===Ln.Down?$t.bottom-$t.height/2:$t.bottom,Math.max($e===Ln.Down?$t.top:$t.top+$t.height/2,G.y))},jt=$e===Ln.Right&&!En||$e===Ln.Left&&!Ot,In=$e===Ln.Down&&!yt||$e===Ln.Up&&!Ct;if(jt&&on.x!==G.x){const fr=tt.scrollLeft+he.x,lr=$e===Ln.Right&&fr<=rn.x||$e===Ln.Left&&fr>=hn.x;if(lr&&!he.y){tt.scrollTo({left:fr,behavior:R});return}lr?We.x=tt.scrollLeft-fr:We.x=$e===Ln.Right?tt.scrollLeft-rn.x:tt.scrollLeft-hn.x,We.x&&tt.scrollBy({left:-We.x,behavior:R});break}else if(In&&on.y!==G.y){const fr=tt.scrollTop+he.y,lr=$e===Ln.Down&&fr<=rn.y||$e===Ln.Up&&fr>=hn.y;if(lr&&!he.x){tt.scrollTo({top:fr,behavior:R});return}lr?We.y=tt.scrollTop-fr:We.y=$e===Ln.Down?tt.scrollTop-rn.y:tt.scrollTop-hn.y,We.y&&tt.scrollBy({top:-We.y,behavior:R});break}}this.handleMove(m,(0,te.IH)((0,te.$X)(G,this.referenceCoordinates),We))}}}handleMove(m,v){const{onMove:C}=this.props;m.preventDefault(),C(v)}handleEnd(m){const{onEnd:v}=this.props;m.preventDefault(),this.detach(),v()}handleCancel(m){const{onCancel:v}=this.props;m.preventDefault(),this.detach(),v()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ye.activators=[{eventName:"onKeyDown",handler:(O,m,v)=>{let{keyboardCodes:C=Ts,onActivation:N}=m,{active:H}=v;const{code:Y}=O.nativeEvent;if(C.start.includes(Y)){const R=H.activatorNode.current;return R&&O.target!==R?!1:(O.preventDefault(),N==null||N({event:O.nativeEvent}),!0)}return!1}}];function Ce(O){return!!(O&&"distance"in O)}function ge(O){return!!(O&&"delay"in O)}class vt{constructor(m,v,C){var N;C===void 0&&(C=ui(m.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=m,this.events=v;const{event:H}=m,{target:Y}=H;this.props=m,this.events=v,this.document=(0,te.r3)(Y),this.documentListeners=new ii(this.document),this.listeners=new ii(C),this.windowListeners=new ii((0,te.Jj)(Y)),this.initialCoordinates=(N=(0,te.DC)(H))!=null?N:ee,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:m,props:{options:{activationConstraint:v,bypassActivationConstraint:C}}}=this;if(this.listeners.add(m.move.name,this.handleMove,{passive:!1}),this.listeners.add(m.end.name,this.handleEnd),this.windowListeners.add(Hr.Resize,this.handleCancel),this.windowListeners.add(Hr.DragStart,Xi),this.windowListeners.add(Hr.VisibilityChange,this.handleCancel),this.windowListeners.add(Hr.ContextMenu,Xi),this.documentListeners.add(Hr.Keydown,this.handleKeydown),v){if(C!=null&&C({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(ge(v)){this.timeoutId=setTimeout(this.handleStart,v.delay);return}if(Ce(v))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:m}=this,{onStart:v}=this.props;m&&(this.activated=!0,this.documentListeners.add(Hr.Click,Wr,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Hr.SelectionChange,this.removeTextSelection),v(m))}handleMove(m){var v;const{activated:C,initialCoordinates:N,props:H}=this,{onMove:Y,options:{activationConstraint:R}}=H;if(!N)return;const F=(v=(0,te.DC)(m))!=null?v:ee,w=(0,te.$X)(N,F);if(!C&&R){if(Ce(R)){if(R.tolerance!=null&&ls(w,R.tolerance))return this.handleCancel();if(ls(w,R.distance))return this.handleStart()}return ge(R)&&ls(w,R.tolerance)?this.handleCancel():void 0}m.cancelable&&m.preventDefault(),Y(F)}handleEnd(){const{onEnd:m}=this.props;this.detach(),m()}handleCancel(){const{onCancel:m}=this.props;this.detach(),m()}handleKeydown(m){m.code===Ln.Esc&&this.handleCancel()}removeTextSelection(){var m;(m=this.document.getSelection())==null||m.removeAllRanges()}}const Ht={move:{name:"pointermove"},end:{name:"pointerup"}};class Jt extends vt{constructor(m){const{event:v}=m,C=(0,te.r3)(v.target);super(m,Ht,C)}}Jt.activators=[{eventName:"onPointerDown",handler:(O,m)=>{let{nativeEvent:v}=O,{onActivation:C}=m;return!v.isPrimary||v.button!==0?!1:(C==null||C({event:v}),!0)}}];const _t={move:{name:"mousemove"},end:{name:"mouseup"}};var ht;(function(O){O[O.RightClick=2]="RightClick"})(ht||(ht={}));class Ge extends vt{constructor(m){super(m,_t,(0,te.r3)(m.event.target))}}Ge.activators=[{eventName:"onMouseDown",handler:(O,m)=>{let{nativeEvent:v}=O,{onActivation:C}=m;return v.button===ht.RightClick?!1:(C==null||C({event:v}),!0)}}];const st={move:{name:"touchmove"},end:{name:"touchend"}};class Ft extends vt{constructor(m){super(m,st)}static setup(){return window.addEventListener(st.move.name,m,{capture:!1,passive:!1}),function(){window.removeEventListener(st.move.name,m)};function m(){}}}Ft.activators=[{eventName:"onTouchStart",handler:(O,m)=>{let{nativeEvent:v}=O,{onActivation:C}=m;const{touches:N}=v;return N.length>1?!1:(C==null||C({event:v}),!0)}}];var kn;(function(O){O[O.Pointer=0]="Pointer",O[O.DraggableRect=1]="DraggableRect"})(kn||(kn={}));var On;(function(O){O[O.TreeOrder=0]="TreeOrder",O[O.ReversedTreeOrder=1]="ReversedTreeOrder"})(On||(On={}));function $n(O){let{acceleration:m,activator:v=kn.Pointer,canScroll:C,draggingRect:N,enabled:H,interval:Y=5,order:R=On.TreeOrder,pointerCoordinates:F,scrollableAncestors:w,scrollableAncestorRects:L,delta:G,threshold:he}=O;const We=ti({delta:G,disabled:!H}),[at,tt]=(0,te.Yz)(),$e=(0,X.useRef)({x:0,y:0}),Ct=(0,X.useRef)({x:0,y:0}),En=(0,X.useMemo)(()=>{switch(v){case kn.Pointer:return F?{top:F.y,bottom:F.y,left:F.x,right:F.x}:null;case kn.DraggableRect:return N}},[v,N,F]),Ot=(0,X.useRef)(null),yt=(0,X.useCallback)(()=>{const hn=Ot.current;if(!hn)return;const $t=$e.current.x*Ct.current.x,on=$e.current.y*Ct.current.y;hn.scrollBy($t,on)},[]),rn=(0,X.useMemo)(()=>R===On.TreeOrder?[...w].reverse():w,[R,w]);(0,X.useEffect)(()=>{if(!H||!w.length||!En){tt();return}for(const hn of rn){if((C==null?void 0:C(hn))===!1)continue;const $t=w.indexOf(hn),on=L[$t];if(!on)continue;const{direction:jt,speed:In}=ai(hn,on,En,m,he);for(const fr of["x","y"])We[fr][jt[fr]]||(In[fr]=0,jt[fr]=0);if(In.x>0||In.y>0){tt(),Ot.current=hn,at(yt,Y),$e.current=In,Ct.current=jt;return}}$e.current={x:0,y:0},Ct.current={x:0,y:0},tt()},[m,yt,C,tt,H,Y,JSON.stringify(En),JSON.stringify(We),at,w,rn,L,JSON.stringify(he)])}const Mr={x:{[Bn.Backward]:!1,[Bn.Forward]:!1},y:{[Bn.Backward]:!1,[Bn.Forward]:!1}};function ti(O){let{delta:m,disabled:v}=O;const C=(0,te.D9)(m);return(0,te.Gj)(N=>{if(v||!C||!N)return Mr;const H={x:Math.sign(m.x-C.x),y:Math.sign(m.y-C.y)};return{x:{[Bn.Backward]:N.x[Bn.Backward]||H.x===-1,[Bn.Forward]:N.x[Bn.Forward]||H.x===1},y:{[Bn.Backward]:N.y[Bn.Backward]||H.y===-1,[Bn.Forward]:N.y[Bn.Forward]||H.y===1}}},[v,m,C])}function xe(O,m){const v=m!==null?O.get(m):void 0,C=v?v.node.current:null;return(0,te.Gj)(N=>{var H;return m===null?null:(H=C!=null?C:N)!=null?H:null},[C,m])}function At(O,m){return(0,X.useMemo)(()=>O.reduce((v,C)=>{const{sensor:N}=C,H=N.activators.map(Y=>({eventName:Y.eventName,handler:m(Y.handler,C)}));return[...v,...H]},[]),[O,m])}var Pn;(function(O){O[O.Always=0]="Always",O[O.BeforeDragging=1]="BeforeDragging",O[O.WhileDragging=2]="WhileDragging"})(Pn||(Pn={}));var vr;(function(O){O.Optimized="optimized"})(vr||(vr={}));const ni=new Map;function Zi(O,m){let{dragging:v,dependencies:C,config:N}=m;const[H,Y]=(0,X.useState)(null),{frequency:R,measure:F,strategy:w}=N,L=(0,X.useRef)(O),G=$e(),he=(0,te.Ey)(G),We=(0,X.useCallback)(function(Ct){Ct===void 0&&(Ct=[]),!he.current&&Y(En=>En===null?Ct:En.concat(Ct.filter(Ot=>!En.includes(Ot))))},[he]),at=(0,X.useRef)(null),tt=(0,te.Gj)(Ct=>{if(G&&!v)return ni;if(!Ct||Ct===ni||L.current!==O||H!=null){const En=new Map;for(let Ot of O){if(!Ot)continue;if(H&&H.length>0&&!H.includes(Ot.id)&&Ot.rect.current){En.set(Ot.id,Ot.rect.current);continue}const yt=Ot.node.current,rn=yt?new ei(F(yt),yt):null;Ot.rect.current=rn,rn&&En.set(Ot.id,rn)}return En}return Ct},[O,H,v,G,F]);return(0,X.useEffect)(()=>{L.current=O},[O]),(0,X.useEffect)(()=>{G||We()},[v,G]),(0,X.useEffect)(()=>{H&&H.length>0&&Y(null)},[JSON.stringify(H)]),(0,X.useEffect)(()=>{G||typeof R!="number"||at.current!==null||(at.current=setTimeout(()=>{We(),at.current=null},R))},[R,G,We,...C]),{droppableRects:tt,measureDroppableContainers:We,measuringScheduled:H!=null};function $e(){switch(w){case Pn.Always:return!1;case Pn.BeforeDragging:return v;default:return!v}}}function Ns(O,m){return(0,te.Gj)(v=>O?v||(typeof m=="function"?m(O):O):null,[m,O])}function va(O,m){return Ns(O,m)}function js(O){let{callback:m,disabled:v}=O;const C=(0,te.zX)(m),N=(0,X.useMemo)(()=>{if(v||typeof window=="undefined"||typeof window.MutationObserver=="undefined")return;const{MutationObserver:H}=window;return new H(C)},[C,v]);return(0,X.useEffect)(()=>()=>N==null?void 0:N.disconnect(),[N]),N}function os(O){let{callback:m,disabled:v}=O;const C=(0,te.zX)(m),N=(0,X.useMemo)(()=>{if(v||typeof window=="undefined"||typeof window.ResizeObserver=="undefined")return;const{ResizeObserver:H}=window;return new H(C)},[v]);return(0,X.useEffect)(()=>()=>N==null?void 0:N.disconnect(),[N]),N}function Ji(O){return new ei(Oe(O),O)}function It(O,m,v){m===void 0&&(m=Ji);const[C,N]=(0,X.useReducer)(R,null),H=js({callback(F){if(O)for(const w of F){const{type:L,target:G}=w;if(L==="childList"&&G instanceof HTMLElement&&G.contains(O)){N();break}}}}),Y=os({callback:N});return(0,te.LI)(()=>{N(),O?(Y==null||Y.observe(O),H==null||H.observe(document.body,{childList:!0,subtree:!0})):(Y==null||Y.disconnect(),H==null||H.disconnect())},[O]),C;function R(F){if(!O)return null;if(O.isConnected===!1){var w;return(w=F!=null?F:v)!=null?w:null}const L=m(O);return JSON.stringify(F)===JSON.stringify(L)?F:L}}function k(O){const m=Ns(O);return Qe(O,m)}const Z=[];function le(O){const m=(0,X.useRef)(O),v=(0,te.Gj)(C=>O?C&&C!==Z&&O&&m.current&&O.parentNode===m.current.parentNode?C:rr(O):Z,[O]);return(0,X.useEffect)(()=>{m.current=O},[O]),v}function Ye(O){const[m,v]=(0,X.useState)(null),C=(0,X.useRef)(O),N=(0,X.useCallback)(H=>{const Y=zr(H.target);Y&&v(R=>R?(R.set(Y,Yr(Y)),new Map(R)):null)},[]);return(0,X.useEffect)(()=>{const H=C.current;if(O!==H){Y(H);const R=O.map(F=>{const w=zr(F);return w?(w.addEventListener("scroll",N,{passive:!0}),[w,Yr(w)]):null}).filter(F=>F!=null);v(R.length?new Map(R):null),C.current=O}return()=>{Y(O),Y(H)};function Y(R){R.forEach(F=>{const w=zr(F);w==null||w.removeEventListener("scroll",N)})}},[N,O]),(0,X.useMemo)(()=>O.length?m?Array.from(m.values()).reduce((H,Y)=>(0,te.IH)(H,Y),ee):qr(O):ee,[O,m])}function He(O,m){m===void 0&&(m=[]);const v=(0,X.useRef)(null);return(0,X.useEffect)(()=>{v.current=null},m),(0,X.useEffect)(()=>{const C=O!==ee;C&&!v.current&&(v.current=O),!C&&v.current&&(v.current=null)},[O]),v.current?(0,te.$X)(O,v.current):ee}function ft(O){(0,X.useEffect)(()=>{if(!te.Nq)return;const m=O.map(v=>{let{sensor:C}=v;return C.setup==null?void 0:C.setup()});return()=>{for(const v of m)v==null||v()}},O.map(m=>{let{sensor:v}=m;return v}))}function Dn(O,m){return(0,X.useMemo)(()=>O.reduce((v,C)=>{let{eventName:N,handler:H}=C;return v[N]=Y=>{H(Y,m)},v},{}),[O,m])}function xn(O){return(0,X.useMemo)(()=>O?ct(O):null,[O])}const et=[];function nn(O,m){m===void 0&&(m=Oe);const[v]=O,C=xn(v?(0,te.Jj)(v):null),[N,H]=(0,X.useReducer)(R,et),Y=os({callback:H});return O.length>0&&N===et&&H(),(0,te.LI)(()=>{O.length?O.forEach(F=>Y==null?void 0:Y.observe(F)):(Y==null||Y.disconnect(),H())},[O]),N;function R(){return O.length?O.map(F=>sn(F)?C:new ei(m(F),F)):et}}function _e(O){if(!O)return null;if(O.children.length>1)return O;const m=O.children[0];return(0,te.Re)(m)?m:O}function De(O){let{measure:m}=O;const[v,C]=(0,X.useState)(null),N=(0,X.useCallback)(w=>{for(const{target:L}of w)if((0,te.Re)(L)){C(G=>{const he=m(L);return G?si(Rt({},G),{width:he.width,height:he.height}):he});break}},[m]),H=os({callback:N}),Y=(0,X.useCallback)(w=>{const L=_e(w);H==null||H.disconnect(),L&&(H==null||H.observe(L)),C(L?m(L):null)},[m,H]),[R,F]=(0,te.wm)(Y);return(0,X.useMemo)(()=>({nodeRef:R,rect:v,setRef:F}),[v,R,F])}const ot=[{sensor:Jt,options:{}},{sensor:ye,options:{}}],gt={current:{}},Pt={draggable:{measure:wt},droppable:{measure:wt,strategy:Pn.WhileDragging,frequency:vr.Optimized},dragOverlay:{measure:Oe}};class Gn extends Map{get(m){var v;return m!=null&&(v=super.get(m))!=null?v:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(m=>{let{disabled:v}=m;return!v})}getNodeFor(m){var v,C;return(v=(C=this.get(m))==null?void 0:C.node.current)!=null?v:void 0}}const dn={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Gn,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:en},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Pt,measureDroppableContainers:en,windowRect:null,measuringScheduled:!1},Ke={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:en,draggableNodes:new Map,over:null,measureDroppableContainers:en},Xe=(0,X.createContext)(Ke),Zt=(0,X.createContext)(dn);function Un(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Gn}}}function ir(O,m){switch(m.type){case it.DragStart:return si(Rt({},O),{draggable:si(Rt({},O.draggable),{initialCoordinates:m.initialCoordinates,active:m.active})});case it.DragMove:return O.draggable.active?si(Rt({},O),{draggable:si(Rt({},O.draggable),{translate:{x:m.coordinates.x-O.draggable.initialCoordinates.x,y:m.coordinates.y-O.draggable.initialCoordinates.y}})}):O;case it.DragEnd:case it.DragCancel:return si(Rt({},O),{draggable:si(Rt({},O.draggable),{active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}})});case it.RegisterDroppable:{const{element:v}=m,{id:C}=v,N=new Gn(O.droppable.containers);return N.set(C,v),si(Rt({},O),{droppable:si(Rt({},O.droppable),{containers:N})})}case it.SetDroppableDisabled:{const{id:v,key:C,disabled:N}=m,H=O.droppable.containers.get(v);if(!H||C!==H.key)return O;const Y=new Gn(O.droppable.containers);return Y.set(v,si(Rt({},H),{disabled:N})),si(Rt({},O),{droppable:si(Rt({},O.droppable),{containers:Y})})}case it.UnregisterDroppable:{const{id:v,key:C}=m,N=O.droppable.containers.get(v);if(!N||C!==N.key)return O;const H=new Gn(O.droppable.containers);return H.delete(v),si(Rt({},O),{droppable:si(Rt({},O.droppable),{containers:H})})}default:return O}}function Kn(O){let{disabled:m}=O;const{active:v,activatorEvent:C,draggableNodes:N}=(0,X.useContext)(Xe),H=(0,te.D9)(C),Y=(0,te.D9)(v==null?void 0:v.id);return(0,X.useEffect)(()=>{if(!m&&!C&&H&&Y!=null){if(!(0,te.vd)(H)||document.activeElement===H.target)return;const R=N.get(Y);if(!R)return;const{activatorNode:F,node:w}=R;if(!F.current&&!w.current)return;requestAnimationFrame(()=>{for(const L of[F.current,w.current]){if(!L)continue;const G=(0,te.so)(L);if(G){G.focus();break}}})}},[C,m,N,Y,H]),null}function Gr(O,m){let N=m,{transform:v}=N,C=qa(N,["transform"]);return O!=null&&O.length?O.reduce((H,Y)=>Y(Rt({transform:H},C)),v):v}function Ar(O){return(0,X.useMemo)(()=>({draggable:Rt(Rt({},Pt.draggable),O==null?void 0:O.draggable),droppable:Rt(Rt({},Pt.droppable),O==null?void 0:O.droppable),dragOverlay:Rt(Rt({},Pt.dragOverlay),O==null?void 0:O.dragOverlay)}),[O==null?void 0:O.draggable,O==null?void 0:O.droppable,O==null?void 0:O.dragOverlay])}function vi(O){let{activeNode:m,measure:v,initialRect:C,config:N=!0}=O;const H=(0,X.useRef)(!1),{x:Y,y:R}=typeof N=="boolean"?{x:N,y:N}:N;(0,te.LI)(()=>{if(!Y&&!R||!m){H.current=!1;return}if(H.current||!C)return;const w=m==null?void 0:m.node.current;if(!w||w.isConnected===!1)return;const L=v(w),G=Qe(L,C);if(Y||(G.x=0),R||(G.y=0),H.current=!0,Math.abs(G.x)>0||Math.abs(G.y)>0){const he=yr(w);he&&he.scrollBy({top:G.y,left:G.x})}},[m,Y,R,C,v])}const li=(0,X.createContext)(si(Rt({},ee),{scaleX:1,scaleY:1}));var sr;(function(O){O[O.Uninitialized=0]="Uninitialized",O[O.Initializing=1]="Initializing",O[O.Initialized=2]="Initialized"})(sr||(sr={}));const Bi=(0,X.memo)(function(m){var v,C,N,H;let zt=m,{id:Y,accessibility:R,autoScroll:F=!0,children:w,sensors:L=ot,collisionDetection:G=gr,measuring:he,modifiers:We}=zt,at=qa(zt,["id","accessibility","autoScroll","children","sensors","collisionDetection","measuring","modifiers"]);const tt=(0,X.useReducer)(ir,void 0,Un),[$e,Ct]=tt,[En,Ot]=ze(),[yt,rn]=(0,X.useState)(sr.Uninitialized),hn=yt===sr.Initialized,{draggable:{active:$t,nodes:on,translate:jt},droppable:{containers:In}}=$e,fr=$t?on.get($t):null,lr=(0,X.useRef)({initial:null,translated:null}),Nr=(0,X.useMemo)(()=>{var Gs;return $t!=null?{id:$t,data:(Gs=fr==null?void 0:fr.data)!=null?Gs:gt,rect:lr}:null},[$t,fr]),Jr=(0,X.useRef)(null),[ci,yi]=(0,X.useState)(null),[Di,Kr]=(0,X.useState)(null),Mi=(0,te.Ey)(at,Object.values(at)),cs=(0,te.Ld)("DndDescribedBy",Y),bs=(0,X.useMemo)(()=>In.getEnabled(),[In]),ps=Ar(he),{droppableRects:ms,measureDroppableContainers:$s,measuringScheduled:Ws}=Zi(bs,{dragging:hn,dependencies:[jt.x,jt.y],config:ps.droppable}),$i=xe(on,$t),ns=(0,X.useMemo)(()=>Di?(0,te.DC)(Di):null,[Di]),Bo=ho(),Ao=va($i,ps.draggable.measure);vi({activeNode:$t?on.get($t):null,config:Bo.layoutShiftCompensation,initialRect:Ao,measure:ps.draggable.measure});const Co=It($i,ps.draggable.measure,Ao),Jo=It($i?$i.parentElement:null),Qs=(0,X.useRef)({activatorEvent:null,active:null,activeNode:$i,collisionRect:null,collisions:null,droppableRects:ms,draggableNodes:on,draggingNode:null,draggingNodeRect:null,droppableContainers:In,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),co=In.getNodeFor((v=Qs.current.over)==null?void 0:v.id),_o=De({measure:ps.dragOverlay.measure}),us=(C=_o.nodeRef.current)!=null?C:$i,Yi=hn?(N=_o.rect)!=null?N:Co:null,Ra=!!(_o.nodeRef.current&&_o.rect),xo=k(Ra?null:Co),So=xn(us?(0,te.Jj)(us):null),jr=le(hn?co!=null?co:$i:null),Rs=nn(jr),Ua=Gr(We,{transform:{x:jt.x-xo.x,y:jt.y-xo.y,scaleX:1,scaleY:1},activatorEvent:Di,active:Nr,activeNodeRect:Co,containerNodeRect:Jo,draggingNodeRect:Yi,over:Qs.current.over,overlayNodeRect:_o.rect,scrollableAncestors:jr,scrollableAncestorRects:Rs,windowRect:So}),Il=ns?(0,te.IH)(ns,jt):null,Ro=Ye(jr),uo=He(Ro),_s=He(Ro,[Co]),Sa=(0,te.IH)(Ua,uo),Mo=Yi?we(Yi,Ua):null,cl=Nr&&Mo?G({active:Nr,collisionRect:Mo,droppableRects:ms,droppableContainers:bs,pointerCoordinates:Il}):null,ul=Yn(cl,"id"),[Ma,yl]=(0,X.useState)(null),_c=Ra?Ua:(0,te.IH)(Ua,_s),Fa=Lt(_c,(H=Ma==null?void 0:Ma.rect)!=null?H:null,Co),Hs=(0,X.useCallback)((Gs,Et)=>{let{sensor:xr,options:Po}=Et;if(Jr.current==null)return;const po=on.get(Jr.current);if(!po)return;const Us=Gs.nativeEvent,mo=new xr({active:Jr.current,activeNode:po,event:Us,options:Po,context:Qs,onStart(bo){const za=Jr.current;if(za==null)return;const Qi=on.get(za);if(!Qi)return;const{onDragStart:Ba}=Mi.current,ua={active:{id:za,data:Qi.data,rect:lr}};(0,ce.unstable_batchedUpdates)(()=>{Ba==null||Ba(ua),rn(sr.Initializing),Ct({type:it.DragStart,initialCoordinates:bo,active:za}),En({type:"onDragStart",event:ua})})},onMove(bo){Ct({type:it.DragMove,coordinates:bo})},onEnd:Io(it.DragEnd),onCancel:Io(it.DragCancel)});(0,ce.unstable_batchedUpdates)(()=>{yi(mo),Kr(Gs.nativeEvent)});function Io(bo){return function(){return Bc(this,null,function*(){const{active:Qi,collisions:Ba,over:ua,scrollAdjustedTranslate:Qa}=Qs.current;let fa=null;if(Qi&&Qa){const{cancelDrop:Xr}=Mi.current;fa={activatorEvent:Us,active:Qi,collisions:Ba,delta:Qa,over:ua},bo===it.DragEnd&&typeof Xr=="function"&&(yield Promise.resolve(Xr(fa)))&&(bo=it.DragCancel)}Jr.current=null,(0,ce.unstable_batchedUpdates)(()=>{Ct({type:bo}),rn(sr.Uninitialized),yl(null),yi(null),Kr(null);const Xr=bo===it.DragEnd?"onDragEnd":"onDragCancel";if(fa){const $r=Mi.current[Xr];$r==null||$r(fa),En({type:Xr,event:fa})}})})}}},[on]),ca=(0,X.useCallback)((Gs,Et)=>(xr,Po)=>{const po=xr.nativeEvent,Us=on.get(Po);if(Jr.current!==null||!Us||po.dndKit||po.defaultPrevented)return;const mo={active:Us};Gs(xr,Et.options,mo)===!0&&(po.dndKit={capturedBy:Et.sensor},Jr.current=Po,Hs(xr,Et))},[on,Hs]),ta=At(L,ca);ft(L),(0,te.LI)(()=>{Co&&yt===sr.Initializing&&rn(sr.Initialized)},[Co,yt]),(0,X.useEffect)(()=>{const{onDragMove:Gs}=Mi.current,{active:Et,activatorEvent:xr,collisions:Po,over:po}=Qs.current;if(!Et||!xr)return;const Us={active:Et,activatorEvent:xr,collisions:Po,delta:{x:Sa.x,y:Sa.y},over:po};(0,ce.unstable_batchedUpdates)(()=>{Gs==null||Gs(Us),En({type:"onDragMove",event:Us})})},[Sa.x,Sa.y]),(0,X.useEffect)(()=>{const{active:Gs,activatorEvent:Et,collisions:xr,droppableContainers:Po,scrollAdjustedTranslate:po}=Qs.current;if(!Gs||Jr.current==null||!Et||!po)return;const{onDragOver:Us}=Mi.current,mo=Po.get(ul),Io=mo&&mo.rect.current?{id:mo.id,rect:mo.rect.current,data:mo.data,disabled:mo.disabled}:null,bo={active:Gs,activatorEvent:Et,collisions:xr,delta:{x:po.x,y:po.y},over:Io};(0,ce.unstable_batchedUpdates)(()=>{yl(Io),Us==null||Us(bo),En({type:"onDragOver",event:bo})})},[ul]),(0,te.LI)(()=>{Qs.current={activatorEvent:Di,active:Nr,activeNode:$i,collisionRect:Mo,collisions:cl,droppableRects:ms,draggableNodes:on,draggingNode:us,draggingNodeRect:Yi,droppableContainers:In,over:Ma,scrollableAncestors:jr,scrollAdjustedTranslate:Sa},lr.current={initial:Yi,translated:Mo}},[Nr,$i,cl,Mo,on,us,Yi,ms,In,Ma,jr,Sa]),$n(si(Rt({},Bo),{delta:jt,draggingRect:Mo,pointerCoordinates:Il,scrollableAncestors:jr,scrollableAncestorRects:Rs}));const fo=(0,X.useMemo)(()=>({active:Nr,activeNode:$i,activeNodeRect:Co,activatorEvent:Di,collisions:cl,containerNodeRect:Jo,dragOverlay:_o,draggableNodes:on,droppableContainers:In,droppableRects:ms,over:Ma,measureDroppableContainers:$s,scrollableAncestors:jr,scrollableAncestorRects:Rs,measuringConfiguration:ps,measuringScheduled:Ws,windowRect:So}),[Nr,$i,Co,Di,cl,Jo,_o,on,In,ms,Ma,$s,jr,Rs,ps,Ws,So]),Ti=(0,X.useMemo)(()=>({activatorEvent:Di,activators:ta,active:Nr,activeNodeRect:Co,ariaDescribedById:{draggable:cs},dispatch:Ct,draggableNodes:on,over:Ma,measureDroppableContainers:$s}),[Di,ta,Nr,Co,Ct,cs,on,Ma,$s]);return X.createElement(Xn.Provider,{value:Ot},X.createElement(Xe.Provider,{value:Ti},X.createElement(Zt.Provider,{value:fo},X.createElement(li.Provider,{value:Fa},w)),X.createElement(Kn,{disabled:(R==null?void 0:R.restoreFocus)===!1})),X.createElement(ut,si(Rt({},R),{hiddenTextDescribedById:cs})));function ho(){const Gs=(ci==null?void 0:ci.autoScrollEnabled)===!1,Et=typeof F=="object"?F.enabled===!1:F===!1,xr=hn&&!Gs&&!Et;return typeof F=="object"?si(Rt({},F),{enabled:xr}):{enabled:xr}}}),ys=(0,X.createContext)(null),Ms="button",Ja="Droppable";function ya(O){let{id:m,data:v,disabled:C=!1,attributes:N}=O;const H=(0,te.Ld)(Ja),{activators:Y,activatorEvent:R,active:F,activeNodeRect:w,ariaDescribedById:L,draggableNodes:G,over:he}=(0,X.useContext)(Xe),{role:We=Ms,roleDescription:at="draggable",tabIndex:tt=0}=N!=null?N:{},$e=(F==null?void 0:F.id)===m,Ct=(0,X.useContext)($e?li:ys),[En,Ot]=(0,te.wm)(),[yt,rn]=(0,te.wm)(),hn=Dn(Y,m),$t=(0,te.Ey)(v);(0,te.LI)(()=>(G.set(m,{id:m,key:H,node:En,activatorNode:yt,data:$t}),()=>{const jt=G.get(m);jt&&jt.key===H&&G.delete(m)}),[G,m]);const on=(0,X.useMemo)(()=>({role:We,tabIndex:tt,"aria-disabled":C,"aria-pressed":$e&&We===Ms?!0:void 0,"aria-roledescription":at,"aria-describedby":L.draggable}),[C,We,tt,$e,at,L.draggable]);return{active:F,activatorEvent:R,activeNodeRect:w,attributes:on,isDragging:$e,listeners:C?void 0:hn,node:En,over:he,setNodeRef:Ot,setActivatorNodeRef:rn,transform:Ct}}function Ko(){return(0,X.useContext)(Zt)}const Xs="Droppable",Ca={timeout:25};function _a(O){let{data:m,disabled:v=!1,id:C,resizeObserverConfig:N}=O;const H=(0,te.Ld)(Xs),{active:Y,dispatch:R,over:F,measureDroppableContainers:w}=(0,X.useContext)(Xe),L=(0,X.useRef)({disabled:v}),G=(0,X.useRef)(!1),he=(0,X.useRef)(null),We=(0,X.useRef)(null),{disabled:at,updateMeasurementsFor:tt,timeout:$e}=Rt(Rt({},Ca),N),Ct=(0,te.Ey)(tt!=null?tt:C),En=(0,X.useCallback)(()=>{if(!G.current){G.current=!0;return}We.current!=null&&clearTimeout(We.current),We.current=setTimeout(()=>{w(Array.isArray(Ct.current)?Ct.current:[Ct.current]),We.current=null},$e)},[$e]),Ot=os({callback:En,disabled:at||!Y}),yt=(0,X.useCallback)((on,jt)=>{Ot&&(jt&&(Ot.unobserve(jt),G.current=!1),on&&Ot.observe(on))},[Ot]),[rn,hn]=(0,te.wm)(yt),$t=(0,te.Ey)(m);return(0,X.useEffect)(()=>{!Ot||!rn.current||(Ot.disconnect(),G.current=!1,Ot.observe(rn.current))},[rn,Ot]),(0,te.LI)(()=>(R({type:it.RegisterDroppable,element:{id:C,key:H,disabled:v,node:rn,rect:he,data:$t}}),()=>R({type:it.UnregisterDroppable,key:H,id:C})),[C]),(0,X.useEffect)(()=>{v!==L.current.disabled&&(R({type:it.SetDroppableDisabled,id:C,key:H,disabled:v}),L.current.disabled=v)},[C,H,v,R]),{active:Y,rect:he,isOver:(F==null?void 0:F.id)===C,node:rn,over:F,setNodeRef:hn}}function ks(O){let{animation:m,children:v}=O;const[C,N]=(0,X.useState)(null),[H,Y]=(0,X.useState)(null),R=(0,te.D9)(v);return!v&&!C&&R&&N(R),(0,te.LI)(()=>{if(!H)return;const F=C==null?void 0:C.key,w=C==null?void 0:C.props.id;if(F==null||w==null){N(null);return}Promise.resolve(m(w,H)).then(()=>{N(null)})},[m,C,H]),X.createElement(X.Fragment,null,v,C?(0,X.cloneElement)(C,{ref:Y}):null)}const to={x:0,y:0,scaleX:1,scaleY:1};function As(O){let{children:m}=O;return X.createElement(Xe.Provider,{value:Ke},X.createElement(li.Provider,{value:to},m))}const Cs={position:"fixed",touchAction:"none"},no=O=>(0,te.vd)(O)?"transform 250ms ease":void 0,Ni=(0,X.forwardRef)((O,m)=>{let{as:v,activatorEvent:C,adjustScale:N,children:H,className:Y,rect:R,style:F,transform:w,transition:L=no}=O;if(!R)return null;const G=N?w:si(Rt({},w),{scaleX:1,scaleY:1}),he=Rt(si(Rt({},Cs),{width:R.width,height:R.height,top:R.top,left:R.left,transform:te.ux.Transform.toString(G),transformOrigin:N&&C?dr(C,R):void 0,transition:typeof L=="function"?L(C):L}),F);return X.createElement(v,{className:Y,style:he,ref:m},H)}),Vs=O=>m=>{let{active:v,dragOverlay:C}=m;const N={},{styles:H,className:Y}=O;if(H!=null&&H.active)for(const[R,F]of Object.entries(H.active))F!==void 0&&(N[R]=v.node.style.getPropertyValue(R),v.node.style.setProperty(R,F));if(H!=null&&H.dragOverlay)for(const[R,F]of Object.entries(H.dragOverlay))F!==void 0&&C.node.style.setProperty(R,F);return Y!=null&&Y.active&&v.node.classList.add(Y.active),Y!=null&&Y.dragOverlay&&C.node.classList.add(Y.dragOverlay),function(){for(const[F,w]of Object.entries(N))v.node.style.setProperty(F,w);Y!=null&&Y.active&&v.node.classList.remove(Y.active)}},oi={duration:250,easing:"ease",keyframes:O=>{let{transform:{initial:m,final:v}}=O;return[{transform:te.ux.Transform.toString(m)},{transform:te.ux.Transform.toString(v)}]},sideEffects:Vs({styles:{active:{opacity:"0"}}})};function la(O){let{config:m,draggableNodes:v,droppableContainers:C,measuringConfiguration:N}=O;return(0,te.zX)((H,Y)=>{if(m===null)return;const R=v.get(H);if(!R)return;const F=R.node.current;if(!F)return;const w=_e(Y);if(!w)return;const{transform:L}=(0,te.Jj)(Y).getComputedStyle(Y),G=Pe(L);if(!G)return;const he=typeof m=="function"?m:xa(m);return zi(F,N.draggable.measure),he({active:{id:H,data:R.data,node:F,rect:N.draggable.measure(F)},draggableNodes:v,dragOverlay:{node:Y,rect:N.dragOverlay.measure(w)},droppableContainers:C,measuringConfiguration:N,transform:G})})}function xa(O){const{duration:m,easing:v,sideEffects:C,keyframes:N}=Rt(Rt({},oi),O);return H=>{let En=H,{active:Y,dragOverlay:R,transform:F}=En,w=qa(En,["active","dragOverlay","transform"]);if(!m)return;const L={x:R.rect.left-Y.rect.left,y:R.rect.top-Y.rect.top},G={scaleX:F.scaleX!==1?Y.rect.width*F.scaleX/R.rect.width:1,scaleY:F.scaleY!==1?Y.rect.height*F.scaleY/R.rect.height:1},he=Rt({x:F.x-L.x,y:F.y-L.y},G),We=N(si(Rt({},w),{active:Y,dragOverlay:R,transform:{initial:F,final:he}})),[at]=We,tt=We[We.length-1];if(JSON.stringify(at)===JSON.stringify(tt))return;const $e=C==null?void 0:C(Rt({active:Y,dragOverlay:R},w)),Ct=R.node.animate(We,{duration:m,easing:v,fill:"forwards"});return new Promise(Ot=>{Ct.onfinish=()=>{$e==null||$e(),Ot()}})}}let qo=0;function $a(O){return(0,X.useMemo)(()=>{if(O!=null)return qo++,qo},[O])}const ro=X.memo(O=>{let{adjustScale:m=!1,children:v,dropAnimation:C,style:N,transition:H,modifiers:Y,wrapperElement:R="div",className:F,zIndex:w=999}=O;const{activatorEvent:L,active:G,activeNodeRect:he,containerNodeRect:We,draggableNodes:at,droppableContainers:tt,dragOverlay:$e,over:Ct,measuringConfiguration:En,scrollableAncestors:Ot,scrollableAncestorRects:yt,windowRect:rn}=Ko(),hn=(0,X.useContext)(li),$t=$a(G==null?void 0:G.id),on=Gr(Y,{activatorEvent:L,active:G,activeNodeRect:he,containerNodeRect:We,draggingNodeRect:$e.rect,over:Ct,overlayNodeRect:$e.rect,scrollableAncestors:Ot,scrollableAncestorRects:yt,transform:hn,windowRect:rn}),jt=Ns(he),In=la({config:C,draggableNodes:at,droppableContainers:tt,measuringConfiguration:En}),fr=jt?$e.setRef:void 0;return X.createElement(As,null,X.createElement(ks,{animation:In},G&&$t?X.createElement(Ni,{key:$t,id:G.id,ref:fr,as:R,activatorEvent:L,adjustScale:m,className:F,transition:H,rect:jt,style:Rt({zIndex:w},N),transform:on},v):null))})},45587:function(an,St,se){"use strict";se.d(St,{Fo:function(){return dr},Rp:function(){return Ue},is:function(){return Lt},nB:function(){return hr},qw:function(){return Rn}});var X=se(67294),ce=se(60887),te=se(24285);function Ue(we,Pe,Ve){const Ne=we.slice();return Ne.splice(Ve<0?Ne.length+Ve:Ve,0,Ne.splice(Pe,1)[0]),Ne}function Ut(we,Pe,Ve){const Ne=we.slice();return Ne[Pe]=we[Ve],Ne[Ve]=we[Pe],Ne}function fn(we,Pe){return we.reduce((Ve,Ne,Oe)=>{const wt=Pe.get(Ne);return wt&&(Ve[Oe]=wt),Ve},Array(we.length))}function de(we){return we!==null&&we>=0}function Xn(we,Pe){if(we===Pe)return!0;if(we.length!==Pe.length)return!1;for(let Ve=0;Ve<we.length;Ve++)if(we[Ve]!==Pe[Ve])return!1;return!0}function ve(we){return typeof we=="boolean"?{draggable:we,droppable:we}:we}const ze={scaleX:1,scaleY:1},Wt=we=>{var Pe;let{rects:Ve,activeNodeRect:Ne,activeIndex:Oe,overIndex:wt,index:ct}=we;const Nn=(Pe=Ve[Oe])!=null?Pe:Ne;if(!Nn)return null;const ur=Ae(Ve,ct,Oe);if(ct===Oe){const rr=Ve[wt];return rr?Rt({x:Oe<wt?rr.left+rr.width-(Nn.left+Nn.width):rr.left-Nn.left,y:0},ze):null}return ct>Oe&&ct<=wt?Rt({x:-Nn.width-ur,y:0},ze):ct<Oe&&ct>=wt?Rt({x:Nn.width+ur,y:0},ze):Rt({x:0,y:0},ze)};function Ae(we,Pe,Ve){const Ne=we[Pe],Oe=we[Pe-1],wt=we[Pe+1];return!Ne||!Oe&&!wt?0:Ve<Pe?Oe?Ne.left-(Oe.left+Oe.width):wt.left-(Ne.left+Ne.width):wt?wt.left-(Ne.left+Ne.width):Ne.left-(Oe.left+Oe.width)}const ut=we=>{let{rects:Pe,activeIndex:Ve,overIndex:Ne,index:Oe}=we;const wt=Ue(Pe,Ne,Ve),ct=Pe[Oe],Nn=wt[Oe];return!Nn||!ct?null:{x:Nn.left-ct.left,y:Nn.top-ct.top,scaleX:Nn.width/ct.width,scaleY:Nn.height/ct.height}},it=we=>{let{activeIndex:Pe,index:Ve,rects:Ne,overIndex:Oe}=we,wt,ct;return Ve===Pe&&(wt=Ne[Ve],ct=Ne[Oe]),Ve===Oe&&(wt=Ne[Ve],ct=Ne[Pe]),!ct||!wt?null:{x:ct.left-wt.left,y:ct.top-wt.top,scaleX:ct.width/wt.width,scaleY:ct.height/wt.height}},en={scaleX:1,scaleY:1},Rn=we=>{var Pe;let{activeIndex:Ve,activeNodeRect:Ne,index:Oe,rects:wt,overIndex:ct}=we;const Nn=(Pe=wt[Ve])!=null?Pe:Ne;if(!Nn)return null;if(Oe===Ve){const rr=wt[ct];return rr?Rt({x:0,y:Ve<ct?rr.top+rr.height-(Nn.top+Nn.height):rr.top-Nn.top},en):null}const ur=tn(wt,Oe,Ve);return Oe>Ve&&Oe<=ct?Rt({x:0,y:-Nn.height-ur},en):Oe<Ve&&Oe>=ct?Rt({x:0,y:Nn.height+ur},en):Rt({x:0,y:0},en)};function tn(we,Pe,Ve){const Ne=we[Pe],Oe=we[Pe-1],wt=we[Pe+1];return Ne?Ve<Pe?Oe?Ne.top-(Oe.top+Oe.height):wt?wt.top-(Ne.top+Ne.height):0:wt?wt.top-(Ne.top+Ne.height):Oe?Ne.top-(Oe.top+Oe.height):0:0}const ee="Sortable",Ir=X.createContext({activeIndex:-1,containerId:ee,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:ut,disabled:{draggable:!1,droppable:!1}});function dr(we){let{children:Pe,id:Ve,items:Ne,strategy:Oe=ut,disabled:wt=!1}=we;const{active:ct,dragOverlay:Nn,droppableRects:ur,over:rr,measureDroppableContainers:yr}=(0,ce.Cj)(),zr=(0,te.Ld)(ee,Ve),Ur=Nn.rect!==null,Lr=(0,X.useMemo)(()=>Ne.map(Si=>typeof Si=="object"&&"id"in Si?Si.id:Si),[Ne]),Yr=ct!=null,Bn=ct?Lr.indexOf(ct.id):-1,sn=rr?Lr.indexOf(rr.id):-1,Tn=(0,X.useRef)(Lr),_r=!Xn(Lr,Tn.current),ai=sn!==-1&&Bn===-1||_r,Tr=ve(wt);(0,te.LI)(()=>{_r&&Yr&&yr(Lr)},[_r,Lr,Yr,yr]),(0,X.useEffect)(()=>{Tn.current=Lr},[Lr]);const qr=(0,X.useMemo)(()=>({activeIndex:Bn,containerId:zr,disabled:Tr,disableTransforms:ai,items:Lr,overIndex:sn,useDragOverlay:Ur,sortedRects:fn(Lr,ur),strategy:Oe}),[Bn,zr,Tr.draggable,Tr.droppable,ai,Lr,sn,ur,Ur,Oe]);return X.createElement(Ir.Provider,{value:qr},Pe)}const tr=we=>{let{id:Pe,items:Ve,activeIndex:Ne,overIndex:Oe}=we;return Ue(Ve,Ne,Oe).indexOf(Pe)},zn=we=>{let{containerId:Pe,isSorting:Ve,wasDragging:Ne,index:Oe,items:wt,newIndex:ct,previousItems:Nn,previousContainerId:ur,transition:rr}=we;return!rr||!Ne||Nn!==wt&&Oe===ct?!1:Ve?!0:ct!==Oe&&Pe===ur},Zn={duration:200,easing:"ease"},Yn="transform",vn=te.ux.Transition.toString({property:Yn,duration:0,easing:"linear"}),pn={roleDescription:"sortable"};function dt(we){let{disabled:Pe,index:Ve,node:Ne,rect:Oe}=we;const[wt,ct]=(0,X.useState)(null),Nn=(0,X.useRef)(Ve);return(0,te.LI)(()=>{if(!Pe&&Ve!==Nn.current&&Ne.current){const ur=Oe.current;if(ur){const rr=(0,ce.VK)(Ne.current,{ignoreTransform:!0}),yr={x:ur.left-rr.left,y:ur.top-rr.top,scaleX:ur.width/rr.width,scaleY:ur.height/rr.height};(yr.x||yr.y)&&ct(yr)}}Ve!==Nn.current&&(Nn.current=Ve)},[Pe,Ve,Ne,Oe]),(0,X.useEffect)(()=>{wt&&ct(null)},[wt]),wt}function hr(we){let{animateLayoutChanges:Pe=zn,attributes:Ve,disabled:Ne,data:Oe,getNewIndex:wt=tr,id:ct,strategy:Nn,resizeObserverConfig:ur,transition:rr=Zn}=we;const{items:yr,containerId:zr,activeIndex:Ur,disabled:Lr,disableTransforms:Yr,sortedRects:Bn,overIndex:sn,useDragOverlay:Tn,strategy:_r}=(0,X.useContext)(Ir),ai=gr(Ne,Lr),Tr=yr.indexOf(ct),qr=(0,X.useMemo)(()=>Rt({sortable:{containerId:zr,index:Tr,items:yr}},Oe),[zr,Oe,Tr,yr]),Si=(0,X.useMemo)(()=>yr.slice(yr.indexOf(ct)),[yr,ct]),{rect:Ei,node:zi,isOver:Ss,setNodeRef:ei}=(0,ce.Zj)({id:ct,data:qr,disabled:ai.droppable,resizeObserverConfig:Rt({updateMeasurementsFor:Si},ur)}),{active:ii,activatorEvent:ui,activeNodeRect:ls,attributes:Hr,setNodeRef:Xi,listeners:Wr,isDragging:Ln,over:Ts,setActivatorNodeRef:Q,transform:ye}=(0,ce.O1)({id:ct,data:qr,attributes:Rt(Rt({},pn),Ve),disabled:ai.draggable}),Ce=(0,te.HB)(ei,Xi),ge=!!ii,vt=ge&&!Yr&&de(Ur)&&de(sn),Ht=!Tn&&Ln,Jt=Ht&&vt?ye:null,_t=Nn!=null?Nn:_r,ht=vt?Jt!=null?Jt:_t({rects:Bn,activeNodeRect:ls,activeIndex:Ur,overIndex:sn,index:Tr}):null,Ge=de(Ur)&&de(sn)?wt({id:ct,items:yr,activeIndex:Ur,overIndex:sn}):Tr,st=ii==null?void 0:ii.id,Ft=(0,X.useRef)({activeId:st,items:yr,newIndex:Ge,containerId:zr}),kn=yr!==Ft.current.items,On=Pe({active:ii,containerId:zr,isDragging:Ln,isSorting:ge,id:ct,index:Tr,items:yr,newIndex:Ft.current.newIndex,previousItems:Ft.current.items,previousContainerId:Ft.current.containerId,transition:rr,wasDragging:Ft.current.activeId!=null}),$n=dt({disabled:!On,index:Tr,node:zi,rect:Ei});return(0,X.useEffect)(()=>{ge&&Ft.current.newIndex!==Ge&&(Ft.current.newIndex=Ge),zr!==Ft.current.containerId&&(Ft.current.containerId=zr),yr!==Ft.current.items&&(Ft.current.items=yr)},[ge,Ge,zr,yr]),(0,X.useEffect)(()=>{if(st===Ft.current.activeId)return;if(st&&!Ft.current.activeId){Ft.current.activeId=st;return}const ti=setTimeout(()=>{Ft.current.activeId=st},50);return()=>clearTimeout(ti)},[st]),{active:ii,activeIndex:Ur,attributes:Hr,data:qr,rect:Ei,index:Tr,newIndex:Ge,items:yr,isOver:Ss,isSorting:ge,isDragging:Ln,listeners:Wr,node:zi,overIndex:sn,over:Ts,setNodeRef:Ce,setActivatorNodeRef:Q,setDroppableNodeRef:ei,setDraggableNodeRef:Xi,transform:$n!=null?$n:ht,transition:Mr()};function Mr(){if($n||kn&&Ft.current.newIndex===Tr)return vn;if(!(Ht&&!(0,te.vd)(ui)||!rr)&&(ge||On))return te.ux.Transition.toString(si(Rt({},rr),{property:Yn}))}}function gr(we,Pe){var Ve,Ne;return typeof we=="boolean"?{draggable:we,droppable:!1}:{draggable:(Ve=we==null?void 0:we.draggable)!=null?Ve:Pe.draggable,droppable:(Ne=we==null?void 0:we.droppable)!=null?Ne:Pe.droppable}}function ke(we){if(!we)return!1;const Pe=we.data.current;return!!(Pe&&"sortable"in Pe&&typeof Pe.sortable=="object"&&"containerId"in Pe.sortable&&"items"in Pe.sortable&&"index"in Pe.sortable)}const Kt=[ce.g4.Down,ce.g4.Right,ce.g4.Up,ce.g4.Left],Lt=(we,Pe)=>{let{context:{active:Ve,collisionRect:Ne,droppableRects:Oe,droppableContainers:wt,over:ct,scrollableAncestors:Nn}}=Pe;if(Kt.includes(we.code)){if(we.preventDefault(),!Ve||!Ne)return;const ur=[];wt.getEnabled().forEach(zr=>{if(!zr||zr!=null&&zr.disabled)return;const Ur=Oe.get(zr.id);if(Ur)switch(we.code){case ce.g4.Down:Ne.top<Ur.top&&ur.push(zr);break;case ce.g4.Up:Ne.top>Ur.top&&ur.push(zr);break;case ce.g4.Left:Ne.left>Ur.left&&ur.push(zr);break;case ce.g4.Right:Ne.left<Ur.left&&ur.push(zr);break}});const rr=(0,ce.ey)({active:Ve,collisionRect:Ne,droppableRects:Oe,droppableContainers:ur,pointerCoordinates:null});let yr=(0,ce._8)(rr,"id");if(yr===(ct==null?void 0:ct.id)&&rr.length>1&&(yr=rr[1].id),yr!=null){const zr=wt.get(Ve.id),Ur=wt.get(yr),Lr=Ur?Oe.get(Ur.id):null,Yr=Ur==null?void 0:Ur.node.current;if(Yr&&Lr&&zr&&Ur){const sn=(0,ce.hI)(Yr).some((Si,Ei)=>Nn[Ei]!==Si),Tn=Qe(zr,Ur),_r=Se(zr,Ur),ai=sn||!Tn?{x:0,y:0}:{x:_r?Ne.width-Lr.width:0,y:_r?Ne.height-Lr.height:0},Tr={x:Lr.left,y:Lr.top};return ai.x&&ai.y?Tr:(0,te.$X)(Tr,ai)}}}};function Qe(we,Pe){return!ke(we)||!ke(Pe)?!1:we.data.current.sortable.containerId===Pe.data.current.sortable.containerId}function Se(we,Pe){return!ke(we)||!ke(Pe)||!Qe(we,Pe)?!1:we.data.current.sortable.index<Pe.data.current.sortable.index}},24285:function(an,St,se){"use strict";se.d(St,{$X:function(){return zn},D9:function(){return tn},DC:function(){return pn},Ey:function(){return it},FJ:function(){return Ue},Gj:function(){return en},HB:function(){return ce},IH:function(){return tr},Jj:function(){return fn},LI:function(){return Wt},Ld:function(){return Ir},Nq:function(){return te},Re:function(){return Xn},UG:function(){return Ut},Yz:function(){return ut},qk:function(){return de},r3:function(){return ze},so:function(){return gr},ux:function(){return dt},vZ:function(){return ve},vd:function(){return Yn},wm:function(){return Rn},zX:function(){return Ae}});var X=se(67294);function ce(){for(var ke=arguments.length,Kt=new Array(ke),Lt=0;Lt<ke;Lt++)Kt[Lt]=arguments[Lt];return(0,X.useMemo)(()=>Qe=>{Kt.forEach(Se=>Se(Qe))},Kt)}const te=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";function Ue(ke){const Kt=Object.prototype.toString.call(ke);return Kt==="[object Window]"||Kt==="[object global]"}function Ut(ke){return"nodeType"in ke}function fn(ke){var Kt,Lt;return ke?Ue(ke)?ke:Ut(ke)&&(Kt=(Lt=ke.ownerDocument)==null?void 0:Lt.defaultView)!=null?Kt:window:window}function de(ke){const{Document:Kt}=fn(ke);return ke instanceof Kt}function Xn(ke){return Ue(ke)?!1:ke instanceof fn(ke).HTMLElement}function ve(ke){return ke instanceof fn(ke).SVGElement}function ze(ke){return ke?Ue(ke)?ke.document:Ut(ke)?de(ke)?ke:Xn(ke)||ve(ke)?ke.ownerDocument:document:document:document}const Wt=te?X.useLayoutEffect:X.useEffect;function Ae(ke){const Kt=(0,X.useRef)(ke);return Wt(()=>{Kt.current=ke}),(0,X.useCallback)(function(){for(var Lt=arguments.length,Qe=new Array(Lt),Se=0;Se<Lt;Se++)Qe[Se]=arguments[Se];return Kt.current==null?void 0:Kt.current(...Qe)},[])}function ut(){const ke=(0,X.useRef)(null),Kt=(0,X.useCallback)((Qe,Se)=>{ke.current=setInterval(Qe,Se)},[]),Lt=(0,X.useCallback)(()=>{ke.current!==null&&(clearInterval(ke.current),ke.current=null)},[]);return[Kt,Lt]}function it(ke,Kt){Kt===void 0&&(Kt=[ke]);const Lt=(0,X.useRef)(ke);return Wt(()=>{Lt.current!==ke&&(Lt.current=ke)},Kt),Lt}function en(ke,Kt){const Lt=(0,X.useRef)();return(0,X.useMemo)(()=>{const Qe=ke(Lt.current);return Lt.current=Qe,Qe},[...Kt])}function Rn(ke){const Kt=Ae(ke),Lt=(0,X.useRef)(null),Qe=(0,X.useCallback)(Se=>{Se!==Lt.current&&(Kt==null||Kt(Se,Lt.current)),Lt.current=Se},[]);return[Lt,Qe]}function tn(ke){const Kt=(0,X.useRef)();return(0,X.useEffect)(()=>{Kt.current=ke},[ke]),Kt.current}let ee={};function Ir(ke,Kt){return(0,X.useMemo)(()=>{if(Kt)return Kt;const Lt=ee[ke]==null?0:ee[ke]+1;return ee[ke]=Lt,ke+"-"+Lt},[ke,Kt])}function dr(ke){return function(Kt){for(var Lt=arguments.length,Qe=new Array(Lt>1?Lt-1:0),Se=1;Se<Lt;Se++)Qe[Se-1]=arguments[Se];return Qe.reduce((we,Pe)=>{const Ve=Object.entries(Pe);for(const[Ne,Oe]of Ve){const wt=we[Ne];wt!=null&&(we[Ne]=wt+ke*Oe)}return we},Rt({},Kt))}}const tr=dr(1),zn=dr(-1);function Zn(ke){return"clientX"in ke&&"clientY"in ke}function Yn(ke){if(!ke)return!1;const{KeyboardEvent:Kt}=fn(ke.target);return Kt&&ke instanceof Kt}function vn(ke){if(!ke)return!1;const{TouchEvent:Kt}=fn(ke.target);return Kt&&ke instanceof Kt}function pn(ke){if(vn(ke)){if(ke.touches&&ke.touches.length){const{clientX:Kt,clientY:Lt}=ke.touches[0];return{x:Kt,y:Lt}}else if(ke.changedTouches&&ke.changedTouches.length){const{clientX:Kt,clientY:Lt}=ke.changedTouches[0];return{x:Kt,y:Lt}}}return Zn(ke)?{x:ke.clientX,y:ke.clientY}:null}const dt=Object.freeze({Translate:{toString(ke){if(!ke)return;const{x:Kt,y:Lt}=ke;return"translate3d("+(Kt?Math.round(Kt):0)+"px, "+(Lt?Math.round(Lt):0)+"px, 0)"}},Scale:{toString(ke){if(!ke)return;const{scaleX:Kt,scaleY:Lt}=ke;return"scaleX("+Kt+") scaleY("+Lt+")"}},Transform:{toString(ke){if(ke)return[dt.Translate.toString(ke),dt.Scale.toString(ke)].join(" ")}},Transition:{toString(ke){let{property:Kt,duration:Lt,easing:Qe}=ke;return Kt+" "+Lt+"ms "+Qe}}}),hr="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function gr(ke){return ke.matches(hr)?ke:ke.querySelector(hr)}},89e3:function(an,St,se){"use strict";se.d(St,{M:function(){return Ue}});var X=se(87462),ce=se(99477),te=se(67294);const Ue=te.forwardRef(function(zn,tr){var Zn=zn,{children:fn,disable:de,disableX:Xn,disableY:ve,disableZ:ze,left:Wt,right:Ae,top:ut,bottom:it,front:en,back:Rn,onCentered:tn,precise:ee=!0,cacheKey:Ir=0}=Zn,dr=qa(Zn,["children","disable","disableX","disableY","disableZ","left","right","top","bottom","front","back","onCentered","precise","cacheKey"]);const Yn=te.useRef(null),vn=te.useRef(null),pn=te.useRef(null);return te.useLayoutEffect(()=>{vn.current.matrixWorld.identity();const dt=new ce.Box3().setFromObject(pn.current,ee),hr=new ce.Vector3,gr=new ce.Sphere,ke=dt.max.x-dt.min.x,Kt=dt.max.y-dt.min.y,Lt=dt.max.z-dt.min.z;dt.getCenter(hr),dt.getBoundingSphere(gr);const Qe=ut?Kt/2:it?-Kt/2:0,Se=Wt?-ke/2:Ae?ke/2:0,we=en?Lt/2:Rn?-Lt/2:0;vn.current.position.set(de||Xn?0:-hr.x+Se,de||ve?0:-hr.y+Qe,de||ze?0:-hr.z+we),typeof tn!="undefined"&&tn({parent:Yn.current.parent,container:Yn.current,width:ke,height:Kt,depth:Lt,boundingBox:dt,boundingSphere:gr,center:hr,verticalAlignment:Qe,horizontalAlignment:Se,depthAlignment:we})},[Ir,tn,ut,Wt,en,de,Xn,ve,ze,ee,Ae,it,Rn]),te.useImperativeHandle(tr,()=>Yn.current,[]),te.createElement("group",(0,X.Z)({ref:Yn},dr),te.createElement("group",{ref:vn},te.createElement("group",{ref:pn},fn)))})},69594:function(an,St,se){"use strict";se.d(St,{qA:function(){return O}});var X=se(87462),ce=se(67294),te=se(15714),Ue=se(99477);const Ut=m=>m&&m.isCubeTexture;class fn extends Ue.Mesh{constructor(v,C){var N,H;const Y=Ut(v),F=((H=Y?(N=v.image[0])==null?void 0:N.width:v.image.width)!=null?H:1024)/4,w=Math.floor(Math.log2(F)),L=Math.pow(2,w),G=3*Math.max(L,16*7),he=4*L,We=[Y?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/G}`,`#define CUBEUV_TEXEL_HEIGHT ${1/he}`,`#define CUBEUV_MAX_MIP ${w}.0`],at=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,tt=We.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(Ue.REVISION.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,$e={map:{value:v},height:{value:(C==null?void 0:C.height)||15},radius:{value:(C==null?void 0:C.radius)||100}},Ct=new Ue.IcosahedronGeometry(1,16),En=new Ue.ShaderMaterial({uniforms:$e,fragmentShader:tt,vertexShader:at,side:Ue.DoubleSide});super(Ct,En)}set radius(v){this.material.uniforms.radius.value=v}get radius(){return this.material.uniforms.radius.value}set height(v){this.material.uniforms.height.value=v}get height(){return this.material.uniforms.height.value}}class de extends Ue.DataTextureLoader{constructor(v){super(v),this.type=Ue.HalfFloatType}parse(v){const F=function(yt,rn){switch(yt){case 1:console.error("THREE.RGBELoader Read Error: "+(rn||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(rn||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(rn||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(rn||""))}return-1},he=`
`,We=function(yt,rn,hn){rn=rn||1024;let on=yt.pos,jt=-1,In=0,fr="",lr=String.fromCharCode.apply(null,new Uint16Array(yt.subarray(on,on+128)));for(;0>(jt=lr.indexOf(he))&&In<rn&&on<yt.byteLength;)fr+=lr,In+=lr.length,on+=128,lr+=String.fromCharCode.apply(null,new Uint16Array(yt.subarray(on,on+128)));return-1<jt?(hn!==!1&&(yt.pos+=In+jt+1),fr+lr.slice(0,jt)):!1},at=function(yt){const rn=/^#\?(\S+)/,hn=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,$t=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,on=/^\s*FORMAT=(\S+)\s*$/,jt=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,In={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let fr,lr;if(yt.pos>=yt.byteLength||!(fr=We(yt)))return F(1,"no header found");if(!(lr=fr.match(rn)))return F(3,"bad initial token");for(In.valid|=1,In.programtype=lr[1],In.string+=fr+`
`;fr=We(yt),fr!==!1;){if(In.string+=fr+`
`,fr.charAt(0)==="#"){In.comments+=fr+`
`;continue}if((lr=fr.match(hn))&&(In.gamma=parseFloat(lr[1])),(lr=fr.match($t))&&(In.exposure=parseFloat(lr[1])),(lr=fr.match(on))&&(In.valid|=2,In.format=lr[1]),(lr=fr.match(jt))&&(In.valid|=4,In.height=parseInt(lr[1],10),In.width=parseInt(lr[2],10)),In.valid&2&&In.valid&4)break}return In.valid&2?In.valid&4?In:F(3,"missing image size specifier"):F(3,"missing format specifier")},tt=function(yt,rn,hn){const $t=rn;if($t<8||$t>32767||yt[0]!==2||yt[1]!==2||yt[2]&128)return new Uint8Array(yt);if($t!==(yt[2]<<8|yt[3]))return F(3,"wrong scanline width");const on=new Uint8Array(4*rn*hn);if(!on.length)return F(4,"unable to allocate buffer space");let jt=0,In=0;const fr=4*$t,lr=new Uint8Array(4),Nr=new Uint8Array(fr);let Jr=hn;for(;Jr>0&&In<yt.byteLength;){if(In+4>yt.byteLength)return F(1);if(lr[0]=yt[In++],lr[1]=yt[In++],lr[2]=yt[In++],lr[3]=yt[In++],lr[0]!=2||lr[1]!=2||(lr[2]<<8|lr[3])!=$t)return F(3,"bad rgbe scanline format");let ci=0,yi;for(;ci<fr&&In<yt.byteLength;){yi=yt[In++];const Kr=yi>128;if(Kr&&(yi-=128),yi===0||ci+yi>fr)return F(3,"bad scanline data");if(Kr){const Mi=yt[In++];for(let cs=0;cs<yi;cs++)Nr[ci++]=Mi}else Nr.set(yt.subarray(In,In+yi),ci),ci+=yi,In+=yi}const Di=$t;for(let Kr=0;Kr<Di;Kr++){let Mi=0;on[jt]=Nr[Kr+Mi],Mi+=$t,on[jt+1]=Nr[Kr+Mi],Mi+=$t,on[jt+2]=Nr[Kr+Mi],Mi+=$t,on[jt+3]=Nr[Kr+Mi],jt+=4}Jr--}return on},$e=function(yt,rn,hn,$t){const on=yt[rn+3],jt=Math.pow(2,on-128)/255;hn[$t+0]=yt[rn+0]*jt,hn[$t+1]=yt[rn+1]*jt,hn[$t+2]=yt[rn+2]*jt,hn[$t+3]=1},Ct=function(yt,rn,hn,$t){const on=yt[rn+3],jt=Math.pow(2,on-128)/255;hn[$t+0]=Ue.DataUtils.toHalfFloat(Math.min(yt[rn+0]*jt,65504)),hn[$t+1]=Ue.DataUtils.toHalfFloat(Math.min(yt[rn+1]*jt,65504)),hn[$t+2]=Ue.DataUtils.toHalfFloat(Math.min(yt[rn+2]*jt,65504)),hn[$t+3]=Ue.DataUtils.toHalfFloat(1)},En=new Uint8Array(v);En.pos=0;const Ot=at(En);if(Ot!==-1){const yt=Ot.width,rn=Ot.height,hn=tt(En.subarray(En.pos),yt,rn);if(hn!==-1){let $t,on,jt;switch(this.type){case Ue.FloatType:jt=hn.length/4;const In=new Float32Array(jt*4);for(let lr=0;lr<jt;lr++)$e(hn,lr*4,In,lr*4);$t=In,on=Ue.FloatType;break;case Ue.HalfFloatType:jt=hn.length/4;const fr=new Uint16Array(jt*4);for(let lr=0;lr<jt;lr++)Ct(hn,lr*4,fr,lr*4);$t=fr,on=Ue.HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:yt,height:rn,data:$t,header:Ot.string,gamma:Ot.gamma,exposure:Ot.exposure,type:on}}}return null}setDataType(v){return this.type=v,this}load(v,C,N,H){function Y(R,F){switch(R.type){case Ue.FloatType:case Ue.HalfFloatType:"colorSpace"in R?R.colorSpace="srgb-linear":R.encoding=3e3,R.minFilter=Ue.LinearFilter,R.magFilter=Ue.LinearFilter,R.generateMipmaps=!1,R.flipY=!0;break}C&&C(R,F)}return super.load(v,Y,N,H)}}var Xn={},ve=function(m,v,C,N,H){var Y=new Worker(Xn[v]||(Xn[v]=URL.createObjectURL(new Blob([m],{type:"text/javascript"}))));return Y.onerror=function(R){return H(R.error,null)},Y.onmessage=function(R){return H(null,R.data)},Y.postMessage(C,N),Y},ze=Uint8Array,Wt=Uint16Array,Ae=Uint32Array,ut=new ze([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),it=new ze([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),en=new ze([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Rn=function(m,v){for(var C=new Wt(31),N=0;N<31;++N)C[N]=v+=1<<m[N-1];for(var H=new Ae(C[30]),N=1;N<30;++N)for(var Y=C[N];Y<C[N+1];++Y)H[Y]=Y-C[N]<<5|N;return[C,H]},tn=Rn(ut,2),ee=tn[0],Ir=tn[1];ee[28]=258,Ir[258]=28;for(var dr=Rn(it,0),tr=dr[0],zn=dr[1],Zn=new Wt(32768),Yn=0;Yn<32768;++Yn){var vn=(Yn&43690)>>>1|(Yn&21845)<<1;vn=(vn&52428)>>>2|(vn&13107)<<2,vn=(vn&61680)>>>4|(vn&3855)<<4,Zn[Yn]=((vn&65280)>>>8|(vn&255)<<8)>>>1}for(var pn=function(m,v,C){for(var N=m.length,H=0,Y=new Wt(v);H<N;++H)++Y[m[H]-1];var R=new Wt(v);for(H=0;H<v;++H)R[H]=R[H-1]+Y[H-1]<<1;var F;if(C){F=new Wt(1<<v);var w=15-v;for(H=0;H<N;++H)if(m[H])for(var L=H<<4|m[H],G=v-m[H],he=R[m[H]-1]++<<G,We=he|(1<<G)-1;he<=We;++he)F[Zn[he]>>>w]=L}else for(F=new Wt(N),H=0;H<N;++H)m[H]&&(F[H]=Zn[R[m[H]-1]++]>>>15-m[H]);return F},dt=new ze(288),Yn=0;Yn<144;++Yn)dt[Yn]=8;for(var Yn=144;Yn<256;++Yn)dt[Yn]=9;for(var Yn=256;Yn<280;++Yn)dt[Yn]=7;for(var Yn=280;Yn<288;++Yn)dt[Yn]=8;for(var hr=new ze(32),Yn=0;Yn<32;++Yn)hr[Yn]=5;var gr=null,ke=pn(dt,9,1),Kt=null,Lt=pn(hr,5,1),Qe=function(m){for(var v=m[0],C=1;C<m.length;++C)m[C]>v&&(v=m[C]);return v},Se=function(m,v,C){var N=v/8|0;return(m[N]|m[N+1]<<8)>>(v&7)&C},we=function(m,v){var C=v/8|0;return(m[C]|m[C+1]<<8|m[C+2]<<16)>>(v&7)},Pe=function(m){return(m/8|0)+(m&7&&1)},Ve=function(m,v,C){(v==null||v<0)&&(v=0),(C==null||C>m.length)&&(C=m.length);var N=new(m instanceof Wt?Wt:m instanceof Ae?Ae:ze)(C-v);return N.set(m.subarray(v,C)),N},Ne=function(m,v,C){var N=m.length;if(!N||C&&!C.l&&N<5)return v||new ze(0);var H=!v||C,Y=!C||C.i;C||(C={}),v||(v=new ze(N*3));var R=function(ns){var Bo=v.length;if(ns>Bo){var Ao=new ze(Math.max(Bo*2,ns));Ao.set(v),v=Ao}},F=C.f||0,w=C.p||0,L=C.b||0,G=C.l,he=C.d,We=C.m,at=C.n,tt=N*8;do{if(!G){C.f=F=Se(m,w,1);var $e=Se(m,w+1,3);if(w+=3,$e)if($e==1)G=ke,he=Lt,We=9,at=5;else if($e==2){var yt=Se(m,w,31)+257,rn=Se(m,w+10,15)+4,hn=yt+Se(m,w+5,31)+1;w+=14;for(var $t=new ze(hn),on=new ze(19),jt=0;jt<rn;++jt)on[en[jt]]=Se(m,w+jt*3,7);w+=rn*3;for(var In=Qe(on),fr=(1<<In)-1,lr=pn(on,In,1),jt=0;jt<hn;){var Nr=lr[Se(m,w,fr)];w+=Nr&15;var Ct=Nr>>>4;if(Ct<16)$t[jt++]=Ct;else{var Jr=0,ci=0;for(Ct==16?(ci=3+Se(m,w,3),w+=2,Jr=$t[jt-1]):Ct==17?(ci=3+Se(m,w,7),w+=3):Ct==18&&(ci=11+Se(m,w,127),w+=7);ci--;)$t[jt++]=Jr}}var yi=$t.subarray(0,yt),Di=$t.subarray(yt);We=Qe(yi),at=Qe(Di),G=pn(yi,We,1),he=pn(Di,at,1)}else throw"invalid block type";else{var Ct=Pe(w)+4,En=m[Ct-4]|m[Ct-3]<<8,Ot=Ct+En;if(Ot>N){if(Y)throw"unexpected EOF";break}H&&R(L+En),v.set(m.subarray(Ct,Ot),L),C.b=L+=En,C.p=w=Ot*8;continue}if(w>tt){if(Y)throw"unexpected EOF";break}}H&&R(L+131072);for(var Kr=(1<<We)-1,Mi=(1<<at)-1,cs=w;;cs=w){var Jr=G[we(m,w)&Kr],bs=Jr>>>4;if(w+=Jr&15,w>tt){if(Y)throw"unexpected EOF";break}if(!Jr)throw"invalid length/literal";if(bs<256)v[L++]=bs;else if(bs==256){cs=w,G=null;break}else{var ps=bs-254;if(bs>264){var jt=bs-257,ms=ut[jt];ps=Se(m,w,(1<<ms)-1)+ee[jt],w+=ms}var $s=he[we(m,w)&Mi],Ws=$s>>>4;if(!$s)throw"invalid distance";w+=$s&15;var Di=tr[Ws];if(Ws>3){var ms=it[Ws];Di+=we(m,w)&(1<<ms)-1,w+=ms}if(w>tt){if(Y)throw"unexpected EOF";break}H&&R(L+131072);for(var $i=L+ps;L<$i;L+=4)v[L]=v[L-Di],v[L+1]=v[L+1-Di],v[L+2]=v[L+2-Di],v[L+3]=v[L+3-Di];L=$i}}C.l=G,C.p=cs,C.b=L,G&&(F=1,C.m=We,C.d=he,C.n=at)}while(!F);return L==v.length?v:Ve(v,0,L)},Oe=function(m,v,C){C<<=v&7;var N=v/8|0;m[N]|=C,m[N+1]|=C>>>8},wt=function(m,v,C){C<<=v&7;var N=v/8|0;m[N]|=C,m[N+1]|=C>>>8,m[N+2]|=C>>>16},ct=function(m,v){for(var C=[],N=0;N<m.length;++N)m[N]&&C.push({s:N,f:m[N]});var H=C.length,Y=C.slice();if(!H)return[Lr,0];if(H==1){var R=new ze(C[0].s+1);return R[C[0].s]=1,[R,1]}C.sort(function(hn,$t){return hn.f-$t.f}),C.push({s:-1,f:25001});var F=C[0],w=C[1],L=0,G=1,he=2;for(C[0]={s:-1,f:F.f+w.f,l:F,r:w};G!=H-1;)F=C[C[L].f<C[he].f?L++:he++],w=C[L!=G&&C[L].f<C[he].f?L++:he++],C[G++]={s:-1,f:F.f+w.f,l:F,r:w};for(var We=Y[0].s,N=1;N<H;++N)Y[N].s>We&&(We=Y[N].s);var at=new Wt(We+1),tt=Nn(C[G-1],at,0);if(tt>v){var N=0,$e=0,Ct=tt-v,En=1<<Ct;for(Y.sort(function($t,on){return at[on.s]-at[$t.s]||$t.f-on.f});N<H;++N){var Ot=Y[N].s;if(at[Ot]>v)$e+=En-(1<<tt-at[Ot]),at[Ot]=v;else break}for($e>>>=Ct;$e>0;){var yt=Y[N].s;at[yt]<v?$e-=1<<v-at[yt]++-1:++N}for(;N>=0&&$e;--N){var rn=Y[N].s;at[rn]==v&&(--at[rn],++$e)}tt=v}return[new ze(at),tt]},Nn=function(m,v,C){return m.s==-1?Math.max(Nn(m.l,v,C+1),Nn(m.r,v,C+1)):v[m.s]=C},ur=function(m){for(var v=m.length;v&&!m[--v];);for(var C=new Wt(++v),N=0,H=m[0],Y=1,R=function(w){C[N++]=w},F=1;F<=v;++F)if(m[F]==H&&F!=v)++Y;else{if(!H&&Y>2){for(;Y>138;Y-=138)R(32754);Y>2&&(R(Y>10?Y-11<<5|28690:Y-3<<5|12305),Y=0)}else if(Y>3){for(R(H),--Y;Y>6;Y-=6)R(8304);Y>2&&(R(Y-3<<5|8208),Y=0)}for(;Y--;)R(H);Y=1,H=m[F]}return[C.subarray(0,N),v]},rr=function(m,v){for(var C=0,N=0;N<v.length;++N)C+=m[N]*v[N];return C},yr=function(m,v,C){var N=C.length,H=Pe(v+2);m[H]=N&255,m[H+1]=N>>>8,m[H+2]=m[H]^255,m[H+3]=m[H+1]^255;for(var Y=0;Y<N;++Y)m[H+Y+4]=C[Y];return(H+4+N)*8},zr=function(m,v,C,N,H,Y,R,F,w,L,G){Oe(v,G++,C),++H[256];for(var he=ct(H,15),We=he[0],at=he[1],tt=ct(Y,15),$e=tt[0],Ct=tt[1],En=ur(We),Ot=En[0],yt=En[1],rn=ur($e),hn=rn[0],$t=rn[1],on=new Wt(19),jt=0;jt<Ot.length;++jt)on[Ot[jt]&31]++;for(var jt=0;jt<hn.length;++jt)on[hn[jt]&31]++;for(var In=ct(on,7),fr=In[0],lr=In[1],Nr=19;Nr>4&&!fr[en[Nr-1]];--Nr);var Jr=L+5<<3,ci=rr(H,dt)+rr(Y,hr)+R,yi=rr(H,We)+rr(Y,$e)+R+14+3*Nr+rr(on,fr)+(2*on[16]+3*on[17]+7*on[18]);if(Jr<=ci&&Jr<=yi)return yr(v,G,m.subarray(w,w+L));var Di,Kr,Mi,cs;if(Oe(v,G,1+(yi<ci)),G+=2,yi<ci){Di=pn(We,at,0),Kr=We,Mi=pn($e,Ct,0),cs=$e;var bs=pn(fr,lr,0);Oe(v,G,yt-257),Oe(v,G+5,$t-1),Oe(v,G+10,Nr-4),G+=14;for(var jt=0;jt<Nr;++jt)Oe(v,G+3*jt,fr[en[jt]]);G+=3*Nr;for(var ps=[Ot,hn],ms=0;ms<2;++ms)for(var $s=ps[ms],jt=0;jt<$s.length;++jt){var Ws=$s[jt]&31;Oe(v,G,bs[Ws]),G+=fr[Ws],Ws>15&&(Oe(v,G,$s[jt]>>>5&127),G+=$s[jt]>>>12)}}else Di=gr,Kr=dt,Mi=Kt,cs=hr;for(var jt=0;jt<F;++jt)if(N[jt]>255){var Ws=N[jt]>>>18&31;wt(v,G,Di[Ws+257]),G+=Kr[Ws+257],Ws>7&&(Oe(v,G,N[jt]>>>23&31),G+=ut[Ws]);var $i=N[jt]&31;wt(v,G,Mi[$i]),G+=cs[$i],$i>3&&(wt(v,G,N[jt]>>>5&8191),G+=it[$i])}else wt(v,G,Di[N[jt]]),G+=Kr[N[jt]];return wt(v,G,Di[256]),G+Kr[256]},Ur=new Ae([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Lr=new ze(0),Yr=function(m,v,C,N,H,Y){var R=m.length,F=new ze(N+R+5*(1+Math.ceil(R/7e3))+H),w=F.subarray(N,F.length-H),L=0;if(!v||R<8)for(var G=0;G<=R;G+=65535){var he=G+65535;he<R?L=yr(w,L,m.subarray(G,he)):(w[G]=Y,L=yr(w,L,m.subarray(G,R)))}else{for(var We=Ur[v-1],at=We>>>13,tt=We&8191,$e=(1<<C)-1,Ct=new Wt(32768),En=new Wt($e+1),Ot=Math.ceil(C/3),yt=2*Ot,rn=function(us){return(m[us]^m[us+1]<<Ot^m[us+2]<<yt)&$e},hn=new Ae(25e3),$t=new Wt(288),on=new Wt(32),jt=0,In=0,G=0,fr=0,lr=0,Nr=0;G<R;++G){var Jr=rn(G),ci=G&32767,yi=En[Jr];if(Ct[ci]=yi,En[Jr]=ci,lr<=G){var Di=R-G;if((jt>7e3||fr>24576)&&Di>423){L=zr(m,w,0,hn,$t,on,In,fr,Nr,G-Nr,L),fr=jt=In=0,Nr=G;for(var Kr=0;Kr<286;++Kr)$t[Kr]=0;for(var Kr=0;Kr<30;++Kr)on[Kr]=0}var Mi=2,cs=0,bs=tt,ps=ci-yi&32767;if(Di>2&&Jr==rn(G-ps))for(var ms=Math.min(at,Di)-1,$s=Math.min(32767,G),Ws=Math.min(258,Di);ps<=$s&&--bs&&ci!=yi;){if(m[G+Mi]==m[G+Mi-ps]){for(var $i=0;$i<Ws&&m[G+$i]==m[G+$i-ps];++$i);if($i>Mi){if(Mi=$i,cs=ps,$i>ms)break;for(var ns=Math.min(ps,$i-2),Bo=0,Kr=0;Kr<ns;++Kr){var Ao=G-ps+Kr+32768&32767,Co=Ct[Ao],Jo=Ao-Co+32768&32767;Jo>Bo&&(Bo=Jo,yi=Ao)}}}ci=yi,yi=Ct[ci],ps+=ci-yi+32768&32767}if(cs){hn[fr++]=268435456|Ir[Mi]<<18|zn[cs];var Qs=Ir[Mi]&31,co=zn[cs]&31;In+=ut[Qs]+it[co],++$t[257+Qs],++on[co],lr=G+Mi,++jt}else hn[fr++]=m[G],++$t[m[G]]}}L=zr(m,w,Y,hn,$t,on,In,fr,Nr,G-Nr,L),!Y&&L&7&&(L=yr(w,L+1,Lr))}return Ve(F,0,N+Pe(L)+H)},Bn=null,sn=function(){var m=-1;return{p:function(v){for(var C=m,N=0;N<v.length;++N)C=Bn[C&255^v[N]]^C>>>8;m=C},d:function(){return~m}}},Tn=function(){var m=1,v=0;return{p:function(C){for(var N=m,H=v,Y=C.length,R=0;R!=Y;){for(var F=Math.min(R+2655,Y);R<F;++R)H+=N+=C[R];N=(N&65535)+15*(N>>16),H=(H&65535)+15*(H>>16)}m=N,v=H},d:function(){return m%=65521,v%=65521,(m&255)<<24|m>>>8<<16|(v&255)<<8|v>>>8}}},_r=function(m,v,C,N,H){return Yr(m,v.level==null?6:v.level,v.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(m.length)))*1.5):12+v.mem,C,N,!H)},ai=function(m,v){var C={};for(var N in m)C[N]=m[N];for(var N in v)C[N]=v[N];return C},Tr=function(m,v,C){for(var N=m(),H=m.toString(),Y=H.slice(H.indexOf("[")+1,H.lastIndexOf("]")).replace(/ /g,"").split(","),R=0;R<N.length;++R){var F=N[R],w=Y[R];if(typeof F=="function"){v+=";"+w+"=";var L=F.toString();if(F.prototype)if(L.indexOf("[native code]")!=-1){var G=L.indexOf(" ",8)+1;v+=L.slice(G,L.indexOf("(",G))}else{v+=L;for(var he in F.prototype)v+=";"+w+".prototype."+he+"="+F.prototype[he].toString()}else v+=L}else C[w]=F}return[v,C]},qr=null,Si=function(m){var v=[];for(var C in m)(m[C]instanceof ze||m[C]instanceof Wt||m[C]instanceof Ae)&&v.push((m[C]=new m[C].constructor(m[C])).buffer);return v},Ei=function(m,v,C,N){var H;if(!qr[C]){for(var Y="",R={},F=m.length-1,w=0;w<F;++w)H=Tr(m[w],Y,R),Y=H[0],R=H[1];qr[C]=Tr(m[F],Y,R)}var L=ai({},qr[C][1]);return ve(qr[C][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+v.toString()+"}",C,L,Si(L),N)},zi=function(){return[ze,Wt,Ae,ut,it,en,ee,tr,ke,Lt,Zn,pn,Qe,Se,we,Pe,Ve,Ne,At,Hr,Xi]},Ss=function(){return[ze,Wt,Ae,ut,it,en,Ir,zn,gr,dt,Kt,hr,Zn,Ur,Lr,pn,Oe,wt,ct,Nn,ur,rr,yr,zr,Pe,Ve,Yr,_r,$n,Hr]},ei=function(){return[vt,_t,ge,sn,Bn]},ii=function(){return[Ht,Jt]},ui=function(){return[ht,ge,Tn]},ls=function(){return[Ge]},Hr=function(m){return postMessage(m,[m.buffer])},Xi=function(m){return m&&m.size&&new ze(m.size)},Wr=function(m,v,C,N,H,Y){var R=Ei(C,N,H,function(F,w){R.terminate(),Y(F,w)});return R.postMessage([m,v],v.consume?[m.buffer]:[]),function(){R.terminate()}},Ln=function(m){return m.ondata=function(v,C){return postMessage([v,C],[v.buffer])},function(v){return m.push(v.data[0],v.data[1])}},Ts=function(m,v,C,N,H){var Y,R=Ei(m,N,H,function(F,w){F?(R.terminate(),v.ondata.call(v,F)):(w[1]&&R.terminate(),v.ondata.call(v,F,w[0],w[1]))});R.postMessage(C),v.push=function(F,w){if(Y)throw"stream finished";if(!v.ondata)throw"no stream handler";R.postMessage([F,Y=w],[F.buffer])},v.terminate=function(){R.terminate()}},Q=function(m,v){return m[v]|m[v+1]<<8},ye=function(m,v){return(m[v]|m[v+1]<<8|m[v+2]<<16|m[v+3]<<24)>>>0},Ce=function(m,v){return ye(m,v)+ye(m,v+4)*4294967296},ge=function(m,v,C){for(;C;++v)m[v]=C,C>>>=8},vt=function(m,v){var C=v.filename;if(m[0]=31,m[1]=139,m[2]=8,m[8]=v.level<2?4:v.level==9?2:0,m[9]=3,v.mtime!=0&&ge(m,4,Math.floor(new Date(v.mtime||Date.now())/1e3)),C){m[3]=8;for(var N=0;N<=C.length;++N)m[N+10]=C.charCodeAt(N)}},Ht=function(m){if(m[0]!=31||m[1]!=139||m[2]!=8)throw"invalid gzip data";var v=m[3],C=10;v&4&&(C+=m[10]|(m[11]<<8)+2);for(var N=(v>>3&1)+(v>>4&1);N>0;N-=!m[C++]);return C+(v&2)},Jt=function(m){var v=m.length;return(m[v-4]|m[v-3]<<8|m[v-2]<<16|m[v-1]<<24)>>>0},_t=function(m){return 10+(m.filename&&m.filename.length+1||0)},ht=function(m,v){var C=v.level,N=C==0?0:C<6?1:C==9?3:2;m[0]=120,m[1]=N<<6|(N?32-2*N:1)},Ge=function(m){if((m[0]&15)!=8||m[0]>>>4>7||(m[0]<<8|m[1])%31)throw"invalid zlib data";if(m[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function st(m,v){return!v&&typeof m=="function"&&(v=m,m={}),this.ondata=v,m}var Ft=null,kn=null;function On(m,v,C){if(C||(C=v,v={}),typeof C!="function")throw"no callback";return Wr(m,v,[Ss],function(N){return Hr($n(N.data[0],N.data[1]))},0,C)}function $n(m,v){return _r(m,v||{},0,0)}var Mr=null,ti=null;function xe(m,v,C){if(C||(C=v,v={}),typeof C!="function")throw"no callback";return Wr(m,v,[zi],function(N){return Hr(At(N.data[0],Xi(N.data[1])))},1,C)}function At(m,v){return Ne(m,v)}var Pn=null,vr=null;function ni(m,v,C){if(C||(C=v,v={}),typeof C!="function")throw"no callback";return Wr(m,v,[Ss,ei,function(){return[Zi]}],function(N){return Hr(Zi(N.data[0],N.data[1]))},2,C)}function Zi(m,v){v||(v={});var C=sn(),N=m.length;C.p(m);var H=_r(m,v,_t(v),8),Y=H.length;return vt(H,v),ge(H,Y-8,C.d()),ge(H,Y-4,N),H}var Ns=null,va=null;function js(m,v,C){if(C||(C=v,v={}),typeof C!="function")throw"no callback";return Wr(m,v,[zi,ii,function(){return[os]}],function(N){return Hr(os(N.data[0]))},3,C)}function os(m,v){return Ne(m.subarray(Ht(m),-8),v||new ze(Jt(m)))}var Ji=null,It=null;function k(m,v,C){if(C||(C=v,v={}),typeof C!="function")throw"no callback";return Wr(m,v,[Ss,ui,function(){return[Z]}],function(N){return Hr(Z(N.data[0],N.data[1]))},4,C)}function Z(m,v){v||(v={});var C=Tn();C.p(m);var N=_r(m,v,2,4);return ht(N,v),ge(N,N.length-4,C.d()),N}var le=null,Ye=null;function He(m,v,C){if(C||(C=v,v={}),typeof C!="function")throw"no callback";return Wr(m,v,[zi,ls,function(){return[ft]}],function(N){return Hr(ft(N.data[0],Xi(N.data[1])))},5,C)}function ft(m,v){return Ne((Ge(m),m.subarray(2,-4)),v)}var Dn=null,xn=null;function et(m,v,C){if(C||(C=v,v={}),typeof C!="function")throw"no callback";return m[0]==31&&m[1]==139&&m[2]==8?js(m,v,C):(m[0]&15)!=8||m[0]>>4>7||(m[0]<<8|m[1])%31?xe(m,v,C):He(m,v,C)}function nn(m,v){return m[0]==31&&m[1]==139&&m[2]==8?os(m,v):(m[0]&15)!=8||m[0]>>4>7||(m[0]<<8|m[1])%31?At(m,v):ft(m,v)}var _e=function(m,v,C,N){for(var H in m){var Y=m[H],R=v+H;Y instanceof ze?C[R]=[Y,N]:Array.isArray(Y)?C[R]=[Y[0],ai(N,Y[1])]:_e(Y,R+"/",C,N)}},De=typeof TextEncoder!="undefined"&&new TextEncoder,ot=typeof TextDecoder!="undefined"&&new TextDecoder,gt=0;try{ot.decode(Lr,{stream:!0}),gt=1}catch(m){}var Pt=function(m){for(var v="",C=0;;){var N=m[C++],H=(N>127)+(N>223)+(N>239);if(C+H>m.length)return[v,Ve(m,C-1)];H?H==3?(N=((N&15)<<18|(m[C++]&63)<<12|(m[C++]&63)<<6|m[C++]&63)-65536,v+=String.fromCharCode(55296|N>>10,56320|N&1023)):H&1?v+=String.fromCharCode((N&31)<<6|m[C++]&63):v+=String.fromCharCode((N&15)<<12|(m[C++]&63)<<6|m[C++]&63):v+=String.fromCharCode(N)}},Gn=null,dn=null;function Ke(m,v){if(v){for(var C=new ze(m.length),N=0;N<m.length;++N)C[N]=m.charCodeAt(N);return C}if(De)return De.encode(m);for(var H=m.length,Y=new ze(m.length+(m.length>>1)),R=0,F=function(G){Y[R++]=G},N=0;N<H;++N){if(R+5>Y.length){var w=new ze(R+8+(H-N<<1));w.set(Y),Y=w}var L=m.charCodeAt(N);L<128||v?F(L):L<2048?(F(192|L>>6),F(128|L&63)):L>55295&&L<57344?(L=65536+(L&1047552)|m.charCodeAt(++N)&1023,F(240|L>>18),F(128|L>>12&63),F(128|L>>6&63),F(128|L&63)):(F(224|L>>12),F(128|L>>6&63),F(128|L&63))}return Ve(Y,0,R)}function Xe(m,v){if(v){for(var C="",N=0;N<m.length;N+=16384)C+=String.fromCharCode.apply(null,m.subarray(N,N+16384));return C}else{if(ot)return ot.decode(m);var H=Pt(m),Y=H[0],R=H[1];if(R.length)throw"invalid utf-8 data";return Y}}var Zt=function(m){return m==1?3:m<6?2:m==9?1:0},Un=function(m,v){return v+30+Q(m,v+26)+Q(m,v+28)},ir=function(m,v,C){var N=Q(m,v+28),H=Xe(m.subarray(v+46,v+46+N),!(Q(m,v+8)&2048)),Y=v+46+N,R=ye(m,v+20),F=C&&R==4294967295?Kn(m,Y):[R,ye(m,v+24),ye(m,v+42)],w=F[0],L=F[1],G=F[2];return[Q(m,v+10),w,L,H,Y+Q(m,v+30)+Q(m,v+32),G]},Kn=function(m,v){for(;Q(m,v)!=1;v+=4+Q(m,v+2));return[Ce(m,v+12),Ce(m,v+4),Ce(m,v+20)]},Gr=function(m){var v=0;if(m)for(var C in m){var N=m[C].length;if(N>65535)throw"extra field too long";v+=N+4}return v},Ar=function(m,v,C,N,H,Y,R,F){var w=N.length,L=C.extra,G=F&&F.length,he=Gr(L);ge(m,v,R!=null?33639248:67324752),v+=4,R!=null&&(m[v++]=20,m[v++]=C.os),m[v]=20,v+=2,m[v++]=C.flag<<1|(Y==null&&8),m[v++]=H&&8,m[v++]=C.compression&255,m[v++]=C.compression>>8;var We=new Date(C.mtime==null?Date.now():C.mtime),at=We.getFullYear()-1980;if(at<0||at>119)throw"date not in range 1980-2099";if(ge(m,v,at<<25|We.getMonth()+1<<21|We.getDate()<<16|We.getHours()<<11|We.getMinutes()<<5|We.getSeconds()>>>1),v+=4,Y!=null&&(ge(m,v,C.crc),ge(m,v+4,Y),ge(m,v+8,C.size)),ge(m,v+12,w),ge(m,v+14,he),v+=16,R!=null&&(ge(m,v,G),ge(m,v+6,C.attrs),ge(m,v+10,R),v+=14),m.set(N,v),v+=w,he)for(var tt in L){var $e=L[tt],Ct=$e.length;ge(m,v,+tt),ge(m,v+2,Ct),m.set($e,v+4),v+=4+Ct}return G&&(m.set(F,v),v+=G),v},vi=function(m,v,C,N,H){ge(m,v,101010256),ge(m,v+8,C),ge(m,v+10,C),ge(m,v+12,N),ge(m,v+16,H)},li=null,sr=null,Bi=null,ys=null;function Ms(m,v,C){if(C||(C=v,v={}),typeof C!="function")throw"no callback";var N={};_e(m,"",N,v);var H=Object.keys(N),Y=H.length,R=0,F=0,w=Y,L=new Array(Y),G=[],he=function(){for(var $e=0;$e<G.length;++$e)G[$e]()},We=function(){var $e=new ze(F+22),Ct=R,En=F-R;F=0;for(var Ot=0;Ot<w;++Ot){var yt=L[Ot];try{var rn=yt.c.length;Ar($e,F,yt,yt.f,yt.u,rn);var hn=30+yt.f.length+Gr(yt.extra),$t=F+hn;$e.set(yt.c,$t),Ar($e,R,yt,yt.f,yt.u,rn,F,yt.m),R+=16+hn+(yt.m?yt.m.length:0),F=$t+rn}catch(on){return C(on,null)}}vi($e,R,L.length,En,Ct),C(null,$e)};Y||We();for(var at=function($e){var Ct=H[$e],En=N[Ct],Ot=En[0],yt=En[1],rn=sn(),hn=Ot.length;rn.p(Ot);var $t=Ke(Ct),on=$t.length,jt=yt.comment,In=jt&&Ke(jt),fr=In&&In.length,lr=Gr(yt.extra),Nr=yt.level==0?0:8,Jr=function(ci,yi){if(ci)he(),C(ci,null);else{var Di=yi.length;L[$e]=ai(yt,{size:hn,crc:rn.d(),c:yi,f:$t,m:In,u:on!=Ct.length||In&&jt.length!=fr,compression:Nr}),R+=30+on+lr+Di,F+=76+2*(on+lr)+(fr||0)+Di,--Y||We()}};if(on>65535&&Jr("filename too long",null),!Nr)Jr(null,Ot);else if(hn<16e4)try{Jr(null,$n(Ot,yt))}catch(ci){Jr(ci,null)}else G.push(On(Ot,yt,Jr))},tt=0;tt<w;++tt)at(tt);return he}function Ja(m,v){v||(v={});var C={},N=[];_e(m,"",C,v);var H=0,Y=0;for(var R in C){var F=C[R],w=F[0],L=F[1],G=L.level==0?0:8,he=Ke(R),We=he.length,at=L.comment,tt=at&&Ke(at),$e=tt&&tt.length,Ct=Gr(L.extra);if(We>65535)throw"filename too long";var En=G?$n(w,L):w,Ot=En.length,yt=sn();yt.p(w),N.push(ai(L,{size:w.length,crc:yt.d(),c:En,f:he,m:tt,u:We!=R.length||tt&&at.length!=$e,o:H,compression:G})),H+=30+We+Ct+Ot,Y+=76+2*(We+Ct)+($e||0)+Ot}for(var rn=new ze(Y+22),hn=H,$t=Y-H,on=0;on<N.length;++on){var he=N[on];Ar(rn,he.o,he,he.f,he.u,he.c.length);var jt=30+he.f.length+Gr(he.extra);rn.set(he.c,he.o+jt),Ar(rn,H,he,he.f,he.u,he.c.length,he.o,he.m),H+=16+jt+(he.m?he.m.length:0)}return vi(rn,H,N.length,$t,hn),rn}var ya=null,Ko=null,Xs=null,Ca=null;function _a(m,v){if(typeof v!="function")throw"no callback";for(var C=[],N=function(){for(var We=0;We<C.length;++We)C[We]()},H={},Y=m.length-22;ye(m,Y)!=101010256;--Y)if(!Y||m.length-Y>65558){v("invalid zip file",null);return}var R=Q(m,Y+8);R||v(null,{});var F=R,w=ye(m,Y+16),L=w==4294967295;if(L){if(Y=ye(m,Y-12),ye(m,Y)!=101075792){v("invalid zip file",null);return}F=R=ye(m,Y+32),w=ye(m,Y+48)}for(var G=function(We){var at=ir(m,w,L),tt=at[0],$e=at[1],Ct=at[2],En=at[3],Ot=at[4],yt=at[5],rn=Un(m,yt);w=Ot;var hn=function(on,jt){on?(N(),v(on,null)):(H[En]=jt,--R||v(null,H))};if(!tt)hn(null,Ve(m,rn,rn+$e));else if(tt==8){var $t=m.subarray(rn,rn+$e);if($e<32e4)try{hn(null,At($t,new ze(Ct)))}catch(on){hn(on,null)}else C.push(xe($t,{size:Ct},hn))}else hn("unknown compression type "+tt,null)},he=0;he<F;++he)G(he);return N}function ks(m){for(var v={},C=m.length-22;ye(m,C)!=101010256;--C)if(!C||m.length-C>65558)throw"invalid zip file";var N=Q(m,C+8);if(!N)return{};var H=ye(m,C+16),Y=H==4294967295;if(Y){if(C=ye(m,C-12),ye(m,C)!=101075792)throw"invalid zip file";N=ye(m,C+32),H=ye(m,C+48)}for(var R=0;R<N;++R){var F=ir(m,H,Y),w=F[0],L=F[1],G=F[2],he=F[3],We=F[4],at=F[5],tt=Un(m,at);if(H=We,!w)v[he]=Ve(m,tt,tt+L);else if(w==8)v[he]=At(m.subarray(tt,tt+L),new ze(G));else throw"unknown compression type "+w}return v}const to="colorSpace"in new Ue.Texture;class As extends Ue.DataTextureLoader{constructor(v){super(v),this.type=Ue.HalfFloatType}parse(v){const In=Math.pow(2.7182818,2.2);function fr(U,q){for(var me=0,Je=0;Je<65536;++Je)(Je==0||U[Je>>3]&1<<(Je&7))&&(q[me++]=Je);for(var xt=me-1;me<65536;)q[me++]=0;return xt}function lr(U){for(var q=0;q<16384;q++)U[q]={},U[q].len=0,U[q].lit=0,U[q].p=null}const Nr={l:0,c:0,lc:0};function Jr(U,q,me,Je,xt){for(;me<U;)q=q<<8|ca(Je,xt),me+=8;me-=U,Nr.l=q>>me&(1<<U)-1,Nr.c=q,Nr.lc=me}const ci=new Array(59);function yi(U){for(var q=0;q<=58;++q)ci[q]=0;for(var q=0;q<65537;++q)ci[U[q]]+=1;for(var me=0,q=58;q>0;--q){var Je=me+ci[q]>>1;ci[q]=me,me=Je}for(var q=0;q<65537;++q){var xt=U[q];xt>0&&(U[q]=xt|ci[xt]++<<6)}}function Di(U,q,me,Je,xt,je,Dt){for(var ln=me,Sn=0,gn=0;xt<=je;xt++){if(ln.value-me.value>Je)return!1;Jr(6,Sn,gn,U,ln);var An=Nr.l;if(Sn=Nr.c,gn=Nr.lc,Dt[xt]=An,An==63){if(ln.value-me.value>Je)throw"Something wrong with hufUnpackEncTable";Jr(8,Sn,gn,U,ln);var wn=Nr.l+6;if(Sn=Nr.c,gn=Nr.lc,xt+wn>je+1)throw"Something wrong with hufUnpackEncTable";for(;wn--;)Dt[xt++]=0;xt--}else if(An>=59){var wn=An-59+2;if(xt+wn>je+1)throw"Something wrong with hufUnpackEncTable";for(;wn--;)Dt[xt++]=0;xt--}}yi(Dt)}function Kr(U){return U&63}function Mi(U){return U>>6}function cs(U,q,me,Je){for(;q<=me;q++){var xt=Mi(U[q]),je=Kr(U[q]);if(xt>>je)throw"Invalid table entry";if(je>14){var Dt=Je[xt>>je-14];if(Dt.len)throw"Invalid table entry";if(Dt.lit++,Dt.p){var ln=Dt.p;Dt.p=new Array(Dt.lit);for(var Sn=0;Sn<Dt.lit-1;++Sn)Dt.p[Sn]=ln[Sn]}else Dt.p=new Array(1);Dt.p[Dt.lit-1]=q}else if(je)for(var gn=0,Sn=1<<14-je;Sn>0;Sn--){var Dt=Je[(xt<<14-je)+gn];if(Dt.len||Dt.p)throw"Invalid table entry";Dt.len=je,Dt.lit=q,gn++}}return!0}const bs={c:0,lc:0};function ps(U,q,me,Je){U=U<<8|ca(me,Je),q+=8,bs.c=U,bs.lc=q}const ms={c:0,lc:0};function $s(U,q,me,Je,xt,je,Dt,ln,Sn,gn){if(U==q){Je<8&&(ps(me,Je,xt,Dt),me=bs.c,Je=bs.lc),Je-=8;var An=me>>Je,An=new Uint8Array([An])[0];if(Sn.value+An>gn)return!1;for(var wn=ln[Sn.value-1];An-- >0;)ln[Sn.value++]=wn}else if(Sn.value<gn)ln[Sn.value++]=U;else return!1;ms.c=me,ms.lc=Je}function Ws(U){return U&65535}function $i(U){var q=Ws(U);return q>32767?q-65536:q}const ns={a:0,b:0};function Bo(U,q){var me=$i(U),Je=$i(q),xt=Je,je=me+(xt&1)+(xt>>1),Dt=je,ln=je-xt;ns.a=Dt,ns.b=ln}function Ao(U,q){var me=Ws(U),Je=Ws(q),xt=me-(Je>>1)&65535,je=Je+xt-32768&65535;ns.a=je,ns.b=xt}function Co(U,q,me,Je,xt,je,Dt){for(var ln=Dt<16384,Sn=me>xt?xt:me,gn=1,An;gn<=Sn;)gn<<=1;for(gn>>=1,An=gn,gn>>=1;gn>=1;){for(var wn=0,xs=wn+je*(xt-An),Dr=je*gn,pr=je*An,$=Je*gn,bi=Je*An,fs,ki,Ps,Ls;wn<=xs;wn+=pr){for(var Hi=wn,Lo=wn+Je*(me-An);Hi<=Lo;Hi+=bi){var rs=Hi+$,Ds=Hi+Dr,io=Ds+$;ln?(Bo(U[Hi+q],U[Ds+q]),fs=ns.a,Ps=ns.b,Bo(U[rs+q],U[io+q]),ki=ns.a,Ls=ns.b,Bo(fs,ki),U[Hi+q]=ns.a,U[rs+q]=ns.b,Bo(Ps,Ls),U[Ds+q]=ns.a,U[io+q]=ns.b):(Ao(U[Hi+q],U[Ds+q]),fs=ns.a,Ps=ns.b,Ao(U[rs+q],U[io+q]),ki=ns.a,Ls=ns.b,Ao(fs,ki),U[Hi+q]=ns.a,U[rs+q]=ns.b,Ao(Ps,Ls),U[Ds+q]=ns.a,U[io+q]=ns.b)}if(me&gn){var Ds=Hi+Dr;ln?Bo(U[Hi+q],U[Ds+q]):Ao(U[Hi+q],U[Ds+q]),fs=ns.a,U[Ds+q]=ns.b,U[Hi+q]=fs}}if(xt&gn)for(var Hi=wn,Lo=wn+Je*(me-An);Hi<=Lo;Hi+=bi){var rs=Hi+$;ln?Bo(U[Hi+q],U[rs+q]):Ao(U[Hi+q],U[rs+q]),fs=ns.a,U[rs+q]=ns.b,U[Hi+q]=fs}An=gn,gn>>=1}return wn}function Jo(U,q,me,Je,xt,je,Dt,ln,Sn,gn){for(var An=0,wn=0,xs=ln,Dr=Math.trunc(xt.value+(je+7)/8);xt.value<Dr;)for(ps(An,wn,me,xt),An=bs.c,wn=bs.lc;wn>=14;){var pr=An>>wn-14&16383,$=q[pr];if($.len)wn-=$.len,$s($.lit,Dt,An,wn,me,Je,xt,Sn,gn,xs),An=ms.c,wn=ms.lc;else{if(!$.p)throw"hufDecode issues";var bi;for(bi=0;bi<$.lit;bi++){for(var fs=Kr(U[$.p[bi]]);wn<fs&&xt.value<Dr;)ps(An,wn,me,xt),An=bs.c,wn=bs.lc;if(wn>=fs&&Mi(U[$.p[bi]])==(An>>wn-fs&(1<<fs)-1)){wn-=fs,$s($.p[bi],Dt,An,wn,me,Je,xt,Sn,gn,xs),An=ms.c,wn=ms.lc;break}}if(bi==$.lit)throw"hufDecode issues"}}var ki=8-je&7;for(An>>=ki,wn-=ki;wn>0;){var $=q[An<<14-wn&16383];if($.len)wn-=$.len,$s($.lit,Dt,An,wn,me,Je,xt,Sn,gn,xs),An=ms.c,wn=ms.lc;else throw"hufDecode issues"}return!0}function Qs(U,q,me,Je,xt,je){var Dt={value:0},ln=me.value,Sn=Hs(q,me),gn=Hs(q,me);me.value+=4;var An=Hs(q,me);if(me.value+=4,Sn<0||Sn>=65537||gn<0||gn>=65537)throw"Something wrong with HUF_ENCSIZE";var wn=new Array(65537),xs=new Array(16384);lr(xs);var Dr=Je-(me.value-ln);if(Di(U,q,me,Dr,Sn,gn,wn),An>8*(Je-(me.value-ln)))throw"Something wrong with hufUncompress";cs(wn,Sn,gn,xs),Jo(wn,xs,U,q,me,An,gn,je,xt,Dt)}function co(U,q,me){for(var Je=0;Je<me;++Je)q[Je]=U[q[Je]]}function _o(U){for(var q=1;q<U.length;q++){var me=U[q-1]+U[q]-128;U[q]=me}}function us(U,q){for(var me=0,Je=Math.floor((U.length+1)/2),xt=0,je=U.length-1;!(xt>je||(q[xt++]=U[me++],xt>je));)q[xt++]=U[Je++]}function Yi(U){for(var q=U.byteLength,me=new Array,Je=0,xt=new DataView(U);q>0;){var je=xt.getInt8(Je++);if(je<0){var Dt=-je;q-=Dt+1;for(var ln=0;ln<Dt;ln++)me.push(xt.getUint8(Je++))}else{var Dt=je;q-=2;for(var Sn=xt.getUint8(Je++),ln=0;ln<Dt+1;ln++)me.push(Sn)}}return me}function Ra(U,q,me,Je,xt,je){var rs=new DataView(je.buffer),Dt=me[U.idx[0]].width,ln=me[U.idx[0]].height,Sn=3,gn=Math.floor(Dt/8),An=Math.ceil(Dt/8),wn=Math.ceil(ln/8),xs=Dt-(An-1)*8,Dr=ln-(wn-1)*8,pr={value:0},$=new Array(Sn),bi=new Array(Sn),fs=new Array(Sn),ki=new Array(Sn),Ps=new Array(Sn);for(let as=0;as<Sn;++as)Ps[as]=q[U.idx[as]],$[as]=as<1?0:$[as-1]+An*wn,bi[as]=new Float32Array(64),fs[as]=new Uint16Array(64),ki[as]=new Uint16Array(An*64);for(let as=0;as<wn;++as){var Ls=8;as==wn-1&&(Ls=Dr);var Hi=8;for(let ws=0;ws<An;++ws){ws==An-1&&(Hi=xs);for(let Ui=0;Ui<Sn;++Ui)fs[Ui].fill(0),fs[Ui][0]=xt[$[Ui]++],xo(pr,Je,fs[Ui]),So(fs[Ui],bi[Ui]),jr(bi[Ui]);Rs(bi);for(let Ui=0;Ui<Sn;++Ui)Ua(bi[Ui],ki[Ui],ws*64)}let so=0;for(let ws=0;ws<Sn;++ws){const Ui=me[U.idx[ws]].type;for(let $o=8*as;$o<8*as+Ls;++$o){so=Ps[ws][$o];for(let fl=0;fl<gn;++fl){const Do=fl*64+($o&7)*8;rs.setUint16(so+0*2*Ui,ki[ws][Do+0],!0),rs.setUint16(so+1*2*Ui,ki[ws][Do+1],!0),rs.setUint16(so+2*2*Ui,ki[ws][Do+2],!0),rs.setUint16(so+3*2*Ui,ki[ws][Do+3],!0),rs.setUint16(so+4*2*Ui,ki[ws][Do+4],!0),rs.setUint16(so+5*2*Ui,ki[ws][Do+5],!0),rs.setUint16(so+6*2*Ui,ki[ws][Do+6],!0),rs.setUint16(so+7*2*Ui,ki[ws][Do+7],!0),so+=8*2*Ui}}if(gn!=An)for(let $o=8*as;$o<8*as+Ls;++$o){const fl=Ps[ws][$o]+8*gn*2*Ui,Do=gn*64+($o&7)*8;for(let Pa=0;Pa<Hi;++Pa)rs.setUint16(fl+Pa*2*Ui,ki[ws][Do+Pa],!0)}}}for(var Lo=new Uint16Array(Dt),rs=new DataView(je.buffer),Ds=0;Ds<Sn;++Ds){me[U.idx[Ds]].decoded=!0;var io=me[U.idx[Ds]].type;if(me[Ds].type==2)for(var Ys=0;Ys<ln;++Ys){const as=Ps[Ds][Ys];for(var go=0;go<Dt;++go)Lo[go]=rs.getUint16(as+go*2*io,!0);for(var go=0;go<Dt;++go)rs.setFloat32(as+go*2*io,zt(Lo[go]),!0)}}}function xo(U,q,me){for(var Je,xt=1;xt<64;)Je=q[U.value],Je==65280?xt=64:Je>>8==255?xt+=Je&255:(me[xt]=Je,xt++),U.value++}function So(U,q){q[0]=zt(U[0]),q[1]=zt(U[1]),q[2]=zt(U[5]),q[3]=zt(U[6]),q[4]=zt(U[14]),q[5]=zt(U[15]),q[6]=zt(U[27]),q[7]=zt(U[28]),q[8]=zt(U[2]),q[9]=zt(U[4]),q[10]=zt(U[7]),q[11]=zt(U[13]),q[12]=zt(U[16]),q[13]=zt(U[26]),q[14]=zt(U[29]),q[15]=zt(U[42]),q[16]=zt(U[3]),q[17]=zt(U[8]),q[18]=zt(U[12]),q[19]=zt(U[17]),q[20]=zt(U[25]),q[21]=zt(U[30]),q[22]=zt(U[41]),q[23]=zt(U[43]),q[24]=zt(U[9]),q[25]=zt(U[11]),q[26]=zt(U[18]),q[27]=zt(U[24]),q[28]=zt(U[31]),q[29]=zt(U[40]),q[30]=zt(U[44]),q[31]=zt(U[53]),q[32]=zt(U[10]),q[33]=zt(U[19]),q[34]=zt(U[23]),q[35]=zt(U[32]),q[36]=zt(U[39]),q[37]=zt(U[45]),q[38]=zt(U[52]),q[39]=zt(U[54]),q[40]=zt(U[20]),q[41]=zt(U[22]),q[42]=zt(U[33]),q[43]=zt(U[38]),q[44]=zt(U[46]),q[45]=zt(U[51]),q[46]=zt(U[55]),q[47]=zt(U[60]),q[48]=zt(U[21]),q[49]=zt(U[34]),q[50]=zt(U[37]),q[51]=zt(U[47]),q[52]=zt(U[50]),q[53]=zt(U[56]),q[54]=zt(U[59]),q[55]=zt(U[61]),q[56]=zt(U[35]),q[57]=zt(U[36]),q[58]=zt(U[48]),q[59]=zt(U[49]),q[60]=zt(U[57]),q[61]=zt(U[58]),q[62]=zt(U[62]),q[63]=zt(U[63])}function jr(U){const q=.5*Math.cos(.7853975),me=.5*Math.cos(3.14159/16),Je=.5*Math.cos(3.14159/8),xt=.5*Math.cos(3*3.14159/16),je=.5*Math.cos(5*3.14159/16),Dt=.5*Math.cos(3*3.14159/8),ln=.5*Math.cos(7*3.14159/16);for(var Sn=new Array(4),gn=new Array(4),An=new Array(4),wn=new Array(4),xs=0;xs<8;++xs){var Dr=xs*8;Sn[0]=Je*U[Dr+2],Sn[1]=Dt*U[Dr+2],Sn[2]=Je*U[Dr+6],Sn[3]=Dt*U[Dr+6],gn[0]=me*U[Dr+1]+xt*U[Dr+3]+je*U[Dr+5]+ln*U[Dr+7],gn[1]=xt*U[Dr+1]-ln*U[Dr+3]-me*U[Dr+5]-je*U[Dr+7],gn[2]=je*U[Dr+1]-me*U[Dr+3]+ln*U[Dr+5]+xt*U[Dr+7],gn[3]=ln*U[Dr+1]-je*U[Dr+3]+xt*U[Dr+5]-me*U[Dr+7],An[0]=q*(U[Dr+0]+U[Dr+4]),An[3]=q*(U[Dr+0]-U[Dr+4]),An[1]=Sn[0]+Sn[3],An[2]=Sn[1]-Sn[2],wn[0]=An[0]+An[1],wn[1]=An[3]+An[2],wn[2]=An[3]-An[2],wn[3]=An[0]-An[1],U[Dr+0]=wn[0]+gn[0],U[Dr+1]=wn[1]+gn[1],U[Dr+2]=wn[2]+gn[2],U[Dr+3]=wn[3]+gn[3],U[Dr+4]=wn[3]-gn[3],U[Dr+5]=wn[2]-gn[2],U[Dr+6]=wn[1]-gn[1],U[Dr+7]=wn[0]-gn[0]}for(var pr=0;pr<8;++pr)Sn[0]=Je*U[16+pr],Sn[1]=Dt*U[16+pr],Sn[2]=Je*U[48+pr],Sn[3]=Dt*U[48+pr],gn[0]=me*U[8+pr]+xt*U[24+pr]+je*U[40+pr]+ln*U[56+pr],gn[1]=xt*U[8+pr]-ln*U[24+pr]-me*U[40+pr]-je*U[56+pr],gn[2]=je*U[8+pr]-me*U[24+pr]+ln*U[40+pr]+xt*U[56+pr],gn[3]=ln*U[8+pr]-je*U[24+pr]+xt*U[40+pr]-me*U[56+pr],An[0]=q*(U[pr]+U[32+pr]),An[3]=q*(U[pr]-U[32+pr]),An[1]=Sn[0]+Sn[3],An[2]=Sn[1]-Sn[2],wn[0]=An[0]+An[1],wn[1]=An[3]+An[2],wn[2]=An[3]-An[2],wn[3]=An[0]-An[1],U[0+pr]=wn[0]+gn[0],U[8+pr]=wn[1]+gn[1],U[16+pr]=wn[2]+gn[2],U[24+pr]=wn[3]+gn[3],U[32+pr]=wn[3]-gn[3],U[40+pr]=wn[2]-gn[2],U[48+pr]=wn[1]-gn[1],U[56+pr]=wn[0]-gn[0]}function Rs(U){for(var q=0;q<64;++q){var me=U[0][q],Je=U[1][q],xt=U[2][q];U[0][q]=me+1.5747*xt,U[1][q]=me-.1873*Je-.4682*xt,U[2][q]=me+1.8556*Je}}function Ua(U,q,me){for(var Je=0;Je<64;++Je)q[me+Je]=Ue.DataUtils.toHalfFloat(Il(U[Je]))}function Il(U){return U<=1?Math.sign(U)*Math.pow(Math.abs(U),2.2):Math.sign(U)*Math.pow(In,Math.abs(U)-1)}function Ro(U){return new DataView(U.array.buffer,U.offset.value,U.size)}function uo(U){var q=U.viewer.buffer.slice(U.offset.value,U.offset.value+U.size),me=new Uint8Array(Yi(q)),Je=new Uint8Array(me.length);return _o(me),us(me,Je),new DataView(Je.buffer)}function _s(U){var q=U.array.slice(U.offset.value,U.offset.value+U.size),me=ft(q),Je=new Uint8Array(me.length);return _o(me),us(me,Je),new DataView(Je.buffer)}function Sa(U){for(var q=U.viewer,me={value:U.offset.value},Je=new Uint16Array(U.width*U.scanlineBlockSize*(U.channels*U.type)),xt=new Uint8Array(8192),je=0,Dt=new Array(U.channels),ln=0;ln<U.channels;ln++)Dt[ln]={},Dt[ln].start=je,Dt[ln].end=Dt[ln].start,Dt[ln].nx=U.width,Dt[ln].ny=U.lines,Dt[ln].size=U.type,je+=Dt[ln].nx*Dt[ln].ny*Dt[ln].size;var Sn=Gs(q,me),gn=Gs(q,me);if(gn>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(Sn<=gn)for(var ln=0;ln<gn-Sn+1;ln++)xt[ln+Sn]=ta(q,me);var An=new Uint16Array(65536),wn=fr(xt,An),xs=Hs(q,me);Qs(U.array,q,me,xs,Je,je);for(var ln=0;ln<U.channels;++ln)for(var Dr=Dt[ln],pr=0;pr<Dt[ln].size;++pr)Co(Je,Dr.start+pr,Dr.nx,Dr.size,Dr.ny,Dr.nx*Dr.size,wn);co(An,Je,je);for(var $=0,bi=new Uint8Array(Je.buffer.byteLength),fs=0;fs<U.lines;fs++)for(var ki=0;ki<U.channels;ki++){var Dr=Dt[ki],Ps=Dr.nx*Dr.size,Ls=new Uint8Array(Je.buffer,Dr.end*2,Ps*2);bi.set(Ls,$),$+=Ps*2,Dr.end+=Ps}return new DataView(bi.buffer)}function Mo(U){var q=U.array.slice(U.offset.value,U.offset.value+U.size),me=ft(q);const Je=U.lines*U.channels*U.width,xt=U.type==1?new Uint16Array(Je):new Uint32Array(Je);let je=0,Dt=0;const ln=new Array(4);for(let Sn=0;Sn<U.lines;Sn++)for(let gn=0;gn<U.channels;gn++){let An=0;switch(U.type){case 1:ln[0]=je,ln[1]=ln[0]+U.width,je=ln[1]+U.width;for(let wn=0;wn<U.width;++wn){const xs=me[ln[0]++]<<8|me[ln[1]++];An+=xs,xt[Dt]=An,Dt++}break;case 2:ln[0]=je,ln[1]=ln[0]+U.width,ln[2]=ln[1]+U.width,je=ln[2]+U.width;for(let wn=0;wn<U.width;++wn){const xs=me[ln[0]++]<<24|me[ln[1]++]<<16|me[ln[2]++]<<8;An+=xs,xt[Dt]=An,Dt++}break}}return new DataView(xt.buffer)}function cl(U){var q=U.viewer,me={value:U.offset.value},Je=new Uint8Array(U.width*U.lines*(U.channels*U.type*2)),xt={version:fo(q,me),unknownUncompressedSize:fo(q,me),unknownCompressedSize:fo(q,me),acCompressedSize:fo(q,me),dcCompressedSize:fo(q,me),rleCompressedSize:fo(q,me),rleUncompressedSize:fo(q,me),rleRawSize:fo(q,me),totalAcUncompressedCount:fo(q,me),totalDcUncompressedCount:fo(q,me),acCompression:fo(q,me)};if(xt.version<2)throw"EXRLoader.parse: "+Xr.compression+" version "+xt.version+" is unsupported";for(var je=new Array,Dt=Gs(q,me)-2;Dt>0;){var ln=ul(q.buffer,me),Sn=ta(q,me),gn=Sn>>2&3,An=(Sn>>4)-1,wn=new Int8Array([An])[0],xs=ta(q,me);je.push({name:ln,index:wn,type:xs,compression:gn}),Dt-=ln.length+3}for(var Dr=Xr.channels,pr=new Array(U.channels),$=0;$<U.channels;++$){var bi=pr[$]={},fs=Dr[$];bi.name=fs.name,bi.compression=0,bi.decoded=!1,bi.type=fs.pixelType,bi.pLinear=fs.pLinear,bi.width=U.width,bi.height=U.lines}for(var ki={idx:new Array(3)},Ps=0;Ps<U.channels;++Ps)for(var bi=pr[Ps],$=0;$<je.length;++$){var Ls=je[$];bi.name==Ls.name&&(bi.compression=Ls.compression,Ls.index>=0&&(ki.idx[Ls.index]=Ps),bi.offset=Ps)}if(xt.acCompressedSize>0)switch(xt.acCompression){case 0:var rs=new Uint16Array(xt.totalAcUncompressedCount);Qs(U.array,q,me,xt.acCompressedSize,rs,xt.totalAcUncompressedCount);break;case 1:var Hi=U.array.slice(me.value,me.value+xt.totalAcUncompressedCount),Lo=ft(Hi),rs=new Uint16Array(Lo.buffer);me.value+=xt.totalAcUncompressedCount;break}if(xt.dcCompressedSize>0){var Ds={array:U.array,offset:me,size:xt.dcCompressedSize},io=new Uint16Array(_s(Ds).buffer);me.value+=xt.dcCompressedSize}if(xt.rleRawSize>0){var Hi=U.array.slice(me.value,me.value+xt.rleCompressedSize),Lo=ft(Hi),Ys=Yi(Lo.buffer);me.value+=xt.rleCompressedSize}for(var go=0,as=new Array(pr.length),$=0;$<as.length;++$)as[$]=new Array;for(var so=0;so<U.lines;++so)for(var ws=0;ws<pr.length;++ws)as[ws].push(go),go+=pr[ws].width*U.type*2;Ra(ki,as,pr,rs,io,Je);for(var $=0;$<pr.length;++$){var bi=pr[$];if(!bi.decoded)switch(bi.compression){case 2:for(var Ui=0,$o=0,so=0;so<U.lines;++so){for(var fl=as[$][Ui],Do=0;Do<bi.width;++Do){for(var Pa=0;Pa<2*bi.type;++Pa)Je[fl++]=Ys[$o+Pa*bi.width*bi.height];$o++}Ui++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(Je.buffer)}function ul(U,q){for(var me=new Uint8Array(U),Je=0;me[q.value+Je]!=0;)Je+=1;var xt=new TextDecoder().decode(me.slice(q.value,q.value+Je));return q.value=q.value+Je+1,xt}function Ma(U,q,me){var Je=new TextDecoder().decode(new Uint8Array(U).slice(q.value,q.value+me));return q.value=q.value+me,Je}function yl(U,q){var me=Fa(U,q),Je=Hs(U,q);return[me,Je]}function _c(U,q){var me=Hs(U,q),Je=Hs(U,q);return[me,Je]}function Fa(U,q){var me=U.getInt32(q.value,!0);return q.value=q.value+4,me}function Hs(U,q){var me=U.getUint32(q.value,!0);return q.value=q.value+4,me}function ca(U,q){var me=U[q.value];return q.value=q.value+1,me}function ta(U,q){var me=U.getUint8(q.value);return q.value=q.value+1,me}const fo=function(U,q){let me;return"getBigInt64"in DataView.prototype?me=Number(U.getBigInt64(q.value,!0)):me=U.getUint32(q.value+4,!0)+Number(U.getUint32(q.value,!0)<<32),q.value+=8,me};function Ti(U,q){var me=U.getFloat32(q.value,!0);return q.value+=4,me}function ho(U,q){return Ue.DataUtils.toHalfFloat(Ti(U,q))}function zt(U){var q=(U&31744)>>10,me=U&1023;return(U>>15?-1:1)*(q?q===31?me?NaN:1/0:Math.pow(2,q-15)*(1+me/1024):6103515625e-14*(me/1024))}function Gs(U,q){var me=U.getUint16(q.value,!0);return q.value+=2,me}function Et(U,q){return zt(Gs(U,q))}function xr(U,q,me,Je){for(var xt=me.value,je=[];me.value<xt+Je-1;){var Dt=ul(q,me),ln=Fa(U,me),Sn=ta(U,me);me.value+=3;var gn=Fa(U,me),An=Fa(U,me);je.push({name:Dt,pixelType:ln,pLinear:Sn,xSampling:gn,ySampling:An})}return me.value+=1,je}function Po(U,q){var me=Ti(U,q),Je=Ti(U,q),xt=Ti(U,q),je=Ti(U,q),Dt=Ti(U,q),ln=Ti(U,q),Sn=Ti(U,q),gn=Ti(U,q);return{redX:me,redY:Je,greenX:xt,greenY:je,blueX:Dt,blueY:ln,whiteX:Sn,whiteY:gn}}function po(U,q){var me=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Je=ta(U,q);return me[Je]}function Us(U,q){var me=Hs(U,q),Je=Hs(U,q),xt=Hs(U,q),je=Hs(U,q);return{xMin:me,yMin:Je,xMax:xt,yMax:je}}function mo(U,q){var me=["INCREASING_Y"],Je=ta(U,q);return me[Je]}function Io(U,q){var me=Ti(U,q),Je=Ti(U,q);return[me,Je]}function bo(U,q){var me=Ti(U,q),Je=Ti(U,q),xt=Ti(U,q);return[me,Je,xt]}function za(U,q,me,Je,xt){if(Je==="string"||Je==="stringvector"||Je==="iccProfile")return Ma(q,me,xt);if(Je==="chlist")return xr(U,q,me,xt);if(Je==="chromaticities")return Po(U,me);if(Je==="compression")return po(U,me);if(Je==="box2i")return Us(U,me);if(Je==="lineOrder")return mo(U,me);if(Je==="float")return Ti(U,me);if(Je==="v2f")return Io(U,me);if(Je==="v3f")return bo(U,me);if(Je==="int")return Fa(U,me);if(Je==="rational")return yl(U,me);if(Je==="timecode")return _c(U,me);if(Je==="preview")return me.value+=xt,"skipped";me.value+=xt}function Qi(U,q,me){const Je={};if(U.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";Je.version=U.getUint8(4);const xt=U.getUint8(5);Je.spec={singleTile:!!(xt&2),longName:!!(xt&4),deepFormat:!!(xt&8),multiPart:!!(xt&16)},me.value=8;for(var je=!0;je;){var Dt=ul(q,me);if(Dt==0)je=!1;else{var ln=ul(q,me),Sn=Hs(U,me),gn=za(U,q,me,ln,Sn);gn===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${ln}'.`):Je[Dt]=gn}}if(xt!=0)throw console.error("EXRHeader:",Je),"THREE.EXRLoader: provided file is currently unsupported.";return Je}function Ba(U,q,me,Je,xt){const je={size:0,viewer:q,array:me,offset:Je,width:U.dataWindow.xMax-U.dataWindow.xMin+1,height:U.dataWindow.yMax-U.dataWindow.yMin+1,channels:U.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:U.channels[0].pixelType,uncompress:null,getter:null,format:null,[to?"colorSpace":"encoding"]:null};switch(U.compression){case"NO_COMPRESSION":je.lines=1,je.uncompress=Ro;break;case"RLE_COMPRESSION":je.lines=1,je.uncompress=uo;break;case"ZIPS_COMPRESSION":je.lines=1,je.uncompress=_s;break;case"ZIP_COMPRESSION":je.lines=16,je.uncompress=_s;break;case"PIZ_COMPRESSION":je.lines=32,je.uncompress=Sa;break;case"PXR24_COMPRESSION":je.lines=16,je.uncompress=Mo;break;case"DWAA_COMPRESSION":je.lines=32,je.uncompress=cl;break;case"DWAB_COMPRESSION":je.lines=256,je.uncompress=cl;break;default:throw"EXRLoader.parse: "+U.compression+" is unsupported"}if(je.scanlineBlockSize=je.lines,je.type==1)switch(xt){case Ue.FloatType:je.getter=Et,je.inputSize=2;break;case Ue.HalfFloatType:je.getter=Gs,je.inputSize=2;break}else if(je.type==2)switch(xt){case Ue.FloatType:je.getter=Ti,je.inputSize=4;break;case Ue.HalfFloatType:je.getter=ho,je.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+je.type+" for "+U.compression+".";je.blockCount=(U.dataWindow.yMax+1)/je.scanlineBlockSize;for(var Dt=0;Dt<je.blockCount;Dt++)fo(q,Je);je.outputChannels=je.channels==3?4:je.channels;const ln=je.width*je.height*je.outputChannels;switch(xt){case Ue.FloatType:je.byteArray=new Float32Array(ln),je.channels<je.outputChannels&&je.byteArray.fill(1,0,ln);break;case Ue.HalfFloatType:je.byteArray=new Uint16Array(ln),je.channels<je.outputChannels&&je.byteArray.fill(15360,0,ln);break;default:console.error("THREE.EXRLoader: unsupported type: ",xt);break}return je.bytesPerLine=je.width*je.inputSize*je.channels,je.outputChannels==4?je.format=Ue.RGBAFormat:je.format=Ue.RedFormat,to?je.colorSpace="srgb-linear":je.encoding=3e3,je}const ua=new DataView(v),Qa=new Uint8Array(v),fa={value:0},Xr=Qi(ua,v,fa),$r=Ba(Xr,ua,Qa,fa,this.type),Fs={value:0},Zs={R:0,G:1,B:2,A:3,Y:0};for(let U=0;U<$r.height/$r.scanlineBlockSize;U++){const q=Hs(ua,fa);$r.size=Hs(ua,fa),$r.lines=q+$r.scanlineBlockSize>$r.height?$r.height-q:$r.scanlineBlockSize;const Je=$r.size<$r.lines*$r.bytesPerLine?$r.uncompress($r):Ro($r);fa.value+=$r.size;for(let xt=0;xt<$r.scanlineBlockSize;xt++){const je=xt+U*$r.scanlineBlockSize;if(je>=$r.height)break;for(let Dt=0;Dt<$r.channels;Dt++){const ln=Zs[Xr.channels[Dt].name];for(let Sn=0;Sn<$r.width;Sn++){Fs.value=(xt*($r.channels*$r.width)+Dt*$r.width+Sn)*$r.inputSize;const gn=($r.height-1-je)*($r.width*$r.outputChannels)+Sn*$r.outputChannels+ln;$r.byteArray[gn]=$r.getter(Je,Fs)}}}}return{header:Xr,width:$r.width,height:$r.height,data:$r.byteArray,format:$r.format,[to?"colorSpace":"encoding"]:$r[to?"colorSpace":"encoding"],type:this.type}}setDataType(v){return this.type=v,this}load(v,C,N,H){function Y(R,F){to?R.colorSpace=F.colorSpace:R.encoding=F.encoding,R.minFilter=Ue.LinearFilter,R.magFilter=Ue.LinearFilter,R.generateMipmaps=!1,R.flipY=!1,C&&C(R,F)}return super.load(v,Y,N,H)}}const Cs={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},no="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Ni=m=>Array.isArray(m);function Vs({files:m=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:v="",preset:C=void 0,encoding:N=void 0,extensions:H}={}){var Y;let R=null,F=!1,w;if(C){if(!(C in Cs))throw new Error("Preset must be one of: "+Object.keys(Cs).join(", "));m=Cs[C],v=no}if(F=Ni(m),w=Ni(m)?"cube":m.startsWith("data:application/exr")?"exr":m.startsWith("data:application/hdr")?"hdr":(Y=m.split(".").pop())==null||(Y=Y.split("?"))==null||(Y=Y.shift())==null?void 0:Y.toLowerCase(),R=F?Ue.CubeTextureLoader:w==="hdr"?de:w==="exr"?As:null,!R)throw new Error("useEnvironment: Unrecognized file extension: "+m);const L=(0,te.F)(R,F?[m]:m,at=>{at.setPath==null||at.setPath(v),H&&H(at)}),G=F?L[0]:L;G.mapping=F?Ue.CubeReflectionMapping:Ue.EquirectangularReflectionMapping;const he=3001,We=3e3;return"colorSpace"in G?G.colorSpace=(N!=null?N:F)?"srgb":"srgb-linear":G.encoding=(N!=null?N:F)?he:We,G}const To=m=>m.current&&m.current.isScene,oi=m=>To(m)?m.current:m;function la(m,v,C,N,H=0){const Y=oi(v||C),R=Y.background,F=Y.environment,w=Y.backgroundBlurriness||0;return m!=="only"&&(Y.environment=N),m&&(Y.background=N),m&&Y.backgroundBlurriness!==void 0&&(Y.backgroundBlurriness=H),()=>{m!=="only"&&(Y.environment=F),m&&(Y.background=R),m&&Y.backgroundBlurriness!==void 0&&(Y.backgroundBlurriness=w)}}function xa({scene:m,background:v=!1,blur:C,map:N}){const H=(0,te.A)(Y=>Y.scene);return ce.useLayoutEffect(()=>{if(N)return la(v,m,H,N,C)},[H,m,N,v,C]),null}function qo(H){var Y=H,{background:m=!1,scene:v,blur:C}=Y,N=qa(Y,["background","scene","blur"]);const R=Vs(N),F=(0,te.A)(w=>w.scene);return ce.useLayoutEffect(()=>la(m,v,F,R,C),[R,m,v,F,C]),null}function $a({children:m,near:v=1,far:C=1e3,resolution:N=256,frames:H=1,map:Y,background:R=!1,blur:F,scene:w,files:L,path:G,preset:he=void 0,extensions:We}){const at=(0,te.A)(yt=>yt.gl),tt=(0,te.A)(yt=>yt.scene),$e=ce.useRef(null),[Ct]=ce.useState(()=>new Ue.Scene),En=ce.useMemo(()=>{const yt=new Ue.WebGLCubeRenderTarget(N);return yt.texture.type=Ue.HalfFloatType,yt},[N]);ce.useLayoutEffect(()=>(H===1&&$e.current.update(at,Ct),la(R,w,tt,En.texture,F)),[m,Ct,En.texture,w,tt,R,H,at]);let Ot=1;return(0,te.C)(()=>{(H===1/0||Ot<H)&&($e.current.update(at,Ct),Ot++)}),ce.createElement(ce.Fragment,null,(0,te.g)(ce.createElement(ce.Fragment,null,m,ce.createElement("cubeCamera",{ref:$e,args:[v,C,En]}),L||he?ce.createElement(qo,{background:!0,files:L,preset:he,path:G,extensions:We}):Y?ce.createElement(xa,{background:!0,map:Y,extensions:We}):null),Ct))}function ro(m){var v,C,N,H;const Y=Vs(m),R=m.map||Y;ce.useMemo(()=>(0,te.e)({GroundProjectedEnvImpl:fn}),[]);const F=ce.useMemo(()=>[R],[R]),w=(v=m.ground)==null?void 0:v.height,L=(C=m.ground)==null?void 0:C.radius,G=(N=(H=m.ground)==null?void 0:H.scale)!==null&&N!==void 0?N:1e3;return ce.createElement(ce.Fragment,null,ce.createElement(xa,(0,X.Z)({},m,{map:R})),ce.createElement("groundProjectedEnvImpl",{args:F,scale:G,height:w,radius:L}))}function O(m){return m.ground?ce.createElement(ro,m):m.map?ce.createElement(xa,m):m.children?ce.createElement($a,m):ce.createElement(qo,m)}},30398:function(an,St,se){"use strict";se.d(St,{z:function(){return it}});var X=se(87462),ce=se(15714),te=se(67294),Ue=se(99477),Ut=Object.defineProperty,fn=(en,Rn,tn)=>Rn in en?Ut(en,Rn,{enumerable:!0,configurable:!0,writable:!0,value:tn}):en[Rn]=tn,de=(en,Rn,tn)=>(fn(en,typeof Rn!="symbol"?Rn+"":Rn,tn),tn);const Xn=new Ue.Ray,ve=new Ue.Plane,ze=Math.cos(70*(Math.PI/180)),Wt=(en,Rn)=>(en%Rn+Rn)%Rn;class Ae extends Ue.EventDispatcher{constructor(Rn,tn){super(),de(this,"object"),de(this,"domElement"),de(this,"enabled",!0),de(this,"target",new Ue.Vector3),de(this,"minDistance",0),de(this,"maxDistance",1/0),de(this,"minZoom",0),de(this,"maxZoom",1/0),de(this,"minPolarAngle",0),de(this,"maxPolarAngle",Math.PI),de(this,"minAzimuthAngle",-1/0),de(this,"maxAzimuthAngle",1/0),de(this,"enableDamping",!1),de(this,"dampingFactor",.05),de(this,"enableZoom",!0),de(this,"zoomSpeed",1),de(this,"enableRotate",!0),de(this,"rotateSpeed",1),de(this,"enablePan",!0),de(this,"panSpeed",1),de(this,"screenSpacePanning",!0),de(this,"keyPanSpeed",7),de(this,"zoomToCursor",!1),de(this,"autoRotate",!1),de(this,"autoRotateSpeed",2),de(this,"reverseOrbit",!1),de(this,"reverseHorizontalOrbit",!1),de(this,"reverseVerticalOrbit",!1),de(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),de(this,"mouseButtons",{LEFT:Ue.MOUSE.ROTATE,MIDDLE:Ue.MOUSE.DOLLY,RIGHT:Ue.MOUSE.PAN}),de(this,"touches",{ONE:Ue.TOUCH.ROTATE,TWO:Ue.TOUCH.DOLLY_PAN}),de(this,"target0"),de(this,"position0"),de(this,"zoom0"),de(this,"_domElementKeyEvents",null),de(this,"getPolarAngle"),de(this,"getAzimuthalAngle"),de(this,"setPolarAngle"),de(this,"setAzimuthalAngle"),de(this,"getDistance"),de(this,"listenToKeyEvents"),de(this,"stopListenToKeyEvents"),de(this,"saveState"),de(this,"reset"),de(this,"update"),de(this,"connect"),de(this,"dispose"),this.object=Rn,this.domElement=tn,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>vn.phi,this.getAzimuthalAngle=()=>vn.theta,this.setPolarAngle=xe=>{let At=Wt(xe,2*Math.PI),Pn=vn.phi;Pn<0&&(Pn+=2*Math.PI),At<0&&(At+=2*Math.PI);let vr=Math.abs(At-Pn);2*Math.PI-vr<vr&&(At<Pn?At+=2*Math.PI:Pn+=2*Math.PI),pn.phi=At-Pn,ee.update()},this.setAzimuthalAngle=xe=>{let At=Wt(xe,2*Math.PI),Pn=vn.theta;Pn<0&&(Pn+=2*Math.PI),At<0&&(At+=2*Math.PI);let vr=Math.abs(At-Pn);2*Math.PI-vr<vr&&(At<Pn?At+=2*Math.PI:Pn+=2*Math.PI),pn.theta=At-Pn,ee.update()},this.getDistance=()=>ee.object.position.distanceTo(ee.target),this.listenToKeyEvents=xe=>{xe.addEventListener("keydown",Ge),this._domElementKeyEvents=xe},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ge),this._domElementKeyEvents=null},this.saveState=()=>{ee.target0.copy(ee.target),ee.position0.copy(ee.object.position),ee.zoom0=ee.object.zoom},this.reset=()=>{ee.target.copy(ee.target0),ee.object.position.copy(ee.position0),ee.object.zoom=ee.zoom0,ee.object.updateProjectionMatrix(),ee.dispatchEvent(Ir),ee.update(),Zn=zn.NONE},this.update=(()=>{const xe=new Ue.Vector3,At=new Ue.Vector3(0,1,0),Pn=new Ue.Quaternion().setFromUnitVectors(Rn.up,At),vr=Pn.clone().invert(),ni=new Ue.Vector3,Zi=new Ue.Quaternion,Ns=2*Math.PI;return function(){const js=ee.object.position;Pn.setFromUnitVectors(Rn.up,At),vr.copy(Pn).invert(),xe.copy(js).sub(ee.target),xe.applyQuaternion(Pn),vn.setFromVector3(xe),ee.autoRotate&&Zn===zn.NONE&&yr(ur()),ee.enableDamping?(vn.theta+=pn.theta*ee.dampingFactor,vn.phi+=pn.phi*ee.dampingFactor):(vn.theta+=pn.theta,vn.phi+=pn.phi);let os=ee.minAzimuthAngle,Ji=ee.maxAzimuthAngle;isFinite(os)&&isFinite(Ji)&&(os<-Math.PI?os+=Ns:os>Math.PI&&(os-=Ns),Ji<-Math.PI?Ji+=Ns:Ji>Math.PI&&(Ji-=Ns),os<=Ji?vn.theta=Math.max(os,Math.min(Ji,vn.theta)):vn.theta=vn.theta>(os+Ji)/2?Math.max(os,vn.theta):Math.min(Ji,vn.theta)),vn.phi=Math.max(ee.minPolarAngle,Math.min(ee.maxPolarAngle,vn.phi)),vn.makeSafe(),ee.enableDamping===!0?ee.target.addScaledVector(hr,ee.dampingFactor):ee.target.add(hr),ee.zoomToCursor&&wt||ee.object.isOrthographicCamera?vn.radius=_r(vn.radius):vn.radius=_r(vn.radius*dt),xe.setFromSpherical(vn),xe.applyQuaternion(vr),js.copy(ee.target).add(xe),ee.object.lookAt(ee.target),ee.enableDamping===!0?(pn.theta*=1-ee.dampingFactor,pn.phi*=1-ee.dampingFactor,hr.multiplyScalar(1-ee.dampingFactor)):(pn.set(0,0,0),hr.set(0,0,0));let It=!1;if(ee.zoomToCursor&&wt){let k=null;if(ee.object instanceof Ue.PerspectiveCamera&&ee.object.isPerspectiveCamera){const Z=xe.length();k=_r(Z*dt);const le=Z-k;ee.object.position.addScaledVector(Ne,le),ee.object.updateMatrixWorld()}else if(ee.object.isOrthographicCamera){const Z=new Ue.Vector3(Oe.x,Oe.y,0);Z.unproject(ee.object),ee.object.zoom=Math.max(ee.minZoom,Math.min(ee.maxZoom,ee.object.zoom/dt)),ee.object.updateProjectionMatrix(),It=!0;const le=new Ue.Vector3(Oe.x,Oe.y,0);le.unproject(ee.object),ee.object.position.sub(le).add(Z),ee.object.updateMatrixWorld(),k=xe.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),ee.zoomToCursor=!1;k!==null&&(ee.screenSpacePanning?ee.target.set(0,0,-1).transformDirection(ee.object.matrix).multiplyScalar(k).add(ee.object.position):(Xn.origin.copy(ee.object.position),Xn.direction.set(0,0,-1).transformDirection(ee.object.matrix),Math.abs(ee.object.up.dot(Xn.direction))<ze?Rn.lookAt(ee.target):(ve.setFromNormalAndCoplanarPoint(ee.object.up,ee.target),Xn.intersectPlane(ve,ee.target))))}else ee.object instanceof Ue.OrthographicCamera&&ee.object.isOrthographicCamera&&(ee.object.zoom=Math.max(ee.minZoom,Math.min(ee.maxZoom,ee.object.zoom/dt)),ee.object.updateProjectionMatrix(),It=!0);return dt=1,wt=!1,It||ni.distanceToSquared(ee.object.position)>Yn||8*(1-Zi.dot(ee.object.quaternion))>Yn?(ee.dispatchEvent(Ir),ni.copy(ee.object.position),Zi.copy(ee.object.quaternion),It=!1,!0):!1}})(),this.connect=xe=>{xe===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),ee.domElement=xe,ee.domElement.style.touchAction="none",ee.domElement.addEventListener("contextmenu",kn),ee.domElement.addEventListener("pointerdown",Ce),ee.domElement.addEventListener("pointercancel",Ht),ee.domElement.addEventListener("wheel",ht)},this.dispose=()=>{var xe,At,Pn,vr,ni,Zi;(xe=ee.domElement)==null||xe.removeEventListener("contextmenu",kn),(At=ee.domElement)==null||At.removeEventListener("pointerdown",Ce),(Pn=ee.domElement)==null||Pn.removeEventListener("pointercancel",Ht),(vr=ee.domElement)==null||vr.removeEventListener("wheel",ht),(ni=ee.domElement)==null||ni.ownerDocument.removeEventListener("pointermove",ge),(Zi=ee.domElement)==null||Zi.ownerDocument.removeEventListener("pointerup",vt),ee._domElementKeyEvents!==null&&ee._domElementKeyEvents.removeEventListener("keydown",Ge)};const ee=this,Ir={type:"change"},dr={type:"start"},tr={type:"end"},zn={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let Zn=zn.NONE;const Yn=1e-6,vn=new Ue.Spherical,pn=new Ue.Spherical;let dt=1;const hr=new Ue.Vector3,gr=new Ue.Vector2,ke=new Ue.Vector2,Kt=new Ue.Vector2,Lt=new Ue.Vector2,Qe=new Ue.Vector2,Se=new Ue.Vector2,we=new Ue.Vector2,Pe=new Ue.Vector2,Ve=new Ue.Vector2,Ne=new Ue.Vector3,Oe=new Ue.Vector2;let wt=!1;const ct=[],Nn={};function ur(){return 2*Math.PI/60/60*ee.autoRotateSpeed}function rr(){return Math.pow(.95,ee.zoomSpeed)}function yr(xe){ee.reverseOrbit||ee.reverseHorizontalOrbit?pn.theta+=xe:pn.theta-=xe}function zr(xe){ee.reverseOrbit||ee.reverseVerticalOrbit?pn.phi+=xe:pn.phi-=xe}const Ur=(()=>{const xe=new Ue.Vector3;return function(Pn,vr){xe.setFromMatrixColumn(vr,0),xe.multiplyScalar(-Pn),hr.add(xe)}})(),Lr=(()=>{const xe=new Ue.Vector3;return function(Pn,vr){ee.screenSpacePanning===!0?xe.setFromMatrixColumn(vr,1):(xe.setFromMatrixColumn(vr,0),xe.crossVectors(ee.object.up,xe)),xe.multiplyScalar(Pn),hr.add(xe)}})(),Yr=(()=>{const xe=new Ue.Vector3;return function(Pn,vr){const ni=ee.domElement;if(ni&&ee.object instanceof Ue.PerspectiveCamera&&ee.object.isPerspectiveCamera){const Zi=ee.object.position;xe.copy(Zi).sub(ee.target);let Ns=xe.length();Ns*=Math.tan(ee.object.fov/2*Math.PI/180),Ur(2*Pn*Ns/ni.clientHeight,ee.object.matrix),Lr(2*vr*Ns/ni.clientHeight,ee.object.matrix)}else ni&&ee.object instanceof Ue.OrthographicCamera&&ee.object.isOrthographicCamera?(Ur(Pn*(ee.object.right-ee.object.left)/ee.object.zoom/ni.clientWidth,ee.object.matrix),Lr(vr*(ee.object.top-ee.object.bottom)/ee.object.zoom/ni.clientHeight,ee.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),ee.enablePan=!1)}})();function Bn(xe){ee.object instanceof Ue.PerspectiveCamera&&ee.object.isPerspectiveCamera||ee.object instanceof Ue.OrthographicCamera&&ee.object.isOrthographicCamera?dt/=xe:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),ee.enableZoom=!1)}function sn(xe){ee.object instanceof Ue.PerspectiveCamera&&ee.object.isPerspectiveCamera||ee.object instanceof Ue.OrthographicCamera&&ee.object.isOrthographicCamera?dt*=xe:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),ee.enableZoom=!1)}function Tn(xe){if(!ee.zoomToCursor||!ee.domElement)return;wt=!0;const At=ee.domElement.getBoundingClientRect(),Pn=xe.clientX-At.left,vr=xe.clientY-At.top,ni=At.width,Zi=At.height;Oe.x=Pn/ni*2-1,Oe.y=-(vr/Zi)*2+1,Ne.set(Oe.x,Oe.y,1).unproject(ee.object).sub(ee.object.position).normalize()}function _r(xe){return Math.max(ee.minDistance,Math.min(ee.maxDistance,xe))}function ai(xe){gr.set(xe.clientX,xe.clientY)}function Tr(xe){Tn(xe),we.set(xe.clientX,xe.clientY)}function qr(xe){Lt.set(xe.clientX,xe.clientY)}function Si(xe){ke.set(xe.clientX,xe.clientY),Kt.subVectors(ke,gr).multiplyScalar(ee.rotateSpeed);const At=ee.domElement;At&&(yr(2*Math.PI*Kt.x/At.clientHeight),zr(2*Math.PI*Kt.y/At.clientHeight)),gr.copy(ke),ee.update()}function Ei(xe){Pe.set(xe.clientX,xe.clientY),Ve.subVectors(Pe,we),Ve.y>0?Bn(rr()):Ve.y<0&&sn(rr()),we.copy(Pe),ee.update()}function zi(xe){Qe.set(xe.clientX,xe.clientY),Se.subVectors(Qe,Lt).multiplyScalar(ee.panSpeed),Yr(Se.x,Se.y),Lt.copy(Qe),ee.update()}function Ss(xe){Tn(xe),xe.deltaY<0?sn(rr()):xe.deltaY>0&&Bn(rr()),ee.update()}function ei(xe){let At=!1;switch(xe.code){case ee.keys.UP:Yr(0,ee.keyPanSpeed),At=!0;break;case ee.keys.BOTTOM:Yr(0,-ee.keyPanSpeed),At=!0;break;case ee.keys.LEFT:Yr(ee.keyPanSpeed,0),At=!0;break;case ee.keys.RIGHT:Yr(-ee.keyPanSpeed,0),At=!0;break}At&&(xe.preventDefault(),ee.update())}function ii(){if(ct.length==1)gr.set(ct[0].pageX,ct[0].pageY);else{const xe=.5*(ct[0].pageX+ct[1].pageX),At=.5*(ct[0].pageY+ct[1].pageY);gr.set(xe,At)}}function ui(){if(ct.length==1)Lt.set(ct[0].pageX,ct[0].pageY);else{const xe=.5*(ct[0].pageX+ct[1].pageX),At=.5*(ct[0].pageY+ct[1].pageY);Lt.set(xe,At)}}function ls(){const xe=ct[0].pageX-ct[1].pageX,At=ct[0].pageY-ct[1].pageY,Pn=Math.sqrt(xe*xe+At*At);we.set(0,Pn)}function Hr(){ee.enableZoom&&ls(),ee.enablePan&&ui()}function Xi(){ee.enableZoom&&ls(),ee.enableRotate&&ii()}function Wr(xe){if(ct.length==1)ke.set(xe.pageX,xe.pageY);else{const Pn=ti(xe),vr=.5*(xe.pageX+Pn.x),ni=.5*(xe.pageY+Pn.y);ke.set(vr,ni)}Kt.subVectors(ke,gr).multiplyScalar(ee.rotateSpeed);const At=ee.domElement;At&&(yr(2*Math.PI*Kt.x/At.clientHeight),zr(2*Math.PI*Kt.y/At.clientHeight)),gr.copy(ke)}function Ln(xe){if(ct.length==1)Qe.set(xe.pageX,xe.pageY);else{const At=ti(xe),Pn=.5*(xe.pageX+At.x),vr=.5*(xe.pageY+At.y);Qe.set(Pn,vr)}Se.subVectors(Qe,Lt).multiplyScalar(ee.panSpeed),Yr(Se.x,Se.y),Lt.copy(Qe)}function Ts(xe){const At=ti(xe),Pn=xe.pageX-At.x,vr=xe.pageY-At.y,ni=Math.sqrt(Pn*Pn+vr*vr);Pe.set(0,ni),Ve.set(0,Math.pow(Pe.y/we.y,ee.zoomSpeed)),Bn(Ve.y),we.copy(Pe)}function Q(xe){ee.enableZoom&&Ts(xe),ee.enablePan&&Ln(xe)}function ye(xe){ee.enableZoom&&Ts(xe),ee.enableRotate&&Wr(xe)}function Ce(xe){var At,Pn;ee.enabled!==!1&&(ct.length===0&&((At=ee.domElement)==null||At.ownerDocument.addEventListener("pointermove",ge),(Pn=ee.domElement)==null||Pn.ownerDocument.addEventListener("pointerup",vt)),On(xe),xe.pointerType==="touch"?st(xe):Jt(xe))}function ge(xe){ee.enabled!==!1&&(xe.pointerType==="touch"?Ft(xe):_t(xe))}function vt(xe){var At,Pn,vr;$n(xe),ct.length===0&&((At=ee.domElement)==null||At.releasePointerCapture(xe.pointerId),(Pn=ee.domElement)==null||Pn.ownerDocument.removeEventListener("pointermove",ge),(vr=ee.domElement)==null||vr.ownerDocument.removeEventListener("pointerup",vt)),ee.dispatchEvent(tr),Zn=zn.NONE}function Ht(xe){$n(xe)}function Jt(xe){let At;switch(xe.button){case 0:At=ee.mouseButtons.LEFT;break;case 1:At=ee.mouseButtons.MIDDLE;break;case 2:At=ee.mouseButtons.RIGHT;break;default:At=-1}switch(At){case Ue.MOUSE.DOLLY:if(ee.enableZoom===!1)return;Tr(xe),Zn=zn.DOLLY;break;case Ue.MOUSE.ROTATE:if(xe.ctrlKey||xe.metaKey||xe.shiftKey){if(ee.enablePan===!1)return;qr(xe),Zn=zn.PAN}else{if(ee.enableRotate===!1)return;ai(xe),Zn=zn.ROTATE}break;case Ue.MOUSE.PAN:if(xe.ctrlKey||xe.metaKey||xe.shiftKey){if(ee.enableRotate===!1)return;ai(xe),Zn=zn.ROTATE}else{if(ee.enablePan===!1)return;qr(xe),Zn=zn.PAN}break;default:Zn=zn.NONE}Zn!==zn.NONE&&ee.dispatchEvent(dr)}function _t(xe){if(ee.enabled!==!1)switch(Zn){case zn.ROTATE:if(ee.enableRotate===!1)return;Si(xe);break;case zn.DOLLY:if(ee.enableZoom===!1)return;Ei(xe);break;case zn.PAN:if(ee.enablePan===!1)return;zi(xe);break}}function ht(xe){ee.enabled===!1||ee.enableZoom===!1||Zn!==zn.NONE&&Zn!==zn.ROTATE||(xe.preventDefault(),ee.dispatchEvent(dr),Ss(xe),ee.dispatchEvent(tr))}function Ge(xe){ee.enabled===!1||ee.enablePan===!1||ei(xe)}function st(xe){switch(Mr(xe),ct.length){case 1:switch(ee.touches.ONE){case Ue.TOUCH.ROTATE:if(ee.enableRotate===!1)return;ii(),Zn=zn.TOUCH_ROTATE;break;case Ue.TOUCH.PAN:if(ee.enablePan===!1)return;ui(),Zn=zn.TOUCH_PAN;break;default:Zn=zn.NONE}break;case 2:switch(ee.touches.TWO){case Ue.TOUCH.DOLLY_PAN:if(ee.enableZoom===!1&&ee.enablePan===!1)return;Hr(),Zn=zn.TOUCH_DOLLY_PAN;break;case Ue.TOUCH.DOLLY_ROTATE:if(ee.enableZoom===!1&&ee.enableRotate===!1)return;Xi(),Zn=zn.TOUCH_DOLLY_ROTATE;break;default:Zn=zn.NONE}break;default:Zn=zn.NONE}Zn!==zn.NONE&&ee.dispatchEvent(dr)}function Ft(xe){switch(Mr(xe),Zn){case zn.TOUCH_ROTATE:if(ee.enableRotate===!1)return;Wr(xe),ee.update();break;case zn.TOUCH_PAN:if(ee.enablePan===!1)return;Ln(xe),ee.update();break;case zn.TOUCH_DOLLY_PAN:if(ee.enableZoom===!1&&ee.enablePan===!1)return;Q(xe),ee.update();break;case zn.TOUCH_DOLLY_ROTATE:if(ee.enableZoom===!1&&ee.enableRotate===!1)return;ye(xe),ee.update();break;default:Zn=zn.NONE}}function kn(xe){ee.enabled!==!1&&xe.preventDefault()}function On(xe){ct.push(xe)}function $n(xe){delete Nn[xe.pointerId];for(let At=0;At<ct.length;At++)if(ct[At].pointerId==xe.pointerId){ct.splice(At,1);return}}function Mr(xe){let At=Nn[xe.pointerId];At===void 0&&(At=new Ue.Vector2,Nn[xe.pointerId]=At),At.set(xe.pageX,xe.pageY)}function ti(xe){const At=xe.pointerId===ct[0].pointerId?ct[1]:ct[0];return Nn[At.pointerId]}tn!==void 0&&this.connect(tn),this.update()}}class ut extends null{constructor(Rn,tn){super(Rn,tn),this.screenSpacePanning=!1,this.mouseButtons.LEFT=MOUSE.PAN,this.mouseButtons.RIGHT=MOUSE.ROTATE,this.touches.ONE=TOUCH.PAN,this.touches.TWO=TOUCH.DOLLY_ROTATE}}const it=te.forwardRef((pn,vn)=>{var dt=pn,{makeDefault:en,camera:Rn,regress:tn,domElement:ee,enableDamping:Ir=!0,keyEvents:dr=!1,onChange:tr,onStart:zn,onEnd:Zn}=dt,Yn=qa(dt,["makeDefault","camera","regress","domElement","enableDamping","keyEvents","onChange","onStart","onEnd"]);const hr=(0,ce.A)(Oe=>Oe.invalidate),gr=(0,ce.A)(Oe=>Oe.camera),ke=(0,ce.A)(Oe=>Oe.gl),Kt=(0,ce.A)(Oe=>Oe.events),Lt=(0,ce.A)(Oe=>Oe.setEvents),Qe=(0,ce.A)(Oe=>Oe.set),Se=(0,ce.A)(Oe=>Oe.get),we=(0,ce.A)(Oe=>Oe.performance),Pe=Rn||gr,Ve=ee||Kt.connected||ke.domElement,Ne=te.useMemo(()=>new Ae(Pe),[Pe]);return(0,ce.C)(()=>{Ne.enabled&&Ne.update()},-1),te.useEffect(()=>(dr&&Ne.connect(dr===!0?Ve:dr),Ne.connect(Ve),()=>void Ne.dispose()),[dr,Ve,tn,Ne,hr]),te.useEffect(()=>{const Oe=Nn=>{hr(),tn&&we.regress(),tr&&tr(Nn)},wt=Nn=>{zn&&zn(Nn)},ct=Nn=>{Zn&&Zn(Nn)};return Ne.addEventListener("change",Oe),Ne.addEventListener("start",wt),Ne.addEventListener("end",ct),()=>{Ne.removeEventListener("start",wt),Ne.removeEventListener("end",ct),Ne.removeEventListener("change",Oe)}},[tr,zn,Zn,Ne,hr,Lt]),te.useEffect(()=>{if(en){const Oe=Se().controls;return Qe({controls:Ne}),()=>Qe({controls:Oe})}},[en,Ne]),te.createElement("primitive",(0,X.Z)({ref:vn,object:Ne,enableDamping:Ir},Yn))})},15714:function(an,St,se){"use strict";se.d(St,{A:function(){return ht},B:function(){return Lt},C:function(){return Ge},E:function(){return Qe},F:function(){return On},a:function(){return ke},b:function(){return Zi},c:function(){return Si},d:function(){return js},e:function(){return zn},g:function(){return os},i:function(){return gr},u:function(){return Kt}});var X=se(99477),ce=se(67294),te=se(32576);function Ue(k){let Z;const le=new Set,Ye=(nn,_e)=>{const De=typeof nn=="function"?nn(Z):nn;if(De!==Z){const ot=Z;Z=_e?De:Object.assign({},Z,De),le.forEach(gt=>gt(Z,ot))}},He=()=>Z,ft=(nn,_e=He,De=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let ot=_e(Z);function gt(){const Pt=_e(Z);if(!De(ot,Pt)){const Gn=ot;nn(ot=Pt,Gn)}}return le.add(gt),()=>le.delete(gt)},et={setState:Ye,getState:He,subscribe:(nn,_e,De)=>_e||De?ft(nn,_e,De):(le.add(nn),()=>le.delete(nn)),destroy:()=>le.clear()};return Z=k(Ye,He,et),et}const fn=typeof window=="undefined"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?ce.useEffect:ce.useLayoutEffect;function de(k){const Z=typeof k=="function"?Ue(k):k,le=(Ye=Z.getState,He=Object.is)=>{const[,ft]=(0,ce.useReducer)(dn=>dn+1,0),Dn=Z.getState(),xn=(0,ce.useRef)(Dn),et=(0,ce.useRef)(Ye),nn=(0,ce.useRef)(He),_e=(0,ce.useRef)(!1),De=(0,ce.useRef)();De.current===void 0&&(De.current=Ye(Dn));let ot,gt=!1;(xn.current!==Dn||et.current!==Ye||nn.current!==He||_e.current)&&(ot=Ye(Dn),gt=!He(De.current,ot)),fn(()=>{gt&&(De.current=ot),xn.current=Dn,et.current=Ye,nn.current=He,_e.current=!1});const Pt=(0,ce.useRef)(Dn);fn(()=>{const dn=()=>{try{const Xe=Z.getState(),Zt=et.current(Xe);nn.current(De.current,Zt)||(xn.current=Xe,De.current=Zt,ft())}catch(Xe){_e.current=!0,ft()}},Ke=Z.subscribe(dn);return Z.getState()!==Pt.current&&dn(),Ke},[]);const Gn=gt?ot:De.current;return(0,ce.useDebugValue)(Gn),Gn};return Object.assign(le,Z),le[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const Ye=[le,Z];return{next(){const He=Ye.length<=0;return{value:Ye.shift(),done:He}}}},le}var Xn=se(76525),ve=se.n(Xn),ze=se(63840);const Wt=k=>typeof k=="object"&&typeof k.then=="function",Ae=[];function ut(k,Z,le=(Ye,He)=>Ye===He){if(k===Z)return!0;if(!k||!Z)return!1;const Ye=k.length;if(Z.length!==Ye)return!1;for(let He=0;He<Ye;He++)if(!le(k[He],Z[He]))return!1;return!0}function it(k,Z=null,le=!1,Ye={}){Z===null&&(Z=[k]);for(const ft of Ae)if(ut(Z,ft.keys,ft.equal)){if(le)return;if(Object.prototype.hasOwnProperty.call(ft,"error"))throw ft.error;if(Object.prototype.hasOwnProperty.call(ft,"response"))return Ye.lifespan&&Ye.lifespan>0&&(ft.timeout&&clearTimeout(ft.timeout),ft.timeout=setTimeout(ft.remove,Ye.lifespan)),ft.response;if(!le)throw ft.promise}const He={keys:Z,equal:Ye.equal,remove:()=>{const ft=Ae.indexOf(He);ft!==-1&&Ae.splice(ft,1)},promise:(Wt(k)?k:k(...Z)).then(ft=>{He.response=ft,Ye.lifespan&&Ye.lifespan>0&&(He.timeout=setTimeout(He.remove,Ye.lifespan))}).catch(ft=>He.error=ft)};if(Ae.push(He),!le)throw He.promise}const en=(k,Z,le)=>it(k,Z,!1,le),Rn=(k,Z,le)=>void it(k,Z,!0,le),tn=k=>{var Z;return(Z=Ae.find(le=>ut(k,le.keys,le.equal)))==null?void 0:Z.response},ee=k=>{if(k===void 0||k.length===0)Ae.splice(0,Ae.length);else{const Z=Ae.find(le=>ut(k,le.keys,le.equal));Z&&Z.remove()}};var Ir=se(34155),dr=Object.freeze({__proto__:null});const tr={},zn=k=>void Object.assign(tr,k);function Zn(k,Z){function le(_e,Gn,Pt){var dn=Gn,{args:De=[],attach:ot}=dn,gt=qa(dn,["args","attach"]);let Ke=`${_e[0].toUpperCase()}${_e.slice(1)}`,Xe;if(_e==="primitive"){if(gt.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const Zt=gt.object;Xe=Nn(Zt,{type:_e,root:Pt,attach:ot,primitive:!0})}else{const Zt=tr[Ke];if(!Zt)throw new Error(`R3F: ${Ke} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(De))throw new Error("R3F: The args prop must be an array!");Xe=Nn(new Zt(...De),{type:_e,root:Pt,attach:ot,memoizedProps:{args:De}})}return Xe.__r3f.attach===void 0&&(Xe instanceof X.BufferGeometry?Xe.__r3f.attach="geometry":Xe instanceof X.Material&&(Xe.__r3f.attach="material")),Ke!=="inject"&&Yr(Xe,gt),Xe}function Ye(_e,De){let ot=!1;if(De){var gt,Pt;(gt=De.__r3f)!=null&&gt.attach?yr(_e,De,De.__r3f.attach):De.isObject3D&&_e.isObject3D&&(_e.add(De),ot=!0),ot||(Pt=_e.__r3f)==null||Pt.objects.push(De),De.__r3f||Nn(De,{}),De.__r3f.parent=_e,sn(De),Bn(De)}}function He(_e,De,ot){let gt=!1;if(De){var Pt,Gn;if((Pt=De.__r3f)!=null&&Pt.attach)yr(_e,De,De.__r3f.attach);else if(De.isObject3D&&_e.isObject3D){De.parent=_e,De.dispatchEvent({type:"added"});const dn=_e.children.filter(Xe=>Xe!==De),Ke=dn.indexOf(ot);_e.children=[...dn.slice(0,Ke),De,...dn.slice(Ke)],gt=!0}gt||(Gn=_e.__r3f)==null||Gn.objects.push(De),De.__r3f||Nn(De,{}),De.__r3f.parent=_e,sn(De),Bn(De)}}function ft(_e,De,ot=!1){_e&&[..._e].forEach(gt=>Dn(De,gt,ot))}function Dn(_e,De,ot){if(De){var gt,Pt,Gn;if(De.__r3f&&(De.__r3f.parent=null),(gt=_e.__r3f)!=null&&gt.objects&&(_e.__r3f.objects=_e.__r3f.objects.filter(Un=>Un!==De)),(Pt=De.__r3f)!=null&&Pt.attach)zr(_e,De,De.__r3f.attach);else if(De.isObject3D&&_e.isObject3D){var dn;_e.remove(De),(dn=De.__r3f)!=null&&dn.root&&qr(De.__r3f.root,De)}const Xe=(Gn=De.__r3f)==null?void 0:Gn.primitive,Zt=!Xe&&(ot===void 0?De.dispose!==null:ot);if(!Xe){var Ke;ft((Ke=De.__r3f)==null?void 0:Ke.objects,De,Zt),ft(De.children,De,Zt)}delete De.__r3f,Zt&&De.dispose&&De.type!=="Scene"&&(0,ze.unstable_scheduleCallback)(ze.unstable_IdlePriority,()=>{try{De.dispose()}catch(Un){}}),Bn(_e)}}function xn(_e,De,ot,gt){var Pt;const Gn=(Pt=_e.__r3f)==null?void 0:Pt.parent;if(!Gn)return;const dn=le(De,ot,_e.__r3f.root);if(_e.children){for(const Ke of _e.children)Ke.__r3f&&Ye(dn,Ke);_e.children=_e.children.filter(Ke=>!Ke.__r3f)}_e.__r3f.objects.forEach(Ke=>Ye(dn,Ke)),_e.__r3f.objects=[],_e.__r3f.autoRemovedBeforeAppend||Dn(Gn,_e),dn.parent&&(dn.__r3f.autoRemovedBeforeAppend=!0),Ye(Gn,dn),dn.raycast&&dn.__r3f.eventCount&&dn.__r3f.root.getState().internal.interaction.push(dn),[gt,gt.alternate].forEach(Ke=>{Ke!==null&&(Ke.stateNode=dn,Ke.ref&&(typeof Ke.ref=="function"?Ke.ref(dn):Ke.ref.current=dn))})}const et=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:ve()({createInstance:le,removeChild:Dn,appendChild:Ye,appendInitialChild:Ye,insertBefore:He,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(_e,De)=>{if(!De)return;const ot=_e.getState().scene;ot.__r3f&&(ot.__r3f.root=_e,Ye(ot,De))},removeChildFromContainer:(_e,De)=>{De&&Dn(_e.getState().scene,De)},insertInContainerBefore:(_e,De,ot)=>{if(!De||!ot)return;const gt=_e.getState().scene;gt.__r3f&&He(gt,De,ot)},getRootHostContext:()=>null,getChildHostContext:_e=>_e,finalizeInitialChildren(_e){var De;return!!((De=_e==null?void 0:_e.__r3f)!=null?De:{}).handlers},prepareUpdate(_e,De,ot,gt){var Pt;if(((Pt=_e==null?void 0:_e.__r3f)!=null?Pt:{}).primitive&&gt.object&&gt.object!==_e)return[!0];{const dn=gt,{args:Xe=[],children:Zt}=dn,Un=qa(dn,["args","children"]),Ke=ot,{args:ir=[],children:Kn}=Ke,Gr=qa(Ke,["args","children"]);if(!Array.isArray(Xe))throw new Error("R3F: the args prop must be an array!");if(Xe.some((vi,li)=>vi!==ir[li]))return[!0];const Ar=Ur(_e,Un,Gr,!0);return Ar.changes.length?[!1,Ar]:null}},commitUpdate(_e,[De,ot],gt,Pt,Gn,dn){De?xn(_e,gt,Gn,dn):Yr(_e,ot)},commitMount(_e,De,ot,gt){var Pt;const Gn=(Pt=_e.__r3f)!=null?Pt:{};_e.raycast&&Gn.handlers&&Gn.eventCount&&_e.__r3f.root.getState().internal.interaction.push(_e)},getPublicInstance:_e=>_e,prepareForCommit:()=>null,preparePortalMount:_e=>Nn(_e.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(_e){var De;const{attach:ot,parent:gt}=(De=_e.__r3f)!=null?De:{};ot&&gt&&zr(gt,_e,ot),_e.isObject3D&&(_e.visible=!1),Bn(_e)},unhideInstance(_e,De){var ot;const{attach:gt,parent:Pt}=(ot=_e.__r3f)!=null?ot:{};gt&&Pt&&yr(Pt,_e,gt),(_e.isObject3D&&De.visible==null||De.visible)&&(_e.visible=!0),Bn(_e)},createTextInstance:et,hideTextInstance:et,unhideTextInstance:et,getCurrentEventPriority:()=>Z?Z():te.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance!="undefined"&&Oe.fun(performance.now)?performance.now:Oe.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Oe.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Oe.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Yr}}var Yn,vn;const pn=k=>"colorSpace"in k||"outputColorSpace"in k,dt=()=>{var k;return(k=tr.ColorManagement)!=null?k:null},hr=k=>k&&k.isOrthographicCamera,gr=k=>k&&k.hasOwnProperty("current"),ke=typeof window!="undefined"&&((Yn=window.document)!=null&&Yn.createElement||((vn=window.navigator)==null?void 0:vn.product)==="ReactNative")?ce.useLayoutEffect:ce.useEffect;function Kt(k){const Z=ce.useRef(k);return ke(()=>void(Z.current=k),[k]),Z}function Lt({set:k}){return ke(()=>(k(new Promise(()=>null)),()=>k(!1)),[k]),null}class Qe extends ce.Component{constructor(...Z){super(...Z),this.state={error:!1}}componentDidCatch(Z){this.props.set(Z)}render(){return this.state.error?null:this.props.children}}Qe.getDerivedStateFromError=()=>({error:!0});const Se="__default",we=new Map,Pe=k=>k&&!!k.memoized&&!!k.changes;function Ve(k){var Z;const le=typeof window!="undefined"?(Z=window.devicePixelRatio)!=null?Z:2:1;return Array.isArray(k)?Math.min(Math.max(k[0],le),k[1]):k}const Ne=k=>{var Z;return(Z=k.__r3f)==null?void 0:Z.root.getState()},Oe={obj:k=>k===Object(k)&&!Oe.arr(k)&&typeof k!="function",fun:k=>typeof k=="function",str:k=>typeof k=="string",num:k=>typeof k=="number",boo:k=>typeof k=="boolean",und:k=>k===void 0,arr:k=>Array.isArray(k),equ(k,Z,{arrays:le="shallow",objects:Ye="reference",strict:He=!0}={}){if(typeof k!=typeof Z||!!k!=!!Z)return!1;if(Oe.str(k)||Oe.num(k))return k===Z;const ft=Oe.obj(k);if(ft&&Ye==="reference")return k===Z;const Dn=Oe.arr(k);if(Dn&&le==="reference")return k===Z;if((Dn||ft)&&k===Z)return!0;let xn;for(xn in k)if(!(xn in Z))return!1;if(ft&&le==="shallow"&&Ye==="shallow"){for(xn in He?Z:k)if(!Oe.equ(k[xn],Z[xn],{strict:He,objects:"reference"}))return!1}else for(xn in He?Z:k)if(k[xn]!==Z[xn])return!1;if(Oe.und(xn)){if(Dn&&k.length===0&&Z.length===0||ft&&Object.keys(k).length===0&&Object.keys(Z).length===0)return!0;if(k!==Z)return!1}return!0}};function wt(k){const Z={nodes:{},materials:{}};return k&&k.traverse(le=>{le.name&&(Z.nodes[le.name]=le),le.material&&!Z.materials[le.material.name]&&(Z.materials[le.material.name]=le.material)}),Z}function ct(k){k.dispose&&k.type!=="Scene"&&k.dispose();for(const Z in k)Z.dispose==null||Z.dispose(),delete k[Z]}function Nn(k,Z){const le=k;return le.__r3f=Rt({type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null},Z),k}function ur(k,Z){let le=k;if(Z.includes("-")){const Ye=Z.split("-"),He=Ye.pop();return le=Ye.reduce((ft,Dn)=>ft[Dn],k),{target:le,key:He}}else return{target:le,key:Z}}const rr=/-\d+$/;function yr(k,Z,le){if(Oe.str(le)){if(rr.test(le)){const ft=le.replace(rr,""),{target:Dn,key:xn}=ur(k,ft);Array.isArray(Dn[xn])||(Dn[xn]=[])}const{target:Ye,key:He}=ur(k,le);Z.__r3f.previousAttach=Ye[He],Ye[He]=Z}else Z.__r3f.previousAttach=le(k,Z)}function zr(k,Z,le){var Ye,He;if(Oe.str(le)){const{target:ft,key:Dn}=ur(k,le),xn=Z.__r3f.previousAttach;xn===void 0?delete ft[Dn]:ft[Dn]=xn}else(Ye=Z.__r3f)==null||Ye.previousAttach==null||Ye.previousAttach(k,Z);(He=Z.__r3f)==null||delete He.previousAttach}function Ur(k,_e,ot={},nn=!1){var De=_e,{children:Z,key:le,ref:Ye}=De,He=qa(De,["children","key","ref"]);var gt=ot,{children:ft,key:Dn,ref:xn}=gt,et=qa(gt,["children","key","ref"]);var Pt;const Gn=(Pt=k==null?void 0:k.__r3f)!=null?Pt:{},dn=Object.entries(He),Ke=[];if(nn){const Zt=Object.keys(et);for(let Un=0;Un<Zt.length;Un++)He.hasOwnProperty(Zt[Un])||dn.unshift([Zt[Un],Se+"remove"])}dn.forEach(([Zt,Un])=>{var ir;if((ir=k.__r3f)!=null&&ir.primitive&&Zt==="object"||Oe.equ(Un,et[Zt]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(Zt))return Ke.push([Zt,Un,!0,[]]);let Kn=[];Zt.includes("-")&&(Kn=Zt.split("-")),Ke.push([Zt,Un,!1,Kn]);for(const Gr in He){const Ar=He[Gr];Gr.startsWith(`${Zt}-`)&&Ke.push([Gr,Ar,!1,Gr.split("-")])}});const Xe=Rt({},He);return Gn.memoizedProps&&Gn.memoizedProps.args&&(Xe.args=Gn.memoizedProps.args),Gn.memoizedProps&&Gn.memoizedProps.attach&&(Xe.attach=Gn.memoizedProps.attach),{memoized:Xe,changes:Ke}}const Lr=typeof Ir!="undefined"&&!1;function Yr(k,Z){var le,Ye,He;const ft=(le=k.__r3f)!=null?le:{},Dn=ft.root,xn=(Ye=Dn==null||Dn.getState==null?void 0:Dn.getState())!=null?Ye:{},{memoized:et,changes:nn}=Pe(Z)?Z:Ur(k,Z),_e=ft.eventCount;k.__r3f&&(k.__r3f.memoizedProps=et);for(let ot=0;ot<nn.length;ot++){let[gt,Pt,Gn,dn]=nn[ot];if(pn(k)){const Un="srgb",ir="srgb-linear";gt==="encoding"?(gt="colorSpace",Pt=Pt===3001?Un:ir):gt==="outputEncoding"&&(gt="outputColorSpace",Pt=Pt===3001?Un:ir)}let Ke=k,Xe=Ke[gt];if(dn.length&&(Xe=dn.reduce((Zt,Un)=>Zt[Un],k),!(Xe&&Xe.set))){const[Zt,...Un]=dn.reverse();Ke=Un.reverse().reduce((ir,Kn)=>ir[Kn],k),gt=Zt}if(Pt===Se+"remove")if(Ke.constructor){let Zt=we.get(Ke.constructor);Zt||(Zt=new Ke.constructor,we.set(Ke.constructor,Zt)),Pt=Zt[gt]}else Pt=0;if(Gn)Pt?ft.handlers[gt]=Pt:delete ft.handlers[gt],ft.eventCount=Object.keys(ft.handlers).length;else if(Xe&&Xe.set&&(Xe.copy||Xe instanceof X.Layers)){if(Array.isArray(Pt))Xe.fromArray?Xe.fromArray(Pt):Xe.set(...Pt);else if(Xe.copy&&Pt&&Pt.constructor&&(Lr?Xe.constructor.name===Pt.constructor.name:Xe.constructor===Pt.constructor))Xe.copy(Pt);else if(Pt!==void 0){const Zt=Xe instanceof X.Color;!Zt&&Xe.setScalar?Xe.setScalar(Pt):Xe instanceof X.Layers&&Pt instanceof X.Layers?Xe.mask=Pt.mask:Xe.set(Pt),!dt()&&!xn.linear&&Zt&&Xe.convertSRGBToLinear()}}else if(Ke[gt]=Pt,Ke[gt]instanceof X.Texture&&Ke[gt].format===X.RGBAFormat&&Ke[gt].type===X.UnsignedByteType){const Zt=Ke[gt];pn(Zt)&&pn(xn.gl)?Zt.colorSpace=xn.gl.outputColorSpace:Zt.encoding=xn.gl.outputEncoding}Bn(k)}if(ft.parent&&xn.internal&&k.raycast&&_e!==ft.eventCount){const ot=xn.internal.interaction.indexOf(k);ot>-1&&xn.internal.interaction.splice(ot,1),ft.eventCount&&xn.internal.interaction.push(k)}return!(nn.length===1&&nn[0][0]==="onUpdate")&&nn.length&&(He=k.__r3f)!=null&&He.parent&&sn(k),k}function Bn(k){var Z,le;const Ye=(Z=k.__r3f)==null||(le=Z.root)==null||le.getState==null?void 0:le.getState();Ye&&Ye.internal.frames===0&&Ye.invalidate()}function sn(k){k.onUpdate==null||k.onUpdate(k)}function Tn(k,Z){k.manual||(hr(k)?(k.left=Z.width/-2,k.right=Z.width/2,k.top=Z.height/2,k.bottom=Z.height/-2):k.aspect=Z.width/Z.height,k.updateProjectionMatrix(),k.updateMatrixWorld())}function _r(k){return(k.eventObject||k.object).uuid+"/"+k.index+k.instanceId}function ai(){var k;const Z=typeof self!="undefined"&&self||typeof window!="undefined"&&window;if(!Z)return te.DefaultEventPriority;switch((k=Z.event)==null?void 0:k.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return te.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return te.ContinuousEventPriority;default:return te.DefaultEventPriority}}function Tr(k,Z,le,Ye){const He=le.get(Z);He&&(le.delete(Z),le.size===0&&(k.delete(Ye),He.target.releasePointerCapture(Ye)))}function qr(k,Z){const{internal:le}=k.getState();le.interaction=le.interaction.filter(Ye=>Ye!==Z),le.initialHits=le.initialHits.filter(Ye=>Ye!==Z),le.hovered.forEach((Ye,He)=>{(Ye.eventObject===Z||Ye.object===Z)&&le.hovered.delete(He)}),le.capturedMap.forEach((Ye,He)=>{Tr(le.capturedMap,Z,Ye,He)})}function Si(k){function Z(et){const{internal:nn}=k.getState(),_e=et.offsetX-nn.initialClick[0],De=et.offsetY-nn.initialClick[1];return Math.round(Math.sqrt(_e*_e+De*De))}function le(et){return et.filter(nn=>["Move","Over","Enter","Out","Leave"].some(_e=>{var De;return(De=nn.__r3f)==null?void 0:De.handlers["onPointer"+_e]}))}function Ye(et,nn){const _e=k.getState(),De=new Set,ot=[],gt=nn?nn(_e.internal.interaction):_e.internal.interaction;for(let Ke=0;Ke<gt.length;Ke++){const Xe=Ne(gt[Ke]);Xe&&(Xe.raycaster.camera=void 0)}_e.previousRoot||_e.events.compute==null||_e.events.compute(et,_e);function Pt(Ke){const Xe=Ne(Ke);if(!Xe||!Xe.events.enabled||Xe.raycaster.camera===null)return[];if(Xe.raycaster.camera===void 0){var Zt;Xe.events.compute==null||Xe.events.compute(et,Xe,(Zt=Xe.previousRoot)==null?void 0:Zt.getState()),Xe.raycaster.camera===void 0&&(Xe.raycaster.camera=null)}return Xe.raycaster.camera?Xe.raycaster.intersectObject(Ke,!0):[]}let Gn=gt.flatMap(Pt).sort((Ke,Xe)=>{const Zt=Ne(Ke.object),Un=Ne(Xe.object);return!Zt||!Un?Ke.distance-Xe.distance:Un.events.priority-Zt.events.priority||Ke.distance-Xe.distance}).filter(Ke=>{const Xe=_r(Ke);return De.has(Xe)?!1:(De.add(Xe),!0)});_e.events.filter&&(Gn=_e.events.filter(Gn,_e));for(const Ke of Gn){let Xe=Ke.object;for(;Xe;){var dn;(dn=Xe.__r3f)!=null&&dn.eventCount&&ot.push(si(Rt({},Ke),{eventObject:Xe})),Xe=Xe.parent}}if("pointerId"in et&&_e.internal.capturedMap.has(et.pointerId))for(let Ke of _e.internal.capturedMap.get(et.pointerId).values())De.has(_r(Ke.intersection))||ot.push(Ke.intersection);return ot}function He(et,nn,_e,De){const ot=k.getState();if(et.length){const gt={stopped:!1};for(const Pt of et){const Gn=Ne(Pt.object)||ot,{raycaster:dn,pointer:Ke,camera:Xe,internal:Zt}=Gn,Un=new X.Vector3(Ke.x,Ke.y,0).unproject(Xe),ir=li=>{var sr,Bi;return(sr=(Bi=Zt.capturedMap.get(li))==null?void 0:Bi.has(Pt.eventObject))!=null?sr:!1},Kn=li=>{const sr={intersection:Pt,target:nn.target};Zt.capturedMap.has(li)?Zt.capturedMap.get(li).set(Pt.eventObject,sr):Zt.capturedMap.set(li,new Map([[Pt.eventObject,sr]])),nn.target.setPointerCapture(li)},Gr=li=>{const sr=Zt.capturedMap.get(li);sr&&Tr(Zt.capturedMap,Pt.eventObject,sr,li)};let Ar={};for(let li in nn){let sr=nn[li];typeof sr!="function"&&(Ar[li]=sr)}let vi=si(Rt(Rt({},Pt),Ar),{pointer:Ke,intersections:et,stopped:gt.stopped,delta:_e,unprojectedPoint:Un,ray:dn.ray,camera:Xe,stopPropagation(){const li="pointerId"in nn&&Zt.capturedMap.get(nn.pointerId);if((!li||li.has(Pt.eventObject))&&(vi.stopped=gt.stopped=!0,Zt.hovered.size&&Array.from(Zt.hovered.values()).find(sr=>sr.eventObject===Pt.eventObject))){const sr=et.slice(0,et.indexOf(Pt));ft([...sr,Pt])}},target:{hasPointerCapture:ir,setPointerCapture:Kn,releasePointerCapture:Gr},currentTarget:{hasPointerCapture:ir,setPointerCapture:Kn,releasePointerCapture:Gr},nativeEvent:nn});if(De(vi),gt.stopped===!0)break}}return et}function ft(et){const{internal:nn}=k.getState();for(const _e of nn.hovered.values())if(!et.length||!et.find(De=>De.object===_e.object&&De.index===_e.index&&De.instanceId===_e.instanceId)){const ot=_e.eventObject.__r3f,gt=ot==null?void 0:ot.handlers;if(nn.hovered.delete(_r(_e)),ot!=null&&ot.eventCount){const Pt=si(Rt({},_e),{intersections:et});gt.onPointerOut==null||gt.onPointerOut(Pt),gt.onPointerLeave==null||gt.onPointerLeave(Pt)}}}function Dn(et,nn){for(let _e=0;_e<nn.length;_e++){const De=nn[_e].__r3f;De==null||De.handlers.onPointerMissed==null||De.handlers.onPointerMissed(et)}}function xn(et){switch(et){case"onPointerLeave":case"onPointerCancel":return()=>ft([]);case"onLostPointerCapture":return nn=>{const{internal:_e}=k.getState();"pointerId"in nn&&_e.capturedMap.has(nn.pointerId)&&requestAnimationFrame(()=>{_e.capturedMap.has(nn.pointerId)&&(_e.capturedMap.delete(nn.pointerId),ft([]))})}}return function(_e){const{onPointerMissed:De,internal:ot}=k.getState();ot.lastEvent.current=_e;const gt=et==="onPointerMove",Pt=et==="onClick"||et==="onContextMenu"||et==="onDoubleClick",dn=Ye(_e,gt?le:void 0),Ke=Pt?Z(_e):0;et==="onPointerDown"&&(ot.initialClick=[_e.offsetX,_e.offsetY],ot.initialHits=dn.map(Zt=>Zt.eventObject)),Pt&&!dn.length&&Ke<=2&&(Dn(_e,ot.interaction),De&&De(_e)),gt&&ft(dn);function Xe(Zt){const Un=Zt.eventObject,ir=Un.__r3f,Kn=ir==null?void 0:ir.handlers;if(ir!=null&&ir.eventCount)if(gt){if(Kn.onPointerOver||Kn.onPointerEnter||Kn.onPointerOut||Kn.onPointerLeave){const Gr=_r(Zt),Ar=ot.hovered.get(Gr);Ar?Ar.stopped&&Zt.stopPropagation():(ot.hovered.set(Gr,Zt),Kn.onPointerOver==null||Kn.onPointerOver(Zt),Kn.onPointerEnter==null||Kn.onPointerEnter(Zt))}Kn.onPointerMove==null||Kn.onPointerMove(Zt)}else{const Gr=Kn[et];Gr?(!Pt||ot.initialHits.includes(Un))&&(Dn(_e,ot.interaction.filter(Ar=>!ot.initialHits.includes(Ar))),Gr(Zt)):Pt&&ot.initialHits.includes(Un)&&Dn(_e,ot.interaction.filter(Ar=>!ot.initialHits.includes(Ar)))}}He(dn,_e,Ke,Xe)}}return{handlePointer:xn}}const Ei=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],zi=k=>!!(k!=null&&k.render),Ss=ce.createContext(null),ei=(k,Z)=>{const le=de((xn,et)=>{const nn=new X.Vector3,_e=new X.Vector3,De=new X.Vector3;function ot(Ke=et().camera,Xe=_e,Zt=et().size){const{width:Un,height:ir,top:Kn,left:Gr}=Zt,Ar=Un/ir;Xe instanceof X.Vector3?De.copy(Xe):De.set(...Xe);const vi=Ke.getWorldPosition(nn).distanceTo(De);if(hr(Ke))return{width:Un/Ke.zoom,height:ir/Ke.zoom,top:Kn,left:Gr,factor:1,distance:vi,aspect:Ar};{const li=Ke.fov*Math.PI/180,sr=2*Math.tan(li/2)*vi,Bi=sr*(Un/ir);return{width:Bi,height:sr,top:Kn,left:Gr,factor:Un/Bi,distance:vi,aspect:Ar}}}let gt;const Pt=Ke=>xn(Xe=>({performance:si(Rt({},Xe.performance),{current:Ke})})),Gn=new X.Vector2;return{set:xn,get:et,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(Ke=1)=>k(et(),Ke),advance:(Ke,Xe)=>Z(Ke,Xe,et()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new X.Clock,pointer:Gn,mouse:Gn,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const Ke=et();gt&&clearTimeout(gt),Ke.performance.current!==Ke.performance.min&&Pt(Ke.performance.min),gt=setTimeout(()=>Pt(et().performance.max),Ke.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:ot},setEvents:Ke=>xn(Xe=>si(Rt({},Xe),{events:Rt(Rt({},Xe.events),Ke)})),setSize:(Ke,Xe,Zt,Un,ir)=>{const Kn=et().camera,Gr={width:Ke,height:Xe,top:Un||0,left:ir||0,updateStyle:Zt};xn(Ar=>({size:Gr,viewport:Rt(Rt({},Ar.viewport),ot(Kn,_e,Gr))}))},setDpr:Ke=>xn(Xe=>{const Zt=Ve(Ke);return{viewport:si(Rt({},Xe.viewport),{dpr:Zt,initialDpr:Xe.viewport.initialDpr||Zt})}}),setFrameloop:(Ke="always")=>{const Xe=et().clock;Xe.stop(),Xe.elapsedTime=0,Ke!=="never"&&(Xe.start(),Xe.elapsedTime=0),xn(()=>({frameloop:Ke}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:ce.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(Ke,Xe,Zt)=>{const Un=et().internal;return Un.priority=Un.priority+(Xe>0?1:0),Un.subscribers.push({ref:Ke,priority:Xe,store:Zt}),Un.subscribers=Un.subscribers.sort((ir,Kn)=>ir.priority-Kn.priority),()=>{const ir=et().internal;ir!=null&&ir.subscribers&&(ir.priority=ir.priority-(Xe>0?1:0),ir.subscribers=ir.subscribers.filter(Kn=>Kn.ref!==Ke))}}}}}),Ye=le.getState();let He=Ye.size,ft=Ye.viewport.dpr,Dn=Ye.camera;return le.subscribe(()=>{const{camera:xn,size:et,viewport:nn,gl:_e,set:De}=le.getState();if(et.width!==He.width||et.height!==He.height||nn.dpr!==ft){var ot;He=et,ft=nn.dpr,Tn(xn,et),_e.setPixelRatio(nn.dpr);const gt=(ot=et.updateStyle)!=null?ot:typeof HTMLCanvasElement!="undefined"&&_e.domElement instanceof HTMLCanvasElement;_e.setSize(et.width,et.height,gt)}xn!==Dn&&(Dn=xn,De(gt=>({viewport:Rt(Rt({},gt.viewport),gt.viewport.getCurrentViewport(xn))})))}),le.subscribe(xn=>k(xn)),le};function ii(k,Z){const le={callback:k};return Z.add(le),()=>void Z.delete(le)}let ui,ls=new Set,Hr=new Set,Xi=new Set;const Wr=k=>ii(k,ls),Ln=k=>ii(k,Hr),Ts=k=>ii(k,Xi);function Q(k,Z){if(k.size)for(const{callback:le}of k.values())le(Z)}function ye(k,Z){switch(k){case"before":return Q(ls,Z);case"after":return Q(Hr,Z);case"tail":return Q(Xi,Z)}}let Ce,ge;function vt(k,Z,le){let Ye=Z.clock.getDelta();for(Z.frameloop==="never"&&typeof k=="number"&&(Ye=k-Z.clock.elapsedTime,Z.clock.oldTime=Z.clock.elapsedTime,Z.clock.elapsedTime=k),Ce=Z.internal.subscribers,ui=0;ui<Ce.length;ui++)ge=Ce[ui],ge.ref.current(ge.store.getState(),Ye,le);return!Z.internal.priority&&Z.gl.render&&Z.gl.render(Z.scene,Z.camera),Z.internal.frames=Math.max(0,Z.internal.frames-1),Z.frameloop==="always"?1:Z.internal.frames}function Ht(k){let Z=!1,le,Ye,He;function ft(et){Ye=requestAnimationFrame(ft),Z=!0,le=0,ye("before",et);for(const _e of k.values()){var nn;He=_e.store.getState(),He.internal.active&&(He.frameloop==="always"||He.internal.frames>0)&&!((nn=He.gl.xr)!=null&&nn.isPresenting)&&(le+=vt(et,He))}if(ye("after",et),le===0)return ye("tail",et),Z=!1,cancelAnimationFrame(Ye)}function Dn(et,nn=1){var _e;if(!et)return k.forEach(De=>Dn(De.store.getState()),nn);(_e=et.gl.xr)!=null&&_e.isPresenting||!et.internal.active||et.frameloop==="never"||(et.internal.frames=Math.min(60,et.internal.frames+nn),Z||(Z=!0,requestAnimationFrame(ft)))}function xn(et,nn=!0,_e,De){if(nn&&ye("before",et),_e)vt(et,_e,De);else for(const ot of k.values())vt(et,ot.store.getState());nn&&ye("after",et)}return{loop:ft,invalidate:Dn,advance:xn}}function Jt(k){const Z=React.useRef(null);return ke(()=>void(Z.current=k.current.__r3f),[k]),Z}function _t(){const k=ce.useContext(Ss);if(!k)throw new Error("R3F: Hooks can only be used within the Canvas component!");return k}function ht(k=le=>le,Z){return _t()(k,Z)}function Ge(k,Z=0){const le=_t(),Ye=le.getState().internal.subscribe,He=Kt(k);return ke(()=>Ye(He,Z,le),[Z,Ye,le]),null}function st(k){return React.useMemo(()=>wt(k),[k])}const Ft=new WeakMap;function kn(k,Z){return function(le,...Ye){let He=Ft.get(le);return He||(He=new le,Ft.set(le,He)),k&&k(He),Promise.all(Ye.map(ft=>new Promise((Dn,xn)=>He.load(ft,et=>{et.scene&&Object.assign(et,wt(et.scene)),Dn(et)},Z,et=>xn(new Error(`Could not load ${ft}: ${et==null?void 0:et.message}`)))))).finally(()=>He.dispose==null?void 0:He.dispose())}}function On(k,Z,le,Ye){const He=Array.isArray(Z)?Z:[Z],ft=en(kn(le,Ye),[k,...He],{equal:Oe.equ});return Array.isArray(Z)?ft:ft[0]}On.preload=function(k,Z,le){const Ye=Array.isArray(Z)?Z:[Z];return Rn(kn(le),[k,...Ye])},On.clear=function(k,Z){const le=Array.isArray(Z)?Z:[Z];return ee([k,...le])};const $n=new Map,{invalidate:Mr,advance:ti}=Ht($n),{reconciler:xe,applyProps:At}=Zn($n,ai),Pn={objects:"shallow",strict:!1},vr=(k,Z)=>{const le=typeof k=="function"?k(Z):k;return zi(le)?le:new X.WebGLRenderer(Rt({powerPreference:"high-performance",canvas:Z,antialias:!0,alpha:!0},k))};function ni(k,Z){const le=typeof HTMLCanvasElement!="undefined"&&k instanceof HTMLCanvasElement;if(Z){const{width:Ye,height:He,top:ft,left:Dn,updateStyle:xn=le}=Z;return{width:Ye,height:He,top:ft,left:Dn,updateStyle:xn}}else if(typeof HTMLCanvasElement!="undefined"&&k instanceof HTMLCanvasElement&&k.parentElement){const{width:Ye,height:He,top:ft,left:Dn}=k.parentElement.getBoundingClientRect();return{width:Ye,height:He,top:ft,left:Dn,updateStyle:le}}else if(typeof OffscreenCanvas!="undefined"&&k instanceof OffscreenCanvas)return{width:k.width,height:k.height,top:0,left:0,updateStyle:le};return{width:0,height:0,top:0,left:0}}function Zi(k){const Z=$n.get(k),le=Z==null?void 0:Z.fiber,Ye=Z==null?void 0:Z.store;Z&&console.warn("R3F.createRoot should only be called once!");const He=typeof reportError=="function"?reportError:console.error,ft=Ye||ei(Mr,ti),Dn=le||xe.createContainer(ft,te.ConcurrentRoot,null,!1,null,"",He,null);Z||$n.set(k,{fiber:Dn,store:ft});let xn,et=!1,nn;return{configure(_e={}){let{gl:De,size:ot,scene:gt,events:Pt,onCreated:Gn,shadows:dn=!1,linear:Ke=!1,flat:Xe=!1,legacy:Zt=!1,orthographic:Un=!1,frameloop:ir="always",dpr:Kn=[1,2],performance:Gr,raycaster:Ar,camera:vi,onPointerMissed:li}=_e,sr=ft.getState(),Bi=sr.gl;sr.gl||sr.set({gl:Bi=vr(De,k)});let ys=sr.raycaster;ys||sr.set({raycaster:ys=new X.Raycaster});const to=Ar||{},{params:Ms}=to,Ja=qa(to,["params"]);if(Oe.equ(Ja,ys,Pn)||At(ys,Rt({},Ja)),Oe.equ(Ms,ys.params,Pn)||At(ys,{params:Rt(Rt({},ys.params),Ms)}),!sr.camera||sr.camera===nn&&!Oe.equ(nn,vi,Pn)){nn=vi;const As=vi instanceof X.Camera,Cs=As?vi:Un?new X.OrthographicCamera(0,0,0,0,.1,1e3):new X.PerspectiveCamera(75,0,.1,1e3);As||(Cs.position.z=5,vi&&At(Cs,vi),!sr.camera&&!(vi!=null&&vi.rotation)&&Cs.lookAt(0,0,0)),sr.set({camera:Cs}),ys.camera=Cs}if(!sr.scene){let As;gt instanceof X.Scene?As=gt:(As=new X.Scene,gt&&At(As,gt)),sr.set({scene:Nn(As)})}if(!sr.xr){var ya;const As=(Ni,Vs)=>{const To=ft.getState();To.frameloop!=="never"&&ti(Ni,!0,To,Vs)},Cs=()=>{const Ni=ft.getState();Ni.gl.xr.enabled=Ni.gl.xr.isPresenting,Ni.gl.xr.setAnimationLoop(Ni.gl.xr.isPresenting?As:null),Ni.gl.xr.isPresenting||Mr(Ni)},no={connect(){const Ni=ft.getState().gl;Ni.xr.addEventListener("sessionstart",Cs),Ni.xr.addEventListener("sessionend",Cs)},disconnect(){const Ni=ft.getState().gl;Ni.xr.removeEventListener("sessionstart",Cs),Ni.xr.removeEventListener("sessionend",Cs)}};typeof((ya=Bi.xr)==null?void 0:ya.addEventListener)=="function"&&no.connect(),sr.set({xr:no})}if(Bi.shadowMap){const As=Bi.shadowMap.enabled,Cs=Bi.shadowMap.type;if(Bi.shadowMap.enabled=!!dn,Oe.boo(dn))Bi.shadowMap.type=X.PCFSoftShadowMap;else if(Oe.str(dn)){var Ko;const no={basic:X.BasicShadowMap,percentage:X.PCFShadowMap,soft:X.PCFSoftShadowMap,variance:X.VSMShadowMap};Bi.shadowMap.type=(Ko=no[dn])!=null?Ko:X.PCFSoftShadowMap}else Oe.obj(dn)&&Object.assign(Bi.shadowMap,dn);(As!==Bi.shadowMap.enabled||Cs!==Bi.shadowMap.type)&&(Bi.shadowMap.needsUpdate=!0)}const Xs=dt();Xs&&("enabled"in Xs?Xs.enabled=!Zt:"legacyMode"in Xs&&(Xs.legacyMode=Zt)),At(Bi,{outputEncoding:Ke?3e3:3001,toneMapping:Xe?X.NoToneMapping:X.ACESFilmicToneMapping}),sr.legacy!==Zt&&sr.set(()=>({legacy:Zt})),sr.linear!==Ke&&sr.set(()=>({linear:Ke})),sr.flat!==Xe&&sr.set(()=>({flat:Xe})),De&&!Oe.fun(De)&&!zi(De)&&!Oe.equ(De,Bi,Pn)&&At(Bi,De),Pt&&!sr.events.handlers&&sr.set({events:Pt(ft)});const ks=ni(k,ot);return Oe.equ(ks,sr.size,Pn)||sr.setSize(ks.width,ks.height,ks.updateStyle,ks.top,ks.left),Kn&&sr.viewport.dpr!==Ve(Kn)&&sr.setDpr(Kn),sr.frameloop!==ir&&sr.setFrameloop(ir),sr.onPointerMissed||sr.set({onPointerMissed:li}),Gr&&!Oe.equ(Gr,sr.performance,Pn)&&sr.set(As=>({performance:Rt(Rt({},As.performance),Gr)})),xn=Gn,et=!0,this},render(_e){return et||this.configure(),xe.updateContainer(ce.createElement(va,{store:ft,children:_e,onCreated:xn,rootElement:k}),Dn,null,()=>{}),ft},unmount(){js(k)}}}function Ns(k,Z,le){console.warn("R3F.render is no longer supported in React 18. Use createRoot instead!");const Ye=Zi(Z);return Ye.configure(le),Ye.render(k)}function va({store:k,children:Z,onCreated:le,rootElement:Ye}){return ke(()=>{const He=k.getState();He.set(ft=>({internal:si(Rt({},ft.internal),{active:!0})})),le&&le(He),k.getState().events.connected||He.events.connect==null||He.events.connect(Ye)},[]),ce.createElement(Ss.Provider,{value:k},Z)}function js(k,Z){const le=$n.get(k),Ye=le==null?void 0:le.fiber;if(Ye){const He=le==null?void 0:le.store.getState();He&&(He.internal.active=!1),xe.updateContainer(null,Ye,null,()=>{He&&setTimeout(()=>{try{var ft,Dn,xn,et;He.events.disconnect==null||He.events.disconnect(),(ft=He.gl)==null||(Dn=ft.renderLists)==null||Dn.dispose==null||Dn.dispose(),(xn=He.gl)==null||xn.forceContextLoss==null||xn.forceContextLoss(),(et=He.gl)!=null&&et.xr&&He.xr.disconnect(),ct(He),$n.delete(k),Z&&Z(k)}catch(nn){}},500)})}}function os(k,Z,le){return ce.createElement(Ji,{key:Z.uuid,children:k,container:Z,state:le})}function Ji({state:k={},children:Z,container:le}){const De=k,{events:Ye,size:He}=De,ft=qa(De,["events","size"]),Dn=_t(),[xn]=ce.useState(()=>new X.Raycaster),[et]=ce.useState(()=>new X.Vector2),nn=ce.useCallback((ot,gt)=>{const Pt=Rt({},ot);Object.keys(ot).forEach(dn=>{(Ei.includes(dn)||ot[dn]!==gt[dn]&&gt[dn])&&delete Pt[dn]});let Gn;if(gt&&He){const dn=gt.camera;Gn=ot.viewport.getCurrentViewport(dn,new X.Vector3,He),dn!==ot.camera&&Tn(dn,He)}return Rt(si(Rt({},Pt),{scene:le,raycaster:xn,pointer:et,mouse:et,previousRoot:Dn,events:Rt(Rt(Rt({},ot.events),gt==null?void 0:gt.events),Ye),size:Rt(Rt({},ot.size),He),viewport:Rt(Rt({},ot.viewport),Gn)}),ft)},[k]),[_e]=ce.useState(()=>{const ot=Dn.getState();return de((Pt,Gn)=>si(Rt(si(Rt({},ot),{scene:le,raycaster:xn,pointer:et,mouse:et,previousRoot:Dn,events:Rt(Rt({},ot.events),Ye),size:Rt(Rt({},ot.size),He)}),ft),{set:Pt,get:Gn,setEvents:dn=>Pt(Ke=>si(Rt({},Ke),{events:Rt(Rt({},Ke.events),dn)}))}))});return ce.useEffect(()=>{const ot=Dn.subscribe(gt=>_e.setState(Pt=>nn(gt,Pt)));return()=>{ot(),_e.destroy()}},[]),ce.useEffect(()=>{_e.setState(ot=>nn(Dn.getState(),ot))},[nn]),ce.createElement(ce.Fragment,null,xe.createPortal(ce.createElement(Ss.Provider,{value:_e},Z),_e,null))}xe.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:ce.version});const It=ce.unstable_act},60463:function(an,St,se){"use strict";se.d(St,{Xz:function(){return Qe}});var X=se(15714),ce=se(87462),te=se(67294),Ue=se(99477),Ut=se(73460),fn=Object.defineProperty,de=Object.defineProperties,Xn=Object.getOwnPropertyDescriptors,ve=Object.getOwnPropertySymbols,ze=Object.prototype.hasOwnProperty,Wt=Object.prototype.propertyIsEnumerable,Ae=(Se,we,Pe)=>we in Se?fn(Se,we,{enumerable:!0,configurable:!0,writable:!0,value:Pe}):Se[we]=Pe,ut=(Se,we)=>{for(var Pe in we||(we={}))ze.call(we,Pe)&&Ae(Se,Pe,we[Pe]);if(ve)for(var Pe of ve(we))Wt.call(we,Pe)&&Ae(Se,Pe,we[Pe]);return Se},it=(Se,we)=>de(Se,Xn(we));function en(Se,we,Pe){if(!Se)return;if(Pe(Se)===!0)return Se;let Ve=we?Se.return:Se.child;for(;Ve;){const Ne=en(Ve,we,Pe);if(Ne)return Ne;Ve=we?null:Ve.sibling}}function Rn(Se){try{return Object.defineProperties(Se,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch(we){return Se}}const tn=Rn(te.createContext(null));class ee extends te.Component{render(){return te.createElement(tn.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:Ir,ReactCurrentDispatcher:dr}=te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function tr(){const Se=te.useContext(tn);if(Se===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const we=te.useId();return te.useMemo(()=>{for(const Ve of[Ir==null?void 0:Ir.current,Se,Se==null?void 0:Se.alternate]){if(!Ve)continue;const Ne=en(Ve,!1,Oe=>{let wt=Oe.memoizedState;for(;wt;){if(wt.memoizedState===we)return!0;wt=wt.next}});if(Ne)return Ne}},[Se,we])}function zn(){const Se=tr(),we=React.useMemo(()=>en(Se,!0,Pe=>{var Ve;return((Ve=Pe.stateNode)==null?void 0:Ve.containerInfo)!=null}),[Se]);return we==null?void 0:we.stateNode.containerInfo}function Zn(Se){const we=tr(),Pe=React.useRef();return React.useLayoutEffect(()=>{var Ve;Pe.current=(Ve=en(we,!1,Ne=>typeof Ne.type=="string"&&(Se===void 0||Ne.type===Se)))==null?void 0:Ve.stateNode},[we]),Pe}function Yn(Se){const we=tr(),Pe=React.useRef();return React.useLayoutEffect(()=>{var Ve;Pe.current=(Ve=en(we,!0,Ne=>typeof Ne.type=="string"&&(Se===void 0||Ne.type===Se)))==null?void 0:Ve.stateNode},[we]),Pe}function vn(){var Se,we;const Pe=tr(),[Ve]=te.useState(()=>new Map);Ve.clear();let Ne=Pe;for(;Ne;){const Oe=(Se=Ne.type)==null?void 0:Se._context;Oe&&Oe!==tn&&!Ve.has(Oe)&&Ve.set(Oe,(we=dr==null?void 0:dr.current)==null?void 0:we.readContext(Rn(Oe))),Ne=Ne.return}return Ve}function pn(){const Se=vn();return te.useMemo(()=>Array.from(Se.keys()).reduce((we,Pe)=>Ve=>te.createElement(we,null,te.createElement(Pe.Provider,it(ut({},Ve),{value:Se.get(Pe)}))),we=>te.createElement(ee,ut({},we))),[Se])}var dt=se(32576),hr=se(76525),gr=se(63840);const ke={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Kt(Se){const{handlePointer:we}=(0,X.c)(Se);return{priority:1,enabled:!0,compute(Pe,Ve,Ne){Ve.pointer.set(Pe.offsetX/Ve.size.width*2-1,-(Pe.offsetY/Ve.size.height)*2+1),Ve.raycaster.setFromCamera(Ve.pointer,Ve.camera)},connected:void 0,handlers:Object.keys(ke).reduce((Pe,Ve)=>si(Rt({},Pe),{[Ve]:we(Ve)}),{}),update:()=>{var Pe;const{events:Ve,internal:Ne}=Se.getState();(Pe=Ne.lastEvent)!=null&&Pe.current&&Ve.handlers&&Ve.handlers.onPointerMove(Ne.lastEvent.current)},connect:Pe=>{var Ve;const{set:Ne,events:Oe}=Se.getState();Oe.disconnect==null||Oe.disconnect(),Ne(wt=>({events:si(Rt({},wt.events),{connected:Pe})})),Object.entries((Ve=Oe.handlers)!=null?Ve:[]).forEach(([wt,ct])=>{const[Nn,ur]=ke[wt];Pe.addEventListener(Nn,ct,{passive:ur})})},disconnect:()=>{const{set:Pe,events:Ve}=Se.getState();if(Ve.connected){var Ne;Object.entries((Ne=Ve.handlers)!=null?Ne:[]).forEach(([Oe,wt])=>{if(Ve&&Ve.connected instanceof HTMLElement){const[ct]=ke[Oe];Ve.connected.removeEventListener(ct,wt)}}),Pe(Oe=>({events:si(Rt({},Oe.events),{connected:void 0})}))}}}}const Lt=te.forwardRef(function(Ei,Si){var zi=Ei,{children:we,fallback:Pe,resize:Ve,style:Ne,gl:Oe,events:wt=Kt,eventSource:ct,eventPrefix:Nn,shadows:ur,linear:rr,flat:yr,legacy:zr,orthographic:Ur,frameloop:Lr,dpr:Yr,performance:Bn,raycaster:sn,camera:Tn,scene:_r,onPointerMissed:ai,onCreated:Tr}=zi,qr=qa(zi,["children","fallback","resize","style","gl","events","eventSource","eventPrefix","shadows","linear","flat","legacy","orthographic","frameloop","dpr","performance","raycaster","camera","scene","onPointerMissed","onCreated"]);te.useMemo(()=>(0,X.e)(Ue),[]);const Ss=pn(),[ei,ii]=(0,Ut.Z)(Rt({scroll:!0,debounce:{scroll:50,resize:0}},Ve)),ui=te.useRef(null),ls=te.useRef(null);te.useImperativeHandle(Si,()=>ui.current);const Hr=(0,X.u)(ai),[Xi,Wr]=te.useState(!1),[Ln,Ts]=te.useState(!1);if(Xi)throw Xi;if(Ln)throw Ln;const Q=te.useRef(null);(0,X.a)(()=>{const Ce=ui.current;ii.width>0&&ii.height>0&&Ce&&(Q.current||(Q.current=(0,X.b)(Ce)),Q.current.configure({gl:Oe,events:wt,shadows:ur,linear:rr,flat:yr,legacy:zr,orthographic:Ur,frameloop:Lr,dpr:Yr,performance:Bn,raycaster:sn,camera:Tn,scene:_r,size:ii,onPointerMissed:(...ge)=>Hr.current==null?void 0:Hr.current(...ge),onCreated:ge=>{ge.events.connect==null||ge.events.connect(ct?(0,X.i)(ct)?ct.current:ct:ls.current),Nn&&ge.setEvents({compute:(vt,Ht)=>{const Jt=vt[Nn+"X"],_t=vt[Nn+"Y"];Ht.pointer.set(Jt/Ht.size.width*2-1,-(_t/Ht.size.height)*2+1),Ht.raycaster.setFromCamera(Ht.pointer,Ht.camera)}}),Tr==null||Tr(ge)}}),Q.current.render(te.createElement(Ss,null,te.createElement(X.E,{set:Ts},te.createElement(te.Suspense,{fallback:te.createElement(X.B,{set:Wr})},we)))))}),te.useEffect(()=>{const Ce=ui.current;if(Ce)return()=>(0,X.d)(Ce)},[]);const ye=ct?"none":"auto";return te.createElement("div",(0,ce.Z)({ref:ls,style:Rt({position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ye},Ne)},qr),te.createElement("div",{ref:ei,style:{width:"100%",height:"100%"}},te.createElement("canvas",{ref:ui,style:{display:"block"}},Pe)))}),Qe=te.forwardRef(function(we,Pe){return te.createElement(ee,null,te.createElement(Lt,(0,ce.Z)({},we,{ref:Pe})))})},52022:function(an,St,se){"use strict";se.d(St,{Z:function(){return ze}});var X=se(97582),ce=se(67294),te=se(22638),Ue=se(77598),Ut=se(92770);function fn(Wt){function Ae(ut,it){it===void 0&&(it={});var en,Rn=it.onError,tn=Rn===void 0?function(vn){console.error(vn)}:Rn;try{en=Wt()}catch(vn){tn(vn)}var ee=function(vn){return it!=null&&it.serializer?it==null?void 0:it.serializer(vn):JSON.stringify(vn)},Ir=function(vn){return it!=null&&it.deserializer?it==null?void 0:it.deserializer(vn):JSON.parse(vn)};function dr(){try{var vn=en==null?void 0:en.getItem(ut);if(vn)return Ir(vn)}catch(pn){tn(pn)}return(0,Ut.mf)(it==null?void 0:it.defaultValue)?it==null?void 0:it.defaultValue():it==null?void 0:it.defaultValue}var tr=(0,X.__read)((0,ce.useState)(function(){return dr()}),2),zn=tr[0],Zn=tr[1];(0,Ue.Z)(function(){Zn(dr())},[ut]);var Yn=function(vn){var pn=(0,Ut.mf)(vn)?vn(zn):vn;if(Zn(pn),(0,Ut.G7)(pn))en==null||en.removeItem(ut);else try{en==null||en.setItem(ut,ee(pn))}catch(dt){console.error(dt)}};return[zn,(0,te.Z)(Yn)]}return Ae}var de=!!(typeof window!="undefined"&&window.document&&window.document.createElement),Xn=de,ve=fn(function(){return Xn?localStorage:void 0}),ze=ve},22638:function(an,St,se){"use strict";var X=se(67294),ce=se(92770),te=se(31663);function Ue(Ut){te.Z&&((0,ce.mf)(Ut)||console.error("useMemoizedFn expected parameter is a function, got ".concat(typeof Ut)));var fn=(0,X.useRef)(Ut);fn.current=(0,X.useMemo)(function(){return Ut},[Ut]);var de=(0,X.useRef)();return de.current||(de.current=function(){for(var Xn=[],ve=0;ve<arguments.length;ve++)Xn[ve]=arguments[ve];return fn.current.apply(this,Xn)}),de.current}St.Z=Ue},77598:function(an,St,se){"use strict";se.d(St,{Z:function(){return Ue}});var X=se(67294),ce=function(Ut){return function(fn,de){var Xn=(0,X.useRef)(!1);Ut(function(){return function(){Xn.current=!1}},[]),Ut(function(){if(!Xn.current)Xn.current=!0;else return fn()},de)}},te=null,Ue=ce(X.useEffect)},92770:function(an,St,se){"use strict";se.d(St,{G7:function(){return fn},mf:function(){return ce}});var X=function(de){return de!==null&&typeof de=="object"},ce=function(de){return typeof de=="function"},te=function(de){return typeof de=="string"},Ue=function(de){return typeof de=="boolean"},Ut=function(de){return typeof de=="number"},fn=function(de){return typeof de=="undefined"}},31663:function(an,St){"use strict";var se=!1;St.Z=se},72307:function(an,St,se){an=se.nmd(an);var X=200,ce="__lodash_hash_undefined__",te=1,Ue=2,Ut=9007199254740991,fn="[object Arguments]",de="[object Array]",Xn="[object AsyncFunction]",ve="[object Boolean]",ze="[object Date]",Wt="[object Error]",Ae="[object Function]",ut="[object GeneratorFunction]",it="[object Map]",en="[object Number]",Rn="[object Null]",tn="[object Object]",ee="[object Promise]",Ir="[object Proxy]",dr="[object RegExp]",tr="[object Set]",zn="[object String]",Zn="[object Symbol]",Yn="[object Undefined]",vn="[object WeakMap]",pn="[object ArrayBuffer]",dt="[object DataView]",hr="[object Float32Array]",gr="[object Float64Array]",ke="[object Int8Array]",Kt="[object Int16Array]",Lt="[object Int32Array]",Qe="[object Uint8Array]",Se="[object Uint8ClampedArray]",we="[object Uint16Array]",Pe="[object Uint32Array]",Ve=/[\\^$.*+?()[\]{}|]/g,Ne=/^\[object .+?Constructor\]$/,Oe=/^(?:0|[1-9]\d*)$/,wt={};wt[hr]=wt[gr]=wt[ke]=wt[Kt]=wt[Lt]=wt[Qe]=wt[Se]=wt[we]=wt[Pe]=!0,wt[fn]=wt[de]=wt[pn]=wt[ve]=wt[dt]=wt[ze]=wt[Wt]=wt[Ae]=wt[it]=wt[en]=wt[tn]=wt[dr]=wt[tr]=wt[zn]=wt[vn]=!1;var ct=typeof se.g=="object"&&se.g&&se.g.Object===Object&&se.g,Nn=typeof self=="object"&&self&&self.Object===Object&&self,ur=ct||Nn||Function("return this")(),rr=St&&!St.nodeType&&St,yr=rr&&!0&&an&&!an.nodeType&&an,zr=yr&&yr.exports===rr,Ur=zr&&ct.process,Lr=function(){try{return Ur&&Ur.binding&&Ur.binding("util")}catch(R){}}(),Yr=Lr&&Lr.isTypedArray;function Bn(R,F){for(var w=-1,L=R==null?0:R.length,G=0,he=[];++w<L;){var We=R[w];F(We,w,R)&&(he[G++]=We)}return he}function sn(R,F){for(var w=-1,L=F.length,G=R.length;++w<L;)R[G+w]=F[w];return R}function Tn(R,F){for(var w=-1,L=R==null?0:R.length;++w<L;)if(F(R[w],w,R))return!0;return!1}function _r(R,F){for(var w=-1,L=Array(R);++w<R;)L[w]=F(w);return L}function ai(R){return function(F){return R(F)}}function Tr(R,F){return R.has(F)}function qr(R,F){return R==null?void 0:R[F]}function Si(R){var F=-1,w=Array(R.size);return R.forEach(function(L,G){w[++F]=[G,L]}),w}function Ei(R,F){return function(w){return R(F(w))}}function zi(R){var F=-1,w=Array(R.size);return R.forEach(function(L){w[++F]=L}),w}var Ss=Array.prototype,ei=Function.prototype,ii=Object.prototype,ui=ur["__core-js_shared__"],ls=ei.toString,Hr=ii.hasOwnProperty,Xi=function(){var R=/[^.]+$/.exec(ui&&ui.keys&&ui.keys.IE_PROTO||"");return R?"Symbol(src)_1."+R:""}(),Wr=ii.toString,Ln=RegExp("^"+ls.call(Hr).replace(Ve,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ts=zr?ur.Buffer:void 0,Q=ur.Symbol,ye=ur.Uint8Array,Ce=ii.propertyIsEnumerable,ge=Ss.splice,vt=Q?Q.toStringTag:void 0,Ht=Object.getOwnPropertySymbols,Jt=Ts?Ts.isBuffer:void 0,_t=Ei(Object.keys,Object),ht=Xs(ur,"DataView"),Ge=Xs(ur,"Map"),st=Xs(ur,"Promise"),Ft=Xs(ur,"Set"),kn=Xs(ur,"WeakMap"),On=Xs(Object,"create"),$n=Vs(ht),Mr=Vs(Ge),ti=Vs(st),xe=Vs(Ft),At=Vs(kn),Pn=Q?Q.prototype:void 0,vr=Pn?Pn.valueOf:void 0;function ni(R){var F=-1,w=R==null?0:R.length;for(this.clear();++F<w;){var L=R[F];this.set(L[0],L[1])}}function Zi(){this.__data__=On?On(null):{},this.size=0}function Ns(R){var F=this.has(R)&&delete this.__data__[R];return this.size-=F?1:0,F}function va(R){var F=this.__data__;if(On){var w=F[R];return w===ce?void 0:w}return Hr.call(F,R)?F[R]:void 0}function js(R){var F=this.__data__;return On?F[R]!==void 0:Hr.call(F,R)}function os(R,F){var w=this.__data__;return this.size+=this.has(R)?0:1,w[R]=On&&F===void 0?ce:F,this}ni.prototype.clear=Zi,ni.prototype.delete=Ns,ni.prototype.get=va,ni.prototype.has=js,ni.prototype.set=os;function Ji(R){var F=-1,w=R==null?0:R.length;for(this.clear();++F<w;){var L=R[F];this.set(L[0],L[1])}}function It(){this.__data__=[],this.size=0}function k(R){var F=this.__data__,w=Un(F,R);if(w<0)return!1;var L=F.length-1;return w==L?F.pop():ge.call(F,w,1),--this.size,!0}function Z(R){var F=this.__data__,w=Un(F,R);return w<0?void 0:F[w][1]}function le(R){return Un(this.__data__,R)>-1}function Ye(R,F){var w=this.__data__,L=Un(w,R);return L<0?(++this.size,w.push([R,F])):w[L][1]=F,this}Ji.prototype.clear=It,Ji.prototype.delete=k,Ji.prototype.get=Z,Ji.prototype.has=le,Ji.prototype.set=Ye;function He(R){var F=-1,w=R==null?0:R.length;for(this.clear();++F<w;){var L=R[F];this.set(L[0],L[1])}}function ft(){this.size=0,this.__data__={hash:new ni,map:new(Ge||Ji),string:new ni}}function Dn(R){var F=Ko(this,R).delete(R);return this.size-=F?1:0,F}function xn(R){return Ko(this,R).get(R)}function et(R){return Ko(this,R).has(R)}function nn(R,F){var w=Ko(this,R),L=w.size;return w.set(R,F),this.size+=w.size==L?0:1,this}He.prototype.clear=ft,He.prototype.delete=Dn,He.prototype.get=xn,He.prototype.has=et,He.prototype.set=nn;function _e(R){var F=-1,w=R==null?0:R.length;for(this.__data__=new He;++F<w;)this.add(R[F])}function De(R){return this.__data__.set(R,ce),this}function ot(R){return this.__data__.has(R)}_e.prototype.add=_e.prototype.push=De,_e.prototype.has=ot;function gt(R){var F=this.__data__=new Ji(R);this.size=F.size}function Pt(){this.__data__=new Ji,this.size=0}function Gn(R){var F=this.__data__,w=F.delete(R);return this.size=F.size,w}function dn(R){return this.__data__.get(R)}function Ke(R){return this.__data__.has(R)}function Xe(R,F){var w=this.__data__;if(w instanceof Ji){var L=w.__data__;if(!Ge||L.length<X-1)return L.push([R,F]),this.size=++w.size,this;w=this.__data__=new He(L)}return w.set(R,F),this.size=w.size,this}gt.prototype.clear=Pt,gt.prototype.delete=Gn,gt.prototype.get=dn,gt.prototype.has=Ke,gt.prototype.set=Xe;function Zt(R,F){var w=la(R),L=!w&&oi(R),G=!w&&!L&&qo(R),he=!w&&!L&&!G&&C(R),We=w||L||G||he,at=We?_r(R.length,String):[],tt=at.length;for(var $e in R)(F||Hr.call(R,$e))&&!(We&&($e=="length"||G&&($e=="offset"||$e=="parent")||he&&($e=="buffer"||$e=="byteLength"||$e=="byteOffset")||to($e,tt)))&&at.push($e);return at}function Un(R,F){for(var w=R.length;w--;)if(To(R[w][0],F))return w;return-1}function ir(R,F,w){var L=F(R);return la(R)?L:sn(L,w(R))}function Kn(R){return R==null?R===void 0?Yn:Rn:vt&&vt in Object(R)?Ca(R):Ni(R)}function Gr(R){return v(R)&&Kn(R)==fn}function Ar(R,F,w,L,G){return R===F?!0:R==null||F==null||!v(R)&&!v(F)?R!==R&&F!==F:vi(R,F,w,L,Ar,G)}function vi(R,F,w,L,G,he){var We=la(R),at=la(F),tt=We?de:ks(R),$e=at?de:ks(F);tt=tt==fn?tn:tt,$e=$e==fn?tn:$e;var Ct=tt==tn,En=$e==tn,Ot=tt==$e;if(Ot&&qo(R)){if(!qo(F))return!1;We=!0,Ct=!1}if(Ot&&!Ct)return he||(he=new gt),We||C(R)?ys(R,F,w,L,G,he):Ms(R,F,tt,w,L,G,he);if(!(w&te)){var yt=Ct&&Hr.call(R,"__wrapped__"),rn=En&&Hr.call(F,"__wrapped__");if(yt||rn){var hn=yt?R.value():R,$t=rn?F.value():F;return he||(he=new gt),G(hn,$t,w,L,he)}}return Ot?(he||(he=new gt),Ja(R,F,w,L,G,he)):!1}function li(R){if(!m(R)||Cs(R))return!1;var F=ro(R)?Ln:Ne;return F.test(Vs(R))}function sr(R){return v(R)&&O(R.length)&&!!wt[Kn(R)]}function Bi(R){if(!no(R))return _t(R);var F=[];for(var w in Object(R))Hr.call(R,w)&&w!="constructor"&&F.push(w);return F}function ys(R,F,w,L,G,he){var We=w&te,at=R.length,tt=F.length;if(at!=tt&&!(We&&tt>at))return!1;var $e=he.get(R);if($e&&he.get(F))return $e==F;var Ct=-1,En=!0,Ot=w&Ue?new _e:void 0;for(he.set(R,F),he.set(F,R);++Ct<at;){var yt=R[Ct],rn=F[Ct];if(L)var hn=We?L(rn,yt,Ct,F,R,he):L(yt,rn,Ct,R,F,he);if(hn!==void 0){if(hn)continue;En=!1;break}if(Ot){if(!Tn(F,function($t,on){if(!Tr(Ot,on)&&(yt===$t||G(yt,$t,w,L,he)))return Ot.push(on)})){En=!1;break}}else if(!(yt===rn||G(yt,rn,w,L,he))){En=!1;break}}return he.delete(R),he.delete(F),En}function Ms(R,F,w,L,G,he,We){switch(w){case dt:if(R.byteLength!=F.byteLength||R.byteOffset!=F.byteOffset)return!1;R=R.buffer,F=F.buffer;case pn:return!(R.byteLength!=F.byteLength||!he(new ye(R),new ye(F)));case ve:case ze:case en:return To(+R,+F);case Wt:return R.name==F.name&&R.message==F.message;case dr:case zn:return R==F+"";case it:var at=Si;case tr:var tt=L&te;if(at||(at=zi),R.size!=F.size&&!tt)return!1;var $e=We.get(R);if($e)return $e==F;L|=Ue,We.set(R,F);var Ct=ys(at(R),at(F),L,G,he,We);return We.delete(R),Ct;case Zn:if(vr)return vr.call(R)==vr.call(F)}return!1}function Ja(R,F,w,L,G,he){var We=w&te,at=ya(R),tt=at.length,$e=ya(F),Ct=$e.length;if(tt!=Ct&&!We)return!1;for(var En=tt;En--;){var Ot=at[En];if(!(We?Ot in F:Hr.call(F,Ot)))return!1}var yt=he.get(R);if(yt&&he.get(F))return yt==F;var rn=!0;he.set(R,F),he.set(F,R);for(var hn=We;++En<tt;){Ot=at[En];var $t=R[Ot],on=F[Ot];if(L)var jt=We?L(on,$t,Ot,F,R,he):L($t,on,Ot,R,F,he);if(!(jt===void 0?$t===on||G($t,on,w,L,he):jt)){rn=!1;break}hn||(hn=Ot=="constructor")}if(rn&&!hn){var In=R.constructor,fr=F.constructor;In!=fr&&"constructor"in R&&"constructor"in F&&!(typeof In=="function"&&In instanceof In&&typeof fr=="function"&&fr instanceof fr)&&(rn=!1)}return he.delete(R),he.delete(F),rn}function ya(R){return ir(R,N,_a)}function Ko(R,F){var w=R.__data__;return As(F)?w[typeof F=="string"?"string":"hash"]:w.map}function Xs(R,F){var w=qr(R,F);return li(w)?w:void 0}function Ca(R){var F=Hr.call(R,vt),w=R[vt];try{R[vt]=void 0;var L=!0}catch(he){}var G=Wr.call(R);return L&&(F?R[vt]=w:delete R[vt]),G}var _a=Ht?function(R){return R==null?[]:(R=Object(R),Bn(Ht(R),function(F){return Ce.call(R,F)}))}:H,ks=Kn;(ht&&ks(new ht(new ArrayBuffer(1)))!=dt||Ge&&ks(new Ge)!=it||st&&ks(st.resolve())!=ee||Ft&&ks(new Ft)!=tr||kn&&ks(new kn)!=vn)&&(ks=function(R){var F=Kn(R),w=F==tn?R.constructor:void 0,L=w?Vs(w):"";if(L)switch(L){case $n:return dt;case Mr:return it;case ti:return ee;case xe:return tr;case At:return vn}return F});function to(R,F){return F=F==null?Ut:F,!!F&&(typeof R=="number"||Oe.test(R))&&R>-1&&R%1==0&&R<F}function As(R){var F=typeof R;return F=="string"||F=="number"||F=="symbol"||F=="boolean"?R!=="__proto__":R===null}function Cs(R){return!!Xi&&Xi in R}function no(R){var F=R&&R.constructor,w=typeof F=="function"&&F.prototype||ii;return R===w}function Ni(R){return Wr.call(R)}function Vs(R){if(R!=null){try{return ls.call(R)}catch(F){}try{return R+""}catch(F){}}return""}function To(R,F){return R===F||R!==R&&F!==F}var oi=Gr(function(){return arguments}())?Gr:function(R){return v(R)&&Hr.call(R,"callee")&&!Ce.call(R,"callee")},la=Array.isArray;function xa(R){return R!=null&&O(R.length)&&!ro(R)}var qo=Jt||Y;function $a(R,F){return Ar(R,F)}function ro(R){if(!m(R))return!1;var F=Kn(R);return F==Ae||F==ut||F==Xn||F==Ir}function O(R){return typeof R=="number"&&R>-1&&R%1==0&&R<=Ut}function m(R){var F=typeof R;return R!=null&&(F=="object"||F=="function")}function v(R){return R!=null&&typeof R=="object"}var C=Yr?ai(Yr):sr;function N(R){return xa(R)?Zt(R):Bi(R)}function H(){return[]}function Y(){return!1}an.exports=$a},72378:function(an,St,se){an=se.nmd(an);var X=200,ce="__lodash_hash_undefined__",te=800,Ue=16,Ut=9007199254740991,fn="[object Arguments]",de="[object Array]",Xn="[object AsyncFunction]",ve="[object Boolean]",ze="[object Date]",Wt="[object Error]",Ae="[object Function]",ut="[object GeneratorFunction]",it="[object Map]",en="[object Number]",Rn="[object Null]",tn="[object Object]",ee="[object Proxy]",Ir="[object RegExp]",dr="[object Set]",tr="[object String]",zn="[object Undefined]",Zn="[object WeakMap]",Yn="[object ArrayBuffer]",vn="[object DataView]",pn="[object Float32Array]",dt="[object Float64Array]",hr="[object Int8Array]",gr="[object Int16Array]",ke="[object Int32Array]",Kt="[object Uint8Array]",Lt="[object Uint8ClampedArray]",Qe="[object Uint16Array]",Se="[object Uint32Array]",we=/[\\^$.*+?()[\]{}|]/g,Pe=/^\[object .+?Constructor\]$/,Ve=/^(?:0|[1-9]\d*)$/,Ne={};Ne[pn]=Ne[dt]=Ne[hr]=Ne[gr]=Ne[ke]=Ne[Kt]=Ne[Lt]=Ne[Qe]=Ne[Se]=!0,Ne[fn]=Ne[de]=Ne[Yn]=Ne[ve]=Ne[vn]=Ne[ze]=Ne[Wt]=Ne[Ae]=Ne[it]=Ne[en]=Ne[tn]=Ne[Ir]=Ne[dr]=Ne[tr]=Ne[Zn]=!1;var Oe=typeof se.g=="object"&&se.g&&se.g.Object===Object&&se.g,wt=typeof self=="object"&&self&&self.Object===Object&&self,ct=Oe||wt||Function("return this")(),Nn=St&&!St.nodeType&&St,ur=Nn&&!0&&an&&!an.nodeType&&an,rr=ur&&ur.exports===Nn,yr=rr&&Oe.process,zr=function(){try{var w=ur&&ur.require&&ur.require("util").types;return w||yr&&yr.binding&&yr.binding("util")}catch(L){}}(),Ur=zr&&zr.isTypedArray;function Lr(w,L,G){switch(G.length){case 0:return w.call(L);case 1:return w.call(L,G[0]);case 2:return w.call(L,G[0],G[1]);case 3:return w.call(L,G[0],G[1],G[2])}return w.apply(L,G)}function Yr(w,L){for(var G=-1,he=Array(w);++G<w;)he[G]=L(G);return he}function Bn(w){return function(L){return w(L)}}function sn(w,L){return w==null?void 0:w[L]}function Tn(w,L){return function(G){return w(L(G))}}var _r=Array.prototype,ai=Function.prototype,Tr=Object.prototype,qr=ct["__core-js_shared__"],Si=ai.toString,Ei=Tr.hasOwnProperty,zi=function(){var w=/[^.]+$/.exec(qr&&qr.keys&&qr.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""}(),Ss=Tr.toString,ei=Si.call(Object),ii=RegExp("^"+Si.call(Ei).replace(we,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ui=rr?ct.Buffer:void 0,ls=ct.Symbol,Hr=ct.Uint8Array,Xi=ui?ui.allocUnsafe:void 0,Wr=Tn(Object.getPrototypeOf,Object),Ln=Object.create,Ts=Tr.propertyIsEnumerable,Q=_r.splice,ye=ls?ls.toStringTag:void 0,Ce=function(){try{var w=sr(Object,"defineProperty");return w({},"",{}),w}catch(L){}}(),ge=ui?ui.isBuffer:void 0,vt=Math.max,Ht=Date.now,Jt=sr(ct,"Map"),_t=sr(Object,"create"),ht=function(){function w(){}return function(L){if(!ro(L))return{};if(Ln)return Ln(L);w.prototype=L;var G=new w;return w.prototype=void 0,G}}();function Ge(w){var L=-1,G=w==null?0:w.length;for(this.clear();++L<G;){var he=w[L];this.set(he[0],he[1])}}function st(){this.__data__=_t?_t(null):{},this.size=0}function Ft(w){var L=this.has(w)&&delete this.__data__[w];return this.size-=L?1:0,L}function kn(w){var L=this.__data__;if(_t){var G=L[w];return G===ce?void 0:G}return Ei.call(L,w)?L[w]:void 0}function On(w){var L=this.__data__;return _t?L[w]!==void 0:Ei.call(L,w)}function $n(w,L){var G=this.__data__;return this.size+=this.has(w)?0:1,G[w]=_t&&L===void 0?ce:L,this}Ge.prototype.clear=st,Ge.prototype.delete=Ft,Ge.prototype.get=kn,Ge.prototype.has=On,Ge.prototype.set=$n;function Mr(w){var L=-1,G=w==null?0:w.length;for(this.clear();++L<G;){var he=w[L];this.set(he[0],he[1])}}function ti(){this.__data__=[],this.size=0}function xe(w){var L=this.__data__,G=xn(L,w);if(G<0)return!1;var he=L.length-1;return G==he?L.pop():Q.call(L,G,1),--this.size,!0}function At(w){var L=this.__data__,G=xn(L,w);return G<0?void 0:L[G][1]}function Pn(w){return xn(this.__data__,w)>-1}function vr(w,L){var G=this.__data__,he=xn(G,w);return he<0?(++this.size,G.push([w,L])):G[he][1]=L,this}Mr.prototype.clear=ti,Mr.prototype.delete=xe,Mr.prototype.get=At,Mr.prototype.has=Pn,Mr.prototype.set=vr;function ni(w){var L=-1,G=w==null?0:w.length;for(this.clear();++L<G;){var he=w[L];this.set(he[0],he[1])}}function Zi(){this.size=0,this.__data__={hash:new Ge,map:new(Jt||Mr),string:new Ge}}function Ns(w){var L=li(this,w).delete(w);return this.size-=L?1:0,L}function va(w){return li(this,w).get(w)}function js(w){return li(this,w).has(w)}function os(w,L){var G=li(this,w),he=G.size;return G.set(w,L),this.size+=G.size==he?0:1,this}ni.prototype.clear=Zi,ni.prototype.delete=Ns,ni.prototype.get=va,ni.prototype.has=js,ni.prototype.set=os;function Ji(w){var L=this.__data__=new Mr(w);this.size=L.size}function It(){this.__data__=new Mr,this.size=0}function k(w){var L=this.__data__,G=L.delete(w);return this.size=L.size,G}function Z(w){return this.__data__.get(w)}function le(w){return this.__data__.has(w)}function Ye(w,L){var G=this.__data__;if(G instanceof Mr){var he=G.__data__;if(!Jt||he.length<X-1)return he.push([w,L]),this.size=++G.size,this;G=this.__data__=new ni(he)}return G.set(w,L),this.size=G.size,this}Ji.prototype.clear=It,Ji.prototype.delete=k,Ji.prototype.get=Z,Ji.prototype.has=le,Ji.prototype.set=Ye;function He(w,L){var G=To(w),he=!G&&Vs(w),We=!G&&!he&&xa(w),at=!G&&!he&&!We&&v(w),tt=G||he||We||at,$e=tt?Yr(w.length,String):[],Ct=$e.length;for(var En in w)(L||Ei.call(w,En))&&!(tt&&(En=="length"||We&&(En=="offset"||En=="parent")||at&&(En=="buffer"||En=="byteLength"||En=="byteOffset")||Ms(En,Ct)))&&$e.push(En);return $e}function ft(w,L,G){(G!==void 0&&!Ni(w[L],G)||G===void 0&&!(L in w))&&et(w,L,G)}function Dn(w,L,G){var he=w[L];(!(Ei.call(w,L)&&Ni(he,G))||G===void 0&&!(L in w))&&et(w,L,G)}function xn(w,L){for(var G=w.length;G--;)if(Ni(w[G][0],L))return G;return-1}function et(w,L,G){L=="__proto__"&&Ce?Ce(w,L,{configurable:!0,enumerable:!0,value:G,writable:!0}):w[L]=G}var nn=vi();function _e(w){return w==null?w===void 0?zn:Rn:ye&&ye in Object(w)?Bi(w):_a(w)}function De(w){return O(w)&&_e(w)==fn}function ot(w){if(!ro(w)||Ko(w))return!1;var L=qo(w)?ii:Pe;return L.test(no(w))}function gt(w){return O(w)&&$a(w.length)&&!!Ne[_e(w)]}function Pt(w){if(!ro(w))return Ca(w);var L=Xs(w),G=[];for(var he in w)he=="constructor"&&(L||!Ei.call(w,he))||G.push(he);return G}function Gn(w,L,G,he,We){w!==L&&nn(L,function(at,tt){if(We||(We=new Ji),ro(at))dn(w,L,tt,G,Gn,he,We);else{var $e=he?he(to(w,tt),at,tt+"",w,L,We):void 0;$e===void 0&&($e=at),ft(w,tt,$e)}},N)}function dn(w,L,G,he,We,at,tt){var $e=to(w,G),Ct=to(L,G),En=tt.get(Ct);if(En){ft(w,G,En);return}var Ot=at?at($e,Ct,G+"",w,L,tt):void 0,yt=Ot===void 0;if(yt){var rn=To(Ct),hn=!rn&&xa(Ct),$t=!rn&&!hn&&v(Ct);Ot=Ct,rn||hn||$t?To($e)?Ot=$e:la($e)?Ot=Kn($e):hn?(yt=!1,Ot=Zt(Ct,!0)):$t?(yt=!1,Ot=ir(Ct,!0)):Ot=[]:m(Ct)||Vs(Ct)?(Ot=$e,Vs($e)?Ot=C($e):(!ro($e)||qo($e))&&(Ot=ys(Ct))):yt=!1}yt&&(tt.set(Ct,Ot),We(Ot,Ct,he,at,tt),tt.delete(Ct)),ft(w,G,Ot)}function Ke(w,L){return As(ks(w,L,R),w+"")}var Xe=Ce?function(w,L){return Ce(w,"toString",{configurable:!0,enumerable:!1,value:Y(L),writable:!0})}:R;function Zt(w,L){if(L)return w.slice();var G=w.length,he=Xi?Xi(G):new w.constructor(G);return w.copy(he),he}function Un(w){var L=new w.constructor(w.byteLength);return new Hr(L).set(new Hr(w)),L}function ir(w,L){var G=L?Un(w.buffer):w.buffer;return new w.constructor(G,w.byteOffset,w.length)}function Kn(w,L){var G=-1,he=w.length;for(L||(L=Array(he));++G<he;)L[G]=w[G];return L}function Gr(w,L,G,he){var We=!G;G||(G={});for(var at=-1,tt=L.length;++at<tt;){var $e=L[at],Ct=he?he(G[$e],w[$e],$e,G,w):void 0;Ct===void 0&&(Ct=w[$e]),We?et(G,$e,Ct):Dn(G,$e,Ct)}return G}function Ar(w){return Ke(function(L,G){var he=-1,We=G.length,at=We>1?G[We-1]:void 0,tt=We>2?G[2]:void 0;for(at=w.length>3&&typeof at=="function"?(We--,at):void 0,tt&&Ja(G[0],G[1],tt)&&(at=We<3?void 0:at,We=1),L=Object(L);++he<We;){var $e=G[he];$e&&w(L,$e,he,at)}return L})}function vi(w){return function(L,G,he){for(var We=-1,at=Object(L),tt=he(L),$e=tt.length;$e--;){var Ct=tt[w?$e:++We];if(G(at[Ct],Ct,at)===!1)break}return L}}function li(w,L){var G=w.__data__;return ya(L)?G[typeof L=="string"?"string":"hash"]:G.map}function sr(w,L){var G=sn(w,L);return ot(G)?G:void 0}function Bi(w){var L=Ei.call(w,ye),G=w[ye];try{w[ye]=void 0;var he=!0}catch(at){}var We=Ss.call(w);return he&&(L?w[ye]=G:delete w[ye]),We}function ys(w){return typeof w.constructor=="function"&&!Xs(w)?ht(Wr(w)):{}}function Ms(w,L){var G=typeof w;return L=L==null?Ut:L,!!L&&(G=="number"||G!="symbol"&&Ve.test(w))&&w>-1&&w%1==0&&w<L}function Ja(w,L,G){if(!ro(G))return!1;var he=typeof L;return(he=="number"?oi(G)&&Ms(L,G.length):he=="string"&&L in G)?Ni(G[L],w):!1}function ya(w){var L=typeof w;return L=="string"||L=="number"||L=="symbol"||L=="boolean"?w!=="__proto__":w===null}function Ko(w){return!!zi&&zi in w}function Xs(w){var L=w&&w.constructor,G=typeof L=="function"&&L.prototype||Tr;return w===G}function Ca(w){var L=[];if(w!=null)for(var G in Object(w))L.push(G);return L}function _a(w){return Ss.call(w)}function ks(w,L,G){return L=vt(L===void 0?w.length-1:L,0),function(){for(var he=arguments,We=-1,at=vt(he.length-L,0),tt=Array(at);++We<at;)tt[We]=he[L+We];We=-1;for(var $e=Array(L+1);++We<L;)$e[We]=he[We];return $e[L]=G(tt),Lr(w,this,$e)}}function to(w,L){if(!(L==="constructor"&&typeof w[L]=="function")&&L!="__proto__")return w[L]}var As=Cs(Xe);function Cs(w){var L=0,G=0;return function(){var he=Ht(),We=Ue-(he-G);if(G=he,We>0){if(++L>=te)return arguments[0]}else L=0;return w.apply(void 0,arguments)}}function no(w){if(w!=null){try{return Si.call(w)}catch(L){}try{return w+""}catch(L){}}return""}function Ni(w,L){return w===L||w!==w&&L!==L}var Vs=De(function(){return arguments}())?De:function(w){return O(w)&&Ei.call(w,"callee")&&!Ts.call(w,"callee")},To=Array.isArray;function oi(w){return w!=null&&$a(w.length)&&!qo(w)}function la(w){return O(w)&&oi(w)}var xa=ge||F;function qo(w){if(!ro(w))return!1;var L=_e(w);return L==Ae||L==ut||L==Xn||L==ee}function $a(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=Ut}function ro(w){var L=typeof w;return w!=null&&(L=="object"||L=="function")}function O(w){return w!=null&&typeof w=="object"}function m(w){if(!O(w)||_e(w)!=tn)return!1;var L=Wr(w);if(L===null)return!0;var G=Ei.call(L,"constructor")&&L.constructor;return typeof G=="function"&&G instanceof G&&Si.call(G)==ei}var v=Ur?Bn(Ur):gt;function C(w){return Gr(w,N(w))}function N(w){return oi(w)?He(w,!0):Pt(w)}var H=Ar(function(w,L,G){Gn(w,L,G)});function Y(w){return function(){return w}}function R(w){return w}function F(){return!1}an.exports=H},46511:function(an,St){"use strict";var se;St.ConcurrentRoot=1,St.ContinuousEventPriority=4,St.DefaultEventPriority=16,St.DiscreteEventPriority=1,se=536870912,se=0},67287:function(an,St,se){an.exports=function(ce){var te={},Ue=se(67294),Ut=se(63840),fn=Object.assign;function de(i){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xn=Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ve=Symbol.for("react.element"),ze=Symbol.for("react.portal"),Wt=Symbol.for("react.fragment"),Ae=Symbol.for("react.strict_mode"),ut=Symbol.for("react.profiler"),it=Symbol.for("react.provider"),en=Symbol.for("react.context"),Rn=Symbol.for("react.forward_ref"),tn=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),Ir=Symbol.for("react.memo"),dr=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var tr=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var zn=Symbol.iterator;function Zn(i){return i===null||typeof i!="object"?null:(i=zn&&i[zn]||i["@@iterator"],typeof i=="function"?i:null)}function Yn(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case Wt:return"Fragment";case ze:return"Portal";case ut:return"Profiler";case Ae:return"StrictMode";case tn:return"Suspense";case ee:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case en:return(i.displayName||"Context")+".Consumer";case it:return(i._context.displayName||"Context")+".Provider";case Rn:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ir:return s=i.displayName||null,s!==null?s:Yn(i.type)||"Memo";case dr:s=i._payload,i=i._init;try{return Yn(i(s))}catch(u){}}return null}function vn(i){var s=i.type;switch(i.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=s.render,i=i.displayName||i.name||"",s.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yn(s);case 8:return s===Ae?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function pn(i){var s=i,u=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,s.flags&4098&&(u=s.return),i=s.return;while(i)}return s.tag===3?u:null}function dt(i){if(pn(i)!==i)throw Error(de(188))}function hr(i){var s=i.alternate;if(!s){if(s=pn(i),s===null)throw Error(de(188));return s!==i?null:i}for(var u=i,p=s;;){var y=u.return;if(y===null)break;var A=y.alternate;if(A===null){if(p=y.return,p!==null){u=p;continue}break}if(y.child===A.child){for(A=y.child;A;){if(A===u)return dt(y),i;if(A===p)return dt(y),s;A=A.sibling}throw Error(de(188))}if(u.return!==p.return)u=y,p=A;else{for(var V=!1,pe=y.child;pe;){if(pe===u){V=!0,u=y,p=A;break}if(pe===p){V=!0,p=y,u=A;break}pe=pe.sibling}if(!V){for(pe=A.child;pe;){if(pe===u){V=!0,u=A,p=y;break}if(pe===p){V=!0,p=A,u=y;break}pe=pe.sibling}if(!V)throw Error(de(189))}}if(u.alternate!==p)throw Error(de(190))}if(u.tag!==3)throw Error(de(188));return u.stateNode.current===u?i:s}function gr(i){return i=hr(i),i!==null?ke(i):null}function ke(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var s=ke(i);if(s!==null)return s;i=i.sibling}return null}function Kt(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){if(i.tag!==4){var s=Kt(i);if(s!==null)return s}i=i.sibling}return null}var Lt=Array.isArray,Qe=ce.getPublicInstance,Se=ce.getRootHostContext,we=ce.getChildHostContext,Pe=ce.prepareForCommit,Ve=ce.resetAfterCommit,Ne=ce.createInstance,Oe=ce.appendInitialChild,wt=ce.finalizeInitialChildren,ct=ce.prepareUpdate,Nn=ce.shouldSetTextContent,ur=ce.createTextInstance,rr=ce.scheduleTimeout,yr=ce.cancelTimeout,zr=ce.noTimeout,Ur=ce.isPrimaryRenderer,Lr=ce.supportsMutation,Yr=ce.supportsPersistence,Bn=ce.supportsHydration,sn=ce.getInstanceFromNode,Tn=ce.preparePortalMount,_r=ce.getCurrentEventPriority,ai=ce.detachDeletedInstance,Tr=ce.supportsMicrotasks,qr=ce.scheduleMicrotask,Si=ce.supportsTestSelectors,Ei=ce.findFiberRoot,zi=ce.getBoundingRect,Ss=ce.getTextContent,ei=ce.isHiddenSubtree,ii=ce.matchAccessibilityRole,ui=ce.setFocusIfFocusable,ls=ce.setupIntersectionObserver,Hr=ce.appendChild,Xi=ce.appendChildToContainer,Wr=ce.commitTextUpdate,Ln=ce.commitMount,Ts=ce.commitUpdate,Q=ce.insertBefore,ye=ce.insertInContainerBefore,Ce=ce.removeChild,ge=ce.removeChildFromContainer,vt=ce.resetTextContent,Ht=ce.hideInstance,Jt=ce.hideTextInstance,_t=ce.unhideInstance,ht=ce.unhideTextInstance,Ge=ce.clearContainer,st=ce.cloneInstance,Ft=ce.createContainerChildSet,kn=ce.appendChildToContainerChildSet,On=ce.finalizeContainerChildren,$n=ce.replaceContainerChildren,Mr=ce.cloneHiddenInstance,ti=ce.cloneHiddenTextInstance,xe=ce.canHydrateInstance,At=ce.canHydrateTextInstance,Pn=ce.canHydrateSuspenseInstance,vr=ce.isSuspenseInstancePending,ni=ce.isSuspenseInstanceFallback,Zi=ce.registerSuspenseInstanceRetry,Ns=ce.getNextHydratableSibling,va=ce.getFirstHydratableChild,js=ce.getFirstHydratableChildWithinContainer,os=ce.getFirstHydratableChildWithinSuspenseInstance,Ji=ce.hydrateInstance,It=ce.hydrateTextInstance,k=ce.hydrateSuspenseInstance,Z=ce.getNextHydratableInstanceAfterSuspenseInstance,le=ce.commitHydratedContainer,Ye=ce.commitHydratedSuspenseInstance,He=ce.clearSuspenseBoundary,ft=ce.clearSuspenseBoundaryFromContainer,Dn=ce.shouldDeleteUnhydratedTailInstances,xn=ce.didNotMatchHydratedContainerTextInstance,et=ce.didNotMatchHydratedTextInstance,nn;function _e(i){if(nn===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);nn=s&&s[1]||""}return`
`+nn+i}var De=!1;function ot(i,s){if(!i||De)return"";De=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(nt){var p=nt}Reflect.construct(i,[],s)}else{try{s.call()}catch(nt){p=nt}i.call(s.prototype)}else{try{throw Error()}catch(nt){p=nt}i()}}catch(nt){if(nt&&p&&typeof nt.stack=="string"){for(var y=nt.stack.split(`
`),A=p.stack.split(`
`),V=y.length-1,pe=A.length-1;1<=V&&0<=pe&&y[V]!==A[pe];)pe--;for(;1<=V&&0<=pe;V--,pe--)if(y[V]!==A[pe]){if(V!==1||pe!==1)do if(V--,pe--,0>pe||y[V]!==A[pe]){var Fe=`
`+y[V].replace(" at new "," at ");return i.displayName&&Fe.includes("<anonymous>")&&(Fe=Fe.replace("<anonymous>",i.displayName)),Fe}while(1<=V&&0<=pe);break}}}finally{De=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?_e(i):""}var gt=Object.prototype.hasOwnProperty,Pt=[],Gn=-1;function dn(i){return{current:i}}function Ke(i){0>Gn||(i.current=Pt[Gn],Pt[Gn]=null,Gn--)}function Xe(i,s){Gn++,Pt[Gn]=i.current,i.current=s}var Zt={},Un=dn(Zt),ir=dn(!1),Kn=Zt;function Gr(i,s){var u=i.type.contextTypes;if(!u)return Zt;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===s)return p.__reactInternalMemoizedMaskedChildContext;var y={},A;for(A in u)y[A]=s[A];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=s,i.__reactInternalMemoizedMaskedChildContext=y),y}function Ar(i){return i=i.childContextTypes,i!=null}function vi(){Ke(ir),Ke(Un)}function li(i,s,u){if(Un.current!==Zt)throw Error(de(168));Xe(Un,s),Xe(ir,u)}function sr(i,s,u){var p=i.stateNode;if(s=s.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var y in p)if(!(y in s))throw Error(de(108,vn(i)||"Unknown",y));return fn({},u,p)}function Bi(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Zt,Kn=Un.current,Xe(Un,i),Xe(ir,ir.current),!0}function ys(i,s,u){var p=i.stateNode;if(!p)throw Error(de(169));u?(i=sr(i,s,Kn),p.__reactInternalMemoizedMergedChildContext=i,Ke(ir),Ke(Un),Xe(Un,i)):Ke(ir),Xe(ir,u)}var Ms=Math.clz32?Math.clz32:Ko,Ja=Math.log,ya=Math.LN2;function Ko(i){return i>>>=0,i===0?32:31-(Ja(i)/ya|0)|0}var Xs=64,Ca=4194304;function _a(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function ks(i,s){var u=i.pendingLanes;if(u===0)return 0;var p=0,y=i.suspendedLanes,A=i.pingedLanes,V=u&268435455;if(V!==0){var pe=V&~y;pe!==0?p=_a(pe):(A&=V,A!==0&&(p=_a(A)))}else V=u&~y,V!==0?p=_a(V):A!==0&&(p=_a(A));if(p===0)return 0;if(s!==0&&s!==p&&!(s&y)&&(y=p&-p,A=s&-s,y>=A||y===16&&(A&4194240)!==0))return s;if(p&4&&(p|=u&16),s=i.entangledLanes,s!==0)for(i=i.entanglements,s&=p;0<s;)u=31-Ms(s),y=1<<u,p|=i[u],s&=~y;return p}function to(i,s){switch(i){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function As(i,s){for(var u=i.suspendedLanes,p=i.pingedLanes,y=i.expirationTimes,A=i.pendingLanes;0<A;){var V=31-Ms(A),pe=1<<V,Fe=y[V];Fe===-1?(!(pe&u)||pe&p)&&(y[V]=to(pe,s)):Fe<=s&&(i.expiredLanes|=pe),A&=~pe}}function Cs(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function no(i){for(var s=[],u=0;31>u;u++)s.push(i);return s}function Ni(i,s,u){i.pendingLanes|=s,s!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,s=31-Ms(s),i[s]=u}function Vs(i,s){var u=i.pendingLanes&~s;i.pendingLanes=s,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=s,i.mutableReadLanes&=s,i.entangledLanes&=s,s=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<u;){var y=31-Ms(u),A=1<<y;s[y]=0,p[y]=-1,i[y]=-1,u&=~A}}function To(i,s){var u=i.entangledLanes|=s;for(i=i.entanglements;u;){var p=31-Ms(u),y=1<<p;y&s|i[p]&s&&(i[p]|=s),u&=~y}}var oi=0;function la(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var xa=Ut.unstable_scheduleCallback,qo=Ut.unstable_cancelCallback,$a=Ut.unstable_shouldYield,ro=Ut.unstable_requestPaint,O=Ut.unstable_now,m=Ut.unstable_ImmediatePriority,v=Ut.unstable_UserBlockingPriority,C=Ut.unstable_NormalPriority,N=Ut.unstable_IdlePriority,H=null,Y=null;function R(i){if(Y&&typeof Y.onCommitFiberRoot=="function")try{Y.onCommitFiberRoot(H,i,void 0,(i.current.flags&128)===128)}catch(s){}}function F(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var w=typeof Object.is=="function"?Object.is:F,L=null,G=!1,he=!1;function We(i){L===null?L=[i]:L.push(i)}function at(i){G=!0,We(i)}function tt(){if(!he&&L!==null){he=!0;var i=0,s=oi;try{var u=L;for(oi=1;i<u.length;i++){var p=u[i];do p=p(!0);while(p!==null)}L=null,G=!1}catch(y){throw L!==null&&(L=L.slice(i+1)),xa(m,tt),y}finally{oi=s,he=!1}}return null}var $e=Xn.ReactCurrentBatchConfig;function Ct(i,s){if(w(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var u=Object.keys(i),p=Object.keys(s);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var y=u[p];if(!gt.call(s,y)||!w(i[y],s[y]))return!1}return!0}function En(i){switch(i.tag){case 5:return _e(i.type);case 16:return _e("Lazy");case 13:return _e("Suspense");case 19:return _e("SuspenseList");case 0:case 2:case 15:return i=ot(i.type,!1),i;case 11:return i=ot(i.type.render,!1),i;case 1:return i=ot(i.type,!0),i;default:return""}}function Ot(i,s){if(i&&i.defaultProps){s=fn({},s),i=i.defaultProps;for(var u in i)s[u]===void 0&&(s[u]=i[u]);return s}return s}var yt=dn(null),rn=null,hn=null,$t=null;function on(){$t=hn=rn=null}function jt(i,s,u){Ur?(Xe(yt,s._currentValue),s._currentValue=u):(Xe(yt,s._currentValue2),s._currentValue2=u)}function In(i){var s=yt.current;Ke(yt),Ur?i._currentValue=s:i._currentValue2=s}function fr(i,s,u){for(;i!==null;){var p=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,p!==null&&(p.childLanes|=s)):p!==null&&(p.childLanes&s)!==s&&(p.childLanes|=s),i===u)break;i=i.return}}function lr(i,s){rn=i,$t=hn=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&s&&(ba=!0),i.firstContext=null)}function Nr(i){var s=Ur?i._currentValue:i._currentValue2;if($t!==i)if(i={context:i,memoizedValue:s,next:null},hn===null){if(rn===null)throw Error(de(308));hn=i,rn.dependencies={lanes:0,firstContext:i}}else hn=hn.next=i;return s}var Jr=null,ci=!1;function yi(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Di(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Kr(i,s){return{eventTime:i,lane:s,tag:0,payload:null,callback:null,next:null}}function Mi(i,s){var u=i.updateQueue;u!==null&&(u=u.shared,eo!==null&&i.mode&1&&!(Ai&2)?(i=u.interleaved,i===null?(s.next=s,Jr===null?Jr=[u]:Jr.push(u)):(s.next=i.next,i.next=s),u.interleaved=s):(i=u.pending,i===null?s.next=s:(s.next=i.next,i.next=s),u.pending=s))}function cs(i,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194240)!==0)){var p=s.lanes;p&=i.pendingLanes,u|=p,s.lanes=u,To(i,u)}}function bs(i,s){var u=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var y=null,A=null;if(u=u.firstBaseUpdate,u!==null){do{var V={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};A===null?y=A=V:A=A.next=V,u=u.next}while(u!==null);A===null?y=A=s:A=A.next=s}else y=A=s;u={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:A,shared:p.shared,effects:p.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=s:i.next=s,u.lastBaseUpdate=s}function ps(i,s,u,p){var y=i.updateQueue;ci=!1;var A=y.firstBaseUpdate,V=y.lastBaseUpdate,pe=y.shared.pending;if(pe!==null){y.shared.pending=null;var Fe=pe,nt=Fe.next;Fe.next=null,V===null?A=nt:V.next=nt,V=Fe;var Nt=i.alternate;Nt!==null&&(Nt=Nt.updateQueue,pe=Nt.lastBaseUpdate,pe!==V&&(pe===null?Nt.firstBaseUpdate=nt:pe.next=nt,Nt.lastBaseUpdate=Fe))}if(A!==null){var kt=y.baseState;V=0,Nt=nt=Fe=null,pe=A;do{var un=pe.lane,mr=pe.eventTime;if((p&un)===un){Nt!==null&&(Nt=Nt.next={eventTime:mr,lane:0,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null});e:{var yn=i,Ci=pe;switch(un=s,mr=u,Ci.tag){case 1:if(yn=Ci.payload,typeof yn=="function"){kt=yn.call(mr,kt,un);break e}kt=yn;break e;case 3:yn.flags=yn.flags&-65537|128;case 0:if(yn=Ci.payload,un=typeof yn=="function"?yn.call(mr,kt,un):yn,un==null)break e;kt=fn({},kt,un);break e;case 2:ci=!0}}pe.callback!==null&&pe.lane!==0&&(i.flags|=64,un=y.effects,un===null?y.effects=[pe]:un.push(pe))}else mr={eventTime:mr,lane:un,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null},Nt===null?(nt=Nt=mr,Fe=kt):Nt=Nt.next=mr,V|=un;if(pe=pe.next,pe===null){if(pe=y.shared.pending,pe===null)break;un=pe,pe=un.next,un.next=null,y.lastBaseUpdate=un,y.shared.pending=null}}while(1);if(Nt===null&&(Fe=kt),y.baseState=Fe,y.firstBaseUpdate=nt,y.lastBaseUpdate=Nt,s=y.shared.interleaved,s!==null){y=s;do V|=y.lane,y=y.next;while(y!==s)}else A===null&&(y.shared.lanes=0);Xa|=V,i.lanes=V,i.memoizedState=kt}}function ms(i,s,u){if(i=s.effects,s.effects=null,i!==null)for(s=0;s<i.length;s++){var p=i[s],y=p.callback;if(y!==null){if(p.callback=null,p=u,typeof y!="function")throw Error(de(191,y));y.call(p)}}}var $s=new Ue.Component().refs;function Ws(i,s,u,p){s=i.memoizedState,u=u(p,s),u=u==null?s:fn({},s,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var $i={isMounted:function(i){return(i=i._reactInternals)?pn(i)===i:!1},enqueueSetState:function(i,s,u){i=i._reactInternals;var p=Wo(),y=Ya(i),A=Kr(p,y);A.payload=s,u!=null&&(A.callback=u),Mi(i,A),s=Oa(i,y,p),s!==null&&cs(s,i,y)},enqueueReplaceState:function(i,s,u){i=i._reactInternals;var p=Wo(),y=Ya(i),A=Kr(p,y);A.tag=1,A.payload=s,u!=null&&(A.callback=u),Mi(i,A),s=Oa(i,y,p),s!==null&&cs(s,i,y)},enqueueForceUpdate:function(i,s){i=i._reactInternals;var u=Wo(),p=Ya(i),y=Kr(u,p);y.tag=2,s!=null&&(y.callback=s),Mi(i,y),s=Oa(i,p,u),s!==null&&cs(s,i,p)}};function ns(i,s,u,p,y,A,V){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,A,V):s.prototype&&s.prototype.isPureReactComponent?!Ct(u,p)||!Ct(y,A):!0}function Bo(i,s,u){var p=!1,y=Zt,A=s.contextType;return typeof A=="object"&&A!==null?A=Nr(A):(y=Ar(s)?Kn:Un.current,p=s.contextTypes,A=(p=p!=null)?Gr(i,y):Zt),s=new s(u,A),i.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=$i,i.stateNode=s,s._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=y,i.__reactInternalMemoizedMaskedChildContext=A),s}function Ao(i,s,u,p){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,p),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,p),s.state!==i&&$i.enqueueReplaceState(s,s.state,null)}function Co(i,s,u,p){var y=i.stateNode;y.props=u,y.state=i.memoizedState,y.refs=$s,yi(i);var A=s.contextType;typeof A=="object"&&A!==null?y.context=Nr(A):(A=Ar(s)?Kn:Un.current,y.context=Gr(i,A)),y.state=i.memoizedState,A=s.getDerivedStateFromProps,typeof A=="function"&&(Ws(i,s,A,u),y.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(s=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),s!==y.state&&$i.enqueueReplaceState(y,y.state,null),ps(i,u,y,p),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308)}var Jo=[],Qs=0,co=null,_o=0,us=[],Yi=0,Ra=null,xo=1,So="";function jr(i,s){Jo[Qs++]=_o,Jo[Qs++]=co,co=i,_o=s}function Rs(i,s,u){us[Yi++]=xo,us[Yi++]=So,us[Yi++]=Ra,Ra=i;var p=xo;i=So;var y=32-Ms(p)-1;p&=~(1<<y),u+=1;var A=32-Ms(s)+y;if(30<A){var V=y-y%5;A=(p&(1<<V)-1).toString(32),p>>=V,y-=V,xo=1<<32-Ms(s)+y|u<<y|p,So=A+i}else xo=1<<A|u<<y|p,So=i}function Ua(i){i.return!==null&&(jr(i,1),Rs(i,1,0))}function Il(i){for(;i===co;)co=Jo[--Qs],Jo[Qs]=null,_o=Jo[--Qs],Jo[Qs]=null;for(;i===Ra;)Ra=us[--Yi],us[Yi]=null,So=us[--Yi],us[Yi]=null,xo=us[--Yi],us[Yi]=null}var Ro=null,uo=null,_s=!1,Sa=!1,Mo=null;function cl(i,s){var u=Ka(5,null,null,0);u.elementType="DELETED",u.stateNode=s,u.return=i,s=i.deletions,s===null?(i.deletions=[u],i.flags|=16):s.push(u)}function ul(i,s){switch(i.tag){case 5:return s=xe(s,i.type,i.pendingProps),s!==null?(i.stateNode=s,Ro=i,uo=va(s),!0):!1;case 6:return s=At(s,i.pendingProps),s!==null?(i.stateNode=s,Ro=i,uo=null,!0):!1;case 13:if(s=Pn(s),s!==null){var u=Ra!==null?{id:xo,overflow:So}:null;return i.memoizedState={dehydrated:s,treeContext:u,retryLane:1073741824},u=Ka(18,null,null,0),u.stateNode=s,u.return=i,i.child=u,Ro=i,uo=null,!0}return!1;default:return!1}}function Ma(i){return(i.mode&1)!==0&&(i.flags&128)===0}function yl(i){if(_s){var s=uo;if(s){var u=s;if(!ul(i,s)){if(Ma(i))throw Error(de(418));s=Ns(u);var p=Ro;s&&ul(i,s)?cl(p,u):(i.flags=i.flags&-4097|2,_s=!1,Ro=i)}}else{if(Ma(i))throw Error(de(418));i.flags=i.flags&-4097|2,_s=!1,Ro=i}}}function _c(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Ro=i}function Fa(i){if(!Bn||i!==Ro)return!1;if(!_s)return _c(i),_s=!0,!1;if(i.tag!==3&&(i.tag!==5||Dn(i.type)&&!Nn(i.type,i.memoizedProps))){var s=uo;if(s){if(Ma(i)){for(i=uo;i;)i=Ns(i);throw Error(de(418))}for(;s;)cl(i,s),s=Ns(s)}}if(_c(i),i.tag===13){if(!Bn)throw Error(de(316));if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(de(317));uo=Z(i)}else uo=Ro?Ns(i.stateNode):null;return!0}function Hs(){Bn&&(uo=Ro=null,Sa=_s=!1)}function ca(i){Mo===null?Mo=[i]:Mo.push(i)}function ta(i,s,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(de(309));var p=u.stateNode}if(!p)throw Error(de(147,i));var y=p,A=""+i;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===A?s.ref:(s=function(V){var pe=y.refs;pe===$s&&(pe=y.refs={}),V===null?delete pe[A]:pe[A]=V},s._stringRef=A,s)}if(typeof i!="string")throw Error(de(284));if(!u._owner)throw Error(de(290,i))}return i}function fo(i,s){throw i=Object.prototype.toString.call(s),Error(de(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i))}function Ti(i){var s=i._init;return s(i._payload)}function ho(i){function s(Ee,be){if(i){var Ze=Ee.deletions;Ze===null?(Ee.deletions=[be],Ee.flags|=16):Ze.push(be)}}function u(Ee,be){if(!i)return null;for(;be!==null;)s(Ee,be),be=be.sibling;return null}function p(Ee,be){for(Ee=new Map;be!==null;)be.key!==null?Ee.set(be.key,be):Ee.set(be.index,be),be=be.sibling;return Ee}function y(Ee,be){return Ee=Cl(Ee,be),Ee.index=0,Ee.sibling=null,Ee}function A(Ee,be,Ze){return Ee.index=Ze,i?(Ze=Ee.alternate,Ze!==null?(Ze=Ze.index,Ze<be?(Ee.flags|=2,be):Ze):(Ee.flags|=2,be)):(Ee.flags|=1048576,be)}function V(Ee){return i&&Ee.alternate===null&&(Ee.flags|=2),Ee}function pe(Ee,be,Ze,Mn){return be===null||be.tag!==6?(be=yu(Ze,Ee.mode,Mn),be.return=Ee,be):(be=y(be,Ze),be.return=Ee,be)}function Fe(Ee,be,Ze,Mn){var cr=Ze.type;return cr===Wt?Nt(Ee,be,Ze.props.children,Mn,Ze.key):be!==null&&(be.elementType===cr||typeof cr=="object"&&cr!==null&&cr.$$typeof===dr&&Ti(cr)===be.type)?(Mn=y(be,Ze.props),Mn.ref=ta(Ee,be,Ze),Mn.return=Ee,Mn):(Mn=Oc(Ze.type,Ze.key,Ze.props,null,Ee.mode,Mn),Mn.ref=ta(Ee,be,Ze),Mn.return=Ee,Mn)}function nt(Ee,be,Ze,Mn){return be===null||be.tag!==4||be.stateNode.containerInfo!==Ze.containerInfo||be.stateNode.implementation!==Ze.implementation?(be=d(Ze,Ee.mode,Mn),be.return=Ee,be):(be=y(be,Ze.children||[]),be.return=Ee,be)}function Nt(Ee,be,Ze,Mn,cr){return be===null||be.tag!==7?(be=Kl(Ze,Ee.mode,Mn,cr),be.return=Ee,be):(be=y(be,Ze),be.return=Ee,be)}function kt(Ee,be,Ze){if(typeof be=="string"&&be!==""||typeof be=="number")return be=yu(""+be,Ee.mode,Ze),be.return=Ee,be;if(typeof be=="object"&&be!==null){switch(be.$$typeof){case ve:return Ze=Oc(be.type,be.key,be.props,null,Ee.mode,Ze),Ze.ref=ta(Ee,null,be),Ze.return=Ee,Ze;case ze:return be=d(be,Ee.mode,Ze),be.return=Ee,be;case dr:var Mn=be._init;return kt(Ee,Mn(be._payload),Ze)}if(Lt(be)||Zn(be))return be=Kl(be,Ee.mode,Ze,null),be.return=Ee,be;fo(Ee,be)}return null}function un(Ee,be,Ze,Mn){var cr=be!==null?be.key:null;if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number")return cr!==null?null:pe(Ee,be,""+Ze,Mn);if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case ve:return Ze.key===cr?Fe(Ee,be,Ze,Mn):null;case ze:return Ze.key===cr?nt(Ee,be,Ze,Mn):null;case dr:return cr=Ze._init,un(Ee,be,cr(Ze._payload),Mn)}if(Lt(Ze)||Zn(Ze))return cr!==null?null:Nt(Ee,be,Ze,Mn,null);fo(Ee,Ze)}return null}function mr(Ee,be,Ze,Mn,cr){if(typeof Mn=="string"&&Mn!==""||typeof Mn=="number")return Ee=Ee.get(Ze)||null,pe(be,Ee,""+Mn,cr);if(typeof Mn=="object"&&Mn!==null){switch(Mn.$$typeof){case ve:return Ee=Ee.get(Mn.key===null?Ze:Mn.key)||null,Fe(be,Ee,Mn,cr);case ze:return Ee=Ee.get(Mn.key===null?Ze:Mn.key)||null,nt(be,Ee,Mn,cr);case dr:var Vr=Mn._init;return mr(Ee,be,Ze,Vr(Mn._payload),cr)}if(Lt(Mn)||Zn(Mn))return Ee=Ee.get(Ze)||null,Nt(be,Ee,Mn,cr,null);fo(be,Mn)}return null}function yn(Ee,be,Ze,Mn){for(var cr=null,Vr=null,Br=be,Oi=be=0,qs=null;Br!==null&&Oi<Ze.length;Oi++){Br.index>Oi?(qs=Br,Br=null):qs=Br.sibling;var Gi=un(Ee,Br,Ze[Oi],Mn);if(Gi===null){Br===null&&(Br=qs);break}i&&Br&&Gi.alternate===null&&s(Ee,Br),be=A(Gi,be,Oi),Vr===null?cr=Gi:Vr.sibling=Gi,Vr=Gi,Br=qs}if(Oi===Ze.length)return u(Ee,Br),_s&&jr(Ee,Oi),cr;if(Br===null){for(;Oi<Ze.length;Oi++)Br=kt(Ee,Ze[Oi],Mn),Br!==null&&(be=A(Br,be,Oi),Vr===null?cr=Br:Vr.sibling=Br,Vr=Br);return _s&&jr(Ee,Oi),cr}for(Br=p(Ee,Br);Oi<Ze.length;Oi++)qs=mr(Br,Ee,Oi,Ze[Oi],Mn),qs!==null&&(i&&qs.alternate!==null&&Br.delete(qs.key===null?Oi:qs.key),be=A(qs,be,Oi),Vr===null?cr=qs:Vr.sibling=qs,Vr=qs);return i&&Br.forEach(function(ao){return s(Ee,ao)}),_s&&jr(Ee,Oi),cr}function Ci(Ee,be,Ze,Mn){var cr=Zn(Ze);if(typeof cr!="function")throw Error(de(150));if(Ze=cr.call(Ze),Ze==null)throw Error(de(151));for(var Vr=cr=null,Br=be,Oi=be=0,qs=null,Gi=Ze.next();Br!==null&&!Gi.done;Oi++,Gi=Ze.next()){Br.index>Oi?(qs=Br,Br=null):qs=Br.sibling;var ao=un(Ee,Br,Gi.value,Mn);if(ao===null){Br===null&&(Br=qs);break}i&&Br&&ao.alternate===null&&s(Ee,Br),be=A(ao,be,Oi),Vr===null?cr=ao:Vr.sibling=ao,Vr=ao,Br=qs}if(Gi.done)return u(Ee,Br),_s&&jr(Ee,Oi),cr;if(Br===null){for(;!Gi.done;Oi++,Gi=Ze.next())Gi=kt(Ee,Gi.value,Mn),Gi!==null&&(be=A(Gi,be,Oi),Vr===null?cr=Gi:Vr.sibling=Gi,Vr=Gi);return _s&&jr(Ee,Oi),cr}for(Br=p(Ee,Br);!Gi.done;Oi++,Gi=Ze.next())Gi=mr(Br,Ee,Oi,Gi.value,Mn),Gi!==null&&(i&&Gi.alternate!==null&&Br.delete(Gi.key===null?Oi:Gi.key),be=A(Gi,be,Oi),Vr===null?cr=Gi:Vr.sibling=Gi,Vr=Gi);return i&&Br.forEach(function(Na){return s(Ee,Na)}),_s&&jr(Ee,Oi),cr}function ts(Ee,be,Ze,Mn){if(typeof Ze=="object"&&Ze!==null&&Ze.type===Wt&&Ze.key===null&&(Ze=Ze.props.children),typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case ve:e:{for(var cr=Ze.key,Vr=be;Vr!==null;){if(Vr.key===cr){if(cr=Ze.type,cr===Wt){if(Vr.tag===7){u(Ee,Vr.sibling),be=y(Vr,Ze.props.children),be.return=Ee,Ee=be;break e}}else if(Vr.elementType===cr||typeof cr=="object"&&cr!==null&&cr.$$typeof===dr&&Ti(cr)===Vr.type){u(Ee,Vr.sibling),be=y(Vr,Ze.props),be.ref=ta(Ee,Vr,Ze),be.return=Ee,Ee=be;break e}u(Ee,Vr);break}else s(Ee,Vr);Vr=Vr.sibling}Ze.type===Wt?(be=Kl(Ze.props.children,Ee.mode,Mn,Ze.key),be.return=Ee,Ee=be):(Mn=Oc(Ze.type,Ze.key,Ze.props,null,Ee.mode,Mn),Mn.ref=ta(Ee,be,Ze),Mn.return=Ee,Ee=Mn)}return V(Ee);case ze:e:{for(Vr=Ze.key;be!==null;){if(be.key===Vr)if(be.tag===4&&be.stateNode.containerInfo===Ze.containerInfo&&be.stateNode.implementation===Ze.implementation){u(Ee,be.sibling),be=y(be,Ze.children||[]),be.return=Ee,Ee=be;break e}else{u(Ee,be);break}else s(Ee,be);be=be.sibling}be=d(Ze,Ee.mode,Mn),be.return=Ee,Ee=be}return V(Ee);case dr:return Vr=Ze._init,ts(Ee,be,Vr(Ze._payload),Mn)}if(Lt(Ze))return yn(Ee,be,Ze,Mn);if(Zn(Ze))return Ci(Ee,be,Ze,Mn);fo(Ee,Ze)}return typeof Ze=="string"&&Ze!==""||typeof Ze=="number"?(Ze=""+Ze,be!==null&&be.tag===6?(u(Ee,be.sibling),be=y(be,Ze),be.return=Ee,Ee=be):(u(Ee,be),be=yu(Ze,Ee.mode,Mn),be.return=Ee,Ee=be),V(Ee)):u(Ee,be)}return ts}var zt=ho(!0),Gs=ho(!1),Et={},xr=dn(Et),Po=dn(Et),po=dn(Et);function Us(i){if(i===Et)throw Error(de(174));return i}function mo(i,s){Xe(po,s),Xe(Po,i),Xe(xr,Et),i=Se(s),Ke(xr),Xe(xr,i)}function Io(){Ke(xr),Ke(Po),Ke(po)}function bo(i){var s=Us(po.current),u=Us(xr.current);s=we(u,i.type,s),u!==s&&(Xe(Po,i),Xe(xr,s))}function za(i){Po.current===i&&(Ke(xr),Ke(Po))}var Qi=dn(0);function Ba(i){for(var s=i;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||vr(u)||ni(u)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ua=[];function Qa(){for(var i=0;i<ua.length;i++){var s=ua[i];Ur?s._workInProgressVersionPrimary=null:s._workInProgressVersionSecondary=null}ua.length=0}var fa=Xn.ReactCurrentDispatcher,Xr=Xn.ReactCurrentBatchConfig,$r=0,Fs=null,Zs=null,U=null,q=!1,me=!1,Je=0,xt=0;function je(){throw Error(de(321))}function Dt(i,s){if(s===null)return!1;for(var u=0;u<s.length&&u<i.length;u++)if(!w(i[u],s[u]))return!1;return!0}function ln(i,s,u,p,y,A){if($r=A,Fs=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,fa.current=i===null||i.memoizedState===null?Fu:Ll,i=u(p,y),me){A=0;do{if(me=!1,Je=0,25<=A)throw Error(de(301));A+=1,U=Zs=null,s.updateQueue=null,fa.current=_i,i=u(p,y)}while(me)}if(fa.current=Vl,s=Zs!==null&&Zs.next!==null,$r=0,U=Zs=Fs=null,q=!1,s)throw Error(de(300));return i}function Sn(){var i=Je!==0;return Je=0,i}function gn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return U===null?Fs.memoizedState=U=i:U=U.next=i,U}function An(){if(Zs===null){var i=Fs.alternate;i=i!==null?i.memoizedState:null}else i=Zs.next;var s=U===null?Fs.memoizedState:U.next;if(s!==null)U=s,Zs=i;else{if(i===null)throw Error(de(310));Zs=i,i={memoizedState:Zs.memoizedState,baseState:Zs.baseState,baseQueue:Zs.baseQueue,queue:Zs.queue,next:null},U===null?Fs.memoizedState=U=i:U=U.next=i}return U}function wn(i,s){return typeof s=="function"?s(i):s}function xs(i){var s=An(),u=s.queue;if(u===null)throw Error(de(311));u.lastRenderedReducer=i;var p=Zs,y=p.baseQueue,A=u.pending;if(A!==null){if(y!==null){var V=y.next;y.next=A.next,A.next=V}p.baseQueue=y=A,u.pending=null}if(y!==null){A=y.next,p=p.baseState;var pe=V=null,Fe=null,nt=A;do{var Nt=nt.lane;if(($r&Nt)===Nt)Fe!==null&&(Fe=Fe.next={lane:0,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null}),p=nt.hasEagerState?nt.eagerState:i(p,nt.action);else{var kt={lane:Nt,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null};Fe===null?(pe=Fe=kt,V=p):Fe=Fe.next=kt,Fs.lanes|=Nt,Xa|=Nt}nt=nt.next}while(nt!==null&&nt!==A);Fe===null?V=p:Fe.next=pe,w(p,s.memoizedState)||(ba=!0),s.memoizedState=p,s.baseState=V,s.baseQueue=Fe,u.lastRenderedState=p}if(i=u.interleaved,i!==null){y=i;do A=y.lane,Fs.lanes|=A,Xa|=A,y=y.next;while(y!==i)}else y===null&&(u.lanes=0);return[s.memoizedState,u.dispatch]}function Dr(i){var s=An(),u=s.queue;if(u===null)throw Error(de(311));u.lastRenderedReducer=i;var p=u.dispatch,y=u.pending,A=s.memoizedState;if(y!==null){u.pending=null;var V=y=y.next;do A=i(A,V.action),V=V.next;while(V!==y);w(A,s.memoizedState)||(ba=!0),s.memoizedState=A,s.baseQueue===null&&(s.baseState=A),u.lastRenderedState=A}return[A,p]}function pr(){}function $(i,s){var u=Fs,p=An(),y=s(),A=!w(p.memoizedState,y);if(A&&(p.memoizedState=y,ba=!0),p=p.queue,Ys(ki.bind(null,u,p,i),[i]),p.getSnapshot!==s||A||U!==null&&U.memoizedState.tag&1){if(u.flags|=2048,Hi(9,fs.bind(null,u,p,y,s),void 0,null),eo===null)throw Error(de(349));$r&30||bi(u,s,y)}return y}function bi(i,s,u){i.flags|=16384,i={getSnapshot:s,value:u},s=Fs.updateQueue,s===null?(s={lastEffect:null,stores:null},Fs.updateQueue=s,s.stores=[i]):(u=s.stores,u===null?s.stores=[i]:u.push(i))}function fs(i,s,u,p){s.value=u,s.getSnapshot=p,Ps(s)&&Oa(i,1,-1)}function ki(i,s,u){return u(function(){Ps(s)&&Oa(i,1,-1)})}function Ps(i){var s=i.getSnapshot;i=i.value;try{var u=s();return!w(i,u)}catch(p){return!0}}function Ls(i){var s=gn();return typeof i=="function"&&(i=i()),s.memoizedState=s.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wn,lastRenderedState:i},s.queue=i,i=i.dispatch=_l.bind(null,Fs,i),[s.memoizedState,i]}function Hi(i,s,u,p){return i={tag:i,create:s,destroy:u,deps:p,next:null},s=Fs.updateQueue,s===null?(s={lastEffect:null,stores:null},Fs.updateQueue=s,s.lastEffect=i.next=i):(u=s.lastEffect,u===null?s.lastEffect=i.next=i:(p=u.next,u.next=i,i.next=p,s.lastEffect=i)),i}function Lo(){return An().memoizedState}function rs(i,s,u,p){var y=gn();Fs.flags|=i,y.memoizedState=Hi(1|s,u,void 0,p===void 0?null:p)}function Ds(i,s,u,p){var y=An();p=p===void 0?null:p;var A=void 0;if(Zs!==null){var V=Zs.memoizedState;if(A=V.destroy,p!==null&&Dt(p,V.deps)){y.memoizedState=Hi(s,u,A,p);return}}Fs.flags|=i,y.memoizedState=Hi(1|s,u,A,p)}function io(i,s){return rs(8390656,8,i,s)}function Ys(i,s){return Ds(2048,8,i,s)}function go(i,s){return Ds(4,2,i,s)}function as(i,s){return Ds(4,4,i,s)}function so(i,s){if(typeof s=="function")return i=i(),s(i),function(){s(null)};if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function ws(i,s,u){return u=u!=null?u.concat([i]):null,Ds(4,4,so.bind(null,s,i),u)}function Ui(){}function $o(i,s){var u=An();s=s===void 0?null:s;var p=u.memoizedState;return p!==null&&s!==null&&Dt(s,p[1])?p[0]:(u.memoizedState=[i,s],i)}function fl(i,s){var u=An();s=s===void 0?null:s;var p=u.memoizedState;return p!==null&&s!==null&&Dt(s,p[1])?p[0]:(i=i(),u.memoizedState=[i,s],i)}function Do(i,s){var u=oi;oi=u!==0&&4>u?u:4,i(!0);var p=Xr.transition;Xr.transition={};try{i(!1),s()}finally{oi=u,Xr.transition=p}}function Pa(){return An().memoizedState}function ka(i,s,u){var p=Ya(i);u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},ou(i)?xc(s,u):(Ha(i,s,u),u=Wo(),i=Oa(i,p,u),i!==null&&tc(i,s,p))}function _l(i,s,u){var p=Ya(i),y={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(ou(i))xc(s,y);else{Ha(i,s,y);var A=i.alternate;if(i.lanes===0&&(A===null||A.lanes===0)&&(A=s.lastRenderedReducer,A!==null))try{var V=s.lastRenderedState,pe=A(V,u);if(y.hasEagerState=!0,y.eagerState=pe,w(pe,V))return}catch(Fe){}finally{}u=Wo(),i=Oa(i,p,u),i!==null&&tc(i,s,p)}}function ou(i){var s=i.alternate;return i===Fs||s!==null&&s===Fs}function xc(i,s){me=q=!0;var u=i.pending;u===null?s.next=s:(s.next=u.next,u.next=s),i.pending=s}function Ha(i,s,u){eo!==null&&i.mode&1&&!(Ai&2)?(i=s.interleaved,i===null?(u.next=u,Jr===null?Jr=[s]:Jr.push(s)):(u.next=i.next,i.next=u),s.interleaved=u):(i=s.pending,i===null?u.next=u:(u.next=i.next,i.next=u),s.pending=u)}function tc(i,s,u){if(u&4194240){var p=s.lanes;p&=i.pendingLanes,u|=p,s.lanes=u,To(i,u)}}var Vl={readContext:Nr,useCallback:je,useContext:je,useEffect:je,useImperativeHandle:je,useInsertionEffect:je,useLayoutEffect:je,useMemo:je,useReducer:je,useRef:je,useState:je,useDebugValue:je,useDeferredValue:je,useTransition:je,useMutableSource:je,useSyncExternalStore:je,useId:je,unstable_isNewReconciler:!1},Fu={readContext:Nr,useCallback:function(i,s){return gn().memoizedState=[i,s===void 0?null:s],i},useContext:Nr,useEffect:io,useImperativeHandle:function(i,s,u){return u=u!=null?u.concat([i]):null,rs(4194308,4,so.bind(null,s,i),u)},useLayoutEffect:function(i,s){return rs(4194308,4,i,s)},useInsertionEffect:function(i,s){return rs(4,2,i,s)},useMemo:function(i,s){var u=gn();return s=s===void 0?null:s,i=i(),u.memoizedState=[i,s],i},useReducer:function(i,s,u){var p=gn();return s=u!==void 0?u(s):s,p.memoizedState=p.baseState=s,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:s},p.queue=i,i=i.dispatch=ka.bind(null,Fs,i),[p.memoizedState,i]},useRef:function(i){var s=gn();return i={current:i},s.memoizedState=i},useState:Ls,useDebugValue:Ui,useDeferredValue:function(i){var s=Ls(i),u=s[0],p=s[1];return io(function(){var y=Xr.transition;Xr.transition={};try{p(i)}finally{Xr.transition=y}},[i]),u},useTransition:function(){var i=Ls(!1),s=i[0];return i=Do.bind(null,i[1]),gn().memoizedState=i,[s,i]},useMutableSource:function(){},useSyncExternalStore:function(i,s,u){var p=Fs,y=gn();if(_s){if(u===void 0)throw Error(de(407));u=u()}else{if(u=s(),eo===null)throw Error(de(349));$r&30||bi(p,s,u)}y.memoizedState=u;var A={value:u,getSnapshot:s};return y.queue=A,io(ki.bind(null,p,A,i),[i]),p.flags|=2048,Hi(9,fs.bind(null,p,A,u,s),void 0,null),u},useId:function(){var i=gn(),s=eo.identifierPrefix;if(_s){var u=So,p=xo;u=(p&~(1<<32-Ms(p)-1)).toString(32)+u,s=":"+s+"R"+u,u=Je++,0<u&&(s+="H"+u.toString(32)),s+=":"}else u=xt++,s=":"+s+"r"+u.toString(32)+":";return i.memoizedState=s},unstable_isNewReconciler:!1},Ll={readContext:Nr,useCallback:$o,useContext:Nr,useEffect:Ys,useImperativeHandle:ws,useInsertionEffect:go,useLayoutEffect:as,useMemo:fl,useReducer:xs,useRef:Lo,useState:function(){return xs(wn)},useDebugValue:Ui,useDeferredValue:function(i){var s=xs(wn),u=s[0],p=s[1];return Ys(function(){var y=Xr.transition;Xr.transition={};try{p(i)}finally{Xr.transition=y}},[i]),u},useTransition:function(){var i=xs(wn)[0],s=An().memoizedState;return[i,s]},useMutableSource:pr,useSyncExternalStore:$,useId:Pa,unstable_isNewReconciler:!1},_i={readContext:Nr,useCallback:$o,useContext:Nr,useEffect:Ys,useImperativeHandle:ws,useInsertionEffect:go,useLayoutEffect:as,useMemo:fl,useReducer:Dr,useRef:Lo,useState:function(){return Dr(wn)},useDebugValue:Ui,useDeferredValue:function(i){var s=Dr(wn),u=s[0],p=s[1];return Ys(function(){var y=Xr.transition;Xr.transition={};try{p(i)}finally{Xr.transition=y}},[i]),u},useTransition:function(){var i=Dr(wn)[0],s=An().memoizedState;return[i,s]},useMutableSource:pr,useSyncExternalStore:$,useId:Pa,unstable_isNewReconciler:!1};function Dl(i,s){try{var u="",p=s;do u+=En(p),p=p.return;while(p);var y=u}catch(A){y=`
Error generating stack: `+A.message+`
`+A.stack}return{value:i,source:s,stack:y}}function Ia(i,s){try{console.error(s.value)}catch(u){setTimeout(function(){throw u})}}var yf=typeof WeakMap=="function"?WeakMap:Map;function zu(i,s,u){u=Kr(-1,u),u.tag=3,u.payload={element:null};var p=s.value;return u.callback=function(){ml||(ml=!0,Ul=p),Ia(i,s)},u}function xl(i,s,u){u=Kr(-1,u),u.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var y=s.value;u.payload=function(){return p(y)},u.callback=function(){Ia(i,s)}}var A=i.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(u.callback=function(){Ia(i,s),typeof p!="function"&&(wl===null?wl=new Set([this]):wl.add(this));var V=s.stack;this.componentDidCatch(s.value,{componentStack:V!==null?V:""})}),u}function Sc(i,s,u){var p=i.pingCache;if(p===null){p=i.pingCache=new yf;var y=new Set;p.set(s,y)}else y=p.get(s),y===void 0&&(y=new Set,p.set(s,y));y.has(u)||(y.add(u),i=wf.bind(null,i,s,u),s.then(i,i))}function La(i){do{var s;if((s=i.tag===13)&&(s=i.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return i;i=i.return}while(i!==null);return null}function au(i,s,u,p,y){return i.mode&1?(i.flags|=65536,i.lanes=y,i):(i===s?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(s=Kr(-1,1),s.tag=2,Mi(u,s))),u.lanes|=1),i)}function Da(i){i.flags|=4}function nc(i,s){if(i!==null&&i.child===s.child)return!0;if(s.flags&16)return!1;for(i=s.child;i!==null;){if(i.flags&12854||i.subtreeFlags&12854)return!1;i=i.sibling}return!0}var Wl,kc,Mc,Sl;if(Lr)Wl=function(i,s){for(var u=s.child;u!==null;){if(u.tag===5||u.tag===6)Oe(i,u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},kc=function(){},Mc=function(i,s,u,p,y){if(i=i.memoizedProps,i!==p){var A=s.stateNode,V=Us(xr.current);u=ct(A,u,i,p,y,V),(s.updateQueue=u)&&Da(s)}},Sl=function(i,s,u,p){u!==p&&Da(s)};else if(Yr){Wl=function(i,s,u,p){for(var y=s.child;y!==null;){if(y.tag===5){var A=y.stateNode;u&&p&&(A=Mr(A,y.type,y.memoizedProps,y)),Oe(i,A)}else if(y.tag===6)A=y.stateNode,u&&p&&(A=ti(A,y.memoizedProps,y)),Oe(i,A);else if(y.tag!==4){if(y.tag===22&&y.memoizedState!==null)A=y.child,A!==null&&(A.return=y),Wl(i,y,!0,!0);else if(y.child!==null){y.child.return=y,y=y.child;continue}}if(y===s)break;for(;y.sibling===null;){if(y.return===null||y.return===s)return;y=y.return}y.sibling.return=y.return,y=y.sibling}};var dl=function(i,s,u,p){for(var y=s.child;y!==null;){if(y.tag===5){var A=y.stateNode;u&&p&&(A=Mr(A,y.type,y.memoizedProps,y)),kn(i,A)}else if(y.tag===6)A=y.stateNode,u&&p&&(A=ti(A,y.memoizedProps,y)),kn(i,A);else if(y.tag!==4){if(y.tag===22&&y.memoizedState!==null)A=y.child,A!==null&&(A.return=y),dl(i,y,!0,!0);else if(y.child!==null){y.child.return=y,y=y.child;continue}}if(y===s)break;for(;y.sibling===null;){if(y.return===null||y.return===s)return;y=y.return}y.sibling.return=y.return,y=y.sibling}};kc=function(i,s){var u=s.stateNode;if(!nc(i,s)){i=u.containerInfo;var p=Ft(i);dl(p,s,!1,!1),u.pendingChildren=p,Da(s),On(i,p)}},Mc=function(i,s,u,p,y){var A=i.stateNode,V=i.memoizedProps;if((i=nc(i,s))&&V===p)s.stateNode=A;else{var pe=s.stateNode,Fe=Us(xr.current),nt=null;V!==p&&(nt=ct(pe,u,V,p,y,Fe)),i&&nt===null?s.stateNode=A:(A=st(A,nt,u,V,p,s,i,pe),wt(A,u,p,y,Fe)&&Da(s),s.stateNode=A,i?Da(s):Wl(A,s,!1,!1))}},Sl=function(i,s,u,p){u!==p?(i=Us(po.current),u=Us(xr.current),s.stateNode=ur(p,i,u,s),Da(s)):s.stateNode=i.stateNode}}else kc=function(){},Mc=function(){},Sl=function(){};function Ml(i,s){if(!_s)switch(i.tailMode){case"hidden":s=i.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function wo(i){var s=i.alternate!==null&&i.alternate.child===i.child,u=0,p=0;if(s)for(var y=i.child;y!==null;)u|=y.lanes|y.childLanes,p|=y.subtreeFlags&14680064,p|=y.flags&14680064,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)u|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=p,i.childLanes=u,s}function qf(i,s,u){var p=s.pendingProps;switch(Il(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wo(s),null;case 1:return Ar(s.type)&&vi(),wo(s),null;case 3:return p=s.stateNode,Io(),Ke(ir),Ke(Un),Qa(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(Fa(s)?Da(s):i===null||i.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Mo!==null&&(mu(Mo),Mo=null))),kc(i,s),wo(s),null;case 5:za(s),u=Us(po.current);var y=s.type;if(i!==null&&s.stateNode!=null)Mc(i,s,y,p,u),i.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!p){if(s.stateNode===null)throw Error(de(166));return wo(s),null}if(i=Us(xr.current),Fa(s)){if(!Bn)throw Error(de(175));i=Ji(s.stateNode,s.type,s.memoizedProps,u,i,s,!Sa),s.updateQueue=i,i!==null&&Da(s)}else{var A=Ne(y,p,u,i,s);Wl(A,s,!1,!1),s.stateNode=A,wt(A,y,p,u,i)&&Da(s)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return wo(s),null;case 6:if(i&&s.stateNode!=null)Sl(i,s,i.memoizedProps,p);else{if(typeof p!="string"&&s.stateNode===null)throw Error(de(166));if(i=Us(po.current),u=Us(xr.current),Fa(s)){if(!Bn)throw Error(de(176));if(i=s.stateNode,p=s.memoizedProps,(u=It(i,p,s,!Sa))&&(y=Ro,y!==null))switch(A=(y.mode&1)!==0,y.tag){case 3:xn(y.stateNode.containerInfo,i,p,A);break;case 5:et(y.type,y.memoizedProps,y.stateNode,i,p,A)}u&&Da(s)}else s.stateNode=ur(p,i,u,s)}return wo(s),null;case 13:if(Ke(Qi),p=s.memoizedState,_s&&uo!==null&&s.mode&1&&!(s.flags&128)){for(i=uo;i;)i=Ns(i);return Hs(),s.flags|=98560,s}if(p!==null&&p.dehydrated!==null){if(p=Fa(s),i===null){if(!p)throw Error(de(318));if(!Bn)throw Error(de(344));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(de(317));k(i,s)}else Hs(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;return wo(s),null}return Mo!==null&&(mu(Mo),Mo=null),s.flags&128?(s.lanes=u,s):(p=p!==null,u=!1,i===null?Fa(s):u=i.memoizedState!==null,p&&!u&&(s.child.flags|=8192,s.mode&1&&(i===null||Qi.current&1?Ks===0&&(Ks=3):pc())),s.updateQueue!==null&&(s.flags|=4),wo(s),null);case 4:return Io(),kc(i,s),i===null&&Tn(s.stateNode.containerInfo),wo(s),null;case 10:return In(s.type._context),wo(s),null;case 17:return Ar(s.type)&&vi(),wo(s),null;case 19:if(Ke(Qi),y=s.memoizedState,y===null)return wo(s),null;if(p=(s.flags&128)!==0,A=y.rendering,A===null)if(p)Ml(y,!1);else{if(Ks!==0||i!==null&&i.flags&128)for(i=s.child;i!==null;){if(A=Ba(i),A!==null){for(s.flags|=128,Ml(y,!1),i=A.updateQueue,i!==null&&(s.updateQueue=i,s.flags|=4),s.subtreeFlags=0,i=u,p=s.child;p!==null;)u=p,y=i,u.flags&=14680066,A=u.alternate,A===null?(u.childLanes=0,u.lanes=y,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=A.childLanes,u.lanes=A.lanes,u.child=A.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=A.memoizedProps,u.memoizedState=A.memoizedState,u.updateQueue=A.updateQueue,u.type=A.type,y=A.dependencies,u.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext}),p=p.sibling;return Xe(Qi,Qi.current&1|2),s.child}i=i.sibling}y.tail!==null&&O()>dc&&(s.flags|=128,p=!0,Ml(y,!1),s.lanes=4194304)}else{if(!p)if(i=Ba(A),i!==null){if(s.flags|=128,p=!0,i=i.updateQueue,i!==null&&(s.updateQueue=i,s.flags|=4),Ml(y,!0),y.tail===null&&y.tailMode==="hidden"&&!A.alternate&&!_s)return wo(s),null}else 2*O()-y.renderingStartTime>dc&&u!==1073741824&&(s.flags|=128,p=!0,Ml(y,!1),s.lanes=4194304);y.isBackwards?(A.sibling=s.child,s.child=A):(i=y.last,i!==null?i.sibling=A:s.child=A,y.last=A)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=O(),s.sibling=null,i=Qi.current,Xe(Qi,p?i&1|2:i&1),s):(wo(s),null);case 22:case 23:return vu(),p=s.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(s.flags|=8192),p&&s.mode&1?ia&1073741824&&(wo(s),Lr&&s.subtreeFlags&6&&(s.flags|=8192)):wo(s),null;case 24:return null;case 25:return null}throw Error(de(156,s.tag))}var Bu=Xn.ReactCurrentOwner,ba=!1;function da(i,s,u,p){s.child=i===null?Gs(s,null,u,p):zt(s,i.child,u,p)}function ku(i,s,u,p,y){u=u.render;var A=s.ref;return lr(s,y),p=ln(i,s,u,p,A,y),u=Sn(),i!==null&&!ba?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~y,Qn(i,s,y)):(_s&&u&&Ua(s),s.flags|=1,da(i,s,p,y),s.child)}function Hu(i,s,u,p,y){if(i===null){var A=u.type;return typeof A=="function"&&!Jc(A)&&A.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(s.tag=15,s.type=A,Gu(i,s,A,p,y)):(i=Oc(u.type,null,p,s,s.mode,y),i.ref=s.ref,i.return=s,s.child=i)}if(A=i.child,!(i.lanes&y)){var V=A.memoizedProps;if(u=u.compare,u=u!==null?u:Ct,u(V,p)&&i.ref===s.ref)return Qn(i,s,y)}return s.flags|=1,i=Cl(A,p),i.ref=s.ref,i.return=s,s.child=i}function Gu(i,s,u,p,y){if(i!==null&&Ct(i.memoizedProps,p)&&i.ref===s.ref)if(ba=!1,(i.lanes&y)!==0)i.flags&131072&&(ba=!0);else return s.lanes=i.lanes,Qn(i,s,y);return tl(i,s,u,p,y)}function ds(i,s,u){var p=s.pendingProps,y=p.children,A=i!==null?i.memoizedState:null;if(p.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null},Xe(ja,ia),ia|=u;else if(u&1073741824)s.memoizedState={baseLanes:0,cachePool:null},p=A!==null?A.baseLanes:u,Xe(ja,ia),ia|=p;else return i=A!==null?A.baseLanes|u:u,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:i,cachePool:null},s.updateQueue=null,Xe(ja,ia),ia|=i,null;else A!==null?(p=A.baseLanes|u,s.memoizedState=null):p=u,Xe(ja,ia),ia|=p;return da(i,s,y,u),s.child}function el(i,s){var u=s.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(s.flags|=512,s.flags|=2097152)}function tl(i,s,u,p,y){var A=Ar(u)?Kn:Un.current;return A=Gr(s,A),lr(s,y),u=ln(i,s,u,p,A,y),p=Sn(),i!==null&&!ba?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~y,Qn(i,s,y)):(_s&&p&&Ua(s),s.flags|=1,da(i,s,u,y),s.child)}function lu(i,s,u,p,y){if(Ar(u)){var A=!0;Bi(s)}else A=!1;if(lr(s,y),s.stateNode===null)i!==null&&(i.alternate=null,s.alternate=null,s.flags|=2),Bo(s,u,p),Co(s,u,p,y),p=!0;else if(i===null){var V=s.stateNode,pe=s.memoizedProps;V.props=pe;var Fe=V.context,nt=u.contextType;typeof nt=="object"&&nt!==null?nt=Nr(nt):(nt=Ar(u)?Kn:Un.current,nt=Gr(s,nt));var Nt=u.getDerivedStateFromProps,kt=typeof Nt=="function"||typeof V.getSnapshotBeforeUpdate=="function";kt||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(pe!==p||Fe!==nt)&&Ao(s,V,p,nt),ci=!1;var un=s.memoizedState;V.state=un,ps(s,p,V,y),Fe=s.memoizedState,pe!==p||un!==Fe||ir.current||ci?(typeof Nt=="function"&&(Ws(s,u,Nt,p),Fe=s.memoizedState),(pe=ci||ns(s,u,pe,p,un,Fe,nt))?(kt||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(s.flags|=4194308)):(typeof V.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=p,s.memoizedState=Fe),V.props=p,V.state=Fe,V.context=nt,p=pe):(typeof V.componentDidMount=="function"&&(s.flags|=4194308),p=!1)}else{V=s.stateNode,Di(i,s),pe=s.memoizedProps,nt=s.type===s.elementType?pe:Ot(s.type,pe),V.props=nt,kt=s.pendingProps,un=V.context,Fe=u.contextType,typeof Fe=="object"&&Fe!==null?Fe=Nr(Fe):(Fe=Ar(u)?Kn:Un.current,Fe=Gr(s,Fe));var mr=u.getDerivedStateFromProps;(Nt=typeof mr=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(pe!==kt||un!==Fe)&&Ao(s,V,p,Fe),ci=!1,un=s.memoizedState,V.state=un,ps(s,p,V,y);var yn=s.memoizedState;pe!==kt||un!==yn||ir.current||ci?(typeof mr=="function"&&(Ws(s,u,mr,p),yn=s.memoizedState),(nt=ci||ns(s,u,nt,p,un,yn,Fe)||!1)?(Nt||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(p,yn,Fe),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(p,yn,Fe)),typeof V.componentDidUpdate=="function"&&(s.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof V.componentDidUpdate!="function"||pe===i.memoizedProps&&un===i.memoizedState||(s.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||pe===i.memoizedProps&&un===i.memoizedState||(s.flags|=1024),s.memoizedProps=p,s.memoizedState=yn),V.props=p,V.state=yn,V.context=Fe,p=nt):(typeof V.componentDidUpdate!="function"||pe===i.memoizedProps&&un===i.memoizedState||(s.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||pe===i.memoizedProps&&un===i.memoizedState||(s.flags|=1024),p=!1)}return Ga(i,s,u,p,A,y)}function Ga(i,s,u,p,y,A){el(i,s);var V=(s.flags&128)!==0;if(!p&&!V)return y&&ys(s,u,!1),Qn(i,s,A);p=s.stateNode,Bu.current=s;var pe=V&&typeof u.getDerivedStateFromError!="function"?null:p.render();return s.flags|=1,i!==null&&V?(s.child=zt(s,i.child,null,A),s.child=zt(s,null,pe,A)):da(i,s,pe,A),s.memoizedState=p.state,y&&ys(s,u,!0),s.child}function Ol(i){var s=i.stateNode;s.pendingContext?li(i,s.pendingContext,s.pendingContext!==s.context):s.context&&li(i,s.context,!1),mo(i,s.containerInfo)}function rc(i,s,u,p,y){return Hs(),ca(y),s.flags|=256,da(i,s,u,p),s.child}var bc={dehydrated:null,treeContext:null,retryLane:0};function ic(i){return{baseLanes:i,cachePool:null}}function Hc(i,s,u){var p=s.pendingProps,y=Qi.current,A=!1,V=(s.flags&128)!==0,pe;if((pe=V)||(pe=i!==null&&i.memoizedState===null?!1:(y&2)!==0),pe?(A=!0,s.flags&=-129):(i===null||i.memoizedState!==null)&&(y|=1),Xe(Qi,y&1),i===null)return yl(s),i=s.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(s.mode&1?ni(i)?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(y=p.children,i=p.fallback,A?(p=s.mode,A=s.child,y={mode:"hidden",children:y},!(p&1)&&A!==null?(A.childLanes=0,A.pendingProps=y):A=$c(y,p,0,null),i=Kl(i,p,u,null),A.return=s,i.return=s,A.sibling=i,s.child=A,s.child.memoizedState=ic(u),s.memoizedState=bc,i):wc(s,y));if(y=i.memoizedState,y!==null){if(pe=y.dehydrated,pe!==null){if(V)return s.flags&256?(s.flags&=-257,Ec(i,s,u,Error(de(422)))):s.memoizedState!==null?(s.child=i.child,s.flags|=128,null):(A=p.fallback,y=s.mode,p=$c({mode:"visible",children:p.children},y,0,null),A=Kl(A,y,u,null),A.flags|=2,p.return=s,A.return=s,p.sibling=A,s.child=p,s.mode&1&&zt(s,i.child,null,u),s.child.memoizedState=ic(u),s.memoizedState=bc,A);if(!(s.mode&1))s=Ec(i,s,u,null);else if(ni(pe))s=Ec(i,s,u,Error(de(419)));else if(p=(u&i.childLanes)!==0,ba||p){if(p=eo,p!==null){switch(u&-u){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}p=A&(p.suspendedLanes|u)?0:A,p!==0&&p!==y.retryLane&&(y.retryLane=p,Oa(i,p,-1))}pc(),s=Ec(i,s,u,Error(de(421)))}else vr(pe)?(s.flags|=128,s.child=i.child,s=Al.bind(null,i),Zi(pe,s),s=null):(u=y.treeContext,Bn&&(uo=os(pe),Ro=s,_s=!0,Mo=null,Sa=!1,u!==null&&(us[Yi++]=xo,us[Yi++]=So,us[Yi++]=Ra,xo=u.id,So=u.overflow,Ra=s)),s=wc(s,s.pendingProps.children),s.flags|=4096);return s}return A?(p=na(i,s,p.children,p.fallback,u),A=s.child,y=i.child.memoizedState,A.memoizedState=y===null?ic(u):{baseLanes:y.baseLanes|u,cachePool:null},A.childLanes=i.childLanes&~u,s.memoizedState=bc,p):(u=sc(i,s,p.children,u),s.memoizedState=null,u)}return A?(p=na(i,s,p.children,p.fallback,u),A=s.child,y=i.child.memoizedState,A.memoizedState=y===null?ic(u):{baseLanes:y.baseLanes|u,cachePool:null},A.childLanes=i.childLanes&~u,s.memoizedState=bc,p):(u=sc(i,s,p.children,u),s.memoizedState=null,u)}function wc(i,s){return s=$c({mode:"visible",children:s},i.mode,0,null),s.return=i,i.child=s}function sc(i,s,u,p){var y=i.child;return i=y.sibling,u=Cl(y,{mode:"visible",children:u}),!(s.mode&1)&&(u.lanes=p),u.return=s,u.sibling=null,i!==null&&(p=s.deletions,p===null?(s.deletions=[i],s.flags|=16):p.push(i)),s.child=u}function na(i,s,u,p,y){var A=s.mode;i=i.child;var V=i.sibling,pe={mode:"hidden",children:u};return!(A&1)&&s.child!==i?(u=s.child,u.childLanes=0,u.pendingProps=pe,s.deletions=null):(u=Cl(i,pe),u.subtreeFlags=i.subtreeFlags&14680064),V!==null?p=Cl(V,p):(p=Kl(p,A,y,null),p.flags|=2),p.return=s,u.return=s,u.sibling=p,s.child=u,p}function Ec(i,s,u,p){return p!==null&&ca(p),zt(s,i.child,null,u),i=wc(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function bl(i,s,u){i.lanes|=s;var p=i.alternate;p!==null&&(p.lanes|=s),fr(i.return,s,u)}function oc(i,s,u,p,y){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:y}:(A.isBackwards=s,A.rendering=null,A.renderingStartTime=0,A.last=p,A.tail=u,A.tailMode=y)}function Gc(i,s,u){var p=s.pendingProps,y=p.revealOrder,A=p.tail;if(da(i,s,p.children,u),p=Qi.current,p&2)p=p&1|2,s.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&bl(i,u,s);else if(i.tag===19)bl(i,u,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(Xe(Qi,p),!(s.mode&1))s.memoizedState=null;else switch(y){case"forwards":for(u=s.child,y=null;u!==null;)i=u.alternate,i!==null&&Ba(i)===null&&(y=u),u=u.sibling;u=y,u===null?(y=s.child,s.child=null):(y=u.sibling,u.sibling=null),oc(s,!1,y,u,A);break;case"backwards":for(u=null,y=s.child,s.child=null;y!==null;){if(i=y.alternate,i!==null&&Ba(i)===null){s.child=y;break}i=y.sibling,y.sibling=u,u=y,y=i}oc(s,!0,u,null,A);break;case"together":oc(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Qn(i,s,u){if(i!==null&&(s.dependencies=i.dependencies),Xa|=s.lanes,!(u&s.childLanes))return null;if(i!==null&&s.child!==i.child)throw Error(de(153));if(s.child!==null){for(i=s.child,u=Cl(i,i.pendingProps),s.child=u,u.return=s;i.sibling!==null;)i=i.sibling,u=u.sibling=Cl(i,i.pendingProps),u.return=s;u.sibling=null}return s.child}function ra(i,s,u){switch(s.tag){case 3:Ol(s),Hs();break;case 5:bo(s);break;case 1:Ar(s.type)&&Bi(s);break;case 4:mo(s,s.stateNode.containerInfo);break;case 10:jt(s,s.type._context,s.memoizedProps.value);break;case 13:var p=s.memoizedState;if(p!==null)return p.dehydrated!==null?(Xe(Qi,Qi.current&1),s.flags|=128,null):u&s.child.childLanes?Hc(i,s,u):(Xe(Qi,Qi.current&1),i=Qn(i,s,u),i!==null?i.sibling:null);Xe(Qi,Qi.current&1);break;case 19:if(p=(u&s.childLanes)!==0,i.flags&128){if(p)return Gc(i,s,u);s.flags|=128}var y=s.memoizedState;if(y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Xe(Qi,Qi.current),p)break;return null;case 22:case 23:return s.lanes=0,ds(i,s,u)}return Qn(i,s,u)}function _f(i,s){switch(Il(s),s.tag){case 1:return Ar(s.type)&&vi(),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Io(),Ke(ir),Ke(Un),Qa(),i=s.flags,i&65536&&!(i&128)?(s.flags=i&-65537|128,s):null;case 5:return za(s),null;case 13:if(Ke(Qi),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(de(340));Hs()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return Ke(Qi),null;case 4:return Io(),null;case 10:return In(s.type._context),null;case 22:case 23:return vu(),null;case 24:return null;default:return null}}var Oo=!1,ha=!1,nl=typeof WeakSet=="function"?WeakSet:Set,nr=null;function ko(i,s){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){pa(i,s,p)}else u.current=null}function ac(i,s,u){try{u()}catch(p){pa(i,s,p)}}var Vu=!1;function vo(i,s){for(Pe(i.containerInfo),nr=s;nr!==null;)if(i=nr,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,nr=s;else for(;nr!==null;){i=nr;try{var u=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(u!==null){var p=u.memoizedProps,y=u.memoizedState,A=i.stateNode,V=A.getSnapshotBeforeUpdate(i.elementType===i.type?p:Ot(i.type,p),y);A.__reactInternalSnapshotBeforeUpdate=V}break;case 3:Lr&&Ge(i.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(de(163))}}catch(pe){pa(i,i.return,pe)}if(s=i.sibling,s!==null){s.return=i.return,nr=s;break}nr=i.return}return u=Vu,Vu=!1,u}function hl(i,s,u){var p=s.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var y=p=p.next;do{if((y.tag&i)===i){var A=y.destroy;y.destroy=void 0,A!==void 0&&ac(s,u,A)}y=y.next}while(y!==p)}}function hs(i,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var u=s=s.next;do{if((u.tag&i)===i){var p=u.create;u.destroy=p()}u=u.next}while(u!==s)}}function Vc(i){var s=i.ref;if(s!==null){var u=i.stateNode;switch(i.tag){case 5:i=Qe(u);break;default:i=u}typeof s=="function"?s(i):s.current=i}}function cu(i,s,u){if(Y&&typeof Y.onCommitFiberUnmount=="function")try{Y.onCommitFiberUnmount(H,s)}catch(V){}switch(s.tag){case 0:case 11:case 14:case 15:if(i=s.updateQueue,i!==null&&(i=i.lastEffect,i!==null)){var p=i=i.next;do{var y=p,A=y.destroy;y=y.tag,A!==void 0&&(y&2||y&4)&&ac(s,u,A),p=p.next}while(p!==i)}break;case 1:if(ko(s,u),i=s.stateNode,typeof i.componentWillUnmount=="function")try{i.props=s.memoizedProps,i.state=s.memoizedState,i.componentWillUnmount()}catch(V){pa(s,u,V)}break;case 5:ko(s,u);break;case 4:Lr?ju(i,s,u):Yr&&Yr&&(s=s.stateNode.containerInfo,u=Ft(s),$n(s,u))}}function Wu(i,s,u){for(var p=s;;)if(cu(i,p,u),p.child===null||Lr&&p.tag===4){if(p===s)break;for(;p.sibling===null;){if(p.return===null||p.return===s)return;p=p.return}p.sibling.return=p.return,p=p.sibling}else p.child.return=p,p=p.child}function lc(i){var s=i.alternate;s!==null&&(i.alternate=null,lc(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&ai(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function xi(i){return i.tag===5||i.tag===3||i.tag===4}function Wc(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||xi(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function jc(i){if(Lr){e:{for(var s=i.return;s!==null;){if(xi(s))break e;s=s.return}throw Error(de(160))}var u=s;switch(u.tag){case 5:s=u.stateNode,u.flags&32&&(vt(s),u.flags&=-33),u=Wc(i),Cr(i,u,s);break;case 3:case 4:s=u.stateNode.containerInfo,u=Wc(i),uu(i,u,s);break;default:throw Error(de(161))}}}function uu(i,s,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,s?ye(u,i,s):Xi(u,i);else if(p!==4&&(i=i.child,i!==null))for(uu(i,s,u),i=i.sibling;i!==null;)uu(i,s,u),i=i.sibling}function Cr(i,s,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,s?Q(u,i,s):Hr(u,i);else if(p!==4&&(i=i.child,i!==null))for(Cr(i,s,u),i=i.sibling;i!==null;)Cr(i,s,u),i=i.sibling}function ju(i,s,u){for(var p=s,y=!1,A,V;;){if(!y){y=p.return;e:for(;;){if(y===null)throw Error(de(160));switch(A=y.stateNode,y.tag){case 5:V=!1;break e;case 3:A=A.containerInfo,V=!0;break e;case 4:A=A.containerInfo,V=!0;break e}y=y.return}y=!0}if(p.tag===5||p.tag===6)Wu(i,p,u),V?ge(A,p.stateNode):Ce(A,p.stateNode);else if(p.tag===18)V?ft(A,p.stateNode):He(A,p.stateNode);else if(p.tag===4){if(p.child!==null){A=p.stateNode.containerInfo,V=!0,p.child.return=p,p=p.child;continue}}else if(cu(i,p,u),p.child!==null){p.child.return=p,p=p.child;continue}if(p===s)break;for(;p.sibling===null;){if(p.return===null||p.return===s)return;p=p.return,p.tag===4&&(y=!1)}p.sibling.return=p.return,p=p.sibling}}function fu(i,s){if(Lr){switch(s.tag){case 0:case 11:case 14:case 15:hl(3,s,s.return),hs(3,s),hl(5,s,s.return);return;case 1:return;case 5:var u=s.stateNode;if(u!=null){var p=s.memoizedProps;i=i!==null?i.memoizedProps:p;var y=s.type,A=s.updateQueue;s.updateQueue=null,A!==null&&Ts(u,A,y,i,p,s)}return;case 6:if(s.stateNode===null)throw Error(de(162));u=s.memoizedProps,Wr(s.stateNode,i!==null?i.memoizedProps:u,u);return;case 3:Bn&&i!==null&&i.memoizedState.isDehydrated&&le(s.stateNode.containerInfo);return;case 12:return;case 13:wa(s);return;case 19:wa(s);return;case 17:return}throw Error(de(163))}switch(s.tag){case 0:case 11:case 14:case 15:hl(3,s,s.return),hs(3,s),hl(5,s,s.return);return;case 12:return;case 13:wa(s);return;case 19:wa(s);return;case 3:Bn&&i!==null&&i.memoizedState.isDehydrated&&le(s.stateNode.containerInfo);break;case 22:case 23:return}e:if(Yr){switch(s.tag){case 1:case 5:case 6:break e;case 3:case 4:s=s.stateNode,$n(s.containerInfo,s.pendingChildren);break e}throw Error(de(163))}}function wa(i){var s=i.updateQueue;if(s!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new nl),s.forEach(function(p){var y=Ef.bind(null,i,p);u.has(p)||(u.add(p),p.then(y,y))})}}function Xu(i,s){for(nr=s;nr!==null;){s=nr;var u=s.deletions;if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];try{var A=i;Lr?ju(A,y,s):Wu(A,y,s);var V=y.alternate;V!==null&&(V.return=null),y.return=null}catch(cr){pa(y,s,cr)}}if(u=s.child,s.subtreeFlags&12854&&u!==null)u.return=s,nr=u;else for(;nr!==null;){s=nr;try{var pe=s.flags;if(pe&32&&Lr&&vt(s.stateNode),pe&512){var Fe=s.alternate;if(Fe!==null){var nt=Fe.ref;nt!==null&&(typeof nt=="function"?nt(null):nt.current=null)}}if(pe&8192)switch(s.tag){case 13:if(s.memoizedState!==null){var Nt=s.alternate;(Nt===null||Nt.memoizedState===null)&&(Za=O())}break;case 22:var kt=s.memoizedState!==null,un=s.alternate,mr=un!==null&&un.memoizedState!==null;if(u=s,Lr){e:if(p=u,y=kt,A=null,Lr)for(var yn=p;;){if(yn.tag===5){if(A===null){A=yn;var Ci=yn.stateNode;y?Ht(Ci):_t(yn.stateNode,yn.memoizedProps)}}else if(yn.tag===6){if(A===null){var ts=yn.stateNode;y?Jt(ts):ht(ts,yn.memoizedProps)}}else if((yn.tag!==22&&yn.tag!==23||yn.memoizedState===null||yn===p)&&yn.child!==null){yn.child.return=yn,yn=yn.child;continue}if(yn===p)break;for(;yn.sibling===null;){if(yn.return===null||yn.return===p)break e;A===yn&&(A=null),yn=yn.return}A===yn&&(A=null),yn.sibling.return=yn.return,yn=yn.sibling}}if(kt&&!mr&&u.mode&1){nr=u;for(var Ee=u.child;Ee!==null;){for(u=nr=Ee;nr!==null;){p=nr;var be=p.child;switch(p.tag){case 0:case 11:case 14:case 15:hl(4,p,p.return);break;case 1:ko(p,p.return);var Ze=p.stateNode;if(typeof Ze.componentWillUnmount=="function"){var Mn=p.return;try{Ze.props=p.memoizedProps,Ze.state=p.memoizedState,Ze.componentWillUnmount()}catch(cr){pa(p,Mn,cr)}}break;case 5:ko(p,p.return);break;case 22:if(p.memoizedState!==null){No(u);continue}}be!==null?(be.return=p,nr=be):No(u)}Ee=Ee.sibling}}}switch(pe&4102){case 2:jc(s),s.flags&=-3;break;case 6:jc(s),s.flags&=-3,fu(s.alternate,s);break;case 4096:s.flags&=-4097;break;case 4100:s.flags&=-4097,fu(s.alternate,s);break;case 4:fu(s.alternate,s)}}catch(cr){pa(s,s.return,cr)}if(u=s.sibling,u!==null){u.return=s.return,nr=u;break}nr=s.return}}}function cc(i,s,u){nr=i,Ho(i,s,u)}function Ho(i,s,u){for(var p=(i.mode&1)!==0;nr!==null;){var y=nr,A=y.child;if(y.tag===22&&p){var V=y.memoizedState!==null||Oo;if(!V){var pe=y.alternate,Fe=pe!==null&&pe.memoizedState!==null||ha;pe=Oo;var nt=ha;if(Oo=V,(ha=Fe)&&!nt)for(nr=y;nr!==null;)V=nr,Fe=V.child,V.tag===22&&V.memoizedState!==null?wi(y):Fe!==null?(Fe.return=V,nr=Fe):wi(y);for(;A!==null;)nr=A,Ho(A,s,u),A=A.sibling;nr=y,Oo=pe,ha=nt}jl(i,s,u)}else y.subtreeFlags&8772&&A!==null?(A.return=y,nr=A):jl(i,s,u)}}function jl(i){for(;nr!==null;){var s=nr;if(s.flags&8772){var u=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:ha||hs(5,s);break;case 1:var p=s.stateNode;if(s.flags&4&&!ha)if(u===null)p.componentDidMount();else{var y=s.elementType===s.type?u.memoizedProps:Ot(s.type,u.memoizedProps);p.componentDidUpdate(y,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var A=s.updateQueue;A!==null&&ms(s,A,p);break;case 3:var V=s.updateQueue;if(V!==null){if(u=null,s.child!==null)switch(s.child.tag){case 5:u=Qe(s.child.stateNode);break;case 1:u=s.child.stateNode}ms(s,V,u)}break;case 5:var pe=s.stateNode;u===null&&s.flags&4&&Ln(pe,s.type,s.memoizedProps,s);break;case 6:break;case 4:break;case 12:break;case 13:if(Bn&&s.memoizedState===null){var Fe=s.alternate;if(Fe!==null){var nt=Fe.memoizedState;if(nt!==null){var Nt=nt.dehydrated;Nt!==null&&Ye(Nt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(de(163))}ha||s.flags&512&&Vc(s)}catch(kt){pa(s,s.return,kt)}}if(s===i){nr=null;break}if(u=s.sibling,u!==null){u.return=s.return,nr=u;break}nr=s.return}}function No(i){for(;nr!==null;){var s=nr;if(s===i){nr=null;break}var u=s.sibling;if(u!==null){u.return=s.return,nr=u;break}nr=s.return}}function wi(i){for(;nr!==null;){var s=nr;try{switch(s.tag){case 0:case 11:case 15:var u=s.return;try{hs(4,s)}catch(Fe){pa(s,u,Fe)}break;case 1:var p=s.stateNode;if(typeof p.componentDidMount=="function"){var y=s.return;try{p.componentDidMount()}catch(Fe){pa(s,y,Fe)}}var A=s.return;try{Vc(s)}catch(Fe){pa(s,A,Fe)}break;case 5:var V=s.return;try{Vc(s)}catch(Fe){pa(s,V,Fe)}}}catch(Fe){pa(s,s.return,Fe)}if(s===i){nr=null;break}var pe=s.sibling;if(pe!==null){pe.return=s.return,nr=pe;break}nr=s.return}}var Tc=0,Va=1,Xl=2,Wa=3,pl=4;if(typeof Symbol=="function"&&Symbol.for){var Go=Symbol.for;Tc=Go("selector.component"),Va=Go("selector.has_pseudo_class"),Xl=Go("selector.role"),Wa=Go("selector.test_id"),pl=Go("selector.text")}function Nl(i){var s=sn(i);if(s!=null){if(typeof s.memoizedProps["data-testname"]!="string")throw Error(de(364));return s}if(i=Ei(i),i===null)throw Error(de(362));return i.stateNode.current}function Ac(i,s){switch(s.$$typeof){case Tc:if(i.type===s.value)return!0;break;case Va:e:{s=s.value,i=[i,0];for(var u=0;u<i.length;){var p=i[u++],y=i[u++],A=s[y];if(p.tag!==5||!ei(p)){for(;A!=null&&Ac(p,A);)y++,A=s[y];if(y===s.length){s=!0;break e}else for(p=p.child;p!==null;)i.push(p,y),p=p.sibling}}s=!1}return s;case Xl:if(i.tag===5&&ii(i.stateNode,s.value))return!0;break;case pl:if((i.tag===5||i.tag===6)&&(i=Ss(i),i!==null&&0<=i.indexOf(s.value)))return!0;break;case Wa:if(i.tag===5&&(i=i.memoizedProps["data-testname"],typeof i=="string"&&i.toLowerCase()===s.value.toLowerCase()))return!0;break;default:throw Error(de(365))}return!1}function uc(i){switch(i.$$typeof){case Tc:return"<"+(Yn(i.value)||"Unknown")+">";case Va:return":has("+(uc(i)||"")+")";case Xl:return'[role="'+i.value+'"]';case pl:return'"'+i.value+'"';case Wa:return'[data-testname="'+i.value+'"]';default:throw Error(de(365))}}function Cc(i,s){var u=[];i=[i,0];for(var p=0;p<i.length;){var y=i[p++],A=i[p++],V=s[A];if(y.tag!==5||!ei(y)){for(;V!=null&&Ac(y,V);)A++,V=s[A];if(A===s.length)u.push(y);else for(y=y.child;y!==null;)i.push(y,A),y=y.sibling}}return u}function fc(i,s){if(!Si)throw Error(de(363));i=Nl(i),i=Cc(i,s),s=[],i=Array.from(i);for(var u=0;u<i.length;){var p=i[u++];if(p.tag===5)ei(p)||s.push(p.stateNode);else for(p=p.child;p!==null;)i.push(p),p=p.sibling}return s}var Xc=Math.ceil,Rc=Xn.ReactCurrentDispatcher,du=Xn.ReactCurrentOwner,yo=Xn.ReactCurrentBatchConfig,Ai=0,eo=null,es=null,Vo=0,ia=0,ja=dn(0),Ks=0,Uo=null,Xa=0,Pc=0,Zc=0,Ic=null,Ea=null,Za=0,dc=1/0;function oo(){dc=O()+500}var ml=!1,Ul=null,wl=null,Fl=!1,El=null,hc=0,Lc=0,hu=null,rl=-1,gl=0;function Wo(){return Ai&6?O():rl!==-1?rl:rl=O()}function Ya(i){return i.mode&1?Ai&2&&Vo!==0?Vo&-Vo:$e.transition!==null?(gl===0&&(i=Xs,Xs<<=1,!(Xs&4194240)&&(Xs=64),gl=i),gl):(i=oi,i!==0?i:_r()):1}function Oa(i,s,u){if(50<Lc)throw Lc=0,hu=null,Error(de(185));var p=Yc(i,s);return p===null?null:(Ni(p,s,u),(!(Ai&2)||p!==eo)&&(p===eo&&(!(Ai&2)&&(Pc|=s),Ks===4&&zl(p,Vo)),jo(p,u),s===1&&Ai===0&&!(i.mode&1)&&(oo(),G&&tt())),p)}function Yc(i,s){i.lanes|=s;var u=i.alternate;for(u!==null&&(u.lanes|=s),u=i,i=i.return;i!==null;)i.childLanes|=s,u=i.alternate,u!==null&&(u.childLanes|=s),u=i,i=i.return;return u.tag===3?u.stateNode:null}function jo(i,s){var u=i.callbackNode;As(i,s);var p=ks(i,i===eo?Vo:0);if(p===0)u!==null&&qo(u),i.callbackNode=null,i.callbackPriority=0;else if(s=p&-p,i.callbackPriority!==s){if(u!=null&&qo(u),s===1)i.tag===0?at(Kc.bind(null,i)):We(Kc.bind(null,i)),Tr?qr(function(){Ai===0&&tt()}):xa(m,tt),u=null;else{switch(la(p)){case 1:u=m;break;case 4:u=v;break;case 16:u=C;break;case 536870912:u=N;break;default:u=C}u=$u(u,xf.bind(null,i))}i.callbackPriority=s,i.callbackNode=u}}function xf(i,s){if(rl=-1,gl=0,Ai&6)throw Error(de(327));var u=i.callbackNode;if(Bl()&&i.callbackNode!==u)return null;var p=ks(i,i===eo?Vo:0);if(p===0)return null;if(p&30||p&i.expiredLanes||s)s=Tl(i,p);else{s=p;var y=Ai;Ai|=2;var A=Dc();(eo!==i||Vo!==s)&&(oo(),Zl(i,s));do try{Mf();break}catch(pe){il(i,pe)}while(1);on(),Rc.current=A,Ai=y,es!==null?s=0:(eo=null,Vo=0,s=Ks)}if(s!==0){if(s===2&&(y=Cs(i),y!==0&&(p=y,s=pu(i,y))),s===1)throw u=Uo,Zl(i,0),zl(i,p),jo(i,O()),u;if(s===6)zl(i,p);else{if(y=i.current.alternate,!(p&30)&&!Sf(y)&&(s=Tl(i,p),s===2&&(A=Cs(i),A!==0&&(p=A,s=pu(i,A))),s===1))throw u=Uo,Zl(i,0),zl(i,p),jo(i,O()),u;switch(i.finishedWork=y,i.finishedLanes=p,s){case 0:case 1:throw Error(de(345));case 2:Yl(i,Ea);break;case 3:if(zl(i,p),(p&130023424)===p&&(s=Za+500-O(),10<s)){if(ks(i,0)!==0)break;if(y=i.suspendedLanes,(y&p)!==p){Wo(),i.pingedLanes|=i.suspendedLanes&y;break}i.timeoutHandle=rr(Yl.bind(null,i,Ea),s);break}Yl(i,Ea);break;case 4:if(zl(i,p),(p&4194240)===p)break;for(s=i.eventTimes,y=-1;0<p;){var V=31-Ms(p);A=1<<V,V=s[V],V>y&&(y=V),p&=~A}if(p=y,p=O()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*Xc(p/1960))-p,10<p){i.timeoutHandle=rr(Yl.bind(null,i,Ea),p);break}Yl(i,Ea);break;case 5:Yl(i,Ea);break;default:throw Error(de(329))}}}return jo(i,O()),i.callbackNode===u?xf.bind(null,i):null}function pu(i,s){var u=Ic;return i.current.memoizedState.isDehydrated&&(Zl(i,s).flags|=256),i=Tl(i,s),i!==2&&(s=Ea,Ea=u,s!==null&&mu(s)),i}function mu(i){Ea===null?Ea=i:Ea.push.apply(Ea,i)}function Sf(i){for(var s=i;;){if(s.flags&16384){var u=s.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var y=u[p],A=y.getSnapshot;y=y.value;try{if(!w(A(),y))return!1}catch(V){return!1}}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function zl(i,s){for(s&=~Zc,s&=~Pc,i.suspendedLanes|=s,i.pingedLanes&=~s,i=i.expirationTimes;0<s;){var u=31-Ms(s),p=1<<u;i[u]=-1,s&=~p}}function Kc(i){if(Ai&6)throw Error(de(327));Bl();var s=ks(i,0);if(!(s&1))return jo(i,O()),null;var u=Tl(i,s);if(i.tag!==0&&u===2){var p=Cs(i);p!==0&&(s=p,u=pu(i,p))}if(u===1)throw u=Uo,Zl(i,0),zl(i,s),jo(i,O()),u;if(u===6)throw Error(de(345));return i.finishedWork=i.current.alternate,i.finishedLanes=s,Yl(i,Ea),jo(i,O()),null}function gu(i){El!==null&&El.tag===0&&!(Ai&6)&&Bl();var s=Ai;Ai|=1;var u=yo.transition,p=oi;try{if(yo.transition=null,oi=1,i)return i()}finally{oi=p,yo.transition=u,Ai=s,!(Ai&6)&&tt()}}function vu(){ia=ja.current,Ke(ja)}function Zl(i,s){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==zr&&(i.timeoutHandle=zr,yr(u)),es!==null)for(u=es.return;u!==null;){var p=u;switch(Il(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&vi();break;case 3:Io(),Ke(ir),Ke(Un),Qa();break;case 5:za(p);break;case 4:Io();break;case 13:Ke(Qi);break;case 19:Ke(Qi);break;case 10:In(p.type._context);break;case 22:case 23:vu()}u=u.return}if(eo=i,es=i=Cl(i.current,null),Vo=ia=s,Ks=0,Uo=null,Zc=Pc=Xa=0,Ea=Ic=null,Jr!==null){for(s=0;s<Jr.length;s++)if(u=Jr[s],p=u.interleaved,p!==null){u.interleaved=null;var y=p.next,A=u.pending;if(A!==null){var V=A.next;A.next=y,p.next=V}u.pending=p}Jr=null}return i}function il(i,s){do{var u=es;try{if(on(),fa.current=Vl,q){for(var p=Fs.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}q=!1}if($r=0,U=Zs=Fs=null,me=!1,Je=0,du.current=null,u===null||u.return===null){Ks=1,Uo=s,es=null;break}e:{var A=i,V=u.return,pe=u,Fe=s;if(s=Vo,pe.flags|=32768,Fe!==null&&typeof Fe=="object"&&typeof Fe.then=="function"){var nt=Fe,Nt=pe,kt=Nt.tag;if(!(Nt.mode&1)&&(kt===0||kt===11||kt===15)){var un=Nt.alternate;un?(Nt.updateQueue=un.updateQueue,Nt.memoizedState=un.memoizedState,Nt.lanes=un.lanes):(Nt.updateQueue=null,Nt.memoizedState=null)}var mr=La(V);if(mr!==null){mr.flags&=-257,au(mr,V,pe,A,s),mr.mode&1&&Sc(A,nt,s),s=mr,Fe=nt;var yn=s.updateQueue;if(yn===null){var Ci=new Set;Ci.add(Fe),s.updateQueue=Ci}else yn.add(Fe);break e}else{if(!(s&1)){Sc(A,nt,s),pc();break e}Fe=Error(de(426))}}else if(_s&&pe.mode&1){var ts=La(V);if(ts!==null){!(ts.flags&65536)&&(ts.flags|=256),au(ts,V,pe,A,s),ca(Fe);break e}}A=Fe,Ks!==4&&(Ks=2),Ic===null?Ic=[A]:Ic.push(A),Fe=Dl(Fe,pe),pe=V;do{switch(pe.tag){case 3:pe.flags|=65536,s&=-s,pe.lanes|=s;var Ee=zu(pe,Fe,s);bs(pe,Ee);break e;case 1:A=Fe;var be=pe.type,Ze=pe.stateNode;if(!(pe.flags&128)&&(typeof be.getDerivedStateFromError=="function"||Ze!==null&&typeof Ze.componentDidCatch=="function"&&(wl===null||!wl.has(Ze)))){pe.flags|=65536,s&=-s,pe.lanes|=s;var Mn=xl(pe,A,s);bs(pe,Mn);break e}}pe=pe.return}while(pe!==null)}Yu(u)}catch(cr){s=cr,es===u&&u!==null&&(es=u=u.return);continue}break}while(1)}function Dc(){var i=Rc.current;return Rc.current=Vl,i===null?Vl:i}function pc(){(Ks===0||Ks===3||Ks===2)&&(Ks=4),eo===null||!(Xa&268435455)&&!(Pc&268435455)||zl(eo,Vo)}function Tl(i,s){var u=Ai;Ai|=2;var p=Dc();eo===i&&Vo===s||Zl(i,s);do try{Zu();break}catch(y){il(i,y)}while(1);if(on(),Ai=u,Rc.current=p,es!==null)throw Error(de(261));return eo=null,Vo=0,Ks}function Zu(){for(;es!==null;)Ta(es)}function Mf(){for(;es!==null&&!$a();)Ta(es)}function Ta(i){var s=Ju(i.alternate,i,ia);i.memoizedProps=i.pendingProps,s===null?Yu(i):es=s,du.current=null}function Yu(i){var s=i;do{var u=s.alternate;if(i=s.return,s.flags&32768){if(u=_f(u,s),u!==null){u.flags&=32767,es=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Ks=6,es=null;return}}else if(u=qf(u,s,ia),u!==null){es=u;return}if(s=s.sibling,s!==null){es=s;return}es=s=i}while(s!==null);Ks===0&&(Ks=5)}function Yl(i,s){var u=oi,p=yo.transition;try{yo.transition=null,oi=1,bf(i,s,u)}finally{yo.transition=p,oi=u}return null}function bf(i,s,u){do Bl();while(El!==null);if(Ai&6)throw Error(de(327));var p=i.finishedWork,y=i.finishedLanes;if(p===null)return null;if(i.finishedWork=null,i.finishedLanes=0,p===i.current)throw Error(de(177));i.callbackNode=null,i.callbackPriority=0;var A=p.lanes|p.childLanes;if(Vs(i,A),i===eo&&(es=eo=null,Vo=0),!(p.subtreeFlags&2064)&&!(p.flags&2064)||Fl||(Fl=!0,$u(C,function(){return Bl(),null})),A=(p.flags&15990)!==0,p.subtreeFlags&15990||A){A=yo.transition,yo.transition=null;var V=oi;oi=1;var pe=Ai;Ai|=4,du.current=null,vo(i,p),Xu(i,p,y),Ve(i.containerInfo),i.current=p,cc(p,i,y),ro(),Ai=pe,oi=V,yo.transition=A}else i.current=p;if(Fl&&(Fl=!1,El=i,hc=y),A=i.pendingLanes,A===0&&(wl=null),R(p.stateNode,u),jo(i,O()),s!==null)for(u=i.onRecoverableError,p=0;p<s.length;p++)u(s[p]);if(ml)throw ml=!1,i=Ul,Ul=null,i;return hc&1&&i.tag!==0&&Bl(),A=i.pendingLanes,A&1?i===hu?Lc++:(Lc=0,hu=i):Lc=0,tt(),null}function Bl(){if(El!==null){var i=la(hc),s=yo.transition,u=oi;try{if(yo.transition=null,oi=16>i?16:i,El===null)var p=!1;else{if(i=El,El=null,hc=0,Ai&6)throw Error(de(331));var y=Ai;for(Ai|=4,nr=i.current;nr!==null;){var A=nr,V=A.child;if(nr.flags&16){var pe=A.deletions;if(pe!==null){for(var Fe=0;Fe<pe.length;Fe++){var nt=pe[Fe];for(nr=nt;nr!==null;){var Nt=nr;switch(Nt.tag){case 0:case 11:case 15:hl(8,Nt,A)}var kt=Nt.child;if(kt!==null)kt.return=Nt,nr=kt;else for(;nr!==null;){Nt=nr;var un=Nt.sibling,mr=Nt.return;if(lc(Nt),Nt===nt){nr=null;break}if(un!==null){un.return=mr,nr=un;break}nr=mr}}}var yn=A.alternate;if(yn!==null){var Ci=yn.child;if(Ci!==null){yn.child=null;do{var ts=Ci.sibling;Ci.sibling=null,Ci=ts}while(Ci!==null)}}nr=A}}if(A.subtreeFlags&2064&&V!==null)V.return=A,nr=V;else e:for(;nr!==null;){if(A=nr,A.flags&2048)switch(A.tag){case 0:case 11:case 15:hl(9,A,A.return)}var Ee=A.sibling;if(Ee!==null){Ee.return=A.return,nr=Ee;break e}nr=A.return}}var be=i.current;for(nr=be;nr!==null;){V=nr;var Ze=V.child;if(V.subtreeFlags&2064&&Ze!==null)Ze.return=V,nr=Ze;else e:for(V=be;nr!==null;){if(pe=nr,pe.flags&2048)try{switch(pe.tag){case 0:case 11:case 15:hs(9,pe)}}catch(cr){pa(pe,pe.return,cr)}if(pe===V){nr=null;break e}var Mn=pe.sibling;if(Mn!==null){Mn.return=pe.return,nr=Mn;break e}nr=pe.return}}if(Ai=y,tt(),Y&&typeof Y.onPostCommitFiberRoot=="function")try{Y.onPostCommitFiberRoot(H,i)}catch(cr){}p=!0}return p}finally{oi=u,yo.transition=s}}return!1}function Ku(i,s,u){s=Dl(u,s),s=zu(i,s,1),Mi(i,s),s=Wo(),i=Yc(i,1),i!==null&&(Ni(i,1,s),jo(i,s))}function pa(i,s,u){if(i.tag===3)Ku(i,i,u);else for(;s!==null;){if(s.tag===3){Ku(s,i,u);break}else if(s.tag===1){var p=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(wl===null||!wl.has(p))){i=Dl(u,i),i=xl(s,i,1),Mi(s,i),i=Wo(),s=Yc(s,1),s!==null&&(Ni(s,1,i),jo(s,i));break}}s=s.return}}function wf(i,s,u){var p=i.pingCache;p!==null&&p.delete(s),s=Wo(),i.pingedLanes|=i.suspendedLanes&u,eo===i&&(Vo&u)===u&&(Ks===4||Ks===3&&(Vo&130023424)===Vo&&500>O()-Za?Zl(i,0):Zc|=u),jo(i,s)}function qu(i,s){s===0&&(i.mode&1?(s=Ca,Ca<<=1,!(Ca&130023424)&&(Ca=4194304)):s=1);var u=Wo();i=Yc(i,s),i!==null&&(Ni(i,s,u),jo(i,u))}function Al(i){var s=i.memoizedState,u=0;s!==null&&(u=s.retryLane),qu(i,u)}function Ef(i,s){var u=0;switch(i.tag){case 13:var p=i.stateNode,y=i.memoizedState;y!==null&&(u=y.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(de(314))}p!==null&&p.delete(s),qu(i,u)}var Ju;Ju=function(i,s,u){if(i!==null)if(i.memoizedProps!==s.pendingProps||ir.current)ba=!0;else{if(!(i.lanes&u)&&!(s.flags&128))return ba=!1,ra(i,s,u);ba=!!(i.flags&131072)}else ba=!1,_s&&s.flags&1048576&&Rs(s,_o,s.index);switch(s.lanes=0,s.tag){case 2:var p=s.type;i!==null&&(i.alternate=null,s.alternate=null,s.flags|=2),i=s.pendingProps;var y=Gr(s,Un.current);lr(s,u),y=ln(null,s,p,i,y,u);var A=Sn();return s.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Ar(p)?(A=!0,Bi(s)):A=!1,s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,yi(s),y.updater=$i,s.stateNode=y,y._reactInternals=s,Co(s,p,i,u),s=Ga(null,s,p,!0,A,u)):(s.tag=0,_s&&A&&Ua(s),da(null,s,y,u),s=s.child),s;case 16:p=s.elementType;e:{switch(i!==null&&(i.alternate=null,s.alternate=null,s.flags|=2),i=s.pendingProps,y=p._init,p=y(p._payload),s.type=p,y=s.tag=Qu(p),i=Ot(p,i),y){case 0:s=tl(null,s,p,i,u);break e;case 1:s=lu(null,s,p,i,u);break e;case 11:s=ku(null,s,p,i,u);break e;case 14:s=Hu(null,s,p,Ot(p.type,i),u);break e}throw Error(de(306,p,""))}return s;case 0:return p=s.type,y=s.pendingProps,y=s.elementType===p?y:Ot(p,y),tl(i,s,p,y,u);case 1:return p=s.type,y=s.pendingProps,y=s.elementType===p?y:Ot(p,y),lu(i,s,p,y,u);case 3:e:{if(Ol(s),i===null)throw Error(de(387));p=s.pendingProps,A=s.memoizedState,y=A.element,Di(i,s),ps(s,p,null,u);var V=s.memoizedState;if(p=V.element,Bn&&A.isDehydrated)if(A={element:p,isDehydrated:!1,cache:V.cache,transitions:V.transitions},s.updateQueue.baseState=A,s.memoizedState=A,s.flags&256){y=Error(de(423)),s=rc(i,s,p,u,y);break e}else if(p!==y){y=Error(de(424)),s=rc(i,s,p,u,y);break e}else for(Bn&&(uo=js(s.stateNode.containerInfo),Ro=s,_s=!0,Mo=null,Sa=!1),u=Gs(s,null,p,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Hs(),p===y){s=Qn(i,s,u);break e}da(i,s,p,u)}s=s.child}return s;case 5:return bo(s),i===null&&yl(s),p=s.type,y=s.pendingProps,A=i!==null?i.memoizedProps:null,V=y.children,Nn(p,y)?V=null:A!==null&&Nn(p,A)&&(s.flags|=32),el(i,s),da(i,s,V,u),s.child;case 6:return i===null&&yl(s),null;case 13:return Hc(i,s,u);case 4:return mo(s,s.stateNode.containerInfo),p=s.pendingProps,i===null?s.child=zt(s,null,p,u):da(i,s,p,u),s.child;case 11:return p=s.type,y=s.pendingProps,y=s.elementType===p?y:Ot(p,y),ku(i,s,p,y,u);case 7:return da(i,s,s.pendingProps,u),s.child;case 8:return da(i,s,s.pendingProps.children,u),s.child;case 12:return da(i,s,s.pendingProps.children,u),s.child;case 10:e:{if(p=s.type._context,y=s.pendingProps,A=s.memoizedProps,V=y.value,jt(s,p,V),A!==null)if(w(A.value,V)){if(A.children===y.children&&!ir.current){s=Qn(i,s,u);break e}}else for(A=s.child,A!==null&&(A.return=s);A!==null;){var pe=A.dependencies;if(pe!==null){V=A.child;for(var Fe=pe.firstContext;Fe!==null;){if(Fe.context===p){if(A.tag===1){Fe=Kr(-1,u&-u),Fe.tag=2;var nt=A.updateQueue;if(nt!==null){nt=nt.shared;var Nt=nt.pending;Nt===null?Fe.next=Fe:(Fe.next=Nt.next,Nt.next=Fe),nt.pending=Fe}}A.lanes|=u,Fe=A.alternate,Fe!==null&&(Fe.lanes|=u),fr(A.return,u,s),pe.lanes|=u;break}Fe=Fe.next}}else if(A.tag===10)V=A.type===s.type?null:A.child;else if(A.tag===18){if(V=A.return,V===null)throw Error(de(341));V.lanes|=u,pe=V.alternate,pe!==null&&(pe.lanes|=u),fr(V,u,s),V=A.sibling}else V=A.child;if(V!==null)V.return=A;else for(V=A;V!==null;){if(V===s){V=null;break}if(A=V.sibling,A!==null){A.return=V.return,V=A;break}V=V.return}A=V}da(i,s,y.children,u),s=s.child}return s;case 9:return y=s.type,p=s.pendingProps.children,lr(s,u),y=Nr(y),p=p(y),s.flags|=1,da(i,s,p,u),s.child;case 14:return p=s.type,y=Ot(p,s.pendingProps),y=Ot(p.type,y),Hu(i,s,p,y,u);case 15:return Gu(i,s,s.type,s.pendingProps,u);case 17:return p=s.type,y=s.pendingProps,y=s.elementType===p?y:Ot(p,y),i!==null&&(i.alternate=null,s.alternate=null,s.flags|=2),s.tag=1,Ar(p)?(i=!0,Bi(s)):i=!1,lr(s,u),Bo(s,p,y),Co(s,p,y,u),Ga(null,s,p,!0,i,u);case 19:return Gc(i,s,u);case 22:return ds(i,s,u)}throw Error(de(156,s.tag))};function $u(i,s){return xa(i,s)}function qc(i,s,u,p){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ka(i,s,u,p){return new qc(i,s,u,p)}function Jc(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Qu(i){if(typeof i=="function")return Jc(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Rn)return 11;if(i===Ir)return 14}return 2}function Cl(i,s){var u=i.alternate;return u===null?(u=Ka(i.tag,s,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=s,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,s=i.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function Oc(i,s,u,p,y,A){var V=2;if(p=i,typeof i=="function")Jc(i)&&(V=1);else if(typeof i=="string")V=5;else e:switch(i){case Wt:return Kl(u.children,y,A,s);case Ae:V=8,y|=8;break;case ut:return i=Ka(12,u,s,y|2),i.elementType=ut,i.lanes=A,i;case tn:return i=Ka(13,u,s,y),i.elementType=tn,i.lanes=A,i;case ee:return i=Ka(19,u,s,y),i.elementType=ee,i.lanes=A,i;case tr:return $c(u,y,A,s);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case it:V=10;break e;case en:V=9;break e;case Rn:V=11;break e;case Ir:V=14;break e;case dr:V=16,p=null;break e}throw Error(de(130,i==null?i:typeof i,""))}return s=Ka(V,u,s,y),s.elementType=i,s.type=p,s.lanes=A,s}function Kl(i,s,u,p){return i=Ka(7,i,p,s),i.lanes=u,i}function $c(i,s,u,p){return i=Ka(22,i,p,s),i.elementType=tr,i.lanes=u,i.stateNode={},i}function yu(i,s,u){return i=Ka(6,i,null,s),i.lanes=u,i}function d(i,s,u){return s=Ka(4,i.children!==null?i.children:[],i.key,s),s.lanes=u,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}function M(i,s,u,p,y){this.tag=s,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=zr,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=no(0),this.expirationTimes=no(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=no(0),this.identifierPrefix=p,this.onRecoverableError=y,Bn&&(this.mutableSourceEagerHydrationData=null)}function P(i,s,u,p,y,A,V,pe,Fe){return i=new M(i,s,u,pe,Fe),s===1?(s=1,A===!0&&(s|=8)):s=0,A=Ka(3,null,null,s),i.current=A,A.stateNode=i,A.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null},yi(A),i}function z(i){if(!i)return Zt;i=i._reactInternals;e:{if(pn(i)!==i||i.tag!==1)throw Error(de(170));var s=i;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Ar(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(de(171))}if(i.tag===1){var u=i.type;if(Ar(u))return sr(i,u,s)}return s}function J(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(de(188)):(i=Object.keys(i).join(","),Error(de(268,i)));return i=gr(s),i===null?null:i.stateNode}function oe(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<s?u:s}}function Re(i,s){oe(i,s),(i=i.alternate)&&oe(i,s)}function pt(i){return i=gr(i),i===null?null:i.stateNode}function Bt(){return null}return te.attemptContinuousHydration=function(i){if(i.tag===13){var s=Wo();Oa(i,134217728,s),Re(i,134217728)}},te.attemptHydrationAtCurrentPriority=function(i){if(i.tag===13){var s=Wo(),u=Ya(i);Oa(i,u,s),Re(i,u)}},te.attemptSynchronousHydration=function(i){switch(i.tag){case 3:var s=i.stateNode;if(s.current.memoizedState.isDehydrated){var u=_a(s.pendingLanes);u!==0&&(To(s,u|1),jo(s,O()),!(Ai&6)&&(oo(),tt()))}break;case 13:var p=Wo();gu(function(){return Oa(i,1,p)}),Re(i,1)}},te.batchedUpdates=function(i,s){var u=Ai;Ai|=1;try{return i(s)}finally{Ai=u,Ai===0&&(oo(),G&&tt())}},te.createComponentSelector=function(i){return{$$typeof:Tc,value:i}},te.createContainer=function(i,s,u,p,y,A,V){return P(i,s,!1,null,u,p,y,A,V)},te.createHasPseudoClassSelector=function(i){return{$$typeof:Va,value:i}},te.createHydrationContainer=function(i,s,u,p,y,A,V,pe,Fe){return i=P(u,p,!0,i,y,A,V,pe,Fe),i.context=z(null),u=i.current,p=Wo(),y=Ya(u),A=Kr(p,y),A.callback=s!=null?s:null,Mi(u,A),i.current.lanes=y,Ni(i,y,p),jo(i,p),i},te.createPortal=function(i,s,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ze,key:p==null?null:""+p,children:i,containerInfo:s,implementation:u}},te.createRoleSelector=function(i){return{$$typeof:Xl,value:i}},te.createTestNameSelector=function(i){return{$$typeof:Wa,value:i}},te.createTextSelector=function(i){return{$$typeof:pl,value:i}},te.deferredUpdates=function(i){var s=oi,u=yo.transition;try{return yo.transition=null,oi=16,i()}finally{oi=s,yo.transition=u}},te.discreteUpdates=function(i,s,u,p,y){var A=oi,V=yo.transition;try{return yo.transition=null,oi=1,i(s,u,p,y)}finally{oi=A,yo.transition=V,Ai===0&&oo()}},te.findAllNodes=fc,te.findBoundingRects=function(i,s){if(!Si)throw Error(de(363));s=fc(i,s),i=[];for(var u=0;u<s.length;u++)i.push(zi(s[u]));for(s=i.length-1;0<s;s--){u=i[s];for(var p=u.x,y=p+u.width,A=u.y,V=A+u.height,pe=s-1;0<=pe;pe--)if(s!==pe){var Fe=i[pe],nt=Fe.x,Nt=nt+Fe.width,kt=Fe.y,un=kt+Fe.height;if(p>=nt&&A>=kt&&y<=Nt&&V<=un){i.splice(s,1);break}else if(p!==nt||u.width!==Fe.width||un<A||kt>V){if(!(A!==kt||u.height!==Fe.height||Nt<p||nt>y)){nt>p&&(Fe.width+=nt-p,Fe.x=p),Nt<y&&(Fe.width=y-nt),i.splice(s,1);break}}else{kt>A&&(Fe.height+=kt-A,Fe.y=A),un<V&&(Fe.height=V-kt),i.splice(s,1);break}}}return i},te.findHostInstance=J,te.findHostInstanceWithNoPortals=function(i){return i=hr(i),i=i!==null?Kt(i):null,i===null?null:i.stateNode},te.findHostInstanceWithWarning=function(i){return J(i)},te.flushControlled=function(i){var s=Ai;Ai|=1;var u=yo.transition,p=oi;try{yo.transition=null,oi=1,i()}finally{oi=p,yo.transition=u,Ai=s,Ai===0&&(oo(),tt())}},te.flushPassiveEffects=Bl,te.flushSync=gu,te.focusWithin=function(i,s){if(!Si)throw Error(de(363));for(i=Nl(i),s=Cc(i,s),s=Array.from(s),i=0;i<s.length;){var u=s[i++];if(!ei(u)){if(u.tag===5&&ui(u.stateNode))return!0;for(u=u.child;u!==null;)s.push(u),u=u.sibling}}return!1},te.getCurrentUpdatePriority=function(){return oi},te.getFindAllNodesFailureDescription=function(i,s){if(!Si)throw Error(de(363));var u=0,p=[];i=[Nl(i),0];for(var y=0;y<i.length;){var A=i[y++],V=i[y++],pe=s[V];if((A.tag!==5||!ei(A))&&(Ac(A,pe)&&(p.push(uc(pe)),V++,V>u&&(u=V)),V<s.length))for(A=A.child;A!==null;)i.push(A,V),A=A.sibling}if(u<s.length){for(i=[];u<s.length;u++)i.push(uc(s[u]));return`findAllNodes was able to match part of the selector:
  `+(p.join(" > ")+`

No matching component was found for:
  `)+i.join(" > ")}return null},te.getPublicRootInstance=function(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return Qe(i.child.stateNode);default:return i.child.stateNode}},te.injectIntoDevTools=function(i){if(i={bundleType:i.bundleType,version:i.version,rendererPackageName:i.rendererPackageName,rendererConfig:i.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xn.ReactCurrentDispatcher,findHostInstanceByFiber:pt,findFiberByHostInstance:i.findFiberByHostInstance||Bt,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")i=!1;else{var s=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(s.isDisabled||!s.supportsFiber)i=!0;else{try{H=s.inject(i),Y=s}catch(u){}i=!!s.checkDCE}}return i},te.isAlreadyRendering=function(){return!1},te.observeVisibleRects=function(i,s,u,p){if(!Si)throw Error(de(363));i=fc(i,s);var y=ls(i,u,p).disconnect;return{disconnect:function(){y()}}},te.registerMutableSourceForHydration=function(i,s){var u=s._getVersion;u=u(s._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[s,u]:i.mutableSourceEagerHydrationData.push(s,u)},te.runWithPriority=function(i,s){var u=oi;try{return oi=i,s()}finally{oi=u}},te.shouldError=function(){return null},te.shouldSuspend=function(){return!1},te.updateContainer=function(i,s,u,p){var y=s.current,A=Wo(),V=Ya(y);return u=z(u),s.context===null?s.context=u:s.pendingContext=u,s=Kr(A,V),s.payload={element:i},p=p===void 0?null:p,p!==null&&(s.callback=p),Mi(y,s),i=Oa(y,V,A),i!==null&&cs(i,y,V),V},te}},32576:function(an,St,se){"use strict";an.exports=se(46511)},76525:function(an,St,se){"use strict";an.exports=se(67287)},60053:function(an,St){"use strict";function se(Qe,Se){var we=Qe.length;Qe.push(Se);e:for(;0<we;){var Pe=we-1>>>1,Ve=Qe[Pe];if(0<te(Ve,Se))Qe[Pe]=Se,Qe[we]=Ve,we=Pe;else break e}}function X(Qe){return Qe.length===0?null:Qe[0]}function ce(Qe){if(Qe.length===0)return null;var Se=Qe[0],we=Qe.pop();if(we!==Se){Qe[0]=we;e:for(var Pe=0,Ve=Qe.length,Ne=Ve>>>1;Pe<Ne;){var Oe=2*(Pe+1)-1,wt=Qe[Oe],ct=Oe+1,Nn=Qe[ct];if(0>te(wt,we))ct<Ve&&0>te(Nn,wt)?(Qe[Pe]=Nn,Qe[ct]=we,Pe=ct):(Qe[Pe]=wt,Qe[Oe]=we,Pe=Oe);else if(ct<Ve&&0>te(Nn,we))Qe[Pe]=Nn,Qe[ct]=we,Pe=ct;else break e}}return Se}function te(Qe,Se){var we=Qe.sortIndex-Se.sortIndex;return we!==0?we:Qe.id-Se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var Ue=performance;St.unstable_now=function(){return Ue.now()}}else{var Ut=Date,fn=Ut.now();St.unstable_now=function(){return Ut.now()-fn}}var de=[],Xn=[],ve=1,ze=null,Wt=3,Ae=!1,ut=!1,it=!1,en=typeof setTimeout=="function"?setTimeout:null,Rn=typeof clearTimeout=="function"?clearTimeout:null,tn=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ee(Qe){for(var Se=X(Xn);Se!==null;){if(Se.callback===null)ce(Xn);else if(Se.startTime<=Qe)ce(Xn),Se.sortIndex=Se.expirationTime,se(de,Se);else break;Se=X(Xn)}}function Ir(Qe){if(it=!1,ee(Qe),!ut)if(X(de)!==null)ut=!0,Kt(dr);else{var Se=X(Xn);Se!==null&&Lt(Ir,Se.startTime-Qe)}}function dr(Qe,Se){ut=!1,it&&(it=!1,Rn(Zn),Zn=-1),Ae=!0;var we=Wt;try{for(ee(Se),ze=X(de);ze!==null&&(!(ze.expirationTime>Se)||Qe&&!pn());){var Pe=ze.callback;if(typeof Pe=="function"){ze.callback=null,Wt=ze.priorityLevel;var Ve=Pe(ze.expirationTime<=Se);Se=St.unstable_now(),typeof Ve=="function"?ze.callback=Ve:ze===X(de)&&ce(de),ee(Se)}else ce(de);ze=X(de)}if(ze!==null)var Ne=!0;else{var Oe=X(Xn);Oe!==null&&Lt(Ir,Oe.startTime-Se),Ne=!1}return Ne}finally{ze=null,Wt=we,Ae=!1}}var tr=!1,zn=null,Zn=-1,Yn=5,vn=-1;function pn(){return!(St.unstable_now()-vn<Yn)}function dt(){if(zn!==null){var Qe=St.unstable_now();vn=Qe;var Se=!0;try{Se=zn(!0,Qe)}finally{Se?hr():(tr=!1,zn=null)}}else tr=!1}var hr;if(typeof tn=="function")hr=function(){tn(dt)};else if(typeof MessageChannel!="undefined"){var gr=new MessageChannel,ke=gr.port2;gr.port1.onmessage=dt,hr=function(){ke.postMessage(null)}}else hr=function(){en(dt,0)};function Kt(Qe){zn=Qe,tr||(tr=!0,hr())}function Lt(Qe,Se){Zn=en(function(){Qe(St.unstable_now())},Se)}St.unstable_IdlePriority=5,St.unstable_ImmediatePriority=1,St.unstable_LowPriority=4,St.unstable_NormalPriority=3,St.unstable_Profiling=null,St.unstable_UserBlockingPriority=2,St.unstable_cancelCallback=function(Qe){Qe.callback=null},St.unstable_continueExecution=function(){ut||Ae||(ut=!0,Kt(dr))},St.unstable_forceFrameRate=function(Qe){0>Qe||125<Qe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Yn=0<Qe?Math.floor(1e3/Qe):5},St.unstable_getCurrentPriorityLevel=function(){return Wt},St.unstable_getFirstCallbackNode=function(){return X(de)},St.unstable_next=function(Qe){switch(Wt){case 1:case 2:case 3:var Se=3;break;default:Se=Wt}var we=Wt;Wt=Se;try{return Qe()}finally{Wt=we}},St.unstable_pauseExecution=function(){},St.unstable_requestPaint=function(){},St.unstable_runWithPriority=function(Qe,Se){switch(Qe){case 1:case 2:case 3:case 4:case 5:break;default:Qe=3}var we=Wt;Wt=Qe;try{return Se()}finally{Wt=we}},St.unstable_scheduleCallback=function(Qe,Se,we){var Pe=St.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?Pe+we:Pe):we=Pe,Qe){case 1:var Ve=-1;break;case 2:Ve=250;break;case 5:Ve=1073741823;break;case 4:Ve=1e4;break;default:Ve=5e3}return Ve=we+Ve,Qe={id:ve++,callback:Se,priorityLevel:Qe,startTime:we,expirationTime:Ve,sortIndex:-1},we>Pe?(Qe.sortIndex=we,se(Xn,Qe),X(de)===null&&Qe===X(Xn)&&(it?(Rn(Zn),Zn=-1):it=!0,Lt(Ir,we-Pe))):(Qe.sortIndex=Ve,se(de,Qe),ut||Ae||(ut=!0,Kt(dr))),Qe},St.unstable_shouldYield=pn,St.unstable_wrapCallback=function(Qe){var Se=Wt;return function(){var we=Wt;Wt=Se;try{return Qe.apply(this,arguments)}finally{Wt=we}}}},63840:function(an,St,se){"use strict";an.exports=se(60053)},3515:function(an,St,se){var X=se(6015),ce=se(69617);function te(Ue,Ut,fn){return ce()?(an.exports=te=Reflect.construct.bind(),an.exports.__esModule=!0,an.exports.default=an.exports):(an.exports=te=function(Xn,ve,ze){var Wt=[null];Wt.push.apply(Wt,ve);var Ae=Function.bind.apply(Xn,Wt),ut=new Ae;return ze&&X(ut,ze.prototype),ut},an.exports.__esModule=!0,an.exports.default=an.exports),te.apply(null,arguments)}an.exports=te,an.exports.__esModule=!0,an.exports.default=an.exports},69617:function(an){function St(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(se){return!1}}an.exports=St,an.exports.__esModule=!0,an.exports.default=an.exports},6015:function(an){function St(se,X){return an.exports=St=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(te,Ue){return te.__proto__=Ue,te},an.exports.__esModule=!0,an.exports.default=an.exports,St(se,X)}an.exports=St,an.exports.__esModule=!0,an.exports.default=an.exports},59400:function(an){function St(se,X){return X||(X=se.slice(0)),Object.freeze(Object.defineProperties(se,{raw:{value:Object.freeze(X)}}))}an.exports=St,an.exports.__esModule=!0,an.exports.default=an.exports},12902:function(an,St,se){"use strict";se.d(St,{Uy:function(){return ii}});function X(Q){for(var ye=arguments.length,Ce=Array(ye>1?ye-1:0),ge=1;ge<ye;ge++)Ce[ge-1]=arguments[ge];if(!1)var vt,Ht;throw Error("[Immer] minified error nr: "+Q+(Ce.length?" "+Ce.map(function(Jt){return"'"+Jt+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ce(Q){return!!Q&&!!Q[sn]}function te(Q){var ye;return!!Q&&(function(Ce){if(!Ce||typeof Ce!="object")return!1;var ge=Object.getPrototypeOf(Ce);if(ge===null)return!0;var vt=Object.hasOwnProperty.call(ge,"constructor")&&ge.constructor;return vt===Object||typeof vt=="function"&&Function.toString.call(vt)===ai}(Q)||Array.isArray(Q)||!!Q[Bn]||!!(!((ye=Q.constructor)===null||ye===void 0)&&ye[Bn])||Wt(Q)||Ae(Q))}function Ue(Q){return ce(Q)||X(23,Q),Q[sn].t}function Ut(Q,ye,Ce){Ce===void 0&&(Ce=!1),fn(Q)===0?(Ce?Object.keys:Tr)(Q).forEach(function(ge){Ce&&typeof ge=="symbol"||ye(ge,Q[ge],Q)}):Q.forEach(function(ge,vt){return ye(vt,ge,Q)})}function fn(Q){var ye=Q[sn];return ye?ye.i>3?ye.i-4:ye.i:Array.isArray(Q)?1:Wt(Q)?2:Ae(Q)?3:0}function de(Q,ye){return fn(Q)===2?Q.has(ye):Object.prototype.hasOwnProperty.call(Q,ye)}function Xn(Q,ye){return fn(Q)===2?Q.get(ye):Q[ye]}function ve(Q,ye,Ce){var ge=fn(Q);ge===2?Q.set(ye,Ce):ge===3?Q.add(Ce):Q[ye]=Ce}function ze(Q,ye){return Q===ye?Q!==0||1/Q==1/ye:Q!=Q&&ye!=ye}function Wt(Q){return zr&&Q instanceof Map}function Ae(Q){return Ur&&Q instanceof Set}function ut(Q){return Q.o||Q.t}function it(Q){if(Array.isArray(Q))return Array.prototype.slice.call(Q);var ye=qr(Q);delete ye[sn];for(var Ce=Tr(ye),ge=0;ge<Ce.length;ge++){var vt=Ce[ge],Ht=ye[vt];Ht.writable===!1&&(Ht.writable=!0,Ht.configurable=!0),(Ht.get||Ht.set)&&(ye[vt]={configurable:!0,writable:!0,enumerable:Ht.enumerable,value:Q[vt]})}return Object.create(Object.getPrototypeOf(Q),ye)}function en(Q,ye){return ye===void 0&&(ye=!1),tn(Q)||ce(Q)||!te(Q)||(fn(Q)>1&&(Q.set=Q.add=Q.clear=Q.delete=Rn),Object.freeze(Q),ye&&Ut(Q,function(Ce,ge){return en(ge,!0)},!0)),Q}function Rn(){X(2)}function tn(Q){return Q==null||typeof Q!="object"||Object.isFrozen(Q)}function ee(Q){var ye=Si[Q];return ye||X(18,Q),ye}function Ir(Q,ye){Si[Q]||(Si[Q]=ye)}function dr(){return rr}function tr(Q,ye){ye&&(ee("Patches"),Q.u=[],Q.s=[],Q.v=ye)}function zn(Q){Zn(Q),Q.p.forEach(vn),Q.p=null}function Zn(Q){Q===rr&&(rr=Q.l)}function Yn(Q){return rr={p:[],l:rr,h:Q,m:!0,_:0}}function vn(Q){var ye=Q[sn];ye.i===0||ye.i===1?ye.j():ye.g=!0}function pn(Q,ye){ye._=ye.p.length;var Ce=ye.p[0],ge=Q!==void 0&&Q!==Ce;return ye.h.O||ee("ES5").S(ye,Q,ge),ge?(Ce[sn].P&&(zn(ye),X(4)),te(Q)&&(Q=dt(ye,Q),ye.l||gr(ye,Q)),ye.u&&ee("Patches").M(Ce[sn].t,Q,ye.u,ye.s)):Q=dt(ye,Ce,[]),zn(ye),ye.u&&ye.v(ye.u,ye.s),Q!==Yr?Q:void 0}function dt(Q,ye,Ce){if(tn(ye))return ye;var ge=ye[sn];if(!ge)return Ut(ye,function(_t,ht){return hr(Q,ge,ye,_t,ht,Ce)},!0),ye;if(ge.A!==Q)return ye;if(!ge.P)return gr(Q,ge.t,!0),ge.t;if(!ge.I){ge.I=!0,ge.A._--;var vt=ge.i===4||ge.i===5?ge.o=it(ge.k):ge.o,Ht=vt,Jt=!1;ge.i===3&&(Ht=new Set(vt),vt.clear(),Jt=!0),Ut(Ht,function(_t,ht){return hr(Q,ge,vt,_t,ht,Ce,Jt)}),gr(Q,vt,!1),Ce&&Q.u&&ee("Patches").N(ge,Ce,Q.u,Q.s)}return ge.o}function hr(Q,ye,Ce,ge,vt,Ht,Jt){if(ce(vt)){var _t=dt(Q,vt,Ht&&ye&&ye.i!==3&&!de(ye.R,ge)?Ht.concat(ge):void 0);if(ve(Ce,ge,_t),!ce(_t))return;Q.m=!1}else Jt&&Ce.add(vt);if(te(vt)&&!tn(vt)){if(!Q.h.D&&Q._<1)return;dt(Q,vt),ye&&ye.A.l||gr(Q,vt)}}function gr(Q,ye,Ce){Ce===void 0&&(Ce=!1),!Q.l&&Q.h.D&&Q.m&&en(ye,Ce)}function ke(Q,ye){var Ce=Q[sn];return(Ce?ut(Ce):Q)[ye]}function Kt(Q,ye){if(ye in Q)for(var Ce=Object.getPrototypeOf(Q);Ce;){var ge=Object.getOwnPropertyDescriptor(Ce,ye);if(ge)return ge;Ce=Object.getPrototypeOf(Ce)}}function Lt(Q){Q.P||(Q.P=!0,Q.l&&Lt(Q.l))}function Qe(Q){Q.o||(Q.o=it(Q.t))}function Se(Q,ye,Ce){var ge=Wt(ye)?ee("MapSet").F(ye,Ce):Ae(ye)?ee("MapSet").T(ye,Ce):Q.O?function(vt,Ht){var Jt=Array.isArray(vt),_t={i:Jt?1:0,A:Ht?Ht.A:dr(),P:!1,I:!1,R:{},l:Ht,t:vt,k:null,o:null,j:null,C:!1},ht=_t,Ge=Ei;Jt&&(ht=[_t],Ge=zi);var st=Proxy.revocable(ht,Ge),Ft=st.revoke,kn=st.proxy;return _t.k=kn,_t.j=Ft,kn}(ye,Ce):ee("ES5").J(ye,Ce);return(Ce?Ce.A:dr()).p.push(ge),ge}function we(Q){return ce(Q)||X(22,Q),function ye(Ce){if(!te(Ce))return Ce;var ge,vt=Ce[sn],Ht=fn(Ce);if(vt){if(!vt.P&&(vt.i<4||!ee("ES5").K(vt)))return vt.t;vt.I=!0,ge=Pe(Ce,Ht),vt.I=!1}else ge=Pe(Ce,Ht);return Ut(ge,function(Jt,_t){vt&&Xn(vt.t,Jt)===_t||ve(ge,Jt,ye(_t))}),Ht===3?new Set(ge):ge}(Q)}function Pe(Q,ye){switch(ye){case 2:return new Map(Q);case 3:return Array.from(Q)}return it(Q)}function Ve(){function Q(Jt,_t){var ht=Ht[Jt];return ht?ht.enumerable=_t:Ht[Jt]=ht={configurable:!0,enumerable:_t,get:function(){var Ge=this[sn];return Ei.get(Ge,Jt)},set:function(Ge){var st=this[sn];Ei.set(st,Jt,Ge)}},ht}function ye(Jt){for(var _t=Jt.length-1;_t>=0;_t--){var ht=Jt[_t][sn];if(!ht.P)switch(ht.i){case 5:ge(ht)&&Lt(ht);break;case 4:Ce(ht)&&Lt(ht)}}}function Ce(Jt){for(var _t=Jt.t,ht=Jt.k,Ge=Tr(ht),st=Ge.length-1;st>=0;st--){var Ft=Ge[st];if(Ft!==sn){var kn=_t[Ft];if(kn===void 0&&!de(_t,Ft))return!0;var On=ht[Ft],$n=On&&On[sn];if($n?$n.t!==kn:!ze(On,kn))return!0}}var Mr=!!_t[sn];return Ge.length!==Tr(_t).length+(Mr?0:1)}function ge(Jt){var _t=Jt.k;if(_t.length!==Jt.t.length)return!0;var ht=Object.getOwnPropertyDescriptor(_t,_t.length-1);if(ht&&!ht.get)return!0;for(var Ge=0;Ge<_t.length;Ge++)if(!_t.hasOwnProperty(Ge))return!0;return!1}function vt(Jt){Jt.g&&X(3,JSON.stringify(ut(Jt)))}var Ht={};Ir("ES5",{J:function(Jt,_t){var ht=Array.isArray(Jt),Ge=function(Ft,kn){if(Ft){for(var On=Array(kn.length),$n=0;$n<kn.length;$n++)Object.defineProperty(On,""+$n,Q($n,!0));return On}var Mr=qr(kn);delete Mr[sn];for(var ti=Tr(Mr),xe=0;xe<ti.length;xe++){var At=ti[xe];Mr[At]=Q(At,Ft||!!Mr[At].enumerable)}return Object.create(Object.getPrototypeOf(kn),Mr)}(ht,Jt),st={i:ht?5:4,A:_t?_t.A:dr(),P:!1,I:!1,R:{},l:_t,t:Jt,k:Ge,o:null,g:!1,C:!1};return Object.defineProperty(Ge,sn,{value:st,writable:!0}),Ge},S:function(Jt,_t,ht){ht?ce(_t)&&_t[sn].A===Jt&&ye(Jt.p):(Jt.u&&function Ge(st){if(st&&typeof st=="object"){var Ft=st[sn];if(Ft){var kn=Ft.t,On=Ft.k,$n=Ft.R,Mr=Ft.i;if(Mr===4)Ut(On,function(vr){vr!==sn&&(kn[vr]!==void 0||de(kn,vr)?$n[vr]||Ge(On[vr]):($n[vr]=!0,Lt(Ft)))}),Ut(kn,function(vr){On[vr]!==void 0||de(On,vr)||($n[vr]=!1,Lt(Ft))});else if(Mr===5){if(ge(Ft)&&(Lt(Ft),$n.length=!0),On.length<kn.length)for(var ti=On.length;ti<kn.length;ti++)$n[ti]=!1;else for(var xe=kn.length;xe<On.length;xe++)$n[xe]=!0;for(var At=Math.min(On.length,kn.length),Pn=0;Pn<At;Pn++)On.hasOwnProperty(Pn)||($n[Pn]=!0),$n[Pn]===void 0&&Ge(On[Pn])}}}}(Jt.p[0]),ye(Jt.p))},K:function(Jt){return Jt.i===4?Ce(Jt):ge(Jt)}})}function Ne(){function Q(ge){if(!te(ge))return ge;if(Array.isArray(ge))return ge.map(Q);if(Wt(ge))return new Map(Array.from(ge.entries()).map(function(Jt){return[Jt[0],Q(Jt[1])]}));if(Ae(ge))return new Set(Array.from(ge).map(Q));var vt=Object.create(Object.getPrototypeOf(ge));for(var Ht in ge)vt[Ht]=Q(ge[Ht]);return de(ge,Bn)&&(vt[Bn]=ge[Bn]),vt}function ye(ge){return ce(ge)?Q(ge):ge}var Ce="add";Ir("Patches",{$:function(ge,vt){return vt.forEach(function(Ht){for(var Jt=Ht.path,_t=Ht.op,ht=ge,Ge=0;Ge<Jt.length-1;Ge++){var st=fn(ht),Ft=Jt[Ge];typeof Ft!="string"&&typeof Ft!="number"&&(Ft=""+Ft),st!==0&&st!==1||Ft!=="__proto__"&&Ft!=="constructor"||X(24),typeof ht=="function"&&Ft==="prototype"&&X(24),typeof(ht=Xn(ht,Ft))!="object"&&X(15,Jt.join("/"))}var kn=fn(ht),On=Q(Ht.value),$n=Jt[Jt.length-1];switch(_t){case"replace":switch(kn){case 2:return ht.set($n,On);case 3:X(16);default:return ht[$n]=On}case Ce:switch(kn){case 1:return $n==="-"?ht.push(On):ht.splice($n,0,On);case 2:return ht.set($n,On);case 3:return ht.add(On);default:return ht[$n]=On}case"remove":switch(kn){case 1:return ht.splice($n,1);case 2:return ht.delete($n);case 3:return ht.delete(Ht.value);default:return delete ht[$n]}default:X(17,_t)}}),ge},N:function(ge,vt,Ht,Jt){switch(ge.i){case 0:case 4:case 2:return function(_t,ht,Ge,st){var Ft=_t.t,kn=_t.o;Ut(_t.R,function(On,$n){var Mr=Xn(Ft,On),ti=Xn(kn,On),xe=$n?de(Ft,On)?"replace":Ce:"remove";if(Mr!==ti||xe!=="replace"){var At=ht.concat(On);Ge.push(xe==="remove"?{op:xe,path:At}:{op:xe,path:At,value:ti}),st.push(xe===Ce?{op:"remove",path:At}:xe==="remove"?{op:Ce,path:At,value:ye(Mr)}:{op:"replace",path:At,value:ye(Mr)})}})}(ge,vt,Ht,Jt);case 5:case 1:return function(_t,ht,Ge,st){var Ft=_t.t,kn=_t.R,On=_t.o;if(On.length<Ft.length){var $n=[On,Ft];Ft=$n[0],On=$n[1];var Mr=[st,Ge];Ge=Mr[0],st=Mr[1]}for(var ti=0;ti<Ft.length;ti++)if(kn[ti]&&On[ti]!==Ft[ti]){var xe=ht.concat([ti]);Ge.push({op:"replace",path:xe,value:ye(On[ti])}),st.push({op:"replace",path:xe,value:ye(Ft[ti])})}for(var At=Ft.length;At<On.length;At++){var Pn=ht.concat([At]);Ge.push({op:Ce,path:Pn,value:ye(On[At])})}Ft.length<On.length&&st.push({op:"replace",path:ht.concat(["length"]),value:Ft.length})}(ge,vt,Ht,Jt);case 3:return function(_t,ht,Ge,st){var Ft=_t.t,kn=_t.o,On=0;Ft.forEach(function($n){if(!kn.has($n)){var Mr=ht.concat([On]);Ge.push({op:"remove",path:Mr,value:$n}),st.unshift({op:Ce,path:Mr,value:$n})}On++}),On=0,kn.forEach(function($n){if(!Ft.has($n)){var Mr=ht.concat([On]);Ge.push({op:Ce,path:Mr,value:$n}),st.unshift({op:"remove",path:Mr,value:$n})}On++})}(ge,vt,Ht,Jt)}},M:function(ge,vt,Ht,Jt){Ht.push({op:"replace",path:[],value:vt===Yr?void 0:vt}),Jt.push({op:"replace",path:[],value:ge})}})}function Oe(){function Q(_t,ht){function Ge(){this.constructor=_t}vt(_t,ht),_t.prototype=(Ge.prototype=ht.prototype,new Ge)}function ye(_t){_t.o||(_t.R=new Map,_t.o=new Map(_t.t))}function Ce(_t){_t.o||(_t.o=new Set,_t.t.forEach(function(ht){if(te(ht)){var Ge=Se(_t.A.h,ht,_t);_t.p.set(ht,Ge),_t.o.add(Ge)}else _t.o.add(ht)}))}function ge(_t){_t.g&&X(3,JSON.stringify(ut(_t)))}var vt=function(_t,ht){return(vt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ge,st){Ge.__proto__=st}||function(Ge,st){for(var Ft in st)st.hasOwnProperty(Ft)&&(Ge[Ft]=st[Ft])})(_t,ht)},Ht=function(){function _t(Ge,st){return this[sn]={i:2,l:st,A:st?st.A:dr(),P:!1,I:!1,o:void 0,R:void 0,t:Ge,k:this,C:!1,g:!1},this}Q(_t,Map);var ht=_t.prototype;return Object.defineProperty(ht,"size",{get:function(){return ut(this[sn]).size}}),ht.has=function(Ge){return ut(this[sn]).has(Ge)},ht.set=function(Ge,st){var Ft=this[sn];return ge(Ft),ut(Ft).has(Ge)&&ut(Ft).get(Ge)===st||(ye(Ft),Lt(Ft),Ft.R.set(Ge,!0),Ft.o.set(Ge,st),Ft.R.set(Ge,!0)),this},ht.delete=function(Ge){if(!this.has(Ge))return!1;var st=this[sn];return ge(st),ye(st),Lt(st),st.t.has(Ge)?st.R.set(Ge,!1):st.R.delete(Ge),st.o.delete(Ge),!0},ht.clear=function(){var Ge=this[sn];ge(Ge),ut(Ge).size&&(ye(Ge),Lt(Ge),Ge.R=new Map,Ut(Ge.t,function(st){Ge.R.set(st,!1)}),Ge.o.clear())},ht.forEach=function(Ge,st){var Ft=this;ut(this[sn]).forEach(function(kn,On){Ge.call(st,Ft.get(On),On,Ft)})},ht.get=function(Ge){var st=this[sn];ge(st);var Ft=ut(st).get(Ge);if(st.I||!te(Ft)||Ft!==st.t.get(Ge))return Ft;var kn=Se(st.A.h,Ft,st);return ye(st),st.o.set(Ge,kn),kn},ht.keys=function(){return ut(this[sn]).keys()},ht.values=function(){var Ge,st=this,Ft=this.keys();return(Ge={})[Tn]=function(){return st.values()},Ge.next=function(){var kn=Ft.next();return kn.done?kn:{done:!1,value:st.get(kn.value)}},Ge},ht.entries=function(){var Ge,st=this,Ft=this.keys();return(Ge={})[Tn]=function(){return st.entries()},Ge.next=function(){var kn=Ft.next();if(kn.done)return kn;var On=st.get(kn.value);return{done:!1,value:[kn.value,On]}},Ge},ht[Tn]=function(){return this.entries()},_t}(),Jt=function(){function _t(Ge,st){return this[sn]={i:3,l:st,A:st?st.A:dr(),P:!1,I:!1,o:void 0,t:Ge,k:this,p:new Map,g:!1,C:!1},this}Q(_t,Set);var ht=_t.prototype;return Object.defineProperty(ht,"size",{get:function(){return ut(this[sn]).size}}),ht.has=function(Ge){var st=this[sn];return ge(st),st.o?!!st.o.has(Ge)||!(!st.p.has(Ge)||!st.o.has(st.p.get(Ge))):st.t.has(Ge)},ht.add=function(Ge){var st=this[sn];return ge(st),this.has(Ge)||(Ce(st),Lt(st),st.o.add(Ge)),this},ht.delete=function(Ge){if(!this.has(Ge))return!1;var st=this[sn];return ge(st),Ce(st),Lt(st),st.o.delete(Ge)||!!st.p.has(Ge)&&st.o.delete(st.p.get(Ge))},ht.clear=function(){var Ge=this[sn];ge(Ge),ut(Ge).size&&(Ce(Ge),Lt(Ge),Ge.o.clear())},ht.values=function(){var Ge=this[sn];return ge(Ge),Ce(Ge),Ge.o.values()},ht.entries=function(){var Ge=this[sn];return ge(Ge),Ce(Ge),Ge.o.entries()},ht.keys=function(){return this.values()},ht[Tn]=function(){return this.values()},ht.forEach=function(Ge,st){for(var Ft=this.values(),kn=Ft.next();!kn.done;)Ge.call(st,kn.value,kn.value,this),kn=Ft.next()},_t}();Ir("MapSet",{F:function(_t,ht){return new Ht(_t,ht)},T:function(_t,ht){return new Jt(_t,ht)}})}function wt(){Ve(),Oe(),Ne()}function ct(Q){return Q}function Nn(Q){return Q}var ur,rr,yr=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",zr=typeof Map!="undefined",Ur=typeof Set!="undefined",Lr=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",Yr=yr?Symbol.for("immer-nothing"):((ur={})["immer-nothing"]=!0,ur),Bn=yr?Symbol.for("immer-draftable"):"__$immer_draftable",sn=yr?Symbol.for("immer-state"):"__$immer_state",Tn=typeof Symbol!="undefined"&&Symbol.iterator||"@@iterator",_r={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(Q){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+Q},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(Q){return"Cannot apply patch, path doesn't resolve: "+Q},16:'Sets cannot have "replace" patches.',17:function(Q){return"Unsupported patch operation: "+Q},18:function(Q){return"The plugin for '"+Q+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+Q+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(Q){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+Q+"'"},22:function(Q){return"'current' expects a draft, got: "+Q},23:function(Q){return"'original' expects a draft, got: "+Q},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},ai=""+Object.prototype.constructor,Tr=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(Q){return Object.getOwnPropertyNames(Q).concat(Object.getOwnPropertySymbols(Q))}:Object.getOwnPropertyNames,qr=Object.getOwnPropertyDescriptors||function(Q){var ye={};return Tr(Q).forEach(function(Ce){ye[Ce]=Object.getOwnPropertyDescriptor(Q,Ce)}),ye},Si={},Ei={get:function(Q,ye){if(ye===sn)return Q;var Ce=ut(Q);if(!de(Ce,ye))return function(vt,Ht,Jt){var _t,ht=Kt(Ht,Jt);return ht?"value"in ht?ht.value:(_t=ht.get)===null||_t===void 0?void 0:_t.call(vt.k):void 0}(Q,Ce,ye);var ge=Ce[ye];return Q.I||!te(ge)?ge:ge===ke(Q.t,ye)?(Qe(Q),Q.o[ye]=Se(Q.A.h,ge,Q)):ge},has:function(Q,ye){return ye in ut(Q)},ownKeys:function(Q){return Reflect.ownKeys(ut(Q))},set:function(Q,ye,Ce){var ge=Kt(ut(Q),ye);if(ge!=null&&ge.set)return ge.set.call(Q.k,Ce),!0;if(!Q.P){var vt=ke(ut(Q),ye),Ht=vt==null?void 0:vt[sn];if(Ht&&Ht.t===Ce)return Q.o[ye]=Ce,Q.R[ye]=!1,!0;if(ze(Ce,vt)&&(Ce!==void 0||de(Q.t,ye)))return!0;Qe(Q),Lt(Q)}return Q.o[ye]===Ce&&(Ce!==void 0||ye in Q.o)||Number.isNaN(Ce)&&Number.isNaN(Q.o[ye])||(Q.o[ye]=Ce,Q.R[ye]=!0),!0},deleteProperty:function(Q,ye){return ke(Q.t,ye)!==void 0||ye in Q.t?(Q.R[ye]=!1,Qe(Q),Lt(Q)):delete Q.R[ye],Q.o&&delete Q.o[ye],!0},getOwnPropertyDescriptor:function(Q,ye){var Ce=ut(Q),ge=Reflect.getOwnPropertyDescriptor(Ce,ye);return ge&&{writable:!0,configurable:Q.i!==1||ye!=="length",enumerable:ge.enumerable,value:Ce[ye]}},defineProperty:function(){X(11)},getPrototypeOf:function(Q){return Object.getPrototypeOf(Q.t)},setPrototypeOf:function(){X(12)}},zi={};Ut(Ei,function(Q,ye){zi[Q]=function(){return arguments[0]=arguments[0][0],ye.apply(this,arguments)}}),zi.deleteProperty=function(Q,ye){return zi.set.call(this,Q,ye,void 0)},zi.set=function(Q,ye,Ce){return Ei.set.call(this,Q[0],ye,Ce,Q[0])};var Ss=function(){function Q(Ce){var ge=this;this.O=Lr,this.D=!0,this.produce=function(vt,Ht,Jt){if(typeof vt=="function"&&typeof Ht!="function"){var _t=Ht;Ht=vt;var ht=ge;return function(Mr){var ti=this;Mr===void 0&&(Mr=_t);for(var xe=arguments.length,At=Array(xe>1?xe-1:0),Pn=1;Pn<xe;Pn++)At[Pn-1]=arguments[Pn];return ht.produce(Mr,function(vr){var ni;return(ni=Ht).call.apply(ni,[ti,vr].concat(At))})}}var Ge;if(typeof Ht!="function"&&X(6),Jt!==void 0&&typeof Jt!="function"&&X(7),te(vt)){var st=Yn(ge),Ft=Se(ge,vt,void 0),kn=!0;try{Ge=Ht(Ft),kn=!1}finally{kn?zn(st):Zn(st)}return typeof Promise!="undefined"&&Ge instanceof Promise?Ge.then(function(Mr){return tr(st,Jt),pn(Mr,st)},function(Mr){throw zn(st),Mr}):(tr(st,Jt),pn(Ge,st))}if(!vt||typeof vt!="object"){if((Ge=Ht(vt))===void 0&&(Ge=vt),Ge===Yr&&(Ge=void 0),ge.D&&en(Ge,!0),Jt){var On=[],$n=[];ee("Patches").M(vt,Ge,On,$n),Jt(On,$n)}return Ge}X(21,vt)},this.produceWithPatches=function(vt,Ht){if(typeof vt=="function")return function(Ge){for(var st=arguments.length,Ft=Array(st>1?st-1:0),kn=1;kn<st;kn++)Ft[kn-1]=arguments[kn];return ge.produceWithPatches(Ge,function(On){return vt.apply(void 0,[On].concat(Ft))})};var Jt,_t,ht=ge.produce(vt,Ht,function(Ge,st){Jt=Ge,_t=st});return typeof Promise!="undefined"&&ht instanceof Promise?ht.then(function(Ge){return[Ge,Jt,_t]}):[ht,Jt,_t]},typeof(Ce==null?void 0:Ce.useProxies)=="boolean"&&this.setUseProxies(Ce.useProxies),typeof(Ce==null?void 0:Ce.autoFreeze)=="boolean"&&this.setAutoFreeze(Ce.autoFreeze)}var ye=Q.prototype;return ye.createDraft=function(Ce){te(Ce)||X(8),ce(Ce)&&(Ce=we(Ce));var ge=Yn(this),vt=Se(this,Ce,void 0);return vt[sn].C=!0,Zn(ge),vt},ye.finishDraft=function(Ce,ge){var vt=Ce&&Ce[sn],Ht=vt.A;return tr(Ht,ge),pn(void 0,Ht)},ye.setAutoFreeze=function(Ce){this.D=Ce},ye.setUseProxies=function(Ce){Ce&&!Lr&&X(20),this.O=Ce},ye.applyPatches=function(Ce,ge){var vt;for(vt=ge.length-1;vt>=0;vt--){var Ht=ge[vt];if(Ht.path.length===0&&Ht.op==="replace"){Ce=Ht.value;break}}vt>-1&&(ge=ge.slice(vt+1));var Jt=ee("Patches").$;return ce(Ce)?Jt(Ce,ge):this.produce(Ce,function(_t){return Jt(_t,ge)})},Q}(),ei=new Ss,ii=ei.produce,ui=ei.produceWithPatches.bind(ei),ls=ei.setAutoFreeze.bind(ei),Hr=ei.setUseProxies.bind(ei),Xi=ei.applyPatches.bind(ei),Wr=ei.createDraft.bind(ei),Ln=ei.finishDraft.bind(ei),Ts=null},53683:function(an,St,se){"use strict";se.d(St,{Z:function(){return ye}});function X(Ce,ge,vt,Ht){var Jt=-1,_t=Ce==null?0:Ce.length;for(Ht&&_t&&(vt=Ce[++Jt]);++Jt<_t;)vt=ge(vt,Ce[Jt],Jt,Ce);return vt}var ce=X;function te(Ce){return function(ge){return Ce==null?void 0:Ce[ge]}}var Ue=te,Ut={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},fn=Ue(Ut),de=fn,Xn=se(80287),ve=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ze="\\u0300-\\u036f",Wt="\\ufe20-\\ufe2f",Ae="\\u20d0-\\u20ff",ut=ze+Wt+Ae,it="["+ut+"]",en=RegExp(it,"g");function Rn(Ce){return Ce=(0,Xn.Z)(Ce),Ce&&Ce.replace(ve,de).replace(en,"")}var tn=Rn,ee=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Ir(Ce){return Ce.match(ee)||[]}var dr=Ir,tr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function zn(Ce){return tr.test(Ce)}var Zn=zn,Yn="\\ud800-\\udfff",vn="\\u0300-\\u036f",pn="\\ufe20-\\ufe2f",dt="\\u20d0-\\u20ff",hr=vn+pn+dt,gr="\\u2700-\\u27bf",ke="a-z\\xdf-\\xf6\\xf8-\\xff",Kt="\\xac\\xb1\\xd7\\xf7",Lt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Qe="\\u2000-\\u206f",Se=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",we="A-Z\\xc0-\\xd6\\xd8-\\xde",Pe="\\ufe0e\\ufe0f",Ve=Kt+Lt+Qe+Se,Ne="['\u2019]",Oe="["+Ve+"]",wt="["+hr+"]",ct="\\d+",Nn="["+gr+"]",ur="["+ke+"]",rr="[^"+Yn+Ve+ct+gr+ke+we+"]",yr="\\ud83c[\\udffb-\\udfff]",zr="(?:"+wt+"|"+yr+")",Ur="[^"+Yn+"]",Lr="(?:\\ud83c[\\udde6-\\uddff]){2}",Yr="[\\ud800-\\udbff][\\udc00-\\udfff]",Bn="["+we+"]",sn="\\u200d",Tn="(?:"+ur+"|"+rr+")",_r="(?:"+Bn+"|"+rr+")",ai="(?:"+Ne+"(?:d|ll|m|re|s|t|ve))?",Tr="(?:"+Ne+"(?:D|LL|M|RE|S|T|VE))?",qr=zr+"?",Si="["+Pe+"]?",Ei="(?:"+sn+"(?:"+[Ur,Lr,Yr].join("|")+")"+Si+qr+")*",zi="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ss="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ei=Si+qr+Ei,ii="(?:"+[Nn,Lr,Yr].join("|")+")"+ei,ui=RegExp([Bn+"?"+ur+"+"+ai+"(?="+[Oe,Bn,"$"].join("|")+")",_r+"+"+Tr+"(?="+[Oe,Bn+Tn,"$"].join("|")+")",Bn+"?"+Tn+"+"+ai,Bn+"+"+Tr,Ss,zi,ct,ii].join("|"),"g");function ls(Ce){return Ce.match(ui)||[]}var Hr=ls;function Xi(Ce,ge,vt){return Ce=(0,Xn.Z)(Ce),ge=vt?void 0:ge,ge===void 0?Zn(Ce)?Hr(Ce):dr(Ce):Ce.match(ge)||[]}var Wr=Xi,Ln="['\u2019]",Ts=RegExp(Ln,"g");function Q(Ce){return function(ge){return ce(Wr(tn(ge).replace(Ts,"")),Ce,"")}}var ye=Q},68239:function(an,St,se){"use strict";se.d(St,{Z:function(){return Bn}});var X=se(80287);function ce(sn,Tn,_r){var ai=-1,Tr=sn.length;Tn<0&&(Tn=-Tn>Tr?0:Tr+Tn),_r=_r>Tr?Tr:_r,_r<0&&(_r+=Tr),Tr=Tn>_r?0:_r-Tn>>>0,Tn>>>=0;for(var qr=Array(Tr);++ai<Tr;)qr[ai]=sn[ai+Tn];return qr}var te=ce;function Ue(sn,Tn,_r){var ai=sn.length;return _r=_r===void 0?ai:_r,!Tn&&_r>=ai?sn:te(sn,Tn,_r)}var Ut=Ue,fn="\\ud800-\\udfff",de="\\u0300-\\u036f",Xn="\\ufe20-\\ufe2f",ve="\\u20d0-\\u20ff",ze=de+Xn+ve,Wt="\\ufe0e\\ufe0f",Ae="\\u200d",ut=RegExp("["+Ae+fn+ze+Wt+"]");function it(sn){return ut.test(sn)}var en=it;function Rn(sn){return sn.split("")}var tn=Rn,ee="\\ud800-\\udfff",Ir="\\u0300-\\u036f",dr="\\ufe20-\\ufe2f",tr="\\u20d0-\\u20ff",zn=Ir+dr+tr,Zn="\\ufe0e\\ufe0f",Yn="["+ee+"]",vn="["+zn+"]",pn="\\ud83c[\\udffb-\\udfff]",dt="(?:"+vn+"|"+pn+")",hr="[^"+ee+"]",gr="(?:\\ud83c[\\udde6-\\uddff]){2}",ke="[\\ud800-\\udbff][\\udc00-\\udfff]",Kt="\\u200d",Lt=dt+"?",Qe="["+Zn+"]?",Se="(?:"+Kt+"(?:"+[hr,gr,ke].join("|")+")"+Qe+Lt+")*",we=Qe+Lt+Se,Pe="(?:"+[hr+vn+"?",vn,gr,ke,Yn].join("|")+")",Ve=RegExp(pn+"(?="+pn+")|"+Pe+we,"g");function Ne(sn){return sn.match(Ve)||[]}var Oe=Ne;function wt(sn){return en(sn)?Oe(sn):tn(sn)}var ct=wt;function Nn(sn){return function(Tn){Tn=(0,X.Z)(Tn);var _r=en(Tn)?ct(Tn):void 0,ai=_r?_r[0]:Tn.charAt(0),Tr=_r?Ut(_r,1).join(""):Tn.slice(1);return ai[sn]()+Tr}}var ur=Nn,rr=ur("toUpperCase"),yr=rr;function zr(sn){return yr((0,X.Z)(sn).toLowerCase())}var Ur=zr,Lr=se(53683),Yr=(0,Lr.Z)(function(sn,Tn,_r){return Tn=Tn.toLowerCase(),sn+(_r?Ur(Tn):Tn)}),Bn=Yr},25923:function(an,St,se){"use strict";var X=se(53683),ce=(0,X.Z)(function(te,Ue,Ut){return te+(Ut?"-":"")+Ue.toLowerCase()});St.Z=ce},80287:function(an,St,se){"use strict";se.d(St,{Z:function(){return Rn}});var X=se(17685);function ce(tn,ee){for(var Ir=-1,dr=tn==null?0:tn.length,tr=Array(dr);++Ir<dr;)tr[Ir]=ee(tn[Ir],Ir,tn);return tr}var te=ce,Ue=se(27771),Ut=se(93589),fn=se(18533),de="[object Symbol]";function Xn(tn){return typeof tn=="symbol"||(0,fn.Z)(tn)&&(0,Ut.Z)(tn)==de}var ve=Xn,ze=1/0,Wt=X.Z?X.Z.prototype:void 0,Ae=Wt?Wt.toString:void 0;function ut(tn){if(typeof tn=="string")return tn;if((0,Ue.Z)(tn))return te(tn,ut)+"";if(ve(tn))return Ae?Ae.call(tn):"";var ee=tn+"";return ee=="0"&&1/tn==-ze?"-0":ee}var it=ut;function en(tn){return tn==null?"":it(tn)}var Rn=en},99477:function(an,St,se){"use strict";se.r(St),se.d(St,{ACESFilmicToneMapping:function(){return Si},AddEquation:function(){return zn},AddOperation:function(){return Tn},AdditiveAnimationBlendMode:function(){return oi},AdditiveBlending:function(){return ee},AlphaFormat:function(){return ni},AlwaysCompare:function(){return cs},AlwaysDepth:function(){return ur},AlwaysStencilFunc:function(){return lr},AmbientLight:function(){return Gm},AnimationAction:function(){return ig},AnimationClip:function(){return Xf},AnimationLoader:function(){return ay},AnimationMixer:function(){return Uy},AnimationObjectGroup:function(){return Oy},AnimationUtils:function(){return ry},ArcCurve:function(){return im},ArrayCamera:function(){return Cp},ArrowHelper:function(){return i_},AttachedBindMode:function(){return zi},Audio:function(){return tg},AudioAnalyser:function(){return wy},AudioContext:function(){return jh},AudioListener:function(){return Sy},AudioLoader:function(){return yy},AxesHelper:function(){return s_},BackSide:function(){return ut},BasicDepthPacking:function(){return O},BasicShadowMap:function(){return Xn},Bone:function(){return _h},BooleanKeyframeTrack:function(){return Au},Box2:function(){return Wy},Box3:function(){return ki},Box3Helper:function(){return n_},BoxGeometry:function(){return ja},BoxHelper:function(){return t_},BufferAttribute:function(){return hs},BufferGeometry:function(){return wi},BufferGeometryLoader:function(){return Zm},ByteType:function(){return Ft},Cache:function(){return Ru},Camera:function(){return dc},CameraHelper:function(){return e_},CanvasTexture:function(){return Av},CapsuleGeometry:function(){return wd},CatmullRomCurve3:function(){return sm},CineonToneMapping:function(){return qr},CircleGeometry:function(){return Ed},ClampToEdgeWrapping:function(){return Ln},Clock:function(){return $m},Color:function(){return Qn},ColorKeyframeTrack:function(){return Bh},ColorManagement:function(){return Xr},CompressedArrayTexture:function(){return Ev},CompressedCubeTexture:function(){return Tv},CompressedTexture:function(){return xd},CompressedTextureLoader:function(){return ly},ConeGeometry:function(){return Td},ConstantAlphaFactor:function(){return wt},ConstantColorFactor:function(){return Ne},CubeCamera:function(){return wl},CubeReflectionMapping:function(){return ii},CubeRefractionMapping:function(){return ui},CubeTexture:function(){return Fl},CubeTextureLoader:function(){return cy},CubeUVReflectionMapping:function(){return Xi},CubicBezierCurve:function(){return Ah},CubicBezierCurve3:function(){return am},CubicInterpolant:function(){return Im},CullFaceBack:function(){return Ut},CullFaceFront:function(){return fn},CullFaceFrontBack:function(){return de},CullFaceNone:function(){return Ue},Curve:function(){return Ql},CurvePath:function(){return cm},CustomBlending:function(){return tr},CustomToneMapping:function(){return Ei},CylinderGeometry:function(){return mf},Cylindrical:function(){return Vy},Data3DTexture:function(){return wn},DataArrayTexture:function(){return gn},DataTexture:function(){return df},DataTextureLoader:function(){return uy},DataUtils:function(){return Vu},DecrementStencilOp:function(){return Ct},DecrementWrapStencilOp:function(){return Ot},DefaultLoadingManager:function(){return Om},DepthFormat:function(){return js},DepthStencilFormat:function(){return os},DepthTexture:function(){return Rp},DetachedBindMode:function(){return Ss},DirectionalLight:function(){return Hm},DirectionalLightHelper:function(){return Qy},DiscreteInterpolant:function(){return Lm},DisplayP3ColorSpace:function(){return R},DodecahedronGeometry:function(){return Ad},DoubleSide:function(){return it},DstAlphaFactor:function(){return Qe},DstColorFactor:function(){return we},DynamicCopyUsage:function(){return Bo},DynamicDrawUsage:function(){return ps},DynamicReadUsage:function(){return Ws},EdgesGeometry:function(){return um},EllipseCurve:function(){return Sd},EqualCompare:function(){return ci},EqualDepth:function(){return zr},EqualStencilFunc:function(){return $t},EquirectangularReflectionMapping:function(){return ls},EquirectangularRefractionMapping:function(){return Hr},Euler:function(){return nc},EventDispatcher:function(){return us},ExtrudeGeometry:function(){return Od},FileLoader:function(){return Fc},Float16BufferAttribute:function(){return uu},Float32BufferAttribute:function(){return Cr},Float64BufferAttribute:function(){return ju},FloatType:function(){return ti},Fog:function(){return ld},FogExp2:function(){return ad},FramebufferTexture:function(){return wv},FrontSide:function(){return Ae},Frustum:function(){return Ya},GLBufferAttribute:function(){return ky},GLSL1:function(){return Co},GLSL3:function(){return Jo},GreaterCompare:function(){return Di},GreaterDepth:function(){return Lr},GreaterEqualCompare:function(){return Mi},GreaterEqualDepth:function(){return Ur},GreaterEqualStencilFunc:function(){return fr},GreaterStencilFunc:function(){return jt},GridHelper:function(){return Jy},Group:function(){return af},HalfFloatType:function(){return xe},HemisphereLight:function(){return Nm},HemisphereLightHelper:function(){return qy},IcosahedronGeometry:function(){return Nd},ImageBitmapLoader:function(){return vy},ImageLoader:function(){return Zf},ImageUtils:function(){return U},IncrementStencilOp:function(){return $e},IncrementWrapStencilOp:function(){return En},InstancedBufferAttribute:function(){return hf},InstancedBufferGeometry:function(){return Xm},InstancedInterleavedBuffer:function(){return By},InstancedMesh:function(){return Yp},Int16BufferAttribute:function(){return lc},Int32BufferAttribute:function(){return Wc},Int8BufferAttribute:function(){return Vc},IntType:function(){return $n},InterleavedBuffer:function(){return cd},InterleavedBufferAttribute:function(){return bu},Interpolant:function(){return Vf},InterpolateDiscrete:function(){return to},InterpolateLinear:function(){return As},InterpolateSmooth:function(){return Cs},InvertStencilOp:function(){return yt},KeepStencilOp:function(){return at},KeyframeTrack:function(){return ec},LOD:function(){return zp},LatheGeometry:function(){return Ff},Layers:function(){return Wl},LessCompare:function(){return Jr},LessDepth:function(){return rr},LessEqualCompare:function(){return yi},LessEqualDepth:function(){return yr},LessEqualStencilFunc:function(){return on},LessStencilFunc:function(){return hn},Light:function(){return ru},LightProbe:function(){return jm},Line:function(){return tu},Line3:function(){return jy},LineBasicMaterial:function(){return ol},LineCurve:function(){return Ch},LineCurve3:function(){return lm},LineDashedMaterial:function(){return Cm},LineLoop:function(){return em},LineSegments:function(){return gc},LinearDisplayP3ColorSpace:function(){return F},LinearEncoding:function(){return $a},LinearFilter:function(){return Ht},LinearInterpolant:function(){return zh},LinearMipMapLinearFilter:function(){return Ge},LinearMipMapNearestFilter:function(){return _t},LinearMipmapLinearFilter:function(){return ht},LinearMipmapNearestFilter:function(){return Jt},LinearSRGBColorSpace:function(){return Y},LinearToneMapping:function(){return ai},LinearTransfer:function(){return w},Loader:function(){return vl},LoaderUtils:function(){return Wh},LoadingManager:function(){return kh},LoopOnce:function(){return Ca},LoopPingPong:function(){return ks},LoopRepeat:function(){return _a},LuminanceAlphaFormat:function(){return va},LuminanceFormat:function(){return Ns},MOUSE:function(){return ce},Material:function(){return Oo},MaterialLoader:function(){return Gd},MathUtils:function(){return Gs},Matrix3:function(){return xr},Matrix4:function(){return _i},MaxEquation:function(){return pn},Mesh:function(){return es},MeshBasicMaterial:function(){return ha},MeshDepthMaterial:function(){return dh},MeshDistanceMaterial:function(){return hh},MeshLambertMaterial:function(){return Tm},MeshMatcapMaterial:function(){return Am},MeshNormalMaterial:function(){return Em},MeshPhongMaterial:function(){return bm},MeshPhysicalMaterial:function(){return Mm},MeshStandardMaterial:function(){return Nh},MeshToonMaterial:function(){return wm},MinEquation:function(){return vn},MirroredRepeatWrapping:function(){return Ts},MixOperation:function(){return sn},MultiplyBlending:function(){return dr},MultiplyOperation:function(){return Bn},NearestFilter:function(){return Q},NearestMipMapLinearFilter:function(){return vt},NearestMipMapNearestFilter:function(){return Ce},NearestMipmapLinearFilter:function(){return ge},NearestMipmapNearestFilter:function(){return ye},NeverCompare:function(){return Nr},NeverDepth:function(){return Nn},NeverStencilFunc:function(){return rn},NoBlending:function(){return Rn},NoColorSpace:function(){return N},NoToneMapping:function(){return _r},NormalAnimationBlendMode:function(){return To},NormalBlending:function(){return tn},NotEqualCompare:function(){return Kr},NotEqualDepth:function(){return Yr},NotEqualStencilFunc:function(){return In},NumberKeyframeTrack:function(){return Wf},Object3D:function(){return ds},ObjectLoader:function(){return my},ObjectSpaceNormalMap:function(){return C},OctahedronGeometry:function(){return Hf},OneFactor:function(){return hr},OneMinusConstantAlphaFactor:function(){return ct},OneMinusConstantColorFactor:function(){return Oe},OneMinusDstAlphaFactor:function(){return Se},OneMinusDstColorFactor:function(){return Pe},OneMinusSrcAlphaFactor:function(){return Lt},OneMinusSrcColorFactor:function(){return ke},OrthographicCamera:function(){return rd},P3Primaries:function(){return he},PCFShadowMap:function(){return ve},PCFSoftShadowMap:function(){return ze},PMREMGenerator:function(){return lh},Path:function(){return Uf},PerspectiveCamera:function(){return oo},Plane:function(){return rl},PlaneGeometry:function(){return jo},PlaneHelper:function(){return r_},PointLight:function(){return km},PointLightHelper:function(){return Yy},Points:function(){return nm},PointsMaterial:function(){return Sh},PolarGridHelper:function(){return $y},PolyhedronGeometry:function(){return nu},PositionalAudio:function(){return by},PropertyBinding:function(){return Is},PropertyMixer:function(){return rg},QuadraticBezierCurve:function(){return Rh},QuadraticBezierCurve3:function(){return Ph},Quaternion:function(){return pr},QuaternionKeyframeTrack:function(){return vf},QuaternionLinearInterpolant:function(){return Dm},RED_GREEN_RGTC2_Format:function(){return Ko},RED_RGTC1_Format:function(){return Ja},REVISION:function(){return X},RGBADepthPacking:function(){return m},RGBAFormat:function(){return Zi},RGBAIntegerFormat:function(){return le},RGBA_ASTC_10x10_Format:function(){return vi},RGBA_ASTC_10x5_Format:function(){return Kn},RGBA_ASTC_10x6_Format:function(){return Gr},RGBA_ASTC_10x8_Format:function(){return Ar},RGBA_ASTC_12x10_Format:function(){return li},RGBA_ASTC_12x12_Format:function(){return sr},RGBA_ASTC_4x4_Format:function(){return Pt},RGBA_ASTC_5x4_Format:function(){return Gn},RGBA_ASTC_5x5_Format:function(){return dn},RGBA_ASTC_6x5_Format:function(){return Ke},RGBA_ASTC_6x6_Format:function(){return Xe},RGBA_ASTC_8x5_Format:function(){return Zt},RGBA_ASTC_8x6_Format:function(){return Un},RGBA_ASTC_8x8_Format:function(){return ir},RGBA_BPTC_Format:function(){return Bi},RGBA_ETC2_EAC_Format:function(){return gt},RGBA_PVRTC_2BPPV1_Format:function(){return _e},RGBA_PVRTC_4BPPV1_Format:function(){return nn},RGBA_S3TC_DXT1_Format:function(){return He},RGBA_S3TC_DXT3_Format:function(){return ft},RGBA_S3TC_DXT5_Format:function(){return Dn},RGB_BPTC_SIGNED_Format:function(){return ys},RGB_BPTC_UNSIGNED_Format:function(){return Ms},RGB_ETC1_Format:function(){return De},RGB_ETC2_Format:function(){return ot},RGB_PVRTC_2BPPV1_Format:function(){return et},RGB_PVRTC_4BPPV1_Format:function(){return xn},RGB_S3TC_DXT1_Format:function(){return Ye},RGFormat:function(){return k},RGIntegerFormat:function(){return Z},RawShaderMaterial:function(){return Sm},Ray:function(){return Ll},Raycaster:function(){return Hy},Rec709Primaries:function(){return G},RectAreaLight:function(){return Vm},RedFormat:function(){return Ji},RedIntegerFormat:function(){return It},ReinhardToneMapping:function(){return Tr},RenderTarget:function(){return ln},RepeatWrapping:function(){return Wr},ReplaceStencilOp:function(){return tt},ReverseSubtractEquation:function(){return Yn},RingGeometry:function(){return Ud},SIGNED_RED_GREEN_RGTC2_Format:function(){return Xs},SIGNED_RED_RGTC1_Format:function(){return ya},SRGBColorSpace:function(){return H},SRGBTransfer:function(){return L},Scene:function(){return Lp},ShaderChunk:function(){return Ki},ShaderLib:function(){return $l},ShaderMaterial:function(){return Za},ShadowMaterial:function(){return xm},Shape:function(){return wu},ShapeGeometry:function(){return Fd},ShapePath:function(){return o_},ShapeUtils:function(){return vc},ShortType:function(){return kn},Skeleton:function(){return md},SkeletonHelper:function(){return Zy},SkinnedMesh:function(){return Wp},Source:function(){return me},Sphere:function(){return ka},SphereGeometry:function(){return Gf},Spherical:function(){return Gy},SphericalHarmonics3:function(){return Wm},SplineCurve:function(){return Ih},SpotLight:function(){return zm},SpotLightHelper:function(){return Xy},Sprite:function(){return Up},SpriteMaterial:function(){return mh},SrcAlphaFactor:function(){return Kt},SrcAlphaSaturateFactor:function(){return Ve},SrcColorFactor:function(){return gr},StaticCopyUsage:function(){return ns},StaticDrawUsage:function(){return bs},StaticReadUsage:function(){return $s},StereoCamera:function(){return _y},StreamCopyUsage:function(){return Ao},StreamDrawUsage:function(){return ms},StreamReadUsage:function(){return $i},StringKeyframeTrack:function(){return Cu},SubtractEquation:function(){return Zn},SubtractiveBlending:function(){return Ir},TOUCH:function(){return te},TangentSpaceNormalMap:function(){return v},TetrahedronGeometry:function(){return zd},Texture:function(){return je},TextureLoader:function(){return fy},TorusGeometry:function(){return Bd},TorusKnotGeometry:function(){return kd},Triangle:function(){return na},TriangleFanDrawMode:function(){return qo},TriangleStripDrawMode:function(){return xa},TrianglesDrawMode:function(){return la},TubeGeometry:function(){return Hd},TwoPassDoubleSide:function(){return en},UVMapping:function(){return ei},Uint16BufferAttribute:function(){return xi},Uint32BufferAttribute:function(){return jc},Uint8BufferAttribute:function(){return cu},Uint8ClampedBufferAttribute:function(){return Wu},Uniform:function(){return Yh},UniformsGroup:function(){return zy},UniformsLib:function(){return or},UniformsUtils:function(){return Zc},UnsignedByteType:function(){return st},UnsignedInt248Type:function(){return vr},UnsignedIntType:function(){return Mr},UnsignedShort4444Type:function(){return At},UnsignedShort5551Type:function(){return Pn},UnsignedShortType:function(){return On},VSMShadowMap:function(){return Wt},Vector2:function(){return Et},Vector3:function(){return $},Vector4:function(){return Dt},VectorKeyframeTrack:function(){return jf},VideoTexture:function(){return bv},WebGL1Renderer:function(){return Ip},WebGL3DRenderTarget:function(){return xs},WebGLArrayRenderTarget:function(){return An},WebGLCoordinateSystem:function(){return co},WebGLCubeRenderTarget:function(){return El},WebGLMultipleRenderTargets:function(){return Dr},WebGLRenderTarget:function(){return Sn},WebGLRenderer:function(){return Pp},WebGLUtils:function(){return Ap},WebGPUCoordinateSystem:function(){return _o},WireframeGeometry:function(){return vm},WrapAroundEnding:function(){return Vs},ZeroCurvatureEnding:function(){return no},ZeroFactor:function(){return dt},ZeroSlopeEnding:function(){return Ni},ZeroStencilOp:function(){return We},_SRGBAFormat:function(){return Qs},createCanvasElement:function(){return bo},sRGBEncoding:function(){return ro}});const X="158",ce={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},te={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Ue=0,Ut=1,fn=2,de=3,Xn=0,ve=1,ze=2,Wt=3,Ae=0,ut=1,it=2,en=2,Rn=0,tn=1,ee=2,Ir=3,dr=4,tr=5,zn=100,Zn=101,Yn=102,vn=103,pn=104,dt=200,hr=201,gr=202,ke=203,Kt=204,Lt=205,Qe=206,Se=207,we=208,Pe=209,Ve=210,Ne=211,Oe=212,wt=213,ct=214,Nn=0,ur=1,rr=2,yr=3,zr=4,Ur=5,Lr=6,Yr=7,Bn=0,sn=1,Tn=2,_r=0,ai=1,Tr=2,qr=3,Si=4,Ei=5,zi="attached",Ss="detached",ei=300,ii=301,ui=302,ls=303,Hr=304,Xi=306,Wr=1e3,Ln=1001,Ts=1002,Q=1003,ye=1004,Ce=1004,ge=1005,vt=1005,Ht=1006,Jt=1007,_t=1007,ht=1008,Ge=1008,st=1009,Ft=1010,kn=1011,On=1012,$n=1013,Mr=1014,ti=1015,xe=1016,At=1017,Pn=1018,vr=1020,ni=1021,Zi=1023,Ns=1024,va=1025,js=1026,os=1027,Ji=1028,It=1029,k=1030,Z=1031,le=1033,Ye=33776,He=33777,ft=33778,Dn=33779,xn=35840,et=35841,nn=35842,_e=35843,De=36196,ot=37492,gt=37496,Pt=37808,Gn=37809,dn=37810,Ke=37811,Xe=37812,Zt=37813,Un=37814,ir=37815,Kn=37816,Gr=37817,Ar=37818,vi=37819,li=37820,sr=37821,Bi=36492,ys=36494,Ms=36495,Ja=36283,ya=36284,Ko=36285,Xs=36286,Ca=2200,_a=2201,ks=2202,to=2300,As=2301,Cs=2302,no=2400,Ni=2401,Vs=2402,To=2500,oi=2501,la=0,xa=1,qo=2,$a=3e3,ro=3001,O=3200,m=3201,v=0,C=1,N="",H="srgb",Y="srgb-linear",R="display-p3",F="display-p3-linear",w="linear",L="srgb",G="rec709",he="p3",We=0,at=7680,tt=7681,$e=7682,Ct=7683,En=34055,Ot=34056,yt=5386,rn=512,hn=513,$t=514,on=515,jt=516,In=517,fr=518,lr=519,Nr=512,Jr=513,ci=514,yi=515,Di=516,Kr=517,Mi=518,cs=519,bs=35044,ps=35048,ms=35040,$s=35045,Ws=35049,$i=35041,ns=35046,Bo=35050,Ao=35042,Co="100",Jo="300 es",Qs=1035,co=2e3,_o=2001;class us{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const o=r.indexOf(t);o!==-1&&r.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let o=0,l=r.length;o<l;o++)r[o].call(this,e);e.target=null}}}const Yi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Ra=1234567;const xo=Math.PI/180,So=180/Math.PI;function jr(){const a=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Yi[a&255]+Yi[a>>8&255]+Yi[a>>16&255]+Yi[a>>24&255]+"-"+Yi[e&255]+Yi[e>>8&255]+"-"+Yi[e>>16&15|64]+Yi[e>>24&255]+"-"+Yi[t&63|128]+Yi[t>>8&255]+"-"+Yi[t>>16&255]+Yi[t>>24&255]+Yi[n&255]+Yi[n>>8&255]+Yi[n>>16&255]+Yi[n>>24&255]).toLowerCase()}function Rs(a,e,t){return Math.max(e,Math.min(t,a))}function Ua(a,e){return(a%e+e)%e}function Il(a,e,t,n,r){return n+(a-e)*(r-n)/(t-e)}function Ro(a,e,t){return a!==e?(t-a)/(e-a):0}function uo(a,e,t){return(1-t)*a+t*e}function _s(a,e,t,n){return uo(a,e,1-Math.exp(-t*n))}function Sa(a,e=1){return e-Math.abs(Ua(a,e*2)-e)}function Mo(a,e,t){return a<=e?0:a>=t?1:(a=(a-e)/(t-e),a*a*(3-2*a))}function cl(a,e,t){return a<=e?0:a>=t?1:(a=(a-e)/(t-e),a*a*a*(a*(a*6-15)+10))}function ul(a,e){return a+Math.floor(Math.random()*(e-a+1))}function Ma(a,e){return a+Math.random()*(e-a)}function yl(a){return a*(.5-Math.random())}function _c(a){a!==void 0&&(Ra=a);let e=Ra+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Fa(a){return a*xo}function Hs(a){return a*So}function ca(a){return(a&a-1)===0&&a!==0}function ta(a){return Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))}function fo(a){return Math.pow(2,Math.floor(Math.log(a)/Math.LN2))}function Ti(a,e,t,n,r){const o=Math.cos,l=Math.sin,c=o(t/2),f=l(t/2),h=o((e+n)/2),g=l((e+n)/2),_=o((e-n)/2),x=l((e-n)/2),S=o((n-e)/2),E=l((n-e)/2);switch(r){case"XYX":a.set(c*g,f*_,f*x,c*h);break;case"YZY":a.set(f*x,c*g,f*_,c*h);break;case"ZXZ":a.set(f*_,f*x,c*g,c*h);break;case"XZX":a.set(c*g,f*E,f*S,c*h);break;case"YXY":a.set(f*S,c*g,f*E,c*h);break;case"ZYZ":a.set(f*E,f*S,c*g,c*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function ho(a,e){switch(e.constructor){case Float32Array:return a;case Uint32Array:return a/4294967295;case Uint16Array:return a/65535;case Uint8Array:return a/255;case Int32Array:return Math.max(a/2147483647,-1);case Int16Array:return Math.max(a/32767,-1);case Int8Array:return Math.max(a/127,-1);default:throw new Error("Invalid component type.")}}function zt(a,e){switch(e.constructor){case Float32Array:return a;case Uint32Array:return Math.round(a*4294967295);case Uint16Array:return Math.round(a*65535);case Uint8Array:return Math.round(a*255);case Int32Array:return Math.round(a*2147483647);case Int16Array:return Math.round(a*32767);case Int8Array:return Math.round(a*127);default:throw new Error("Invalid component type.")}}const Gs={DEG2RAD:xo,RAD2DEG:So,generateUUID:jr,clamp:Rs,euclideanModulo:Ua,mapLinear:Il,inverseLerp:Ro,lerp:uo,damp:_s,pingpong:Sa,smoothstep:Mo,smootherstep:cl,randInt:ul,randFloat:Ma,randFloatSpread:yl,seededRandom:_c,degToRad:Fa,radToDeg:Hs,isPowerOfTwo:ca,ceilPowerOfTwo:ta,floorPowerOfTwo:fo,setQuaternionFromProperEuler:Ti,normalize:zt,denormalize:ho};class Et{constructor(e=0,t=0){Et.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Rs(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),o=this.x-e.x,l=this.y-e.y;return this.x=o*n-l*r+e.x,this.y=o*r+l*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class xr{constructor(e,t,n,r,o,l,c,f,h){xr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,r,o,l,c,f,h)}set(e,t,n,r,o,l,c,f,h){const g=this.elements;return g[0]=e,g[1]=r,g[2]=c,g[3]=t,g[4]=o,g[5]=f,g[6]=n,g[7]=l,g[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,o=this.elements,l=n[0],c=n[3],f=n[6],h=n[1],g=n[4],_=n[7],x=n[2],S=n[5],E=n[8],I=r[0],T=r[3],b=r[6],B=r[1],D=r[4],W=r[7],ne=r[2],ae=r[5],ue=r[8];return o[0]=l*I+c*B+f*ne,o[3]=l*T+c*D+f*ae,o[6]=l*b+c*W+f*ue,o[1]=h*I+g*B+_*ne,o[4]=h*T+g*D+_*ae,o[7]=h*b+g*W+_*ue,o[2]=x*I+S*B+E*ne,o[5]=x*T+S*D+E*ae,o[8]=x*b+S*W+E*ue,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],o=e[3],l=e[4],c=e[5],f=e[6],h=e[7],g=e[8];return t*l*g-t*c*h-n*o*g+n*c*f+r*o*h-r*l*f}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],o=e[3],l=e[4],c=e[5],f=e[6],h=e[7],g=e[8],_=g*l-c*h,x=c*f-g*o,S=h*o-l*f,E=t*_+n*x+r*S;if(E===0)return this.set(0,0,0,0,0,0,0,0,0);const I=1/E;return e[0]=_*I,e[1]=(r*h-g*n)*I,e[2]=(c*n-r*l)*I,e[3]=x*I,e[4]=(g*t-r*f)*I,e[5]=(r*o-c*t)*I,e[6]=S*I,e[7]=(n*f-h*t)*I,e[8]=(l*t-n*o)*I,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,o,l,c){const f=Math.cos(o),h=Math.sin(o);return this.set(n*f,n*h,-n*(f*l+h*c)+l+e,-r*h,r*f,-r*(-h*l+f*c)+c+t,0,0,1),this}scale(e,t){return this.premultiply(Po.makeScale(e,t)),this}rotate(e){return this.premultiply(Po.makeRotation(-e)),this}translate(e,t){return this.premultiply(Po.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Po=new xr;function po(a){for(let e=a.length-1;e>=0;--e)if(a[e]>=65535)return!0;return!1}const Us={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function mo(a,e){return new Us[a](e)}function Io(a){return document.createElementNS("http://www.w3.org/1999/xhtml",a)}function bo(){const a=Io("canvas");return a.style.display="block",a}const za={};function Qi(a){a in za||(za[a]=!0,console.warn(a))}const Ba=new xr().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),ua=new xr().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Qa={[Y]:{transfer:w,primaries:G,toReference:a=>a,fromReference:a=>a},[H]:{transfer:L,primaries:G,toReference:a=>a.convertSRGBToLinear(),fromReference:a=>a.convertLinearToSRGB()},[F]:{transfer:w,primaries:he,toReference:a=>a.applyMatrix3(ua),fromReference:a=>a.applyMatrix3(Ba)},[R]:{transfer:L,primaries:he,toReference:a=>a.convertSRGBToLinear().applyMatrix3(ua),fromReference:a=>a.applyMatrix3(Ba).convertLinearToSRGB()}},fa=new Set([Y,F]),Xr={enabled:!0,_workingColorSpace:Y,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(a){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!a},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(a){if(!fa.has(a))throw new Error(`Unsupported working color space, "${a}".`);this._workingColorSpace=a},convert:function(a,e,t){if(this.enabled===!1||e===t||!e||!t)return a;const n=Qa[e].toReference,r=Qa[t].fromReference;return r(n(a))},fromWorkingColorSpace:function(a,e){return this.convert(a,this._workingColorSpace,e)},toWorkingColorSpace:function(a,e){return this.convert(a,e,this._workingColorSpace)},getPrimaries:function(a){return Qa[a].primaries},getTransfer:function(a){return a===N?w:Qa[a].transfer}};function $r(a){return a<.04045?a*.0773993808:Math.pow(a*.9478672986+.0521327014,2.4)}function Fs(a){return a<.0031308?a*12.92:1.055*Math.pow(a,.41666)-.055}let Zs;class U{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement=="undefined")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Zs===void 0&&(Zs=Io("canvas")),Zs.width=e.width,Zs.height=e.height;const n=Zs.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Zs}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap){const t=Io("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),o=r.data;for(let l=0;l<o.length;l++)o[l]=$r(o[l]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor($r(t[n]/255)*255):t[n]=$r(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let q=0;class me{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:q++}),this.uuid=jr(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let o;if(Array.isArray(r)){o=[];for(let l=0,c=r.length;l<c;l++)r[l].isDataTexture?o.push(Je(r[l].image)):o.push(Je(r[l]))}else o=Je(r);n.url=o}return t||(e.images[this.uuid]=n),n}}function Je(a){return typeof HTMLImageElement!="undefined"&&a instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&a instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&a instanceof ImageBitmap?U.getDataURL(a):a.data?{data:Array.from(a.data),width:a.width,height:a.height,type:a.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let xt=0;class je extends us{constructor(e=je.DEFAULT_IMAGE,t=je.DEFAULT_MAPPING,n=Ln,r=Ln,o=Ht,l=ht,c=Zi,f=st,h=je.DEFAULT_ANISOTROPY,g=N){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:xt++}),this.uuid=jr(),this.name="",this.source=new me(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=o,this.minFilter=l,this.anisotropy=h,this.format=c,this.internalFormat=null,this.type=f,this.offset=new Et(0,0),this.repeat=new Et(1,1),this.center=new Et(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new xr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof g=="string"?this.colorSpace=g:(Qi("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=g===ro?H:N),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ei)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Wr:e.x=e.x-Math.floor(e.x);break;case Ln:e.x=e.x<0?0:1;break;case Ts:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Wr:e.y=e.y-Math.floor(e.y);break;case Ln:e.y=e.y<0?0:1;break;case Ts:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Qi("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===H?ro:$a}set encoding(e){Qi("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===ro?H:N}}je.DEFAULT_IMAGE=null,je.DEFAULT_MAPPING=ei,je.DEFAULT_ANISOTROPY=1;class Dt{constructor(e=0,t=0,n=0,r=1){Dt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,o=this.w,l=e.elements;return this.x=l[0]*t+l[4]*n+l[8]*r+l[12]*o,this.y=l[1]*t+l[5]*n+l[9]*r+l[13]*o,this.z=l[2]*t+l[6]*n+l[10]*r+l[14]*o,this.w=l[3]*t+l[7]*n+l[11]*r+l[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,o;const f=e.elements,h=f[0],g=f[4],_=f[8],x=f[1],S=f[5],E=f[9],I=f[2],T=f[6],b=f[10];if(Math.abs(g-x)<.01&&Math.abs(_-I)<.01&&Math.abs(E-T)<.01){if(Math.abs(g+x)<.1&&Math.abs(_+I)<.1&&Math.abs(E+T)<.1&&Math.abs(h+S+b-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const D=(h+1)/2,W=(S+1)/2,ne=(b+1)/2,ae=(g+x)/4,ue=(_+I)/4,Te=(E+T)/4;return D>W&&D>ne?D<.01?(n=0,r=.707106781,o=.707106781):(n=Math.sqrt(D),r=ae/n,o=ue/n):W>ne?W<.01?(n=.707106781,r=0,o=.707106781):(r=Math.sqrt(W),n=ae/r,o=Te/r):ne<.01?(n=.707106781,r=.707106781,o=0):(o=Math.sqrt(ne),n=ue/o,r=Te/o),this.set(n,r,o,t),this}let B=Math.sqrt((T-E)*(T-E)+(_-I)*(_-I)+(x-g)*(x-g));return Math.abs(B)<.001&&(B=1),this.x=(T-E)/B,this.y=(_-I)/B,this.z=(x-g)/B,this.w=Math.acos((h+S+b-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ln extends us{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Dt(0,0,e,t),this.scissorTest=!1,this.viewport=new Dt(0,0,e,t);const r={width:e,height:t,depth:1};n.encoding!==void 0&&(Qi("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===ro?H:N),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ht,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},n),this.texture=new je(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps,this.texture.internalFormat=n.internalFormat,this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new me(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Sn extends ln{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class gn extends je{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Q,this.minFilter=Q,this.wrapR=Ln,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class An extends Sn{constructor(e=1,t=1,n=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new gn(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class wn extends je{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Q,this.minFilter=Q,this.wrapR=Ln,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class xs extends Sn{constructor(e=1,t=1,n=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new wn(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Dr extends Sn{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const o=this.texture;this.texture=[];for(let l=0;l<n;l++)this.texture[l]=o.clone(),this.texture[l].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,o=this.texture.length;r<o;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class pr{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,o,l,c){let f=n[r+0],h=n[r+1],g=n[r+2],_=n[r+3];const x=o[l+0],S=o[l+1],E=o[l+2],I=o[l+3];if(c===0){e[t+0]=f,e[t+1]=h,e[t+2]=g,e[t+3]=_;return}if(c===1){e[t+0]=x,e[t+1]=S,e[t+2]=E,e[t+3]=I;return}if(_!==I||f!==x||h!==S||g!==E){let T=1-c;const b=f*x+h*S+g*E+_*I,B=b>=0?1:-1,D=1-b*b;if(D>Number.EPSILON){const ne=Math.sqrt(D),ae=Math.atan2(ne,b*B);T=Math.sin(T*ae)/ne,c=Math.sin(c*ae)/ne}const W=c*B;if(f=f*T+x*W,h=h*T+S*W,g=g*T+E*W,_=_*T+I*W,T===1-c){const ne=1/Math.sqrt(f*f+h*h+g*g+_*_);f*=ne,h*=ne,g*=ne,_*=ne}}e[t]=f,e[t+1]=h,e[t+2]=g,e[t+3]=_}static multiplyQuaternionsFlat(e,t,n,r,o,l){const c=n[r],f=n[r+1],h=n[r+2],g=n[r+3],_=o[l],x=o[l+1],S=o[l+2],E=o[l+3];return e[t]=c*E+g*_+f*S-h*x,e[t+1]=f*E+g*x+h*_-c*S,e[t+2]=h*E+g*S+c*x-f*_,e[t+3]=g*E-c*_-f*x-h*S,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,r=e._y,o=e._z,l=e._order,c=Math.cos,f=Math.sin,h=c(n/2),g=c(r/2),_=c(o/2),x=f(n/2),S=f(r/2),E=f(o/2);switch(l){case"XYZ":this._x=x*g*_+h*S*E,this._y=h*S*_-x*g*E,this._z=h*g*E+x*S*_,this._w=h*g*_-x*S*E;break;case"YXZ":this._x=x*g*_+h*S*E,this._y=h*S*_-x*g*E,this._z=h*g*E-x*S*_,this._w=h*g*_+x*S*E;break;case"ZXY":this._x=x*g*_-h*S*E,this._y=h*S*_+x*g*E,this._z=h*g*E+x*S*_,this._w=h*g*_-x*S*E;break;case"ZYX":this._x=x*g*_-h*S*E,this._y=h*S*_+x*g*E,this._z=h*g*E-x*S*_,this._w=h*g*_+x*S*E;break;case"YZX":this._x=x*g*_+h*S*E,this._y=h*S*_+x*g*E,this._z=h*g*E-x*S*_,this._w=h*g*_-x*S*E;break;case"XZY":this._x=x*g*_-h*S*E,this._y=h*S*_-x*g*E,this._z=h*g*E+x*S*_,this._w=h*g*_+x*S*E;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],o=t[8],l=t[1],c=t[5],f=t[9],h=t[2],g=t[6],_=t[10],x=n+c+_;if(x>0){const S=.5/Math.sqrt(x+1);this._w=.25/S,this._x=(g-f)*S,this._y=(o-h)*S,this._z=(l-r)*S}else if(n>c&&n>_){const S=2*Math.sqrt(1+n-c-_);this._w=(g-f)/S,this._x=.25*S,this._y=(r+l)/S,this._z=(o+h)/S}else if(c>_){const S=2*Math.sqrt(1+c-n-_);this._w=(o-h)/S,this._x=(r+l)/S,this._y=.25*S,this._z=(f+g)/S}else{const S=2*Math.sqrt(1+_-n-c);this._w=(l-r)/S,this._x=(o+h)/S,this._y=(f+g)/S,this._z=.25*S}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Rs(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,o=e._z,l=e._w,c=t._x,f=t._y,h=t._z,g=t._w;return this._x=n*g+l*c+r*h-o*f,this._y=r*g+l*f+o*c-n*h,this._z=o*g+l*h+n*f-r*c,this._w=l*g-n*c-r*f-o*h,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,o=this._z,l=this._w;let c=l*e._w+n*e._x+r*e._y+o*e._z;if(c<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,c=-c):this.copy(e),c>=1)return this._w=l,this._x=n,this._y=r,this._z=o,this;const f=1-c*c;if(f<=Number.EPSILON){const S=1-t;return this._w=S*l+t*this._w,this._x=S*n+t*this._x,this._y=S*r+t*this._y,this._z=S*o+t*this._z,this.normalize(),this._onChangeCallback(),this}const h=Math.sqrt(f),g=Math.atan2(h,c),_=Math.sin((1-t)*g)/h,x=Math.sin(t*g)/h;return this._w=l*_+this._w*x,this._x=n*_+this._x*x,this._y=r*_+this._y*x,this._z=o*_+this._z*x,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(o),n*Math.cos(o),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ${constructor(e=0,t=0,n=0){$.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(fs.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(fs.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[3]*n+o[6]*r,this.y=o[1]*t+o[4]*n+o[7]*r,this.z=o[2]*t+o[5]*n+o[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,o=e.elements,l=1/(o[3]*t+o[7]*n+o[11]*r+o[15]);return this.x=(o[0]*t+o[4]*n+o[8]*r+o[12])*l,this.y=(o[1]*t+o[5]*n+o[9]*r+o[13])*l,this.z=(o[2]*t+o[6]*n+o[10]*r+o[14])*l,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,o=e.x,l=e.y,c=e.z,f=e.w,h=2*(l*r-c*n),g=2*(c*t-o*r),_=2*(o*n-l*t);return this.x=t+f*h+l*_-c*g,this.y=n+f*g+c*h-o*_,this.z=r+f*_+o*g-l*h,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r,this.y=o[1]*t+o[5]*n+o[9]*r,this.z=o[2]*t+o[6]*n+o[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,o=e.z,l=t.x,c=t.y,f=t.z;return this.x=r*f-o*c,this.y=o*l-n*f,this.z=n*c-r*l,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return bi.copy(this).projectOnVector(e),this.sub(bi)}reflect(e){return this.sub(bi.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Rs(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-su(e,2));return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const bi=new $,fs=new pr;class ki{constructor(e=new $(1/0,1/0,1/0),t=new $(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Ls.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Ls.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Ls.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const o=n.getAttribute("position");if(t===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let l=0,c=o.count;l<c;l++)e.isMesh===!0?e.getVertexPosition(l,Ls):Ls.fromBufferAttribute(o,l),Ls.applyMatrix4(e.matrixWorld),this.expandByPoint(Ls);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Hi.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),Hi.copy(n.boundingBox)),Hi.applyMatrix4(e.matrixWorld),this.union(Hi)}const r=e.children;for(let o=0,l=r.length;o<l;o++)this.expandByObject(r[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ls),Ls.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(as),so.subVectors(this.max,as),Lo.subVectors(e.a,as),rs.subVectors(e.b,as),Ds.subVectors(e.c,as),io.subVectors(rs,Lo),Ys.subVectors(Ds,rs),go.subVectors(Lo,Ds);let t=[0,-io.z,io.y,0,-Ys.z,Ys.y,0,-go.z,go.y,io.z,0,-io.x,Ys.z,0,-Ys.x,go.z,0,-go.x,-io.y,io.x,0,-Ys.y,Ys.x,0,-go.y,go.x,0];return!$o(t,Lo,rs,Ds,so)||(t=[1,0,0,0,1,0,0,0,1],!$o(t,Lo,rs,Ds,so))?!1:(ws.crossVectors(io,Ys),t=[ws.x,ws.y,ws.z],$o(t,Lo,rs,Ds,so))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ls).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ls).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ps[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ps[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ps[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ps[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ps[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ps[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ps[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ps[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ps),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ps=[new $,new $,new $,new $,new $,new $,new $,new $],Ls=new $,Hi=new ki,Lo=new $,rs=new $,Ds=new $,io=new $,Ys=new $,go=new $,as=new $,so=new $,ws=new $,Ui=new $;function $o(a,e,t,n,r){for(let o=0,l=a.length-3;o<=l;o+=3){Ui.fromArray(a,o);const c=r.x*Math.abs(Ui.x)+r.y*Math.abs(Ui.y)+r.z*Math.abs(Ui.z),f=e.dot(Ui),h=t.dot(Ui),g=n.dot(Ui);if(Math.max(-Math.max(f,h,g),Math.min(f,h,g))>c)return!1}return!0}const fl=new ki,Do=new $,Pa=new $;class ka{constructor(e=new $,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):fl.setFromPoints(e).getCenter(n);let r=0;for(let o=0,l=e.length;o<l;o++)r=Math.max(r,n.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Do.subVectors(e,this.center);const t=Do.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(Do,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Pa.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Do.copy(e.center).add(Pa)),this.expandByPoint(Do.copy(e.center).sub(Pa))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const _l=new $,ou=new $,xc=new $,Ha=new $,tc=new $,Vl=new $,Fu=new $;class Ll{constructor(e=new $,t=new $(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,_l)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=_l.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(_l.copy(this.origin).addScaledVector(this.direction,t),_l.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){ou.copy(e).add(t).multiplyScalar(.5),xc.copy(t).sub(e).normalize(),Ha.copy(this.origin).sub(ou);const o=e.distanceTo(t)*.5,l=-this.direction.dot(xc),c=Ha.dot(this.direction),f=-Ha.dot(xc),h=Ha.lengthSq(),g=Math.abs(1-l*l);let _,x,S,E;if(g>0)if(_=l*f-c,x=l*c-f,E=o*g,_>=0)if(x>=-E)if(x<=E){const I=1/g;_*=I,x*=I,S=_*(_+l*x+2*c)+x*(l*_+x+2*f)+h}else x=o,_=Math.max(0,-(l*x+c)),S=-_*_+x*(x+2*f)+h;else x=-o,_=Math.max(0,-(l*x+c)),S=-_*_+x*(x+2*f)+h;else x<=-E?(_=Math.max(0,-(-l*o+c)),x=_>0?-o:Math.min(Math.max(-o,-f),o),S=-_*_+x*(x+2*f)+h):x<=E?(_=0,x=Math.min(Math.max(-o,-f),o),S=x*(x+2*f)+h):(_=Math.max(0,-(l*o+c)),x=_>0?o:Math.min(Math.max(-o,-f),o),S=-_*_+x*(x+2*f)+h);else x=l>0?-o:o,_=Math.max(0,-(l*x+c)),S=-_*_+x*(x+2*f)+h;return n&&n.copy(this.origin).addScaledVector(this.direction,_),r&&r.copy(ou).addScaledVector(xc,x),S}intersectSphere(e,t){_l.subVectors(e.center,this.origin);const n=_l.dot(this.direction),r=_l.dot(_l)-n*n,o=e.radius*e.radius;if(r>o)return null;const l=Math.sqrt(o-r),c=n-l,f=n+l;return f<0?null:c<0?this.at(f,t):this.at(c,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,o,l,c,f;const h=1/this.direction.x,g=1/this.direction.y,_=1/this.direction.z,x=this.origin;return h>=0?(n=(e.min.x-x.x)*h,r=(e.max.x-x.x)*h):(n=(e.max.x-x.x)*h,r=(e.min.x-x.x)*h),g>=0?(o=(e.min.y-x.y)*g,l=(e.max.y-x.y)*g):(o=(e.max.y-x.y)*g,l=(e.min.y-x.y)*g),n>l||o>r||((o>n||isNaN(n))&&(n=o),(l<r||isNaN(r))&&(r=l),_>=0?(c=(e.min.z-x.z)*_,f=(e.max.z-x.z)*_):(c=(e.max.z-x.z)*_,f=(e.min.z-x.z)*_),n>f||c>r)||((c>n||n!==n)&&(n=c),(f<r||r!==r)&&(r=f),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,_l)!==null}intersectTriangle(e,t,n,r,o){tc.subVectors(t,e),Vl.subVectors(n,e),Fu.crossVectors(tc,Vl);let l=this.direction.dot(Fu),c;if(l>0){if(r)return null;c=1}else if(l<0)c=-1,l=-l;else return null;Ha.subVectors(this.origin,e);const f=c*this.direction.dot(Vl.crossVectors(Ha,Vl));if(f<0)return null;const h=c*this.direction.dot(tc.cross(Ha));if(h<0||f+h>l)return null;const g=-c*Ha.dot(Fu);return g<0?null:this.at(g/l,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class _i{constructor(e,t,n,r,o,l,c,f,h,g,_,x,S,E,I,T){_i.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,r,o,l,c,f,h,g,_,x,S,E,I,T)}set(e,t,n,r,o,l,c,f,h,g,_,x,S,E,I,T){const b=this.elements;return b[0]=e,b[4]=t,b[8]=n,b[12]=r,b[1]=o,b[5]=l,b[9]=c,b[13]=f,b[2]=h,b[6]=g,b[10]=_,b[14]=x,b[3]=S,b[7]=E,b[11]=I,b[15]=T,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new _i().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Dl.setFromMatrixColumn(e,0).length(),o=1/Dl.setFromMatrixColumn(e,1).length(),l=1/Dl.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*o,t[5]=n[5]*o,t[6]=n[6]*o,t[7]=0,t[8]=n[8]*l,t[9]=n[9]*l,t[10]=n[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,o=e.z,l=Math.cos(n),c=Math.sin(n),f=Math.cos(r),h=Math.sin(r),g=Math.cos(o),_=Math.sin(o);if(e.order==="XYZ"){const x=l*g,S=l*_,E=c*g,I=c*_;t[0]=f*g,t[4]=-f*_,t[8]=h,t[1]=S+E*h,t[5]=x-I*h,t[9]=-c*f,t[2]=I-x*h,t[6]=E+S*h,t[10]=l*f}else if(e.order==="YXZ"){const x=f*g,S=f*_,E=h*g,I=h*_;t[0]=x+I*c,t[4]=E*c-S,t[8]=l*h,t[1]=l*_,t[5]=l*g,t[9]=-c,t[2]=S*c-E,t[6]=I+x*c,t[10]=l*f}else if(e.order==="ZXY"){const x=f*g,S=f*_,E=h*g,I=h*_;t[0]=x-I*c,t[4]=-l*_,t[8]=E+S*c,t[1]=S+E*c,t[5]=l*g,t[9]=I-x*c,t[2]=-l*h,t[6]=c,t[10]=l*f}else if(e.order==="ZYX"){const x=l*g,S=l*_,E=c*g,I=c*_;t[0]=f*g,t[4]=E*h-S,t[8]=x*h+I,t[1]=f*_,t[5]=I*h+x,t[9]=S*h-E,t[2]=-h,t[6]=c*f,t[10]=l*f}else if(e.order==="YZX"){const x=l*f,S=l*h,E=c*f,I=c*h;t[0]=f*g,t[4]=I-x*_,t[8]=E*_+S,t[1]=_,t[5]=l*g,t[9]=-c*g,t[2]=-h*g,t[6]=S*_+E,t[10]=x-I*_}else if(e.order==="XZY"){const x=l*f,S=l*h,E=c*f,I=c*h;t[0]=f*g,t[4]=-_,t[8]=h*g,t[1]=x*_+I,t[5]=l*g,t[9]=S*_-E,t[2]=E*_-S,t[6]=c*g,t[10]=I*_+x}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(yf,e,zu)}lookAt(e,t,n){const r=this.elements;return La.subVectors(e,t),La.lengthSq()===0&&(La.z=1),La.normalize(),xl.crossVectors(n,La),xl.lengthSq()===0&&(Math.abs(n.z)===1?La.x+=1e-4:La.z+=1e-4,La.normalize(),xl.crossVectors(n,La)),xl.normalize(),Sc.crossVectors(La,xl),r[0]=xl.x,r[4]=Sc.x,r[8]=La.x,r[1]=xl.y,r[5]=Sc.y,r[9]=La.y,r[2]=xl.z,r[6]=Sc.z,r[10]=La.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,o=this.elements,l=n[0],c=n[4],f=n[8],h=n[12],g=n[1],_=n[5],x=n[9],S=n[13],E=n[2],I=n[6],T=n[10],b=n[14],B=n[3],D=n[7],W=n[11],ne=n[15],ae=r[0],ue=r[4],Te=r[8],j=r[12],ie=r[1],rt=r[5],Qt=r[9],_n=r[13],Ie=r[2],Mt=r[6],qt=r[10],Xt=r[14],Vn=r[3],cn=r[7],bn=r[11],Be=r[15];return o[0]=l*ae+c*ie+f*Ie+h*Vn,o[4]=l*ue+c*rt+f*Mt+h*cn,o[8]=l*Te+c*Qt+f*qt+h*bn,o[12]=l*j+c*_n+f*Xt+h*Be,o[1]=g*ae+_*ie+x*Ie+S*Vn,o[5]=g*ue+_*rt+x*Mt+S*cn,o[9]=g*Te+_*Qt+x*qt+S*bn,o[13]=g*j+_*_n+x*Xt+S*Be,o[2]=E*ae+I*ie+T*Ie+b*Vn,o[6]=E*ue+I*rt+T*Mt+b*cn,o[10]=E*Te+I*Qt+T*qt+b*bn,o[14]=E*j+I*_n+T*Xt+b*Be,o[3]=B*ae+D*ie+W*Ie+ne*Vn,o[7]=B*ue+D*rt+W*Mt+ne*cn,o[11]=B*Te+D*Qt+W*qt+ne*bn,o[15]=B*j+D*_n+W*Xt+ne*Be,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],o=e[12],l=e[1],c=e[5],f=e[9],h=e[13],g=e[2],_=e[6],x=e[10],S=e[14],E=e[3],I=e[7],T=e[11],b=e[15];return E*(+o*f*_-r*h*_-o*c*x+n*h*x+r*c*S-n*f*S)+I*(+t*f*S-t*h*x+o*l*x-r*l*S+r*h*g-o*f*g)+T*(+t*h*_-t*c*S-o*l*_+n*l*S+o*c*g-n*h*g)+b*(-r*c*g-t*f*_+t*c*x+r*l*_-n*l*x+n*f*g)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],o=e[3],l=e[4],c=e[5],f=e[6],h=e[7],g=e[8],_=e[9],x=e[10],S=e[11],E=e[12],I=e[13],T=e[14],b=e[15],B=_*T*h-I*x*h+I*f*S-c*T*S-_*f*b+c*x*b,D=E*x*h-g*T*h-E*f*S+l*T*S+g*f*b-l*x*b,W=g*I*h-E*_*h+E*c*S-l*I*S-g*c*b+l*_*b,ne=E*_*f-g*I*f-E*c*x+l*I*x+g*c*T-l*_*T,ae=t*B+n*D+r*W+o*ne;if(ae===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const ue=1/ae;return e[0]=B*ue,e[1]=(I*x*o-_*T*o-I*r*S+n*T*S+_*r*b-n*x*b)*ue,e[2]=(c*T*o-I*f*o+I*r*h-n*T*h-c*r*b+n*f*b)*ue,e[3]=(_*f*o-c*x*o-_*r*h+n*x*h+c*r*S-n*f*S)*ue,e[4]=D*ue,e[5]=(g*T*o-E*x*o+E*r*S-t*T*S-g*r*b+t*x*b)*ue,e[6]=(E*f*o-l*T*o-E*r*h+t*T*h+l*r*b-t*f*b)*ue,e[7]=(l*x*o-g*f*o+g*r*h-t*x*h-l*r*S+t*f*S)*ue,e[8]=W*ue,e[9]=(E*_*o-g*I*o-E*n*S+t*I*S+g*n*b-t*_*b)*ue,e[10]=(l*I*o-E*c*o+E*n*h-t*I*h-l*n*b+t*c*b)*ue,e[11]=(g*c*o-l*_*o-g*n*h+t*_*h+l*n*S-t*c*S)*ue,e[12]=ne*ue,e[13]=(g*I*r-E*_*r+E*n*x-t*I*x-g*n*T+t*_*T)*ue,e[14]=(E*c*r-l*I*r-E*n*f+t*I*f+l*n*T-t*c*T)*ue,e[15]=(l*_*r-g*c*r+g*n*f-t*_*f-l*n*x+t*c*x)*ue,this}scale(e){const t=this.elements,n=e.x,r=e.y,o=e.z;return t[0]*=n,t[4]*=r,t[8]*=o,t[1]*=n,t[5]*=r,t[9]*=o,t[2]*=n,t[6]*=r,t[10]*=o,t[3]*=n,t[7]*=r,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),o=1-n,l=e.x,c=e.y,f=e.z,h=o*l,g=o*c;return this.set(h*l+n,h*c-r*f,h*f+r*c,0,h*c+r*f,g*c+n,g*f-r*l,0,h*f-r*c,g*f+r*l,o*f*f+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,o,l){return this.set(1,n,o,0,e,1,l,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,o=t._x,l=t._y,c=t._z,f=t._w,h=o+o,g=l+l,_=c+c,x=o*h,S=o*g,E=o*_,I=l*g,T=l*_,b=c*_,B=f*h,D=f*g,W=f*_,ne=n.x,ae=n.y,ue=n.z;return r[0]=(1-(I+b))*ne,r[1]=(S+W)*ne,r[2]=(E-D)*ne,r[3]=0,r[4]=(S-W)*ae,r[5]=(1-(x+b))*ae,r[6]=(T+B)*ae,r[7]=0,r[8]=(E+D)*ue,r[9]=(T-B)*ue,r[10]=(1-(x+I))*ue,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let o=Dl.set(r[0],r[1],r[2]).length();const l=Dl.set(r[4],r[5],r[6]).length(),c=Dl.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),e.x=r[12],e.y=r[13],e.z=r[14],Ia.copy(this);const h=1/o,g=1/l,_=1/c;return Ia.elements[0]*=h,Ia.elements[1]*=h,Ia.elements[2]*=h,Ia.elements[4]*=g,Ia.elements[5]*=g,Ia.elements[6]*=g,Ia.elements[8]*=_,Ia.elements[9]*=_,Ia.elements[10]*=_,t.setFromRotationMatrix(Ia),n.x=o,n.y=l,n.z=c,this}makePerspective(e,t,n,r,o,l,c=co){const f=this.elements,h=2*o/(t-e),g=2*o/(n-r),_=(t+e)/(t-e),x=(n+r)/(n-r);let S,E;if(c===co)S=-(l+o)/(l-o),E=-2*l*o/(l-o);else if(c===_o)S=-l/(l-o),E=-l*o/(l-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+c);return f[0]=h,f[4]=0,f[8]=_,f[12]=0,f[1]=0,f[5]=g,f[9]=x,f[13]=0,f[2]=0,f[6]=0,f[10]=S,f[14]=E,f[3]=0,f[7]=0,f[11]=-1,f[15]=0,this}makeOrthographic(e,t,n,r,o,l,c=co){const f=this.elements,h=1/(t-e),g=1/(n-r),_=1/(l-o),x=(t+e)*h,S=(n+r)*g;let E,I;if(c===co)E=(l+o)*_,I=-2*_;else if(c===_o)E=o*_,I=-1*_;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+c);return f[0]=2*h,f[4]=0,f[8]=0,f[12]=-x,f[1]=0,f[5]=2*g,f[9]=0,f[13]=-S,f[2]=0,f[6]=0,f[10]=I,f[14]=-E,f[3]=0,f[7]=0,f[11]=0,f[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Dl=new $,Ia=new _i,yf=new $(0,0,0),zu=new $(1,1,1),xl=new $,Sc=new $,La=new $,au=new _i,Da=new pr;class nc{constructor(e=0,t=0,n=0,r=nc.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,o=r[0],l=r[4],c=r[8],f=r[1],h=r[5],g=r[9],_=r[2],x=r[6],S=r[10];switch(t){case"XYZ":this._y=Math.asin(Rs(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-g,S),this._z=Math.atan2(-l,o)):(this._x=Math.atan2(x,h),this._z=0);break;case"YXZ":this._x=Math.asin(-Rs(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(c,S),this._z=Math.atan2(f,h)):(this._y=Math.atan2(-_,o),this._z=0);break;case"ZXY":this._x=Math.asin(Rs(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(-_,S),this._z=Math.atan2(-l,h)):(this._y=0,this._z=Math.atan2(f,o));break;case"ZYX":this._y=Math.asin(-Rs(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(x,S),this._z=Math.atan2(f,o)):(this._x=0,this._z=Math.atan2(-l,h));break;case"YZX":this._z=Math.asin(Rs(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-g,h),this._y=Math.atan2(-_,o)):(this._x=0,this._y=Math.atan2(c,S));break;case"XZY":this._z=Math.asin(-Rs(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(x,h),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-g,S),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return au.makeRotationFromQuaternion(e),this.setFromRotationMatrix(au,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Da.setFromEuler(this),this.setFromQuaternion(Da,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}nc.DEFAULT_ORDER="XYZ";class Wl{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let kc=0;const Mc=new $,Sl=new pr,dl=new _i,Ml=new $,wo=new $,qf=new $,Bu=new pr,ba=new $(1,0,0),da=new $(0,1,0),ku=new $(0,0,1),Hu={type:"added"},Gu={type:"removed"};class ds extends us{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:kc++}),this.uuid=jr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ds.DEFAULT_UP.clone();const e=new $,t=new nc,n=new pr,r=new $(1,1,1);function o(){n.setFromEuler(t,!1)}function l(){t.setFromQuaternion(n,void 0,!1)}t._onChange(o),n._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new _i},normalMatrix:{value:new xr}}),this.matrix=new _i,this.matrixWorld=new _i,this.matrixAutoUpdate=ds.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=ds.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Wl,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Sl.setFromAxisAngle(e,t),this.quaternion.multiply(Sl),this}rotateOnWorldAxis(e,t){return Sl.setFromAxisAngle(e,t),this.quaternion.premultiply(Sl),this}rotateX(e){return this.rotateOnAxis(ba,e)}rotateY(e){return this.rotateOnAxis(da,e)}rotateZ(e){return this.rotateOnAxis(ku,e)}translateOnAxis(e,t){return Mc.copy(e).applyQuaternion(this.quaternion),this.position.add(Mc.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(ba,e)}translateY(e){return this.translateOnAxis(da,e)}translateZ(e){return this.translateOnAxis(ku,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(dl.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Ml.copy(e):Ml.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),wo.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?dl.lookAt(wo,Ml,this.up):dl.lookAt(Ml,wo,this.up),this.quaternion.setFromRotationMatrix(dl),r&&(dl.extractRotation(r.matrixWorld),Sl.setFromRotationMatrix(dl),this.quaternion.premultiply(Sl.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Hu)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Gu)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),dl.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),dl.multiply(e.parent.matrixWorld)),e.applyMatrix4(dl),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const l=this.children[n].getObjectByProperty(e,t);if(l!==void 0)return l}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let r=0,o=this.children.length;r<o;r++){const l=this.children[r].getObjectsByProperty(e,t);l.length>0&&(n=n.concat(l))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(wo,e,qf),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(wo,Bu,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++){const o=t[n];(o.matrixWorldAutoUpdate===!0||e===!0)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let o=0,l=r.length;o<l;o++){const c=r[o];c.matrixWorldAutoUpdate===!0&&c.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function o(c,f){return c[f.uuid]===void 0&&(c[f.uuid]=f.toJSON(e)),f.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=o(e.geometries,this.geometry);const c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){const f=c.shapes;if(Array.isArray(f))for(let h=0,g=f.length;h<g;h++){const _=f[h];o(e.shapes,_)}else o(e.shapes,f)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const c=[];for(let f=0,h=this.material.length;f<h;f++)c.push(o(e.materials,this.material[f]));r.material=c}else r.material=o(e.materials,this.material);if(this.children.length>0){r.children=[];for(let c=0;c<this.children.length;c++)r.children.push(this.children[c].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let c=0;c<this.animations.length;c++){const f=this.animations[c];r.animations.push(o(e.animations,f))}}if(t){const c=l(e.geometries),f=l(e.materials),h=l(e.textures),g=l(e.images),_=l(e.shapes),x=l(e.skeletons),S=l(e.animations),E=l(e.nodes);c.length>0&&(n.geometries=c),f.length>0&&(n.materials=f),h.length>0&&(n.textures=h),g.length>0&&(n.images=g),_.length>0&&(n.shapes=_),x.length>0&&(n.skeletons=x),S.length>0&&(n.animations=S),E.length>0&&(n.nodes=E)}return n.object=r,n;function l(c){const f=[];for(const h in c){const g=c[h];delete g.metadata,f.push(g)}return f}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}}ds.DEFAULT_UP=new $(0,1,0),ds.DEFAULT_MATRIX_AUTO_UPDATE=!0,ds.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const el=new $,tl=new $,lu=new $,Ga=new $,Ol=new $,rc=new $,bc=new $,ic=new $,Hc=new $,wc=new $;let sc=!1;class na{constructor(e=new $,t=new $,n=new $){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),el.subVectors(e,t),r.cross(el);const o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(e,t,n,r,o){el.subVectors(r,t),tl.subVectors(n,t),lu.subVectors(e,t);const l=el.dot(el),c=el.dot(tl),f=el.dot(lu),h=tl.dot(tl),g=tl.dot(lu),_=l*h-c*c;if(_===0)return o.set(-2,-1,-1);const x=1/_,S=(h*f-c*g)*x,E=(l*g-c*f)*x;return o.set(1-S-E,E,S)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,Ga),Ga.x>=0&&Ga.y>=0&&Ga.x+Ga.y<=1}static getUV(e,t,n,r,o,l,c,f){return sc===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),sc=!0),this.getInterpolation(e,t,n,r,o,l,c,f)}static getInterpolation(e,t,n,r,o,l,c,f){return this.getBarycoord(e,t,n,r,Ga),f.setScalar(0),f.addScaledVector(o,Ga.x),f.addScaledVector(l,Ga.y),f.addScaledVector(c,Ga.z),f}static isFrontFacing(e,t,n,r){return el.subVectors(n,t),tl.subVectors(e,t),el.cross(tl).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return el.subVectors(this.c,this.b),tl.subVectors(this.a,this.b),el.cross(tl).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return na.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return na.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,o){return sc===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),sc=!0),na.getInterpolation(e,this.a,this.b,this.c,t,n,r,o)}getInterpolation(e,t,n,r,o){return na.getInterpolation(e,this.a,this.b,this.c,t,n,r,o)}containsPoint(e){return na.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return na.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,o=this.c;let l,c;Ol.subVectors(r,n),rc.subVectors(o,n),ic.subVectors(e,n);const f=Ol.dot(ic),h=rc.dot(ic);if(f<=0&&h<=0)return t.copy(n);Hc.subVectors(e,r);const g=Ol.dot(Hc),_=rc.dot(Hc);if(g>=0&&_<=g)return t.copy(r);const x=f*_-g*h;if(x<=0&&f>=0&&g<=0)return l=f/(f-g),t.copy(n).addScaledVector(Ol,l);wc.subVectors(e,o);const S=Ol.dot(wc),E=rc.dot(wc);if(E>=0&&S<=E)return t.copy(o);const I=S*h-f*E;if(I<=0&&h>=0&&E<=0)return c=h/(h-E),t.copy(n).addScaledVector(rc,c);const T=g*E-S*_;if(T<=0&&_-g>=0&&S-E>=0)return bc.subVectors(o,r),c=(_-g)/(_-g+(S-E)),t.copy(r).addScaledVector(bc,c);const b=1/(T+I+x);return l=I*b,c=x*b,t.copy(n).addScaledVector(Ol,l).addScaledVector(rc,c)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Ec={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},bl={h:0,s:0,l:0},oc={h:0,s:0,l:0};function Gc(a,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?a+(e-a)*6*t:t<1/2?e:t<2/3?a+(e-a)*6*(2/3-t):a}class Qn{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=H){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Xr.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=Xr.workingColorSpace){return this.r=e,this.g=t,this.b=n,Xr.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=Xr.workingColorSpace){if(e=Ua(e,1),t=Rs(t,0,1),n=Rs(n,0,1),t===0)this.r=this.g=this.b=n;else{const o=n<=.5?n*(1+t):n+t-n*t,l=2*n-o;this.r=Gc(l,o,e+1/3),this.g=Gc(l,o,e),this.b=Gc(l,o,e-1/3)}return Xr.toWorkingColorSpace(this,r),this}setStyle(e,t=H){function n(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const l=r[1],c=r[2];switch(l){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=r[1],l=o.length;if(l===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(l===6)return this.setHex(parseInt(o,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=H){const n=Ec[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=$r(e.r),this.g=$r(e.g),this.b=$r(e.b),this}copyLinearToSRGB(e){return this.r=Fs(e.r),this.g=Fs(e.g),this.b=Fs(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=H){return Xr.fromWorkingColorSpace(ra.copy(this),e),Math.round(Rs(ra.r*255,0,255))*65536+Math.round(Rs(ra.g*255,0,255))*256+Math.round(Rs(ra.b*255,0,255))}getHexString(e=H){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Xr.workingColorSpace){Xr.fromWorkingColorSpace(ra.copy(this),t);const n=ra.r,r=ra.g,o=ra.b,l=Math.max(n,r,o),c=Math.min(n,r,o);let f,h;const g=(c+l)/2;if(c===l)f=0,h=0;else{const _=l-c;switch(h=g<=.5?_/(l+c):_/(2-l-c),l){case n:f=(r-o)/_+(r<o?6:0);break;case r:f=(o-n)/_+2;break;case o:f=(n-r)/_+4;break}f/=6}return e.h=f,e.s=h,e.l=g,e}getRGB(e,t=Xr.workingColorSpace){return Xr.fromWorkingColorSpace(ra.copy(this),t),e.r=ra.r,e.g=ra.g,e.b=ra.b,e}getStyle(e=H){Xr.fromWorkingColorSpace(ra.copy(this),e);const t=ra.r,n=ra.g,r=ra.b;return e!==H?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(e,t,n){return this.getHSL(bl),this.setHSL(bl.h+e,bl.s+t,bl.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(bl),e.getHSL(oc);const n=uo(bl.h,oc.h,t),r=uo(bl.s,oc.s,t),o=uo(bl.l,oc.l,t);return this.setHSL(n,r,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,o=e.elements;return this.r=o[0]*t+o[3]*n+o[6]*r,this.g=o[1]*t+o[4]*n+o[7]*r,this.b=o[2]*t+o[5]*n+o[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ra=new Qn;Qn.NAMES=Ec;let _f=0;class Oo extends us{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:_f++}),this.uuid=jr(),this.name="",this.type="Material",this.blending=tn,this.side=Ae,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Kt,this.blendDst=Lt,this.blendEquation=zn,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Qn(0,0,0),this.blendAlpha=0,this.depthFunc=yr,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=lr,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=at,this.stencilZFail=at,this.stencilZPass=at,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==tn&&(n.blending=this.blending),this.side!==Ae&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==Kt&&(n.blendSrc=this.blendSrc),this.blendDst!==Lt&&(n.blendDst=this.blendDst),this.blendEquation!==zn&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==yr&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==lr&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==at&&(n.stencilFail=this.stencilFail),this.stencilZFail!==at&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==at&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(o){const l=[];for(const c in o){const f=o[c];delete f.metadata,l.push(f)}return l}if(t){const o=r(e.textures),l=r(e.images);o.length>0&&(n.textures=o),l.length>0&&(n.images=l)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let o=0;o!==r;++o)n[o]=t[o].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class ha extends Oo{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Qn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Bn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const nl=nr();function nr(){const a=new ArrayBuffer(4),e=new Float32Array(a),t=new Uint32Array(a),n=new Uint32Array(512),r=new Uint32Array(512);for(let f=0;f<256;++f){const h=f-127;h<-27?(n[f]=0,n[f|256]=32768,r[f]=24,r[f|256]=24):h<-14?(n[f]=1024>>-h-14,n[f|256]=1024>>-h-14|32768,r[f]=-h-1,r[f|256]=-h-1):h<=15?(n[f]=h+15<<10,n[f|256]=h+15<<10|32768,r[f]=13,r[f|256]=13):h<128?(n[f]=31744,n[f|256]=64512,r[f]=24,r[f|256]=24):(n[f]=31744,n[f|256]=64512,r[f]=13,r[f|256]=13)}const o=new Uint32Array(2048),l=new Uint32Array(64),c=new Uint32Array(64);for(let f=1;f<1024;++f){let h=f<<13,g=0;for(;!(h&8388608);)h<<=1,g-=8388608;h&=-8388609,g+=947912704,o[f]=h|g}for(let f=1024;f<2048;++f)o[f]=939524096+(f-1024<<13);for(let f=1;f<31;++f)l[f]=f<<23;l[31]=1199570944,l[32]=2147483648;for(let f=33;f<63;++f)l[f]=2147483648+(f-32<<23);l[63]=3347054592;for(let f=1;f<64;++f)f!==32&&(c[f]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:r,mantissaTable:o,exponentTable:l,offsetTable:c}}function ko(a){Math.abs(a)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),a=Rs(a,-65504,65504),nl.floatView[0]=a;const e=nl.uint32View[0],t=e>>23&511;return nl.baseTable[t]+((e&8388607)>>nl.shiftTable[t])}function ac(a){const e=a>>10;return nl.uint32View[0]=nl.mantissaTable[nl.offsetTable[e]+(a&1023)]+nl.exponentTable[e],nl.floatView[0]}const Vu={toHalfFloat:ko,fromHalfFloat:ac},vo=new $,hl=new Et;class hs{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=bs,this.updateRange={offset:0,count:-1},this.gpuType=ti,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)hl.fromBufferAttribute(this,t),hl.applyMatrix3(e),this.setXY(t,hl.x,hl.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)vo.fromBufferAttribute(this,t),vo.applyMatrix3(e),this.setXYZ(t,vo.x,vo.y,vo.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)vo.fromBufferAttribute(this,t),vo.applyMatrix4(e),this.setXYZ(t,vo.x,vo.y,vo.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)vo.fromBufferAttribute(this,t),vo.applyNormalMatrix(e),this.setXYZ(t,vo.x,vo.y,vo.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)vo.fromBufferAttribute(this,t),vo.transformDirection(e),this.setXYZ(t,vo.x,vo.y,vo.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=ho(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=zt(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ho(t,this.array)),t}setX(e,t){return this.normalized&&(t=zt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ho(t,this.array)),t}setY(e,t){return this.normalized&&(t=zt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ho(t,this.array)),t}setZ(e,t){return this.normalized&&(t=zt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ho(t,this.array)),t}setW(e,t){return this.normalized&&(t=zt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=zt(t,this.array),n=zt(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=zt(t,this.array),n=zt(n,this.array),r=zt(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,o){return e*=this.itemSize,this.normalized&&(t=zt(t,this.array),n=zt(n,this.array),r=zt(r,this.array),o=zt(o,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==bs&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class Vc extends hs{constructor(e,t,n){super(new Int8Array(e),t,n)}}class cu extends hs{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class Wu extends hs{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class lc extends hs{constructor(e,t,n){super(new Int16Array(e),t,n)}}class xi extends hs{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Wc extends hs{constructor(e,t,n){super(new Int32Array(e),t,n)}}class jc extends hs{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class uu extends hs{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=ac(this.array[e*this.itemSize]);return this.normalized&&(t=ho(t,this.array)),t}setX(e,t){return this.normalized&&(t=zt(t,this.array)),this.array[e*this.itemSize]=ko(t),this}getY(e){let t=ac(this.array[e*this.itemSize+1]);return this.normalized&&(t=ho(t,this.array)),t}setY(e,t){return this.normalized&&(t=zt(t,this.array)),this.array[e*this.itemSize+1]=ko(t),this}getZ(e){let t=ac(this.array[e*this.itemSize+2]);return this.normalized&&(t=ho(t,this.array)),t}setZ(e,t){return this.normalized&&(t=zt(t,this.array)),this.array[e*this.itemSize+2]=ko(t),this}getW(e){let t=ac(this.array[e*this.itemSize+3]);return this.normalized&&(t=ho(t,this.array)),t}setW(e,t){return this.normalized&&(t=zt(t,this.array)),this.array[e*this.itemSize+3]=ko(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=zt(t,this.array),n=zt(n,this.array)),this.array[e+0]=ko(t),this.array[e+1]=ko(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=zt(t,this.array),n=zt(n,this.array),r=zt(r,this.array)),this.array[e+0]=ko(t),this.array[e+1]=ko(n),this.array[e+2]=ko(r),this}setXYZW(e,t,n,r,o){return e*=this.itemSize,this.normalized&&(t=zt(t,this.array),n=zt(n,this.array),r=zt(r,this.array),o=zt(o,this.array)),this.array[e+0]=ko(t),this.array[e+1]=ko(n),this.array[e+2]=ko(r),this.array[e+3]=ko(o),this}}class Cr extends hs{constructor(e,t,n){super(new Float32Array(e),t,n)}}class ju extends hs{constructor(e,t,n){super(new Float64Array(e),t,n)}}let fu=0;const wa=new _i,Xu=new ds,cc=new $,Ho=new ki,jl=new ki,No=new $;class wi extends us{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:fu++}),this.uuid=jr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(po(e)?jc:xi)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const o=new xr().getNormalMatrix(e);n.applyNormalMatrix(o),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return wa.makeRotationFromQuaternion(e),this.applyMatrix4(wa),this}rotateX(e){return wa.makeRotationX(e),this.applyMatrix4(wa),this}rotateY(e){return wa.makeRotationY(e),this.applyMatrix4(wa),this}rotateZ(e){return wa.makeRotationZ(e),this.applyMatrix4(wa),this}translate(e,t,n){return wa.makeTranslation(e,t,n),this.applyMatrix4(wa),this}scale(e,t,n){return wa.makeScale(e,t,n),this.applyMatrix4(wa),this}lookAt(e){return Xu.lookAt(e),Xu.updateMatrix(),this.applyMatrix4(Xu.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(cc).negate(),this.translate(cc.x,cc.y,cc.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const o=e[n];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new Cr(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ki);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new $(-1/0,-1/0,-1/0),new $(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const o=t[n];Ho.setFromBufferAttribute(o),this.morphTargetsRelative?(No.addVectors(this.boundingBox.min,Ho.min),this.boundingBox.expandByPoint(No),No.addVectors(this.boundingBox.max,Ho.max),this.boundingBox.expandByPoint(No)):(this.boundingBox.expandByPoint(Ho.min),this.boundingBox.expandByPoint(Ho.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ka);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new $,1/0);return}if(e){const n=this.boundingSphere.center;if(Ho.setFromBufferAttribute(e),t)for(let o=0,l=t.length;o<l;o++){const c=t[o];jl.setFromBufferAttribute(c),this.morphTargetsRelative?(No.addVectors(Ho.min,jl.min),Ho.expandByPoint(No),No.addVectors(Ho.max,jl.max),Ho.expandByPoint(No)):(Ho.expandByPoint(jl.min),Ho.expandByPoint(jl.max))}Ho.getCenter(n);let r=0;for(let o=0,l=e.count;o<l;o++)No.fromBufferAttribute(e,o),r=Math.max(r,n.distanceToSquared(No));if(t)for(let o=0,l=t.length;o<l;o++){const c=t[o],f=this.morphTargetsRelative;for(let h=0,g=c.count;h<g;h++)No.fromBufferAttribute(c,h),f&&(cc.fromBufferAttribute(e,h),No.add(cc)),r=Math.max(r,n.distanceToSquared(No))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.array,r=t.position.array,o=t.normal.array,l=t.uv.array,c=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new hs(new Float32Array(4*c),4));const f=this.getAttribute("tangent").array,h=[],g=[];for(let ie=0;ie<c;ie++)h[ie]=new $,g[ie]=new $;const _=new $,x=new $,S=new $,E=new Et,I=new Et,T=new Et,b=new $,B=new $;function D(ie,rt,Qt){_.fromArray(r,ie*3),x.fromArray(r,rt*3),S.fromArray(r,Qt*3),E.fromArray(l,ie*2),I.fromArray(l,rt*2),T.fromArray(l,Qt*2),x.sub(_),S.sub(_),I.sub(E),T.sub(E);const _n=1/(I.x*T.y-T.x*I.y);isFinite(_n)&&(b.copy(x).multiplyScalar(T.y).addScaledVector(S,-I.y).multiplyScalar(_n),B.copy(S).multiplyScalar(I.x).addScaledVector(x,-T.x).multiplyScalar(_n),h[ie].add(b),h[rt].add(b),h[Qt].add(b),g[ie].add(B),g[rt].add(B),g[Qt].add(B))}let W=this.groups;W.length===0&&(W=[{start:0,count:n.length}]);for(let ie=0,rt=W.length;ie<rt;++ie){const Qt=W[ie],_n=Qt.start,Ie=Qt.count;for(let Mt=_n,qt=_n+Ie;Mt<qt;Mt+=3)D(n[Mt+0],n[Mt+1],n[Mt+2])}const ne=new $,ae=new $,ue=new $,Te=new $;function j(ie){ue.fromArray(o,ie*3),Te.copy(ue);const rt=h[ie];ne.copy(rt),ne.sub(ue.multiplyScalar(ue.dot(rt))).normalize(),ae.crossVectors(Te,rt);const _n=ae.dot(g[ie])<0?-1:1;f[ie*4]=ne.x,f[ie*4+1]=ne.y,f[ie*4+2]=ne.z,f[ie*4+3]=_n}for(let ie=0,rt=W.length;ie<rt;++ie){const Qt=W[ie],_n=Qt.start,Ie=Qt.count;for(let Mt=_n,qt=_n+Ie;Mt<qt;Mt+=3)j(n[Mt+0]),j(n[Mt+1]),j(n[Mt+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new hs(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let x=0,S=n.count;x<S;x++)n.setXYZ(x,0,0,0);const r=new $,o=new $,l=new $,c=new $,f=new $,h=new $,g=new $,_=new $;if(e)for(let x=0,S=e.count;x<S;x+=3){const E=e.getX(x+0),I=e.getX(x+1),T=e.getX(x+2);r.fromBufferAttribute(t,E),o.fromBufferAttribute(t,I),l.fromBufferAttribute(t,T),g.subVectors(l,o),_.subVectors(r,o),g.cross(_),c.fromBufferAttribute(n,E),f.fromBufferAttribute(n,I),h.fromBufferAttribute(n,T),c.add(g),f.add(g),h.add(g),n.setXYZ(E,c.x,c.y,c.z),n.setXYZ(I,f.x,f.y,f.z),n.setXYZ(T,h.x,h.y,h.z)}else for(let x=0,S=t.count;x<S;x+=3)r.fromBufferAttribute(t,x+0),o.fromBufferAttribute(t,x+1),l.fromBufferAttribute(t,x+2),g.subVectors(l,o),_.subVectors(r,o),g.cross(_),n.setXYZ(x+0,g.x,g.y,g.z),n.setXYZ(x+1,g.x,g.y,g.z),n.setXYZ(x+2,g.x,g.y,g.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)No.fromBufferAttribute(e,t),No.normalize(),e.setXYZ(t,No.x,No.y,No.z)}toNonIndexed(){function e(c,f){const h=c.array,g=c.itemSize,_=c.normalized,x=new h.constructor(f.length*g);let S=0,E=0;for(let I=0,T=f.length;I<T;I++){c.isInterleavedBufferAttribute?S=f[I]*c.data.stride+c.offset:S=f[I]*g;for(let b=0;b<g;b++)x[E++]=h[S++]}return new hs(x,g,_)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new wi,n=this.index.array,r=this.attributes;for(const c in r){const f=r[c],h=e(f,n);t.setAttribute(c,h)}const o=this.morphAttributes;for(const c in o){const f=[],h=o[c];for(let g=0,_=h.length;g<_;g++){const x=h[g],S=e(x,n);f.push(S)}t.morphAttributes[c]=f}t.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let c=0,f=l.length;c<f;c++){const h=l[c];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const f=this.parameters;for(const h in f)f[h]!==void 0&&(e[h]=f[h]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const f in n){const h=n[f];e.data.attributes[f]=h.toJSON(e.data)}const r={};let o=!1;for(const f in this.morphAttributes){const h=this.morphAttributes[f],g=[];for(let _=0,x=h.length;_<x;_++){const S=h[_];g.push(S.toJSON(e.data))}g.length>0&&(r[f]=g,o=!0)}o&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const c=this.boundingSphere;return c!==null&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const r=e.attributes;for(const h in r){const g=r[h];this.setAttribute(h,g.clone(t))}const o=e.morphAttributes;for(const h in o){const g=[],_=o[h];for(let x=0,S=_.length;x<S;x++)g.push(_[x].clone(t));this.morphAttributes[h]=g}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let h=0,g=l.length;h<g;h++){const _=l[h];this.addGroup(_.start,_.count,_.materialIndex)}const c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());const f=e.boundingSphere;return f!==null&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Tc=new _i,Va=new Ll,Xl=new ka,Wa=new $,pl=new $,Go=new $,Nl=new $,Ac=new $,uc=new $,Cc=new Et,fc=new Et,Xc=new Et,Rc=new $,du=new $,yo=new $,Ai=new $,eo=new $;class es extends ds{constructor(e=new wi,t=new ha){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=r.length;o<l;o++){const c=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=o}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,o=n.morphAttributes.position,l=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const c=this.morphTargetInfluences;if(o&&c){uc.set(0,0,0);for(let f=0,h=o.length;f<h;f++){const g=c[f],_=o[f];g!==0&&(Ac.fromBufferAttribute(_,e),l?uc.addScaledVector(Ac,g):uc.addScaledVector(Ac.sub(t),g))}t.add(uc)}return t}raycast(e,t){const n=this.geometry,r=this.material,o=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Xl.copy(n.boundingSphere),Xl.applyMatrix4(o),Va.copy(e.ray).recast(e.near),!(Xl.containsPoint(Va.origin)===!1&&(Va.intersectSphere(Xl,Wa)===null||Va.origin.distanceToSquared(Wa)>su(e.far-e.near,2)))&&(Tc.copy(o).invert(),Va.copy(e.ray).applyMatrix4(Tc),!(n.boundingBox!==null&&Va.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,Va)))}_computeIntersections(e,t,n){let r;const o=this.geometry,l=this.material,c=o.index,f=o.attributes.position,h=o.attributes.uv,g=o.attributes.uv1,_=o.attributes.normal,x=o.groups,S=o.drawRange;if(c!==null)if(Array.isArray(l))for(let E=0,I=x.length;E<I;E++){const T=x[E],b=l[T.materialIndex],B=Math.max(T.start,S.start),D=Math.min(c.count,Math.min(T.start+T.count,S.start+S.count));for(let W=B,ne=D;W<ne;W+=3){const ae=c.getX(W),ue=c.getX(W+1),Te=c.getX(W+2);r=ia(this,b,e,n,h,g,_,ae,ue,Te),r&&(r.faceIndex=Math.floor(W/3),r.face.materialIndex=T.materialIndex,t.push(r))}}else{const E=Math.max(0,S.start),I=Math.min(c.count,S.start+S.count);for(let T=E,b=I;T<b;T+=3){const B=c.getX(T),D=c.getX(T+1),W=c.getX(T+2);r=ia(this,l,e,n,h,g,_,B,D,W),r&&(r.faceIndex=Math.floor(T/3),t.push(r))}}else if(f!==void 0)if(Array.isArray(l))for(let E=0,I=x.length;E<I;E++){const T=x[E],b=l[T.materialIndex],B=Math.max(T.start,S.start),D=Math.min(f.count,Math.min(T.start+T.count,S.start+S.count));for(let W=B,ne=D;W<ne;W+=3){const ae=W,ue=W+1,Te=W+2;r=ia(this,b,e,n,h,g,_,ae,ue,Te),r&&(r.faceIndex=Math.floor(W/3),r.face.materialIndex=T.materialIndex,t.push(r))}}else{const E=Math.max(0,S.start),I=Math.min(f.count,S.start+S.count);for(let T=E,b=I;T<b;T+=3){const B=T,D=T+1,W=T+2;r=ia(this,l,e,n,h,g,_,B,D,W),r&&(r.faceIndex=Math.floor(T/3),t.push(r))}}}}function Vo(a,e,t,n,r,o,l,c){let f;if(e.side===ut?f=n.intersectTriangle(l,o,r,!0,c):f=n.intersectTriangle(r,o,l,e.side===Ae,c),f===null)return null;eo.copy(c),eo.applyMatrix4(a.matrixWorld);const h=t.ray.origin.distanceTo(eo);return h<t.near||h>t.far?null:{distance:h,point:eo.clone(),object:a}}function ia(a,e,t,n,r,o,l,c,f,h){a.getVertexPosition(c,pl),a.getVertexPosition(f,Go),a.getVertexPosition(h,Nl);const g=Vo(a,e,t,n,pl,Go,Nl,Ai);if(g){r&&(Cc.fromBufferAttribute(r,c),fc.fromBufferAttribute(r,f),Xc.fromBufferAttribute(r,h),g.uv=na.getInterpolation(Ai,pl,Go,Nl,Cc,fc,Xc,new Et)),o&&(Cc.fromBufferAttribute(o,c),fc.fromBufferAttribute(o,f),Xc.fromBufferAttribute(o,h),g.uv1=na.getInterpolation(Ai,pl,Go,Nl,Cc,fc,Xc,new Et),g.uv2=g.uv1),l&&(Rc.fromBufferAttribute(l,c),du.fromBufferAttribute(l,f),yo.fromBufferAttribute(l,h),g.normal=na.getInterpolation(Ai,pl,Go,Nl,Rc,du,yo,new $),g.normal.dot(n.direction)>0&&g.normal.multiplyScalar(-1));const _={a:c,b:f,c:h,normal:new $,materialIndex:0};na.getNormal(pl,Go,Nl,_.normal),g.face=_}return g}class ja extends wi{constructor(e=1,t=1,n=1,r=1,o=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:o,depthSegments:l};const c=this;r=Math.floor(r),o=Math.floor(o),l=Math.floor(l);const f=[],h=[],g=[],_=[];let x=0,S=0;E("z","y","x",-1,-1,n,t,e,l,o,0),E("z","y","x",1,-1,n,t,-e,l,o,1),E("x","z","y",1,1,e,n,t,r,l,2),E("x","z","y",1,-1,e,n,-t,r,l,3),E("x","y","z",1,-1,e,t,n,r,o,4),E("x","y","z",-1,-1,e,t,-n,r,o,5),this.setIndex(f),this.setAttribute("position",new Cr(h,3)),this.setAttribute("normal",new Cr(g,3)),this.setAttribute("uv",new Cr(_,2));function E(I,T,b,B,D,W,ne,ae,ue,Te,j){const ie=W/ue,rt=ne/Te,Qt=W/2,_n=ne/2,Ie=ae/2,Mt=ue+1,qt=Te+1;let Xt=0,Vn=0;const cn=new $;for(let bn=0;bn<qt;bn++){const Be=bn*rt-_n;for(let Gt=0;Gt<Mt;Gt++){const Sr=Gt*ie-Qt;cn[I]=Sr*B,cn[T]=Be*D,cn[b]=Ie,h.push(cn.x,cn.y,cn.z),cn[I]=0,cn[T]=0,cn[b]=ae>0?1:-1,g.push(cn.x,cn.y,cn.z),_.push(Gt/ue),_.push(1-bn/Te),Xt+=1}}for(let bn=0;bn<Te;bn++)for(let Be=0;Be<ue;Be++){const Gt=x+Be+Mt*bn,Sr=x+Be+Mt*(bn+1),Rr=x+(Be+1)+Mt*(bn+1),Fr=x+(Be+1)+Mt*bn;f.push(Gt,Sr,Fr),f.push(Sr,Rr,Fr),Vn+=6}c.addGroup(S,Vn,j),S+=Vn,x+=Xt}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ja(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Ks(a){const e={};for(const t in a){e[t]={};for(const n in a[t]){const r=a[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function Uo(a){const e={};for(let t=0;t<a.length;t++){const n=Ks(a[t]);for(const r in n)e[r]=n[r]}return e}function Xa(a){const e=[];for(let t=0;t<a.length;t++)e.push(a[t].clone());return e}function Pc(a){return a.getRenderTarget()===null?a.outputColorSpace:Xr.workingColorSpace}const Zc={clone:Ks,merge:Uo};var Ic=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Ea=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Za extends Oo{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Ic,this.fragmentShader=Ea,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ks(e.uniforms),this.uniformsGroups=Xa(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const l=this.uniforms[r].value;l&&l.isTexture?t.uniforms[r]={type:"t",value:l.toJSON(e).uuid}:l&&l.isColor?t.uniforms[r]={type:"c",value:l.getHex()}:l&&l.isVector2?t.uniforms[r]={type:"v2",value:l.toArray()}:l&&l.isVector3?t.uniforms[r]={type:"v3",value:l.toArray()}:l&&l.isVector4?t.uniforms[r]={type:"v4",value:l.toArray()}:l&&l.isMatrix3?t.uniforms[r]={type:"m3",value:l.toArray()}:l&&l.isMatrix4?t.uniforms[r]={type:"m4",value:l.toArray()}:t.uniforms[r]={value:l}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class dc extends ds{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new _i,this.projectionMatrix=new _i,this.projectionMatrixInverse=new _i,this.coordinateSystem=co}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class oo extends dc{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=So*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(xo*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return So*2*Math.atan(Math.tan(xo*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,o,l){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(xo*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,o=-.5*r;const l=this.view;if(this.view!==null&&this.view.enabled){const f=l.fullWidth,h=l.fullHeight;o+=l.offsetX*r/f,t-=l.offsetY*n/h,r*=l.width/f,n*=l.height/h}const c=this.filmOffset;c!==0&&(o+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const ml=-90,Ul=1;class wl extends ds{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new oo(ml,Ul,e,t);r.layers=this.layers,this.add(r);const o=new oo(ml,Ul,e,t);o.layers=this.layers,this.add(o);const l=new oo(ml,Ul,e,t);l.layers=this.layers,this.add(l);const c=new oo(ml,Ul,e,t);c.layers=this.layers,this.add(c);const f=new oo(ml,Ul,e,t);f.layers=this.layers,this.add(f);const h=new oo(ml,Ul,e,t);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,o,l,c,f]=t;for(const h of t)this.remove(h);if(e===co)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),l.up.set(0,0,1),l.lookAt(0,-1,0),c.up.set(0,1,0),c.lookAt(0,0,1),f.up.set(0,1,0),f.lookAt(0,0,-1);else if(e===_o)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),l.up.set(0,0,-1),l.lookAt(0,-1,0),c.up.set(0,-1,0),c.lookAt(0,0,1),f.up.set(0,-1,0),f.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const h of t)this.add(h),h.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,l,c,f,h,g]=this.children,_=e.getRenderTarget(),x=e.getActiveCubeFace(),S=e.getActiveMipmapLevel(),E=e.xr.enabled;e.xr.enabled=!1;const I=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,o),e.setRenderTarget(n,1,r),e.render(t,l),e.setRenderTarget(n,2,r),e.render(t,c),e.setRenderTarget(n,3,r),e.render(t,f),e.setRenderTarget(n,4,r),e.render(t,h),n.texture.generateMipmaps=I,e.setRenderTarget(n,5,r),e.render(t,g),e.setRenderTarget(_,x,S),e.xr.enabled=E,n.texture.needsPMREMUpdate=!0}}class Fl extends je{constructor(e,t,n,r,o,l,c,f,h,g){e=e!==void 0?e:[],t=t!==void 0?t:ii,super(e,t,n,r,o,l,c,f,h,g),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class El extends Sn{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];t.encoding!==void 0&&(Qi("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===ro?H:N),this.texture=new Fl(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Ht}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new ja(5,5,5),o=new Za({name:"CubemapFromEquirect",uniforms:Ks(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:ut,blending:Rn});o.uniforms.tEquirect.value=t;const l=new es(r,o),c=t.minFilter;return t.minFilter===ht&&(t.minFilter=Ht),new wl(1,10,this).update(e,l),t.minFilter=c,l.geometry.dispose(),l.material.dispose(),this}clear(e,t,n,r){const o=e.getRenderTarget();for(let l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(t,n,r);e.setRenderTarget(o)}}const hc=new $,Lc=new $,hu=new xr;class rl{constructor(e=new $(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=hc.subVectors(n,t).cross(Lc.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(hc),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:t.copy(e.start).addScaledVector(n,o)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||hu.getNormalMatrix(e),r=this.coplanarPoint(hc).applyMatrix4(e),o=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const gl=new ka,Wo=new $;class Ya{constructor(e=new rl,t=new rl,n=new rl,r=new rl,o=new rl,l=new rl){this.planes=[e,t,n,r,o,l]}set(e,t,n,r,o,l){const c=this.planes;return c[0].copy(e),c[1].copy(t),c[2].copy(n),c[3].copy(r),c[4].copy(o),c[5].copy(l),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=co){const n=this.planes,r=e.elements,o=r[0],l=r[1],c=r[2],f=r[3],h=r[4],g=r[5],_=r[6],x=r[7],S=r[8],E=r[9],I=r[10],T=r[11],b=r[12],B=r[13],D=r[14],W=r[15];if(n[0].setComponents(f-o,x-h,T-S,W-b).normalize(),n[1].setComponents(f+o,x+h,T+S,W+b).normalize(),n[2].setComponents(f+l,x+g,T+E,W+B).normalize(),n[3].setComponents(f-l,x-g,T-E,W-B).normalize(),n[4].setComponents(f-c,x-_,T-I,W-D).normalize(),t===co)n[5].setComponents(f+c,x+_,T+I,W+D).normalize();else if(t===_o)n[5].setComponents(c,_,I,D).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),gl.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),gl.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(gl)}intersectsSprite(e){return gl.center.set(0,0,0),gl.radius=.7071067811865476,gl.applyMatrix4(e.matrixWorld),this.intersectsSphere(gl)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(Wo.x=r.normal.x>0?e.max.x:e.min.x,Wo.y=r.normal.y>0?e.max.y:e.min.y,Wo.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Wo)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Oa(){let a=null,e=!1,t=null,n=null;function r(o,l){t(o,l),n=a.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=a.requestAnimationFrame(r),e=!0)},stop:function(){a.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){a=o}}}function Yc(a,e){const t=e.isWebGL2,n=new WeakMap;function r(h,g){const _=h.array,x=h.usage,S=a.createBuffer();a.bindBuffer(g,S),a.bufferData(g,_,x),h.onUploadCallback();let E;if(_ instanceof Float32Array)E=a.FLOAT;else if(_ instanceof Uint16Array)if(h.isFloat16BufferAttribute)if(t)E=a.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else E=a.UNSIGNED_SHORT;else if(_ instanceof Int16Array)E=a.SHORT;else if(_ instanceof Uint32Array)E=a.UNSIGNED_INT;else if(_ instanceof Int32Array)E=a.INT;else if(_ instanceof Int8Array)E=a.BYTE;else if(_ instanceof Uint8Array)E=a.UNSIGNED_BYTE;else if(_ instanceof Uint8ClampedArray)E=a.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+_);return{buffer:S,type:E,bytesPerElement:_.BYTES_PER_ELEMENT,version:h.version}}function o(h,g,_){const x=g.array,S=g.updateRange;a.bindBuffer(_,h),S.count===-1?a.bufferSubData(_,0,x):(t?a.bufferSubData(_,S.offset*x.BYTES_PER_ELEMENT,x,S.offset,S.count):a.bufferSubData(_,S.offset*x.BYTES_PER_ELEMENT,x.subarray(S.offset,S.offset+S.count)),S.count=-1),g.onUploadCallback()}function l(h){return h.isInterleavedBufferAttribute&&(h=h.data),n.get(h)}function c(h){h.isInterleavedBufferAttribute&&(h=h.data);const g=n.get(h);g&&(a.deleteBuffer(g.buffer),n.delete(h))}function f(h,g){if(h.isGLBufferAttribute){const x=n.get(h);(!x||x.version<h.version)&&n.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}h.isInterleavedBufferAttribute&&(h=h.data);const _=n.get(h);_===void 0?n.set(h,r(h,g)):_.version<h.version&&(o(_.buffer,h,g),_.version=h.version)}return{get:l,remove:c,update:f}}class jo extends wi{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const o=e/2,l=t/2,c=Math.floor(n),f=Math.floor(r),h=c+1,g=f+1,_=e/c,x=t/f,S=[],E=[],I=[],T=[];for(let b=0;b<g;b++){const B=b*x-l;for(let D=0;D<h;D++){const W=D*_-o;E.push(W,-B,0),I.push(0,0,1),T.push(D/c),T.push(1-b/f)}}for(let b=0;b<f;b++)for(let B=0;B<c;B++){const D=B+h*b,W=B+h*(b+1),ne=B+1+h*(b+1),ae=B+1+h*b;S.push(D,W,ae),S.push(W,ne,ae)}this.setIndex(S),this.setAttribute("position",new Cr(E,3)),this.setAttribute("normal",new Cr(I,3)),this.setAttribute("uv",new Cr(T,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jo(e.width,e.height,e.widthSegments,e.heightSegments)}}var xf=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,pu=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,mu=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Sf=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,zl=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Kc=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,gu=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,vu=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Zl=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,il=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Dc=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,pc=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Tl=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Zu=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Mf=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Ta=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Yu=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Yl=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,bf=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Bl=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Ku=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,pa=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,wf=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,qu=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Al=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Ef=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Ju=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,$u=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,qc="gl_FragColor = linearToOutputTexel( gl_FragColor );",Ka=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,Jc=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Qu=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Cl=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Oc=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Kl=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,$c=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,yu=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,d=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,M=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,P=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,z=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,J=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,oe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Re=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,pt=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Bt=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,i=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,s=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,u=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,p=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,y=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,A=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,V=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,pe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Fe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,nt=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Nt=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,kt=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,un=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,mr=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,yn=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Ci=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,ts=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Ee=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,be=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Ze=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Mn=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,cr=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Vr=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Br=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Oi=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,qs=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Gi=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,ao=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Na=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,ef=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,tf=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,ql=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Qc=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,kl=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,_u=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,eu=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Nc=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,mc=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Eo=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,sa=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,is=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Hl=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,xu=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Qd=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,eh=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,th=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,nh=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,Tf=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Jl=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,rh=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,nf=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Jf=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,$f=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Af=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Qf=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Fo=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,ed=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,td=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,wg=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Ki={alphahash_fragment:xf,alphahash_pars_fragment:pu,alphamap_fragment:mu,alphamap_pars_fragment:Sf,alphatest_fragment:zl,alphatest_pars_fragment:Kc,aomap_fragment:gu,aomap_pars_fragment:vu,begin_vertex:Zl,beginnormal_vertex:il,bsdfs:Dc,iridescence_fragment:pc,bumpmap_pars_fragment:Tl,clipping_planes_fragment:Zu,clipping_planes_pars_fragment:Mf,clipping_planes_pars_vertex:Ta,clipping_planes_vertex:Yu,color_fragment:Yl,color_pars_fragment:bf,color_pars_vertex:Bl,color_vertex:Ku,common:pa,cube_uv_reflection_fragment:wf,defaultnormal_vertex:qu,displacementmap_pars_vertex:Al,displacementmap_vertex:Ef,emissivemap_fragment:Ju,emissivemap_pars_fragment:$u,colorspace_fragment:qc,colorspace_pars_fragment:Ka,envmap_fragment:Jc,envmap_common_pars_fragment:Qu,envmap_pars_fragment:Cl,envmap_pars_vertex:Oc,envmap_physical_pars_fragment:Bt,envmap_vertex:Kl,fog_vertex:$c,fog_pars_vertex:yu,fog_fragment:d,fog_pars_fragment:M,gradientmap_pars_fragment:P,lightmap_fragment:z,lightmap_pars_fragment:J,lights_lambert_fragment:oe,lights_lambert_pars_fragment:Re,lights_pars_begin:pt,lights_toon_fragment:i,lights_toon_pars_fragment:s,lights_phong_fragment:u,lights_phong_pars_fragment:p,lights_physical_fragment:y,lights_physical_pars_fragment:A,lights_fragment_begin:V,lights_fragment_maps:pe,lights_fragment_end:Fe,logdepthbuf_fragment:nt,logdepthbuf_pars_fragment:Nt,logdepthbuf_pars_vertex:kt,logdepthbuf_vertex:un,map_fragment:mr,map_pars_fragment:yn,map_particle_fragment:Ci,map_particle_pars_fragment:ts,metalnessmap_fragment:Ee,metalnessmap_pars_fragment:be,morphcolor_vertex:Ze,morphnormal_vertex:Mn,morphtarget_pars_vertex:cr,morphtarget_vertex:Vr,normal_fragment_begin:Br,normal_fragment_maps:Oi,normal_pars_fragment:qs,normal_pars_vertex:Gi,normal_vertex:ao,normalmap_pars_fragment:Na,clearcoat_normal_fragment_begin:ef,clearcoat_normal_fragment_maps:tf,clearcoat_pars_fragment:ql,iridescence_pars_fragment:Qc,opaque_fragment:kl,packing:_u,premultiplied_alpha_fragment:eu,project_vertex:Nc,dithering_fragment:mc,dithering_pars_fragment:Eo,roughnessmap_fragment:sa,roughnessmap_pars_fragment:is,shadowmap_pars_fragment:Hl,shadowmap_pars_vertex:xu,shadowmap_vertex:Qd,shadowmask_pars_fragment:eh,skinbase_vertex:th,skinning_pars_vertex:nh,skinning_vertex:Tf,skinnormal_vertex:Jl,specularmap_fragment:rh,specularmap_pars_fragment:nf,tonemapping_fragment:Jf,tonemapping_pars_fragment:$f,transmission_fragment:Af,transmission_pars_fragment:Qf,uv_pars_fragment:Fo,uv_pars_vertex:ed,uv_vertex:td,worldpos_vertex:wg,background_vert:`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,background_frag:`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,backgroundCube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,backgroundCube_frag:`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,cube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cube_frag:`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,depth_vert:`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,distanceRGBA_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,distanceRGBA_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,equirect_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,meshbasic_vert:`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert:`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag:`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert:`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshmatcap_frag:`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshnormal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,meshnormal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert:`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,meshphysical_frag:`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert:`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshtoon_frag:`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,shadow_vert:`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,sprite_vert:`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sprite_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`},or={common:{diffuse:{value:new Qn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new xr},alphaMap:{value:null},alphaMapTransform:{value:new xr},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new xr}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new xr}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new xr}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new xr},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new xr},normalScale:{value:new Et(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new xr},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new xr}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new xr}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new xr}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Qn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Qn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new xr},alphaTest:{value:0},uvTransform:{value:new xr}},sprite:{diffuse:{value:new Qn(16777215)},opacity:{value:1},center:{value:new Et(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new xr},alphaMap:{value:null},alphaMapTransform:{value:new xr},alphaTest:{value:0}}},$l={basic:{uniforms:Uo([or.common,or.specularmap,or.envmap,or.aomap,or.lightmap,or.fog]),vertexShader:Ki.meshbasic_vert,fragmentShader:Ki.meshbasic_frag},lambert:{uniforms:Uo([or.common,or.specularmap,or.envmap,or.aomap,or.lightmap,or.emissivemap,or.bumpmap,or.normalmap,or.displacementmap,or.fog,or.lights,{emissive:{value:new Qn(0)}}]),vertexShader:Ki.meshlambert_vert,fragmentShader:Ki.meshlambert_frag},phong:{uniforms:Uo([or.common,or.specularmap,or.envmap,or.aomap,or.lightmap,or.emissivemap,or.bumpmap,or.normalmap,or.displacementmap,or.fog,or.lights,{emissive:{value:new Qn(0)},specular:{value:new Qn(1118481)},shininess:{value:30}}]),vertexShader:Ki.meshphong_vert,fragmentShader:Ki.meshphong_frag},standard:{uniforms:Uo([or.common,or.envmap,or.aomap,or.lightmap,or.emissivemap,or.bumpmap,or.normalmap,or.displacementmap,or.roughnessmap,or.metalnessmap,or.fog,or.lights,{emissive:{value:new Qn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ki.meshphysical_vert,fragmentShader:Ki.meshphysical_frag},toon:{uniforms:Uo([or.common,or.aomap,or.lightmap,or.emissivemap,or.bumpmap,or.normalmap,or.displacementmap,or.gradientmap,or.fog,or.lights,{emissive:{value:new Qn(0)}}]),vertexShader:Ki.meshtoon_vert,fragmentShader:Ki.meshtoon_frag},matcap:{uniforms:Uo([or.common,or.bumpmap,or.normalmap,or.displacementmap,or.fog,{matcap:{value:null}}]),vertexShader:Ki.meshmatcap_vert,fragmentShader:Ki.meshmatcap_frag},points:{uniforms:Uo([or.points,or.fog]),vertexShader:Ki.points_vert,fragmentShader:Ki.points_frag},dashed:{uniforms:Uo([or.common,or.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ki.linedashed_vert,fragmentShader:Ki.linedashed_frag},depth:{uniforms:Uo([or.common,or.displacementmap]),vertexShader:Ki.depth_vert,fragmentShader:Ki.depth_frag},normal:{uniforms:Uo([or.common,or.bumpmap,or.normalmap,or.displacementmap,{opacity:{value:1}}]),vertexShader:Ki.meshnormal_vert,fragmentShader:Ki.meshnormal_frag},sprite:{uniforms:Uo([or.sprite,or.fog]),vertexShader:Ki.sprite_vert,fragmentShader:Ki.sprite_frag},background:{uniforms:{uvTransform:{value:new xr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ki.background_vert,fragmentShader:Ki.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Ki.backgroundCube_vert,fragmentShader:Ki.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ki.cube_vert,fragmentShader:Ki.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ki.equirect_vert,fragmentShader:Ki.equirect_frag},distanceRGBA:{uniforms:Uo([or.common,or.displacementmap,{referencePosition:{value:new $},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ki.distanceRGBA_vert,fragmentShader:Ki.distanceRGBA_frag},shadow:{uniforms:Uo([or.lights,or.fog,{color:{value:new Qn(0)},opacity:{value:1}}]),vertexShader:Ki.shadow_vert,fragmentShader:Ki.shadow_frag}};$l.physical={uniforms:Uo([$l.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new xr},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new xr},clearcoatNormalScale:{value:new Et(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new xr},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new xr},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new xr},sheen:{value:0},sheenColor:{value:new Qn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new xr},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new xr},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new xr},transmissionSamplerSize:{value:new Et},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new xr},attenuationDistance:{value:0},attenuationColor:{value:new Qn(0)},specularColor:{value:new Qn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new xr},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new xr},anisotropyVector:{value:new Et},anisotropyMap:{value:null},anisotropyMapTransform:{value:new xr}}]),vertexShader:Ki.meshphysical_vert,fragmentShader:Ki.meshphysical_frag};const nd={r:0,b:0,g:0};function Eg(a,e,t,n,r,o,l){const c=new Qn(0);let f=o===!0?0:1,h,g,_=null,x=0,S=null;function E(T,b){let B=!1,D=b.isScene===!0?b.background:null;D&&D.isTexture&&(D=(b.backgroundBlurriness>0?t:e).get(D)),D===null?I(c,f):D&&D.isColor&&(I(D,1),B=!0);const W=a.xr.getEnvironmentBlendMode();W==="additive"?n.buffers.color.setClear(0,0,0,1,l):W==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,l),(a.autoClear||B)&&a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil),D&&(D.isCubeTexture||D.mapping===Xi)?(g===void 0&&(g=new es(new ja(1,1,1),new Za({name:"BackgroundCubeMaterial",uniforms:Ks($l.backgroundCube.uniforms),vertexShader:$l.backgroundCube.vertexShader,fragmentShader:$l.backgroundCube.fragmentShader,side:ut,depthTest:!1,depthWrite:!1,fog:!1})),g.geometry.deleteAttribute("normal"),g.geometry.deleteAttribute("uv"),g.onBeforeRender=function(ne,ae,ue){this.matrixWorld.copyPosition(ue.matrixWorld)},Object.defineProperty(g.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(g)),g.material.uniforms.envMap.value=D,g.material.uniforms.flipEnvMap.value=D.isCubeTexture&&D.isRenderTargetTexture===!1?-1:1,g.material.uniforms.backgroundBlurriness.value=b.backgroundBlurriness,g.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,g.material.toneMapped=Xr.getTransfer(D.colorSpace)!==L,(_!==D||x!==D.version||S!==a.toneMapping)&&(g.material.needsUpdate=!0,_=D,x=D.version,S=a.toneMapping),g.layers.enableAll(),T.unshift(g,g.geometry,g.material,0,0,null)):D&&D.isTexture&&(h===void 0&&(h=new es(new jo(2,2),new Za({name:"BackgroundMaterial",uniforms:Ks($l.background.uniforms),vertexShader:$l.background.vertexShader,fragmentShader:$l.background.fragmentShader,side:Ae,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(h)),h.material.uniforms.t2D.value=D,h.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,h.material.toneMapped=Xr.getTransfer(D.colorSpace)!==L,D.matrixAutoUpdate===!0&&D.updateMatrix(),h.material.uniforms.uvTransform.value.copy(D.matrix),(_!==D||x!==D.version||S!==a.toneMapping)&&(h.material.needsUpdate=!0,_=D,x=D.version,S=a.toneMapping),h.layers.enableAll(),T.unshift(h,h.geometry,h.material,0,0,null))}function I(T,b){T.getRGB(nd,Pc(a)),n.buffers.color.setClear(nd.r,nd.g,nd.b,b,l)}return{getClearColor:function(){return c},setClearColor:function(T,b=1){c.set(T),f=b,I(c,f)},getClearAlpha:function(){return f},setClearAlpha:function(T){f=T,I(c,f)},render:E}}function Tg(a,e,t,n){const r=a.getParameter(a.MAX_VERTEX_ATTRIBS),o=n.isWebGL2?null:e.get("OES_vertex_array_object"),l=n.isWebGL2||o!==null,c={},f=T(null);let h=f,g=!1;function _(Ie,Mt,qt,Xt,Vn){let cn=!1;if(l){const bn=I(Xt,qt,Mt);h!==bn&&(h=bn,S(h.object)),cn=b(Ie,Xt,qt,Vn),cn&&B(Ie,Xt,qt,Vn)}else{const bn=Mt.wireframe===!0;(h.geometry!==Xt.id||h.program!==qt.id||h.wireframe!==bn)&&(h.geometry=Xt.id,h.program=qt.id,h.wireframe=bn,cn=!0)}Vn!==null&&t.update(Vn,a.ELEMENT_ARRAY_BUFFER),(cn||g)&&(g=!1,Te(Ie,Mt,qt,Xt),Vn!==null&&a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,t.get(Vn).buffer))}function x(){return n.isWebGL2?a.createVertexArray():o.createVertexArrayOES()}function S(Ie){return n.isWebGL2?a.bindVertexArray(Ie):o.bindVertexArrayOES(Ie)}function E(Ie){return n.isWebGL2?a.deleteVertexArray(Ie):o.deleteVertexArrayOES(Ie)}function I(Ie,Mt,qt){const Xt=qt.wireframe===!0;let Vn=c[Ie.id];Vn===void 0&&(Vn={},c[Ie.id]=Vn);let cn=Vn[Mt.id];cn===void 0&&(cn={},Vn[Mt.id]=cn);let bn=cn[Xt];return bn===void 0&&(bn=T(x()),cn[Xt]=bn),bn}function T(Ie){const Mt=[],qt=[],Xt=[];for(let Vn=0;Vn<r;Vn++)Mt[Vn]=0,qt[Vn]=0,Xt[Vn]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Mt,enabledAttributes:qt,attributeDivisors:Xt,object:Ie,attributes:{},index:null}}function b(Ie,Mt,qt,Xt){const Vn=h.attributes,cn=Mt.attributes;let bn=0;const Be=qt.getAttributes();for(const Gt in Be)if(Be[Gt].location>=0){const Rr=Vn[Gt];let Fr=cn[Gt];if(Fr===void 0&&(Gt==="instanceMatrix"&&Ie.instanceMatrix&&(Fr=Ie.instanceMatrix),Gt==="instanceColor"&&Ie.instanceColor&&(Fr=Ie.instanceColor)),Rr===void 0||Rr.attribute!==Fr||Fr&&Rr.data!==Fr.data)return!0;bn++}return h.attributesNum!==bn||h.index!==Xt}function B(Ie,Mt,qt,Xt){const Vn={},cn=Mt.attributes;let bn=0;const Be=qt.getAttributes();for(const Gt in Be)if(Be[Gt].location>=0){let Rr=cn[Gt];Rr===void 0&&(Gt==="instanceMatrix"&&Ie.instanceMatrix&&(Rr=Ie.instanceMatrix),Gt==="instanceColor"&&Ie.instanceColor&&(Rr=Ie.instanceColor));const Fr={};Fr.attribute=Rr,Rr&&Rr.data&&(Fr.data=Rr.data),Vn[Gt]=Fr,bn++}h.attributes=Vn,h.attributesNum=bn,h.index=Xt}function D(){const Ie=h.newAttributes;for(let Mt=0,qt=Ie.length;Mt<qt;Mt++)Ie[Mt]=0}function W(Ie){ne(Ie,0)}function ne(Ie,Mt){const qt=h.newAttributes,Xt=h.enabledAttributes,Vn=h.attributeDivisors;qt[Ie]=1,Xt[Ie]===0&&(a.enableVertexAttribArray(Ie),Xt[Ie]=1),Vn[Ie]!==Mt&&((n.isWebGL2?a:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Ie,Mt),Vn[Ie]=Mt)}function ae(){const Ie=h.newAttributes,Mt=h.enabledAttributes;for(let qt=0,Xt=Mt.length;qt<Xt;qt++)Mt[qt]!==Ie[qt]&&(a.disableVertexAttribArray(qt),Mt[qt]=0)}function ue(Ie,Mt,qt,Xt,Vn,cn,bn){bn===!0?a.vertexAttribIPointer(Ie,Mt,qt,Vn,cn):a.vertexAttribPointer(Ie,Mt,qt,Xt,Vn,cn)}function Te(Ie,Mt,qt,Xt){if(n.isWebGL2===!1&&(Ie.isInstancedMesh||Xt.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;D();const Vn=Xt.attributes,cn=qt.getAttributes(),bn=Mt.defaultAttributeValues;for(const Be in cn){const Gt=cn[Be];if(Gt.location>=0){let Sr=Vn[Be];if(Sr===void 0&&(Be==="instanceMatrix"&&Ie.instanceMatrix&&(Sr=Ie.instanceMatrix),Be==="instanceColor"&&Ie.instanceColor&&(Sr=Ie.instanceColor)),Sr!==void 0){const Rr=Sr.normalized,Fr=Sr.itemSize,di=t.get(Sr);if(di===void 0)continue;const Ri=di.buffer,hi=di.type,Vi=di.bytesPerElement,Os=n.isWebGL2===!0&&(hi===a.INT||hi===a.UNSIGNED_INT||Sr.gpuType===$n);if(Sr.isInterleavedBufferAttribute){const pi=Sr.data,Me=pi.stride,ar=Sr.offset;if(pi.isInstancedInterleavedBuffer){for(let Yt=0;Yt<Gt.locationSize;Yt++)ne(Gt.location+Yt,pi.meshPerAttribute);Ie.isInstancedMesh!==!0&&Xt._maxInstanceCount===void 0&&(Xt._maxInstanceCount=pi.meshPerAttribute*pi.count)}else for(let Yt=0;Yt<Gt.locationSize;Yt++)W(Gt.location+Yt);a.bindBuffer(a.ARRAY_BUFFER,Ri);for(let Yt=0;Yt<Gt.locationSize;Yt++)ue(Gt.location+Yt,Fr/Gt.locationSize,hi,Rr,Me*Vi,(ar+Fr/Gt.locationSize*Yt)*Vi,Os)}else{if(Sr.isInstancedBufferAttribute){for(let pi=0;pi<Gt.locationSize;pi++)ne(Gt.location+pi,Sr.meshPerAttribute);Ie.isInstancedMesh!==!0&&Xt._maxInstanceCount===void 0&&(Xt._maxInstanceCount=Sr.meshPerAttribute*Sr.count)}else for(let pi=0;pi<Gt.locationSize;pi++)W(Gt.location+pi);a.bindBuffer(a.ARRAY_BUFFER,Ri);for(let pi=0;pi<Gt.locationSize;pi++)ue(Gt.location+pi,Fr/Gt.locationSize,hi,Rr,Fr*Vi,Fr/Gt.locationSize*pi*Vi,Os)}}else if(bn!==void 0){const Rr=bn[Be];if(Rr!==void 0)switch(Rr.length){case 2:a.vertexAttrib2fv(Gt.location,Rr);break;case 3:a.vertexAttrib3fv(Gt.location,Rr);break;case 4:a.vertexAttrib4fv(Gt.location,Rr);break;default:a.vertexAttrib1fv(Gt.location,Rr)}}}}ae()}function j(){Qt();for(const Ie in c){const Mt=c[Ie];for(const qt in Mt){const Xt=Mt[qt];for(const Vn in Xt)E(Xt[Vn].object),delete Xt[Vn];delete Mt[qt]}delete c[Ie]}}function ie(Ie){if(c[Ie.id]===void 0)return;const Mt=c[Ie.id];for(const qt in Mt){const Xt=Mt[qt];for(const Vn in Xt)E(Xt[Vn].object),delete Xt[Vn];delete Mt[qt]}delete c[Ie.id]}function rt(Ie){for(const Mt in c){const qt=c[Mt];if(qt[Ie.id]===void 0)continue;const Xt=qt[Ie.id];for(const Vn in Xt)E(Xt[Vn].object),delete Xt[Vn];delete qt[Ie.id]}}function Qt(){_n(),g=!0,h!==f&&(h=f,S(h.object))}function _n(){f.geometry=null,f.program=null,f.wireframe=!1}return{setup:_,reset:Qt,resetDefaultState:_n,dispose:j,releaseStatesOfGeometry:ie,releaseStatesOfProgram:rt,initAttributes:D,enableAttribute:W,disableUnusedAttributes:ae}}function Ag(a,e,t,n){const r=n.isWebGL2;let o;function l(h){o=h}function c(h,g){a.drawArrays(o,h,g),t.update(g,o,1)}function f(h,g,_){if(_===0)return;let x,S;if(r)x=a,S="drawArraysInstanced";else if(x=e.get("ANGLE_instanced_arrays"),S="drawArraysInstancedANGLE",x===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}x[S](o,h,g,_),t.update(g,o,_)}this.setMode=l,this.render=c,this.renderInstances=f}function Cg(a,e,t){let n;function r(){if(n!==void 0)return n;if(e.has("EXT_texture_filter_anisotropic")===!0){const ue=e.get("EXT_texture_filter_anisotropic");n=a.getParameter(ue.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function o(ue){if(ue==="highp"){if(a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision>0&&a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision>0)return"highp";ue="mediump"}return ue==="mediump"&&a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision>0&&a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const l=typeof WebGL2RenderingContext!="undefined"&&a.constructor.name==="WebGL2RenderingContext";let c=t.precision!==void 0?t.precision:"highp";const f=o(c);f!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",f,"instead."),c=f);const h=l||e.has("WEBGL_draw_buffers"),g=t.logarithmicDepthBuffer===!0,_=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),x=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),S=a.getParameter(a.MAX_TEXTURE_SIZE),E=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),I=a.getParameter(a.MAX_VERTEX_ATTRIBS),T=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS),b=a.getParameter(a.MAX_VARYING_VECTORS),B=a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS),D=x>0,W=l||e.has("OES_texture_float"),ne=D&&W,ae=l?a.getParameter(a.MAX_SAMPLES):0;return{isWebGL2:l,drawBuffers:h,getMaxAnisotropy:r,getMaxPrecision:o,precision:c,logarithmicDepthBuffer:g,maxTextures:_,maxVertexTextures:x,maxTextureSize:S,maxCubemapSize:E,maxAttributes:I,maxVertexUniforms:T,maxVaryings:b,maxFragmentUniforms:B,vertexTextures:D,floatFragmentTextures:W,floatVertexTextures:ne,maxSamples:ae}}function Rg(a){const e=this;let t=null,n=0,r=!1,o=!1;const l=new rl,c=new xr,f={value:null,needsUpdate:!1};this.uniform=f,this.numPlanes=0,this.numIntersection=0,this.init=function(_,x){const S=_.length!==0||x||n!==0||r;return r=x,n=_.length,S},this.beginShadows=function(){o=!0,g(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(_,x){t=g(_,x,0)},this.setState=function(_,x,S){const E=_.clippingPlanes,I=_.clipIntersection,T=_.clipShadows,b=a.get(_);if(!r||E===null||E.length===0||o&&!T)o?g(null):h();else{const B=o?0:n,D=B*4;let W=b.clippingState||null;f.value=W,W=g(E,x,D,S);for(let ne=0;ne!==D;++ne)W[ne]=t[ne];b.clippingState=W,this.numIntersection=I?this.numPlanes:0,this.numPlanes+=B}};function h(){f.value!==t&&(f.value=t,f.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function g(_,x,S,E){const I=_!==null?_.length:0;let T=null;if(I!==0){if(T=f.value,E!==!0||T===null){const b=S+I*4,B=x.matrixWorldInverse;c.getNormalMatrix(B),(T===null||T.length<b)&&(T=new Float32Array(b));for(let D=0,W=S;D!==I;++D,W+=4)l.copy(_[D]).applyMatrix4(B,c),l.normal.toArray(T,W),T[W+3]=l.constant}f.value=T,f.needsUpdate=!0}return e.numPlanes=I,e.numIntersection=0,T}}function Pg(a){let e=new WeakMap;function t(l,c){return c===ls?l.mapping=ii:c===Hr&&(l.mapping=ui),l}function n(l){if(l&&l.isTexture&&l.isRenderTargetTexture===!1){const c=l.mapping;if(c===ls||c===Hr)if(e.has(l)){const f=e.get(l).texture;return t(f,l.mapping)}else{const f=l.image;if(f&&f.height>0){const h=new El(f.height/2);return h.fromEquirectangularTexture(a,l),e.set(l,h),l.addEventListener("dispose",r),t(h.texture,l.mapping)}else return null}}return l}function r(l){const c=l.target;c.removeEventListener("dispose",r);const f=e.get(c);f!==void 0&&(e.delete(c),f.dispose())}function o(){e=new WeakMap}return{get:n,dispose:o}}class rd extends dc{constructor(e=-1,t=1,n=1,r=-1,o=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=o,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,o,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let o=n-e,l=n+e,c=r+t,f=r-t;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=h*this.view.offsetX,l=o+h*this.view.width,c-=g*this.view.offsetY,f=c-g*this.view.height}this.projectionMatrix.makeOrthographic(o,l,c,f,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const rf=4,np=[.125,.215,.35,.446,.526,.582],Su=20,ih=new rd,rp=new Qn;let sh=null,oh=0,ah=0;const Mu=(1+Math.sqrt(5))/2,sf=1/Mu,ip=[new $(1,1,1),new $(-1,1,1),new $(1,1,-1),new $(-1,1,-1),new $(0,Mu,sf),new $(0,Mu,-sf),new $(sf,0,Mu),new $(-sf,0,Mu),new $(Mu,sf,0),new $(-Mu,sf,0)];class lh{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){sh=this._renderer.getRenderTarget(),oh=this._renderer.getActiveCubeFace(),ah=this._renderer.getActiveMipmapLevel(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,n,r,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=ap(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=op(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(sh,oh,ah),e.scissorTest=!1,id(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ii||e.mapping===ui?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),sh=this._renderer.getRenderTarget(),oh=this._renderer.getActiveCubeFace(),ah=this._renderer.getActiveMipmapLevel();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Ht,minFilter:Ht,generateMipmaps:!1,type:xe,format:Zi,colorSpace:Y,depthBuffer:!1},r=sp(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=sp(e,t,n);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Ig(o)),this._blurMaterial=Lg(o,e,t)}return r}_compileMaterial(e){const t=new es(this._lodPlanes[0],e);this._renderer.compile(t,ih)}_sceneToCubeUV(e,t,n,r){const c=new oo(90,1,t,n),f=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],g=this._renderer,_=g.autoClear,x=g.toneMapping;g.getClearColor(rp),g.toneMapping=_r,g.autoClear=!1;const S=new ha({name:"PMREM.Background",side:ut,depthWrite:!1,depthTest:!1}),E=new es(new ja,S);let I=!1;const T=e.background;T?T.isColor&&(S.color.copy(T),e.background=null,I=!0):(S.color.copy(rp),I=!0);for(let b=0;b<6;b++){const B=b%3;B===0?(c.up.set(0,f[b],0),c.lookAt(h[b],0,0)):B===1?(c.up.set(0,0,f[b]),c.lookAt(0,h[b],0)):(c.up.set(0,f[b],0),c.lookAt(0,0,h[b]));const D=this._cubeSize;id(r,B*D,b>2?D:0,D,D),g.setRenderTarget(r),I&&g.render(E,c),g.render(e,c)}E.geometry.dispose(),E.material.dispose(),g.toneMapping=x,g.autoClear=_,e.background=T}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===ii||e.mapping===ui;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=ap()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=op());const o=r?this._cubemapMaterial:this._equirectMaterial,l=new es(this._lodPlanes[0],o),c=o.uniforms;c.envMap.value=e;const f=this._cubeSize;id(t,0,0,3*f,2*f),n.setRenderTarget(t),n.render(l,ih)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const o=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),l=ip[(r-1)%ip.length];this._blur(e,r-1,r,o,l)}t.autoClear=n}_blur(e,t,n,r,o){const l=this._pingPongRenderTarget;this._halfBlur(e,l,t,n,r,"latitudinal",o),this._halfBlur(l,e,n,n,r,"longitudinal",o)}_halfBlur(e,t,n,r,o,l,c){const f=this._renderer,h=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const g=3,_=new es(this._lodPlanes[r],h),x=h.uniforms,S=this._sizeLods[n]-1,E=isFinite(o)?Math.PI/(2*S):2*Math.PI/(2*Su-1),I=o/E,T=isFinite(o)?1+Math.floor(g*I):Su;T>Su&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${T} samples when the maximum is set to ${Su}`);const b=[];let B=0;for(let ue=0;ue<Su;++ue){const Te=ue/I,j=Math.exp(-Te*Te/2);b.push(j),ue===0?B+=j:ue<T&&(B+=2*j)}for(let ue=0;ue<b.length;ue++)b[ue]=b[ue]/B;x.envMap.value=e.texture,x.samples.value=T,x.weights.value=b,x.latitudinal.value=l==="latitudinal",c&&(x.poleAxis.value=c);const{_lodMax:D}=this;x.dTheta.value=E,x.mipInt.value=D-n;const W=this._sizeLods[r],ne=3*W*(r>D-rf?r-D+rf:0),ae=4*(this._cubeSize-W);id(t,ne,ae,3*W,2*W),f.setRenderTarget(t),f.render(_,ih)}}function Ig(a){const e=[],t=[],n=[];let r=a;const o=a-rf+1+np.length;for(let l=0;l<o;l++){const c=Math.pow(2,r);t.push(c);let f=1/c;l>a-rf?f=np[l-a+rf-1]:l===0&&(f=0),n.push(f);const h=1/(c-2),g=-h,_=1+h,x=[g,g,_,g,_,_,g,g,_,_,g,_],S=6,E=6,I=3,T=2,b=1,B=new Float32Array(I*E*S),D=new Float32Array(T*E*S),W=new Float32Array(b*E*S);for(let ae=0;ae<S;ae++){const ue=ae%3*2/3-1,Te=ae>2?0:-1,j=[ue,Te,0,ue+2/3,Te,0,ue+2/3,Te+1,0,ue,Te,0,ue+2/3,Te+1,0,ue,Te+1,0];B.set(j,I*E*ae),D.set(x,T*E*ae);const ie=[ae,ae,ae,ae,ae,ae];W.set(ie,b*E*ae)}const ne=new wi;ne.setAttribute("position",new hs(B,I)),ne.setAttribute("uv",new hs(D,T)),ne.setAttribute("faceIndex",new hs(W,b)),e.push(ne),r>rf&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function sp(a,e,t){const n=new Sn(a,e,t);return n.texture.mapping=Xi,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function id(a,e,t,n,r){a.viewport.set(e,t,n,r),a.scissor.set(e,t,n,r)}function Lg(a,e,t){const n=new Float32Array(Su),r=new $(0,1,0);return new Za({name:"SphericalGaussianBlur",defines:{n:Su,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${a}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:ch(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Rn,depthTest:!1,depthWrite:!1})}function op(){return new Za({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:ch(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Rn,depthTest:!1,depthWrite:!1})}function ap(){return new Za({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:ch(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Rn,depthTest:!1,depthWrite:!1})}function ch(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Dg(a){let e=new WeakMap,t=null;function n(c){if(c&&c.isTexture){const f=c.mapping,h=f===ls||f===Hr,g=f===ii||f===ui;if(h||g)if(c.isRenderTargetTexture&&c.needsPMREMUpdate===!0){c.needsPMREMUpdate=!1;let _=e.get(c);return t===null&&(t=new lh(a)),_=h?t.fromEquirectangular(c,_):t.fromCubemap(c,_),e.set(c,_),_.texture}else{if(e.has(c))return e.get(c).texture;{const _=c.image;if(h&&_&&_.height>0||g&&_&&r(_)){t===null&&(t=new lh(a));const x=h?t.fromEquirectangular(c):t.fromCubemap(c);return e.set(c,x),c.addEventListener("dispose",o),x.texture}else return null}}}return c}function r(c){let f=0;const h=6;for(let g=0;g<h;g++)c[g]!==void 0&&f++;return f===h}function o(c){const f=c.target;f.removeEventListener("dispose",o);const h=e.get(f);h!==void 0&&(e.delete(f),h.dispose())}function l(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:l}}function Og(a){const e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=a.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const r=t(n);return r===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function Ng(a,e,t,n){const r={},o=new WeakMap;function l(_){const x=_.target;x.index!==null&&e.remove(x.index);for(const E in x.attributes)e.remove(x.attributes[E]);for(const E in x.morphAttributes){const I=x.morphAttributes[E];for(let T=0,b=I.length;T<b;T++)e.remove(I[T])}x.removeEventListener("dispose",l),delete r[x.id];const S=o.get(x);S&&(e.remove(S),o.delete(x)),n.releaseStatesOfGeometry(x),x.isInstancedBufferGeometry===!0&&delete x._maxInstanceCount,t.memory.geometries--}function c(_,x){return r[x.id]===!0||(x.addEventListener("dispose",l),r[x.id]=!0,t.memory.geometries++),x}function f(_){const x=_.attributes;for(const E in x)e.update(x[E],a.ARRAY_BUFFER);const S=_.morphAttributes;for(const E in S){const I=S[E];for(let T=0,b=I.length;T<b;T++)e.update(I[T],a.ARRAY_BUFFER)}}function h(_){const x=[],S=_.index,E=_.attributes.position;let I=0;if(S!==null){const B=S.array;I=S.version;for(let D=0,W=B.length;D<W;D+=3){const ne=B[D+0],ae=B[D+1],ue=B[D+2];x.push(ne,ae,ae,ue,ue,ne)}}else if(E!==void 0){const B=E.array;I=E.version;for(let D=0,W=B.length/3-1;D<W;D+=3){const ne=D+0,ae=D+1,ue=D+2;x.push(ne,ae,ae,ue,ue,ne)}}else return;const T=new(po(x)?jc:xi)(x,1);T.version=I;const b=o.get(_);b&&e.remove(b),o.set(_,T)}function g(_){const x=o.get(_);if(x){const S=_.index;S!==null&&x.version<S.version&&h(_)}else h(_);return o.get(_)}return{get:c,update:f,getWireframeAttribute:g}}function Ug(a,e,t,n){const r=n.isWebGL2;let o;function l(x){o=x}let c,f;function h(x){c=x.type,f=x.bytesPerElement}function g(x,S){a.drawElements(o,S,c,x*f),t.update(S,o,1)}function _(x,S,E){if(E===0)return;let I,T;if(r)I=a,T="drawElementsInstanced";else if(I=e.get("ANGLE_instanced_arrays"),T="drawElementsInstancedANGLE",I===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}I[T](o,S,c,x*f,E),t.update(S,o,E)}this.setMode=l,this.setIndex=h,this.render=g,this.renderInstances=_}function Fg(a){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(o,l,c){switch(t.calls++,l){case a.TRIANGLES:t.triangles+=c*(o/3);break;case a.LINES:t.lines+=c*(o/2);break;case a.LINE_STRIP:t.lines+=c*(o-1);break;case a.LINE_LOOP:t.lines+=c*o;break;case a.POINTS:t.points+=c*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",l);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}function zg(a,e){return a[0]-e[0]}function Bg(a,e){return Math.abs(e[1])-Math.abs(a[1])}function kg(a,e,t){const n={},r=new Float32Array(8),o=new WeakMap,l=new Dt,c=[];for(let h=0;h<8;h++)c[h]=[h,0];function f(h,g,_){const x=h.morphTargetInfluences;if(e.isWebGL2===!0){const S=g.morphAttributes.position||g.morphAttributes.normal||g.morphAttributes.color,E=S!==void 0?S.length:0;let I=o.get(g);if(I===void 0||I.count!==E){let Ie=function(){Qt.dispose(),o.delete(g),g.removeEventListener("dispose",Ie)};I!==void 0&&I.texture.dispose();const B=g.morphAttributes.position!==void 0,D=g.morphAttributes.normal!==void 0,W=g.morphAttributes.color!==void 0,ne=g.morphAttributes.position||[],ae=g.morphAttributes.normal||[],ue=g.morphAttributes.color||[];let Te=0;B===!0&&(Te=1),D===!0&&(Te=2),W===!0&&(Te=3);let j=g.attributes.position.count*Te,ie=1;j>e.maxTextureSize&&(ie=Math.ceil(j/e.maxTextureSize),j=e.maxTextureSize);const rt=new Float32Array(j*ie*4*E),Qt=new gn(rt,j,ie,E);Qt.type=ti,Qt.needsUpdate=!0;const _n=Te*4;for(let Mt=0;Mt<E;Mt++){const qt=ne[Mt],Xt=ae[Mt],Vn=ue[Mt],cn=j*ie*4*Mt;for(let bn=0;bn<qt.count;bn++){const Be=bn*_n;B===!0&&(l.fromBufferAttribute(qt,bn),rt[cn+Be+0]=l.x,rt[cn+Be+1]=l.y,rt[cn+Be+2]=l.z,rt[cn+Be+3]=0),D===!0&&(l.fromBufferAttribute(Xt,bn),rt[cn+Be+4]=l.x,rt[cn+Be+5]=l.y,rt[cn+Be+6]=l.z,rt[cn+Be+7]=0),W===!0&&(l.fromBufferAttribute(Vn,bn),rt[cn+Be+8]=l.x,rt[cn+Be+9]=l.y,rt[cn+Be+10]=l.z,rt[cn+Be+11]=Vn.itemSize===4?l.w:1)}}I={count:E,texture:Qt,size:new Et(j,ie)},o.set(g,I),g.addEventListener("dispose",Ie)}let T=0;for(let B=0;B<x.length;B++)T+=x[B];const b=g.morphTargetsRelative?1:1-T;_.getUniforms().setValue(a,"morphTargetBaseInfluence",b),_.getUniforms().setValue(a,"morphTargetInfluences",x),_.getUniforms().setValue(a,"morphTargetsTexture",I.texture,t),_.getUniforms().setValue(a,"morphTargetsTextureSize",I.size)}else{const S=x===void 0?0:x.length;let E=n[g.id];if(E===void 0||E.length!==S){E=[];for(let D=0;D<S;D++)E[D]=[D,0];n[g.id]=E}for(let D=0;D<S;D++){const W=E[D];W[0]=D,W[1]=x[D]}E.sort(Bg);for(let D=0;D<8;D++)D<S&&E[D][1]?(c[D][0]=E[D][0],c[D][1]=E[D][1]):(c[D][0]=Number.MAX_SAFE_INTEGER,c[D][1]=0);c.sort(zg);const I=g.morphAttributes.position,T=g.morphAttributes.normal;let b=0;for(let D=0;D<8;D++){const W=c[D],ne=W[0],ae=W[1];ne!==Number.MAX_SAFE_INTEGER&&ae?(I&&g.getAttribute("morphTarget"+D)!==I[ne]&&g.setAttribute("morphTarget"+D,I[ne]),T&&g.getAttribute("morphNormal"+D)!==T[ne]&&g.setAttribute("morphNormal"+D,T[ne]),r[D]=ae,b+=ae):(I&&g.hasAttribute("morphTarget"+D)===!0&&g.deleteAttribute("morphTarget"+D),T&&g.hasAttribute("morphNormal"+D)===!0&&g.deleteAttribute("morphNormal"+D),r[D]=0)}const B=g.morphTargetsRelative?1:1-b;_.getUniforms().setValue(a,"morphTargetBaseInfluence",B),_.getUniforms().setValue(a,"morphTargetInfluences",r)}}return{update:f}}function Hg(a,e,t,n){let r=new WeakMap;function o(f){const h=n.render.frame,g=f.geometry,_=e.get(f,g);if(r.get(_)!==h&&(e.update(_),r.set(_,h)),f.isInstancedMesh&&(f.hasEventListener("dispose",c)===!1&&f.addEventListener("dispose",c),r.get(f)!==h&&(t.update(f.instanceMatrix,a.ARRAY_BUFFER),f.instanceColor!==null&&t.update(f.instanceColor,a.ARRAY_BUFFER),r.set(f,h))),f.isSkinnedMesh){const x=f.skeleton;r.get(x)!==h&&(x.update(),r.set(x,h))}return _}function l(){r=new WeakMap}function c(f){const h=f.target;h.removeEventListener("dispose",c),t.remove(h.instanceMatrix),h.instanceColor!==null&&t.remove(h.instanceColor)}return{update:o,dispose:l}}const lp=new je,cp=new gn,up=new wn,fp=new Fl,dp=[],hp=[],pp=new Float32Array(16),mp=new Float32Array(9),gp=new Float32Array(4);function of(a,e,t){const n=a[0];if(n<=0||n>0)return a;const r=e*t;let o=dp[r];if(o===void 0&&(o=new Float32Array(r),dp[r]=o),e!==0){n.toArray(o,0);for(let l=1,c=0;l!==e;++l)c+=t,a[l].toArray(o,c)}return o}function ma(a,e){if(a.length!==e.length)return!1;for(let t=0,n=a.length;t<n;t++)if(a[t]!==e[t])return!1;return!0}function ga(a,e){for(let t=0,n=e.length;t<n;t++)a[t]=e[t]}function sd(a,e){let t=hp[e];t===void 0&&(t=new Int32Array(e),hp[e]=t);for(let n=0;n!==e;++n)t[n]=a.allocateTextureUnit();return t}function Gg(a,e){const t=this.cache;t[0]!==e&&(a.uniform1f(this.addr,e),t[0]=e)}function Vg(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(a.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ma(t,e))return;a.uniform2fv(this.addr,e),ga(t,e)}}function Wg(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(a.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(a.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ma(t,e))return;a.uniform3fv(this.addr,e),ga(t,e)}}function jg(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(a.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ma(t,e))return;a.uniform4fv(this.addr,e),ga(t,e)}}function Xg(a,e){const t=this.cache,n=e.elements;if(n===void 0){if(ma(t,e))return;a.uniformMatrix2fv(this.addr,!1,e),ga(t,e)}else{if(ma(t,n))return;gp.set(n),a.uniformMatrix2fv(this.addr,!1,gp),ga(t,n)}}function Zg(a,e){const t=this.cache,n=e.elements;if(n===void 0){if(ma(t,e))return;a.uniformMatrix3fv(this.addr,!1,e),ga(t,e)}else{if(ma(t,n))return;mp.set(n),a.uniformMatrix3fv(this.addr,!1,mp),ga(t,n)}}function Yg(a,e){const t=this.cache,n=e.elements;if(n===void 0){if(ma(t,e))return;a.uniformMatrix4fv(this.addr,!1,e),ga(t,e)}else{if(ma(t,n))return;pp.set(n),a.uniformMatrix4fv(this.addr,!1,pp),ga(t,n)}}function Kg(a,e){const t=this.cache;t[0]!==e&&(a.uniform1i(this.addr,e),t[0]=e)}function qg(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(a.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ma(t,e))return;a.uniform2iv(this.addr,e),ga(t,e)}}function Jg(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(a.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ma(t,e))return;a.uniform3iv(this.addr,e),ga(t,e)}}function $g(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(a.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ma(t,e))return;a.uniform4iv(this.addr,e),ga(t,e)}}function Qg(a,e){const t=this.cache;t[0]!==e&&(a.uniform1ui(this.addr,e),t[0]=e)}function e0(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(a.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ma(t,e))return;a.uniform2uiv(this.addr,e),ga(t,e)}}function t0(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(a.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ma(t,e))return;a.uniform3uiv(this.addr,e),ga(t,e)}}function n0(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(a.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ma(t,e))return;a.uniform4uiv(this.addr,e),ga(t,e)}}function r0(a,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(a.uniform1i(this.addr,r),n[0]=r),t.setTexture2D(e||lp,r)}function i0(a,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(a.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||up,r)}function s0(a,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(a.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||fp,r)}function o0(a,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(a.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||cp,r)}function a0(a){switch(a){case 5126:return Gg;case 35664:return Vg;case 35665:return Wg;case 35666:return jg;case 35674:return Xg;case 35675:return Zg;case 35676:return Yg;case 5124:case 35670:return Kg;case 35667:case 35671:return qg;case 35668:case 35672:return Jg;case 35669:case 35673:return $g;case 5125:return Qg;case 36294:return e0;case 36295:return t0;case 36296:return n0;case 35678:case 36198:case 36298:case 36306:case 35682:return r0;case 35679:case 36299:case 36307:return i0;case 35680:case 36300:case 36308:case 36293:return s0;case 36289:case 36303:case 36311:case 36292:return o0}}function l0(a,e){a.uniform1fv(this.addr,e)}function c0(a,e){const t=of(e,this.size,2);a.uniform2fv(this.addr,t)}function u0(a,e){const t=of(e,this.size,3);a.uniform3fv(this.addr,t)}function f0(a,e){const t=of(e,this.size,4);a.uniform4fv(this.addr,t)}function d0(a,e){const t=of(e,this.size,4);a.uniformMatrix2fv(this.addr,!1,t)}function h0(a,e){const t=of(e,this.size,9);a.uniformMatrix3fv(this.addr,!1,t)}function p0(a,e){const t=of(e,this.size,16);a.uniformMatrix4fv(this.addr,!1,t)}function m0(a,e){a.uniform1iv(this.addr,e)}function g0(a,e){a.uniform2iv(this.addr,e)}function v0(a,e){a.uniform3iv(this.addr,e)}function y0(a,e){a.uniform4iv(this.addr,e)}function _0(a,e){a.uniform1uiv(this.addr,e)}function x0(a,e){a.uniform2uiv(this.addr,e)}function S0(a,e){a.uniform3uiv(this.addr,e)}function M0(a,e){a.uniform4uiv(this.addr,e)}function b0(a,e,t){const n=this.cache,r=e.length,o=sd(t,r);ma(n,o)||(a.uniform1iv(this.addr,o),ga(n,o));for(let l=0;l!==r;++l)t.setTexture2D(e[l]||lp,o[l])}function w0(a,e,t){const n=this.cache,r=e.length,o=sd(t,r);ma(n,o)||(a.uniform1iv(this.addr,o),ga(n,o));for(let l=0;l!==r;++l)t.setTexture3D(e[l]||up,o[l])}function E0(a,e,t){const n=this.cache,r=e.length,o=sd(t,r);ma(n,o)||(a.uniform1iv(this.addr,o),ga(n,o));for(let l=0;l!==r;++l)t.setTextureCube(e[l]||fp,o[l])}function T0(a,e,t){const n=this.cache,r=e.length,o=sd(t,r);ma(n,o)||(a.uniform1iv(this.addr,o),ga(n,o));for(let l=0;l!==r;++l)t.setTexture2DArray(e[l]||cp,o[l])}function A0(a){switch(a){case 5126:return l0;case 35664:return c0;case 35665:return u0;case 35666:return f0;case 35674:return d0;case 35675:return h0;case 35676:return p0;case 5124:case 35670:return m0;case 35667:case 35671:return g0;case 35668:case 35672:return v0;case 35669:case 35673:return y0;case 5125:return _0;case 36294:return x0;case 36295:return S0;case 36296:return M0;case 35678:case 36198:case 36298:case 36306:case 35682:return b0;case 35679:case 36299:case 36307:return w0;case 35680:case 36300:case 36308:case 36293:return E0;case 36289:case 36303:case 36311:case 36292:return T0}}class C0{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=a0(t.type)}}class R0{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=A0(t.type)}}class P0{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let o=0,l=r.length;o!==l;++o){const c=r[o];c.setValue(e,t[c.id],n)}}}const uh=/(\w+)(\])?(\[|\.)?/g;function vp(a,e){a.seq.push(e),a.map[e.id]=e}function I0(a,e,t){const n=a.name,r=n.length;for(uh.lastIndex=0;;){const o=uh.exec(n),l=uh.lastIndex;let c=o[1];const f=o[2]==="]",h=o[3];if(f&&(c=c|0),h===void 0||h==="["&&l+2===r){vp(t,h===void 0?new C0(c,a,e):new R0(c,a,e));break}else{let _=t.map[c];_===void 0&&(_=new P0(c),vp(t,_)),t=_}}}class od{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const o=e.getActiveUniform(t,r),l=e.getUniformLocation(t,o.name);I0(o,l,this)}}setValue(e,t,n,r){const o=this.map[t];o!==void 0&&o.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];r!==void 0&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let o=0,l=t.length;o!==l;++o){const c=t[o],f=n[c.id];f.needsUpdate!==!1&&c.setValue(e,f.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,o=e.length;r!==o;++r){const l=e[r];l.id in t&&n.push(l)}return n}}function yp(a,e,t){const n=a.createShader(e);return a.shaderSource(n,t),a.compileShader(n),n}const L0=37297;let D0=0;function O0(a,e){const t=a.split(`
`),n=[],r=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let l=r;l<o;l++){const c=l+1;n.push(`${c===e?">":" "} ${c}: ${t[l]}`)}return n.join(`
`)}function N0(a){const e=Xr.getPrimaries(Xr.workingColorSpace),t=Xr.getPrimaries(a);let n;switch(e===t?n="":e===he&&t===G?n="LinearDisplayP3ToLinearSRGB":e===G&&t===he&&(n="LinearSRGBToLinearDisplayP3"),a){case Y:case F:return[n,"LinearTransferOETF"];case H:case R:return[n,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",a),[n,"LinearTransferOETF"]}}function _p(a,e,t){const n=a.getShaderParameter(e,a.COMPILE_STATUS),r=a.getShaderInfoLog(e).trim();if(n&&r==="")return"";const o=/ERROR: 0:(\d+)/.exec(r);if(o){const l=parseInt(o[1]);return t.toUpperCase()+`

`+r+`

`+O0(a.getShaderSource(e),l)}else return r}function U0(a,e){const t=N0(e);return`vec4 ${a}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function F0(a,e){let t;switch(e){case ai:t="Linear";break;case Tr:t="Reinhard";break;case qr:t="OptimizedCineon";break;case Si:t="ACESFilmic";break;case Ei:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+a+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function z0(a){return[a.extensionDerivatives||a.envMapCubeUVHeight||a.bumpMap||a.normalMapTangentSpace||a.clearcoatNormalMap||a.flatShading||a.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(a.extensionFragDepth||a.logarithmicDepthBuffer)&&a.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",a.extensionDrawBuffers&&a.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(a.extensionShaderTextureLOD||a.envMap||a.transmission)&&a.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Cf).join(`
`)}function B0(a){const e=[];for(const t in a){const n=a[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function k0(a,e){const t={},n=a.getProgramParameter(e,a.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const o=a.getActiveAttrib(e,r),l=o.name;let c=1;o.type===a.FLOAT_MAT2&&(c=2),o.type===a.FLOAT_MAT3&&(c=3),o.type===a.FLOAT_MAT4&&(c=4),t[l]={type:o.type,location:a.getAttribLocation(e,l),locationSize:c}}return t}function Cf(a){return a!==""}function xp(a,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return a.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Sp(a,e){return a.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const H0=/^[ \t]*#include +<([\w\d./]+)>/gm;function fh(a){return a.replace(H0,V0)}const G0=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function V0(a,e){let t=Ki[e];if(t===void 0){const n=G0.get(e);if(n!==void 0)t=Ki[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return fh(t)}const W0=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Mp(a){return a.replace(W0,j0)}function j0(a,e,t,n){let r="";for(let o=parseInt(e);o<parseInt(t);o++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function bp(a){let e="precision "+a.precision+` float;
precision `+a.precision+" int;";return a.precision==="highp"?e+=`
#define HIGH_PRECISION`:a.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:a.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function X0(a){let e="SHADOWMAP_TYPE_BASIC";return a.shadowMapType===ve?e="SHADOWMAP_TYPE_PCF":a.shadowMapType===ze?e="SHADOWMAP_TYPE_PCF_SOFT":a.shadowMapType===Wt&&(e="SHADOWMAP_TYPE_VSM"),e}function Z0(a){let e="ENVMAP_TYPE_CUBE";if(a.envMap)switch(a.envMapMode){case ii:case ui:e="ENVMAP_TYPE_CUBE";break;case Xi:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Y0(a){let e="ENVMAP_MODE_REFLECTION";if(a.envMap)switch(a.envMapMode){case ui:e="ENVMAP_MODE_REFRACTION";break}return e}function K0(a){let e="ENVMAP_BLENDING_NONE";if(a.envMap)switch(a.combine){case Bn:e="ENVMAP_BLENDING_MULTIPLY";break;case sn:e="ENVMAP_BLENDING_MIX";break;case Tn:e="ENVMAP_BLENDING_ADD";break}return e}function q0(a){const e=a.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function J0(a,e,t,n){const r=a.getContext(),o=t.defines;let l=t.vertexShader,c=t.fragmentShader;const f=X0(t),h=Z0(t),g=Y0(t),_=K0(t),x=q0(t),S=t.isWebGL2?"":z0(t),E=B0(o),I=r.createProgram();let T,b,B=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(T=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,E].filter(Cf).join(`
`),T.length>0&&(T+=`
`),b=[S,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,E].filter(Cf).join(`
`),b.length>0&&(b+=`
`)):(T=[bp(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,E,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+g:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Cf).join(`
`),b=[S,bp(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,E,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.envMap?"#define "+g:"",t.envMap?"#define "+_:"",x?"#define CUBEUV_TEXEL_WIDTH "+x.texelWidth:"",x?"#define CUBEUV_TEXEL_HEIGHT "+x.texelHeight:"",x?"#define CUBEUV_MAX_MIP "+x.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==_r?"#define TONE_MAPPING":"",t.toneMapping!==_r?Ki.tonemapping_pars_fragment:"",t.toneMapping!==_r?F0("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Ki.colorspace_pars_fragment,U0("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Cf).join(`
`)),l=fh(l),l=xp(l,t),l=Sp(l,t),c=fh(c),c=xp(c,t),c=Sp(c,t),l=Mp(l),c=Mp(c),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(B=`#version 300 es
`,T=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+T,b=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===Jo?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Jo?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+b);const D=B+T+l,W=B+b+c,ne=yp(r,r.VERTEX_SHADER,D),ae=yp(r,r.FRAGMENT_SHADER,W);r.attachShader(I,ne),r.attachShader(I,ae),t.index0AttributeName!==void 0?r.bindAttribLocation(I,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(I,0,"position"),r.linkProgram(I);function ue(rt){if(a.debug.checkShaderErrors){const Qt=r.getProgramInfoLog(I).trim(),_n=r.getShaderInfoLog(ne).trim(),Ie=r.getShaderInfoLog(ae).trim();let Mt=!0,qt=!0;if(r.getProgramParameter(I,r.LINK_STATUS)===!1)if(Mt=!1,typeof a.debug.onShaderError=="function")a.debug.onShaderError(r,I,ne,ae);else{const Xt=_p(r,ne,"vertex"),Vn=_p(r,ae,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(I,r.VALIDATE_STATUS)+`

Program Info Log: `+Qt+`
`+Xt+`
`+Vn)}else Qt!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Qt):(_n===""||Ie==="")&&(qt=!1);qt&&(rt.diagnostics={runnable:Mt,programLog:Qt,vertexShader:{log:_n,prefix:T},fragmentShader:{log:Ie,prefix:b}})}r.deleteShader(ne),r.deleteShader(ae),Te=new od(r,I),j=k0(r,I)}let Te;this.getUniforms=function(){return Te===void 0&&ue(this),Te};let j;this.getAttributes=function(){return j===void 0&&ue(this),j};let ie=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return ie===!1&&(ie=r.getProgramParameter(I,L0)),ie},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(I),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=D0++,this.cacheKey=e,this.usedTimes=1,this.program=I,this.vertexShader=ne,this.fragmentShader=ae,this}let $0=0;class Q0{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),o=this._getShaderStage(n),l=this._getShaderCacheForMaterial(e);return l.has(r)===!1&&(l.add(r),r.usedTimes++),l.has(o)===!1&&(l.add(o),o.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new ev(e),t.set(e,n)),n}}class ev{constructor(e){this.id=$0++,this.code=e,this.usedTimes=0}}function tv(a,e,t,n,r,o,l){const c=new Wl,f=new Q0,h=[],g=r.isWebGL2,_=r.logarithmicDepthBuffer,x=r.vertexTextures;let S=r.precision;const E={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function I(j){return j===0?"uv":`uv${j}`}function T(j,ie,rt,Qt,_n){const Ie=Qt.fog,Mt=_n.geometry,qt=j.isMeshStandardMaterial?Qt.environment:null,Xt=(j.isMeshStandardMaterial?t:e).get(j.envMap||qt),Vn=Xt&&Xt.mapping===Xi?Xt.image.height:null,cn=E[j.type];j.precision!==null&&(S=r.getMaxPrecision(j.precision),S!==j.precision&&console.warn("THREE.WebGLProgram.getParameters:",j.precision,"not supported, using",S,"instead."));const bn=Mt.morphAttributes.position||Mt.morphAttributes.normal||Mt.morphAttributes.color,Be=bn!==void 0?bn.length:0;let Gt=0;Mt.morphAttributes.position!==void 0&&(Gt=1),Mt.morphAttributes.normal!==void 0&&(Gt=2),Mt.morphAttributes.color!==void 0&&(Gt=3);let Sr,Rr,Fr,di;if(cn){const oa=$l[cn];Sr=oa.vertexShader,Rr=oa.fragmentShader}else Sr=j.vertexShader,Rr=j.fragmentShader,f.update(j),Fr=f.getVertexShaderID(j),di=f.getFragmentShaderID(j);const Ri=a.getRenderTarget(),hi=_n.isInstancedMesh===!0,Vi=!!j.map,Os=!!j.matcap,pi=!!Xt,Me=!!j.aoMap,ar=!!j.lightMap,Yt=!!j.bumpMap,Fn=!!j.normalMap,mn=!!j.displacementMap,ri=!!j.emissiveMap,Er=!!j.metalnessMap,kr=!!j.roughnessMap,Fi=j.anisotropy>0,gs=j.clearcoat>0,Zo=j.iridescence>0,fe=j.sheen>0,K=j.transmission>0,lt=Fi&&!!j.anisotropyMap,Hn=gs&&!!j.clearcoatMap,Cn=gs&&!!j.clearcoatNormalMap,Wn=gs&&!!j.clearcoatRoughnessMap,Zr=Zo&&!!j.iridescenceMap,Jn=Zo&&!!j.iridescenceThicknessMap,br=fe&&!!j.sheenColorMap,Pi=fe&&!!j.sheenRoughnessMap,zs=!!j.specularMap,jn=!!j.specularColorMap,Js=!!j.specularIntensityMap,Wi=K&&!!j.transmissionMap,Ii=K&&!!j.thicknessMap,fi=!!j.gradientMap,Or=!!j.alphaMap,Es=j.alphaTest>0,Le=!!j.alphaHash,wr=!!j.extensions,qn=!!Mt.attributes.uv1,Vt=!!Mt.attributes.uv2,er=!!Mt.attributes.uv3;let mi=_r;return j.toneMapped&&(Ri===null||Ri.isXRRenderTarget===!0)&&(mi=a.toneMapping),{isWebGL2:g,shaderID:cn,shaderType:j.type,shaderName:j.name,vertexShader:Sr,fragmentShader:Rr,defines:j.defines,customVertexShaderID:Fr,customFragmentShaderID:di,isRawShaderMaterial:j.isRawShaderMaterial===!0,glslVersion:j.glslVersion,precision:S,instancing:hi,instancingColor:hi&&_n.instanceColor!==null,supportsVertexTextures:x,outputColorSpace:Ri===null?a.outputColorSpace:Ri.isXRRenderTarget===!0?Ri.texture.colorSpace:Y,map:Vi,matcap:Os,envMap:pi,envMapMode:pi&&Xt.mapping,envMapCubeUVHeight:Vn,aoMap:Me,lightMap:ar,bumpMap:Yt,normalMap:Fn,displacementMap:x&&mn,emissiveMap:ri,normalMapObjectSpace:Fn&&j.normalMapType===C,normalMapTangentSpace:Fn&&j.normalMapType===v,metalnessMap:Er,roughnessMap:kr,anisotropy:Fi,anisotropyMap:lt,clearcoat:gs,clearcoatMap:Hn,clearcoatNormalMap:Cn,clearcoatRoughnessMap:Wn,iridescence:Zo,iridescenceMap:Zr,iridescenceThicknessMap:Jn,sheen:fe,sheenColorMap:br,sheenRoughnessMap:Pi,specularMap:zs,specularColorMap:jn,specularIntensityMap:Js,transmission:K,transmissionMap:Wi,thicknessMap:Ii,gradientMap:fi,opaque:j.transparent===!1&&j.blending===tn,alphaMap:Or,alphaTest:Es,alphaHash:Le,combine:j.combine,mapUv:Vi&&I(j.map.channel),aoMapUv:Me&&I(j.aoMap.channel),lightMapUv:ar&&I(j.lightMap.channel),bumpMapUv:Yt&&I(j.bumpMap.channel),normalMapUv:Fn&&I(j.normalMap.channel),displacementMapUv:mn&&I(j.displacementMap.channel),emissiveMapUv:ri&&I(j.emissiveMap.channel),metalnessMapUv:Er&&I(j.metalnessMap.channel),roughnessMapUv:kr&&I(j.roughnessMap.channel),anisotropyMapUv:lt&&I(j.anisotropyMap.channel),clearcoatMapUv:Hn&&I(j.clearcoatMap.channel),clearcoatNormalMapUv:Cn&&I(j.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Wn&&I(j.clearcoatRoughnessMap.channel),iridescenceMapUv:Zr&&I(j.iridescenceMap.channel),iridescenceThicknessMapUv:Jn&&I(j.iridescenceThicknessMap.channel),sheenColorMapUv:br&&I(j.sheenColorMap.channel),sheenRoughnessMapUv:Pi&&I(j.sheenRoughnessMap.channel),specularMapUv:zs&&I(j.specularMap.channel),specularColorMapUv:jn&&I(j.specularColorMap.channel),specularIntensityMapUv:Js&&I(j.specularIntensityMap.channel),transmissionMapUv:Wi&&I(j.transmissionMap.channel),thicknessMapUv:Ii&&I(j.thicknessMap.channel),alphaMapUv:Or&&I(j.alphaMap.channel),vertexTangents:!!Mt.attributes.tangent&&(Fn||Fi),vertexColors:j.vertexColors,vertexAlphas:j.vertexColors===!0&&!!Mt.attributes.color&&Mt.attributes.color.itemSize===4,vertexUv1s:qn,vertexUv2s:Vt,vertexUv3s:er,pointsUvs:_n.isPoints===!0&&!!Mt.attributes.uv&&(Vi||Or),fog:!!Ie,useFog:j.fog===!0,fogExp2:Ie&&Ie.isFogExp2,flatShading:j.flatShading===!0,sizeAttenuation:j.sizeAttenuation===!0,logarithmicDepthBuffer:_,skinning:_n.isSkinnedMesh===!0,morphTargets:Mt.morphAttributes.position!==void 0,morphNormals:Mt.morphAttributes.normal!==void 0,morphColors:Mt.morphAttributes.color!==void 0,morphTargetsCount:Be,morphTextureStride:Gt,numDirLights:ie.directional.length,numPointLights:ie.point.length,numSpotLights:ie.spot.length,numSpotLightMaps:ie.spotLightMap.length,numRectAreaLights:ie.rectArea.length,numHemiLights:ie.hemi.length,numDirLightShadows:ie.directionalShadowMap.length,numPointLightShadows:ie.pointShadowMap.length,numSpotLightShadows:ie.spotShadowMap.length,numSpotLightShadowsWithMaps:ie.numSpotLightShadowsWithMaps,numLightProbes:ie.numLightProbes,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:j.dithering,shadowMapEnabled:a.shadowMap.enabled&&rt.length>0,shadowMapType:a.shadowMap.type,toneMapping:mi,useLegacyLights:a._useLegacyLights,decodeVideoTexture:Vi&&j.map.isVideoTexture===!0&&Xr.getTransfer(j.map.colorSpace)===L,premultipliedAlpha:j.premultipliedAlpha,doubleSided:j.side===it,flipSided:j.side===ut,useDepthPacking:j.depthPacking>=0,depthPacking:j.depthPacking||0,index0AttributeName:j.index0AttributeName,extensionDerivatives:wr&&j.extensions.derivatives===!0,extensionFragDepth:wr&&j.extensions.fragDepth===!0,extensionDrawBuffers:wr&&j.extensions.drawBuffers===!0,extensionShaderTextureLOD:wr&&j.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:g||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:g||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:g||n.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:j.customProgramCacheKey()}}function b(j){const ie=[];if(j.shaderID?ie.push(j.shaderID):(ie.push(j.customVertexShaderID),ie.push(j.customFragmentShaderID)),j.defines!==void 0)for(const rt in j.defines)ie.push(rt),ie.push(j.defines[rt]);return j.isRawShaderMaterial===!1&&(B(ie,j),D(ie,j),ie.push(a.outputColorSpace)),ie.push(j.customProgramCacheKey),ie.join()}function B(j,ie){j.push(ie.precision),j.push(ie.outputColorSpace),j.push(ie.envMapMode),j.push(ie.envMapCubeUVHeight),j.push(ie.mapUv),j.push(ie.alphaMapUv),j.push(ie.lightMapUv),j.push(ie.aoMapUv),j.push(ie.bumpMapUv),j.push(ie.normalMapUv),j.push(ie.displacementMapUv),j.push(ie.emissiveMapUv),j.push(ie.metalnessMapUv),j.push(ie.roughnessMapUv),j.push(ie.anisotropyMapUv),j.push(ie.clearcoatMapUv),j.push(ie.clearcoatNormalMapUv),j.push(ie.clearcoatRoughnessMapUv),j.push(ie.iridescenceMapUv),j.push(ie.iridescenceThicknessMapUv),j.push(ie.sheenColorMapUv),j.push(ie.sheenRoughnessMapUv),j.push(ie.specularMapUv),j.push(ie.specularColorMapUv),j.push(ie.specularIntensityMapUv),j.push(ie.transmissionMapUv),j.push(ie.thicknessMapUv),j.push(ie.combine),j.push(ie.fogExp2),j.push(ie.sizeAttenuation),j.push(ie.morphTargetsCount),j.push(ie.morphAttributeCount),j.push(ie.numDirLights),j.push(ie.numPointLights),j.push(ie.numSpotLights),j.push(ie.numSpotLightMaps),j.push(ie.numHemiLights),j.push(ie.numRectAreaLights),j.push(ie.numDirLightShadows),j.push(ie.numPointLightShadows),j.push(ie.numSpotLightShadows),j.push(ie.numSpotLightShadowsWithMaps),j.push(ie.numLightProbes),j.push(ie.shadowMapType),j.push(ie.toneMapping),j.push(ie.numClippingPlanes),j.push(ie.numClipIntersection),j.push(ie.depthPacking)}function D(j,ie){c.disableAll(),ie.isWebGL2&&c.enable(0),ie.supportsVertexTextures&&c.enable(1),ie.instancing&&c.enable(2),ie.instancingColor&&c.enable(3),ie.matcap&&c.enable(4),ie.envMap&&c.enable(5),ie.normalMapObjectSpace&&c.enable(6),ie.normalMapTangentSpace&&c.enable(7),ie.clearcoat&&c.enable(8),ie.iridescence&&c.enable(9),ie.alphaTest&&c.enable(10),ie.vertexColors&&c.enable(11),ie.vertexAlphas&&c.enable(12),ie.vertexUv1s&&c.enable(13),ie.vertexUv2s&&c.enable(14),ie.vertexUv3s&&c.enable(15),ie.vertexTangents&&c.enable(16),ie.anisotropy&&c.enable(17),ie.alphaHash&&c.enable(18),j.push(c.mask),c.disableAll(),ie.fog&&c.enable(0),ie.useFog&&c.enable(1),ie.flatShading&&c.enable(2),ie.logarithmicDepthBuffer&&c.enable(3),ie.skinning&&c.enable(4),ie.morphTargets&&c.enable(5),ie.morphNormals&&c.enable(6),ie.morphColors&&c.enable(7),ie.premultipliedAlpha&&c.enable(8),ie.shadowMapEnabled&&c.enable(9),ie.useLegacyLights&&c.enable(10),ie.doubleSided&&c.enable(11),ie.flipSided&&c.enable(12),ie.useDepthPacking&&c.enable(13),ie.dithering&&c.enable(14),ie.transmission&&c.enable(15),ie.sheen&&c.enable(16),ie.opaque&&c.enable(17),ie.pointsUvs&&c.enable(18),ie.decodeVideoTexture&&c.enable(19),j.push(c.mask)}function W(j){const ie=E[j.type];let rt;if(ie){const Qt=$l[ie];rt=Zc.clone(Qt.uniforms)}else rt=j.uniforms;return rt}function ne(j,ie){let rt;for(let Qt=0,_n=h.length;Qt<_n;Qt++){const Ie=h[Qt];if(Ie.cacheKey===ie){rt=Ie,++rt.usedTimes;break}}return rt===void 0&&(rt=new J0(a,ie,j,o),h.push(rt)),rt}function ae(j){if(--j.usedTimes===0){const ie=h.indexOf(j);h[ie]=h[h.length-1],h.pop(),j.destroy()}}function ue(j){f.remove(j)}function Te(){f.dispose()}return{getParameters:T,getProgramCacheKey:b,getUniforms:W,acquireProgram:ne,releaseProgram:ae,releaseShaderCache:ue,programs:h,dispose:Te}}function nv(){let a=new WeakMap;function e(o){let l=a.get(o);return l===void 0&&(l={},a.set(o,l)),l}function t(o){a.delete(o)}function n(o,l,c){a.get(o)[l]=c}function r(){a=new WeakMap}return{get:e,remove:t,update:n,dispose:r}}function rv(a,e){return a.groupOrder!==e.groupOrder?a.groupOrder-e.groupOrder:a.renderOrder!==e.renderOrder?a.renderOrder-e.renderOrder:a.material.id!==e.material.id?a.material.id-e.material.id:a.z!==e.z?a.z-e.z:a.id-e.id}function wp(a,e){return a.groupOrder!==e.groupOrder?a.groupOrder-e.groupOrder:a.renderOrder!==e.renderOrder?a.renderOrder-e.renderOrder:a.z!==e.z?e.z-a.z:a.id-e.id}function Ep(){const a=[];let e=0;const t=[],n=[],r=[];function o(){e=0,t.length=0,n.length=0,r.length=0}function l(_,x,S,E,I,T){let b=a[e];return b===void 0?(b={id:_.id,object:_,geometry:x,material:S,groupOrder:E,renderOrder:_.renderOrder,z:I,group:T},a[e]=b):(b.id=_.id,b.object=_,b.geometry=x,b.material=S,b.groupOrder=E,b.renderOrder=_.renderOrder,b.z=I,b.group=T),e++,b}function c(_,x,S,E,I,T){const b=l(_,x,S,E,I,T);S.transmission>0?n.push(b):S.transparent===!0?r.push(b):t.push(b)}function f(_,x,S,E,I,T){const b=l(_,x,S,E,I,T);S.transmission>0?n.unshift(b):S.transparent===!0?r.unshift(b):t.unshift(b)}function h(_,x){t.length>1&&t.sort(_||rv),n.length>1&&n.sort(x||wp),r.length>1&&r.sort(x||wp)}function g(){for(let _=e,x=a.length;_<x;_++){const S=a[_];if(S.id===null)break;S.id=null,S.object=null,S.geometry=null,S.material=null,S.group=null}}return{opaque:t,transmissive:n,transparent:r,init:o,push:c,unshift:f,finish:g,sort:h}}function iv(){let a=new WeakMap;function e(n,r){const o=a.get(n);let l;return o===void 0?(l=new Ep,a.set(n,[l])):r>=o.length?(l=new Ep,o.push(l)):l=o[r],l}function t(){a=new WeakMap}return{get:e,dispose:t}}function sv(){const a={};return{get:function(e){if(a[e.id]!==void 0)return a[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new $,color:new Qn};break;case"SpotLight":t={position:new $,direction:new $,color:new Qn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new $,color:new Qn,distance:0,decay:0};break;case"HemisphereLight":t={direction:new $,skyColor:new Qn,groundColor:new Qn};break;case"RectAreaLight":t={color:new Qn,position:new $,halfWidth:new $,halfHeight:new $};break}return a[e.id]=t,t}}}function ov(){const a={};return{get:function(e){if(a[e.id]!==void 0)return a[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Et};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Et};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Et,shadowCameraNear:1,shadowCameraFar:1e3};break}return a[e.id]=t,t}}}let av=0;function lv(a,e){return(e.castShadow?2:0)-(a.castShadow?2:0)+(e.map?1:0)-(a.map?1:0)}function cv(a,e){const t=new sv,n=ov(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let g=0;g<9;g++)r.probe.push(new $);const o=new $,l=new _i,c=new _i;function f(g,_){let x=0,S=0,E=0;for(let Qt=0;Qt<9;Qt++)r.probe[Qt].set(0,0,0);let I=0,T=0,b=0,B=0,D=0,W=0,ne=0,ae=0,ue=0,Te=0,j=0;g.sort(lv);const ie=_===!0?Math.PI:1;for(let Qt=0,_n=g.length;Qt<_n;Qt++){const Ie=g[Qt],Mt=Ie.color,qt=Ie.intensity,Xt=Ie.distance,Vn=Ie.shadow&&Ie.shadow.map?Ie.shadow.map.texture:null;if(Ie.isAmbientLight)x+=Mt.r*qt*ie,S+=Mt.g*qt*ie,E+=Mt.b*qt*ie;else if(Ie.isLightProbe){for(let cn=0;cn<9;cn++)r.probe[cn].addScaledVector(Ie.sh.coefficients[cn],qt);j++}else if(Ie.isDirectionalLight){const cn=t.get(Ie);if(cn.color.copy(Ie.color).multiplyScalar(Ie.intensity*ie),Ie.castShadow){const bn=Ie.shadow,Be=n.get(Ie);Be.shadowBias=bn.bias,Be.shadowNormalBias=bn.normalBias,Be.shadowRadius=bn.radius,Be.shadowMapSize=bn.mapSize,r.directionalShadow[I]=Be,r.directionalShadowMap[I]=Vn,r.directionalShadowMatrix[I]=Ie.shadow.matrix,W++}r.directional[I]=cn,I++}else if(Ie.isSpotLight){const cn=t.get(Ie);cn.position.setFromMatrixPosition(Ie.matrixWorld),cn.color.copy(Mt).multiplyScalar(qt*ie),cn.distance=Xt,cn.coneCos=Math.cos(Ie.angle),cn.penumbraCos=Math.cos(Ie.angle*(1-Ie.penumbra)),cn.decay=Ie.decay,r.spot[b]=cn;const bn=Ie.shadow;if(Ie.map&&(r.spotLightMap[ue]=Ie.map,ue++,bn.updateMatrices(Ie),Ie.castShadow&&Te++),r.spotLightMatrix[b]=bn.matrix,Ie.castShadow){const Be=n.get(Ie);Be.shadowBias=bn.bias,Be.shadowNormalBias=bn.normalBias,Be.shadowRadius=bn.radius,Be.shadowMapSize=bn.mapSize,r.spotShadow[b]=Be,r.spotShadowMap[b]=Vn,ae++}b++}else if(Ie.isRectAreaLight){const cn=t.get(Ie);cn.color.copy(Mt).multiplyScalar(qt),cn.halfWidth.set(Ie.width*.5,0,0),cn.halfHeight.set(0,Ie.height*.5,0),r.rectArea[B]=cn,B++}else if(Ie.isPointLight){const cn=t.get(Ie);if(cn.color.copy(Ie.color).multiplyScalar(Ie.intensity*ie),cn.distance=Ie.distance,cn.decay=Ie.decay,Ie.castShadow){const bn=Ie.shadow,Be=n.get(Ie);Be.shadowBias=bn.bias,Be.shadowNormalBias=bn.normalBias,Be.shadowRadius=bn.radius,Be.shadowMapSize=bn.mapSize,Be.shadowCameraNear=bn.camera.near,Be.shadowCameraFar=bn.camera.far,r.pointShadow[T]=Be,r.pointShadowMap[T]=Vn,r.pointShadowMatrix[T]=Ie.shadow.matrix,ne++}r.point[T]=cn,T++}else if(Ie.isHemisphereLight){const cn=t.get(Ie);cn.skyColor.copy(Ie.color).multiplyScalar(qt*ie),cn.groundColor.copy(Ie.groundColor).multiplyScalar(qt*ie),r.hemi[D]=cn,D++}}B>0&&(e.isWebGL2||a.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=or.LTC_FLOAT_1,r.rectAreaLTC2=or.LTC_FLOAT_2):a.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=or.LTC_HALF_1,r.rectAreaLTC2=or.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=x,r.ambient[1]=S,r.ambient[2]=E;const rt=r.hash;(rt.directionalLength!==I||rt.pointLength!==T||rt.spotLength!==b||rt.rectAreaLength!==B||rt.hemiLength!==D||rt.numDirectionalShadows!==W||rt.numPointShadows!==ne||rt.numSpotShadows!==ae||rt.numSpotMaps!==ue||rt.numLightProbes!==j)&&(r.directional.length=I,r.spot.length=b,r.rectArea.length=B,r.point.length=T,r.hemi.length=D,r.directionalShadow.length=W,r.directionalShadowMap.length=W,r.pointShadow.length=ne,r.pointShadowMap.length=ne,r.spotShadow.length=ae,r.spotShadowMap.length=ae,r.directionalShadowMatrix.length=W,r.pointShadowMatrix.length=ne,r.spotLightMatrix.length=ae+ue-Te,r.spotLightMap.length=ue,r.numSpotLightShadowsWithMaps=Te,r.numLightProbes=j,rt.directionalLength=I,rt.pointLength=T,rt.spotLength=b,rt.rectAreaLength=B,rt.hemiLength=D,rt.numDirectionalShadows=W,rt.numPointShadows=ne,rt.numSpotShadows=ae,rt.numSpotMaps=ue,rt.numLightProbes=j,r.version=av++)}function h(g,_){let x=0,S=0,E=0,I=0,T=0;const b=_.matrixWorldInverse;for(let B=0,D=g.length;B<D;B++){const W=g[B];if(W.isDirectionalLight){const ne=r.directional[x];ne.direction.setFromMatrixPosition(W.matrixWorld),o.setFromMatrixPosition(W.target.matrixWorld),ne.direction.sub(o),ne.direction.transformDirection(b),x++}else if(W.isSpotLight){const ne=r.spot[E];ne.position.setFromMatrixPosition(W.matrixWorld),ne.position.applyMatrix4(b),ne.direction.setFromMatrixPosition(W.matrixWorld),o.setFromMatrixPosition(W.target.matrixWorld),ne.direction.sub(o),ne.direction.transformDirection(b),E++}else if(W.isRectAreaLight){const ne=r.rectArea[I];ne.position.setFromMatrixPosition(W.matrixWorld),ne.position.applyMatrix4(b),c.identity(),l.copy(W.matrixWorld),l.premultiply(b),c.extractRotation(l),ne.halfWidth.set(W.width*.5,0,0),ne.halfHeight.set(0,W.height*.5,0),ne.halfWidth.applyMatrix4(c),ne.halfHeight.applyMatrix4(c),I++}else if(W.isPointLight){const ne=r.point[S];ne.position.setFromMatrixPosition(W.matrixWorld),ne.position.applyMatrix4(b),S++}else if(W.isHemisphereLight){const ne=r.hemi[T];ne.direction.setFromMatrixPosition(W.matrixWorld),ne.direction.transformDirection(b),T++}}}return{setup:f,setupView:h,state:r}}function Tp(a,e){const t=new cv(a,e),n=[],r=[];function o(){n.length=0,r.length=0}function l(_){n.push(_)}function c(_){r.push(_)}function f(_){t.setup(n,_)}function h(_){t.setupView(n,_)}return{init:o,state:{lightsArray:n,shadowsArray:r,lights:t},setupLights:f,setupLightsView:h,pushLight:l,pushShadow:c}}function uv(a,e){let t=new WeakMap;function n(o,l=0){const c=t.get(o);let f;return c===void 0?(f=new Tp(a,e),t.set(o,[f])):l>=c.length?(f=new Tp(a,e),c.push(f)):f=c[l],f}function r(){t=new WeakMap}return{get:n,dispose:r}}class dh extends Oo{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=O,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class hh extends Oo{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const fv=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,dv=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function hv(a,e,t){let n=new Ya;const r=new Et,o=new Et,l=new Dt,c=new dh({depthPacking:m}),f=new hh,h={},g=t.maxTextureSize,_={[Ae]:ut,[ut]:Ae,[it]:it},x=new Za({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Et},radius:{value:4}},vertexShader:fv,fragmentShader:dv}),S=x.clone();S.defines.HORIZONTAL_PASS=1;const E=new wi;E.setAttribute("position",new hs(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const I=new es(E,x),T=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ve;let b=this.type;this.render=function(ne,ae,ue){if(T.enabled===!1||T.autoUpdate===!1&&T.needsUpdate===!1||ne.length===0)return;const Te=a.getRenderTarget(),j=a.getActiveCubeFace(),ie=a.getActiveMipmapLevel(),rt=a.state;rt.setBlending(Rn),rt.buffers.color.setClear(1,1,1,1),rt.buffers.depth.setTest(!0),rt.setScissorTest(!1);const Qt=b!==Wt&&this.type===Wt,_n=b===Wt&&this.type!==Wt;for(let Ie=0,Mt=ne.length;Ie<Mt;Ie++){const qt=ne[Ie],Xt=qt.shadow;if(Xt===void 0){console.warn("THREE.WebGLShadowMap:",qt,"has no shadow.");continue}if(Xt.autoUpdate===!1&&Xt.needsUpdate===!1)continue;r.copy(Xt.mapSize);const Vn=Xt.getFrameExtents();if(r.multiply(Vn),o.copy(Xt.mapSize),(r.x>g||r.y>g)&&(r.x>g&&(o.x=Math.floor(g/Vn.x),r.x=o.x*Vn.x,Xt.mapSize.x=o.x),r.y>g&&(o.y=Math.floor(g/Vn.y),r.y=o.y*Vn.y,Xt.mapSize.y=o.y)),Xt.map===null||Qt===!0||_n===!0){const bn=this.type!==Wt?{minFilter:Q,magFilter:Q}:{};Xt.map!==null&&Xt.map.dispose(),Xt.map=new Sn(r.x,r.y,bn),Xt.map.texture.name=qt.name+".shadowMap",Xt.camera.updateProjectionMatrix()}a.setRenderTarget(Xt.map),a.clear();const cn=Xt.getViewportCount();for(let bn=0;bn<cn;bn++){const Be=Xt.getViewport(bn);l.set(o.x*Be.x,o.y*Be.y,o.x*Be.z,o.y*Be.w),rt.viewport(l),Xt.updateMatrices(qt,bn),n=Xt.getFrustum(),W(ae,ue,Xt.camera,qt,this.type)}Xt.isPointLightShadow!==!0&&this.type===Wt&&B(Xt,ue),Xt.needsUpdate=!1}b=this.type,T.needsUpdate=!1,a.setRenderTarget(Te,j,ie)};function B(ne,ae){const ue=e.update(I);x.defines.VSM_SAMPLES!==ne.blurSamples&&(x.defines.VSM_SAMPLES=ne.blurSamples,S.defines.VSM_SAMPLES=ne.blurSamples,x.needsUpdate=!0,S.needsUpdate=!0),ne.mapPass===null&&(ne.mapPass=new Sn(r.x,r.y)),x.uniforms.shadow_pass.value=ne.map.texture,x.uniforms.resolution.value=ne.mapSize,x.uniforms.radius.value=ne.radius,a.setRenderTarget(ne.mapPass),a.clear(),a.renderBufferDirect(ae,null,ue,x,I,null),S.uniforms.shadow_pass.value=ne.mapPass.texture,S.uniforms.resolution.value=ne.mapSize,S.uniforms.radius.value=ne.radius,a.setRenderTarget(ne.map),a.clear(),a.renderBufferDirect(ae,null,ue,S,I,null)}function D(ne,ae,ue,Te){let j=null;const ie=ue.isPointLight===!0?ne.customDistanceMaterial:ne.customDepthMaterial;if(ie!==void 0)j=ie;else if(j=ue.isPointLight===!0?f:c,a.localClippingEnabled&&ae.clipShadows===!0&&Array.isArray(ae.clippingPlanes)&&ae.clippingPlanes.length!==0||ae.displacementMap&&ae.displacementScale!==0||ae.alphaMap&&ae.alphaTest>0||ae.map&&ae.alphaTest>0){const rt=j.uuid,Qt=ae.uuid;let _n=h[rt];_n===void 0&&(_n={},h[rt]=_n);let Ie=_n[Qt];Ie===void 0&&(Ie=j.clone(),_n[Qt]=Ie),j=Ie}if(j.visible=ae.visible,j.wireframe=ae.wireframe,Te===Wt?j.side=ae.shadowSide!==null?ae.shadowSide:ae.side:j.side=ae.shadowSide!==null?ae.shadowSide:_[ae.side],j.alphaMap=ae.alphaMap,j.alphaTest=ae.alphaTest,j.map=ae.map,j.clipShadows=ae.clipShadows,j.clippingPlanes=ae.clippingPlanes,j.clipIntersection=ae.clipIntersection,j.displacementMap=ae.displacementMap,j.displacementScale=ae.displacementScale,j.displacementBias=ae.displacementBias,j.wireframeLinewidth=ae.wireframeLinewidth,j.linewidth=ae.linewidth,ue.isPointLight===!0&&j.isMeshDistanceMaterial===!0){const rt=a.properties.get(j);rt.light=ue}return j}function W(ne,ae,ue,Te,j){if(ne.visible===!1)return;if(ne.layers.test(ae.layers)&&(ne.isMesh||ne.isLine||ne.isPoints)&&(ne.castShadow||ne.receiveShadow&&j===Wt)&&(!ne.frustumCulled||n.intersectsObject(ne))){ne.modelViewMatrix.multiplyMatrices(ue.matrixWorldInverse,ne.matrixWorld);const Qt=e.update(ne),_n=ne.material;if(Array.isArray(_n)){const Ie=Qt.groups;for(let Mt=0,qt=Ie.length;Mt<qt;Mt++){const Xt=Ie[Mt],Vn=_n[Xt.materialIndex];if(Vn&&Vn.visible){const cn=D(ne,Vn,Te,j);a.renderBufferDirect(ue,null,Qt,cn,ne,Xt)}}}else if(_n.visible){const Ie=D(ne,_n,Te,j);a.renderBufferDirect(ue,null,Qt,Ie,ne,null)}}const rt=ne.children;for(let Qt=0,_n=rt.length;Qt<_n;Qt++)W(rt[Qt],ae,ue,Te,j)}}function pv(a,e,t){const n=t.isWebGL2;function r(){let Le=!1;const wr=new Dt;let qn=null;const Vt=new Dt(0,0,0,0);return{setMask:function(er){qn!==er&&!Le&&(a.colorMask(er,er,er,er),qn=er)},setLocked:function(er){Le=er},setClear:function(er,mi,Bs,oa,Gl){Gl===!0&&(er*=oa,mi*=oa,Bs*=oa),wr.set(er,mi,Bs,oa),Vt.equals(wr)===!1&&(a.clearColor(er,mi,Bs,oa),Vt.copy(wr))},reset:function(){Le=!1,qn=null,Vt.set(-1,0,0,0)}}}function o(){let Le=!1,wr=null,qn=null,Vt=null;return{setTest:function(er){er?Vi(a.DEPTH_TEST):Os(a.DEPTH_TEST)},setMask:function(er){wr!==er&&!Le&&(a.depthMask(er),wr=er)},setFunc:function(er){if(qn!==er){switch(er){case Nn:a.depthFunc(a.NEVER);break;case ur:a.depthFunc(a.ALWAYS);break;case rr:a.depthFunc(a.LESS);break;case yr:a.depthFunc(a.LEQUAL);break;case zr:a.depthFunc(a.EQUAL);break;case Ur:a.depthFunc(a.GEQUAL);break;case Lr:a.depthFunc(a.GREATER);break;case Yr:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}qn=er}},setLocked:function(er){Le=er},setClear:function(er){Vt!==er&&(a.clearDepth(er),Vt=er)},reset:function(){Le=!1,wr=null,qn=null,Vt=null}}}function l(){let Le=!1,wr=null,qn=null,Vt=null,er=null,mi=null,Bs=null,oa=null,Gl=null;return{setTest:function(lo){Le||(lo?Vi(a.STENCIL_TEST):Os(a.STENCIL_TEST))},setMask:function(lo){wr!==lo&&!Le&&(a.stencilMask(lo),wr=lo)},setFunc:function(lo,al,yc){(qn!==lo||Vt!==al||er!==yc)&&(a.stencilFunc(lo,al,yc),qn=lo,Vt=al,er=yc)},setOp:function(lo,al,yc){(mi!==lo||Bs!==al||oa!==yc)&&(a.stencilOp(lo,al,yc),mi=lo,Bs=al,oa=yc)},setLocked:function(lo){Le=lo},setClear:function(lo){Gl!==lo&&(a.clearStencil(lo),Gl=lo)},reset:function(){Le=!1,wr=null,qn=null,Vt=null,er=null,mi=null,Bs=null,oa=null,Gl=null}}}const c=new r,f=new o,h=new l,g=new WeakMap,_=new WeakMap;let x={},S={},E=new WeakMap,I=[],T=null,b=!1,B=null,D=null,W=null,ne=null,ae=null,ue=null,Te=null,j=new Qn(0,0,0),ie=0,rt=!1,Qt=null,_n=null,Ie=null,Mt=null,qt=null;const Xt=a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Vn=!1,cn=0;const bn=a.getParameter(a.VERSION);bn.indexOf("WebGL")!==-1?(cn=parseFloat(/^WebGL (\d)/.exec(bn)[1]),Vn=cn>=1):bn.indexOf("OpenGL ES")!==-1&&(cn=parseFloat(/^OpenGL ES (\d)/.exec(bn)[1]),Vn=cn>=2);let Be=null,Gt={};const Sr=a.getParameter(a.SCISSOR_BOX),Rr=a.getParameter(a.VIEWPORT),Fr=new Dt().fromArray(Sr),di=new Dt().fromArray(Rr);function Ri(Le,wr,qn,Vt){const er=new Uint8Array(4),mi=a.createTexture();a.bindTexture(Le,mi),a.texParameteri(Le,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(Le,a.TEXTURE_MAG_FILTER,a.NEAREST);for(let Bs=0;Bs<qn;Bs++)n&&(Le===a.TEXTURE_3D||Le===a.TEXTURE_2D_ARRAY)?a.texImage3D(wr,0,a.RGBA,1,1,Vt,0,a.RGBA,a.UNSIGNED_BYTE,er):a.texImage2D(wr+Bs,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,er);return mi}const hi={};hi[a.TEXTURE_2D]=Ri(a.TEXTURE_2D,a.TEXTURE_2D,1),hi[a.TEXTURE_CUBE_MAP]=Ri(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6),n&&(hi[a.TEXTURE_2D_ARRAY]=Ri(a.TEXTURE_2D_ARRAY,a.TEXTURE_2D_ARRAY,1,1),hi[a.TEXTURE_3D]=Ri(a.TEXTURE_3D,a.TEXTURE_3D,1,1)),c.setClear(0,0,0,1),f.setClear(1),h.setClear(0),Vi(a.DEPTH_TEST),f.setFunc(yr),Er(!1),kr(Ut),Vi(a.CULL_FACE),mn(Rn);function Vi(Le){x[Le]!==!0&&(a.enable(Le),x[Le]=!0)}function Os(Le){x[Le]!==!1&&(a.disable(Le),x[Le]=!1)}function pi(Le,wr){return S[Le]!==wr?(a.bindFramebuffer(Le,wr),S[Le]=wr,n&&(Le===a.DRAW_FRAMEBUFFER&&(S[a.FRAMEBUFFER]=wr),Le===a.FRAMEBUFFER&&(S[a.DRAW_FRAMEBUFFER]=wr)),!0):!1}function Me(Le,wr){let qn=I,Vt=!1;if(Le)if(qn=E.get(wr),qn===void 0&&(qn=[],E.set(wr,qn)),Le.isWebGLMultipleRenderTargets){const er=Le.texture;if(qn.length!==er.length||qn[0]!==a.COLOR_ATTACHMENT0){for(let mi=0,Bs=er.length;mi<Bs;mi++)qn[mi]=a.COLOR_ATTACHMENT0+mi;qn.length=er.length,Vt=!0}}else qn[0]!==a.COLOR_ATTACHMENT0&&(qn[0]=a.COLOR_ATTACHMENT0,Vt=!0);else qn[0]!==a.BACK&&(qn[0]=a.BACK,Vt=!0);Vt&&(t.isWebGL2?a.drawBuffers(qn):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(qn))}function ar(Le){return T!==Le?(a.useProgram(Le),T=Le,!0):!1}const Yt={[zn]:a.FUNC_ADD,[Zn]:a.FUNC_SUBTRACT,[Yn]:a.FUNC_REVERSE_SUBTRACT};if(n)Yt[vn]=a.MIN,Yt[pn]=a.MAX;else{const Le=e.get("EXT_blend_minmax");Le!==null&&(Yt[vn]=Le.MIN_EXT,Yt[pn]=Le.MAX_EXT)}const Fn={[dt]:a.ZERO,[hr]:a.ONE,[gr]:a.SRC_COLOR,[Kt]:a.SRC_ALPHA,[Ve]:a.SRC_ALPHA_SATURATE,[we]:a.DST_COLOR,[Qe]:a.DST_ALPHA,[ke]:a.ONE_MINUS_SRC_COLOR,[Lt]:a.ONE_MINUS_SRC_ALPHA,[Pe]:a.ONE_MINUS_DST_COLOR,[Se]:a.ONE_MINUS_DST_ALPHA,[Ne]:a.CONSTANT_COLOR,[Oe]:a.ONE_MINUS_CONSTANT_COLOR,[wt]:a.CONSTANT_ALPHA,[ct]:a.ONE_MINUS_CONSTANT_ALPHA};function mn(Le,wr,qn,Vt,er,mi,Bs,oa,Gl,lo){if(Le===Rn){b===!0&&(Os(a.BLEND),b=!1);return}if(b===!1&&(Vi(a.BLEND),b=!0),Le!==tr){if(Le!==B||lo!==rt){if((D!==zn||ae!==zn)&&(a.blendEquation(a.FUNC_ADD),D=zn,ae=zn),lo)switch(Le){case tn:a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);break;case ee:a.blendFunc(a.ONE,a.ONE);break;case Ir:a.blendFuncSeparate(a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ZERO,a.ONE);break;case dr:a.blendFuncSeparate(a.ZERO,a.SRC_COLOR,a.ZERO,a.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Le);break}else switch(Le){case tn:a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);break;case ee:a.blendFunc(a.SRC_ALPHA,a.ONE);break;case Ir:a.blendFuncSeparate(a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ZERO,a.ONE);break;case dr:a.blendFunc(a.ZERO,a.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Le);break}W=null,ne=null,ue=null,Te=null,j.set(0,0,0),ie=0,B=Le,rt=lo}return}er=er||wr,mi=mi||qn,Bs=Bs||Vt,(wr!==D||er!==ae)&&(a.blendEquationSeparate(Yt[wr],Yt[er]),D=wr,ae=er),(qn!==W||Vt!==ne||mi!==ue||Bs!==Te)&&(a.blendFuncSeparate(Fn[qn],Fn[Vt],Fn[mi],Fn[Bs]),W=qn,ne=Vt,ue=mi,Te=Bs),(oa.equals(j)===!1||Gl!==ie)&&(a.blendColor(oa.r,oa.g,oa.b,Gl),j.copy(oa),ie=Gl),B=Le,rt=!1}function ri(Le,wr){Le.side===it?Os(a.CULL_FACE):Vi(a.CULL_FACE);let qn=Le.side===ut;wr&&(qn=!qn),Er(qn),Le.blending===tn&&Le.transparent===!1?mn(Rn):mn(Le.blending,Le.blendEquation,Le.blendSrc,Le.blendDst,Le.blendEquationAlpha,Le.blendSrcAlpha,Le.blendDstAlpha,Le.blendColor,Le.blendAlpha,Le.premultipliedAlpha),f.setFunc(Le.depthFunc),f.setTest(Le.depthTest),f.setMask(Le.depthWrite),c.setMask(Le.colorWrite);const Vt=Le.stencilWrite;h.setTest(Vt),Vt&&(h.setMask(Le.stencilWriteMask),h.setFunc(Le.stencilFunc,Le.stencilRef,Le.stencilFuncMask),h.setOp(Le.stencilFail,Le.stencilZFail,Le.stencilZPass)),gs(Le.polygonOffset,Le.polygonOffsetFactor,Le.polygonOffsetUnits),Le.alphaToCoverage===!0?Vi(a.SAMPLE_ALPHA_TO_COVERAGE):Os(a.SAMPLE_ALPHA_TO_COVERAGE)}function Er(Le){Qt!==Le&&(Le?a.frontFace(a.CW):a.frontFace(a.CCW),Qt=Le)}function kr(Le){Le!==Ue?(Vi(a.CULL_FACE),Le!==_n&&(Le===Ut?a.cullFace(a.BACK):Le===fn?a.cullFace(a.FRONT):a.cullFace(a.FRONT_AND_BACK))):Os(a.CULL_FACE),_n=Le}function Fi(Le){Le!==Ie&&(Vn&&a.lineWidth(Le),Ie=Le)}function gs(Le,wr,qn){Le?(Vi(a.POLYGON_OFFSET_FILL),(Mt!==wr||qt!==qn)&&(a.polygonOffset(wr,qn),Mt=wr,qt=qn)):Os(a.POLYGON_OFFSET_FILL)}function Zo(Le){Le?Vi(a.SCISSOR_TEST):Os(a.SCISSOR_TEST)}function fe(Le){Le===void 0&&(Le=a.TEXTURE0+Xt-1),Be!==Le&&(a.activeTexture(Le),Be=Le)}function K(Le,wr,qn){qn===void 0&&(Be===null?qn=a.TEXTURE0+Xt-1:qn=Be);let Vt=Gt[qn];Vt===void 0&&(Vt={type:void 0,texture:void 0},Gt[qn]=Vt),(Vt.type!==Le||Vt.texture!==wr)&&(Be!==qn&&(a.activeTexture(qn),Be=qn),a.bindTexture(Le,wr||hi[Le]),Vt.type=Le,Vt.texture=wr)}function lt(){const Le=Gt[Be];Le!==void 0&&Le.type!==void 0&&(a.bindTexture(Le.type,null),Le.type=void 0,Le.texture=void 0)}function Hn(){try{a.compressedTexImage2D.apply(a,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function Cn(){try{a.compressedTexImage3D.apply(a,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function Wn(){try{a.texSubImage2D.apply(a,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function Zr(){try{a.texSubImage3D.apply(a,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function Jn(){try{a.compressedTexSubImage2D.apply(a,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function br(){try{a.compressedTexSubImage3D.apply(a,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function Pi(){try{a.texStorage2D.apply(a,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function zs(){try{a.texStorage3D.apply(a,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function jn(){try{a.texImage2D.apply(a,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function Js(){try{a.texImage3D.apply(a,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function Wi(Le){Fr.equals(Le)===!1&&(a.scissor(Le.x,Le.y,Le.z,Le.w),Fr.copy(Le))}function Ii(Le){di.equals(Le)===!1&&(a.viewport(Le.x,Le.y,Le.z,Le.w),di.copy(Le))}function fi(Le,wr){let qn=_.get(wr);qn===void 0&&(qn=new WeakMap,_.set(wr,qn));let Vt=qn.get(Le);Vt===void 0&&(Vt=a.getUniformBlockIndex(wr,Le.name),qn.set(Le,Vt))}function Or(Le,wr){const Vt=_.get(wr).get(Le);g.get(wr)!==Vt&&(a.uniformBlockBinding(wr,Vt,Le.__bindingPointIndex),g.set(wr,Vt))}function Es(){a.disable(a.BLEND),a.disable(a.CULL_FACE),a.disable(a.DEPTH_TEST),a.disable(a.POLYGON_OFFSET_FILL),a.disable(a.SCISSOR_TEST),a.disable(a.STENCIL_TEST),a.disable(a.SAMPLE_ALPHA_TO_COVERAGE),a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ONE,a.ZERO),a.blendFuncSeparate(a.ONE,a.ZERO,a.ONE,a.ZERO),a.blendColor(0,0,0,0),a.colorMask(!0,!0,!0,!0),a.clearColor(0,0,0,0),a.depthMask(!0),a.depthFunc(a.LESS),a.clearDepth(1),a.stencilMask(4294967295),a.stencilFunc(a.ALWAYS,0,4294967295),a.stencilOp(a.KEEP,a.KEEP,a.KEEP),a.clearStencil(0),a.cullFace(a.BACK),a.frontFace(a.CCW),a.polygonOffset(0,0),a.activeTexture(a.TEXTURE0),a.bindFramebuffer(a.FRAMEBUFFER,null),n===!0&&(a.bindFramebuffer(a.DRAW_FRAMEBUFFER,null),a.bindFramebuffer(a.READ_FRAMEBUFFER,null)),a.useProgram(null),a.lineWidth(1),a.scissor(0,0,a.canvas.width,a.canvas.height),a.viewport(0,0,a.canvas.width,a.canvas.height),x={},Be=null,Gt={},S={},E=new WeakMap,I=[],T=null,b=!1,B=null,D=null,W=null,ne=null,ae=null,ue=null,Te=null,j=new Qn(0,0,0),ie=0,rt=!1,Qt=null,_n=null,Ie=null,Mt=null,qt=null,Fr.set(0,0,a.canvas.width,a.canvas.height),di.set(0,0,a.canvas.width,a.canvas.height),c.reset(),f.reset(),h.reset()}return{buffers:{color:c,depth:f,stencil:h},enable:Vi,disable:Os,bindFramebuffer:pi,drawBuffers:Me,useProgram:ar,setBlending:mn,setMaterial:ri,setFlipSided:Er,setCullFace:kr,setLineWidth:Fi,setPolygonOffset:gs,setScissorTest:Zo,activeTexture:fe,bindTexture:K,unbindTexture:lt,compressedTexImage2D:Hn,compressedTexImage3D:Cn,texImage2D:jn,texImage3D:Js,updateUBOMapping:fi,uniformBlockBinding:Or,texStorage2D:Pi,texStorage3D:zs,texSubImage2D:Wn,texSubImage3D:Zr,compressedTexSubImage2D:Jn,compressedTexSubImage3D:br,scissor:Wi,viewport:Ii,reset:Es}}function mv(a,e,t,n,r,o,l){const c=r.isWebGL2,f=r.maxTextures,h=r.maxCubemapSize,g=r.maxTextureSize,_=r.maxSamples,x=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,S=typeof navigator=="undefined"?!1:/OculusBrowser/g.test(navigator.userAgent),E=new WeakMap;let I;const T=new WeakMap;let b=!1;try{b=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(fe){}function B(fe,K){return b?new OffscreenCanvas(fe,K):Io("canvas")}function D(fe,K,lt,Hn){let Cn=1;if((fe.width>Hn||fe.height>Hn)&&(Cn=Hn/Math.max(fe.width,fe.height)),Cn<1||K===!0)if(typeof HTMLImageElement!="undefined"&&fe instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&fe instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&fe instanceof ImageBitmap){const Wn=K?fo:Math.floor,Zr=Wn(Cn*fe.width),Jn=Wn(Cn*fe.height);I===void 0&&(I=B(Zr,Jn));const br=lt?B(Zr,Jn):I;return br.width=Zr,br.height=Jn,br.getContext("2d").drawImage(fe,0,0,Zr,Jn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+fe.width+"x"+fe.height+") to ("+Zr+"x"+Jn+")."),br}else return"data"in fe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+fe.width+"x"+fe.height+")."),fe;return fe}function W(fe){return ca(fe.width)&&ca(fe.height)}function ne(fe){return c?!1:fe.wrapS!==Ln||fe.wrapT!==Ln||fe.minFilter!==Q&&fe.minFilter!==Ht}function ae(fe,K){return fe.generateMipmaps&&K&&fe.minFilter!==Q&&fe.minFilter!==Ht}function ue(fe){a.generateMipmap(fe)}function Te(fe,K,lt,Hn,Cn=!1){if(c===!1)return K;if(fe!==null){if(a[fe]!==void 0)return a[fe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+fe+"'")}let Wn=K;if(K===a.RED&&(lt===a.FLOAT&&(Wn=a.R32F),lt===a.HALF_FLOAT&&(Wn=a.R16F),lt===a.UNSIGNED_BYTE&&(Wn=a.R8)),K===a.RED_INTEGER&&(lt===a.UNSIGNED_BYTE&&(Wn=a.R8UI),lt===a.UNSIGNED_SHORT&&(Wn=a.R16UI),lt===a.UNSIGNED_INT&&(Wn=a.R32UI),lt===a.BYTE&&(Wn=a.R8I),lt===a.SHORT&&(Wn=a.R16I),lt===a.INT&&(Wn=a.R32I)),K===a.RG&&(lt===a.FLOAT&&(Wn=a.RG32F),lt===a.HALF_FLOAT&&(Wn=a.RG16F),lt===a.UNSIGNED_BYTE&&(Wn=a.RG8)),K===a.RGBA){const Zr=Cn?w:Xr.getTransfer(Hn);lt===a.FLOAT&&(Wn=a.RGBA32F),lt===a.HALF_FLOAT&&(Wn=a.RGBA16F),lt===a.UNSIGNED_BYTE&&(Wn=Zr===L?a.SRGB8_ALPHA8:a.RGBA8),lt===a.UNSIGNED_SHORT_4_4_4_4&&(Wn=a.RGBA4),lt===a.UNSIGNED_SHORT_5_5_5_1&&(Wn=a.RGB5_A1)}return(Wn===a.R16F||Wn===a.R32F||Wn===a.RG16F||Wn===a.RG32F||Wn===a.RGBA16F||Wn===a.RGBA32F)&&e.get("EXT_color_buffer_float"),Wn}function j(fe,K,lt){return ae(fe,lt)===!0||fe.isFramebufferTexture&&fe.minFilter!==Q&&fe.minFilter!==Ht?Math.log2(Math.max(K.width,K.height))+1:fe.mipmaps!==void 0&&fe.mipmaps.length>0?fe.mipmaps.length:fe.isCompressedTexture&&Array.isArray(fe.image)?K.mipmaps.length:1}function ie(fe){return fe===Q||fe===ye||fe===ge?a.NEAREST:a.LINEAR}function rt(fe){const K=fe.target;K.removeEventListener("dispose",rt),_n(K),K.isVideoTexture&&E.delete(K)}function Qt(fe){const K=fe.target;K.removeEventListener("dispose",Qt),Mt(K)}function _n(fe){const K=n.get(fe);if(K.__webglInit===void 0)return;const lt=fe.source,Hn=T.get(lt);if(Hn){const Cn=Hn[K.__cacheKey];Cn.usedTimes--,Cn.usedTimes===0&&Ie(fe),Object.keys(Hn).length===0&&T.delete(lt)}n.remove(fe)}function Ie(fe){const K=n.get(fe);a.deleteTexture(K.__webglTexture);const lt=fe.source,Hn=T.get(lt);delete Hn[K.__cacheKey],l.memory.textures--}function Mt(fe){const K=fe.texture,lt=n.get(fe),Hn=n.get(K);if(Hn.__webglTexture!==void 0&&(a.deleteTexture(Hn.__webglTexture),l.memory.textures--),fe.depthTexture&&fe.depthTexture.dispose(),fe.isWebGLCubeRenderTarget)for(let Cn=0;Cn<6;Cn++){if(Array.isArray(lt.__webglFramebuffer[Cn]))for(let Wn=0;Wn<lt.__webglFramebuffer[Cn].length;Wn++)a.deleteFramebuffer(lt.__webglFramebuffer[Cn][Wn]);else a.deleteFramebuffer(lt.__webglFramebuffer[Cn]);lt.__webglDepthbuffer&&a.deleteRenderbuffer(lt.__webglDepthbuffer[Cn])}else{if(Array.isArray(lt.__webglFramebuffer))for(let Cn=0;Cn<lt.__webglFramebuffer.length;Cn++)a.deleteFramebuffer(lt.__webglFramebuffer[Cn]);else a.deleteFramebuffer(lt.__webglFramebuffer);if(lt.__webglDepthbuffer&&a.deleteRenderbuffer(lt.__webglDepthbuffer),lt.__webglMultisampledFramebuffer&&a.deleteFramebuffer(lt.__webglMultisampledFramebuffer),lt.__webglColorRenderbuffer)for(let Cn=0;Cn<lt.__webglColorRenderbuffer.length;Cn++)lt.__webglColorRenderbuffer[Cn]&&a.deleteRenderbuffer(lt.__webglColorRenderbuffer[Cn]);lt.__webglDepthRenderbuffer&&a.deleteRenderbuffer(lt.__webglDepthRenderbuffer)}if(fe.isWebGLMultipleRenderTargets)for(let Cn=0,Wn=K.length;Cn<Wn;Cn++){const Zr=n.get(K[Cn]);Zr.__webglTexture&&(a.deleteTexture(Zr.__webglTexture),l.memory.textures--),n.remove(K[Cn])}n.remove(K),n.remove(fe)}let qt=0;function Xt(){qt=0}function Vn(){const fe=qt;return fe>=f&&console.warn("THREE.WebGLTextures: Trying to use "+fe+" texture units while this GPU supports only "+f),qt+=1,fe}function cn(fe){const K=[];return K.push(fe.wrapS),K.push(fe.wrapT),K.push(fe.wrapR||0),K.push(fe.magFilter),K.push(fe.minFilter),K.push(fe.anisotropy),K.push(fe.internalFormat),K.push(fe.format),K.push(fe.type),K.push(fe.generateMipmaps),K.push(fe.premultiplyAlpha),K.push(fe.flipY),K.push(fe.unpackAlignment),K.push(fe.colorSpace),K.join()}function bn(fe,K){const lt=n.get(fe);if(fe.isVideoTexture&&gs(fe),fe.isRenderTargetTexture===!1&&fe.version>0&&lt.__version!==fe.version){const Hn=fe.image;if(Hn===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Hn.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Vi(lt,fe,K);return}}t.bindTexture(a.TEXTURE_2D,lt.__webglTexture,a.TEXTURE0+K)}function Be(fe,K){const lt=n.get(fe);if(fe.version>0&&lt.__version!==fe.version){Vi(lt,fe,K);return}t.bindTexture(a.TEXTURE_2D_ARRAY,lt.__webglTexture,a.TEXTURE0+K)}function Gt(fe,K){const lt=n.get(fe);if(fe.version>0&&lt.__version!==fe.version){Vi(lt,fe,K);return}t.bindTexture(a.TEXTURE_3D,lt.__webglTexture,a.TEXTURE0+K)}function Sr(fe,K){const lt=n.get(fe);if(fe.version>0&&lt.__version!==fe.version){Os(lt,fe,K);return}t.bindTexture(a.TEXTURE_CUBE_MAP,lt.__webglTexture,a.TEXTURE0+K)}const Rr={[Wr]:a.REPEAT,[Ln]:a.CLAMP_TO_EDGE,[Ts]:a.MIRRORED_REPEAT},Fr={[Q]:a.NEAREST,[ye]:a.NEAREST_MIPMAP_NEAREST,[ge]:a.NEAREST_MIPMAP_LINEAR,[Ht]:a.LINEAR,[Jt]:a.LINEAR_MIPMAP_NEAREST,[ht]:a.LINEAR_MIPMAP_LINEAR},di={[Nr]:a.NEVER,[cs]:a.ALWAYS,[Jr]:a.LESS,[yi]:a.LEQUAL,[ci]:a.EQUAL,[Mi]:a.GEQUAL,[Di]:a.GREATER,[Kr]:a.NOTEQUAL};function Ri(fe,K,lt){if(lt?(a.texParameteri(fe,a.TEXTURE_WRAP_S,Rr[K.wrapS]),a.texParameteri(fe,a.TEXTURE_WRAP_T,Rr[K.wrapT]),(fe===a.TEXTURE_3D||fe===a.TEXTURE_2D_ARRAY)&&a.texParameteri(fe,a.TEXTURE_WRAP_R,Rr[K.wrapR]),a.texParameteri(fe,a.TEXTURE_MAG_FILTER,Fr[K.magFilter]),a.texParameteri(fe,a.TEXTURE_MIN_FILTER,Fr[K.minFilter])):(a.texParameteri(fe,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(fe,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),(fe===a.TEXTURE_3D||fe===a.TEXTURE_2D_ARRAY)&&a.texParameteri(fe,a.TEXTURE_WRAP_R,a.CLAMP_TO_EDGE),(K.wrapS!==Ln||K.wrapT!==Ln)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),a.texParameteri(fe,a.TEXTURE_MAG_FILTER,ie(K.magFilter)),a.texParameteri(fe,a.TEXTURE_MIN_FILTER,ie(K.minFilter)),K.minFilter!==Q&&K.minFilter!==Ht&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),K.compareFunction&&(a.texParameteri(fe,a.TEXTURE_COMPARE_MODE,a.COMPARE_REF_TO_TEXTURE),a.texParameteri(fe,a.TEXTURE_COMPARE_FUNC,di[K.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Hn=e.get("EXT_texture_filter_anisotropic");if(K.magFilter===Q||K.minFilter!==ge&&K.minFilter!==ht||K.type===ti&&e.has("OES_texture_float_linear")===!1||c===!1&&K.type===xe&&e.has("OES_texture_half_float_linear")===!1)return;(K.anisotropy>1||n.get(K).__currentAnisotropy)&&(a.texParameterf(fe,Hn.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(K.anisotropy,r.getMaxAnisotropy())),n.get(K).__currentAnisotropy=K.anisotropy)}}function hi(fe,K){let lt=!1;fe.__webglInit===void 0&&(fe.__webglInit=!0,K.addEventListener("dispose",rt));const Hn=K.source;let Cn=T.get(Hn);Cn===void 0&&(Cn={},T.set(Hn,Cn));const Wn=cn(K);if(Wn!==fe.__cacheKey){Cn[Wn]===void 0&&(Cn[Wn]={texture:a.createTexture(),usedTimes:0},l.memory.textures++,lt=!0),Cn[Wn].usedTimes++;const Zr=Cn[fe.__cacheKey];Zr!==void 0&&(Cn[fe.__cacheKey].usedTimes--,Zr.usedTimes===0&&Ie(K)),fe.__cacheKey=Wn,fe.__webglTexture=Cn[Wn].texture}return lt}function Vi(fe,K,lt){let Hn=a.TEXTURE_2D;(K.isDataArrayTexture||K.isCompressedArrayTexture)&&(Hn=a.TEXTURE_2D_ARRAY),K.isData3DTexture&&(Hn=a.TEXTURE_3D);const Cn=hi(fe,K),Wn=K.source;t.bindTexture(Hn,fe.__webglTexture,a.TEXTURE0+lt);const Zr=n.get(Wn);if(Wn.version!==Zr.__version||Cn===!0){t.activeTexture(a.TEXTURE0+lt);const Jn=Xr.getPrimaries(Xr.workingColorSpace),br=K.colorSpace===N?null:Xr.getPrimaries(K.colorSpace),Pi=K.colorSpace===N||Jn===br?a.NONE:a.BROWSER_DEFAULT_WEBGL;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,K.flipY),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,K.premultiplyAlpha),a.pixelStorei(a.UNPACK_ALIGNMENT,K.unpackAlignment),a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,Pi);const zs=ne(K)&&W(K.image)===!1;let jn=D(K.image,zs,!1,g);jn=Zo(K,jn);const Js=W(jn)||c,Wi=o.convert(K.format,K.colorSpace);let Ii=o.convert(K.type),fi=Te(K.internalFormat,Wi,Ii,K.colorSpace,K.isVideoTexture);Ri(Hn,K,Js);let Or;const Es=K.mipmaps,Le=c&&K.isVideoTexture!==!0,wr=Zr.__version===void 0||Cn===!0,qn=j(K,jn,Js);if(K.isDepthTexture)fi=a.DEPTH_COMPONENT,c?K.type===ti?fi=a.DEPTH_COMPONENT32F:K.type===Mr?fi=a.DEPTH_COMPONENT24:K.type===vr?fi=a.DEPTH24_STENCIL8:fi=a.DEPTH_COMPONENT16:K.type===ti&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),K.format===js&&fi===a.DEPTH_COMPONENT&&K.type!==On&&K.type!==Mr&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),K.type=Mr,Ii=o.convert(K.type)),K.format===os&&fi===a.DEPTH_COMPONENT&&(fi=a.DEPTH_STENCIL,K.type!==vr&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),K.type=vr,Ii=o.convert(K.type))),wr&&(Le?t.texStorage2D(a.TEXTURE_2D,1,fi,jn.width,jn.height):t.texImage2D(a.TEXTURE_2D,0,fi,jn.width,jn.height,0,Wi,Ii,null));else if(K.isDataTexture)if(Es.length>0&&Js){Le&&wr&&t.texStorage2D(a.TEXTURE_2D,qn,fi,Es[0].width,Es[0].height);for(let Vt=0,er=Es.length;Vt<er;Vt++)Or=Es[Vt],Le?t.texSubImage2D(a.TEXTURE_2D,Vt,0,0,Or.width,Or.height,Wi,Ii,Or.data):t.texImage2D(a.TEXTURE_2D,Vt,fi,Or.width,Or.height,0,Wi,Ii,Or.data);K.generateMipmaps=!1}else Le?(wr&&t.texStorage2D(a.TEXTURE_2D,qn,fi,jn.width,jn.height),t.texSubImage2D(a.TEXTURE_2D,0,0,0,jn.width,jn.height,Wi,Ii,jn.data)):t.texImage2D(a.TEXTURE_2D,0,fi,jn.width,jn.height,0,Wi,Ii,jn.data);else if(K.isCompressedTexture)if(K.isCompressedArrayTexture){Le&&wr&&t.texStorage3D(a.TEXTURE_2D_ARRAY,qn,fi,Es[0].width,Es[0].height,jn.depth);for(let Vt=0,er=Es.length;Vt<er;Vt++)Or=Es[Vt],K.format!==Zi?Wi!==null?Le?t.compressedTexSubImage3D(a.TEXTURE_2D_ARRAY,Vt,0,0,0,Or.width,Or.height,jn.depth,Wi,Or.data,0,0):t.compressedTexImage3D(a.TEXTURE_2D_ARRAY,Vt,fi,Or.width,Or.height,jn.depth,0,Or.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Le?t.texSubImage3D(a.TEXTURE_2D_ARRAY,Vt,0,0,0,Or.width,Or.height,jn.depth,Wi,Ii,Or.data):t.texImage3D(a.TEXTURE_2D_ARRAY,Vt,fi,Or.width,Or.height,jn.depth,0,Wi,Ii,Or.data)}else{Le&&wr&&t.texStorage2D(a.TEXTURE_2D,qn,fi,Es[0].width,Es[0].height);for(let Vt=0,er=Es.length;Vt<er;Vt++)Or=Es[Vt],K.format!==Zi?Wi!==null?Le?t.compressedTexSubImage2D(a.TEXTURE_2D,Vt,0,0,Or.width,Or.height,Wi,Or.data):t.compressedTexImage2D(a.TEXTURE_2D,Vt,fi,Or.width,Or.height,0,Or.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Le?t.texSubImage2D(a.TEXTURE_2D,Vt,0,0,Or.width,Or.height,Wi,Ii,Or.data):t.texImage2D(a.TEXTURE_2D,Vt,fi,Or.width,Or.height,0,Wi,Ii,Or.data)}else if(K.isDataArrayTexture)Le?(wr&&t.texStorage3D(a.TEXTURE_2D_ARRAY,qn,fi,jn.width,jn.height,jn.depth),t.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,0,jn.width,jn.height,jn.depth,Wi,Ii,jn.data)):t.texImage3D(a.TEXTURE_2D_ARRAY,0,fi,jn.width,jn.height,jn.depth,0,Wi,Ii,jn.data);else if(K.isData3DTexture)Le?(wr&&t.texStorage3D(a.TEXTURE_3D,qn,fi,jn.width,jn.height,jn.depth),t.texSubImage3D(a.TEXTURE_3D,0,0,0,0,jn.width,jn.height,jn.depth,Wi,Ii,jn.data)):t.texImage3D(a.TEXTURE_3D,0,fi,jn.width,jn.height,jn.depth,0,Wi,Ii,jn.data);else if(K.isFramebufferTexture){if(wr)if(Le)t.texStorage2D(a.TEXTURE_2D,qn,fi,jn.width,jn.height);else{let Vt=jn.width,er=jn.height;for(let mi=0;mi<qn;mi++)t.texImage2D(a.TEXTURE_2D,mi,fi,Vt,er,0,Wi,Ii,null),Vt>>=1,er>>=1}}else if(Es.length>0&&Js){Le&&wr&&t.texStorage2D(a.TEXTURE_2D,qn,fi,Es[0].width,Es[0].height);for(let Vt=0,er=Es.length;Vt<er;Vt++)Or=Es[Vt],Le?t.texSubImage2D(a.TEXTURE_2D,Vt,0,0,Wi,Ii,Or):t.texImage2D(a.TEXTURE_2D,Vt,fi,Wi,Ii,Or);K.generateMipmaps=!1}else Le?(wr&&t.texStorage2D(a.TEXTURE_2D,qn,fi,jn.width,jn.height),t.texSubImage2D(a.TEXTURE_2D,0,0,0,Wi,Ii,jn)):t.texImage2D(a.TEXTURE_2D,0,fi,Wi,Ii,jn);ae(K,Js)&&ue(Hn),Zr.__version=Wn.version,K.onUpdate&&K.onUpdate(K)}fe.__version=K.version}function Os(fe,K,lt){if(K.image.length!==6)return;const Hn=hi(fe,K),Cn=K.source;t.bindTexture(a.TEXTURE_CUBE_MAP,fe.__webglTexture,a.TEXTURE0+lt);const Wn=n.get(Cn);if(Cn.version!==Wn.__version||Hn===!0){t.activeTexture(a.TEXTURE0+lt);const Zr=Xr.getPrimaries(Xr.workingColorSpace),Jn=K.colorSpace===N?null:Xr.getPrimaries(K.colorSpace),br=K.colorSpace===N||Zr===Jn?a.NONE:a.BROWSER_DEFAULT_WEBGL;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,K.flipY),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,K.premultiplyAlpha),a.pixelStorei(a.UNPACK_ALIGNMENT,K.unpackAlignment),a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,br);const Pi=K.isCompressedTexture||K.image[0].isCompressedTexture,zs=K.image[0]&&K.image[0].isDataTexture,jn=[];for(let Vt=0;Vt<6;Vt++)!Pi&&!zs?jn[Vt]=D(K.image[Vt],!1,!0,h):jn[Vt]=zs?K.image[Vt].image:K.image[Vt],jn[Vt]=Zo(K,jn[Vt]);const Js=jn[0],Wi=W(Js)||c,Ii=o.convert(K.format,K.colorSpace),fi=o.convert(K.type),Or=Te(K.internalFormat,Ii,fi,K.colorSpace),Es=c&&K.isVideoTexture!==!0,Le=Wn.__version===void 0||Hn===!0;let wr=j(K,Js,Wi);Ri(a.TEXTURE_CUBE_MAP,K,Wi);let qn;if(Pi){Es&&Le&&t.texStorage2D(a.TEXTURE_CUBE_MAP,wr,Or,Js.width,Js.height);for(let Vt=0;Vt<6;Vt++){qn=jn[Vt].mipmaps;for(let er=0;er<qn.length;er++){const mi=qn[er];K.format!==Zi?Ii!==null?Es?t.compressedTexSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,er,0,0,mi.width,mi.height,Ii,mi.data):t.compressedTexImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,er,Or,mi.width,mi.height,0,mi.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Es?t.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,er,0,0,mi.width,mi.height,Ii,fi,mi.data):t.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,er,Or,mi.width,mi.height,0,Ii,fi,mi.data)}}}else{qn=K.mipmaps,Es&&Le&&(qn.length>0&&wr++,t.texStorage2D(a.TEXTURE_CUBE_MAP,wr,Or,jn[0].width,jn[0].height));for(let Vt=0;Vt<6;Vt++)if(zs){Es?t.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,0,0,0,jn[Vt].width,jn[Vt].height,Ii,fi,jn[Vt].data):t.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,0,Or,jn[Vt].width,jn[Vt].height,0,Ii,fi,jn[Vt].data);for(let er=0;er<qn.length;er++){const Bs=qn[er].image[Vt].image;Es?t.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,er+1,0,0,Bs.width,Bs.height,Ii,fi,Bs.data):t.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,er+1,Or,Bs.width,Bs.height,0,Ii,fi,Bs.data)}}else{Es?t.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,0,0,0,Ii,fi,jn[Vt]):t.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,0,Or,Ii,fi,jn[Vt]);for(let er=0;er<qn.length;er++){const mi=qn[er];Es?t.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,er+1,0,0,Ii,fi,mi.image[Vt]):t.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,er+1,Or,Ii,fi,mi.image[Vt])}}}ae(K,Wi)&&ue(a.TEXTURE_CUBE_MAP),Wn.__version=Cn.version,K.onUpdate&&K.onUpdate(K)}fe.__version=K.version}function pi(fe,K,lt,Hn,Cn,Wn){const Zr=o.convert(lt.format,lt.colorSpace),Jn=o.convert(lt.type),br=Te(lt.internalFormat,Zr,Jn,lt.colorSpace);if(!n.get(K).__hasExternalTextures){const zs=Math.max(1,K.width>>Wn),jn=Math.max(1,K.height>>Wn);Cn===a.TEXTURE_3D||Cn===a.TEXTURE_2D_ARRAY?t.texImage3D(Cn,Wn,br,zs,jn,K.depth,0,Zr,Jn,null):t.texImage2D(Cn,Wn,br,zs,jn,0,Zr,Jn,null)}t.bindFramebuffer(a.FRAMEBUFFER,fe),Fi(K)?x.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,Hn,Cn,n.get(lt).__webglTexture,0,kr(K)):(Cn===a.TEXTURE_2D||Cn>=a.TEXTURE_CUBE_MAP_POSITIVE_X&&Cn<=a.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&a.framebufferTexture2D(a.FRAMEBUFFER,Hn,Cn,n.get(lt).__webglTexture,Wn),t.bindFramebuffer(a.FRAMEBUFFER,null)}function Me(fe,K,lt){if(a.bindRenderbuffer(a.RENDERBUFFER,fe),K.depthBuffer&&!K.stencilBuffer){let Hn=c===!0?a.DEPTH_COMPONENT24:a.DEPTH_COMPONENT16;if(lt||Fi(K)){const Cn=K.depthTexture;Cn&&Cn.isDepthTexture&&(Cn.type===ti?Hn=a.DEPTH_COMPONENT32F:Cn.type===Mr&&(Hn=a.DEPTH_COMPONENT24));const Wn=kr(K);Fi(K)?x.renderbufferStorageMultisampleEXT(a.RENDERBUFFER,Wn,Hn,K.width,K.height):a.renderbufferStorageMultisample(a.RENDERBUFFER,Wn,Hn,K.width,K.height)}else a.renderbufferStorage(a.RENDERBUFFER,Hn,K.width,K.height);a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,fe)}else if(K.depthBuffer&&K.stencilBuffer){const Hn=kr(K);lt&&Fi(K)===!1?a.renderbufferStorageMultisample(a.RENDERBUFFER,Hn,a.DEPTH24_STENCIL8,K.width,K.height):Fi(K)?x.renderbufferStorageMultisampleEXT(a.RENDERBUFFER,Hn,a.DEPTH24_STENCIL8,K.width,K.height):a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,K.width,K.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,fe)}else{const Hn=K.isWebGLMultipleRenderTargets===!0?K.texture:[K.texture];for(let Cn=0;Cn<Hn.length;Cn++){const Wn=Hn[Cn],Zr=o.convert(Wn.format,Wn.colorSpace),Jn=o.convert(Wn.type),br=Te(Wn.internalFormat,Zr,Jn,Wn.colorSpace),Pi=kr(K);lt&&Fi(K)===!1?a.renderbufferStorageMultisample(a.RENDERBUFFER,Pi,br,K.width,K.height):Fi(K)?x.renderbufferStorageMultisampleEXT(a.RENDERBUFFER,Pi,br,K.width,K.height):a.renderbufferStorage(a.RENDERBUFFER,br,K.width,K.height)}}a.bindRenderbuffer(a.RENDERBUFFER,null)}function ar(fe,K){if(K&&K.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(a.FRAMEBUFFER,fe),!(K.depthTexture&&K.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(K.depthTexture).__webglTexture||K.depthTexture.image.width!==K.width||K.depthTexture.image.height!==K.height)&&(K.depthTexture.image.width=K.width,K.depthTexture.image.height=K.height,K.depthTexture.needsUpdate=!0),bn(K.depthTexture,0);const Hn=n.get(K.depthTexture).__webglTexture,Cn=kr(K);if(K.depthTexture.format===js)Fi(K)?x.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,Hn,0,Cn):a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,Hn,0);else if(K.depthTexture.format===os)Fi(K)?x.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,Hn,0,Cn):a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,Hn,0);else throw new Error("Unknown depthTexture format")}function Yt(fe){const K=n.get(fe),lt=fe.isWebGLCubeRenderTarget===!0;if(fe.depthTexture&&!K.__autoAllocateDepthBuffer){if(lt)throw new Error("target.depthTexture not supported in Cube render targets");ar(K.__webglFramebuffer,fe)}else if(lt){K.__webglDepthbuffer=[];for(let Hn=0;Hn<6;Hn++)t.bindFramebuffer(a.FRAMEBUFFER,K.__webglFramebuffer[Hn]),K.__webglDepthbuffer[Hn]=a.createRenderbuffer(),Me(K.__webglDepthbuffer[Hn],fe,!1)}else t.bindFramebuffer(a.FRAMEBUFFER,K.__webglFramebuffer),K.__webglDepthbuffer=a.createRenderbuffer(),Me(K.__webglDepthbuffer,fe,!1);t.bindFramebuffer(a.FRAMEBUFFER,null)}function Fn(fe,K,lt){const Hn=n.get(fe);K!==void 0&&pi(Hn.__webglFramebuffer,fe,fe.texture,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,0),lt!==void 0&&Yt(fe)}function mn(fe){const K=fe.texture,lt=n.get(fe),Hn=n.get(K);fe.addEventListener("dispose",Qt),fe.isWebGLMultipleRenderTargets!==!0&&(Hn.__webglTexture===void 0&&(Hn.__webglTexture=a.createTexture()),Hn.__version=K.version,l.memory.textures++);const Cn=fe.isWebGLCubeRenderTarget===!0,Wn=fe.isWebGLMultipleRenderTargets===!0,Zr=W(fe)||c;if(Cn){lt.__webglFramebuffer=[];for(let Jn=0;Jn<6;Jn++)if(c&&K.mipmaps&&K.mipmaps.length>0){lt.__webglFramebuffer[Jn]=[];for(let br=0;br<K.mipmaps.length;br++)lt.__webglFramebuffer[Jn][br]=a.createFramebuffer()}else lt.__webglFramebuffer[Jn]=a.createFramebuffer()}else{if(c&&K.mipmaps&&K.mipmaps.length>0){lt.__webglFramebuffer=[];for(let Jn=0;Jn<K.mipmaps.length;Jn++)lt.__webglFramebuffer[Jn]=a.createFramebuffer()}else lt.__webglFramebuffer=a.createFramebuffer();if(Wn)if(r.drawBuffers){const Jn=fe.texture;for(let br=0,Pi=Jn.length;br<Pi;br++){const zs=n.get(Jn[br]);zs.__webglTexture===void 0&&(zs.__webglTexture=a.createTexture(),l.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(c&&fe.samples>0&&Fi(fe)===!1){const Jn=Wn?K:[K];lt.__webglMultisampledFramebuffer=a.createFramebuffer(),lt.__webglColorRenderbuffer=[],t.bindFramebuffer(a.FRAMEBUFFER,lt.__webglMultisampledFramebuffer);for(let br=0;br<Jn.length;br++){const Pi=Jn[br];lt.__webglColorRenderbuffer[br]=a.createRenderbuffer(),a.bindRenderbuffer(a.RENDERBUFFER,lt.__webglColorRenderbuffer[br]);const zs=o.convert(Pi.format,Pi.colorSpace),jn=o.convert(Pi.type),Js=Te(Pi.internalFormat,zs,jn,Pi.colorSpace,fe.isXRRenderTarget===!0),Wi=kr(fe);a.renderbufferStorageMultisample(a.RENDERBUFFER,Wi,Js,fe.width,fe.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+br,a.RENDERBUFFER,lt.__webglColorRenderbuffer[br])}a.bindRenderbuffer(a.RENDERBUFFER,null),fe.depthBuffer&&(lt.__webglDepthRenderbuffer=a.createRenderbuffer(),Me(lt.__webglDepthRenderbuffer,fe,!0)),t.bindFramebuffer(a.FRAMEBUFFER,null)}}if(Cn){t.bindTexture(a.TEXTURE_CUBE_MAP,Hn.__webglTexture),Ri(a.TEXTURE_CUBE_MAP,K,Zr);for(let Jn=0;Jn<6;Jn++)if(c&&K.mipmaps&&K.mipmaps.length>0)for(let br=0;br<K.mipmaps.length;br++)pi(lt.__webglFramebuffer[Jn][br],fe,K,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+Jn,br);else pi(lt.__webglFramebuffer[Jn],fe,K,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+Jn,0);ae(K,Zr)&&ue(a.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Wn){const Jn=fe.texture;for(let br=0,Pi=Jn.length;br<Pi;br++){const zs=Jn[br],jn=n.get(zs);t.bindTexture(a.TEXTURE_2D,jn.__webglTexture),Ri(a.TEXTURE_2D,zs,Zr),pi(lt.__webglFramebuffer,fe,zs,a.COLOR_ATTACHMENT0+br,a.TEXTURE_2D,0),ae(zs,Zr)&&ue(a.TEXTURE_2D)}t.unbindTexture()}else{let Jn=a.TEXTURE_2D;if((fe.isWebGL3DRenderTarget||fe.isWebGLArrayRenderTarget)&&(c?Jn=fe.isWebGL3DRenderTarget?a.TEXTURE_3D:a.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Jn,Hn.__webglTexture),Ri(Jn,K,Zr),c&&K.mipmaps&&K.mipmaps.length>0)for(let br=0;br<K.mipmaps.length;br++)pi(lt.__webglFramebuffer[br],fe,K,a.COLOR_ATTACHMENT0,Jn,br);else pi(lt.__webglFramebuffer,fe,K,a.COLOR_ATTACHMENT0,Jn,0);ae(K,Zr)&&ue(Jn),t.unbindTexture()}fe.depthBuffer&&Yt(fe)}function ri(fe){const K=W(fe)||c,lt=fe.isWebGLMultipleRenderTargets===!0?fe.texture:[fe.texture];for(let Hn=0,Cn=lt.length;Hn<Cn;Hn++){const Wn=lt[Hn];if(ae(Wn,K)){const Zr=fe.isWebGLCubeRenderTarget?a.TEXTURE_CUBE_MAP:a.TEXTURE_2D,Jn=n.get(Wn).__webglTexture;t.bindTexture(Zr,Jn),ue(Zr),t.unbindTexture()}}}function Er(fe){if(c&&fe.samples>0&&Fi(fe)===!1){const K=fe.isWebGLMultipleRenderTargets?fe.texture:[fe.texture],lt=fe.width,Hn=fe.height;let Cn=a.COLOR_BUFFER_BIT;const Wn=[],Zr=fe.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT,Jn=n.get(fe),br=fe.isWebGLMultipleRenderTargets===!0;if(br)for(let Pi=0;Pi<K.length;Pi++)t.bindFramebuffer(a.FRAMEBUFFER,Jn.__webglMultisampledFramebuffer),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+Pi,a.RENDERBUFFER,null),t.bindFramebuffer(a.FRAMEBUFFER,Jn.__webglFramebuffer),a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0+Pi,a.TEXTURE_2D,null,0);t.bindFramebuffer(a.READ_FRAMEBUFFER,Jn.__webglMultisampledFramebuffer),t.bindFramebuffer(a.DRAW_FRAMEBUFFER,Jn.__webglFramebuffer);for(let Pi=0;Pi<K.length;Pi++){Wn.push(a.COLOR_ATTACHMENT0+Pi),fe.depthBuffer&&Wn.push(Zr);const zs=Jn.__ignoreDepthValues!==void 0?Jn.__ignoreDepthValues:!1;if(zs===!1&&(fe.depthBuffer&&(Cn|=a.DEPTH_BUFFER_BIT),fe.stencilBuffer&&(Cn|=a.STENCIL_BUFFER_BIT)),br&&a.framebufferRenderbuffer(a.READ_FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.RENDERBUFFER,Jn.__webglColorRenderbuffer[Pi]),zs===!0&&(a.invalidateFramebuffer(a.READ_FRAMEBUFFER,[Zr]),a.invalidateFramebuffer(a.DRAW_FRAMEBUFFER,[Zr])),br){const jn=n.get(K[Pi]).__webglTexture;a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,jn,0)}a.blitFramebuffer(0,0,lt,Hn,0,0,lt,Hn,Cn,a.NEAREST),S&&a.invalidateFramebuffer(a.READ_FRAMEBUFFER,Wn)}if(t.bindFramebuffer(a.READ_FRAMEBUFFER,null),t.bindFramebuffer(a.DRAW_FRAMEBUFFER,null),br)for(let Pi=0;Pi<K.length;Pi++){t.bindFramebuffer(a.FRAMEBUFFER,Jn.__webglMultisampledFramebuffer),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+Pi,a.RENDERBUFFER,Jn.__webglColorRenderbuffer[Pi]);const zs=n.get(K[Pi]).__webglTexture;t.bindFramebuffer(a.FRAMEBUFFER,Jn.__webglFramebuffer),a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0+Pi,a.TEXTURE_2D,zs,0)}t.bindFramebuffer(a.DRAW_FRAMEBUFFER,Jn.__webglMultisampledFramebuffer)}}function kr(fe){return Math.min(_,fe.samples)}function Fi(fe){const K=n.get(fe);return c&&fe.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&K.__useRenderToTexture!==!1}function gs(fe){const K=l.render.frame;E.get(fe)!==K&&(E.set(fe,K),fe.update())}function Zo(fe,K){const lt=fe.colorSpace,Hn=fe.format,Cn=fe.type;return fe.isCompressedTexture===!0||fe.isVideoTexture===!0||fe.format===Qs||lt!==Y&&lt!==N&&(Xr.getTransfer(lt)===L?c===!1?e.has("EXT_sRGB")===!0&&Hn===Zi?(fe.format=Qs,fe.minFilter=Ht,fe.generateMipmaps=!1):K=U.sRGBToLinear(K):(Hn!==Zi||Cn!==st)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",lt)),K}this.allocateTextureUnit=Vn,this.resetTextureUnits=Xt,this.setTexture2D=bn,this.setTexture2DArray=Be,this.setTexture3D=Gt,this.setTextureCube=Sr,this.rebindTextures=Fn,this.setupRenderTarget=mn,this.updateRenderTargetMipmap=ri,this.updateMultisampleRenderTarget=Er,this.setupDepthRenderbuffer=Yt,this.setupFrameBufferTexture=pi,this.useMultisampledRTT=Fi}function Ap(a,e,t){const n=t.isWebGL2;function r(o,l=N){let c;const f=Xr.getTransfer(l);if(o===st)return a.UNSIGNED_BYTE;if(o===At)return a.UNSIGNED_SHORT_4_4_4_4;if(o===Pn)return a.UNSIGNED_SHORT_5_5_5_1;if(o===Ft)return a.BYTE;if(o===kn)return a.SHORT;if(o===On)return a.UNSIGNED_SHORT;if(o===$n)return a.INT;if(o===Mr)return a.UNSIGNED_INT;if(o===ti)return a.FLOAT;if(o===xe)return n?a.HALF_FLOAT:(c=e.get("OES_texture_half_float"),c!==null?c.HALF_FLOAT_OES:null);if(o===ni)return a.ALPHA;if(o===Zi)return a.RGBA;if(o===Ns)return a.LUMINANCE;if(o===va)return a.LUMINANCE_ALPHA;if(o===js)return a.DEPTH_COMPONENT;if(o===os)return a.DEPTH_STENCIL;if(o===Qs)return c=e.get("EXT_sRGB"),c!==null?c.SRGB_ALPHA_EXT:null;if(o===Ji)return a.RED;if(o===It)return a.RED_INTEGER;if(o===k)return a.RG;if(o===Z)return a.RG_INTEGER;if(o===le)return a.RGBA_INTEGER;if(o===Ye||o===He||o===ft||o===Dn)if(f===L)if(c=e.get("WEBGL_compressed_texture_s3tc_srgb"),c!==null){if(o===Ye)return c.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===He)return c.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===ft)return c.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===Dn)return c.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(c=e.get("WEBGL_compressed_texture_s3tc"),c!==null){if(o===Ye)return c.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===He)return c.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===ft)return c.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===Dn)return c.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===xn||o===et||o===nn||o===_e)if(c=e.get("WEBGL_compressed_texture_pvrtc"),c!==null){if(o===xn)return c.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===et)return c.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===nn)return c.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===_e)return c.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===De)return c=e.get("WEBGL_compressed_texture_etc1"),c!==null?c.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===ot||o===gt)if(c=e.get("WEBGL_compressed_texture_etc"),c!==null){if(o===ot)return f===L?c.COMPRESSED_SRGB8_ETC2:c.COMPRESSED_RGB8_ETC2;if(o===gt)return f===L?c.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:c.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===Pt||o===Gn||o===dn||o===Ke||o===Xe||o===Zt||o===Un||o===ir||o===Kn||o===Gr||o===Ar||o===vi||o===li||o===sr)if(c=e.get("WEBGL_compressed_texture_astc"),c!==null){if(o===Pt)return f===L?c.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:c.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===Gn)return f===L?c.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:c.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===dn)return f===L?c.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:c.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===Ke)return f===L?c.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:c.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===Xe)return f===L?c.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:c.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===Zt)return f===L?c.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:c.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===Un)return f===L?c.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:c.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===ir)return f===L?c.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:c.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===Kn)return f===L?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:c.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===Gr)return f===L?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:c.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===Ar)return f===L?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:c.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===vi)return f===L?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:c.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===li)return f===L?c.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:c.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===sr)return f===L?c.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:c.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===Bi||o===ys||o===Ms)if(c=e.get("EXT_texture_compression_bptc"),c!==null){if(o===Bi)return f===L?c.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:c.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(o===ys)return c.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(o===Ms)return c.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(o===Ja||o===ya||o===Ko||o===Xs)if(c=e.get("EXT_texture_compression_rgtc"),c!==null){if(o===Bi)return c.COMPRESSED_RED_RGTC1_EXT;if(o===ya)return c.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(o===Ko)return c.COMPRESSED_RED_GREEN_RGTC2_EXT;if(o===Xs)return c.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return o===vr?n?a.UNSIGNED_INT_24_8:(c=e.get("WEBGL_depth_texture"),c!==null?c.UNSIGNED_INT_24_8_WEBGL:null):a[o]!==void 0?a[o]:null}return{convert:r}}class Cp extends oo{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class af extends ds{constructor(){super(),this.isGroup=!0,this.type="Group"}}const gv={type:"move"};class ph{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new af,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new af,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new $,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new $),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new af,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new $,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new $),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,o=null,l=null;const c=this._targetRay,f=this._grip,h=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(h&&e.hand){l=!0;for(const I of e.hand.values()){const T=t.getJointPose(I,n),b=this._getHandJoint(h,I);T!==null&&(b.matrix.fromArray(T.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.matrixWorldNeedsUpdate=!0,b.jointRadius=T.radius),b.visible=T!==null}const g=h.joints["index-finger-tip"],_=h.joints["thumb-tip"],x=g.position.distanceTo(_.position),S=.02,E=.005;h.inputState.pinching&&x>S+E?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&x<=S-E&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else f!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,n),o!==null&&(f.matrix.fromArray(o.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.matrixWorldNeedsUpdate=!0,o.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(o.linearVelocity)):f.hasLinearVelocity=!1,o.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(o.angularVelocity)):f.hasAngularVelocity=!1));c!==null&&(r=t.getPose(e.targetRaySpace,n),r===null&&o!==null&&(r=o),r!==null&&(c.matrix.fromArray(r.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,r.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(r.linearVelocity)):c.hasLinearVelocity=!1,r.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(r.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(gv)))}return c!==null&&(c.visible=r!==null),f!==null&&(f.visible=o!==null),h!==null&&(h.visible=l!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new af;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class Rp extends je{constructor(e,t,n,r,o,l,c,f,h,g){if(g=g!==void 0?g:js,g!==js&&g!==os)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&g===js&&(n=Mr),n===void 0&&g===os&&(n=vr),super(null,r,o,l,c,f,g,n,h),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=c!==void 0?c:Q,this.minFilter=f!==void 0?f:Q,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class vv extends us{constructor(e,t){super();const n=this;let r=null,o=1,l=null,c="local-floor",f=1,h=null,g=null,_=null,x=null,S=null,E=null;const I=t.getContextAttributes();let T=null,b=null;const B=[],D=[],W=new oo;W.layers.enable(1),W.viewport=new Dt;const ne=new oo;ne.layers.enable(2),ne.viewport=new Dt;const ae=[W,ne],ue=new Cp;ue.layers.enable(1),ue.layers.enable(2);let Te=null,j=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Be){let Gt=B[Be];return Gt===void 0&&(Gt=new ph,B[Be]=Gt),Gt.getTargetRaySpace()},this.getControllerGrip=function(Be){let Gt=B[Be];return Gt===void 0&&(Gt=new ph,B[Be]=Gt),Gt.getGripSpace()},this.getHand=function(Be){let Gt=B[Be];return Gt===void 0&&(Gt=new ph,B[Be]=Gt),Gt.getHandSpace()};function ie(Be){const Gt=D.indexOf(Be.inputSource);if(Gt===-1)return;const Sr=B[Gt];Sr!==void 0&&(Sr.update(Be.inputSource,Be.frame,h||l),Sr.dispatchEvent({type:Be.type,data:Be.inputSource}))}function rt(){r.removeEventListener("select",ie),r.removeEventListener("selectstart",ie),r.removeEventListener("selectend",ie),r.removeEventListener("squeeze",ie),r.removeEventListener("squeezestart",ie),r.removeEventListener("squeezeend",ie),r.removeEventListener("end",rt),r.removeEventListener("inputsourceschange",Qt);for(let Be=0;Be<B.length;Be++){const Gt=D[Be];Gt!==null&&(D[Be]=null,B[Be].disconnect(Gt))}Te=null,j=null,e.setRenderTarget(T),S=null,x=null,_=null,r=null,b=null,bn.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Be){o=Be,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Be){c=Be,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||l},this.setReferenceSpace=function(Be){h=Be},this.getBaseLayer=function(){return x!==null?x:S},this.getBinding=function(){return _},this.getFrame=function(){return E},this.getSession=function(){return r},this.setSession=function(Be){return Bc(this,null,function*(){if(r=Be,r!==null){if(T=e.getRenderTarget(),r.addEventListener("select",ie),r.addEventListener("selectstart",ie),r.addEventListener("selectend",ie),r.addEventListener("squeeze",ie),r.addEventListener("squeezestart",ie),r.addEventListener("squeezeend",ie),r.addEventListener("end",rt),r.addEventListener("inputsourceschange",Qt),I.xrCompatible!==!0&&(yield t.makeXRCompatible()),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Gt={antialias:r.renderState.layers===void 0?I.antialias:!0,alpha:!0,depth:I.depth,stencil:I.stencil,framebufferScaleFactor:o};S=new XRWebGLLayer(r,t,Gt),r.updateRenderState({baseLayer:S}),b=new Sn(S.framebufferWidth,S.framebufferHeight,{format:Zi,type:st,colorSpace:e.outputColorSpace,stencilBuffer:I.stencil})}else{let Gt=null,Sr=null,Rr=null;I.depth&&(Rr=I.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Gt=I.stencil?os:js,Sr=I.stencil?vr:Mr);const Fr={colorFormat:t.RGBA8,depthFormat:Rr,scaleFactor:o};_=new XRWebGLBinding(r,t),x=_.createProjectionLayer(Fr),r.updateRenderState({layers:[x]}),b=new Sn(x.textureWidth,x.textureHeight,{format:Zi,type:st,depthTexture:new Rp(x.textureWidth,x.textureHeight,Sr,void 0,void 0,void 0,void 0,void 0,void 0,Gt),stencilBuffer:I.stencil,colorSpace:e.outputColorSpace,samples:I.antialias?4:0});const di=e.properties.get(b);di.__ignoreDepthValues=x.ignoreDepthValues}b.isXRRenderTarget=!0,this.setFoveation(f),h=null,l=yield r.requestReferenceSpace(c),bn.setContext(r),bn.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function Qt(Be){for(let Gt=0;Gt<Be.removed.length;Gt++){const Sr=Be.removed[Gt],Rr=D.indexOf(Sr);Rr>=0&&(D[Rr]=null,B[Rr].disconnect(Sr))}for(let Gt=0;Gt<Be.added.length;Gt++){const Sr=Be.added[Gt];let Rr=D.indexOf(Sr);if(Rr===-1){for(let di=0;di<B.length;di++)if(di>=D.length){D.push(Sr),Rr=di;break}else if(D[di]===null){D[di]=Sr,Rr=di;break}if(Rr===-1)break}const Fr=B[Rr];Fr&&Fr.connect(Sr)}}const _n=new $,Ie=new $;function Mt(Be,Gt,Sr){_n.setFromMatrixPosition(Gt.matrixWorld),Ie.setFromMatrixPosition(Sr.matrixWorld);const Rr=_n.distanceTo(Ie),Fr=Gt.projectionMatrix.elements,di=Sr.projectionMatrix.elements,Ri=Fr[14]/(Fr[10]-1),hi=Fr[14]/(Fr[10]+1),Vi=(Fr[9]+1)/Fr[5],Os=(Fr[9]-1)/Fr[5],pi=(Fr[8]-1)/Fr[0],Me=(di[8]+1)/di[0],ar=Ri*pi,Yt=Ri*Me,Fn=Rr/(-pi+Me),mn=Fn*-pi;Gt.matrixWorld.decompose(Be.position,Be.quaternion,Be.scale),Be.translateX(mn),Be.translateZ(Fn),Be.matrixWorld.compose(Be.position,Be.quaternion,Be.scale),Be.matrixWorldInverse.copy(Be.matrixWorld).invert();const ri=Ri+Fn,Er=hi+Fn,kr=ar-mn,Fi=Yt+(Rr-mn),gs=Vi*hi/Er*ri,Zo=Os*hi/Er*ri;Be.projectionMatrix.makePerspective(kr,Fi,gs,Zo,ri,Er),Be.projectionMatrixInverse.copy(Be.projectionMatrix).invert()}function qt(Be,Gt){Gt===null?Be.matrixWorld.copy(Be.matrix):Be.matrixWorld.multiplyMatrices(Gt.matrixWorld,Be.matrix),Be.matrixWorldInverse.copy(Be.matrixWorld).invert()}this.updateCamera=function(Be){if(r===null)return;ue.near=ne.near=W.near=Be.near,ue.far=ne.far=W.far=Be.far,(Te!==ue.near||j!==ue.far)&&(r.updateRenderState({depthNear:ue.near,depthFar:ue.far}),Te=ue.near,j=ue.far);const Gt=Be.parent,Sr=ue.cameras;qt(ue,Gt);for(let Rr=0;Rr<Sr.length;Rr++)qt(Sr[Rr],Gt);Sr.length===2?Mt(ue,W,ne):ue.projectionMatrix.copy(W.projectionMatrix),Xt(Be,ue,Gt)};function Xt(Be,Gt,Sr){Sr===null?Be.matrix.copy(Gt.matrixWorld):(Be.matrix.copy(Sr.matrixWorld),Be.matrix.invert(),Be.matrix.multiply(Gt.matrixWorld)),Be.matrix.decompose(Be.position,Be.quaternion,Be.scale),Be.updateMatrixWorld(!0),Be.projectionMatrix.copy(Gt.projectionMatrix),Be.projectionMatrixInverse.copy(Gt.projectionMatrixInverse),Be.isPerspectiveCamera&&(Be.fov=So*2*Math.atan(1/Be.projectionMatrix.elements[5]),Be.zoom=1)}this.getCamera=function(){return ue},this.getFoveation=function(){if(!(x===null&&S===null))return f},this.setFoveation=function(Be){f=Be,x!==null&&(x.fixedFoveation=Be),S!==null&&S.fixedFoveation!==void 0&&(S.fixedFoveation=Be)};let Vn=null;function cn(Be,Gt){if(g=Gt.getViewerPose(h||l),E=Gt,g!==null){const Sr=g.views;S!==null&&(e.setRenderTargetFramebuffer(b,S.framebuffer),e.setRenderTarget(b));let Rr=!1;Sr.length!==ue.cameras.length&&(ue.cameras.length=0,Rr=!0);for(let Fr=0;Fr<Sr.length;Fr++){const di=Sr[Fr];let Ri=null;if(S!==null)Ri=S.getViewport(di);else{const Vi=_.getViewSubImage(x,di);Ri=Vi.viewport,Fr===0&&(e.setRenderTargetTextures(b,Vi.colorTexture,x.ignoreDepthValues?void 0:Vi.depthStencilTexture),e.setRenderTarget(b))}let hi=ae[Fr];hi===void 0&&(hi=new oo,hi.layers.enable(Fr),hi.viewport=new Dt,ae[Fr]=hi),hi.matrix.fromArray(di.transform.matrix),hi.matrix.decompose(hi.position,hi.quaternion,hi.scale),hi.projectionMatrix.fromArray(di.projectionMatrix),hi.projectionMatrixInverse.copy(hi.projectionMatrix).invert(),hi.viewport.set(Ri.x,Ri.y,Ri.width,Ri.height),Fr===0&&(ue.matrix.copy(hi.matrix),ue.matrix.decompose(ue.position,ue.quaternion,ue.scale)),Rr===!0&&ue.cameras.push(hi)}}for(let Sr=0;Sr<B.length;Sr++){const Rr=D[Sr],Fr=B[Sr];Rr!==null&&Fr!==void 0&&Fr.update(Rr,Gt,h||l)}Vn&&Vn(Be,Gt),Gt.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Gt}),E=null}const bn=new Oa;bn.setAnimationLoop(cn),this.setAnimationLoop=function(Be){Vn=Be},this.dispose=function(){}}}function yv(a,e){function t(T,b){T.matrixAutoUpdate===!0&&T.updateMatrix(),b.value.copy(T.matrix)}function n(T,b){b.color.getRGB(T.fogColor.value,Pc(a)),b.isFog?(T.fogNear.value=b.near,T.fogFar.value=b.far):b.isFogExp2&&(T.fogDensity.value=b.density)}function r(T,b,B,D,W){b.isMeshBasicMaterial||b.isMeshLambertMaterial?o(T,b):b.isMeshToonMaterial?(o(T,b),_(T,b)):b.isMeshPhongMaterial?(o(T,b),g(T,b)):b.isMeshStandardMaterial?(o(T,b),x(T,b),b.isMeshPhysicalMaterial&&S(T,b,W)):b.isMeshMatcapMaterial?(o(T,b),E(T,b)):b.isMeshDepthMaterial?o(T,b):b.isMeshDistanceMaterial?(o(T,b),I(T,b)):b.isMeshNormalMaterial?o(T,b):b.isLineBasicMaterial?(l(T,b),b.isLineDashedMaterial&&c(T,b)):b.isPointsMaterial?f(T,b,B,D):b.isSpriteMaterial?h(T,b):b.isShadowMaterial?(T.color.value.copy(b.color),T.opacity.value=b.opacity):b.isShaderMaterial&&(b.uniformsNeedUpdate=!1)}function o(T,b){T.opacity.value=b.opacity,b.color&&T.diffuse.value.copy(b.color),b.emissive&&T.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity),b.map&&(T.map.value=b.map,t(b.map,T.mapTransform)),b.alphaMap&&(T.alphaMap.value=b.alphaMap,t(b.alphaMap,T.alphaMapTransform)),b.bumpMap&&(T.bumpMap.value=b.bumpMap,t(b.bumpMap,T.bumpMapTransform),T.bumpScale.value=b.bumpScale,b.side===ut&&(T.bumpScale.value*=-1)),b.normalMap&&(T.normalMap.value=b.normalMap,t(b.normalMap,T.normalMapTransform),T.normalScale.value.copy(b.normalScale),b.side===ut&&T.normalScale.value.negate()),b.displacementMap&&(T.displacementMap.value=b.displacementMap,t(b.displacementMap,T.displacementMapTransform),T.displacementScale.value=b.displacementScale,T.displacementBias.value=b.displacementBias),b.emissiveMap&&(T.emissiveMap.value=b.emissiveMap,t(b.emissiveMap,T.emissiveMapTransform)),b.specularMap&&(T.specularMap.value=b.specularMap,t(b.specularMap,T.specularMapTransform)),b.alphaTest>0&&(T.alphaTest.value=b.alphaTest);const B=e.get(b).envMap;if(B&&(T.envMap.value=B,T.flipEnvMap.value=B.isCubeTexture&&B.isRenderTargetTexture===!1?-1:1,T.reflectivity.value=b.reflectivity,T.ior.value=b.ior,T.refractionRatio.value=b.refractionRatio),b.lightMap){T.lightMap.value=b.lightMap;const D=a._useLegacyLights===!0?Math.PI:1;T.lightMapIntensity.value=b.lightMapIntensity*D,t(b.lightMap,T.lightMapTransform)}b.aoMap&&(T.aoMap.value=b.aoMap,T.aoMapIntensity.value=b.aoMapIntensity,t(b.aoMap,T.aoMapTransform))}function l(T,b){T.diffuse.value.copy(b.color),T.opacity.value=b.opacity,b.map&&(T.map.value=b.map,t(b.map,T.mapTransform))}function c(T,b){T.dashSize.value=b.dashSize,T.totalSize.value=b.dashSize+b.gapSize,T.scale.value=b.scale}function f(T,b,B,D){T.diffuse.value.copy(b.color),T.opacity.value=b.opacity,T.size.value=b.size*B,T.scale.value=D*.5,b.map&&(T.map.value=b.map,t(b.map,T.uvTransform)),b.alphaMap&&(T.alphaMap.value=b.alphaMap,t(b.alphaMap,T.alphaMapTransform)),b.alphaTest>0&&(T.alphaTest.value=b.alphaTest)}function h(T,b){T.diffuse.value.copy(b.color),T.opacity.value=b.opacity,T.rotation.value=b.rotation,b.map&&(T.map.value=b.map,t(b.map,T.mapTransform)),b.alphaMap&&(T.alphaMap.value=b.alphaMap,t(b.alphaMap,T.alphaMapTransform)),b.alphaTest>0&&(T.alphaTest.value=b.alphaTest)}function g(T,b){T.specular.value.copy(b.specular),T.shininess.value=Math.max(b.shininess,1e-4)}function _(T,b){b.gradientMap&&(T.gradientMap.value=b.gradientMap)}function x(T,b){T.metalness.value=b.metalness,b.metalnessMap&&(T.metalnessMap.value=b.metalnessMap,t(b.metalnessMap,T.metalnessMapTransform)),T.roughness.value=b.roughness,b.roughnessMap&&(T.roughnessMap.value=b.roughnessMap,t(b.roughnessMap,T.roughnessMapTransform)),e.get(b).envMap&&(T.envMapIntensity.value=b.envMapIntensity)}function S(T,b,B){T.ior.value=b.ior,b.sheen>0&&(T.sheenColor.value.copy(b.sheenColor).multiplyScalar(b.sheen),T.sheenRoughness.value=b.sheenRoughness,b.sheenColorMap&&(T.sheenColorMap.value=b.sheenColorMap,t(b.sheenColorMap,T.sheenColorMapTransform)),b.sheenRoughnessMap&&(T.sheenRoughnessMap.value=b.sheenRoughnessMap,t(b.sheenRoughnessMap,T.sheenRoughnessMapTransform))),b.clearcoat>0&&(T.clearcoat.value=b.clearcoat,T.clearcoatRoughness.value=b.clearcoatRoughness,b.clearcoatMap&&(T.clearcoatMap.value=b.clearcoatMap,t(b.clearcoatMap,T.clearcoatMapTransform)),b.clearcoatRoughnessMap&&(T.clearcoatRoughnessMap.value=b.clearcoatRoughnessMap,t(b.clearcoatRoughnessMap,T.clearcoatRoughnessMapTransform)),b.clearcoatNormalMap&&(T.clearcoatNormalMap.value=b.clearcoatNormalMap,t(b.clearcoatNormalMap,T.clearcoatNormalMapTransform),T.clearcoatNormalScale.value.copy(b.clearcoatNormalScale),b.side===ut&&T.clearcoatNormalScale.value.negate())),b.iridescence>0&&(T.iridescence.value=b.iridescence,T.iridescenceIOR.value=b.iridescenceIOR,T.iridescenceThicknessMinimum.value=b.iridescenceThicknessRange[0],T.iridescenceThicknessMaximum.value=b.iridescenceThicknessRange[1],b.iridescenceMap&&(T.iridescenceMap.value=b.iridescenceMap,t(b.iridescenceMap,T.iridescenceMapTransform)),b.iridescenceThicknessMap&&(T.iridescenceThicknessMap.value=b.iridescenceThicknessMap,t(b.iridescenceThicknessMap,T.iridescenceThicknessMapTransform))),b.transmission>0&&(T.transmission.value=b.transmission,T.transmissionSamplerMap.value=B.texture,T.transmissionSamplerSize.value.set(B.width,B.height),b.transmissionMap&&(T.transmissionMap.value=b.transmissionMap,t(b.transmissionMap,T.transmissionMapTransform)),T.thickness.value=b.thickness,b.thicknessMap&&(T.thicknessMap.value=b.thicknessMap,t(b.thicknessMap,T.thicknessMapTransform)),T.attenuationDistance.value=b.attenuationDistance,T.attenuationColor.value.copy(b.attenuationColor)),b.anisotropy>0&&(T.anisotropyVector.value.set(b.anisotropy*Math.cos(b.anisotropyRotation),b.anisotropy*Math.sin(b.anisotropyRotation)),b.anisotropyMap&&(T.anisotropyMap.value=b.anisotropyMap,t(b.anisotropyMap,T.anisotropyMapTransform))),T.specularIntensity.value=b.specularIntensity,T.specularColor.value.copy(b.specularColor),b.specularColorMap&&(T.specularColorMap.value=b.specularColorMap,t(b.specularColorMap,T.specularColorMapTransform)),b.specularIntensityMap&&(T.specularIntensityMap.value=b.specularIntensityMap,t(b.specularIntensityMap,T.specularIntensityMapTransform))}function E(T,b){b.matcap&&(T.matcap.value=b.matcap)}function I(T,b){const B=e.get(b).light;T.referencePosition.value.setFromMatrixPosition(B.matrixWorld),T.nearDistance.value=B.shadow.camera.near,T.farDistance.value=B.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function _v(a,e,t,n){let r={},o={},l=[];const c=t.isWebGL2?a.getParameter(a.MAX_UNIFORM_BUFFER_BINDINGS):0;function f(B,D){const W=D.program;n.uniformBlockBinding(B,W)}function h(B,D){let W=r[B.id];W===void 0&&(E(B),W=g(B),r[B.id]=W,B.addEventListener("dispose",T));const ne=D.program;n.updateUBOMapping(B,ne);const ae=e.render.frame;o[B.id]!==ae&&(x(B),o[B.id]=ae)}function g(B){const D=_();B.__bindingPointIndex=D;const W=a.createBuffer(),ne=B.__size,ae=B.usage;return a.bindBuffer(a.UNIFORM_BUFFER,W),a.bufferData(a.UNIFORM_BUFFER,ne,ae),a.bindBuffer(a.UNIFORM_BUFFER,null),a.bindBufferBase(a.UNIFORM_BUFFER,D,W),W}function _(){for(let B=0;B<c;B++)if(l.indexOf(B)===-1)return l.push(B),B;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function x(B){const D=r[B.id],W=B.uniforms,ne=B.__cache;a.bindBuffer(a.UNIFORM_BUFFER,D);for(let ae=0,ue=W.length;ae<ue;ae++){const Te=W[ae];if(S(Te,ae,ne)===!0){const j=Te.__offset,ie=Array.isArray(Te.value)?Te.value:[Te.value];let rt=0;for(let Qt=0;Qt<ie.length;Qt++){const _n=ie[Qt],Ie=I(_n);typeof _n=="number"?(Te.__data[0]=_n,a.bufferSubData(a.UNIFORM_BUFFER,j+rt,Te.__data)):_n.isMatrix3?(Te.__data[0]=_n.elements[0],Te.__data[1]=_n.elements[1],Te.__data[2]=_n.elements[2],Te.__data[3]=_n.elements[0],Te.__data[4]=_n.elements[3],Te.__data[5]=_n.elements[4],Te.__data[6]=_n.elements[5],Te.__data[7]=_n.elements[0],Te.__data[8]=_n.elements[6],Te.__data[9]=_n.elements[7],Te.__data[10]=_n.elements[8],Te.__data[11]=_n.elements[0]):(_n.toArray(Te.__data,rt),rt+=Ie.storage/Float32Array.BYTES_PER_ELEMENT)}a.bufferSubData(a.UNIFORM_BUFFER,j,Te.__data)}}a.bindBuffer(a.UNIFORM_BUFFER,null)}function S(B,D,W){const ne=B.value;if(W[D]===void 0){if(typeof ne=="number")W[D]=ne;else{const ae=Array.isArray(ne)?ne:[ne],ue=[];for(let Te=0;Te<ae.length;Te++)ue.push(ae[Te].clone());W[D]=ue}return!0}else if(typeof ne=="number"){if(W[D]!==ne)return W[D]=ne,!0}else{const ae=Array.isArray(W[D])?W[D]:[W[D]],ue=Array.isArray(ne)?ne:[ne];for(let Te=0;Te<ae.length;Te++){const j=ae[Te];if(j.equals(ue[Te])===!1)return j.copy(ue[Te]),!0}}return!1}function E(B){const D=B.uniforms;let W=0;const ne=16;let ae=0;for(let ue=0,Te=D.length;ue<Te;ue++){const j=D[ue],ie={boundary:0,storage:0},rt=Array.isArray(j.value)?j.value:[j.value];for(let Qt=0,_n=rt.length;Qt<_n;Qt++){const Ie=rt[Qt],Mt=I(Ie);ie.boundary+=Mt.boundary,ie.storage+=Mt.storage}if(j.__data=new Float32Array(ie.storage/Float32Array.BYTES_PER_ELEMENT),j.__offset=W,ue>0){ae=W%ne;const Qt=ne-ae;ae!==0&&Qt-ie.boundary<0&&(W+=ne-ae,j.__offset=W)}W+=ie.storage}return ae=W%ne,ae>0&&(W+=ne-ae),B.__size=W,B.__cache={},this}function I(B){const D={boundary:0,storage:0};return typeof B=="number"?(D.boundary=4,D.storage=4):B.isVector2?(D.boundary=8,D.storage=8):B.isVector3||B.isColor?(D.boundary=16,D.storage=12):B.isVector4?(D.boundary=16,D.storage=16):B.isMatrix3?(D.boundary=48,D.storage=48):B.isMatrix4?(D.boundary=64,D.storage=64):B.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",B),D}function T(B){const D=B.target;D.removeEventListener("dispose",T);const W=l.indexOf(D.__bindingPointIndex);l.splice(W,1),a.deleteBuffer(r[D.id]),delete r[D.id],delete o[D.id]}function b(){for(const B in r)a.deleteBuffer(r[B]);l=[],r={},o={}}return{bind:f,update:h,dispose:b}}class Pp{constructor(e={}){const{canvas:t=bo(),context:n=null,depth:r=!0,stencil:o=!0,alpha:l=!1,antialias:c=!1,premultipliedAlpha:f=!0,preserveDrawingBuffer:h=!1,powerPreference:g="default",failIfMajorPerformanceCaveat:_=!1}=e;this.isWebGLRenderer=!0;let x;n!==null?x=n.getContextAttributes().alpha:x=l;const S=new Uint32Array(4),E=new Int32Array(4);let I=null,T=null;const b=[],B=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=H,this._useLegacyLights=!1,this.toneMapping=_r,this.toneMappingExposure=1;const D=this;let W=!1,ne=0,ae=0,ue=null,Te=-1,j=null;const ie=new Dt,rt=new Dt;let Qt=null;const _n=new Qn(0);let Ie=0,Mt=t.width,qt=t.height,Xt=1,Vn=null,cn=null;const bn=new Dt(0,0,Mt,qt),Be=new Dt(0,0,Mt,qt);let Gt=!1;const Sr=new Ya;let Rr=!1,Fr=!1,di=null;const Ri=new _i,hi=new Et,Vi=new $,Os={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function pi(){return ue===null?Xt:1}let Me=n;function ar(re,qe){for(let mt=0;mt<re.length;mt++){const bt=re[mt],Tt=t.getContext(bt,qe);if(Tt!==null)return Tt}return null}try{const re={alpha:!0,depth:r,stencil:o,antialias:c,premultipliedAlpha:f,preserveDrawingBuffer:h,powerPreference:g,failIfMajorPerformanceCaveat:_};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${X}`),t.addEventListener("webglcontextlost",Es,!1),t.addEventListener("webglcontextrestored",Le,!1),t.addEventListener("webglcontextcreationerror",wr,!1),Me===null){const qe=["webgl2","webgl","experimental-webgl"];if(D.isWebGL1Renderer===!0&&qe.shift(),Me=ar(qe,re),Me===null)throw ar(qe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext!="undefined"&&Me instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),Me.getShaderPrecisionFormat===void 0&&(Me.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(re){throw console.error("THREE.WebGLRenderer: "+re.message),re}let Yt,Fn,mn,ri,Er,kr,Fi,gs,Zo,fe,K,lt,Hn,Cn,Wn,Zr,Jn,br,Pi,zs,jn,Js,Wi,Ii;function fi(){Yt=new Og(Me),Fn=new Cg(Me,Yt,e),Yt.init(Fn),Js=new Ap(Me,Yt,Fn),mn=new pv(Me,Yt,Fn),ri=new Fg(Me),Er=new nv,kr=new mv(Me,Yt,mn,Er,Fn,Js,ri),Fi=new Pg(D),gs=new Dg(D),Zo=new Yc(Me,Fn),Wi=new Tg(Me,Yt,Zo,Fn),fe=new Ng(Me,Zo,ri,Wi),K=new Hg(Me,fe,Zo,ri),Pi=new kg(Me,Fn,kr),Zr=new Rg(Er),lt=new tv(D,Fi,gs,Yt,Fn,Wi,Zr),Hn=new yv(D,Er),Cn=new iv,Wn=new uv(Yt,Fn),br=new Eg(D,Fi,gs,mn,K,x,f),Jn=new hv(D,K,Fn),Ii=new _v(Me,ri,Fn,mn),zs=new Ag(Me,Yt,ri,Fn),jn=new Ug(Me,Yt,ri,Fn),ri.programs=lt.programs,D.capabilities=Fn,D.extensions=Yt,D.properties=Er,D.renderLists=Cn,D.shadowMap=Jn,D.state=mn,D.info=ri}fi();const Or=new vv(D,Me);this.xr=Or,this.getContext=function(){return Me},this.getContextAttributes=function(){return Me.getContextAttributes()},this.forceContextLoss=function(){const re=Yt.get("WEBGL_lose_context");re&&re.loseContext()},this.forceContextRestore=function(){const re=Yt.get("WEBGL_lose_context");re&&re.restoreContext()},this.getPixelRatio=function(){return Xt},this.setPixelRatio=function(re){re!==void 0&&(Xt=re,this.setSize(Mt,qt,!1))},this.getSize=function(re){return re.set(Mt,qt)},this.setSize=function(re,qe,mt=!0){if(Or.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Mt=re,qt=qe,t.width=Math.floor(re*Xt),t.height=Math.floor(qe*Xt),mt===!0&&(t.style.width=re+"px",t.style.height=qe+"px"),this.setViewport(0,0,re,qe)},this.getDrawingBufferSize=function(re){return re.set(Mt*Xt,qt*Xt).floor()},this.setDrawingBufferSize=function(re,qe,mt){Mt=re,qt=qe,Xt=mt,t.width=Math.floor(re*mt),t.height=Math.floor(qe*mt),this.setViewport(0,0,re,qe)},this.getCurrentViewport=function(re){return re.copy(ie)},this.getViewport=function(re){return re.copy(bn)},this.setViewport=function(re,qe,mt,bt){re.isVector4?bn.set(re.x,re.y,re.z,re.w):bn.set(re,qe,mt,bt),mn.viewport(ie.copy(bn).multiplyScalar(Xt).floor())},this.getScissor=function(re){return re.copy(Be)},this.setScissor=function(re,qe,mt,bt){re.isVector4?Be.set(re.x,re.y,re.z,re.w):Be.set(re,qe,mt,bt),mn.scissor(rt.copy(Be).multiplyScalar(Xt).floor())},this.getScissorTest=function(){return Gt},this.setScissorTest=function(re){mn.setScissorTest(Gt=re)},this.setOpaqueSort=function(re){Vn=re},this.setTransparentSort=function(re){cn=re},this.getClearColor=function(re){return re.copy(br.getClearColor())},this.setClearColor=function(){br.setClearColor.apply(br,arguments)},this.getClearAlpha=function(){return br.getClearAlpha()},this.setClearAlpha=function(){br.setClearAlpha.apply(br,arguments)},this.clear=function(re=!0,qe=!0,mt=!0){let bt=0;if(re){let Tt=!1;if(ue!==null){const Pr=ue.texture.format;Tt=Pr===le||Pr===Z||Pr===It}if(Tt){const Pr=ue.texture.type,Qr=Pr===st||Pr===Mr||Pr===On||Pr===vr||Pr===At||Pr===Pn,gi=br.getClearColor(),Li=br.getClearAlpha(),ss=gi.r,ji=gi.g,qi=gi.b;Qr?(S[0]=ss,S[1]=ji,S[2]=qi,S[3]=Li,Me.clearBufferuiv(Me.COLOR,0,S)):(E[0]=ss,E[1]=ji,E[2]=qi,E[3]=Li,Me.clearBufferiv(Me.COLOR,0,E))}else bt|=Me.COLOR_BUFFER_BIT}qe&&(bt|=Me.DEPTH_BUFFER_BIT),mt&&(bt|=Me.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Me.clear(bt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Es,!1),t.removeEventListener("webglcontextrestored",Le,!1),t.removeEventListener("webglcontextcreationerror",wr,!1),Cn.dispose(),Wn.dispose(),Er.dispose(),Fi.dispose(),gs.dispose(),K.dispose(),Wi.dispose(),Ii.dispose(),lt.dispose(),Or.dispose(),Or.removeEventListener("sessionstart",Gl),Or.removeEventListener("sessionend",lo),di&&(di.dispose(),di=null),al.stop()};function Es(re){re.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),W=!0}function Le(){console.log("THREE.WebGLRenderer: Context Restored."),W=!1;const re=ri.autoReset,qe=Jn.enabled,mt=Jn.autoUpdate,bt=Jn.needsUpdate,Tt=Jn.type;fi(),ri.autoReset=re,Jn.enabled=qe,Jn.autoUpdate=mt,Jn.needsUpdate=bt,Jn.type=Tt}function wr(re){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",re.statusMessage)}function qn(re){const qe=re.target;qe.removeEventListener("dispose",qn),Vt(qe)}function Vt(re){er(re),Er.remove(re)}function er(re){const qe=Er.get(re).programs;qe!==void 0&&(qe.forEach(function(mt){lt.releaseProgram(mt)}),re.isShaderMaterial&&lt.releaseShaderCache(re))}this.renderBufferDirect=function(re,qe,mt,bt,Tt,Pr){qe===null&&(qe=Os);const Qr=Tt.isMesh&&Tt.matrixWorld.determinant()<0,gi=l_(re,qe,mt,bt,Tt);mn.setMaterial(bt,Qr);let Li=mt.index,ss=1;if(bt.wireframe===!0){if(Li=fe.getWireframeAttribute(mt),Li===void 0)return;ss=2}const ji=mt.drawRange,qi=mt.attributes.position;let ea=ji.start*ss,Rl=(ji.start+ji.count)*ss;Pr!==null&&(ea=Math.max(ea,Pr.start*ss),Rl=Math.min(Rl,(Pr.start+Pr.count)*ss)),Li!==null?(ea=Math.max(ea,0),Rl=Math.min(Rl,Li.count)):qi!=null&&(ea=Math.max(ea,0),Rl=Math.min(Rl,qi.count));const Aa=Rl-ea;if(Aa<0||Aa===1/0)return;Wi.setup(Tt,bt,gi,mt,Li);let zc,Yo=zs;if(Li!==null&&(zc=Zo.get(Li),Yo=jn,Yo.setIndex(zc)),Tt.isMesh)bt.wireframe===!0?(mn.setLineWidth(bt.wireframeLinewidth*pi()),Yo.setMode(Me.LINES)):Yo.setMode(Me.TRIANGLES);else if(Tt.isLine){let vs=bt.linewidth;vs===void 0&&(vs=1),mn.setLineWidth(vs*pi()),Tt.isLineSegments?Yo.setMode(Me.LINES):Tt.isLineLoop?Yo.setMode(Me.LINE_LOOP):Yo.setMode(Me.LINE_STRIP)}else Tt.isPoints?Yo.setMode(Me.POINTS):Tt.isSprite&&Yo.setMode(Me.TRIANGLES);if(Tt.isInstancedMesh)Yo.renderInstances(ea,Aa,Tt.count);else if(mt.isInstancedBufferGeometry){const vs=mt._maxInstanceCount!==void 0?mt._maxInstanceCount:1/0,$h=Math.min(mt.instanceCount,vs);Yo.renderInstances(ea,Aa,$h)}else Yo.render(ea,Aa)};function mi(re,qe,mt){re.transparent===!0&&re.side===it&&re.forceSinglePass===!1?(re.side=ut,re.needsUpdate=!0,Jd(re,qe,mt),re.side=Ae,re.needsUpdate=!0,Jd(re,qe,mt),re.side=it):Jd(re,qe,mt)}this.compile=function(re,qe,mt=null){mt===null&&(mt=re),T=Wn.get(mt),T.init(),B.push(T),mt.traverseVisible(function(Tt){Tt.isLight&&Tt.layers.test(qe.layers)&&(T.pushLight(Tt),Tt.castShadow&&T.pushShadow(Tt))}),re!==mt&&re.traverseVisible(function(Tt){Tt.isLight&&Tt.layers.test(qe.layers)&&(T.pushLight(Tt),Tt.castShadow&&T.pushShadow(Tt))}),T.setupLights(D._useLegacyLights);const bt=new Set;return re.traverse(function(Tt){const Pr=Tt.material;if(Pr)if(Array.isArray(Pr))for(let Qr=0;Qr<Pr.length;Qr++){const gi=Pr[Qr];mi(gi,mt,Tt),bt.add(gi)}else mi(Pr,mt,Tt),bt.add(Pr)}),B.pop(),T=null,bt},this.compileAsync=function(re,qe,mt=null){const bt=this.compile(re,qe,mt);return new Promise(Tt=>{function Pr(){if(bt.forEach(function(Qr){Er.get(Qr).currentProgram.isReady()&&bt.delete(Qr)}),bt.size===0){Tt(re);return}setTimeout(Pr,10)}Yt.get("KHR_parallel_shader_compile")!==null?Pr():setTimeout(Pr,10)})};let Bs=null;function oa(re){Bs&&Bs(re)}function Gl(){al.stop()}function lo(){al.start()}const al=new Oa;al.setAnimationLoop(oa),typeof self!="undefined"&&al.setContext(self),this.setAnimationLoop=function(re){Bs=re,Or.setAnimationLoop(re),re===null?al.stop():al.start()},Or.addEventListener("sessionstart",Gl),Or.addEventListener("sessionend",lo),this.render=function(re,qe){if(qe!==void 0&&qe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(W===!0)return;re.matrixWorldAutoUpdate===!0&&re.updateMatrixWorld(),qe.parent===null&&qe.matrixWorldAutoUpdate===!0&&qe.updateMatrixWorld(),Or.enabled===!0&&Or.isPresenting===!0&&(Or.cameraAutoUpdate===!0&&Or.updateCamera(qe),qe=Or.getCamera()),re.isScene===!0&&re.onBeforeRender(D,re,qe,ue),T=Wn.get(re,B.length),T.init(),B.push(T),Ri.multiplyMatrices(qe.projectionMatrix,qe.matrixWorldInverse),Sr.setFromProjectionMatrix(Ri),Fr=this.localClippingEnabled,Rr=Zr.init(this.clippingPlanes,Fr),I=Cn.get(re,b.length),I.init(),b.push(I),yc(re,qe,0,D.sortObjects),I.finish(),D.sortObjects===!0&&I.sort(Vn,cn),this.info.render.frame++,Rr===!0&&Zr.beginShadows();const mt=T.state.shadowsArray;if(Jn.render(mt,re,qe),Rr===!0&&Zr.endShadows(),this.info.autoReset===!0&&this.info.reset(),br.render(I,re),T.setupLights(D._useLegacyLights),qe.isArrayCamera){const bt=qe.cameras;for(let Tt=0,Pr=bt.length;Tt<Pr;Tt++){const Qr=bt[Tt];mg(I,re,Qr,Qr.viewport)}}else mg(I,re,qe);ue!==null&&(kr.updateMultisampleRenderTarget(ue),kr.updateRenderTargetMipmap(ue)),re.isScene===!0&&re.onAfterRender(D,re,qe),Wi.resetDefaultState(),Te=-1,j=null,B.pop(),B.length>0?T=B[B.length-1]:T=null,b.pop(),b.length>0?I=b[b.length-1]:I=null};function yc(re,qe,mt,bt){if(re.visible===!1)return;if(re.layers.test(qe.layers)){if(re.isGroup)mt=re.renderOrder;else if(re.isLOD)re.autoUpdate===!0&&re.update(qe);else if(re.isLight)T.pushLight(re),re.castShadow&&T.pushShadow(re);else if(re.isSprite){if(!re.frustumCulled||Sr.intersectsSprite(re)){bt&&Vi.setFromMatrixPosition(re.matrixWorld).applyMatrix4(Ri);const Qr=K.update(re),gi=re.material;gi.visible&&I.push(re,Qr,gi,mt,Vi.z,null)}}else if((re.isMesh||re.isLine||re.isPoints)&&(!re.frustumCulled||Sr.intersectsObject(re))){const Qr=K.update(re),gi=re.material;if(bt&&(re.boundingSphere!==void 0?(re.boundingSphere===null&&re.computeBoundingSphere(),Vi.copy(re.boundingSphere.center)):(Qr.boundingSphere===null&&Qr.computeBoundingSphere(),Vi.copy(Qr.boundingSphere.center)),Vi.applyMatrix4(re.matrixWorld).applyMatrix4(Ri)),Array.isArray(gi)){const Li=Qr.groups;for(let ss=0,ji=Li.length;ss<ji;ss++){const qi=Li[ss],ea=gi[qi.materialIndex];ea&&ea.visible&&I.push(re,Qr,ea,mt,Vi.z,qi)}}else gi.visible&&I.push(re,Qr,gi,mt,Vi.z,null)}}const Pr=re.children;for(let Qr=0,gi=Pr.length;Qr<gi;Qr++)yc(Pr[Qr],qe,mt,bt)}function mg(re,qe,mt,bt){const Tt=re.opaque,Pr=re.transmissive,Qr=re.transparent;T.setupLightsView(mt),Rr===!0&&Zr.setGlobalState(D.clippingPlanes,mt),Pr.length>0&&a_(Tt,Pr,qe,mt),bt&&mn.viewport(ie.copy(bt)),Tt.length>0&&qd(Tt,qe,mt),Pr.length>0&&qd(Pr,qe,mt),Qr.length>0&&qd(Qr,qe,mt),mn.buffers.depth.setTest(!0),mn.buffers.depth.setMask(!0),mn.buffers.color.setMask(!0),mn.setPolygonOffset(!1)}function a_(re,qe,mt,bt){if((mt.isScene===!0?mt.overrideMaterial:null)!==null)return;const Pr=Fn.isWebGL2;di===null&&(di=new Sn(1,1,{generateMipmaps:!0,type:Yt.has("EXT_color_buffer_half_float")?xe:st,minFilter:ht,samples:Pr?4:0})),D.getDrawingBufferSize(hi),Pr?di.setSize(hi.x,hi.y):di.setSize(fo(hi.x),fo(hi.y));const Qr=D.getRenderTarget();D.setRenderTarget(di),D.getClearColor(_n),Ie=D.getClearAlpha(),Ie<1&&D.setClearColor(16777215,.5),D.clear();const gi=D.toneMapping;D.toneMapping=_r,qd(re,mt,bt),kr.updateMultisampleRenderTarget(di),kr.updateRenderTargetMipmap(di);let Li=!1;for(let ss=0,ji=qe.length;ss<ji;ss++){const qi=qe[ss],ea=qi.object,Rl=qi.geometry,Aa=qi.material,zc=qi.group;if(Aa.side===it&&ea.layers.test(bt.layers)){const Yo=Aa.side;Aa.side=ut,Aa.needsUpdate=!0,gg(ea,mt,bt,Rl,Aa,zc),Aa.side=Yo,Aa.needsUpdate=!0,Li=!0}}Li===!0&&(kr.updateMultisampleRenderTarget(di),kr.updateRenderTargetMipmap(di)),D.setRenderTarget(Qr),D.setClearColor(_n,Ie),D.toneMapping=gi}function qd(re,qe,mt){const bt=qe.isScene===!0?qe.overrideMaterial:null;for(let Tt=0,Pr=re.length;Tt<Pr;Tt++){const Qr=re[Tt],gi=Qr.object,Li=Qr.geometry,ss=bt===null?Qr.material:bt,ji=Qr.group;gi.layers.test(mt.layers)&&gg(gi,qe,mt,Li,ss,ji)}}function gg(re,qe,mt,bt,Tt,Pr){re.onBeforeRender(D,qe,mt,bt,Tt,Pr),re.modelViewMatrix.multiplyMatrices(mt.matrixWorldInverse,re.matrixWorld),re.normalMatrix.getNormalMatrix(re.modelViewMatrix),Tt.onBeforeRender(D,qe,mt,bt,re,Pr),Tt.transparent===!0&&Tt.side===it&&Tt.forceSinglePass===!1?(Tt.side=ut,Tt.needsUpdate=!0,D.renderBufferDirect(mt,qe,bt,Tt,re,Pr),Tt.side=Ae,Tt.needsUpdate=!0,D.renderBufferDirect(mt,qe,bt,Tt,re,Pr),Tt.side=it):D.renderBufferDirect(mt,qe,bt,Tt,re,Pr),re.onAfterRender(D,qe,mt,bt,Tt,Pr)}function Jd(re,qe,mt){qe.isScene!==!0&&(qe=Os);const bt=Er.get(re),Tt=T.state.lights,Pr=T.state.shadowsArray,Qr=Tt.state.version,gi=lt.getParameters(re,Tt.state,Pr,qe,mt),Li=lt.getProgramCacheKey(gi);let ss=bt.programs;bt.environment=re.isMeshStandardMaterial?qe.environment:null,bt.fog=qe.fog,bt.envMap=(re.isMeshStandardMaterial?gs:Fi).get(re.envMap||bt.environment),ss===void 0&&(re.addEventListener("dispose",qn),ss=new Map,bt.programs=ss);let ji=ss.get(Li);if(ji!==void 0){if(bt.currentProgram===ji&&bt.lightsStateVersion===Qr)return yg(re,gi),ji}else gi.uniforms=lt.getUniforms(re),re.onBuild(mt,gi,D),re.onBeforeCompile(gi,D),ji=lt.acquireProgram(gi,Li),ss.set(Li,ji),bt.uniforms=gi.uniforms;const qi=bt.uniforms;return(!re.isShaderMaterial&&!re.isRawShaderMaterial||re.clipping===!0)&&(qi.clippingPlanes=Zr.uniform),yg(re,gi),bt.needsLights=u_(re),bt.lightsStateVersion=Qr,bt.needsLights&&(qi.ambientLightColor.value=Tt.state.ambient,qi.lightProbe.value=Tt.state.probe,qi.directionalLights.value=Tt.state.directional,qi.directionalLightShadows.value=Tt.state.directionalShadow,qi.spotLights.value=Tt.state.spot,qi.spotLightShadows.value=Tt.state.spotShadow,qi.rectAreaLights.value=Tt.state.rectArea,qi.ltc_1.value=Tt.state.rectAreaLTC1,qi.ltc_2.value=Tt.state.rectAreaLTC2,qi.pointLights.value=Tt.state.point,qi.pointLightShadows.value=Tt.state.pointShadow,qi.hemisphereLights.value=Tt.state.hemi,qi.directionalShadowMap.value=Tt.state.directionalShadowMap,qi.directionalShadowMatrix.value=Tt.state.directionalShadowMatrix,qi.spotShadowMap.value=Tt.state.spotShadowMap,qi.spotLightMatrix.value=Tt.state.spotLightMatrix,qi.spotLightMap.value=Tt.state.spotLightMap,qi.pointShadowMap.value=Tt.state.pointShadowMap,qi.pointShadowMatrix.value=Tt.state.pointShadowMatrix),bt.currentProgram=ji,bt.uniformsList=null,ji}function vg(re){if(re.uniformsList===null){const qe=re.currentProgram.getUniforms();re.uniformsList=od.seqWithValue(qe.seq,re.uniforms)}return re.uniformsList}function yg(re,qe){const mt=Er.get(re);mt.outputColorSpace=qe.outputColorSpace,mt.instancing=qe.instancing,mt.instancingColor=qe.instancingColor,mt.skinning=qe.skinning,mt.morphTargets=qe.morphTargets,mt.morphNormals=qe.morphNormals,mt.morphColors=qe.morphColors,mt.morphTargetsCount=qe.morphTargetsCount,mt.numClippingPlanes=qe.numClippingPlanes,mt.numIntersection=qe.numClipIntersection,mt.vertexAlphas=qe.vertexAlphas,mt.vertexTangents=qe.vertexTangents,mt.toneMapping=qe.toneMapping}function l_(re,qe,mt,bt,Tt){qe.isScene!==!0&&(qe=Os),kr.resetTextureUnits();const Pr=qe.fog,Qr=bt.isMeshStandardMaterial?qe.environment:null,gi=ue===null?D.outputColorSpace:ue.isXRRenderTarget===!0?ue.texture.colorSpace:Y,Li=(bt.isMeshStandardMaterial?gs:Fi).get(bt.envMap||Qr),ss=bt.vertexColors===!0&&!!mt.attributes.color&&mt.attributes.color.itemSize===4,ji=!!mt.attributes.tangent&&(!!bt.normalMap||bt.anisotropy>0),qi=!!mt.morphAttributes.position,ea=!!mt.morphAttributes.normal,Rl=!!mt.morphAttributes.color;let Aa=_r;bt.toneMapped&&(ue===null||ue.isXRRenderTarget===!0)&&(Aa=D.toneMapping);const zc=mt.morphAttributes.position||mt.morphAttributes.normal||mt.morphAttributes.color,Yo=zc!==void 0?zc.length:0,vs=Er.get(bt),$h=T.state.lights;if(Rr===!0&&(Fr===!0||re!==j)){const Pl=re===j&&bt.id===Te;Zr.setState(bt,re,Pl)}let aa=!1;bt.version===vs.__version?(vs.needsLights&&vs.lightsStateVersion!==$h.state.version||vs.outputColorSpace!==gi||Tt.isInstancedMesh&&vs.instancing===!1||!Tt.isInstancedMesh&&vs.instancing===!0||Tt.isSkinnedMesh&&vs.skinning===!1||!Tt.isSkinnedMesh&&vs.skinning===!0||Tt.isInstancedMesh&&vs.instancingColor===!0&&Tt.instanceColor===null||Tt.isInstancedMesh&&vs.instancingColor===!1&&Tt.instanceColor!==null||vs.envMap!==Li||bt.fog===!0&&vs.fog!==Pr||vs.numClippingPlanes!==void 0&&(vs.numClippingPlanes!==Zr.numPlanes||vs.numIntersection!==Zr.numIntersection)||vs.vertexAlphas!==ss||vs.vertexTangents!==ji||vs.morphTargets!==qi||vs.morphNormals!==ea||vs.morphColors!==Rl||vs.toneMapping!==Aa||Fn.isWebGL2===!0&&vs.morphTargetsCount!==Yo)&&(aa=!0):(aa=!0,vs.__version=bt.version);let Nu=vs.currentProgram;aa===!0&&(Nu=Jd(bt,qe,Tt));let _g=!1,Kf=!1,Qh=!1;const ll=Nu.getUniforms(),Uu=vs.uniforms;if(mn.useProgram(Nu.program)&&(_g=!0,Kf=!0,Qh=!0),bt.id!==Te&&(Te=bt.id,Kf=!0),_g||j!==re){ll.setValue(Me,"projectionMatrix",re.projectionMatrix),ll.setValue(Me,"viewMatrix",re.matrixWorldInverse);const Pl=ll.map.cameraPosition;Pl!==void 0&&Pl.setValue(Me,Vi.setFromMatrixPosition(re.matrixWorld)),Fn.logarithmicDepthBuffer&&ll.setValue(Me,"logDepthBufFC",2/(Math.log(re.far+1)/Math.LN2)),(bt.isMeshPhongMaterial||bt.isMeshToonMaterial||bt.isMeshLambertMaterial||bt.isMeshBasicMaterial||bt.isMeshStandardMaterial||bt.isShaderMaterial)&&ll.setValue(Me,"isOrthographic",re.isOrthographicCamera===!0),j!==re&&(j=re,Kf=!0,Qh=!0)}if(Tt.isSkinnedMesh){ll.setOptional(Me,Tt,"bindMatrix"),ll.setOptional(Me,Tt,"bindMatrixInverse");const Pl=Tt.skeleton;Pl&&(Fn.floatVertexTextures?(Pl.boneTexture===null&&Pl.computeBoneTexture(),ll.setValue(Me,"boneTexture",Pl.boneTexture,kr),ll.setValue(Me,"boneTextureSize",Pl.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const ep=mt.morphAttributes;if((ep.position!==void 0||ep.normal!==void 0||ep.color!==void 0&&Fn.isWebGL2===!0)&&Pi.update(Tt,mt,Nu),(Kf||vs.receiveShadow!==Tt.receiveShadow)&&(vs.receiveShadow=Tt.receiveShadow,ll.setValue(Me,"receiveShadow",Tt.receiveShadow)),bt.isMeshGouraudMaterial&&bt.envMap!==null&&(Uu.envMap.value=Li,Uu.flipEnvMap.value=Li.isCubeTexture&&Li.isRenderTargetTexture===!1?-1:1),Kf&&(ll.setValue(Me,"toneMappingExposure",D.toneMappingExposure),vs.needsLights&&c_(Uu,Qh),Pr&&bt.fog===!0&&Hn.refreshFogUniforms(Uu,Pr),Hn.refreshMaterialUniforms(Uu,bt,Xt,qt,di),od.upload(Me,vg(vs),Uu,kr)),bt.isShaderMaterial&&bt.uniformsNeedUpdate===!0&&(od.upload(Me,vg(vs),Uu,kr),bt.uniformsNeedUpdate=!1),bt.isSpriteMaterial&&ll.setValue(Me,"center",Tt.center),ll.setValue(Me,"modelViewMatrix",Tt.modelViewMatrix),ll.setValue(Me,"normalMatrix",Tt.normalMatrix),ll.setValue(Me,"modelMatrix",Tt.matrixWorld),bt.isShaderMaterial||bt.isRawShaderMaterial){const Pl=bt.uniformsGroups;for(let tp=0,f_=Pl.length;tp<f_;tp++)if(Fn.isWebGL2){const xg=Pl[tp];Ii.update(xg,Nu),Ii.bind(xg,Nu)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Nu}function c_(re,qe){re.ambientLightColor.needsUpdate=qe,re.lightProbe.needsUpdate=qe,re.directionalLights.needsUpdate=qe,re.directionalLightShadows.needsUpdate=qe,re.pointLights.needsUpdate=qe,re.pointLightShadows.needsUpdate=qe,re.spotLights.needsUpdate=qe,re.spotLightShadows.needsUpdate=qe,re.rectAreaLights.needsUpdate=qe,re.hemisphereLights.needsUpdate=qe}function u_(re){return re.isMeshLambertMaterial||re.isMeshToonMaterial||re.isMeshPhongMaterial||re.isMeshStandardMaterial||re.isShadowMaterial||re.isShaderMaterial&&re.lights===!0}this.getActiveCubeFace=function(){return ne},this.getActiveMipmapLevel=function(){return ae},this.getRenderTarget=function(){return ue},this.setRenderTargetTextures=function(re,qe,mt){Er.get(re.texture).__webglTexture=qe,Er.get(re.depthTexture).__webglTexture=mt;const bt=Er.get(re);bt.__hasExternalTextures=!0,bt.__hasExternalTextures&&(bt.__autoAllocateDepthBuffer=mt===void 0,bt.__autoAllocateDepthBuffer||Yt.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),bt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(re,qe){const mt=Er.get(re);mt.__webglFramebuffer=qe,mt.__useDefaultFramebuffer=qe===void 0},this.setRenderTarget=function(re,qe=0,mt=0){ue=re,ne=qe,ae=mt;let bt=!0,Tt=null,Pr=!1,Qr=!1;if(re){const Li=Er.get(re);Li.__useDefaultFramebuffer!==void 0?(mn.bindFramebuffer(Me.FRAMEBUFFER,null),bt=!1):Li.__webglFramebuffer===void 0?kr.setupRenderTarget(re):Li.__hasExternalTextures&&kr.rebindTextures(re,Er.get(re.texture).__webglTexture,Er.get(re.depthTexture).__webglTexture);const ss=re.texture;(ss.isData3DTexture||ss.isDataArrayTexture||ss.isCompressedArrayTexture)&&(Qr=!0);const ji=Er.get(re).__webglFramebuffer;re.isWebGLCubeRenderTarget?(Array.isArray(ji[qe])?Tt=ji[qe][mt]:Tt=ji[qe],Pr=!0):Fn.isWebGL2&&re.samples>0&&kr.useMultisampledRTT(re)===!1?Tt=Er.get(re).__webglMultisampledFramebuffer:Array.isArray(ji)?Tt=ji[mt]:Tt=ji,ie.copy(re.viewport),rt.copy(re.scissor),Qt=re.scissorTest}else ie.copy(bn).multiplyScalar(Xt).floor(),rt.copy(Be).multiplyScalar(Xt).floor(),Qt=Gt;if(mn.bindFramebuffer(Me.FRAMEBUFFER,Tt)&&Fn.drawBuffers&&bt&&mn.drawBuffers(re,Tt),mn.viewport(ie),mn.scissor(rt),mn.setScissorTest(Qt),Pr){const Li=Er.get(re.texture);Me.framebufferTexture2D(Me.FRAMEBUFFER,Me.COLOR_ATTACHMENT0,Me.TEXTURE_CUBE_MAP_POSITIVE_X+qe,Li.__webglTexture,mt)}else if(Qr){const Li=Er.get(re.texture),ss=qe||0;Me.framebufferTextureLayer(Me.FRAMEBUFFER,Me.COLOR_ATTACHMENT0,Li.__webglTexture,mt||0,ss)}Te=-1},this.readRenderTargetPixels=function(re,qe,mt,bt,Tt,Pr,Qr){if(!(re&&re.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let gi=Er.get(re).__webglFramebuffer;if(re.isWebGLCubeRenderTarget&&Qr!==void 0&&(gi=gi[Qr]),gi){mn.bindFramebuffer(Me.FRAMEBUFFER,gi);try{const Li=re.texture,ss=Li.format,ji=Li.type;if(ss!==Zi&&Js.convert(ss)!==Me.getParameter(Me.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const qi=ji===xe&&(Yt.has("EXT_color_buffer_half_float")||Fn.isWebGL2&&Yt.has("EXT_color_buffer_float"));if(ji!==st&&Js.convert(ji)!==Me.getParameter(Me.IMPLEMENTATION_COLOR_READ_TYPE)&&!(ji===ti&&(Fn.isWebGL2||Yt.has("OES_texture_float")||Yt.has("WEBGL_color_buffer_float")))&&!qi){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}qe>=0&&qe<=re.width-bt&&mt>=0&&mt<=re.height-Tt&&Me.readPixels(qe,mt,bt,Tt,Js.convert(ss),Js.convert(ji),Pr)}finally{const Li=ue!==null?Er.get(ue).__webglFramebuffer:null;mn.bindFramebuffer(Me.FRAMEBUFFER,Li)}}},this.copyFramebufferToTexture=function(re,qe,mt=0){const bt=Math.pow(2,-mt),Tt=Math.floor(qe.image.width*bt),Pr=Math.floor(qe.image.height*bt);kr.setTexture2D(qe,0),Me.copyTexSubImage2D(Me.TEXTURE_2D,mt,0,0,re.x,re.y,Tt,Pr),mn.unbindTexture()},this.copyTextureToTexture=function(re,qe,mt,bt=0){const Tt=qe.image.width,Pr=qe.image.height,Qr=Js.convert(mt.format),gi=Js.convert(mt.type);kr.setTexture2D(mt,0),Me.pixelStorei(Me.UNPACK_FLIP_Y_WEBGL,mt.flipY),Me.pixelStorei(Me.UNPACK_PREMULTIPLY_ALPHA_WEBGL,mt.premultiplyAlpha),Me.pixelStorei(Me.UNPACK_ALIGNMENT,mt.unpackAlignment),qe.isDataTexture?Me.texSubImage2D(Me.TEXTURE_2D,bt,re.x,re.y,Tt,Pr,Qr,gi,qe.image.data):qe.isCompressedTexture?Me.compressedTexSubImage2D(Me.TEXTURE_2D,bt,re.x,re.y,qe.mipmaps[0].width,qe.mipmaps[0].height,Qr,qe.mipmaps[0].data):Me.texSubImage2D(Me.TEXTURE_2D,bt,re.x,re.y,Qr,gi,qe.image),bt===0&&mt.generateMipmaps&&Me.generateMipmap(Me.TEXTURE_2D),mn.unbindTexture()},this.copyTextureToTexture3D=function(re,qe,mt,bt,Tt=0){if(D.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Pr=re.max.x-re.min.x+1,Qr=re.max.y-re.min.y+1,gi=re.max.z-re.min.z+1,Li=Js.convert(bt.format),ss=Js.convert(bt.type);let ji;if(bt.isData3DTexture)kr.setTexture3D(bt,0),ji=Me.TEXTURE_3D;else if(bt.isDataArrayTexture)kr.setTexture2DArray(bt,0),ji=Me.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Me.pixelStorei(Me.UNPACK_FLIP_Y_WEBGL,bt.flipY),Me.pixelStorei(Me.UNPACK_PREMULTIPLY_ALPHA_WEBGL,bt.premultiplyAlpha),Me.pixelStorei(Me.UNPACK_ALIGNMENT,bt.unpackAlignment);const qi=Me.getParameter(Me.UNPACK_ROW_LENGTH),ea=Me.getParameter(Me.UNPACK_IMAGE_HEIGHT),Rl=Me.getParameter(Me.UNPACK_SKIP_PIXELS),Aa=Me.getParameter(Me.UNPACK_SKIP_ROWS),zc=Me.getParameter(Me.UNPACK_SKIP_IMAGES),Yo=mt.isCompressedTexture?mt.mipmaps[0]:mt.image;Me.pixelStorei(Me.UNPACK_ROW_LENGTH,Yo.width),Me.pixelStorei(Me.UNPACK_IMAGE_HEIGHT,Yo.height),Me.pixelStorei(Me.UNPACK_SKIP_PIXELS,re.min.x),Me.pixelStorei(Me.UNPACK_SKIP_ROWS,re.min.y),Me.pixelStorei(Me.UNPACK_SKIP_IMAGES,re.min.z),mt.isDataTexture||mt.isData3DTexture?Me.texSubImage3D(ji,Tt,qe.x,qe.y,qe.z,Pr,Qr,gi,Li,ss,Yo.data):mt.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Me.compressedTexSubImage3D(ji,Tt,qe.x,qe.y,qe.z,Pr,Qr,gi,Li,Yo.data)):Me.texSubImage3D(ji,Tt,qe.x,qe.y,qe.z,Pr,Qr,gi,Li,ss,Yo),Me.pixelStorei(Me.UNPACK_ROW_LENGTH,qi),Me.pixelStorei(Me.UNPACK_IMAGE_HEIGHT,ea),Me.pixelStorei(Me.UNPACK_SKIP_PIXELS,Rl),Me.pixelStorei(Me.UNPACK_SKIP_ROWS,Aa),Me.pixelStorei(Me.UNPACK_SKIP_IMAGES,zc),Tt===0&&bt.generateMipmaps&&Me.generateMipmap(ji),mn.unbindTexture()},this.initTexture=function(re){re.isCubeTexture?kr.setTextureCube(re,0):re.isData3DTexture?kr.setTexture3D(re,0):re.isDataArrayTexture||re.isCompressedArrayTexture?kr.setTexture2DArray(re,0):kr.setTexture2D(re,0),mn.unbindTexture()},this.resetState=function(){ne=0,ae=0,ue=null,mn.reset(),Wi.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return co}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===R?"display-p3":"srgb",t.unpackColorSpace=Xr.workingColorSpace===F?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===H?ro:$a}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===ro?H:Y}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class Ip extends Pp{}Ip.prototype.isWebGL1Renderer=!0;class ad{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Qn(e),this.density=t}clone(){return new ad(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class ld{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Qn(e),this.near=t,this.far=n}clone(){return new ld(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Lp extends ds{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class cd{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=bs,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=jr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,o=this.stride;r<o;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=jr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=jr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const sl=new $;class bu{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)sl.fromBufferAttribute(this,t),sl.applyMatrix4(e),this.setXYZ(t,sl.x,sl.y,sl.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)sl.fromBufferAttribute(this,t),sl.applyNormalMatrix(e),this.setXYZ(t,sl.x,sl.y,sl.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)sl.fromBufferAttribute(this,t),sl.transformDirection(e),this.setXYZ(t,sl.x,sl.y,sl.z);return this}setX(e,t){return this.normalized&&(t=zt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=zt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=zt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=zt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ho(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ho(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ho(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ho(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=zt(t,this.array),n=zt(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=zt(t,this.array),n=zt(n,this.array),r=zt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=zt(t,this.array),n=zt(n,this.array),r=zt(r,this.array),o=zt(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return new hs(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new bu(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class mh extends Oo{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Qn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let lf;const Rf=new $,cf=new $,uf=new $,ff=new Et,Pf=new Et,Dp=new _i,ud=new $,If=new $,fd=new $,Op=new Et,gh=new Et,Np=new Et;class Up extends ds{constructor(e=new mh){if(super(),this.isSprite=!0,this.type="Sprite",lf===void 0){lf=new wi;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new cd(t,5);lf.setIndex([0,1,2,0,2,3]),lf.setAttribute("position",new bu(n,3,0,!1)),lf.setAttribute("uv",new bu(n,2,3,!1))}this.geometry=lf,this.material=e,this.center=new Et(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),cf.setFromMatrixScale(this.matrixWorld),Dp.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),uf.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&cf.multiplyScalar(-uf.z);const n=this.material.rotation;let r,o;n!==0&&(o=Math.cos(n),r=Math.sin(n));const l=this.center;dd(ud.set(-.5,-.5,0),uf,l,cf,r,o),dd(If.set(.5,-.5,0),uf,l,cf,r,o),dd(fd.set(.5,.5,0),uf,l,cf,r,o),Op.set(0,0),gh.set(1,0),Np.set(1,1);let c=e.ray.intersectTriangle(ud,If,fd,!1,Rf);if(c===null&&(dd(If.set(-.5,.5,0),uf,l,cf,r,o),gh.set(0,1),c=e.ray.intersectTriangle(ud,fd,If,!1,Rf),c===null))return;const f=e.ray.origin.distanceTo(Rf);f<e.near||f>e.far||t.push({distance:f,point:Rf.clone(),uv:na.getInterpolation(Rf,ud,If,fd,Op,gh,Np,new Et),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function dd(a,e,t,n,r,o){ff.subVectors(a,t).addScalar(.5).multiply(n),r!==void 0?(Pf.x=o*ff.x-r*ff.y,Pf.y=r*ff.x+o*ff.y):Pf.copy(ff),a.copy(e),a.x+=Pf.x,a.y+=Pf.y,a.applyMatrix4(Dp)}const hd=new $,Fp=new $;class zp extends ds{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const o=t[n];this.addLevel(o.object.clone(),o.distance,o.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const r=this.levels;let o;for(o=0;o<r.length&&!(t<r[o].distance);o++);return r.splice(o,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let o=t[n].distance;if(t[n].object.visible&&(o-=o*t[n].hysteresis),e<o)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){hd.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(hd);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){hd.setFromMatrixPosition(e.matrixWorld),Fp.setFromMatrixPosition(this.matrixWorld);const n=hd.distanceTo(Fp)/e.zoom;t[0].object.visible=!0;let r,o;for(r=1,o=t.length;r<o;r++){let l=t[r].distance;if(t[r].object.visible&&(l-=l*t[r].hysteresis),n>=l)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<o;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,o=n.length;r<o;r++){const l=n[r];t.object.levels.push({object:l.object.uuid,distance:l.distance,hysteresis:l.hysteresis})}return t}}const Bp=new $,kp=new Dt,Hp=new Dt,xv=new $,Gp=new _i,pd=new $,vh=new ka,Vp=new _i,yh=new Ll;class Wp extends es{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=zi,this.bindMatrix=new _i,this.bindMatrixInverse=new _i,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ki),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,pd),this.boundingBox.expandByPoint(pd)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ka),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,pd),this.boundingSphere.expandByPoint(pd)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),vh.copy(this.boundingSphere),vh.applyMatrix4(r),e.ray.intersectsSphere(vh)!==!1&&(Vp.copy(r).invert(),yh.copy(e.ray).applyMatrix4(Vp),!(this.boundingBox!==null&&yh.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,yh)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Dt,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===zi?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Ss?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;kp.fromBufferAttribute(r.attributes.skinIndex,e),Hp.fromBufferAttribute(r.attributes.skinWeight,e),Bp.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const l=Hp.getComponent(o);if(l!==0){const c=kp.getComponent(o);Gp.multiplyMatrices(n.bones[c].matrixWorld,n.boneInverses[c]),t.addScaledVector(xv.copy(Bp).applyMatrix4(Gp),l)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class _h extends ds{constructor(){super(),this.isBone=!0,this.type="Bone"}}class df extends je{constructor(e=null,t=1,n=1,r,o,l,c,f,h=Q,g=Q,_,x){super(null,l,c,f,h,g,r,o,_,x),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const jp=new _i,Sv=new _i;class md{constructor(e=[],t=[]){this.uuid=jr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new _i)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new _i;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let o=0,l=e.length;o<l;o++){const c=e[o]?e[o].matrixWorld:Sv;jp.multiplyMatrices(c,t[o]),jp.toArray(n,o*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new md(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=ta(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new df(t,e,e,Zi,ti);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const o=e.bones[n];let l=t[o];l===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),l=new _h),this.bones.push(l),this.boneInverses.push(new _i().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,o=t.length;r<o;r++){const l=t[r];e.bones.push(l.uuid);const c=n[r];e.boneInverses.push(c.toArray())}return e}}class hf extends hs{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const pf=new _i,Xp=new _i,gd=[],Zp=new ki,Mv=new _i,Lf=new es,Df=new ka;class Yp extends es{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new hf(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,Mv)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new ki),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,pf),Zp.copy(e.boundingBox).applyMatrix4(pf),this.boundingBox.union(Zp)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new ka),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,pf),Df.copy(e.boundingSphere).applyMatrix4(pf),this.boundingSphere.union(Df)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(Lf.geometry=this.geometry,Lf.material=this.material,Lf.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Df.copy(this.boundingSphere),Df.applyMatrix4(n),e.ray.intersectsSphere(Df)!==!1))for(let o=0;o<r;o++){this.getMatrixAt(o,pf),Xp.multiplyMatrices(n,pf),Lf.matrixWorld=Xp,Lf.raycast(e,gd);for(let l=0,c=gd.length;l<c;l++){const f=gd[l];f.instanceId=o,f.object=this,t.push(f)}gd.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new hf(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class ol extends Oo{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Qn(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Kp=new $,qp=new $,Jp=new _i,xh=new Ll,vd=new ka;class tu extends ds{constructor(e=new wi,t=new ol){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let r=1,o=t.count;r<o;r++)Kp.fromBufferAttribute(t,r-1),qp.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=Kp.distanceTo(qp);e.setAttribute("lineDistance",new Cr(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,o=e.params.Line.threshold,l=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),vd.copy(n.boundingSphere),vd.applyMatrix4(r),vd.radius+=o,e.ray.intersectsSphere(vd)===!1)return;Jp.copy(r).invert(),xh.copy(e.ray).applyMatrix4(Jp);const c=o/((this.scale.x+this.scale.y+this.scale.z)/3),f=c*c,h=new $,g=new $,_=new $,x=new $,S=this.isLineSegments?2:1,E=n.index,T=n.attributes.position;if(E!==null){const b=Math.max(0,l.start),B=Math.min(E.count,l.start+l.count);for(let D=b,W=B-1;D<W;D+=S){const ne=E.getX(D),ae=E.getX(D+1);if(h.fromBufferAttribute(T,ne),g.fromBufferAttribute(T,ae),xh.distanceSqToSegment(h,g,x,_)>f)continue;x.applyMatrix4(this.matrixWorld);const Te=e.ray.origin.distanceTo(x);Te<e.near||Te>e.far||t.push({distance:Te,point:_.clone().applyMatrix4(this.matrixWorld),index:D,face:null,faceIndex:null,object:this})}}else{const b=Math.max(0,l.start),B=Math.min(T.count,l.start+l.count);for(let D=b,W=B-1;D<W;D+=S){if(h.fromBufferAttribute(T,D),g.fromBufferAttribute(T,D+1),xh.distanceSqToSegment(h,g,x,_)>f)continue;x.applyMatrix4(this.matrixWorld);const ae=e.ray.origin.distanceTo(x);ae<e.near||ae>e.far||t.push({distance:ae,point:_.clone().applyMatrix4(this.matrixWorld),index:D,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=r.length;o<l;o++){const c=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=o}}}}}const $p=new $,Qp=new $;class gc extends tu{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let r=0,o=t.count;r<o;r+=2)$p.fromBufferAttribute(t,r),Qp.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+$p.distanceTo(Qp);e.setAttribute("lineDistance",new Cr(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class em extends tu{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Sh extends Oo{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Qn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const tm=new _i,Mh=new Ll,yd=new ka,_d=new $;class nm extends ds{constructor(e=new wi,t=new Sh){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,o=e.params.Points.threshold,l=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),yd.copy(n.boundingSphere),yd.applyMatrix4(r),yd.radius+=o,e.ray.intersectsSphere(yd)===!1)return;tm.copy(r).invert(),Mh.copy(e.ray).applyMatrix4(tm);const c=o/((this.scale.x+this.scale.y+this.scale.z)/3),f=c*c,h=n.index,_=n.attributes.position;if(h!==null){const x=Math.max(0,l.start),S=Math.min(h.count,l.start+l.count);for(let E=x,I=S;E<I;E++){const T=h.getX(E);_d.fromBufferAttribute(_,T),rm(_d,T,f,r,e,t,this)}}else{const x=Math.max(0,l.start),S=Math.min(_.count,l.start+l.count);for(let E=x,I=S;E<I;E++)_d.fromBufferAttribute(_,E),rm(_d,E,f,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=r.length;o<l;o++){const c=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=o}}}}}function rm(a,e,t,n,r,o,l){const c=Mh.distanceSqToPoint(a);if(c<t){const f=new $;Mh.closestPointToPoint(a,f),f.applyMatrix4(n);const h=r.ray.origin.distanceTo(f);if(h<r.near||h>r.far)return;o.push({distance:h,distanceToRay:Math.sqrt(c),point:f,index:e,face:null,object:l})}}class bv extends je{constructor(e,t,n,r,o,l,c,f,h){super(e,t,n,r,o,l,c,f,h),this.isVideoTexture=!0,this.minFilter=l!==void 0?l:Ht,this.magFilter=o!==void 0?o:Ht,this.generateMipmaps=!1;const g=this;function _(){g.needsUpdate=!0,e.requestVideoFrameCallback(_)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(_)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class wv extends je{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Q,this.minFilter=Q,this.generateMipmaps=!1,this.needsUpdate=!0}}class xd extends je{constructor(e,t,n,r,o,l,c,f,h,g,_,x){super(null,l,c,f,h,g,r,o,_,x),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Ev extends xd{constructor(e,t,n,r,o,l){super(e,t,n,o,l),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Ln}}class Tv extends xd{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,ii),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Av extends je{constructor(e,t,n,r,o,l,c,f,h){super(e,t,n,r,o,l,c,f,h),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ql{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),o=0;t.push(0);for(let l=1;l<=e;l++)n=this.getPoint(l/e),o+=n.distanceTo(r),t.push(o),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const o=n.length;let l;t?l=t:l=e*n[o-1];let c=0,f=o-1,h;for(;c<=f;)if(r=Math.floor(c+(f-c)/2),h=n[r]-l,h<0)c=r+1;else if(h>0)f=r-1;else{f=r;break}if(r=f,n[r]===l)return r/(o-1);const g=n[r],x=n[r+1]-g,S=(l-g)/x;return(r+S)/(o-1)}getTangent(e,t){let r=e-1e-4,o=e+1e-4;r<0&&(r=0),o>1&&(o=1);const l=this.getPoint(r),c=this.getPoint(o),f=t||(l.isVector2?new Et:new $);return f.copy(c).sub(l).normalize(),f}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new $,r=[],o=[],l=[],c=new $,f=new _i;for(let S=0;S<=e;S++){const E=S/e;r[S]=this.getTangentAt(E,new $)}o[0]=new $,l[0]=new $;let h=Number.MAX_VALUE;const g=Math.abs(r[0].x),_=Math.abs(r[0].y),x=Math.abs(r[0].z);g<=h&&(h=g,n.set(1,0,0)),_<=h&&(h=_,n.set(0,1,0)),x<=h&&n.set(0,0,1),c.crossVectors(r[0],n).normalize(),o[0].crossVectors(r[0],c),l[0].crossVectors(r[0],o[0]);for(let S=1;S<=e;S++){if(o[S]=o[S-1].clone(),l[S]=l[S-1].clone(),c.crossVectors(r[S-1],r[S]),c.length()>Number.EPSILON){c.normalize();const E=Math.acos(Rs(r[S-1].dot(r[S]),-1,1));o[S].applyMatrix4(f.makeRotationAxis(c,E))}l[S].crossVectors(r[S],o[S])}if(t===!0){let S=Math.acos(Rs(o[0].dot(o[e]),-1,1));S/=e,r[0].dot(c.crossVectors(o[0],o[e]))>0&&(S=-S);for(let E=1;E<=e;E++)o[E].applyMatrix4(f.makeRotationAxis(r[E],S*E)),l[E].crossVectors(r[E],o[E])}return{tangents:r,normals:o,binormals:l}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Sd extends Ql{constructor(e=0,t=0,n=1,r=1,o=0,l=Math.PI*2,c=!1,f=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=o,this.aEndAngle=l,this.aClockwise=c,this.aRotation=f}getPoint(e,t){const n=t||new Et,r=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const l=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=r;for(;o>r;)o-=r;o<Number.EPSILON&&(l?o=0:o=r),this.aClockwise===!0&&!l&&(o===r?o=-r:o=o-r);const c=this.aStartAngle+e*o;let f=this.aX+this.xRadius*Math.cos(c),h=this.aY+this.yRadius*Math.sin(c);if(this.aRotation!==0){const g=Math.cos(this.aRotation),_=Math.sin(this.aRotation),x=f-this.aX,S=h-this.aY;f=x*g-S*_+this.aX,h=x*_+S*g+this.aY}return n.set(f,h)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class im extends Sd{constructor(e,t,n,r,o,l){super(e,t,n,n,r,o,l),this.isArcCurve=!0,this.type="ArcCurve"}}function bh(){let a=0,e=0,t=0,n=0;function r(o,l,c,f){a=o,e=c,t=-3*o+3*l-2*c-f,n=2*o-2*l+c+f}return{initCatmullRom:function(o,l,c,f,h){r(l,c,h*(c-o),h*(f-l))},initNonuniformCatmullRom:function(o,l,c,f,h,g,_){let x=(l-o)/h-(c-o)/(h+g)+(c-l)/g,S=(c-l)/g-(f-l)/(g+_)+(f-c)/_;x*=g,S*=g,r(l,c,x,S)},calc:function(o){const l=o*o,c=l*o;return a+e*o+t*l+n*c}}}const Md=new $,wh=new bh,Eh=new bh,Th=new bh;class sm extends Ql{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new $){const n=t,r=this.points,o=r.length,l=(o-(this.closed?0:1))*e;let c=Math.floor(l),f=l-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/o)+1)*o:f===0&&c===o-1&&(c=o-2,f=1);let h,g;this.closed||c>0?h=r[(c-1)%o]:(Md.subVectors(r[0],r[1]).add(r[0]),h=Md);const _=r[c%o],x=r[(c+1)%o];if(this.closed||c+2<o?g=r[(c+2)%o]:(Md.subVectors(r[o-1],r[o-2]).add(r[o-1]),g=Md),this.curveType==="centripetal"||this.curveType==="chordal"){const S=this.curveType==="chordal"?.5:.25;let E=Math.pow(h.distanceToSquared(_),S),I=Math.pow(_.distanceToSquared(x),S),T=Math.pow(x.distanceToSquared(g),S);I<1e-4&&(I=1),E<1e-4&&(E=I),T<1e-4&&(T=I),wh.initNonuniformCatmullRom(h.x,_.x,x.x,g.x,E,I,T),Eh.initNonuniformCatmullRom(h.y,_.y,x.y,g.y,E,I,T),Th.initNonuniformCatmullRom(h.z,_.z,x.z,g.z,E,I,T)}else this.curveType==="catmullrom"&&(wh.initCatmullRom(h.x,_.x,x.x,g.x,this.tension),Eh.initCatmullRom(h.y,_.y,x.y,g.y,this.tension),Th.initCatmullRom(h.z,_.z,x.z,g.z,this.tension));return n.set(wh.calc(f),Eh.calc(f),Th.calc(f)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new $().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function om(a,e,t,n,r){const o=(n-e)*.5,l=(r-t)*.5,c=a*a,f=a*c;return(2*t-2*n+o+l)*f+(-3*t+3*n-2*o-l)*c+o*a+t}function Cv(a,e){const t=1-a;return t*t*e}function Rv(a,e){return 2*(1-a)*a*e}function Pv(a,e){return a*a*e}function Of(a,e,t,n){return Cv(a,e)+Rv(a,t)+Pv(a,n)}function Iv(a,e){const t=1-a;return t*t*t*e}function Lv(a,e){const t=1-a;return 3*t*t*a*e}function Dv(a,e){return 3*(1-a)*a*a*e}function Ov(a,e){return a*a*a*e}function Nf(a,e,t,n,r){return Iv(a,e)+Lv(a,t)+Dv(a,n)+Ov(a,r)}class Ah extends Ql{constructor(e=new Et,t=new Et,n=new Et,r=new Et){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Et){const n=t,r=this.v0,o=this.v1,l=this.v2,c=this.v3;return n.set(Nf(e,r.x,o.x,l.x,c.x),Nf(e,r.y,o.y,l.y,c.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class am extends Ql{constructor(e=new $,t=new $,n=new $,r=new $){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new $){const n=t,r=this.v0,o=this.v1,l=this.v2,c=this.v3;return n.set(Nf(e,r.x,o.x,l.x,c.x),Nf(e,r.y,o.y,l.y,c.y),Nf(e,r.z,o.z,l.z,c.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Ch extends Ql{constructor(e=new Et,t=new Et){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Et){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Et){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class lm extends Ql{constructor(e=new $,t=new $){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new $){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new $){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Rh extends Ql{constructor(e=new Et,t=new Et,n=new Et){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Et){const n=t,r=this.v0,o=this.v1,l=this.v2;return n.set(Of(e,r.x,o.x,l.x),Of(e,r.y,o.y,l.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ph extends Ql{constructor(e=new $,t=new $,n=new $){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new $){const n=t,r=this.v0,o=this.v1,l=this.v2;return n.set(Of(e,r.x,o.x,l.x),Of(e,r.y,o.y,l.y),Of(e,r.z,o.z,l.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ih extends Ql{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Et){const n=t,r=this.points,o=(r.length-1)*e,l=Math.floor(o),c=o-l,f=r[l===0?l:l-1],h=r[l],g=r[l>r.length-2?r.length-1:l+1],_=r[l>r.length-3?r.length-1:l+2];return n.set(om(c,f.x,h.x,g.x,_.x),om(c,f.y,h.y,g.y,_.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new Et().fromArray(r))}return this}}var bd=Object.freeze({__proto__:null,ArcCurve:im,CatmullRomCurve3:sm,CubicBezierCurve:Ah,CubicBezierCurve3:am,EllipseCurve:Sd,LineCurve:Ch,LineCurve3:lm,QuadraticBezierCurve:Rh,QuadraticBezierCurve3:Ph,SplineCurve:Ih});class cm extends Ql{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new bd[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let o=0;for(;o<r.length;){if(r[o]>=n){const l=r[o]-n,c=this.curves[o],f=c.getLength(),h=f===0?0:1-l/f;return c.getPointAt(h,t)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,o=this.curves;r<o.length;r++){const l=o[r],c=l.isEllipseCurve?e*2:l.isLineCurve||l.isLineCurve3?1:l.isSplineCurve?e*l.points.length:e,f=l.getPoints(c);for(let h=0;h<f.length;h++){const g=f[h];n&&n.equals(g)||(t.push(g),n=g)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(new bd[r.type]().fromJSON(r))}return this}}class Uf extends cm{constructor(e){super(),this.type="Path",this.currentPoint=new Et,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new Ch(this.currentPoint.clone(),new Et(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const o=new Rh(this.currentPoint.clone(),new Et(e,t),new Et(n,r));return this.curves.push(o),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,o,l){const c=new Ah(this.currentPoint.clone(),new Et(e,t),new Et(n,r),new Et(o,l));return this.curves.push(c),this.currentPoint.set(o,l),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new Ih(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,o,l){const c=this.currentPoint.x,f=this.currentPoint.y;return this.absarc(e+c,t+f,n,r,o,l),this}absarc(e,t,n,r,o,l){return this.absellipse(e,t,n,n,r,o,l),this}ellipse(e,t,n,r,o,l,c,f){const h=this.currentPoint.x,g=this.currentPoint.y;return this.absellipse(e+h,t+g,n,r,o,l,c,f),this}absellipse(e,t,n,r,o,l,c,f){const h=new Sd(e,t,n,r,o,l,c,f);if(this.curves.length>0){const _=h.getPoint(0);_.equals(this.currentPoint)||this.lineTo(_.x,_.y)}this.curves.push(h);const g=h.getPoint(1);return this.currentPoint.copy(g),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Ff extends wi{constructor(e=[new Et(0,-.5),new Et(.5,0),new Et(0,.5)],t=12,n=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=Rs(r,0,Math.PI*2);const o=[],l=[],c=[],f=[],h=[],g=1/t,_=new $,x=new Et,S=new $,E=new $,I=new $;let T=0,b=0;for(let B=0;B<=e.length-1;B++)switch(B){case 0:T=e[B+1].x-e[B].x,b=e[B+1].y-e[B].y,S.x=b*1,S.y=-T,S.z=b*0,I.copy(S),S.normalize(),f.push(S.x,S.y,S.z);break;case e.length-1:f.push(I.x,I.y,I.z);break;default:T=e[B+1].x-e[B].x,b=e[B+1].y-e[B].y,S.x=b*1,S.y=-T,S.z=b*0,E.copy(S),S.x+=I.x,S.y+=I.y,S.z+=I.z,S.normalize(),f.push(S.x,S.y,S.z),I.copy(E)}for(let B=0;B<=t;B++){const D=n+B*g*r,W=Math.sin(D),ne=Math.cos(D);for(let ae=0;ae<=e.length-1;ae++){_.x=e[ae].x*W,_.y=e[ae].y,_.z=e[ae].x*ne,l.push(_.x,_.y,_.z),x.x=B/t,x.y=ae/(e.length-1),c.push(x.x,x.y);const ue=f[3*ae+0]*W,Te=f[3*ae+1],j=f[3*ae+0]*ne;h.push(ue,Te,j)}}for(let B=0;B<t;B++)for(let D=0;D<e.length-1;D++){const W=D+B*e.length,ne=W,ae=W+e.length,ue=W+e.length+1,Te=W+1;o.push(ne,ae,Te),o.push(ue,Te,ae)}this.setIndex(o),this.setAttribute("position",new Cr(l,3)),this.setAttribute("uv",new Cr(c,2)),this.setAttribute("normal",new Cr(h,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ff(e.points,e.segments,e.phiStart,e.phiLength)}}class wd extends Ff{constructor(e=1,t=1,n=4,r=8){const o=new Uf;o.absarc(0,-t/2,e,Math.PI*1.5,0),o.absarc(0,t/2,e,0,Math.PI*.5),super(o.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new wd(e.radius,e.length,e.capSegments,e.radialSegments)}}class Ed extends wi{constructor(e=1,t=32,n=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const o=[],l=[],c=[],f=[],h=new $,g=new Et;l.push(0,0,0),c.push(0,0,1),f.push(.5,.5);for(let _=0,x=3;_<=t;_++,x+=3){const S=n+_/t*r;h.x=e*Math.cos(S),h.y=e*Math.sin(S),l.push(h.x,h.y,h.z),c.push(0,0,1),g.x=(l[x]/e+1)/2,g.y=(l[x+1]/e+1)/2,f.push(g.x,g.y)}for(let _=1;_<=t;_++)o.push(_,_+1,0);this.setIndex(o),this.setAttribute("position",new Cr(l,3)),this.setAttribute("normal",new Cr(c,3)),this.setAttribute("uv",new Cr(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ed(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class mf extends wi{constructor(e=1,t=1,n=1,r=32,o=1,l=!1,c=0,f=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:o,openEnded:l,thetaStart:c,thetaLength:f};const h=this;r=Math.floor(r),o=Math.floor(o);const g=[],_=[],x=[],S=[];let E=0;const I=[],T=n/2;let b=0;B(),l===!1&&(e>0&&D(!0),t>0&&D(!1)),this.setIndex(g),this.setAttribute("position",new Cr(_,3)),this.setAttribute("normal",new Cr(x,3)),this.setAttribute("uv",new Cr(S,2));function B(){const W=new $,ne=new $;let ae=0;const ue=(t-e)/n;for(let Te=0;Te<=o;Te++){const j=[],ie=Te/o,rt=ie*(t-e)+e;for(let Qt=0;Qt<=r;Qt++){const _n=Qt/r,Ie=_n*f+c,Mt=Math.sin(Ie),qt=Math.cos(Ie);ne.x=rt*Mt,ne.y=-ie*n+T,ne.z=rt*qt,_.push(ne.x,ne.y,ne.z),W.set(Mt,ue,qt).normalize(),x.push(W.x,W.y,W.z),S.push(_n,1-ie),j.push(E++)}I.push(j)}for(let Te=0;Te<r;Te++)for(let j=0;j<o;j++){const ie=I[j][Te],rt=I[j+1][Te],Qt=I[j+1][Te+1],_n=I[j][Te+1];g.push(ie,rt,_n),g.push(rt,Qt,_n),ae+=6}h.addGroup(b,ae,0),b+=ae}function D(W){const ne=E,ae=new Et,ue=new $;let Te=0;const j=W===!0?e:t,ie=W===!0?1:-1;for(let Qt=1;Qt<=r;Qt++)_.push(0,T*ie,0),x.push(0,ie,0),S.push(.5,.5),E++;const rt=E;for(let Qt=0;Qt<=r;Qt++){const Ie=Qt/r*f+c,Mt=Math.cos(Ie),qt=Math.sin(Ie);ue.x=j*qt,ue.y=T*ie,ue.z=j*Mt,_.push(ue.x,ue.y,ue.z),x.push(0,ie,0),ae.x=Mt*.5+.5,ae.y=qt*.5*ie+.5,S.push(ae.x,ae.y),E++}for(let Qt=0;Qt<r;Qt++){const _n=ne+Qt,Ie=rt+Qt;W===!0?g.push(Ie,Ie+1,_n):g.push(Ie+1,Ie,_n),Te+=3}h.addGroup(b,Te,W===!0?1:2),b+=Te}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mf(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Td extends mf{constructor(e=1,t=1,n=32,r=1,o=!1,l=0,c=Math.PI*2){super(0,e,t,n,r,o,l,c),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:o,thetaStart:l,thetaLength:c}}static fromJSON(e){return new Td(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class nu extends wi{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const o=[],l=[];c(r),h(n),g(),this.setAttribute("position",new Cr(o,3)),this.setAttribute("normal",new Cr(o.slice(),3)),this.setAttribute("uv",new Cr(l,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function c(B){const D=new $,W=new $,ne=new $;for(let ae=0;ae<t.length;ae+=3)S(t[ae+0],D),S(t[ae+1],W),S(t[ae+2],ne),f(D,W,ne,B)}function f(B,D,W,ne){const ae=ne+1,ue=[];for(let Te=0;Te<=ae;Te++){ue[Te]=[];const j=B.clone().lerp(W,Te/ae),ie=D.clone().lerp(W,Te/ae),rt=ae-Te;for(let Qt=0;Qt<=rt;Qt++)Qt===0&&Te===ae?ue[Te][Qt]=j:ue[Te][Qt]=j.clone().lerp(ie,Qt/rt)}for(let Te=0;Te<ae;Te++)for(let j=0;j<2*(ae-Te)-1;j++){const ie=Math.floor(j/2);j%2===0?(x(ue[Te][ie+1]),x(ue[Te+1][ie]),x(ue[Te][ie])):(x(ue[Te][ie+1]),x(ue[Te+1][ie+1]),x(ue[Te+1][ie]))}}function h(B){const D=new $;for(let W=0;W<o.length;W+=3)D.x=o[W+0],D.y=o[W+1],D.z=o[W+2],D.normalize().multiplyScalar(B),o[W+0]=D.x,o[W+1]=D.y,o[W+2]=D.z}function g(){const B=new $;for(let D=0;D<o.length;D+=3){B.x=o[D+0],B.y=o[D+1],B.z=o[D+2];const W=T(B)/2/Math.PI+.5,ne=b(B)/Math.PI+.5;l.push(W,1-ne)}E(),_()}function _(){for(let B=0;B<l.length;B+=6){const D=l[B+0],W=l[B+2],ne=l[B+4],ae=Math.max(D,W,ne),ue=Math.min(D,W,ne);ae>.9&&ue<.1&&(D<.2&&(l[B+0]+=1),W<.2&&(l[B+2]+=1),ne<.2&&(l[B+4]+=1))}}function x(B){o.push(B.x,B.y,B.z)}function S(B,D){const W=B*3;D.x=e[W+0],D.y=e[W+1],D.z=e[W+2]}function E(){const B=new $,D=new $,W=new $,ne=new $,ae=new Et,ue=new Et,Te=new Et;for(let j=0,ie=0;j<o.length;j+=9,ie+=6){B.set(o[j+0],o[j+1],o[j+2]),D.set(o[j+3],o[j+4],o[j+5]),W.set(o[j+6],o[j+7],o[j+8]),ae.set(l[ie+0],l[ie+1]),ue.set(l[ie+2],l[ie+3]),Te.set(l[ie+4],l[ie+5]),ne.copy(B).add(D).add(W).divideScalar(3);const rt=T(ne);I(ae,ie+0,B,rt),I(ue,ie+2,D,rt),I(Te,ie+4,W,rt)}}function I(B,D,W,ne){ne<0&&B.x===1&&(l[D]=B.x-1),W.x===0&&W.z===0&&(l[D]=ne/2/Math.PI+.5)}function T(B){return Math.atan2(B.z,-B.x)}function b(B){return Math.atan2(-B.y,Math.sqrt(B.x*B.x+B.z*B.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nu(e.vertices,e.indices,e.radius,e.details)}}class Ad extends nu{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,l,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ad(e.radius,e.detail)}}const Cd=new $,Rd=new $,Lh=new $,Pd=new na;class um extends wi{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),o=Math.cos(xo*t),l=e.getIndex(),c=e.getAttribute("position"),f=l?l.count:c.count,h=[0,0,0],g=["a","b","c"],_=new Array(3),x={},S=[];for(let E=0;E<f;E+=3){l?(h[0]=l.getX(E),h[1]=l.getX(E+1),h[2]=l.getX(E+2)):(h[0]=E,h[1]=E+1,h[2]=E+2);const{a:I,b:T,c:b}=Pd;if(I.fromBufferAttribute(c,h[0]),T.fromBufferAttribute(c,h[1]),b.fromBufferAttribute(c,h[2]),Pd.getNormal(Lh),_[0]=`${Math.round(I.x*r)},${Math.round(I.y*r)},${Math.round(I.z*r)}`,_[1]=`${Math.round(T.x*r)},${Math.round(T.y*r)},${Math.round(T.z*r)}`,_[2]=`${Math.round(b.x*r)},${Math.round(b.y*r)},${Math.round(b.z*r)}`,!(_[0]===_[1]||_[1]===_[2]||_[2]===_[0]))for(let B=0;B<3;B++){const D=(B+1)%3,W=_[B],ne=_[D],ae=Pd[g[B]],ue=Pd[g[D]],Te=`${W}_${ne}`,j=`${ne}_${W}`;j in x&&x[j]?(Lh.dot(x[j].normal)<=o&&(S.push(ae.x,ae.y,ae.z),S.push(ue.x,ue.y,ue.z)),x[j]=null):Te in x||(x[Te]={index0:h[B],index1:h[D],normal:Lh.clone()})}}for(const E in x)if(x[E]){const{index0:I,index1:T}=x[E];Cd.fromBufferAttribute(c,I),Rd.fromBufferAttribute(c,T),S.push(Cd.x,Cd.y,Cd.z),S.push(Rd.x,Rd.y,Rd.z)}this.setAttribute("position",new Cr(S,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class wu extends Uf{constructor(e){super(e),this.uuid=jr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(new Uf().fromJSON(r))}return this}}const Nv={triangulate:function(a,e,t=2){const n=e&&e.length,r=n?e[0]*t:a.length;let o=fm(a,0,r,t,!0);const l=[];if(!o||o.next===o.prev)return l;let c,f,h,g,_,x,S;if(n&&(o=kv(a,e,o,t)),a.length>80*t){c=h=a[0],f=g=a[1];for(let E=t;E<r;E+=t)_=a[E],x=a[E+1],_<c&&(c=_),x<f&&(f=x),_>h&&(h=_),x>g&&(g=x);S=Math.max(h-c,g-f),S=S!==0?32767/S:0}return zf(o,l,t,c,f,S,0),l}};function fm(a,e,t,n,r){let o,l;if(r===Jv(a,e,t,n)>0)for(o=e;o<t;o+=n)l=pm(o,a[o],a[o+1],l);else for(o=t-n;o>=e;o-=n)l=pm(o,a[o],a[o+1],l);return l&&Id(l,l.next)&&(kf(l),l=l.next),l}function Eu(a,e){if(!a)return a;e||(e=a);let t=a,n;do if(n=!1,!t.steiner&&(Id(t,t.next)||zo(t.prev,t,t.next)===0)){if(kf(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function zf(a,e,t,n,r,o,l){if(!a)return;!l&&o&&jv(a,n,r,o);let c=a,f,h;for(;a.prev!==a.next;){if(f=a.prev,h=a.next,o?Fv(a,n,r,o):Uv(a)){e.push(f.i/t|0),e.push(a.i/t|0),e.push(h.i/t|0),kf(a),a=h.next,c=h.next;continue}if(a=h,a===c){l?l===1?(a=zv(Eu(a),e,t),zf(a,e,t,n,r,o,2)):l===2&&Bv(a,e,t,n,r,o):zf(Eu(a),e,t,n,r,o,1);break}}}function Uv(a){const e=a.prev,t=a,n=a.next;if(zo(e,t,n)>=0)return!1;const r=e.x,o=t.x,l=n.x,c=e.y,f=t.y,h=n.y,g=r<o?r<l?r:l:o<l?o:l,_=c<f?c<h?c:h:f<h?f:h,x=r>o?r>l?r:l:o>l?o:l,S=c>f?c>h?c:h:f>h?f:h;let E=n.next;for(;E!==e;){if(E.x>=g&&E.x<=x&&E.y>=_&&E.y<=S&&gf(r,c,o,f,l,h,E.x,E.y)&&zo(E.prev,E,E.next)>=0)return!1;E=E.next}return!0}function Fv(a,e,t,n){const r=a.prev,o=a,l=a.next;if(zo(r,o,l)>=0)return!1;const c=r.x,f=o.x,h=l.x,g=r.y,_=o.y,x=l.y,S=c<f?c<h?c:h:f<h?f:h,E=g<_?g<x?g:x:_<x?_:x,I=c>f?c>h?c:h:f>h?f:h,T=g>_?g>x?g:x:_>x?_:x,b=Dh(S,E,e,t,n),B=Dh(I,T,e,t,n);let D=a.prevZ,W=a.nextZ;for(;D&&D.z>=b&&W&&W.z<=B;){if(D.x>=S&&D.x<=I&&D.y>=E&&D.y<=T&&D!==r&&D!==l&&gf(c,g,f,_,h,x,D.x,D.y)&&zo(D.prev,D,D.next)>=0||(D=D.prevZ,W.x>=S&&W.x<=I&&W.y>=E&&W.y<=T&&W!==r&&W!==l&&gf(c,g,f,_,h,x,W.x,W.y)&&zo(W.prev,W,W.next)>=0))return!1;W=W.nextZ}for(;D&&D.z>=b;){if(D.x>=S&&D.x<=I&&D.y>=E&&D.y<=T&&D!==r&&D!==l&&gf(c,g,f,_,h,x,D.x,D.y)&&zo(D.prev,D,D.next)>=0)return!1;D=D.prevZ}for(;W&&W.z<=B;){if(W.x>=S&&W.x<=I&&W.y>=E&&W.y<=T&&W!==r&&W!==l&&gf(c,g,f,_,h,x,W.x,W.y)&&zo(W.prev,W,W.next)>=0)return!1;W=W.nextZ}return!0}function zv(a,e,t){let n=a;do{const r=n.prev,o=n.next.next;!Id(r,o)&&dm(r,n,n.next,o)&&Bf(r,o)&&Bf(o,r)&&(e.push(r.i/t|0),e.push(n.i/t|0),e.push(o.i/t|0),kf(n),kf(n.next),n=a=o),n=n.next}while(n!==a);return Eu(n)}function Bv(a,e,t,n,r,o){let l=a;do{let c=l.next.next;for(;c!==l.prev;){if(l.i!==c.i&&Yv(l,c)){let f=hm(l,c);l=Eu(l,l.next),f=Eu(f,f.next),zf(l,e,t,n,r,o,0),zf(f,e,t,n,r,o,0);return}c=c.next}l=l.next}while(l!==a)}function kv(a,e,t,n){const r=[];let o,l,c,f,h;for(o=0,l=e.length;o<l;o++)c=e[o]*n,f=o<l-1?e[o+1]*n:a.length,h=fm(a,c,f,n,!1),h===h.next&&(h.steiner=!0),r.push(Zv(h));for(r.sort(Hv),o=0;o<r.length;o++)t=Gv(r[o],t);return t}function Hv(a,e){return a.x-e.x}function Gv(a,e){const t=Vv(a,e);if(!t)return e;const n=hm(t,a);return Eu(n,n.next),Eu(t,t.next)}function Vv(a,e){let t=e,n=-1/0,r;const o=a.x,l=a.y;do{if(l<=t.y&&l>=t.next.y&&t.next.y!==t.y){const x=t.x+(l-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(x<=o&&x>n&&(n=x,r=t.x<t.next.x?t:t.next,x===o))return r}t=t.next}while(t!==e);if(!r)return null;const c=r,f=r.x,h=r.y;let g=1/0,_;t=r;do o>=t.x&&t.x>=f&&o!==t.x&&gf(l<h?o:n,l,f,h,l<h?n:o,l,t.x,t.y)&&(_=Math.abs(l-t.y)/(o-t.x),Bf(t,a)&&(_<g||_===g&&(t.x>r.x||t.x===r.x&&Wv(r,t)))&&(r=t,g=_)),t=t.next;while(t!==c);return r}function Wv(a,e){return zo(a.prev,a,e.prev)<0&&zo(e.next,a,a.next)<0}function jv(a,e,t,n){let r=a;do r.z===0&&(r.z=Dh(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==a);r.prevZ.nextZ=null,r.prevZ=null,Xv(r)}function Xv(a){let e,t,n,r,o,l,c,f,h=1;do{for(t=a,a=null,o=null,l=0;t;){for(l++,n=t,c=0,e=0;e<h&&(c++,n=n.nextZ,!!n);e++);for(f=h;c>0||f>0&&n;)c!==0&&(f===0||!n||t.z<=n.z)?(r=t,t=t.nextZ,c--):(r=n,n=n.nextZ,f--),o?o.nextZ=r:a=r,r.prevZ=o,o=r;t=n}o.nextZ=null,h*=2}while(l>1);return a}function Dh(a,e,t,n,r){return a=(a-t)*r|0,e=(e-n)*r|0,a=(a|a<<8)&16711935,a=(a|a<<4)&252645135,a=(a|a<<2)&858993459,a=(a|a<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,a|e<<1}function Zv(a){let e=a,t=a;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==a);return t}function gf(a,e,t,n,r,o,l,c){return(r-l)*(e-c)>=(a-l)*(o-c)&&(a-l)*(n-c)>=(t-l)*(e-c)&&(t-l)*(o-c)>=(r-l)*(n-c)}function Yv(a,e){return a.next.i!==e.i&&a.prev.i!==e.i&&!Kv(a,e)&&(Bf(a,e)&&Bf(e,a)&&qv(a,e)&&(zo(a.prev,a,e.prev)||zo(a,e.prev,e))||Id(a,e)&&zo(a.prev,a,a.next)>0&&zo(e.prev,e,e.next)>0)}function zo(a,e,t){return(e.y-a.y)*(t.x-e.x)-(e.x-a.x)*(t.y-e.y)}function Id(a,e){return a.x===e.x&&a.y===e.y}function dm(a,e,t,n){const r=Dd(zo(a,e,t)),o=Dd(zo(a,e,n)),l=Dd(zo(t,n,a)),c=Dd(zo(t,n,e));return!!(r!==o&&l!==c||r===0&&Ld(a,t,e)||o===0&&Ld(a,n,e)||l===0&&Ld(t,a,n)||c===0&&Ld(t,e,n))}function Ld(a,e,t){return e.x<=Math.max(a.x,t.x)&&e.x>=Math.min(a.x,t.x)&&e.y<=Math.max(a.y,t.y)&&e.y>=Math.min(a.y,t.y)}function Dd(a){return a>0?1:a<0?-1:0}function Kv(a,e){let t=a;do{if(t.i!==a.i&&t.next.i!==a.i&&t.i!==e.i&&t.next.i!==e.i&&dm(t,t.next,a,e))return!0;t=t.next}while(t!==a);return!1}function Bf(a,e){return zo(a.prev,a,a.next)<0?zo(a,e,a.next)>=0&&zo(a,a.prev,e)>=0:zo(a,e,a.prev)<0||zo(a,a.next,e)<0}function qv(a,e){let t=a,n=!1;const r=(a.x+e.x)/2,o=(a.y+e.y)/2;do t.y>o!=t.next.y>o&&t.next.y!==t.y&&r<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==a);return n}function hm(a,e){const t=new Oh(a.i,a.x,a.y),n=new Oh(e.i,e.x,e.y),r=a.next,o=e.prev;return a.next=e,e.prev=a,t.next=r,r.prev=t,n.next=t,t.prev=n,o.next=n,n.prev=o,n}function pm(a,e,t,n){const r=new Oh(a,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function kf(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function Oh(a,e,t){this.i=a,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Jv(a,e,t,n){let r=0;for(let o=e,l=t-n;o<t;o+=n)r+=(a[l]-a[o])*(a[o+1]+a[l+1]),l=o;return r}class vc{static area(e){const t=e.length;let n=0;for(let r=t-1,o=0;o<t;r=o++)n+=e[r].x*e[o].y-e[o].x*e[r].y;return n*.5}static isClockWise(e){return vc.area(e)<0}static triangulateShape(e,t){const n=[],r=[],o=[];mm(e),gm(n,e);let l=e.length;t.forEach(mm);for(let f=0;f<t.length;f++)r.push(l),l+=t[f].length,gm(n,t[f]);const c=Nv.triangulate(n,r);for(let f=0;f<c.length;f+=3)o.push(c.slice(f,f+3));return o}}function mm(a){const e=a.length;e>2&&a[e-1].equals(a[0])&&a.pop()}function gm(a,e){for(let t=0;t<e.length;t++)a.push(e[t].x),a.push(e[t].y)}class Od extends wi{constructor(e=new wu([new Et(.5,.5),new Et(-.5,.5),new Et(-.5,-.5),new Et(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],o=[];for(let c=0,f=e.length;c<f;c++){const h=e[c];l(h)}this.setAttribute("position",new Cr(r,3)),this.setAttribute("uv",new Cr(o,2)),this.computeVertexNormals();function l(c){const f=[],h=t.curveSegments!==void 0?t.curveSegments:12,g=t.steps!==void 0?t.steps:1,_=t.depth!==void 0?t.depth:1;let x=t.bevelEnabled!==void 0?t.bevelEnabled:!0,S=t.bevelThickness!==void 0?t.bevelThickness:.2,E=t.bevelSize!==void 0?t.bevelSize:S-.1,I=t.bevelOffset!==void 0?t.bevelOffset:0,T=t.bevelSegments!==void 0?t.bevelSegments:3;const b=t.extrudePath,B=t.UVGenerator!==void 0?t.UVGenerator:$v;let D,W=!1,ne,ae,ue,Te;b&&(D=b.getSpacedPoints(g),W=!0,x=!1,ne=b.computeFrenetFrames(g,!1),ae=new $,ue=new $,Te=new $),x||(T=0,S=0,E=0,I=0);const j=c.extractPoints(h);let ie=j.shape;const rt=j.holes;if(!vc.isClockWise(ie)){ie=ie.reverse();for(let Me=0,ar=rt.length;Me<ar;Me++){const Yt=rt[Me];vc.isClockWise(Yt)&&(rt[Me]=Yt.reverse())}}const _n=vc.triangulateShape(ie,rt),Ie=ie;for(let Me=0,ar=rt.length;Me<ar;Me++){const Yt=rt[Me];ie=ie.concat(Yt)}function Mt(Me,ar,Yt){return ar||console.error("THREE.ExtrudeGeometry: vec does not exist"),Me.clone().addScaledVector(ar,Yt)}const qt=ie.length,Xt=_n.length;function Vn(Me,ar,Yt){let Fn,mn,ri;const Er=Me.x-ar.x,kr=Me.y-ar.y,Fi=Yt.x-Me.x,gs=Yt.y-Me.y,Zo=Er*Er+kr*kr,fe=Er*gs-kr*Fi;if(Math.abs(fe)>Number.EPSILON){const K=Math.sqrt(Zo),lt=Math.sqrt(Fi*Fi+gs*gs),Hn=ar.x-kr/K,Cn=ar.y+Er/K,Wn=Yt.x-gs/lt,Zr=Yt.y+Fi/lt,Jn=((Wn-Hn)*gs-(Zr-Cn)*Fi)/(Er*gs-kr*Fi);Fn=Hn+Er*Jn-Me.x,mn=Cn+kr*Jn-Me.y;const br=Fn*Fn+mn*mn;if(br<=2)return new Et(Fn,mn);ri=Math.sqrt(br/2)}else{let K=!1;Er>Number.EPSILON?Fi>Number.EPSILON&&(K=!0):Er<-Number.EPSILON?Fi<-Number.EPSILON&&(K=!0):Math.sign(kr)===Math.sign(gs)&&(K=!0),K?(Fn=-kr,mn=Er,ri=Math.sqrt(Zo)):(Fn=Er,mn=kr,ri=Math.sqrt(Zo/2))}return new Et(Fn/ri,mn/ri)}const cn=[];for(let Me=0,ar=Ie.length,Yt=ar-1,Fn=Me+1;Me<ar;Me++,Yt++,Fn++)Yt===ar&&(Yt=0),Fn===ar&&(Fn=0),cn[Me]=Vn(Ie[Me],Ie[Yt],Ie[Fn]);const bn=[];let Be,Gt=cn.concat();for(let Me=0,ar=rt.length;Me<ar;Me++){const Yt=rt[Me];Be=[];for(let Fn=0,mn=Yt.length,ri=mn-1,Er=Fn+1;Fn<mn;Fn++,ri++,Er++)ri===mn&&(ri=0),Er===mn&&(Er=0),Be[Fn]=Vn(Yt[Fn],Yt[ri],Yt[Er]);bn.push(Be),Gt=Gt.concat(Be)}for(let Me=0;Me<T;Me++){const ar=Me/T,Yt=S*Math.cos(ar*Math.PI/2),Fn=E*Math.sin(ar*Math.PI/2)+I;for(let mn=0,ri=Ie.length;mn<ri;mn++){const Er=Mt(Ie[mn],cn[mn],Fn);Ri(Er.x,Er.y,-Yt)}for(let mn=0,ri=rt.length;mn<ri;mn++){const Er=rt[mn];Be=bn[mn];for(let kr=0,Fi=Er.length;kr<Fi;kr++){const gs=Mt(Er[kr],Be[kr],Fn);Ri(gs.x,gs.y,-Yt)}}}const Sr=E+I;for(let Me=0;Me<qt;Me++){const ar=x?Mt(ie[Me],Gt[Me],Sr):ie[Me];W?(ue.copy(ne.normals[0]).multiplyScalar(ar.x),ae.copy(ne.binormals[0]).multiplyScalar(ar.y),Te.copy(D[0]).add(ue).add(ae),Ri(Te.x,Te.y,Te.z)):Ri(ar.x,ar.y,0)}for(let Me=1;Me<=g;Me++)for(let ar=0;ar<qt;ar++){const Yt=x?Mt(ie[ar],Gt[ar],Sr):ie[ar];W?(ue.copy(ne.normals[Me]).multiplyScalar(Yt.x),ae.copy(ne.binormals[Me]).multiplyScalar(Yt.y),Te.copy(D[Me]).add(ue).add(ae),Ri(Te.x,Te.y,Te.z)):Ri(Yt.x,Yt.y,_/g*Me)}for(let Me=T-1;Me>=0;Me--){const ar=Me/T,Yt=S*Math.cos(ar*Math.PI/2),Fn=E*Math.sin(ar*Math.PI/2)+I;for(let mn=0,ri=Ie.length;mn<ri;mn++){const Er=Mt(Ie[mn],cn[mn],Fn);Ri(Er.x,Er.y,_+Yt)}for(let mn=0,ri=rt.length;mn<ri;mn++){const Er=rt[mn];Be=bn[mn];for(let kr=0,Fi=Er.length;kr<Fi;kr++){const gs=Mt(Er[kr],Be[kr],Fn);W?Ri(gs.x,gs.y+D[g-1].y,D[g-1].x+Yt):Ri(gs.x,gs.y,_+Yt)}}}Rr(),Fr();function Rr(){const Me=r.length/3;if(x){let ar=0,Yt=qt*ar;for(let Fn=0;Fn<Xt;Fn++){const mn=_n[Fn];hi(mn[2]+Yt,mn[1]+Yt,mn[0]+Yt)}ar=g+T*2,Yt=qt*ar;for(let Fn=0;Fn<Xt;Fn++){const mn=_n[Fn];hi(mn[0]+Yt,mn[1]+Yt,mn[2]+Yt)}}else{for(let ar=0;ar<Xt;ar++){const Yt=_n[ar];hi(Yt[2],Yt[1],Yt[0])}for(let ar=0;ar<Xt;ar++){const Yt=_n[ar];hi(Yt[0]+qt*g,Yt[1]+qt*g,Yt[2]+qt*g)}}n.addGroup(Me,r.length/3-Me,0)}function Fr(){const Me=r.length/3;let ar=0;di(Ie,ar),ar+=Ie.length;for(let Yt=0,Fn=rt.length;Yt<Fn;Yt++){const mn=rt[Yt];di(mn,ar),ar+=mn.length}n.addGroup(Me,r.length/3-Me,1)}function di(Me,ar){let Yt=Me.length;for(;--Yt>=0;){const Fn=Yt;let mn=Yt-1;mn<0&&(mn=Me.length-1);for(let ri=0,Er=g+T*2;ri<Er;ri++){const kr=qt*ri,Fi=qt*(ri+1),gs=ar+Fn+kr,Zo=ar+mn+kr,fe=ar+mn+Fi,K=ar+Fn+Fi;Vi(gs,Zo,fe,K)}}}function Ri(Me,ar,Yt){f.push(Me),f.push(ar),f.push(Yt)}function hi(Me,ar,Yt){Os(Me),Os(ar),Os(Yt);const Fn=r.length/3,mn=B.generateTopUV(n,r,Fn-3,Fn-2,Fn-1);pi(mn[0]),pi(mn[1]),pi(mn[2])}function Vi(Me,ar,Yt,Fn){Os(Me),Os(ar),Os(Fn),Os(ar),Os(Yt),Os(Fn);const mn=r.length/3,ri=B.generateSideWallUV(n,r,mn-6,mn-3,mn-2,mn-1);pi(ri[0]),pi(ri[1]),pi(ri[3]),pi(ri[1]),pi(ri[2]),pi(ri[3])}function Os(Me){r.push(f[Me*3+0]),r.push(f[Me*3+1]),r.push(f[Me*3+2])}function pi(Me){o.push(Me.x),o.push(Me.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return Qv(t,n,e)}static fromJSON(e,t){const n=[];for(let o=0,l=e.shapes.length;o<l;o++){const c=t[e.shapes[o]];n.push(c)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new bd[r.type]().fromJSON(r)),new Od(n,e.options)}}const $v={generateTopUV:function(a,e,t,n,r){const o=e[t*3],l=e[t*3+1],c=e[n*3],f=e[n*3+1],h=e[r*3],g=e[r*3+1];return[new Et(o,l),new Et(c,f),new Et(h,g)]},generateSideWallUV:function(a,e,t,n,r,o){const l=e[t*3],c=e[t*3+1],f=e[t*3+2],h=e[n*3],g=e[n*3+1],_=e[n*3+2],x=e[r*3],S=e[r*3+1],E=e[r*3+2],I=e[o*3],T=e[o*3+1],b=e[o*3+2];return Math.abs(c-g)<Math.abs(l-h)?[new Et(l,1-f),new Et(h,1-_),new Et(x,1-E),new Et(I,1-b)]:[new Et(c,1-f),new Et(g,1-_),new Et(S,1-E),new Et(T,1-b)]}};function Qv(a,e,t){if(t.shapes=[],Array.isArray(a))for(let n=0,r=a.length;n<r;n++){const o=a[n];t.shapes.push(o.uuid)}else t.shapes.push(a.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Nd extends nu{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,o,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Nd(e.radius,e.detail)}}class Hf extends nu{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Hf(e.radius,e.detail)}}class Ud extends wi{constructor(e=.5,t=1,n=32,r=1,o=0,l=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:o,thetaLength:l},n=Math.max(3,n),r=Math.max(1,r);const c=[],f=[],h=[],g=[];let _=e;const x=(t-e)/r,S=new $,E=new Et;for(let I=0;I<=r;I++){for(let T=0;T<=n;T++){const b=o+T/n*l;S.x=_*Math.cos(b),S.y=_*Math.sin(b),f.push(S.x,S.y,S.z),h.push(0,0,1),E.x=(S.x/t+1)/2,E.y=(S.y/t+1)/2,g.push(E.x,E.y)}_+=x}for(let I=0;I<r;I++){const T=I*(n+1);for(let b=0;b<n;b++){const B=b+T,D=B,W=B+n+1,ne=B+n+2,ae=B+1;c.push(D,W,ae),c.push(W,ne,ae)}}this.setIndex(c),this.setAttribute("position",new Cr(f,3)),this.setAttribute("normal",new Cr(h,3)),this.setAttribute("uv",new Cr(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ud(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Fd extends wi{constructor(e=new wu([new Et(0,.5),new Et(-.5,-.5),new Et(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],o=[],l=[];let c=0,f=0;if(Array.isArray(e)===!1)h(e);else for(let g=0;g<e.length;g++)h(e[g]),this.addGroup(c,f,g),c+=f,f=0;this.setIndex(n),this.setAttribute("position",new Cr(r,3)),this.setAttribute("normal",new Cr(o,3)),this.setAttribute("uv",new Cr(l,2));function h(g){const _=r.length/3,x=g.extractPoints(t);let S=x.shape;const E=x.holes;vc.isClockWise(S)===!1&&(S=S.reverse());for(let T=0,b=E.length;T<b;T++){const B=E[T];vc.isClockWise(B)===!0&&(E[T]=B.reverse())}const I=vc.triangulateShape(S,E);for(let T=0,b=E.length;T<b;T++){const B=E[T];S=S.concat(B)}for(let T=0,b=S.length;T<b;T++){const B=S[T];r.push(B.x,B.y,0),o.push(0,0,1),l.push(B.x,B.y)}for(let T=0,b=I.length;T<b;T++){const B=I[T],D=B[0]+_,W=B[1]+_,ne=B[2]+_;n.push(D,W,ne),f+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return ey(t,e)}static fromJSON(e,t){const n=[];for(let r=0,o=e.shapes.length;r<o;r++){const l=t[e.shapes[r]];n.push(l)}return new Fd(n,e.curveSegments)}}function ey(a,e){if(e.shapes=[],Array.isArray(a))for(let t=0,n=a.length;t<n;t++){const r=a[t];e.shapes.push(r.uuid)}else e.shapes.push(a.uuid);return e}class Gf extends wi{constructor(e=1,t=32,n=16,r=0,o=Math.PI*2,l=0,c=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:o,thetaStart:l,thetaLength:c},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const f=Math.min(l+c,Math.PI);let h=0;const g=[],_=new $,x=new $,S=[],E=[],I=[],T=[];for(let b=0;b<=n;b++){const B=[],D=b/n;let W=0;b===0&&l===0?W=.5/t:b===n&&f===Math.PI&&(W=-.5/t);for(let ne=0;ne<=t;ne++){const ae=ne/t;_.x=-e*Math.cos(r+ae*o)*Math.sin(l+D*c),_.y=e*Math.cos(l+D*c),_.z=e*Math.sin(r+ae*o)*Math.sin(l+D*c),E.push(_.x,_.y,_.z),x.copy(_).normalize(),I.push(x.x,x.y,x.z),T.push(ae+W,1-D),B.push(h++)}g.push(B)}for(let b=0;b<n;b++)for(let B=0;B<t;B++){const D=g[b][B+1],W=g[b][B],ne=g[b+1][B],ae=g[b+1][B+1];(b!==0||l>0)&&S.push(D,W,ae),(b!==n-1||f<Math.PI)&&S.push(W,ne,ae)}this.setIndex(S),this.setAttribute("position",new Cr(E,3)),this.setAttribute("normal",new Cr(I,3)),this.setAttribute("uv",new Cr(T,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gf(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class zd extends nu{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new zd(e.radius,e.detail)}}class Bd extends wi{constructor(e=1,t=.4,n=12,r=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:o},n=Math.floor(n),r=Math.floor(r);const l=[],c=[],f=[],h=[],g=new $,_=new $,x=new $;for(let S=0;S<=n;S++)for(let E=0;E<=r;E++){const I=E/r*o,T=S/n*Math.PI*2;_.x=(e+t*Math.cos(T))*Math.cos(I),_.y=(e+t*Math.cos(T))*Math.sin(I),_.z=t*Math.sin(T),c.push(_.x,_.y,_.z),g.x=e*Math.cos(I),g.y=e*Math.sin(I),x.subVectors(_,g).normalize(),f.push(x.x,x.y,x.z),h.push(E/r),h.push(S/n)}for(let S=1;S<=n;S++)for(let E=1;E<=r;E++){const I=(r+1)*S+E-1,T=(r+1)*(S-1)+E-1,b=(r+1)*(S-1)+E,B=(r+1)*S+E;l.push(I,T,B),l.push(T,b,B)}this.setIndex(l),this.setAttribute("position",new Cr(c,3)),this.setAttribute("normal",new Cr(f,3)),this.setAttribute("uv",new Cr(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bd(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class kd extends wi{constructor(e=1,t=.4,n=64,r=8,o=2,l=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:o,q:l},n=Math.floor(n),r=Math.floor(r);const c=[],f=[],h=[],g=[],_=new $,x=new $,S=new $,E=new $,I=new $,T=new $,b=new $;for(let D=0;D<=n;++D){const W=D/n*o*Math.PI*2;B(W,o,l,e,S),B(W+.01,o,l,e,E),T.subVectors(E,S),b.addVectors(E,S),I.crossVectors(T,b),b.crossVectors(I,T),I.normalize(),b.normalize();for(let ne=0;ne<=r;++ne){const ae=ne/r*Math.PI*2,ue=-t*Math.cos(ae),Te=t*Math.sin(ae);_.x=S.x+(ue*b.x+Te*I.x),_.y=S.y+(ue*b.y+Te*I.y),_.z=S.z+(ue*b.z+Te*I.z),f.push(_.x,_.y,_.z),x.subVectors(_,S).normalize(),h.push(x.x,x.y,x.z),g.push(D/n),g.push(ne/r)}}for(let D=1;D<=n;D++)for(let W=1;W<=r;W++){const ne=(r+1)*(D-1)+(W-1),ae=(r+1)*D+(W-1),ue=(r+1)*D+W,Te=(r+1)*(D-1)+W;c.push(ne,ae,Te),c.push(ae,ue,Te)}this.setIndex(c),this.setAttribute("position",new Cr(f,3)),this.setAttribute("normal",new Cr(h,3)),this.setAttribute("uv",new Cr(g,2));function B(D,W,ne,ae,ue){const Te=Math.cos(D),j=Math.sin(D),ie=ne/W*D,rt=Math.cos(ie);ue.x=ae*(2+rt)*.5*Te,ue.y=ae*(2+rt)*j*.5,ue.z=ae*Math.sin(ie)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kd(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Hd extends wi{constructor(e=new Ph(new $(-1,-1,0),new $(-1,1,0),new $(1,1,0)),t=64,n=1,r=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:o};const l=e.computeFrenetFrames(t,o);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;const c=new $,f=new $,h=new Et;let g=new $;const _=[],x=[],S=[],E=[];I(),this.setIndex(E),this.setAttribute("position",new Cr(_,3)),this.setAttribute("normal",new Cr(x,3)),this.setAttribute("uv",new Cr(S,2));function I(){for(let D=0;D<t;D++)T(D);T(o===!1?t:0),B(),b()}function T(D){g=e.getPointAt(D/t,g);const W=l.normals[D],ne=l.binormals[D];for(let ae=0;ae<=r;ae++){const ue=ae/r*Math.PI*2,Te=Math.sin(ue),j=-Math.cos(ue);f.x=j*W.x+Te*ne.x,f.y=j*W.y+Te*ne.y,f.z=j*W.z+Te*ne.z,f.normalize(),x.push(f.x,f.y,f.z),c.x=g.x+n*f.x,c.y=g.y+n*f.y,c.z=g.z+n*f.z,_.push(c.x,c.y,c.z)}}function b(){for(let D=1;D<=t;D++)for(let W=1;W<=r;W++){const ne=(r+1)*(D-1)+(W-1),ae=(r+1)*D+(W-1),ue=(r+1)*D+W,Te=(r+1)*(D-1)+W;E.push(ne,ae,Te),E.push(ae,ue,Te)}}function B(){for(let D=0;D<=t;D++)for(let W=0;W<=r;W++)h.x=D/t,h.y=W/r,S.push(h.x,h.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Hd(new bd[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class vm extends wi{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,r=new $,o=new $;if(e.index!==null){const l=e.attributes.position,c=e.index;let f=e.groups;f.length===0&&(f=[{start:0,count:c.count,materialIndex:0}]);for(let h=0,g=f.length;h<g;++h){const _=f[h],x=_.start,S=_.count;for(let E=x,I=x+S;E<I;E+=3)for(let T=0;T<3;T++){const b=c.getX(E+T),B=c.getX(E+(T+1)%3);r.fromBufferAttribute(l,b),o.fromBufferAttribute(l,B),ym(r,o,n)===!0&&(t.push(r.x,r.y,r.z),t.push(o.x,o.y,o.z))}}}else{const l=e.attributes.position;for(let c=0,f=l.count/3;c<f;c++)for(let h=0;h<3;h++){const g=3*c+h,_=3*c+(h+1)%3;r.fromBufferAttribute(l,g),o.fromBufferAttribute(l,_),ym(r,o,n)===!0&&(t.push(r.x,r.y,r.z),t.push(o.x,o.y,o.z))}}this.setAttribute("position",new Cr(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function ym(a,e,t){const n=`${a.x},${a.y},${a.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${a.x},${a.y},${a.z}`;return t.has(n)===!0||t.has(r)===!0?!1:(t.add(n),t.add(r),!0)}var _m=Object.freeze({__proto__:null,BoxGeometry:ja,CapsuleGeometry:wd,CircleGeometry:Ed,ConeGeometry:Td,CylinderGeometry:mf,DodecahedronGeometry:Ad,EdgesGeometry:um,ExtrudeGeometry:Od,IcosahedronGeometry:Nd,LatheGeometry:Ff,OctahedronGeometry:Hf,PlaneGeometry:jo,PolyhedronGeometry:nu,RingGeometry:Ud,ShapeGeometry:Fd,SphereGeometry:Gf,TetrahedronGeometry:zd,TorusGeometry:Bd,TorusKnotGeometry:kd,TubeGeometry:Hd,WireframeGeometry:vm});class xm extends Oo{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Qn(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Sm extends Za{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Nh extends Oo{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Qn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Qn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=v,this.normalScale=new Et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Mm extends Nh{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Et(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Rs(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Qn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Qn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Qn(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class bm extends Oo{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Qn(16777215),this.specular=new Qn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Qn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=v,this.normalScale=new Et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Bn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class wm extends Oo{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Qn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Qn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=v,this.normalScale=new Et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Em extends Oo{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=v,this.normalScale=new Et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Tm extends Oo{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Qn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Qn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=v,this.normalScale=new Et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Bn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Am extends Oo{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Qn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=v,this.normalScale=new Et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Cm extends ol{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Tu(a,e,t){return!a||!t&&a.constructor===e?a:typeof e.BYTES_PER_ELEMENT=="number"?new e(a):Array.prototype.slice.call(a)}function Rm(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}function Pm(a){function e(r,o){return a[r]-a[o]}const t=a.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(e),n}function Uh(a,e,t){const n=a.length,r=new a.constructor(n);for(let o=0,l=0;l!==n;++o){const c=t[o]*e;for(let f=0;f!==e;++f)r[l++]=a[c+f]}return r}function Fh(a,e,t,n){let r=1,o=a[0];for(;o!==void 0&&o[n]===void 0;)o=a[r++];if(o===void 0)return;let l=o[n];if(l!==void 0)if(Array.isArray(l))do l=o[n],l!==void 0&&(e.push(o.time),t.push.apply(t,l)),o=a[r++];while(o!==void 0);else if(l.toArray!==void 0)do l=o[n],l!==void 0&&(e.push(o.time),l.toArray(t,t.length)),o=a[r++];while(o!==void 0);else do l=o[n],l!==void 0&&(e.push(o.time),t.push(l)),o=a[r++];while(o!==void 0)}function ty(a,e,t,n,r=30){const o=a.clone();o.name=e;const l=[];for(let f=0;f<o.tracks.length;++f){const h=o.tracks[f],g=h.getValueSize(),_=[],x=[];for(let S=0;S<h.times.length;++S){const E=h.times[S]*r;if(!(E<t||E>=n)){_.push(h.times[S]);for(let I=0;I<g;++I)x.push(h.values[S*g+I])}}_.length!==0&&(h.times=Tu(_,h.times.constructor),h.values=Tu(x,h.values.constructor),l.push(h))}o.tracks=l;let c=1/0;for(let f=0;f<o.tracks.length;++f)c>o.tracks[f].times[0]&&(c=o.tracks[f].times[0]);for(let f=0;f<o.tracks.length;++f)o.tracks[f].shift(-1*c);return o.resetDuration(),o}function ny(a,e=0,t=a,n=30){n<=0&&(n=30);const r=t.tracks.length,o=e/n;for(let l=0;l<r;++l){const c=t.tracks[l],f=c.ValueTypeName;if(f==="bool"||f==="string")continue;const h=a.tracks.find(function(b){return b.name===c.name&&b.ValueTypeName===f});if(h===void 0)continue;let g=0;const _=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=_/3);let x=0;const S=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(x=S/3);const E=c.times.length-1;let I;if(o<=c.times[0]){const b=g,B=_-g;I=c.values.slice(b,B)}else if(o>=c.times[E]){const b=E*_+g,B=b+_-g;I=c.values.slice(b,B)}else{const b=c.createInterpolant(),B=g,D=_-g;b.evaluate(o),I=b.resultBuffer.slice(B,D)}f==="quaternion"&&new pr().fromArray(I).normalize().conjugate().toArray(I);const T=h.times.length;for(let b=0;b<T;++b){const B=b*S+x;if(f==="quaternion")pr.multiplyQuaternionsFlat(h.values,B,I,0,h.values,B);else{const D=S-x*2;for(let W=0;W<D;++W)h.values[B+W]-=I[W]}}}return a.blendMode=oi,a}const ry={convertArray:Tu,isTypedArray:Rm,getKeyframeOrder:Pm,sortedArray:Uh,flattenJSON:Fh,subclip:ty,makeClipAdditive:ny};class Vf{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],o=t[n-1];e:{t:{let l;n:{r:if(!(e<r)){for(let c=n+2;;){if(r===void 0){if(e<o)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===c)break;if(o=r,r=t[++n],e<r)break t}l=t.length;break n}if(!(e>=o)){const c=t[1];e<c&&(n=2,o=c);for(let f=n-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===f)break;if(r=o,o=t[--n-1],e>=o)break t}l=n,n=0;break n}break e}for(;n<l;){const c=n+l>>>1;e<t[c]?l=c:n=c+1}if(r=t[n],o=t[n-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,o,r)}return this.interpolate_(n,o,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,o=e*r;for(let l=0;l!==r;++l)t[l]=n[o+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Im extends Vf{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:no,endingEnd:no}}intervalChanged_(e,t,n){const r=this.parameterPositions;let o=e-2,l=e+1,c=r[o],f=r[l];if(c===void 0)switch(this.getSettings_().endingStart){case Ni:o=e,c=2*t-n;break;case Vs:o=r.length-2,c=t+r[o]-r[o+1];break;default:o=e,c=n}if(f===void 0)switch(this.getSettings_().endingEnd){case Ni:l=e,f=2*n-t;break;case Vs:l=1,f=n+r[1]-r[0];break;default:l=e-1,f=t}const h=(n-t)*.5,g=this.valueSize;this._weightPrev=h/(t-c),this._weightNext=h/(f-n),this._offsetPrev=o*g,this._offsetNext=l*g}interpolate_(e,t,n,r){const o=this.resultBuffer,l=this.sampleValues,c=this.valueSize,f=e*c,h=f-c,g=this._offsetPrev,_=this._offsetNext,x=this._weightPrev,S=this._weightNext,E=(n-t)/(r-t),I=E*E,T=I*E,b=-x*T+2*x*I-x*E,B=(1+x)*T+(-1.5-2*x)*I+(-.5+x)*E+1,D=(-1-S)*T+(1.5+S)*I+.5*E,W=S*T-S*I;for(let ne=0;ne!==c;++ne)o[ne]=b*l[g+ne]+B*l[h+ne]+D*l[f+ne]+W*l[_+ne];return o}}class zh extends Vf{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const o=this.resultBuffer,l=this.sampleValues,c=this.valueSize,f=e*c,h=f-c,g=(n-t)/(r-t),_=1-g;for(let x=0;x!==c;++x)o[x]=l[h+x]*_+l[f+x]*g;return o}}class Lm extends Vf{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class ec{constructor(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Tu(t,this.TimeBufferType),this.values=Tu(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Tu(e.times,Array),values:Tu(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Lm(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new zh(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Im(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case to:t=this.InterpolantFactoryMethodDiscrete;break;case As:t=this.InterpolantFactoryMethodLinear;break;case Cs:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return to;case this.InterpolantFactoryMethodLinear:return As;case this.InterpolantFactoryMethodSmooth:return Cs}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let o=0,l=r-1;for(;o!==r&&n[o]<e;)++o;for(;l!==-1&&n[l]>t;)--l;if(++l,o!==0||l!==r){o>=l&&(l=Math.max(l,1),o=l-1);const c=this.getValueSize();this.times=n.slice(o,l),this.values=this.values.slice(o*c,l*c)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,o=n.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let c=0;c!==o;c++){const f=n[c];if(typeof f=="number"&&isNaN(f)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,c,f),e=!1;break}if(l!==null&&l>f){console.error("THREE.KeyframeTrack: Out of order keys.",this,c,f,l),e=!1;break}l=f}if(r!==void 0&&Rm(r))for(let c=0,f=r.length;c!==f;++c){const h=r[c];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,c,h),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===Cs,o=e.length-1;let l=1;for(let c=1;c<o;++c){let f=!1;const h=e[c],g=e[c+1];if(h!==g&&(c!==1||h!==e[0]))if(r)f=!0;else{const _=c*n,x=_-n,S=_+n;for(let E=0;E!==n;++E){const I=t[_+E];if(I!==t[x+E]||I!==t[S+E]){f=!0;break}}}if(f){if(c!==l){e[l]=e[c];const _=c*n,x=l*n;for(let S=0;S!==n;++S)t[x+S]=t[_+S]}++l}}if(o>0){e[l]=e[o];for(let c=o*n,f=l*n,h=0;h!==n;++h)t[f+h]=t[c+h];++l}return l!==e.length?(this.times=e.slice(0,l),this.values=t.slice(0,l*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}ec.prototype.TimeBufferType=Float32Array,ec.prototype.ValueBufferType=Float32Array,ec.prototype.DefaultInterpolation=As;class Au extends ec{}Au.prototype.ValueTypeName="bool",Au.prototype.ValueBufferType=Array,Au.prototype.DefaultInterpolation=to,Au.prototype.InterpolantFactoryMethodLinear=void 0,Au.prototype.InterpolantFactoryMethodSmooth=void 0;class Bh extends ec{}Bh.prototype.ValueTypeName="color";class Wf extends ec{}Wf.prototype.ValueTypeName="number";class Dm extends Vf{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const o=this.resultBuffer,l=this.sampleValues,c=this.valueSize,f=(n-t)/(r-t);let h=e*c;for(let g=h+c;h!==g;h+=4)pr.slerpFlat(o,0,l,h-c,l,h,f);return o}}class vf extends ec{InterpolantFactoryMethodLinear(e){return new Dm(this.times,this.values,this.getValueSize(),e)}}vf.prototype.ValueTypeName="quaternion",vf.prototype.DefaultInterpolation=As,vf.prototype.InterpolantFactoryMethodSmooth=void 0;class Cu extends ec{}Cu.prototype.ValueTypeName="string",Cu.prototype.ValueBufferType=Array,Cu.prototype.DefaultInterpolation=to,Cu.prototype.InterpolantFactoryMethodLinear=void 0,Cu.prototype.InterpolantFactoryMethodSmooth=void 0;class jf extends ec{}jf.prototype.ValueTypeName="vector";class Xf{constructor(e,t=-1,n,r=To){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=jr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let l=0,c=n.length;l!==c;++l)t.push(sy(n[l]).scale(r));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,l=n.length;o!==l;++o)t.push(ec.toJSON(n[o]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const o=t.length,l=[];for(let c=0;c<o;c++){let f=[],h=[];f.push((c+o-1)%o,c,(c+1)%o),h.push(0,1,0);const g=Pm(f);f=Uh(f,1,g),h=Uh(h,1,g),!r&&f[0]===0&&(f.push(o),h.push(h[0])),l.push(new Wf(".morphTargetInfluences["+t[c].name+"]",f,h).scale(1/n))}return new this(e,-1,l)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},o=/^([\w-]*?)([\d]+)$/;for(let c=0,f=e.length;c<f;c++){const h=e[c],g=h.name.match(o);if(g&&g.length>1){const _=g[1];let x=r[_];x||(r[_]=x=[]),x.push(h)}}const l=[];for(const c in r)l.push(this.CreateFromMorphTargetSequence(c,r[c],t,n));return l}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(_,x,S,E,I){if(S.length!==0){const T=[],b=[];Fh(S,T,b,E),T.length!==0&&I.push(new _(x,T,b))}},r=[],o=e.name||"default",l=e.fps||30,c=e.blendMode;let f=e.length||-1;const h=e.hierarchy||[];for(let _=0;_<h.length;_++){const x=h[_].keys;if(!(!x||x.length===0))if(x[0].morphTargets){const S={};let E;for(E=0;E<x.length;E++)if(x[E].morphTargets)for(let I=0;I<x[E].morphTargets.length;I++)S[x[E].morphTargets[I]]=-1;for(const I in S){const T=[],b=[];for(let B=0;B!==x[E].morphTargets.length;++B){const D=x[E];T.push(D.time),b.push(D.morphTarget===I?1:0)}r.push(new Wf(".morphTargetInfluence["+I+"]",T,b))}f=S.length*l}else{const S=".bones["+t[_].name+"]";n(jf,S+".position",x,"pos",r),n(vf,S+".quaternion",x,"rot",r),n(jf,S+".scale",x,"scl",r)}}return r.length===0?null:new this(o,f,r,c)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,r=e.length;n!==r;++n){const o=this.tracks[n];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function iy(a){switch(a.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Wf;case"vector":case"vector2":case"vector3":case"vector4":return jf;case"color":return Bh;case"quaternion":return vf;case"bool":case"boolean":return Au;case"string":return Cu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+a)}function sy(a){if(a.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=iy(a.type);if(a.times===void 0){const t=[],n=[];Fh(a.keys,t,n,"value"),a.times=t,a.values=n}return e.parse!==void 0?e.parse(a):new e(a.name,a.times,a.values,a.interpolation)}const Ru={enabled:!1,files:{},add:function(a,e){this.enabled!==!1&&(this.files[a]=e)},get:function(a){if(this.enabled!==!1)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}};class kh{constructor(e,t,n){const r=this;let o=!1,l=0,c=0,f;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(g){c++,o===!1&&r.onStart!==void 0&&r.onStart(g,l,c),o=!0},this.itemEnd=function(g){l++,r.onProgress!==void 0&&r.onProgress(g,l,c),l===c&&(o=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(g){r.onError!==void 0&&r.onError(g)},this.resolveURL=function(g){return f?f(g):g},this.setURLModifier=function(g){return f=g,this},this.addHandler=function(g,_){return h.push(g,_),this},this.removeHandler=function(g){const _=h.indexOf(g);return _!==-1&&h.splice(_,2),this},this.getHandler=function(g){for(let _=0,x=h.length;_<x;_+=2){const S=h[_],E=h[_+1];if(S.global&&(S.lastIndex=0),S.test(g))return E}return null}}}const Om=new kh;class vl{constructor(e){this.manager=e!==void 0?e:Om,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,o){n.load(e,r,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}vl.DEFAULT_MATERIAL_NAME="__DEFAULT";const Uc={};class oy extends Error{constructor(e,t){super(e),this.response=t}}class Fc extends vl{constructor(e){super(e)}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=Ru.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(Uc[e]!==void 0){Uc[e].push({onLoad:t,onProgress:n,onError:r});return}Uc[e]=[],Uc[e].push({onLoad:t,onProgress:n,onError:r});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),c=this.mimeType,f=this.responseType;fetch(l).then(h=>{if(h.status===200||h.status===0){if(h.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream=="undefined"||h.body===void 0||h.body.getReader===void 0)return h;const g=Uc[e],_=h.body.getReader(),x=h.headers.get("Content-Length")||h.headers.get("X-File-Size"),S=x?parseInt(x):0,E=S!==0;let I=0;const T=new ReadableStream({start(b){B();function B(){_.read().then(({done:D,value:W})=>{if(D)b.close();else{I+=W.byteLength;const ne=new ProgressEvent("progress",{lengthComputable:E,loaded:I,total:S});for(let ae=0,ue=g.length;ae<ue;ae++){const Te=g[ae];Te.onProgress&&Te.onProgress(ne)}b.enqueue(W),B()}})}}});return new Response(T)}else throw new oy(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`,h)}).then(h=>{switch(f){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(g=>new DOMParser().parseFromString(g,c));case"json":return h.json();default:if(c===void 0)return h.text();{const _=/charset="?([^;"\s]*)"?/i.exec(c),x=_&&_[1]?_[1].toLowerCase():void 0,S=new TextDecoder(x);return h.arrayBuffer().then(E=>S.decode(E))}}}).then(h=>{Ru.add(e,h);const g=Uc[e];delete Uc[e];for(let _=0,x=g.length;_<x;_++){const S=g[_];S.onLoad&&S.onLoad(h)}}).catch(h=>{const g=Uc[e];if(g===void 0)throw this.manager.itemError(e),h;delete Uc[e];for(let _=0,x=g.length;_<x;_++){const S=g[_];S.onError&&S.onError(h)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class ay extends vl{constructor(e){super(e)}load(e,t,n,r){const o=this,l=new Fc(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{t(o.parse(JSON.parse(c)))}catch(f){r?r(f):console.error(f),o.manager.itemError(e)}},n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=Xf.parse(e[n]);t.push(r)}return t}}class ly extends vl{constructor(e){super(e)}load(e,t,n,r){const o=this,l=[],c=new xd,f=new Fc(this.manager);f.setPath(this.path),f.setResponseType("arraybuffer"),f.setRequestHeader(this.requestHeader),f.setWithCredentials(o.withCredentials);let h=0;function g(_){f.load(e[_],function(x){const S=o.parse(x,!0);l[_]={width:S.width,height:S.height,format:S.format,mipmaps:S.mipmaps},h+=1,h===6&&(S.mipmapCount===1&&(c.minFilter=Ht),c.image=l,c.format=S.format,c.needsUpdate=!0,t&&t(c))},n,r)}if(Array.isArray(e))for(let _=0,x=e.length;_<x;++_)g(_);else f.load(e,function(_){const x=o.parse(_,!0);if(x.isCubemap){const S=x.mipmaps.length/x.mipmapCount;for(let E=0;E<S;E++){l[E]={mipmaps:[]};for(let I=0;I<x.mipmapCount;I++)l[E].mipmaps.push(x.mipmaps[E*x.mipmapCount+I]),l[E].format=x.format,l[E].width=x.width,l[E].height=x.height}c.image=l}else c.image.width=x.width,c.image.height=x.height,c.mipmaps=x.mipmaps;x.mipmapCount===1&&(c.minFilter=Ht),c.format=x.format,c.needsUpdate=!0,t&&t(c)},n,r);return c}}class Zf extends vl{constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=Ru.get(e);if(l!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l;const c=Io("img");function f(){g(),Ru.add(e,this),t&&t(this),o.manager.itemEnd(e)}function h(_){g(),r&&r(_),o.manager.itemError(e),o.manager.itemEnd(e)}function g(){c.removeEventListener("load",f,!1),c.removeEventListener("error",h,!1)}return c.addEventListener("load",f,!1),c.addEventListener("error",h,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(c.crossOrigin=this.crossOrigin),o.manager.itemStart(e),c.src=e,c}}class cy extends vl{constructor(e){super(e)}load(e,t,n,r){const o=new Fl;o.colorSpace=H;const l=new Zf(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);let c=0;function f(h){l.load(e[h],function(g){o.images[h]=g,c++,c===6&&(o.needsUpdate=!0,t&&t(o))},void 0,r)}for(let h=0;h<e.length;++h)f(h);return o}}class uy extends vl{constructor(e){super(e)}load(e,t,n,r){const o=this,l=new df,c=new Fc(this.manager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(o.withCredentials),c.load(e,function(f){let h;try{h=o.parse(f)}catch(g){if(r!==void 0)r(g);else{console.error(g);return}}h.image!==void 0?l.image=h.image:h.data!==void 0&&(l.image.width=h.width,l.image.height=h.height,l.image.data=h.data),l.wrapS=h.wrapS!==void 0?h.wrapS:Ln,l.wrapT=h.wrapT!==void 0?h.wrapT:Ln,l.magFilter=h.magFilter!==void 0?h.magFilter:Ht,l.minFilter=h.minFilter!==void 0?h.minFilter:Ht,l.anisotropy=h.anisotropy!==void 0?h.anisotropy:1,h.colorSpace!==void 0?l.colorSpace=h.colorSpace:h.encoding!==void 0&&(l.encoding=h.encoding),h.flipY!==void 0&&(l.flipY=h.flipY),h.format!==void 0&&(l.format=h.format),h.type!==void 0&&(l.type=h.type),h.mipmaps!==void 0&&(l.mipmaps=h.mipmaps,l.minFilter=ht),h.mipmapCount===1&&(l.minFilter=Ht),h.generateMipmaps!==void 0&&(l.generateMipmaps=h.generateMipmaps),l.needsUpdate=!0,t&&t(l,h)},n,r),l}}class fy extends vl{constructor(e){super(e)}load(e,t,n,r){const o=new je,l=new Zf(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(c){o.image=c,o.needsUpdate=!0,t!==void 0&&t(o)},n,r),o}}class ru extends ds{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Qn(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class Nm extends ru{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ds.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Qn(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Hh=new _i,Um=new $,Fm=new $;class Gh{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Et(512,512),this.map=null,this.mapPass=null,this.matrix=new _i,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ya,this._frameExtents=new Et(1,1),this._viewportCount=1,this._viewports=[new Dt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Um.setFromMatrixPosition(e.matrixWorld),t.position.copy(Um),Fm.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Fm),t.updateMatrixWorld(),Hh.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Hh),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Hh)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class dy extends Gh{constructor(){super(new oo(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=So*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(n!==t.fov||r!==t.aspect||o!==t.far)&&(t.fov=n,t.aspect=r,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class zm extends ru{constructor(e,t,n=0,r=Math.PI/3,o=0,l=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ds.DEFAULT_UP),this.updateMatrix(),this.target=new ds,this.distance=n,this.angle=r,this.penumbra=o,this.decay=l,this.map=null,this.shadow=new dy}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Bm=new _i,Yf=new $,Vh=new $;class hy extends Gh{constructor(){super(new oo(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Et(4,2),this._viewportCount=6,this._viewports=[new Dt(2,1,1,1),new Dt(0,1,1,1),new Dt(3,1,1,1),new Dt(1,1,1,1),new Dt(3,0,1,1),new Dt(1,0,1,1)],this._cubeDirections=[new $(1,0,0),new $(-1,0,0),new $(0,0,1),new $(0,0,-1),new $(0,1,0),new $(0,-1,0)],this._cubeUps=[new $(0,1,0),new $(0,1,0),new $(0,1,0),new $(0,1,0),new $(0,0,1),new $(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,o=e.distance||n.far;o!==n.far&&(n.far=o,n.updateProjectionMatrix()),Yf.setFromMatrixPosition(e.matrixWorld),n.position.copy(Yf),Vh.copy(n.position),Vh.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Vh),n.updateMatrixWorld(),r.makeTranslation(-Yf.x,-Yf.y,-Yf.z),Bm.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Bm)}}class km extends ru{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new hy}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class py extends Gh{constructor(){super(new rd(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Hm extends ru{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ds.DEFAULT_UP),this.updateMatrix(),this.target=new ds,this.shadow=new py}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Gm extends ru{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Vm extends ru{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Wm{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new $)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,o=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.282095),t.addScaledVector(l[1],.488603*r),t.addScaledVector(l[2],.488603*o),t.addScaledVector(l[3],.488603*n),t.addScaledVector(l[4],1.092548*(n*r)),t.addScaledVector(l[5],1.092548*(r*o)),t.addScaledVector(l[6],.315392*(3*o*o-1)),t.addScaledVector(l[7],1.092548*(n*o)),t.addScaledVector(l[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,o=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.886227),t.addScaledVector(l[1],2*.511664*r),t.addScaledVector(l[2],2*.511664*o),t.addScaledVector(l[3],2*.511664*n),t.addScaledVector(l[4],2*.429043*n*r),t.addScaledVector(l[5],2*.429043*r*o),t.addScaledVector(l[6],.743125*o*o-.247708),t.addScaledVector(l[7],2*.429043*n*o),t.addScaledVector(l[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const n=e.x,r=e.y,o=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*o,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*o,t[6]=.315392*(3*o*o-1),t[7]=1.092548*n*o,t[8]=.546274*(n*n-r*r)}}class jm extends ru{constructor(e=new Wm,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Gd extends vl{constructor(e){super(e),this.textures={}}load(e,t,n,r){const o=this,l=new Fc(o.manager);l.setPath(o.path),l.setRequestHeader(o.requestHeader),l.setWithCredentials(o.withCredentials),l.load(e,function(c){try{t(o.parse(JSON.parse(c)))}catch(f){r?r(f):console.error(f),o.manager.itemError(e)}},n,r)}parse(e){const t=this.textures;function n(o){return t[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),t[o]}const r=Gd.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Qn().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const o in e.uniforms){const l=e.uniforms[o];switch(r.uniforms[o]={},l.type){case"t":r.uniforms[o].value=n(l.value);break;case"c":r.uniforms[o].value=new Qn().setHex(l.value);break;case"v2":r.uniforms[o].value=new Et().fromArray(l.value);break;case"v3":r.uniforms[o].value=new $().fromArray(l.value);break;case"v4":r.uniforms[o].value=new Dt().fromArray(l.value);break;case"m3":r.uniforms[o].value=new xr().fromArray(l.value);break;case"m4":r.uniforms[o].value=new _i().fromArray(l.value);break;default:r.uniforms[o].value=l.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const o in e.extensions)r.extensions[o]=e.extensions[o];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=n(e.map)),e.matcap!==void 0&&(r.matcap=n(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),r.normalScale=new Et().fromArray(o)}return e.displacementMap!==void 0&&(r.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=n(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Et().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:xm,SpriteMaterial:mh,RawShaderMaterial:Sm,ShaderMaterial:Za,PointsMaterial:Sh,MeshPhysicalMaterial:Mm,MeshStandardMaterial:Nh,MeshPhongMaterial:bm,MeshToonMaterial:wm,MeshNormalMaterial:Em,MeshLambertMaterial:Tm,MeshDepthMaterial:dh,MeshDistanceMaterial:hh,MeshBasicMaterial:ha,MeshMatcapMaterial:Am,LineDashedMaterial:Cm,LineBasicMaterial:ol,Material:Oo};return new t[e]}}class Wh{static decodeText(e){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(n){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Xm extends wi{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Zm extends vl{constructor(e){super(e)}load(e,t,n,r){const o=this,l=new Fc(o.manager);l.setPath(o.path),l.setRequestHeader(o.requestHeader),l.setWithCredentials(o.withCredentials),l.load(e,function(c){try{t(o.parse(JSON.parse(c)))}catch(f){r?r(f):console.error(f),o.manager.itemError(e)}},n,r)}parse(e){const t={},n={};function r(S,E){if(t[E]!==void 0)return t[E];const T=S.interleavedBuffers[E],b=o(S,T.buffer),B=mo(T.type,b),D=new cd(B,T.stride);return D.uuid=T.uuid,t[E]=D,D}function o(S,E){if(n[E]!==void 0)return n[E];const T=S.arrayBuffers[E],b=new Uint32Array(T).buffer;return n[E]=b,b}const l=e.isInstancedBufferGeometry?new Xm:new wi,c=e.data.index;if(c!==void 0){const S=mo(c.type,c.array);l.setIndex(new hs(S,1))}const f=e.data.attributes;for(const S in f){const E=f[S];let I;if(E.isInterleavedBufferAttribute){const T=r(e.data,E.data);I=new bu(T,E.itemSize,E.offset,E.normalized)}else{const T=mo(E.type,E.array),b=E.isInstancedBufferAttribute?hf:hs;I=new b(T,E.itemSize,E.normalized)}E.name!==void 0&&(I.name=E.name),E.usage!==void 0&&I.setUsage(E.usage),E.updateRange!==void 0&&(I.updateRange.offset=E.updateRange.offset,I.updateRange.count=E.updateRange.count),l.setAttribute(S,I)}const h=e.data.morphAttributes;if(h)for(const S in h){const E=h[S],I=[];for(let T=0,b=E.length;T<b;T++){const B=E[T];let D;if(B.isInterleavedBufferAttribute){const W=r(e.data,B.data);D=new bu(W,B.itemSize,B.offset,B.normalized)}else{const W=mo(B.type,B.array);D=new hs(W,B.itemSize,B.normalized)}B.name!==void 0&&(D.name=B.name),I.push(D)}l.morphAttributes[S]=I}e.data.morphTargetsRelative&&(l.morphTargetsRelative=!0);const _=e.data.groups||e.data.drawcalls||e.data.offsets;if(_!==void 0)for(let S=0,E=_.length;S!==E;++S){const I=_[S];l.addGroup(I.start,I.count,I.materialIndex)}const x=e.data.boundingSphere;if(x!==void 0){const S=new $;x.center!==void 0&&S.fromArray(x.center),l.boundingSphere=new ka(S,x.radius)}return e.name&&(l.name=e.name),e.userData&&(l.userData=e.userData),l}}class my extends vl{constructor(e){super(e)}load(e,t,n,r){const o=this,l=this.path===""?Wh.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||l;const c=new Fc(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(f){let h=null;try{h=JSON.parse(f)}catch(_){r!==void 0&&r(_),console.error("THREE:ObjectLoader: Can't parse "+e+".",_.message);return}const g=h.metadata;if(g===void 0||g.type===void 0||g.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}o.parse(h,t)},n,r)}loadAsync(e,t){return Bc(this,null,function*(){const n=this,r=this.path===""?Wh.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const o=new Fc(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const l=yield o.loadAsync(e,t),c=JSON.parse(l),f=c.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return yield n.parseAsync(c)})}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,r),l=this.parseImages(e.images,function(){t!==void 0&&t(h)}),c=this.parseTextures(e.textures,l),f=this.parseMaterials(e.materials,c),h=this.parseObject(e.object,o,f,c,n),g=this.parseSkeletons(e.skeletons,h);if(this.bindSkeletons(h,g),t!==void 0){let _=!1;for(const x in l)if(l[x].data instanceof HTMLImageElement){_=!0;break}_===!1&&t(h)}return h}parseAsync(e){return Bc(this,null,function*(){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),o=yield this.parseImagesAsync(e.images),l=this.parseTextures(e.textures,o),c=this.parseMaterials(e.materials,l),f=this.parseObject(e.object,r,c,l,t),h=this.parseSkeletons(e.skeletons,f);return this.bindSkeletons(f,h),f})}parseShapes(e){const t={};if(e!==void 0)for(let n=0,r=e.length;n<r;n++){const o=new wu().fromJSON(e[n]);t[o.uuid]=o}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse(function(o){o.isBone&&(r[o.uuid]=o)}),e!==void 0)for(let o=0,l=e.length;o<l;o++){const c=new md().fromJSON(e[o],r);n[c.uuid]=c}return n}parseGeometries(e,t){const n={};if(e!==void 0){const r=new Zm;for(let o=0,l=e.length;o<l;o++){let c;const f=e[o];switch(f.type){case"BufferGeometry":case"InstancedBufferGeometry":c=r.parse(f);break;default:f.type in _m?c=_m[f.type].fromJSON(f,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${f.type}"`)}c.uuid=f.uuid,f.name!==void 0&&(c.name=f.name),f.userData!==void 0&&(c.userData=f.userData),n[f.uuid]=c}}return n}parseMaterials(e,t){const n={},r={};if(e!==void 0){const o=new Gd;o.setTextures(t);for(let l=0,c=e.length;l<c;l++){const f=e[l];n[f.uuid]===void 0&&(n[f.uuid]=o.parse(f)),r[f.uuid]=n[f.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const r=e[n],o=Xf.parse(r);t[o.uuid]=o}return t}parseImages(e,t){const n=this,r={};let o;function l(f){return n.manager.itemStart(f),o.load(f,function(){n.manager.itemEnd(f)},void 0,function(){n.manager.itemError(f),n.manager.itemEnd(f)})}function c(f){if(typeof f=="string"){const h=f,g=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:n.resourcePath+h;return l(g)}else return f.data?{data:mo(f.type,f.data),width:f.width,height:f.height}:null}if(e!==void 0&&e.length>0){const f=new kh(t);o=new Zf(f),o.setCrossOrigin(this.crossOrigin);for(let h=0,g=e.length;h<g;h++){const _=e[h],x=_.url;if(Array.isArray(x)){const S=[];for(let E=0,I=x.length;E<I;E++){const T=x[E],b=c(T);b!==null&&(b instanceof HTMLImageElement?S.push(b):S.push(new df(b.data,b.width,b.height)))}r[_.uuid]=new me(S)}else{const S=c(_.url);r[_.uuid]=new me(S)}}}return r}parseImagesAsync(e){return Bc(this,null,function*(){const t=this,n={};let r;function o(l){return Bc(this,null,function*(){if(typeof l=="string"){const c=l,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:t.resourcePath+c;return yield r.loadAsync(f)}else return l.data?{data:mo(l.type,l.data),width:l.width,height:l.height}:null})}if(e!==void 0&&e.length>0){r=new Zf(this.manager),r.setCrossOrigin(this.crossOrigin);for(let l=0,c=e.length;l<c;l++){const f=e[l],h=f.url;if(Array.isArray(h)){const g=[];for(let _=0,x=h.length;_<x;_++){const S=h[_],E=yield o(S);E!==null&&(E instanceof HTMLImageElement?g.push(E):g.push(new df(E.data,E.width,E.height)))}n[f.uuid]=new me(g)}else{const g=yield o(f.url);n[f.uuid]=new me(g)}}}return n})}parseTextures(e,t){function n(o,l){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),l[o])}const r={};if(e!==void 0)for(let o=0,l=e.length;o<l;o++){const c=e[o];c.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',c.uuid),t[c.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",c.image);const f=t[c.image],h=f.data;let g;Array.isArray(h)?(g=new Fl,h.length===6&&(g.needsUpdate=!0)):(h&&h.data?g=new df:g=new je,h&&(g.needsUpdate=!0)),g.source=f,g.uuid=c.uuid,c.name!==void 0&&(g.name=c.name),c.mapping!==void 0&&(g.mapping=n(c.mapping,gy)),c.channel!==void 0&&(g.channel=c.channel),c.offset!==void 0&&g.offset.fromArray(c.offset),c.repeat!==void 0&&g.repeat.fromArray(c.repeat),c.center!==void 0&&g.center.fromArray(c.center),c.rotation!==void 0&&(g.rotation=c.rotation),c.wrap!==void 0&&(g.wrapS=n(c.wrap[0],Ym),g.wrapT=n(c.wrap[1],Ym)),c.format!==void 0&&(g.format=c.format),c.internalFormat!==void 0&&(g.internalFormat=c.internalFormat),c.type!==void 0&&(g.type=c.type),c.colorSpace!==void 0&&(g.colorSpace=c.colorSpace),c.encoding!==void 0&&(g.encoding=c.encoding),c.minFilter!==void 0&&(g.minFilter=n(c.minFilter,Km)),c.magFilter!==void 0&&(g.magFilter=n(c.magFilter,Km)),c.anisotropy!==void 0&&(g.anisotropy=c.anisotropy),c.flipY!==void 0&&(g.flipY=c.flipY),c.generateMipmaps!==void 0&&(g.generateMipmaps=c.generateMipmaps),c.premultiplyAlpha!==void 0&&(g.premultiplyAlpha=c.premultiplyAlpha),c.unpackAlignment!==void 0&&(g.unpackAlignment=c.unpackAlignment),c.compareFunction!==void 0&&(g.compareFunction=c.compareFunction),c.userData!==void 0&&(g.userData=c.userData),r[c.uuid]=g}return r}parseObject(e,t,n,r,o){let l;function c(x){return t[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",x),t[x]}function f(x){if(x!==void 0){if(Array.isArray(x)){const S=[];for(let E=0,I=x.length;E<I;E++){const T=x[E];n[T]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",T),S.push(n[T])}return S}return n[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),n[x]}}function h(x){return r[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",x),r[x]}let g,_;switch(e.type){case"Scene":l=new Lp,e.background!==void 0&&(Number.isInteger(e.background)?l.background=new Qn(e.background):l.background=h(e.background)),e.environment!==void 0&&(l.environment=h(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?l.fog=new ld(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(l.fog=new ad(e.fog.color,e.fog.density)),e.fog.name!==""&&(l.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(l.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(l.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":l=new oo(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(l.focus=e.focus),e.zoom!==void 0&&(l.zoom=e.zoom),e.filmGauge!==void 0&&(l.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(l.filmOffset=e.filmOffset),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"OrthographicCamera":l=new rd(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(l.zoom=e.zoom),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"AmbientLight":l=new Gm(e.color,e.intensity);break;case"DirectionalLight":l=new Hm(e.color,e.intensity);break;case"PointLight":l=new km(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":l=new Vm(e.color,e.intensity,e.width,e.height);break;case"SpotLight":l=new zm(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":l=new Nm(e.color,e.groundColor,e.intensity);break;case"LightProbe":l=new jm().fromJSON(e);break;case"SkinnedMesh":g=c(e.geometry),_=f(e.material),l=new Wp(g,_),e.bindMode!==void 0&&(l.bindMode=e.bindMode),e.bindMatrix!==void 0&&l.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(l.skeleton=e.skeleton);break;case"Mesh":g=c(e.geometry),_=f(e.material),l=new es(g,_);break;case"InstancedMesh":g=c(e.geometry),_=f(e.material);const x=e.count,S=e.instanceMatrix,E=e.instanceColor;l=new Yp(g,_,x),l.instanceMatrix=new hf(new Float32Array(S.array),16),E!==void 0&&(l.instanceColor=new hf(new Float32Array(E.array),E.itemSize));break;case"LOD":l=new zp;break;case"Line":l=new tu(c(e.geometry),f(e.material));break;case"LineLoop":l=new em(c(e.geometry),f(e.material));break;case"LineSegments":l=new gc(c(e.geometry),f(e.material));break;case"PointCloud":case"Points":l=new nm(c(e.geometry),f(e.material));break;case"Sprite":l=new Up(f(e.material));break;case"Group":l=new af;break;case"Bone":l=new _h;break;default:l=new ds}if(l.uuid=e.uuid,e.name!==void 0&&(l.name=e.name),e.matrix!==void 0?(l.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(l.matrixAutoUpdate=e.matrixAutoUpdate),l.matrixAutoUpdate&&l.matrix.decompose(l.position,l.quaternion,l.scale)):(e.position!==void 0&&l.position.fromArray(e.position),e.rotation!==void 0&&l.rotation.fromArray(e.rotation),e.quaternion!==void 0&&l.quaternion.fromArray(e.quaternion),e.scale!==void 0&&l.scale.fromArray(e.scale)),e.up!==void 0&&l.up.fromArray(e.up),e.castShadow!==void 0&&(l.castShadow=e.castShadow),e.receiveShadow!==void 0&&(l.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(l.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(l.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(l.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&l.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(l.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(l.visible=e.visible),e.frustumCulled!==void 0&&(l.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(l.renderOrder=e.renderOrder),e.userData!==void 0&&(l.userData=e.userData),e.layers!==void 0&&(l.layers.mask=e.layers),e.children!==void 0){const x=e.children;for(let S=0;S<x.length;S++)l.add(this.parseObject(x[S],t,n,r,o))}if(e.animations!==void 0){const x=e.animations;for(let S=0;S<x.length;S++){const E=x[S];l.animations.push(o[E])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(l.autoUpdate=e.autoUpdate);const x=e.levels;for(let S=0;S<x.length;S++){const E=x[S],I=l.getObjectByProperty("uuid",E.object);I!==void 0&&l.addLevel(I,E.distance,E.hysteresis)}}return l}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const r=t[n.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(r,n.bindMatrix)}})}}const gy={UVMapping:ei,CubeReflectionMapping:ii,CubeRefractionMapping:ui,EquirectangularReflectionMapping:ls,EquirectangularRefractionMapping:Hr,CubeUVReflectionMapping:Xi},Ym={RepeatWrapping:Wr,ClampToEdgeWrapping:Ln,MirroredRepeatWrapping:Ts},Km={NearestFilter:Q,NearestMipmapNearestFilter:ye,NearestMipmapLinearFilter:ge,LinearFilter:Ht,LinearMipmapNearestFilter:Jt,LinearMipmapLinearFilter:ht};class vy extends vl{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=Ru.get(e);if(l!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l;const c={};c.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",c.headers=this.requestHeader,fetch(e,c).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(f){Ru.add(e,f),t&&t(f),o.manager.itemEnd(e)}).catch(function(f){r&&r(f),o.manager.itemError(e),o.manager.itemEnd(e)}),o.manager.itemStart(e)}}let Vd;class jh{static getContext(){return Vd===void 0&&(Vd=new(window.AudioContext||window.webkitAudioContext)),Vd}static setContext(e){Vd=e}}class yy extends vl{constructor(e){super(e)}load(e,t,n,r){const o=this,l=new Fc(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(f){try{const h=f.slice(0);jh.getContext().decodeAudioData(h,function(_){t(_)},c)}catch(h){c(h)}},n,r);function c(f){r?r(f):console.error(f),o.manager.itemError(e)}}}const qm=new _i,Jm=new _i,Pu=new _i;class _y{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new oo,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new oo,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Pu.copy(e.projectionMatrix);const r=t.eyeSep/2,o=r*t.near/t.focus,l=t.near*Math.tan(xo*t.fov*.5)/t.zoom;let c,f;Jm.elements[12]=-r,qm.elements[12]=r,c=-l*t.aspect+o,f=l*t.aspect+o,Pu.elements[0]=2*t.near/(f-c),Pu.elements[8]=(f+c)/(f-c),this.cameraL.projectionMatrix.copy(Pu),c=-l*t.aspect-o,f=l*t.aspect-o,Pu.elements[0]=2*t.near/(f-c),Pu.elements[8]=(f+c)/(f-c),this.cameraR.projectionMatrix.copy(Pu)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Jm),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(qm)}}class $m{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Qm(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Qm();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Qm(){return(typeof performance=="undefined"?Date:performance).now()}const Iu=new $,eg=new pr,xy=new $,Lu=new $;class Sy extends ds{constructor(){super(),this.type="AudioListener",this.context=jh.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new $m}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Iu,eg,xy),Lu.set(0,0,-1).applyQuaternion(eg),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Iu.x,r),t.positionY.linearRampToValueAtTime(Iu.y,r),t.positionZ.linearRampToValueAtTime(Iu.z,r),t.forwardX.linearRampToValueAtTime(Lu.x,r),t.forwardY.linearRampToValueAtTime(Lu.y,r),t.forwardZ.linearRampToValueAtTime(Lu.z,r),t.upX.linearRampToValueAtTime(n.x,r),t.upY.linearRampToValueAtTime(n.y,r),t.upZ.linearRampToValueAtTime(n.z,r)}else t.setPosition(Iu.x,Iu.y,Iu.z),t.setOrientation(Lu.x,Lu.y,Lu.z,n.x,n.y,n.z)}}class tg extends ds{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Du=new $,ng=new pr,My=new $,Ou=new $;class by extends tg{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Du,ng,My),Ou.set(0,0,1).applyQuaternion(ng);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Du.x,n),t.positionY.linearRampToValueAtTime(Du.y,n),t.positionZ.linearRampToValueAtTime(Du.z,n),t.orientationX.linearRampToValueAtTime(Ou.x,n),t.orientationY.linearRampToValueAtTime(Ou.y,n),t.orientationZ.linearRampToValueAtTime(Ou.z,n)}else t.setPosition(Du.x,Du.y,Du.z),t.setOrientation(Ou.x,Ou.y,Ou.z)}}class wy{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class rg{constructor(e,t,n){this.binding=e,this.valueSize=n;let r,o,l;switch(t){case"quaternion":r=this._slerp,o=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":r=this._select,o=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:r=this._lerp,o=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=o,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,o=e*r+r;let l=this.cumulativeWeight;if(l===0){for(let c=0;c!==r;++c)n[o+c]=n[c];l=t}else{l+=t;const c=t/l;this._mixBufferRegion(n,o,0,c,r)}this.cumulativeWeight=l}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,o=this.cumulativeWeight,l=this.cumulativeWeightAdditive,c=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const f=t*this._origIndex;this._mixBufferRegion(n,r,f,1-o,t)}l>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let f=t,h=t+t;f!==h;++f)if(n[f]!==n[f+t]){c.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let o=n,l=r;o!==l;++o)t[o]=t[r+o%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,o){if(r>=.5)for(let l=0;l!==o;++l)e[t+l]=e[n+l]}_slerp(e,t,n,r){pr.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,o){const l=this._workIndex*o;pr.multiplyQuaternionsFlat(e,l,e,t,e,n),pr.slerpFlat(e,t,e,t,e,l,r)}_lerp(e,t,n,r,o){const l=1-r;for(let c=0;c!==o;++c){const f=t+c;e[f]=e[f]*l+e[n+c]*r}}_lerpAdditive(e,t,n,r,o){for(let l=0;l!==o;++l){const c=t+l;e[c]=e[c]+e[n+l]*r}}}const Xh="\\[\\]\\.:\\/",Ey=new RegExp("["+Xh+"]","g"),Zh="[^"+Xh+"]",Ty="[^"+Xh.replace("\\.","")+"]",Ay=/((?:WC+[\/:])*)/.source.replace("WC",Zh),Cy=/(WCOD+)?/.source.replace("WCOD",Ty),Ry=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Zh),Py=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Zh),Iy=new RegExp("^"+Ay+Cy+Ry+Py+"$"),Ly=["material","materials","bones","map"];class Dy{constructor(e,t,n){const r=n||Is.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=n.length;r!==o;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class Is{constructor(e,t,n){this.path=t,this.parsedPath=n||Is.parseTrackName(t),this.node=Is.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Is.Composite(e,t,n):new Is(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Ey,"")}static parseTrackName(e){const t=Iy.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const o=n.nodeName.substring(r+1);Ly.indexOf(o)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=o)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(o){for(let l=0;l<o.length;l++){const c=o[l];if(c.name===t||c.uuid===t)return c;const f=n(c.children);if(f)return f}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,o=n.length;r!==o;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,o=n.length;r!==o;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,o=n.length;r!==o;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,o=n.length;r!==o;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let o=t.propertyIndex;if(e||(e=Is.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let h=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let g=0;g<e.length;g++)if(e[g].name===h){h=g;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(h!==void 0){if(e[h]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[h]}}const l=e[r];if(l===void 0){const h=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+r+" but it wasn't found.",e);return}let c=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?c=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let f=this.BindingType.Direct;if(o!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}f=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=o}else l.fromArray!==void 0&&l.toArray!==void 0?(f=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(f=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=r;this.getValue=this.GetterByBindingType[f],this.setValue=this.SetterByBindingTypeAndVersioning[f][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Is.Composite=Dy,Is.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Is.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Is.prototype.GetterByBindingType=[Is.prototype._getValue_direct,Is.prototype._getValue_array,Is.prototype._getValue_arrayElement,Is.prototype._getValue_toArray],Is.prototype.SetterByBindingTypeAndVersioning=[[Is.prototype._setValue_direct,Is.prototype._setValue_direct_setNeedsUpdate,Is.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Is.prototype._setValue_array,Is.prototype._setValue_array_setNeedsUpdate,Is.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Is.prototype._setValue_arrayElement,Is.prototype._setValue_arrayElement_setNeedsUpdate,Is.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Is.prototype._setValue_fromArray,Is.prototype._setValue_fromArray_setNeedsUpdate,Is.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Oy{constructor(){this.isAnimationObjectGroup=!0,this.uuid=jr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,o=this._bindings,l=o.length;let c,f=e.length,h=this.nCachedObjects_;for(let g=0,_=arguments.length;g!==_;++g){const x=arguments[g],S=x.uuid;let E=t[S];if(E===void 0){E=f++,t[S]=E,e.push(x);for(let I=0,T=l;I!==T;++I)o[I].push(new Is(x,n[I],r[I]))}else if(E<h){c=e[E];const I=--h,T=e[I];t[T.uuid]=E,e[E]=T,t[S]=I,e[I]=x;for(let b=0,B=l;b!==B;++b){const D=o[b],W=D[I];let ne=D[E];D[E]=W,ne===void 0&&(ne=new Is(x,n[b],r[b])),D[I]=ne}}else e[E]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=h}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let o=this.nCachedObjects_;for(let l=0,c=arguments.length;l!==c;++l){const f=arguments[l],h=f.uuid,g=t[h];if(g!==void 0&&g>=o){const _=o++,x=e[_];t[x.uuid]=g,e[g]=x,t[h]=_,e[_]=f;for(let S=0,E=r;S!==E;++S){const I=n[S],T=I[_],b=I[g];I[g]=T,I[_]=b}}}this.nCachedObjects_=o}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let o=this.nCachedObjects_,l=e.length;for(let c=0,f=arguments.length;c!==f;++c){const h=arguments[c],g=h.uuid,_=t[g];if(_!==void 0)if(delete t[g],_<o){const x=--o,S=e[x],E=--l,I=e[E];t[S.uuid]=_,e[_]=S,t[I.uuid]=x,e[x]=I,e.pop();for(let T=0,b=r;T!==b;++T){const B=n[T],D=B[x],W=B[E];B[_]=D,B[x]=W,B.pop()}}else{const x=--l,S=e[x];x>0&&(t[S.uuid]=_),e[_]=S,e.pop();for(let E=0,I=r;E!==I;++E){const T=n[E];T[_]=T[x],T.pop()}}}this.nCachedObjects_=o}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const o=this._bindings;if(r!==void 0)return o[r];const l=this._paths,c=this._parsedPaths,f=this._objects,h=f.length,g=this.nCachedObjects_,_=new Array(h);r=o.length,n[e]=r,l.push(e),c.push(t),o.push(_);for(let x=g,S=f.length;x!==S;++x){const E=f[x];_[x]=new Is(E,e,t)}return _}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const r=this._paths,o=this._parsedPaths,l=this._bindings,c=l.length-1,f=l[c],h=e[c];t[h]=n,l[n]=f,l.pop(),o[n]=o[c],o.pop(),r[n]=r[c],r.pop()}}}class ig{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const o=t.tracks,l=o.length,c=new Array(l),f={endingStart:no,endingEnd:no};for(let h=0;h!==l;++h){const g=o[h].createInterpolant(null);c[h]=g,g.settings=f}this._interpolantSettings=f,this._interpolants=c,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=_a,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const r=this._clip.duration,o=e._clip.duration,l=o/r,c=r/o;e.warp(1,l,t),this.warp(c,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,o=r.time,l=this.timeScale;let c=this._timeScaleInterpolant;c===null&&(c=r._lendControlInterpolant(),this._timeScaleInterpolant=c);const f=c.parameterPositions,h=c.sampleValues;return f[0]=o,f[1]=o+n,h[0]=e/l,h[1]=t/l,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}const o=this._startTime;if(o!==null){const f=(e-o)*n;f<0||n===0?t=0:(this._startTime=null,t=n*f)}t*=this._updateTimeScale(e);const l=this._updateTime(t),c=this._updateWeight(e);if(c>0){const f=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case oi:for(let g=0,_=f.length;g!==_;++g)f[g].evaluate(l),h[g].accumulateAdditive(c);break;case To:default:for(let g=0,_=f.length;g!==_;++g)f[g].evaluate(l),h[g].accumulate(r,c)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,o=this._loopCount;const l=n===ks;if(e===0)return o===-1?r:l&&(o&1)===1?t-r:r;if(n===Ca){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),r>=t||r<0){const c=Math.floor(r/t);r-=t*c,o+=Math.abs(c);const f=this.repetitions-o;if(f<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(f===1){const h=e<0;this._setEndings(h,!h,l)}else this._setEndings(!1,!1,l);this._loopCount=o,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:c})}}else this.time=r;if(l&&(o&1)===1)return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=Ni,r.endingEnd=Ni):(e?r.endingStart=this.zeroSlopeAtStart?Ni:no:r.endingStart=Vs,t?r.endingEnd=this.zeroSlopeAtEnd?Ni:no:r.endingEnd=Vs)}_scheduleFading(e,t,n){const r=this._mixer,o=r.time;let l=this._weightInterpolant;l===null&&(l=r._lendControlInterpolant(),this._weightInterpolant=l);const c=l.parameterPositions,f=l.sampleValues;return c[0]=o,f[0]=t,c[1]=o+e,f[1]=n,this}}const Ny=new Float32Array(1);class Uy extends us{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,o=r.length,l=e._propertyBindings,c=e._interpolants,f=n.uuid,h=this._bindingsByRootAndName;let g=h[f];g===void 0&&(g={},h[f]=g);for(let _=0;_!==o;++_){const x=r[_],S=x.name;let E=g[S];if(E!==void 0)++E.referenceCount,l[_]=E;else{if(E=l[_],E!==void 0){E._cacheIndex===null&&(++E.referenceCount,this._addInactiveBinding(E,f,S));continue}const I=t&&t._propertyBindings[_].binding.parsedPath;E=new rg(Is.create(n,S,I),x.ValueTypeName,x.getValueSize()),++E.referenceCount,this._addInactiveBinding(E,f,S),l[_]=E}c[_].resultBuffer=E.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,r=e._clip.uuid,o=this._actionsByClip[r];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,r,n)}const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const o=t[n];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const o=t[n];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,o=this._actionsByClip;let l=o[t];if(l===void 0)l={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[t]=l;else{const c=l.knownActions;e._byClipCacheIndex=c.length,c.push(e)}e._cacheIndex=r.length,r.push(e),l.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const o=e._clip.uuid,l=this._actionsByClip,c=l[o],f=c.knownActions,h=f[f.length-1],g=e._byClipCacheIndex;h._byClipCacheIndex=g,f[g]=h,f.pop(),e._byClipCacheIndex=null;const _=c.actionByRoot,x=(e._localRoot||this._root).uuid;delete _[x],f.length===0&&delete l[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const o=t[n];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,o=t[r];e._cacheIndex=r,t[r]=e,o._cacheIndex=n,t[n]=o}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,o=t[r];e._cacheIndex=r,t[r]=e,o._cacheIndex=n,t[n]=o}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,o=this._bindings;let l=r[t];l===void 0&&(l={},r[t]=l),l[n]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,o=n.path,l=this._bindingsByRootAndName,c=l[r],f=t[t.length-1],h=e._cacheIndex;f._cacheIndex=h,t[h]=f,t.pop(),delete c[o],Object.keys(c).length===0&&delete l[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,o=t[r];e._cacheIndex=r,t[r]=e,o._cacheIndex=n,t[n]=o}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,o=t[r];e._cacheIndex=r,t[r]=e,o._cacheIndex=n,t[n]=o}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new zh(new Float32Array(2),new Float32Array(2),1,Ny),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,o=t[r];e.__cacheIndex=r,t[r]=e,o.__cacheIndex=n,t[n]=o}clipAction(e,t,n){const r=t||this._root,o=r.uuid;let l=typeof e=="string"?Xf.findByName(r,e):e;const c=l!==null?l.uuid:e,f=this._actionsByClip[c];let h=null;if(n===void 0&&(l!==null?n=l.blendMode:n=To),f!==void 0){const _=f.actionByRoot[o];if(_!==void 0&&_.blendMode===n)return _;h=f.knownActions[0],l===null&&(l=h._clip)}if(l===null)return null;const g=new ig(this,l,t,n);return this._bindAction(g,h),this._addInactiveAction(g,c,o),g}existingAction(e,t){const n=t||this._root,r=n.uuid,o=typeof e=="string"?Xf.findByName(n,e):e,l=o?o.uuid:e,c=this._actionsByClip[l];return c!==void 0&&c.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,o=Math.sign(e),l=this._accuIndex^=1;for(let h=0;h!==n;++h)t[h]._update(r,e,o,l);const c=this._bindings,f=this._nActiveBindings;for(let h=0;h!==f;++h)c[h].apply(l);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,o=r[n];if(o!==void 0){const l=o.knownActions;for(let c=0,f=l.length;c!==f;++c){const h=l[c];this._deactivateAction(h);const g=h._cacheIndex,_=t[t.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,_._cacheIndex=g,t[g]=_,t.pop(),this._removeInactiveBindingsForAction(h)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const l in n){const c=n[l].actionByRoot,f=c[t];f!==void 0&&(this._deactivateAction(f),this._removeInactiveAction(f))}const r=this._bindingsByRootAndName,o=r[t];if(o!==void 0)for(const l in o){const c=o[l];c.restoreOriginalState(),this._removeInactiveBinding(c)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class Yh{constructor(e){this.value=e}clone(){return new Yh(this.value.clone===void 0?this.value:this.value.clone())}}let Fy=0;class zy extends us{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Fy++}),this.name="",this.usage=bs,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,r=t.length;n<r;n++)this.uniforms.push(t[n].clone());return this}clone(){return new this.constructor().copy(this)}}class By extends cd{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class ky{constructor(e,t,n,r,o){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class Hy{constructor(e,t,n=0,r=1/0){this.ray=new Ll(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new Wl,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return Kh(e,this,n,t),n.sort(sg),n}intersectObjects(e,t=!0,n=[]){for(let r=0,o=e.length;r<o;r++)Kh(e[r],this,n,t);return n.sort(sg),n}}function sg(a,e){return a.distance-e.distance}function Kh(a,e,t,n){if(a.layers.test(e.layers)&&a.raycast(e,t),n===!0){const r=a.children;for(let o=0,l=r.length;o<l;o++)Kh(r[o],e,t,!0)}}class Gy{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Rs(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Vy{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}const og=new Et;class Wy{constructor(e=new Et(1/0,1/0),t=new Et(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=og.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,og).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ag=new $,Wd=new $;class jy{constructor(e=new $,t=new $){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){ag.subVectors(e,this.start),Wd.subVectors(this.end,this.start);const n=Wd.dot(Wd);let o=Wd.dot(ag)/n;return t&&(o=Rs(o,0,1)),o}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const lg=new $;class Xy extends ds{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new wi,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let l=0,c=1,f=32;l<f;l++,c++){const h=l/f*Math.PI*2,g=c/f*Math.PI*2;r.push(Math.cos(h),Math.sin(h),1,Math.cos(g),Math.sin(g),1)}n.setAttribute("position",new Cr(r,3));const o=new ol({fog:!1,toneMapped:!1});this.cone=new gc(n,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),lg.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(lg),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const iu=new $,jd=new _i,qh=new _i;class Zy extends gc{constructor(e){const t=cg(e),n=new wi,r=[],o=[],l=new Qn(0,0,1),c=new Qn(0,1,0);for(let h=0;h<t.length;h++){const g=t[h];g.parent&&g.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),o.push(l.r,l.g,l.b),o.push(c.r,c.g,c.b))}n.setAttribute("position",new Cr(r,3)),n.setAttribute("color",new Cr(o,3));const f=new ol({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,f),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");qh.copy(this.root.matrixWorld).invert();for(let o=0,l=0;o<t.length;o++){const c=t[o];c.parent&&c.parent.isBone&&(jd.multiplyMatrices(qh,c.matrixWorld),iu.setFromMatrixPosition(jd),r.setXYZ(l,iu.x,iu.y,iu.z),jd.multiplyMatrices(qh,c.parent.matrixWorld),iu.setFromMatrixPosition(jd),r.setXYZ(l+1,iu.x,iu.y,iu.z),l+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function cg(a){const e=[];a.isBone===!0&&e.push(a);for(let t=0;t<a.children.length;t++)e.push.apply(e,cg(a.children[t]));return e}class Yy extends es{constructor(e,t,n){const r=new Gf(t,4,2),o=new ha({wireframe:!0,fog:!1,toneMapped:!1});super(r,o),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Ky=new $,ug=new Qn,fg=new Qn;class qy extends ds{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new Hf(t);r.rotateY(Math.PI*.5),this.material=new ha({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=r.getAttribute("position"),l=new Float32Array(o.count*3);r.setAttribute("color",new hs(l,3)),this.add(new es(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");ug.copy(this.light.color),fg.copy(this.light.groundColor);for(let n=0,r=t.count;n<r;n++){const o=n<r/2?ug:fg;t.setXYZ(n,o.r,o.g,o.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Ky.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Jy extends gc{constructor(e=10,t=10,n=4473924,r=8947848){n=new Qn(n),r=new Qn(r);const o=t/2,l=e/t,c=e/2,f=[],h=[];for(let x=0,S=0,E=-c;x<=t;x++,E+=l){f.push(-c,0,E,c,0,E),f.push(E,0,-c,E,0,c);const I=x===o?n:r;I.toArray(h,S),S+=3,I.toArray(h,S),S+=3,I.toArray(h,S),S+=3,I.toArray(h,S),S+=3}const g=new wi;g.setAttribute("position",new Cr(f,3)),g.setAttribute("color",new Cr(h,3));const _=new ol({vertexColors:!0,toneMapped:!1});super(g,_),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class $y extends gc{constructor(e=10,t=16,n=8,r=64,o=4473924,l=8947848){o=new Qn(o),l=new Qn(l);const c=[],f=[];if(t>1)for(let _=0;_<t;_++){const x=_/t*(Math.PI*2),S=Math.sin(x)*e,E=Math.cos(x)*e;c.push(0,0,0),c.push(S,0,E);const I=_&1?o:l;f.push(I.r,I.g,I.b),f.push(I.r,I.g,I.b)}for(let _=0;_<n;_++){const x=_&1?o:l,S=e-e/n*_;for(let E=0;E<r;E++){let I=E/r*(Math.PI*2),T=Math.sin(I)*S,b=Math.cos(I)*S;c.push(T,0,b),f.push(x.r,x.g,x.b),I=(E+1)/r*(Math.PI*2),T=Math.sin(I)*S,b=Math.cos(I)*S,c.push(T,0,b),f.push(x.r,x.g,x.b)}}const h=new wi;h.setAttribute("position",new Cr(c,3)),h.setAttribute("color",new Cr(f,3));const g=new ol({vertexColors:!0,toneMapped:!1});super(h,g),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const dg=new $,Xd=new $,hg=new $;class Qy extends ds{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new wi;r.setAttribute("position",new Cr([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const o=new ol({fog:!1,toneMapped:!1});this.lightPlane=new tu(r,o),this.add(this.lightPlane),r=new wi,r.setAttribute("position",new Cr([0,0,0,0,0,1],3)),this.targetLine=new tu(r,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),dg.setFromMatrixPosition(this.light.matrixWorld),Xd.setFromMatrixPosition(this.light.target.matrixWorld),hg.subVectors(Xd,dg),this.lightPlane.lookAt(Xd),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Xd),this.targetLine.scale.z=hg.length()}}const Zd=new $,Xo=new dc;class e_ extends gc{constructor(e){const t=new wi,n=new ol({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],o=[],l={};c("n1","n2"),c("n2","n4"),c("n4","n3"),c("n3","n1"),c("f1","f2"),c("f2","f4"),c("f4","f3"),c("f3","f1"),c("n1","f1"),c("n2","f2"),c("n3","f3"),c("n4","f4"),c("p","n1"),c("p","n2"),c("p","n3"),c("p","n4"),c("u1","u2"),c("u2","u3"),c("u3","u1"),c("c","t"),c("p","c"),c("cn1","cn2"),c("cn3","cn4"),c("cf1","cf2"),c("cf3","cf4");function c(E,I){f(E),f(I)}function f(E){r.push(0,0,0),o.push(0,0,0),l[E]===void 0&&(l[E]=[]),l[E].push(r.length/3-1)}t.setAttribute("position",new Cr(r,3)),t.setAttribute("color",new Cr(o,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update();const h=new Qn(16755200),g=new Qn(16711680),_=new Qn(43775),x=new Qn(16777215),S=new Qn(3355443);this.setColors(h,g,_,x,S)}setColors(e,t,n,r,o){const c=this.geometry.getAttribute("color");c.setXYZ(0,e.r,e.g,e.b),c.setXYZ(1,e.r,e.g,e.b),c.setXYZ(2,e.r,e.g,e.b),c.setXYZ(3,e.r,e.g,e.b),c.setXYZ(4,e.r,e.g,e.b),c.setXYZ(5,e.r,e.g,e.b),c.setXYZ(6,e.r,e.g,e.b),c.setXYZ(7,e.r,e.g,e.b),c.setXYZ(8,e.r,e.g,e.b),c.setXYZ(9,e.r,e.g,e.b),c.setXYZ(10,e.r,e.g,e.b),c.setXYZ(11,e.r,e.g,e.b),c.setXYZ(12,e.r,e.g,e.b),c.setXYZ(13,e.r,e.g,e.b),c.setXYZ(14,e.r,e.g,e.b),c.setXYZ(15,e.r,e.g,e.b),c.setXYZ(16,e.r,e.g,e.b),c.setXYZ(17,e.r,e.g,e.b),c.setXYZ(18,e.r,e.g,e.b),c.setXYZ(19,e.r,e.g,e.b),c.setXYZ(20,e.r,e.g,e.b),c.setXYZ(21,e.r,e.g,e.b),c.setXYZ(22,e.r,e.g,e.b),c.setXYZ(23,e.r,e.g,e.b),c.setXYZ(24,t.r,t.g,t.b),c.setXYZ(25,t.r,t.g,t.b),c.setXYZ(26,t.r,t.g,t.b),c.setXYZ(27,t.r,t.g,t.b),c.setXYZ(28,t.r,t.g,t.b),c.setXYZ(29,t.r,t.g,t.b),c.setXYZ(30,t.r,t.g,t.b),c.setXYZ(31,t.r,t.g,t.b),c.setXYZ(32,n.r,n.g,n.b),c.setXYZ(33,n.r,n.g,n.b),c.setXYZ(34,n.r,n.g,n.b),c.setXYZ(35,n.r,n.g,n.b),c.setXYZ(36,n.r,n.g,n.b),c.setXYZ(37,n.r,n.g,n.b),c.setXYZ(38,r.r,r.g,r.b),c.setXYZ(39,r.r,r.g,r.b),c.setXYZ(40,o.r,o.g,o.b),c.setXYZ(41,o.r,o.g,o.b),c.setXYZ(42,o.r,o.g,o.b),c.setXYZ(43,o.r,o.g,o.b),c.setXYZ(44,o.r,o.g,o.b),c.setXYZ(45,o.r,o.g,o.b),c.setXYZ(46,o.r,o.g,o.b),c.setXYZ(47,o.r,o.g,o.b),c.setXYZ(48,o.r,o.g,o.b),c.setXYZ(49,o.r,o.g,o.b),c.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,r=1;Xo.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Qo("c",t,e,Xo,0,0,-1),Qo("t",t,e,Xo,0,0,1),Qo("n1",t,e,Xo,-n,-r,-1),Qo("n2",t,e,Xo,n,-r,-1),Qo("n3",t,e,Xo,-n,r,-1),Qo("n4",t,e,Xo,n,r,-1),Qo("f1",t,e,Xo,-n,-r,1),Qo("f2",t,e,Xo,n,-r,1),Qo("f3",t,e,Xo,-n,r,1),Qo("f4",t,e,Xo,n,r,1),Qo("u1",t,e,Xo,n*.7,r*1.1,-1),Qo("u2",t,e,Xo,-n*.7,r*1.1,-1),Qo("u3",t,e,Xo,0,r*2,-1),Qo("cf1",t,e,Xo,-n,0,1),Qo("cf2",t,e,Xo,n,0,1),Qo("cf3",t,e,Xo,0,-r,1),Qo("cf4",t,e,Xo,0,r,1),Qo("cn1",t,e,Xo,-n,0,-1),Qo("cn2",t,e,Xo,n,0,-1),Qo("cn3",t,e,Xo,0,-r,-1),Qo("cn4",t,e,Xo,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Qo(a,e,t,n,r,o,l){Zd.set(r,o,l).unproject(n);const c=e[a];if(c!==void 0){const f=t.getAttribute("position");for(let h=0,g=c.length;h<g;h++)f.setXYZ(c[h],Zd.x,Zd.y,Zd.z)}}const Yd=new ki;class t_ extends gc{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),o=new wi;o.setIndex(new hs(n,1)),o.setAttribute("position",new hs(r,3)),super(o,new ol({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Yd.setFromObject(this.object),Yd.isEmpty())return;const t=Yd.min,n=Yd.max,r=this.geometry.attributes.position,o=r.array;o[0]=n.x,o[1]=n.y,o[2]=n.z,o[3]=t.x,o[4]=n.y,o[5]=n.z,o[6]=t.x,o[7]=t.y,o[8]=n.z,o[9]=n.x,o[10]=t.y,o[11]=n.z,o[12]=n.x,o[13]=n.y,o[14]=t.z,o[15]=t.x,o[16]=n.y,o[17]=t.z,o[18]=t.x,o[19]=t.y,o[20]=t.z,o[21]=n.x,o[22]=t.y,o[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class n_ extends gc{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new wi;o.setIndex(new hs(n,1)),o.setAttribute("position",new Cr(r,3)),super(o,new ol({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class r_ extends tu{constructor(e,t=1,n=16776960){const r=n,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],l=new wi;l.setAttribute("position",new Cr(o,3)),l.computeBoundingSphere(),super(l,new ol({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const c=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],f=new wi;f.setAttribute("position",new Cr(c,3)),f.computeBoundingSphere(),this.add(new es(f,new ha({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const pg=new $;let Kd,Jh;class i_ extends ds{constructor(e=new $(0,0,1),t=new $(0,0,0),n=1,r=16776960,o=n*.2,l=o*.2){super(),this.type="ArrowHelper",Kd===void 0&&(Kd=new wi,Kd.setAttribute("position",new Cr([0,0,0,0,1,0],3)),Jh=new mf(0,.5,1,5,1),Jh.translate(0,-.5,0)),this.position.copy(t),this.line=new tu(Kd,new ol({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new es(Jh,new ha({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,o,l)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{pg.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(pg,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class s_ extends gc{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new wi;r.setAttribute("position",new Cr(t,3)),r.setAttribute("color",new Cr(n,3));const o=new ol({vertexColors:!0,toneMapped:!1});super(r,o),this.type="AxesHelper"}setColors(e,t,n){const r=new Qn,o=this.geometry.attributes.color.array;return r.set(e),r.toArray(o,0),r.toArray(o,3),r.set(t),r.toArray(o,6),r.toArray(o,9),r.set(n),r.toArray(o,12),r.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class o_{constructor(){this.type="ShapePath",this.color=new Qn,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Uf,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,o,l){return this.currentPath.bezierCurveTo(e,t,n,r,o,l),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(b){const B=[];for(let D=0,W=b.length;D<W;D++){const ne=b[D],ae=new wu;ae.curves=ne.curves,B.push(ae)}return B}function n(b,B){const D=B.length;let W=!1;for(let ne=D-1,ae=0;ae<D;ne=ae++){let ue=B[ne],Te=B[ae],j=Te.x-ue.x,ie=Te.y-ue.y;if(Math.abs(ie)>Number.EPSILON){if(ie<0&&(ue=B[ae],j=-j,Te=B[ne],ie=-ie),b.y<ue.y||b.y>Te.y)continue;if(b.y===ue.y){if(b.x===ue.x)return!0}else{const rt=ie*(b.x-ue.x)-j*(b.y-ue.y);if(rt===0)return!0;if(rt<0)continue;W=!W}}else{if(b.y!==ue.y)continue;if(Te.x<=b.x&&b.x<=ue.x||ue.x<=b.x&&b.x<=Te.x)return!0}}return W}const r=vc.isClockWise,o=this.subPaths;if(o.length===0)return[];let l,c,f;const h=[];if(o.length===1)return c=o[0],f=new wu,f.curves=c.curves,h.push(f),h;let g=!r(o[0].getPoints());g=e?!g:g;const _=[],x=[];let S=[],E=0,I;x[E]=void 0,S[E]=[];for(let b=0,B=o.length;b<B;b++)c=o[b],I=c.getPoints(),l=r(I),l=e?!l:l,l?(!g&&x[E]&&E++,x[E]={s:new wu,p:I},x[E].s.curves=c.curves,g&&E++,S[E]=[]):S[E].push({h:c,p:I[0]});if(!x[0])return t(o);if(x.length>1){let b=!1,B=0;for(let D=0,W=x.length;D<W;D++)_[D]=[];for(let D=0,W=x.length;D<W;D++){const ne=S[D];for(let ae=0;ae<ne.length;ae++){const ue=ne[ae];let Te=!0;for(let j=0;j<x.length;j++)n(ue.p,x[j].p)&&(D!==j&&B++,Te?(Te=!1,_[j].push(ue)):b=!0);Te&&_[D].push(ue)}}B>0&&b===!1&&(S=_)}let T;for(let b=0,B=x.length;b<B;b++){f=x[b].s,h.push(f),T=S[b];for(let D=0,W=T.length;D<W;D++)f.holes.push(T[D].h)}return h}}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:X}})),typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=X)},76248:function(an,St,se){"use strict";se.d(St,{X:function(){return X}});function X(te,Ue){if(Object.is(te,Ue))return!0;if(typeof te!="object"||te===null||typeof Ue!="object"||Ue===null)return!1;if(te instanceof Map&&Ue instanceof Map){if(te.size!==Ue.size)return!1;for(const[fn,de]of te)if(!Object.is(de,Ue.get(fn)))return!1;return!0}if(te instanceof Set&&Ue instanceof Set){if(te.size!==Ue.size)return!1;for(const fn of te)if(!Ue.has(fn))return!1;return!0}const Ut=Object.keys(te);if(Ut.length!==Object.keys(Ue).length)return!1;for(let fn=0;fn<Ut.length;fn++)if(!Object.prototype.hasOwnProperty.call(Ue,Ut[fn])||!Object.is(te[Ut[fn]],Ue[Ut[fn]]))return!1;return!0}var ce=(te,Ue)=>(console.warn("[DEPRECATED] Default export is deprecated. Instead use `import { shallow } from 'zustand/shallow'`."),X(te,Ue))}}]);
}());