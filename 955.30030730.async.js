!(function(){var Tp=Object.defineProperty,Ap=Object.defineProperties;var Pp=Object.getOwnPropertyDescriptors;var z0=Object.getOwnPropertySymbols;var dh=Object.prototype.hasOwnProperty,hh=Object.prototype.propertyIsEnumerable;var Uu=Math.pow,sd=(tn,qe,J)=>qe in tn?Tp(tn,qe,{enumerable:!0,configurable:!0,writable:!0,value:J}):tn[qe]=J,sn=(tn,qe)=>{for(var J in qe||(qe={}))dh.call(qe,J)&&sd(tn,J,qe[J]);if(z0)for(var J of z0(qe))hh.call(qe,J)&&sd(tn,J,qe[J]);return tn},zr=(tn,qe)=>Ap(tn,Pp(qe));var Lo=(tn,qe)=>{var J={};for(var L in tn)dh.call(tn,L)&&qe.indexOf(L)<0&&(J[L]=tn[L]);if(tn!=null&&z0)for(var L of z0(tn))qe.indexOf(L)<0&&hh.call(tn,L)&&(J[L]=tn[L]);return J};var ph=(tn,qe,J)=>(sd(tn,typeof qe!="symbol"?qe+"":qe,J),J);var Fl=(tn,qe,J)=>new Promise((L,x)=>{var g=$=>{try{T(J.next($))}catch(H){x(H)}},C=$=>{try{T(J.throw($))}catch(H){x(H)}},T=$=>$.done?L($.value):Promise.resolve($.value).then(g,C);T((J=J.apply(tn,qe)).next())});(self.webpackChunkkitchen_color_studio=self.webpackChunkkitchen_color_studio||[]).push([[955],{28771:function(tn,qe,J){"use strict";J.d(qe,{Z:function(){return H}});var L=J(185),x=J(50959),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"},C=g,T=J(20363),$=function(ce,oe){return x.createElement(T.Z,(0,L.Z)((0,L.Z)({},ce),{},{ref:oe,icon:C}))};$.displayName="DatabaseOutlined";var H=x.forwardRef($)},96208:function(tn,qe,J){"use strict";J.d(qe,{Z:function(){return H}});var L=J(185),x=J(50959),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-200 0H360v-72h304v72z"}}]},name:"delete",theme:"filled"},C=g,T=J(20363),$=function(ce,oe){return x.createElement(T.Z,(0,L.Z)((0,L.Z)({},ce),{},{ref:oe,icon:C}))};$.displayName="DeleteFilled";var H=x.forwardRef($)},51771:function(tn,qe,J){"use strict";var L=J(185),x=J(50959),g=J(28343),C=J(20363),T=function(H,K){return x.createElement(C.Z,(0,L.Z)((0,L.Z)({},H),{},{ref:K,icon:g.Z}))};T.displayName="DeleteOutlined",qe.Z=x.forwardRef(T)},76663:function(tn,qe,J){"use strict";var L=J(185),x=J(50959),g=J(65662),C=J(20363),T=function(H,K){return x.createElement(C.Z,(0,L.Z)((0,L.Z)({},H),{},{ref:K,icon:g.Z}))};T.displayName="DownOutlined",qe.Z=x.forwardRef(T)},15077:function(tn,qe,J){"use strict";var L=J(185),x=J(50959),g=J(34843),C=J(20363),T=function(H,K){return x.createElement(C.Z,(0,L.Z)((0,L.Z)({},H),{},{ref:K,icon:g.Z}))};T.displayName="DownloadOutlined",qe.Z=x.forwardRef(T)},13730:function(tn,qe,J){"use strict";J.d(qe,{Z:function(){return H}});var L=J(185),x=J(50959),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 305H624V192c0-17.7-14.3-32-32-32H184v-40c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v784c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V640h248v113c0 17.7 14.3 32 32 32h416c17.7 0 32-14.3 32-32V337c0-17.7-14.3-32-32-32zM184 568V232h368v336H184zm656 145H504v-73h112c4.4 0 8-3.6 8-8V377h216v336z"}}]},name:"flag",theme:"outlined"},C=g,T=J(20363),$=function(ce,oe){return x.createElement(T.Z,(0,L.Z)((0,L.Z)({},ce),{},{ref:oe,icon:C}))};$.displayName="FlagOutlined";var H=x.forwardRef($)},54818:function(tn,qe,J){"use strict";var L=J(185),x=J(50959),g=J(95379),C=J(20363),T=function(H,K){return x.createElement(C.Z,(0,L.Z)((0,L.Z)({},H),{},{ref:K,icon:g.Z}))};T.displayName="LeftOutlined",qe.Z=x.forwardRef(T)},96430:function(tn,qe,J){"use strict";var L=J(185),x=J(50959),g=J(38907),C=J(20363),T=function(H,K){return x.createElement(C.Z,(0,L.Z)((0,L.Z)({},H),{},{ref:K,icon:g.Z}))};T.displayName="PlusOutlined",qe.Z=x.forwardRef(T)},48601:function(tn,qe,J){"use strict";var L=J(185),x=J(50959),g=J(75006),C=J(20363),T=function(H,K){return x.createElement(C.Z,(0,L.Z)((0,L.Z)({},H),{},{ref:K,icon:g.Z}))};T.displayName="ReloadOutlined",qe.Z=x.forwardRef(T)},24886:function(tn,qe,J){"use strict";var L=J(185),x=J(50959),g=J(84646),C=J(20363),T=function(H,K){return x.createElement(C.Z,(0,L.Z)((0,L.Z)({},H),{},{ref:K,icon:g.Z}))};T.displayName="RightOutlined",qe.Z=x.forwardRef(T)},43562:function(tn,qe,J){"use strict";J.d(qe,{Z:function(){return H}});var L=J(185),x=J(50959),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M793 242H366v-74c0-6.7-7.7-10.4-12.9-6.3l-142 112a8 8 0 000 12.6l142 112c5.2 4.1 12.9.4 12.9-6.3v-74h415v470H175c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h618c35.3 0 64-28.7 64-64V306c0-35.3-28.7-64-64-64z"}}]},name:"rollback",theme:"outlined"},C=g,T=J(20363),$=function(ce,oe){return x.createElement(T.Z,(0,L.Z)((0,L.Z)({},ce),{},{ref:oe,icon:C}))};$.displayName="RollbackOutlined";var H=x.forwardRef($)},842:function(tn,qe,J){"use strict";J.d(qe,{Z:function(){return H}});var L=J(185),x=J(50959),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},C=g,T=J(20363),$=function(ce,oe){return x.createElement(T.Z,(0,L.Z)((0,L.Z)({},ce),{},{ref:oe,icon:C}))};$.displayName="SaveOutlined";var H=x.forwardRef($)},20802:function(tn,qe,J){"use strict";J.d(qe,{Z:function(){return H}});var L=J(185),x=J(50959),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"},C=g,T=J(20363),$=function(ce,oe){return x.createElement(T.Z,(0,L.Z)((0,L.Z)({},ce),{},{ref:oe,icon:C}))};$.displayName="TableOutlined";var H=x.forwardRef($)},57018:function(tn,qe,J){"use strict";var L=J(185),x=J(50959),g=J(64540),C=J(20363),T=function(H,K){return x.createElement(C.Z,(0,L.Z)((0,L.Z)({},H),{},{ref:K,icon:g.Z}))};T.displayName="UpOutlined",qe.Z=x.forwardRef(T)},99949:function(tn,qe,J){"use strict";J.d(qe,{Z:function(){return H}});var L=J(185),x=J(50959),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},C=g,T=J(20363),$=function(ce,oe){return x.createElement(T.Z,(0,L.Z)((0,L.Z)({},ce),{},{ref:oe,icon:C}))};$.displayName="UploadOutlined";var H=x.forwardRef($)},98570:function(tn,qe,J){"use strict";J.d(qe,{H:function(){return ve}});var L=J(185),x=J(66441),g=J(13730),C=J(28771),T=J(20802),$=J(43562),H=J(18559),K=J(50513),ce=J(59892),oe=J(17417),xe=J(59749),Se=J(52380),k=J(27346),rt=J(83349),lt=J(50959),Qt=J(58882),mt=J.n(Qt),Pt=J(84817),O=J(93251),Ye=J(75157),gt=J(12270),Ot=J(58583),Nt=J(84772),Ve,ke,dt,Et,Z=(0,Nt.kc)(function(_e,we){var de=_e.token,Y=_e.stylish,te=_e.cx,Oe=_e.css;return{container:te(we,Oe(Ve||(Ve=(0,Ot.Z)([`
          `,`
        `])),Y.textInfo)),empty:te("".concat(we,"-empty"),Oe(ke||(ke=(0,Ot.Z)([`
          padding: 8px;
          background: `,`;
          border-radius: 4px;
          .studio-empty-normal {
            margin: 12px 0;
          }
        `])),de.colorFillQuaternary)),json:te("".concat(we,"-json"),Oe(dt||(dt=(0,Ot.Z)([`
          border-radius: 4px;

          .react-json-view {
            background: none !important;
          }
        `])))),table:Oe(Et||(Et=(0,Ot.Z)([`
        .studio-table-cell {
          padding: 4px !important;
        }
      `])))}}),ye=J(11527),ge=function(we){var de=we.data,Y=we.collapsed,te=we.onVisibleChange,Oe=we.className,ee=we.renderEmpty,Ae=we.onEmptyClick,Te=we.showType,$e=Te===void 0?!0:Te,Je=we.extra,it=we.emptyAction,tt=we.style,St=we.columns,ot=we.onResetClick,Rt=we.prefixCls,Lt=(0,Ye.k2)("data-previewer",Rt),pt=(0,gt.r)(),Xe=pt.isDarkMode,Be=Z(Lt),Ct=Be.styles,Wt=Be.cx,Xt=(0,O.Z)(!1,{value:Y,onChange:te}),Yt=(0,x.Z)(Xt,2),wn=Yt[0],an=Yt[1],un=(0,lt.useState)(0),Tn=(0,x.Z)(un,2),yt=Tn[0],pe=Tn[1],Ce=(0,lt.useState)("object"),Ne=(0,x.Z)(Ce,2),Ze=Ne[0],et=Ne[1],Ft=(0,ye.jsx)(Pt.D,{align:"center",children:(0,ye.jsxs)(Pt.D,{gap:12,width:"fit-content",align:"center",children:[(0,ye.jsx)("div",{children:"\u6CA1\u6709\u6570\u636E\uFF1F\u6765\u8BD5\u8BD5 Demo \u5427"}),(0,ye.jsxs)(Pt.D,{direction:"horizontal",gap:8,children:[(0,ye.jsx)(ce.ZP,{icon:(0,ye.jsx)(g.Z,{}),type:"primary",ghost:!0,size:"small",onClick:Ae,children:"\u7ACB\u5373\u5C1D\u8BD5"}),it]})]})}),qt=(0,lt.useMemo)(function(){return(0,ye.jsxs)(Pt.D,{direction:"horizontal",align:"center",children:[(0,ye.jsx)(Pt.D,{children:(0,ye.jsx)(H.Z,{title:"\u663E\u793A\u4E3A".concat(Ze==="table"?"\u5BF9\u8C61":"\u8868\u683C"),placement:"bottom",icon:Ze==="table"?(0,ye.jsx)(C.Z,{}):(0,ye.jsx)(T.Z,{}),onClick:function(){et(Ze==="object"?"table":"object")}})}),(0,ye.jsx)(oe.Z,{type:"vertical",dashed:!0,style:{margin:"0 4px"}}),(0,ye.jsxs)(Pt.D,{horizontal:!0,gap:4,children:[(0,ye.jsx)(xe.Z,{title:"\u5373\u5C06\u91CD\u7F6E\u5217\u914D\u7F6E\u4E0E\u8868\u683C\u6570\u636E\uFF0C\u5176\u4F59\u914D\u7F6E\uFF08\u5206\u9875\u5668\u3001\u5DE5\u5177\u680F\u7B49\uFF09\u4FDD\u6301\u4E0D\u53D8\u3002\u786E\u5B9A\u91CD\u7F6E\u5417\uFF1F",placement:"left",onConfirm:ot,children:(0,ye.jsx)(H.Z,{title:"\u91CD\u7F6E\u6570\u636E",placement:"bottom",icon:(0,ye.jsx)($.Z,{})})}),Je?(0,ye.jsx)(ye.Fragment,{children:Je}):null]})]})},[Ze,ot,Je]);return(0,ye.jsx)("div",{className:Wt(Oe,Ct.container),style:tt,children:de?(0,ye.jsx)(K.Z,{title:"\u6570\u636E\u9884\u89C8",expand:!wn,onExpandChange:function(dn){an(!dn)},extra:function(dn){return dn?qt:null},children:(0,ye.jsx)(Pt.D,{children:Ze==="object"?(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Pt.D,{style:{overflow:"scroll",maxHeight:200,marginBottom:8},className:Ct.json,children:(0,ye.jsx)(mt(),{name:"\u7B2C".concat(yt+1,"\u6761\u6570\u636E"),collapseStringsAfterLength:22,enableClipboard:!1,src:de[yt],displayDataTypes:$e,theme:Xe?"railscasts":void 0})}),(0,ye.jsx)(oe.Z,{style:{margin:"12px 0"},dashed:!0}),(0,ye.jsx)(Pt.D,{align:"flex-end",children:(0,ye.jsx)(k.Z,{current:yt+1,showTotal:function(dn){return"\u5171 ".concat(dn," \u6761\u6570\u636E")},onChange:function(dn){pe(dn-1)},total:de.length,size:"small",pageSize:1})})]}):(0,ye.jsx)(rt.Z,{dataSource:de,size:"small",bordered:!0,className:Ct.table,pagination:!1,columns:St&&St.map(function($n){return(0,L.Z)((0,L.Z)({},$n),{},{ellipsis:!0})})})})}):(0,ye.jsx)("div",{className:Ct.empty,children:(0,ye.jsx)(Se.Z,{image:Se.Z.PRESENTED_IMAGE_SIMPLE,description:ee?ee(Ft):Ft})})})},ve=ge},3061:function(tn,qe,J){"use strict";J.d(qe,{_:function(){return mi}});var L=J(50959),x=J(75157),g=J(185),C=J(45389),T=J(66441),$=J(10422),H=function(){var D=function(j,m){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,w){v.__proto__=w}||function(v,w){for(var S in w)Object.prototype.hasOwnProperty.call(w,S)&&(v[S]=w[S])},D(j,m)};return function(j,m){D(j,m);function v(){this.constructor=j}j.prototype=m===null?Object.create(m):(v.prototype=m.prototype,new v)}}(),K=function(){return K=Object.assign||function(D){for(var j,m=1,v=arguments.length;m<v;m++){j=arguments[m];for(var w in j)Object.prototype.hasOwnProperty.call(j,w)&&(D[w]=j[w])}return D},K.apply(this,arguments)},ce={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},oe={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},xe={width:"20px",height:"20px",position:"absolute"},Se={top:K(K({},ce),{top:"-5px"}),right:K(K({},oe),{left:void 0,right:"-5px"}),bottom:K(K({},ce),{top:void 0,bottom:"-5px"}),left:K(K({},oe),{left:"-5px"}),topRight:K(K({},xe),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:K(K({},xe),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:K(K({},xe),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:K(K({},xe),{left:"-10px",top:"-10px",cursor:"nw-resize"})},k=function(D){H(j,D);function j(){var m=D!==null&&D.apply(this,arguments)||this;return m.onMouseDown=function(v){m.props.onResizeStart(v,m.props.direction)},m.onTouchStart=function(v){m.props.onResizeStart(v,m.props.direction)},m}return j.prototype.render=function(){return L.createElement("div",{className:this.props.className||"",style:K(K({position:"absolute",userSelect:"none"},Se[this.props.direction]),this.props.replaceStyles||{}),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart},this.props.children)},j}(L.PureComponent),rt=function(){var D=function(j,m){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,w){v.__proto__=w}||function(v,w){for(var S in w)Object.prototype.hasOwnProperty.call(w,S)&&(v[S]=w[S])},D(j,m)};return function(j,m){D(j,m);function v(){this.constructor=j}j.prototype=m===null?Object.create(m):(v.prototype=m.prototype,new v)}}(),lt=function(){return lt=Object.assign||function(D){for(var j,m=1,v=arguments.length;m<v;m++){j=arguments[m];for(var w in j)Object.prototype.hasOwnProperty.call(j,w)&&(D[w]=j[w])}return D},lt.apply(this,arguments)},Qt={width:"auto",height:"auto"},mt=function(D,j,m){return Math.max(Math.min(D,m),j)},Pt=function(D,j){return Math.round(D/j)*j},O=function(D,j){return new RegExp(D,"i").test(j)},Ye=function(D){return Boolean(D.touches&&D.touches.length)},gt=function(D){return Boolean((D.clientX||D.clientX===0)&&(D.clientY||D.clientY===0))},Ot=function(D,j,m){m===void 0&&(m=0);var v=j.reduce(function(S,z,ae){return Math.abs(z-D)<Math.abs(j[S]-D)?ae:S},0),w=Math.abs(j[v]-D);return m===0||w<m?j[v]:D},Nt=function(D){return D=D.toString(),D==="auto"||D.endsWith("px")||D.endsWith("%")||D.endsWith("vh")||D.endsWith("vw")||D.endsWith("vmax")||D.endsWith("vmin")?D:D+"px"},Ve=function(D,j,m,v){if(D&&typeof D=="string"){if(D.endsWith("px"))return Number(D.replace("px",""));if(D.endsWith("%")){var w=Number(D.replace("%",""))/100;return j*w}if(D.endsWith("vw")){var w=Number(D.replace("vw",""))/100;return m*w}if(D.endsWith("vh")){var w=Number(D.replace("vh",""))/100;return v*w}}return D},ke=function(D,j,m,v,w,S,z){return v=Ve(v,D.width,j,m),w=Ve(w,D.height,j,m),S=Ve(S,D.width,j,m),z=Ve(z,D.height,j,m),{maxWidth:typeof v=="undefined"?void 0:Number(v),maxHeight:typeof w=="undefined"?void 0:Number(w),minWidth:typeof S=="undefined"?void 0:Number(S),minHeight:typeof z=="undefined"?void 0:Number(z)}},dt=["as","style","className","grid","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],Et="__resizable_base__",Z=function(D){rt(j,D);function j(m){var v=D.call(this,m)||this;return v.ratio=1,v.resizable=null,v.parentLeft=0,v.parentTop=0,v.resizableLeft=0,v.resizableRight=0,v.resizableTop=0,v.resizableBottom=0,v.targetLeft=0,v.targetTop=0,v.appendBase=function(){if(!v.resizable||!v.window)return null;var w=v.parentNode;if(!w)return null;var S=v.window.document.createElement("div");return S.style.width="100%",S.style.height="100%",S.style.position="absolute",S.style.transform="scale(0, 0)",S.style.left="0",S.style.flex="0 0 100%",S.classList?S.classList.add(Et):S.className+=Et,w.appendChild(S),S},v.removeBase=function(w){var S=v.parentNode;S&&S.removeChild(w)},v.ref=function(w){w&&(v.resizable=w)},v.state={isResizing:!1,width:typeof(v.propsSize&&v.propsSize.width)=="undefined"?"auto":v.propsSize&&v.propsSize.width,height:typeof(v.propsSize&&v.propsSize.height)=="undefined"?"auto":v.propsSize&&v.propsSize.height,direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},v.onResizeStart=v.onResizeStart.bind(v),v.onMouseMove=v.onMouseMove.bind(v),v.onMouseUp=v.onMouseUp.bind(v),v}return Object.defineProperty(j.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||Qt},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"size",{get:function(){var m=0,v=0;if(this.resizable&&this.window){var w=this.resizable.offsetWidth,S=this.resizable.offsetHeight,z=this.resizable.style.position;z!=="relative"&&(this.resizable.style.position="relative"),m=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:w,v=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:S,this.resizable.style.position=z}return{width:m,height:v}},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"sizeStyle",{get:function(){var m=this,v=this.props.size,w=function(ae){if(typeof m.state[ae]=="undefined"||m.state[ae]==="auto")return"auto";if(m.propsSize&&m.propsSize[ae]&&m.propsSize[ae].toString().endsWith("%")){if(m.state[ae].toString().endsWith("%"))return m.state[ae].toString();var F=m.getParentSize(),X=Number(m.state[ae].toString().replace("px","")),P=X/F[ae]*100;return P+"%"}return Nt(m.state[ae])},S=v&&typeof v.width!="undefined"&&!this.state.isResizing?Nt(v.width):w("width"),z=v&&typeof v.height!="undefined"&&!this.state.isResizing?Nt(v.height):w("height");return{width:S,height:z}},enumerable:!1,configurable:!0}),j.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var m=this.appendBase();if(!m)return{width:0,height:0};var v=!1,w=this.parentNode.style.flexWrap;w!=="wrap"&&(v=!0,this.parentNode.style.flexWrap="wrap"),m.style.position="relative",m.style.minWidth="100%",m.style.minHeight="100%";var S={width:m.offsetWidth,height:m.offsetHeight};return v&&(this.parentNode.style.flexWrap=w),this.removeBase(m),S},j.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},j.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},j.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var m=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:m.flexBasis!=="auto"?m.flexBasis:void 0})}},j.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},j.prototype.createSizeForCssProperty=function(m,v){var w=this.propsSize&&this.propsSize[v];return this.state[v]==="auto"&&this.state.original[v]===m&&(typeof w=="undefined"||w==="auto")?"auto":m},j.prototype.calculateNewMaxFromBoundary=function(m,v){var w=this.props.boundsByDirection,S=this.state.direction,z=w&&O("left",S),ae=w&&O("top",S),F,X;if(this.props.bounds==="parent"){var P=this.parentNode;P&&(F=z?this.resizableRight-this.parentLeft:P.offsetWidth+(this.parentLeft-this.resizableLeft),X=ae?this.resizableBottom-this.parentTop:P.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(F=z?this.resizableRight:this.window.innerWidth-this.resizableLeft,X=ae?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(F=z?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),X=ae?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return F&&Number.isFinite(F)&&(m=m&&m<F?m:F),X&&Number.isFinite(X)&&(v=v&&v<X?v:X),{maxWidth:m,maxHeight:v}},j.prototype.calculateNewSizeFromDirection=function(m,v){var w=this.props.scale||1,S=this.props.resizeRatio||1,z=this.state,ae=z.direction,F=z.original,X=this.props,P=X.lockAspectRatio,W=X.lockAspectRatioExtraHeight,Fe=X.lockAspectRatioExtraWidth,Ge=F.width,ut=F.height,kt=W||0,Ht=Fe||0;return O("right",ae)&&(Ge=F.width+(m-F.x)*S/w,P&&(ut=(Ge-Ht)/this.ratio+kt)),O("left",ae)&&(Ge=F.width-(m-F.x)*S/w,P&&(ut=(Ge-Ht)/this.ratio+kt)),O("bottom",ae)&&(ut=F.height+(v-F.y)*S/w,P&&(Ge=(ut-kt)*this.ratio+Ht)),O("top",ae)&&(ut=F.height-(v-F.y)*S/w,P&&(Ge=(ut-kt)*this.ratio+Ht)),{newWidth:Ge,newHeight:ut}},j.prototype.calculateNewSizeFromAspectRatio=function(m,v,w,S){var z=this.props,ae=z.lockAspectRatio,F=z.lockAspectRatioExtraHeight,X=z.lockAspectRatioExtraWidth,P=typeof S.width=="undefined"?10:S.width,W=typeof w.width=="undefined"||w.width<0?m:w.width,Fe=typeof S.height=="undefined"?10:S.height,Ge=typeof w.height=="undefined"||w.height<0?v:w.height,ut=F||0,kt=X||0;if(ae){var Ht=(Fe-ut)*this.ratio+kt,ht=(Ge-ut)*this.ratio+kt,vt=(P-kt)/this.ratio+ut,ft=(W-kt)/this.ratio+ut,Gt=Math.max(P,Ht),An=Math.min(W,ht),Rn=Math.max(Fe,vt),Gn=Math.min(Ge,ft);m=mt(m,Gt,An),v=mt(v,Rn,Gn)}else m=mt(m,P,W),v=mt(v,Fe,Ge);return{newWidth:m,newHeight:v}},j.prototype.setBoundingClientRect=function(){if(this.props.bounds==="parent"){var m=this.parentNode;if(m){var v=m.getBoundingClientRect();this.parentLeft=v.left,this.parentTop=v.top}}if(this.props.bounds&&typeof this.props.bounds!="string"){var w=this.props.bounds.getBoundingClientRect();this.targetLeft=w.left,this.targetTop=w.top}if(this.resizable){var S=this.resizable.getBoundingClientRect(),z=S.left,ae=S.top,F=S.right,X=S.bottom;this.resizableLeft=z,this.resizableRight=F,this.resizableTop=ae,this.resizableBottom=X}},j.prototype.onResizeStart=function(m,v){if(!(!this.resizable||!this.window)){var w=0,S=0;if(m.nativeEvent&&gt(m.nativeEvent)?(w=m.nativeEvent.clientX,S=m.nativeEvent.clientY):m.nativeEvent&&Ye(m.nativeEvent)&&(w=m.nativeEvent.touches[0].clientX,S=m.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var z=this.props.onResizeStart(m,v,this.resizable);if(z===!1)return}this.props.size&&(typeof this.props.size.height!="undefined"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width!="undefined"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var ae,F=this.window.getComputedStyle(this.resizable);if(F.flexBasis!=="auto"){var X=this.parentNode;if(X){var P=this.window.getComputedStyle(X).flexDirection;this.flexDir=P.startsWith("row")?"row":"column",ae=F.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var W={original:{x:w,y:S,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:lt(lt({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(m.target).cursor||"auto"}),direction:v,flexBasis:ae};this.setState(W)}},j.prototype.onMouseMove=function(m){var v=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&Ye(m))try{m.preventDefault(),m.stopPropagation()}catch(Kr){}var w=this.props,S=w.maxWidth,z=w.maxHeight,ae=w.minWidth,F=w.minHeight,X=Ye(m)?m.touches[0].clientX:m.clientX,P=Ye(m)?m.touches[0].clientY:m.clientY,W=this.state,Fe=W.direction,Ge=W.original,ut=W.width,kt=W.height,Ht=this.getParentSize(),ht=ke(Ht,this.window.innerWidth,this.window.innerHeight,S,z,ae,F);S=ht.maxWidth,z=ht.maxHeight,ae=ht.minWidth,F=ht.minHeight;var vt=this.calculateNewSizeFromDirection(X,P),ft=vt.newHeight,Gt=vt.newWidth,An=this.calculateNewMaxFromBoundary(S,z);this.props.snap&&this.props.snap.x&&(Gt=Ot(Gt,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(ft=Ot(ft,this.props.snap.y,this.props.snapGap));var Rn=this.calculateNewSizeFromAspectRatio(Gt,ft,{width:An.maxWidth,height:An.maxHeight},{width:ae,height:F});if(Gt=Rn.newWidth,ft=Rn.newHeight,this.props.grid){var Gn=Pt(Gt,this.props.grid[0]),Pn=Pt(ft,this.props.grid[1]),kn=this.props.snapGap||0;Gt=kn===0||Math.abs(Gn-Gt)<=kn?Gn:Gt,ft=kn===0||Math.abs(Pn-ft)<=kn?Pn:ft}var Qn={width:Gt-Ge.width,height:ft-Ge.height};if(ut&&typeof ut=="string"){if(ut.endsWith("%")){var cn=Gt/Ht.width*100;Gt=cn+"%"}else if(ut.endsWith("vw")){var Zn=Gt/this.window.innerWidth*100;Gt=Zn+"vw"}else if(ut.endsWith("vh")){var cr=Gt/this.window.innerHeight*100;Gt=cr+"vh"}}if(kt&&typeof kt=="string"){if(kt.endsWith("%")){var cn=ft/Ht.height*100;ft=cn+"%"}else if(kt.endsWith("vw")){var Zn=ft/this.window.innerWidth*100;ft=Zn+"vw"}else if(kt.endsWith("vh")){var cr=ft/this.window.innerHeight*100;ft=cr+"vh"}}var Er={width:this.createSizeForCssProperty(Gt,"width"),height:this.createSizeForCssProperty(ft,"height")};this.flexDir==="row"?Er.flexBasis=Er.width:this.flexDir==="column"&&(Er.flexBasis=Er.height),(0,$.flushSync)(function(){v.setState(Er)}),this.props.onResize&&this.props.onResize(m,Fe,this.resizable,Qn)}},j.prototype.onMouseUp=function(m){var v=this.state,w=v.isResizing,S=v.direction,z=v.original;if(!(!w||!this.resizable)){var ae={width:this.size.width-z.width,height:this.size.height-z.height};this.props.onResizeStop&&this.props.onResizeStop(m,S,this.resizable,ae),this.props.size&&this.setState(this.props.size),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:lt(lt({},this.state.backgroundStyle),{cursor:"auto"})})}},j.prototype.updateSize=function(m){this.setState({width:m.width,height:m.height})},j.prototype.renderResizer=function(){var m=this,v=this.props,w=v.enable,S=v.handleStyles,z=v.handleClasses,ae=v.handleWrapperStyle,F=v.handleWrapperClass,X=v.handleComponent;if(!w)return null;var P=Object.keys(w).map(function(W){return w[W]!==!1?L.createElement(k,{key:W,direction:W,onResizeStart:m.onResizeStart,replaceStyles:S&&S[W],className:z&&z[W]},X&&X[W]?X[W]:null):null});return L.createElement("div",{className:F,style:ae},P)},j.prototype.render=function(){var m=this,v=Object.keys(this.props).reduce(function(z,ae){return dt.indexOf(ae)!==-1||(z[ae]=m.props[ae]),z},{}),w=lt(lt(lt({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(w.flexBasis=this.state.flexBasis);var S=this.props.as||"div";return L.createElement(S,lt({ref:this.ref,style:w,className:this.props.className},v),this.state.isResizing&&L.createElement("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer())},j.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},j}(L.PureComponent),ye=J(96522),ge=J(93251),ve=J(76663),_e=J(57018),we=J(54818),de=J(24886),Y=J(58583),te=J(84772),Oe,ee,Ae,Te,$e,Je,it,tt,St,ot,Rt,Lt,pt,Xe=(0,te.kc)(function(D,j){var m=D.token,v=(0,te.iv)(Oe||(Oe=(0,Y.Z)([`
    position: relative;
    &::before {
      position: absolute;
      z-index: 50;
      transition: all 0.3s ease-in-out;
      content: '';
    }

    &:hover,
    &:active {
      &::before {
        background: `,`;
      }
    }
  `])),m.colorPrimary),w=(0,te.iv)(ee||(ee=(0,Y.Z)([`
    position: absolute;
    opacity: 0;
    z-index: 1001;
    transition: opacity 0.1s;

    border-radius: 4px;
    cursor: pointer;
    background: `,`;
    border-width: 1px;
    border-style: solid;
    color: `,`;
    border-color: `,`;

    &:hover {
      color: `,`;
      background: `,`;
    }
  `])),m.colorBgElevated,m.colorTextTertiary,m.colorBorder,m.colorTextSecondary,m.colorFillQuaternary),S=17,z=40,ae=16;return{container:(0,te.cx)(j,(0,te.iv)(Ae||(Ae=(0,Y.Z)([`
        flex-shrink: 0;
        position: relative;
        border: 0 solid `,`;

        &:hover {
          .`,`-toggle {
            opacity: 1;
          }
        }
      `])),m.colorSplit,j)),toggleLeft:(0,te.cx)("".concat(j,"-toggle"),"".concat(j,"-toggle-left"),w,(0,te.iv)(Te||(Te=(0,Y.Z)([`
        width: `,`px;
        height: `,`px;
        left: -`,`px;
        top: 50%;
        margin-top: -20px;
        border-radius: 4px 0 0 4px;
        border-right-width: 0;
      `])),ae,z,S)),toggleRight:(0,te.cx)("".concat(j,"-toggle"),"".concat(j,"-toggle-right"),w,(0,te.iv)($e||($e=(0,Y.Z)([`
        width: `,`px;
        height: `,`px;
        right: -`,`px;
        top: 50%;
        margin-top: -20px;
        border-radius: 0 4px 4px 0;
        border-left-width: 0;
      `])),ae,z,S)),toggleTop:(0,te.cx)("".concat(j,"-toggle"),"".concat(j,"-toggle-top"),w,(0,te.iv)(Je||(Je=(0,Y.Z)([`
        height: `,`px;
        width: `,`px;
        top: -`,`px;
        left: 50%;
        margin-left: -20px;
        border-radius: 4px 4px 0 0;
        border-bottom-width: 0;
      `])),ae,z,S)),toggleBottom:(0,te.cx)("".concat(j,"-toggle"),"".concat(j,"-toggle-bottom"),w,(0,te.iv)(it||(it=(0,Y.Z)([`
        height: 16px;
        width: `,`px;
        bottom: -`,`px;
        left: 50%;
        margin-left: -20px;
        border-radius: 0 0 4px 4px;
        border-top-width: 0;
      `])),z,S)),fixed:(0,te.cx)("".concat(j,"-fixed"),(0,te.iv)(tt||(tt=(0,Y.Z)([`
        background: `,`;
        overflow: hidden;
      `])),m.colorBgContainer)),float:(0,te.cx)("".concat(j,"-float"),(0,te.iv)(St||(St=(0,Y.Z)([`
        overflow: hidden;
        border-radius: 8px;
        background: `,`;
        box-shadow: `,`;
        z-index: 2000;
      `])),m.colorBgElevated,m.boxShadowSecondary)),leftHandle:(0,te.cx)((0,te.iv)(ot||(ot=(0,Y.Z)([`
        `,`;

        &::before {
          left: 50%;
          width: 2px;
          height: 100%;
        }
      `])),v),"".concat(j,"-left-handle")),rightHandle:(0,te.cx)((0,te.iv)(Rt||(Rt=(0,Y.Z)([`
        `,`;
        &::before {
          right: 50%;
          width: 2px;
          height: 100%;
        }
      `])),v),"".concat(j,"-right-handle")),topHandle:(0,te.cx)("".concat(j,"-top-handle"),(0,te.iv)(Lt||(Lt=(0,Y.Z)([`
        `,`;

        &::before {
          top: 50%;
          height: 2px;
          width: 100%;
        }
      `])),v)),bottomHandle:(0,te.cx)("".concat(j,"-bottom-handle"),(0,te.iv)(pt||(pt=(0,Y.Z)([`
        `,`;

        &::before {
          bottom: 50%;
          height: 2px;
          width: 100%;
        }
      `])),v))}}),Be=J(11527),Ct=150,Wt=400,Xt=function(j){switch(j){case"bottom":return"top";case"top":return"bottom";case"right":return"left";case"left":return"right"}},Yt=(0,L.memo)(function(D){var j=D.children,m=D.placement,v=m===void 0?"right":m,w=D.resize,S=D.style,z=D.size,ae=D.defaultSize,F=D.minWidth,X=D.minHeight,P=D.prefixCls,W=D.onSizeChange,Fe=D.onSizeDragging,Ge=D.expandable,ut=Ge===void 0?!0:Ge,kt=D.isExpand,Ht=D.onExpandChange,ht=D.className,vt=(0,x.k2)("draggable-panel",P),ft=v==="top"||v==="bottom",Gt=Xe(vt),An=Gt.styles,Rn=Gt.cx,Gn=(0,ge.Z)(!0,{value:kt,onChange:Ht}),Pn=(0,T.Z)(Gn,2),kn=Pn[0],Qn=Pn[1],cn=w!==!1&&kn,Zn=(0,L.useMemo)(function(){return cn?(0,C.Z)({},Xt(v),An["".concat(Xt(v),"Handle")]):{}},[cn,v]),cr=(0,g.Z)((0,C.Z)({top:!1,bottom:!1,right:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},Xt(v),!0),w),Er=(0,L.useMemo)(function(){return ft?(0,g.Z)({width:"100%",height:Ct},ae):(0,g.Z)({width:Wt,height:"100%"},ae)},[ft]),Kr=kn?{minWidth:typeof F=="number"?Math.max(F,0):280,minHeight:typeof X=="number"?Math.max(X,0):void 0,defaultSize:Er,size:z,style:S}:{minWidth:0,minHeight:0,size:{width:0,height:0}},bi=(0,L.useMemo)(function(){switch(v){case"top":return{className:"Bottom",Arrow:ve.Z};case"bottom":return{className:"Top",Arrow:_e.Z};case"right":return{className:"Left",Arrow:we.Z};case"left":return{className:"Right",Arrow:de.Z}}},[An,v]),li=bi.Arrow,fi=bi.className;return(0,Be.jsxs)("div",{className:Rn(An.container,ht),style:(0,C.Z)({},"border".concat(fi,"Width"),1),children:[ut&&(0,Be.jsx)(ye.Z,{className:Rn(An["toggle".concat(fi)]),onClick:function(){Qn(!kn)},style:{opacity:kn?void 0:1},children:(0,Be.jsx)(li,{rotate:kn?180:0})}),(0,Be.jsx)(Z,(0,g.Z)((0,g.Z)({},Kr),{},{className:An.fixed,enable:cn?cr:void 0,handleClasses:Zn,onResizeStop:function(Ii,Or,Gr,Di){W==null||W(Di,{width:Gr.style.width,height:Gr.style.height})},onResize:function(Ii,Or,Gr,Di){Fe==null||Fe(Di,{width:Gr.style.width,height:Gr.style.height})},children:j}))]})}),wn=J(74901),an=J.n(wn),un=function(){var D=function(j,m){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,w){v.__proto__=w}||function(v,w){for(var S in w)Object.prototype.hasOwnProperty.call(w,S)&&(v[S]=w[S])},D(j,m)};return function(j,m){D(j,m);function v(){this.constructor=j}j.prototype=m===null?Object.create(m):(v.prototype=m.prototype,new v)}}(),Tn=function(){return Tn=Object.assign||function(D){for(var j,m=1,v=arguments.length;m<v;m++){j=arguments[m];for(var w in j)Object.prototype.hasOwnProperty.call(j,w)&&(D[w]=j[w])}return D},Tn.apply(this,arguments)},yt={top:{width:"100%",height:"10px",top:"-5px",left:"0px",cursor:"row-resize"},right:{width:"10px",height:"100%",top:"0px",right:"-5px",cursor:"col-resize"},bottom:{width:"100%",height:"10px",bottom:"-5px",left:"0px",cursor:"row-resize"},left:{width:"10px",height:"100%",top:"0px",left:"-5px",cursor:"col-resize"},topRight:{width:"20px",height:"20px",position:"absolute",right:"-10px",top:"-10px",cursor:"ne-resize"},bottomRight:{width:"20px",height:"20px",position:"absolute",right:"-10px",bottom:"-10px",cursor:"se-resize"},bottomLeft:{width:"20px",height:"20px",position:"absolute",left:"-10px",bottom:"-10px",cursor:"sw-resize"},topLeft:{width:"20px",height:"20px",position:"absolute",left:"-10px",top:"-10px",cursor:"nw-resize"}},pe=function(D){un(j,D);function j(){var m=D!==null&&D.apply(this,arguments)||this;return m.onMouseDown=function(v){m.props.onResizeStart(v,m.props.direction)},m.onTouchStart=function(v){m.props.onResizeStart(v,m.props.direction)},m}return j.prototype.render=function(){return L.createElement("div",{className:this.props.className||"",style:Tn(Tn({position:"absolute",userSelect:"none"},yt[this.props.direction]),this.props.replaceStyles||{}),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart},this.props.children)},j}(L.PureComponent),Ce=J(69978),Ne=J.n(Ce),Ze=function(){var D=function(j,m){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,w){v.__proto__=w}||function(v,w){for(var S in w)Object.prototype.hasOwnProperty.call(w,S)&&(v[S]=w[S])},D(j,m)};return function(j,m){D(j,m);function v(){this.constructor=j}j.prototype=m===null?Object.create(m):(v.prototype=m.prototype,new v)}}(),et=function(){return et=Object.assign||function(D){for(var j,m=1,v=arguments.length;m<v;m++){j=arguments[m];for(var w in j)Object.prototype.hasOwnProperty.call(j,w)&&(D[w]=j[w])}return D},et.apply(this,arguments)},Ft={width:"auto",height:"auto"},qt=Ne()(function(D,j,m){return Math.max(Math.min(D,m),j)}),$n=Ne()(function(D,j){return Math.round(D/j)*j}),dn=Ne()(function(D,j){return new RegExp(D,"i").test(j)}),Me=function(D){return Boolean(D.touches&&D.touches.length)},Qe=function(D){return Boolean((D.clientX||D.clientX===0)&&(D.clientY||D.clientY===0))},Ke=Ne()(function(D,j,m){m===void 0&&(m=0);var v=j.reduce(function(S,z,ae){return Math.abs(z-D)<Math.abs(j[S]-D)?ae:S},0),w=Math.abs(j[v]-D);return m===0||w<m?j[v]:D}),at=Ne()(function(D,j){return D.substr(D.length-j.length,j.length)===j}),Bt=Ne()(function(D){return D=D.toString(),D==="auto"||at(D,"px")||at(D,"%")||at(D,"vh")||at(D,"vw")||at(D,"vmax")||at(D,"vmin")?D:D+"px"}),En=function(D,j,m,v){if(D&&typeof D=="string"){if(at(D,"px"))return Number(D.replace("px",""));if(at(D,"%")){var w=Number(D.replace("%",""))/100;return j*w}if(at(D,"vw")){var w=Number(D.replace("vw",""))/100;return m*w}if(at(D,"vh")){var w=Number(D.replace("vh",""))/100;return v*w}}return D},ln=Ne()(function(D,j,m,v,w,S,z){return v=En(v,D.width,j,m),w=En(w,D.height,j,m),S=En(S,D.width,j,m),z=En(z,D.height,j,m),{maxWidth:typeof v=="undefined"?void 0:Number(v),maxHeight:typeof w=="undefined"?void 0:Number(w),minWidth:typeof S=="undefined"?void 0:Number(S),minHeight:typeof z=="undefined"?void 0:Number(z)}}),zt=["as","style","className","grid","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],me="__resizable_base__",Ie=function(D){Ze(j,D);function j(m){var v=D.call(this,m)||this;return v.ratio=1,v.resizable=null,v.parentLeft=0,v.parentTop=0,v.resizableLeft=0,v.resizableRight=0,v.resizableTop=0,v.resizableBottom=0,v.targetLeft=0,v.targetTop=0,v.appendBase=function(){if(!v.resizable||!v.window)return null;var w=v.parentNode;if(!w)return null;var S=v.window.document.createElement("div");return S.style.width="100%",S.style.height="100%",S.style.position="absolute",S.style.transform="scale(0, 0)",S.style.left="0",S.style.flex="0 0 100%",S.classList?S.classList.add(me):S.className+=me,w.appendChild(S),S},v.removeBase=function(w){var S=v.parentNode;S&&S.removeChild(w)},v.ref=function(w){w&&(v.resizable=w)},v.state={isResizing:!1,width:typeof(v.propsSize&&v.propsSize.width)=="undefined"?"auto":v.propsSize&&v.propsSize.width,height:typeof(v.propsSize&&v.propsSize.height)=="undefined"?"auto":v.propsSize&&v.propsSize.height,direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},v.onResizeStart=v.onResizeStart.bind(v),v.onMouseMove=v.onMouseMove.bind(v),v.onMouseUp=v.onMouseUp.bind(v),v}return Object.defineProperty(j.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||Ft},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"size",{get:function(){var m=0,v=0;if(this.resizable&&this.window){var w=this.resizable.offsetWidth,S=this.resizable.offsetHeight,z=this.resizable.style.position;z!=="relative"&&(this.resizable.style.position="relative"),m=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:w,v=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:S,this.resizable.style.position=z}return{width:m,height:v}},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"sizeStyle",{get:function(){var m=this,v=this.props.size,w=function(ae){if(typeof m.state[ae]=="undefined"||m.state[ae]==="auto")return"auto";if(m.propsSize&&m.propsSize[ae]&&at(m.propsSize[ae].toString(),"%")){if(at(m.state[ae].toString(),"%"))return m.state[ae].toString();var F=m.getParentSize(),X=Number(m.state[ae].toString().replace("px","")),P=X/F[ae]*100;return P+"%"}return Bt(m.state[ae])},S=v&&typeof v.width!="undefined"&&!this.state.isResizing?Bt(v.width):w("width"),z=v&&typeof v.height!="undefined"&&!this.state.isResizing?Bt(v.height):w("height");return{width:S,height:z}},enumerable:!1,configurable:!0}),j.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var m=this.appendBase();if(!m)return{width:0,height:0};var v=!1,w=this.parentNode.style.flexWrap;w!=="wrap"&&(v=!0,this.parentNode.style.flexWrap="wrap"),m.style.position="relative",m.style.minWidth="100%",m.style.minHeight="100%";var S={width:m.offsetWidth,height:m.offsetHeight};return v&&(this.parentNode.style.flexWrap=w),this.removeBase(m),S},j.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},j.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},j.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var m=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:m.flexBasis!=="auto"?m.flexBasis:void 0})}},j.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},j.prototype.createSizeForCssProperty=function(m,v){var w=this.propsSize&&this.propsSize[v];return this.state[v]==="auto"&&this.state.original[v]===m&&(typeof w=="undefined"||w==="auto")?"auto":m},j.prototype.calculateNewMaxFromBoundary=function(m,v){var w=this.props.boundsByDirection,S=this.state.direction,z=w&&dn("left",S),ae=w&&dn("top",S),F,X;if(this.props.bounds==="parent"){var P=this.parentNode;P&&(F=z?this.resizableRight-this.parentLeft:P.offsetWidth+(this.parentLeft-this.resizableLeft),X=ae?this.resizableBottom-this.parentTop:P.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(F=z?this.resizableRight:this.window.innerWidth-this.resizableLeft,X=ae?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(F=z?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),X=ae?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return F&&Number.isFinite(F)&&(m=m&&m<F?m:F),X&&Number.isFinite(X)&&(v=v&&v<X?v:X),{maxWidth:m,maxHeight:v}},j.prototype.calculateNewSizeFromDirection=function(m,v){var w=this.props.scale||1,S=this.props.resizeRatio||1,z=this.state,ae=z.direction,F=z.original,X=this.props,P=X.lockAspectRatio,W=X.lockAspectRatioExtraHeight,Fe=X.lockAspectRatioExtraWidth,Ge=F.width,ut=F.height,kt=W||0,Ht=Fe||0;return dn("right",ae)&&(Ge=F.width+(m-F.x)*S/w,P&&(ut=(Ge-Ht)/this.ratio+kt)),dn("left",ae)&&(Ge=F.width-(m-F.x)*S/w,P&&(ut=(Ge-Ht)/this.ratio+kt)),dn("bottom",ae)&&(ut=F.height+(v-F.y)*S/w,P&&(Ge=(ut-kt)*this.ratio+Ht)),dn("top",ae)&&(ut=F.height-(v-F.y)*S/w,P&&(Ge=(ut-kt)*this.ratio+Ht)),{newWidth:Ge,newHeight:ut}},j.prototype.calculateNewSizeFromAspectRatio=function(m,v,w,S){var z=this.props,ae=z.lockAspectRatio,F=z.lockAspectRatioExtraHeight,X=z.lockAspectRatioExtraWidth,P=typeof S.width=="undefined"?10:S.width,W=typeof w.width=="undefined"||w.width<0?m:w.width,Fe=typeof S.height=="undefined"?10:S.height,Ge=typeof w.height=="undefined"||w.height<0?v:w.height,ut=F||0,kt=X||0;if(ae){var Ht=(Fe-ut)*this.ratio+kt,ht=(Ge-ut)*this.ratio+kt,vt=(P-kt)/this.ratio+ut,ft=(W-kt)/this.ratio+ut,Gt=Math.max(P,Ht),An=Math.min(W,ht),Rn=Math.max(Fe,vt),Gn=Math.min(Ge,ft);m=qt(m,Gt,An),v=qt(v,Rn,Gn)}else m=qt(m,P,W),v=qt(v,Fe,Ge);return{newWidth:m,newHeight:v}},j.prototype.setBoundingClientRect=function(){if(this.props.bounds==="parent"){var m=this.parentNode;if(m){var v=m.getBoundingClientRect();this.parentLeft=v.left,this.parentTop=v.top}}if(this.props.bounds&&typeof this.props.bounds!="string"){var w=this.props.bounds.getBoundingClientRect();this.targetLeft=w.left,this.targetTop=w.top}if(this.resizable){var S=this.resizable.getBoundingClientRect(),z=S.left,ae=S.top,F=S.right,X=S.bottom;this.resizableLeft=z,this.resizableRight=F,this.resizableTop=ae,this.resizableBottom=X}},j.prototype.onResizeStart=function(m,v){if(!(!this.resizable||!this.window)){var w=0,S=0;if(m.nativeEvent&&Qe(m.nativeEvent)?(w=m.nativeEvent.clientX,S=m.nativeEvent.clientY):m.nativeEvent&&Me(m.nativeEvent)&&(w=m.nativeEvent.touches[0].clientX,S=m.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var z=this.props.onResizeStart(m,v,this.resizable);if(z===!1)return}this.props.size&&(typeof this.props.size.height!="undefined"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width!="undefined"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var ae,F=this.window.getComputedStyle(this.resizable);if(F.flexBasis!=="auto"){var X=this.parentNode;if(X){var P=this.window.getComputedStyle(X).flexDirection;this.flexDir=P.startsWith("row")?"row":"column",ae=F.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var W={original:{x:w,y:S,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:et(et({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(m.target).cursor||"auto"}),direction:v,flexBasis:ae};this.setState(W)}},j.prototype.onMouseMove=function(m){if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&Me(m))try{m.preventDefault(),m.stopPropagation()}catch(Er){}var v=this.props,w=v.maxWidth,S=v.maxHeight,z=v.minWidth,ae=v.minHeight,F=Me(m)?m.touches[0].clientX:m.clientX,X=Me(m)?m.touches[0].clientY:m.clientY,P=this.state,W=P.direction,Fe=P.original,Ge=P.width,ut=P.height,kt=this.getParentSize(),Ht=ln(kt,this.window.innerWidth,this.window.innerHeight,w,S,z,ae);w=Ht.maxWidth,S=Ht.maxHeight,z=Ht.minWidth,ae=Ht.minHeight;var ht=this.calculateNewSizeFromDirection(F,X),vt=ht.newHeight,ft=ht.newWidth,Gt=this.calculateNewMaxFromBoundary(w,S);this.props.snap&&this.props.snap.x&&(ft=Ke(ft,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(vt=Ke(vt,this.props.snap.y,this.props.snapGap));var An=this.calculateNewSizeFromAspectRatio(ft,vt,{width:Gt.maxWidth,height:Gt.maxHeight},{width:z,height:ae});if(ft=An.newWidth,vt=An.newHeight,this.props.grid){var Rn=$n(ft,this.props.grid[0]),Gn=$n(vt,this.props.grid[1]),Pn=this.props.snapGap||0;ft=Pn===0||Math.abs(Rn-ft)<=Pn?Rn:ft,vt=Pn===0||Math.abs(Gn-vt)<=Pn?Gn:vt}var kn={width:ft-Fe.width,height:vt-Fe.height};if(Ge&&typeof Ge=="string"){if(at(Ge,"%")){var Qn=ft/kt.width*100;ft=Qn+"%"}else if(at(Ge,"vw")){var cn=ft/this.window.innerWidth*100;ft=cn+"vw"}else if(at(Ge,"vh")){var Zn=ft/this.window.innerHeight*100;ft=Zn+"vh"}}if(ut&&typeof ut=="string"){if(at(ut,"%")){var Qn=vt/kt.height*100;vt=Qn+"%"}else if(at(ut,"vw")){var cn=vt/this.window.innerWidth*100;vt=cn+"vw"}else if(at(ut,"vh")){var Zn=vt/this.window.innerHeight*100;vt=Zn+"vh"}}var cr={width:this.createSizeForCssProperty(ft,"width"),height:this.createSizeForCssProperty(vt,"height")};this.flexDir==="row"?cr.flexBasis=cr.width:this.flexDir==="column"&&(cr.flexBasis=cr.height),this.setState(cr),this.props.onResize&&this.props.onResize(m,W,this.resizable,kn)}},j.prototype.onMouseUp=function(m){var v=this.state,w=v.isResizing,S=v.direction,z=v.original;if(!(!w||!this.resizable)){var ae={width:this.size.width-z.width,height:this.size.height-z.height};this.props.onResizeStop&&this.props.onResizeStop(m,S,this.resizable,ae),this.props.size&&this.setState(this.props.size),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:et(et({},this.state.backgroundStyle),{cursor:"auto"})})}},j.prototype.updateSize=function(m){this.setState({width:m.width,height:m.height})},j.prototype.renderResizer=function(){var m=this,v=this.props,w=v.enable,S=v.handleStyles,z=v.handleClasses,ae=v.handleWrapperStyle,F=v.handleWrapperClass,X=v.handleComponent;if(!w)return null;var P=Object.keys(w).map(function(W){return w[W]!==!1?L.createElement(pe,{key:W,direction:W,onResizeStart:m.onResizeStart,replaceStyles:S&&S[W],className:z&&z[W]},X&&X[W]?X[W]:null):null});return L.createElement("div",{className:F,style:ae},P)},j.prototype.render=function(){var m=this,v=Object.keys(this.props).reduce(function(z,ae){return zt.indexOf(ae)!==-1||(z[ae]=m.props[ae]),z},{}),w=et(et(et({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(w.flexBasis=this.state.flexBasis);var S=this.props.as||"div";return L.createElement(S,et({ref:this.ref,style:w,className:this.props.className},v),this.state.isResizing&&L.createElement("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer())},j.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},j}(L.PureComponent);var ct=function(D,j){return ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,v){m.__proto__=v}||function(m,v){for(var w in v)v.hasOwnProperty(w)&&(m[w]=v[w])},ct(D,j)};function It(D,j){ct(D,j);function m(){this.constructor=D}D.prototype=j===null?Object.create(j):(m.prototype=j.prototype,new m)}var en=function(){return en=Object.assign||function(j){for(var m,v=1,w=arguments.length;v<w;v++){m=arguments[v];for(var S in m)Object.prototype.hasOwnProperty.call(m,S)&&(j[S]=m[S])}return j},en.apply(this,arguments)};function bn(D,j){var m={};for(var v in D)Object.prototype.hasOwnProperty.call(D,v)&&j.indexOf(v)<0&&(m[v]=D[v]);if(D!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,v=Object.getOwnPropertySymbols(D);w<v.length;w++)j.indexOf(v[w])<0&&Object.prototype.propertyIsEnumerable.call(D,v[w])&&(m[v[w]]=D[v[w]]);return m}var Vn=an(),tr={width:"auto",height:"auto",display:"inline-block",position:"absolute",top:0,left:0},lr=function(D){return{bottom:D,bottomLeft:D,bottomRight:D,left:D,right:D,top:D,topLeft:D,topRight:D}},Ar=function(D){It(j,D);function j(m){var v=D.call(this,m)||this;return v.resizingPosition={x:0,y:0},v.offsetFromParent={left:0,top:0},v.resizableElement={current:null},v.originalPosition={x:0,y:0},v.refDraggable=function(w){w&&(v.draggable=w)},v.refResizable=function(w){w&&(v.resizable=w,v.resizableElement.current=w.resizable)},v.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:m.maxWidth,maxHeight:m.maxHeight},v.onResizeStart=v.onResizeStart.bind(v),v.onResize=v.onResize.bind(v),v.onResizeStop=v.onResizeStop.bind(v),v.onDragStart=v.onDragStart.bind(v),v.onDrag=v.onDrag.bind(v),v.onDragStop=v.onDragStop.bind(v),v.getMaxSizesFromProps=v.getMaxSizesFromProps.bind(v),v}return j.prototype.componentDidMount=function(){this.updateOffsetFromParent();var m=this.offsetFromParent,v=m.left,w=m.top,S=this.getDraggablePosition(),z=S.x,ae=S.y;this.draggable.setState({x:z-v,y:ae-w}),this.forceUpdate()},j.prototype.getDraggablePosition=function(){var m=this.draggable.state,v=m.x,w=m.y;return{x:v,y:w}},j.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},j.prototype.getParentSize=function(){return this.resizable.getParentSize()},j.prototype.getMaxSizesFromProps=function(){var m=typeof this.props.maxWidth=="undefined"?Number.MAX_SAFE_INTEGER:this.props.maxWidth,v=typeof this.props.maxHeight=="undefined"?Number.MAX_SAFE_INTEGER:this.props.maxHeight;return{maxWidth:m,maxHeight:v}},j.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},j.prototype.getOffsetHeight=function(m){var v=this.props.scale;switch(this.props.bounds){case"window":return window.innerHeight/v;case"body":return document.body.offsetHeight/v;default:return m.offsetHeight}},j.prototype.getOffsetWidth=function(m){var v=this.props.scale;switch(this.props.bounds){case"window":return window.innerWidth/v;case"body":return document.body.offsetWidth/v;default:return m.offsetWidth}},j.prototype.onDragStart=function(m,v){this.props.onDragStart&&this.props.onDragStart(m,v);var w=this.getDraggablePosition();if(this.originalPosition=w,!!this.props.bounds){var S=this.getParent(),z=this.props.scale,ae;if(this.props.bounds==="parent")ae=S;else if(this.props.bounds==="body"){var F=S.getBoundingClientRect(),X=F.left,P=F.top,W=document.body.getBoundingClientRect(),Fe=-(X-S.offsetLeft*z-W.left)/z,Ge=-(P-S.offsetTop*z-W.top)/z,ut=(document.body.offsetWidth-this.resizable.size.width*z)/z+Fe,kt=(document.body.offsetHeight-this.resizable.size.height*z)/z+Ge;return this.setState({bounds:{top:Ge,right:ut,bottom:kt,left:Fe}})}else if(this.props.bounds==="window"){if(!this.resizable)return;var Ht=S.getBoundingClientRect(),ht=Ht.left,vt=Ht.top,ft=-(ht-S.offsetLeft*z)/z,Gt=-(vt-S.offsetTop*z)/z,ut=(window.innerWidth-this.resizable.size.width*z)/z+ft,kt=(window.innerHeight-this.resizable.size.height*z)/z+Gt;return this.setState({bounds:{top:Gt,right:ut,bottom:kt,left:ft}})}else typeof this.props.bounds=="string"?ae=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(ae=this.props.bounds);if(!(!(ae instanceof HTMLElement)||!(S instanceof HTMLElement))){var An=ae.getBoundingClientRect(),Rn=An.left,Gn=An.top,Pn=S.getBoundingClientRect(),kn=Pn.left,Qn=Pn.top,cn=(Rn-kn)/z,Zn=Gn-Qn;if(this.resizable){this.updateOffsetFromParent();var cr=this.offsetFromParent;this.setState({bounds:{top:Zn-cr.top,right:cn+(ae.offsetWidth-this.resizable.size.width)-cr.left/z,bottom:Zn+(ae.offsetHeight-this.resizable.size.height)-cr.top,left:cn-cr.left/z}})}}}},j.prototype.onDrag=function(m,v){if(this.props.onDrag){var w=this.offsetFromParent,S=w.left,z=w.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDrag(m,en(en({},v),{x:v.x-S,y:v.y-z}));if(this.props.dragAxis==="x")return this.props.onDrag(m,en(en({},v),{x:v.x+S,y:this.originalPosition.y+z,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDrag(m,en(en({},v),{x:this.originalPosition.x+S,y:v.y+z,deltaX:0}))}},j.prototype.onDragStop=function(m,v){if(this.props.onDragStop){var w=this.offsetFromParent,S=w.left,z=w.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDragStop(m,en(en({},v),{x:v.x+S,y:v.y+z}));if(this.props.dragAxis==="x")return this.props.onDragStop(m,en(en({},v),{x:v.x+S,y:this.originalPosition.y+z,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDragStop(m,en(en({},v),{x:this.originalPosition.x+S,y:v.y+z,deltaX:0}))}},j.prototype.onResizeStart=function(m,v,w){m.stopPropagation(),this.setState({resizing:!0});var S=this.props.scale,z=this.offsetFromParent,ae=this.getDraggablePosition();if(this.resizingPosition={x:ae.x+z.left,y:ae.y+z.top},this.originalPosition=ae,this.props.bounds){var F=this.getParent(),X=void 0;this.props.bounds==="parent"?X=F:this.props.bounds==="body"?X=document.body:this.props.bounds==="window"?X=window:typeof this.props.bounds=="string"?X=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(X=this.props.bounds);var P=this.getSelfElement();if(P instanceof Element&&(X instanceof HTMLElement||X===window)&&F instanceof HTMLElement){var W=this.getMaxSizesFromProps(),Fe=W.maxWidth,Ge=W.maxHeight,ut=this.getParentSize();if(Fe&&typeof Fe=="string")if(Fe.endsWith("%")){var kt=Number(Fe.replace("%",""))/100;Fe=ut.width*kt}else Fe.endsWith("px")&&(Fe=Number(Fe.replace("px","")));if(Ge&&typeof Ge=="string")if(Ge.endsWith("%")){var kt=Number(Ge.replace("%",""))/100;Ge=ut.width*kt}else Ge.endsWith("px")&&(Ge=Number(Ge.replace("px","")));var Ht=P.getBoundingClientRect(),ht=Ht.left,vt=Ht.top,ft=this.props.bounds==="window"?{left:0,top:0}:X.getBoundingClientRect(),Gt=ft.left,An=ft.top,Rn=this.getOffsetWidth(X),Gn=this.getOffsetHeight(X),Pn=v.toLowerCase().endsWith("left"),kn=v.toLowerCase().endsWith("right"),Qn=v.startsWith("top"),cn=v.startsWith("bottom");if((Pn||Qn)&&this.resizable){var Zn=(ht-Gt)/S+this.resizable.size.width;this.setState({maxWidth:Zn>Number(Fe)?Fe:Zn})}if(kn||this.props.lockAspectRatio&&!Pn&&!Qn){var Zn=Rn+(Gt-ht)/S;this.setState({maxWidth:Zn>Number(Fe)?Fe:Zn})}if((Qn||Pn)&&this.resizable){var Zn=(vt-An)/S+this.resizable.size.height;this.setState({maxHeight:Zn>Number(Ge)?Ge:Zn})}if(cn||this.props.lockAspectRatio&&!Qn&&!Pn){var Zn=Gn+(An-vt)/S;this.setState({maxHeight:Zn>Number(Ge)?Ge:Zn})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(m,v,w)},j.prototype.onResize=function(m,v,w,S){var z={x:this.originalPosition.x,y:this.originalPosition.y},ae=-S.width,F=-S.height,X=["top","left","topLeft","bottomLeft","topRight"];X.indexOf(v)!==-1&&(v==="bottomLeft"?z.x+=ae:(v==="topRight"||(z.x+=ae),z.y+=F)),(z.x!==this.draggable.state.x||z.y!==this.draggable.state.y)&&this.draggable.setState(z),this.updateOffsetFromParent();var P=this.offsetFromParent,W=this.getDraggablePosition().x+P.left,Fe=this.getDraggablePosition().y+P.top;this.resizingPosition={x:W,y:Fe},this.props.onResize&&this.props.onResize(m,v,w,S,{x:W,y:Fe})},j.prototype.onResizeStop=function(m,v,w,S){this.setState({resizing:!1});var z=this.getMaxSizesFromProps(),ae=z.maxWidth,F=z.maxHeight;this.setState({maxWidth:ae,maxHeight:F}),this.props.onResizeStop&&this.props.onResizeStop(m,v,w,S,this.resizingPosition)},j.prototype.updateSize=function(m){this.resizable&&this.resizable.updateSize({width:m.width,height:m.height})},j.prototype.updatePosition=function(m){this.draggable.setState(m)},j.prototype.updateOffsetFromParent=function(){var m=this.props.scale,v=this.getParent(),w=this.getSelfElement();if(!v||w===null)return{top:0,left:0};var S=v.getBoundingClientRect(),z=S.left,ae=S.top,F=w.getBoundingClientRect(),X=this.getDraggablePosition(),P=v.scrollLeft,W=v.scrollTop;this.offsetFromParent={left:F.left-z+P-X.x*m,top:F.top-ae+W-X.y*m}},j.prototype.render=function(){var m=this.props,v=m.disableDragging,w=m.style,S=m.dragHandleClassName,z=m.position,ae=m.onMouseDown,F=m.onMouseUp,X=m.dragAxis,P=m.dragGrid,W=m.bounds,Fe=m.enableUserSelectHack,Ge=m.cancel,ut=m.children,kt=m.onResizeStart,Ht=m.onResize,ht=m.onResizeStop,vt=m.onDragStart,ft=m.onDrag,Gt=m.onDragStop,An=m.resizeHandleStyles,Rn=m.resizeHandleClasses,Gn=m.resizeHandleComponent,Pn=m.enableResizing,kn=m.resizeGrid,Qn=m.resizeHandleWrapperClass,cn=m.resizeHandleWrapperStyle,Zn=m.scale,cr=m.allowAnyClick,Er=bn(m,["disableDragging","style","dragHandleClassName","position","onMouseDown","onMouseUp","dragAxis","dragGrid","bounds","enableUserSelectHack","cancel","children","onResizeStart","onResize","onResizeStop","onDragStart","onDrag","onDragStop","resizeHandleStyles","resizeHandleClasses","resizeHandleComponent","enableResizing","resizeGrid","resizeHandleWrapperClass","resizeHandleWrapperStyle","scale","allowAnyClick"]),Kr=this.props.default?en({},this.props.default):void 0;delete Er.default;var bi=v||S?{cursor:"auto"}:{cursor:"move"},li=en(en(en({},tr),bi),w),fi=this.offsetFromParent,Ci=fi.left,Ii=fi.top,Or;z&&(Or={x:z.x-Ci,y:z.y-Ii});var Gr=this.state.resizing?void 0:Or,Di=this.state.resizing?"both":X;return(0,L.createElement)(Vn,{ref:this.refDraggable,handle:S?".".concat(S):void 0,defaultPosition:Kr,onMouseDown:ae,onMouseUp:F,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:Di,disabled:v,grid:P,bounds:W?this.state.bounds:void 0,position:Gr,enableUserSelectHack:Fe,cancel:Ge,scale:Zn,allowAnyClick:cr,nodeRef:this.resizableElement},(0,L.createElement)(Ie,en({},Er,{ref:this.refResizable,defaultSize:Kr,size:this.props.size,enable:typeof Pn=="boolean"?lr(Pn):Pn,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:li,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:kn,handleWrapperClass:Qn,handleWrapperStyle:cn,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:An,handleClasses:Rn,handleComponent:Gn,scale:this.props.scale}),ut))},j.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},j}(L.PureComponent),ti=300,ai=400,Pr=(0,L.memo)(function(D){var j=D.children,m=D.direction,v=D.resize,w=D.style,S=D.position,z=D.onPositionChange,ae=D.size,F=D.defaultSize,X=D.defaultPosition,P=D.minWidth,W=P===void 0?280:P,Fe=D.minHeight,Ge=Fe===void 0?200:Fe,ut=D.prefixCls,kt=D.canResizing,Ht=Xe(ut),ht=Ht.styles,vt=(0,L.useMemo)(function(){return kt?{right:ht.rightHandle,left:ht.leftHandle,top:ht.topHandle,bottom:ht.bottomHandle}:{}},[kt,m]),ft=(0,L.useMemo)(function(){return kt?v:(0,g.Z)({top:!0,bottom:!0,right:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},v)},[kt,v]),Gt=(0,g.Z)({width:ai,height:ti},F),An=(0,g.Z)({x:100,y:100},X),Rn={minWidth:Math.max(W,0),minHeight:Math.max(Ge,0),defaultSize:Gt,size:ae,style:w};return(0,Be.jsx)(Ar,(0,g.Z)((0,g.Z)({position:S,resizeHandleClasses:vt,default:(0,g.Z)((0,g.Z)({},An),Gt),onDragStop:function(Pn,kn){z==null||z({x:kn.x,y:kn.y})},bound:"parent",enableResizing:ft},Rn),{},{className:ht.float,children:j}))}),mi=(0,L.memo)(function(D){var j=D.children,m=D.className,v=D.mode,w=D.placement,S=D.resize,z=D.style,ae=D.position,F=D.onPositionChange,X=D.size,P=D.defaultSize,W=D.defaultPosition,Fe=D.minWidth,Ge=D.minHeight,ut=D.prefixCls,kt=D.onSizeChange,Ht=D.onSizeDragging,ht=D.expandable,vt=ht===void 0?!0:ht,ft=D.isExpand,Gt=D.onExpandChange,An=(0,x.k2)("draggable-panel",ut);switch(v){case"fixed":default:return(0,Be.jsx)(Yt,{prefixCls:An,size:X,defaultSize:P,onSizeDragging:Ht,onSizeChange:kt,minHeight:Ge,minWidth:Fe,resize:S,onExpandChange:Gt,expandable:vt,isExpand:ft,className:m,placement:w,style:z,children:j});case"float":return(0,Be.jsx)(Pr,{prefixCls:An,defaultPosition:W,position:ae,onPositionChange:F,minHeight:Ge,minWidth:Fe,defaultSize:P,size:X,onSizeDragging:Ht,onSizeChange:kt,resize:S,canResizing:S!==!1,className:m,style:z,children:j})}})},66317:function(tn,qe,J){"use strict";J.d(qe,{c:function(){return ae}});var L=J(185),x=J(75188),g=J(50959),C=J(33355),T=J(28257),$=J(10422),H=J(84341);function K(F){return X=>{let{transform:P}=X;return zr(sn({},P),{x:Math.ceil(P.x/F)*F,y:Math.ceil(P.y/F)*F})}}const ce=F=>{let{transform:X}=F;return zr(sn({},X),{y:0})};function oe(F,X,P){const W=sn({},F);return X.top+F.y<=P.top?W.y=P.top-X.top:X.bottom+F.y>=P.top+P.height&&(W.y=P.top+P.height-X.bottom),X.left+F.x<=P.left?W.x=P.left-X.left:X.right+F.x>=P.left+P.width&&(W.x=P.left+P.width-X.right),W}const xe=F=>{let{containerNodeRect:X,draggingNodeRect:P,transform:W}=F;return!P||!X?W:oe(W,P,X)},Se=F=>{let{draggingNodeRect:X,transform:P,scrollableAncestorRects:W}=F;const Fe=W[0];return!X||!Fe?P:oe(P,X,Fe)},k=F=>{let{transform:X}=F;return zr(sn({},X),{x:0})},rt=F=>{let{transform:X,draggingNodeRect:P,windowRect:W}=F;return!P||!W?X:oe(X,P,W)},lt=F=>{let{activatorEvent:X,draggingNodeRect:P,transform:W}=F;if(P&&X){const Fe=getEventCoordinates(X);if(!Fe)return W;const Ge=Fe.x-P.left,ut=Fe.y-P.top;return zr(sn({},W),{x:W.x+Ge-P.width/2,y:W.y+ut-P.height/2})}return W};var Qt=J(59671),mt=J(5899),Pt=J.n(mt),O=J(84817);function Ye(F,X){if(Object.is(F,X))return!0;if(typeof F!="object"||F===null||typeof X!="object"||X===null)return!1;if(F instanceof Map&&X instanceof Map){if(F.size!==X.size)return!1;for(const[W,Fe]of F)if(!Object.is(Fe,X.get(W)))return!1;return!0}if(F instanceof Set&&X instanceof Set){if(F.size!==X.size)return!1;for(const W of F)if(!X.has(W))return!1;return!0}const P=Object.keys(F);if(P.length!==Object.keys(X).length)return!1;for(let W=0;W<P.length;W++)if(!Object.prototype.hasOwnProperty.call(X,P[W])||!Object.is(F[P[W]],X[P[W]]))return!1;return!0}var gt=(F,X)=>(console.warn("[DEPRECATED] Default export is deprecated. Instead use `import { shallow } from 'zustand/shallow'`."),Ye(F,X)),Ot=J(75157),Nt=J(84772),Ve=J(45389),ke=J(84875),dt=J.n(ke),Et=J(96208),Z=J(18559),ye=J(11527),ge=(0,ye.jsx)("svg",{viewBox:"0 0 20 20",width:"16",fill:"currentColor",children:(0,ye.jsx)("path",{d:"M7 2a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 2zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 8zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 14zm6-8a2 2 0 1 0-.001-4.001A2 2 0 0 0 13 6zm0 2a2 2 0 1 0 .001 4.001A2 2 0 0 0 13 8zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 13 14z"})}),ve=(0,ye.jsx)("svg",{width:"10",viewBox:"0 0 70 41",fill:"currentColor",children:(0,ye.jsx)("path",{d:"M30.76 39.2402C31.885 40.3638 33.41 40.995 35 40.995C36.59 40.995 38.115 40.3638 39.24 39.2402L68.24 10.2402C69.2998 9.10284 69.8768 7.59846 69.8494 6.04406C69.822 4.48965 69.1923 3.00657 68.093 1.90726C66.9937 0.807959 65.5106 0.178263 63.9562 0.150837C62.4018 0.123411 60.8974 0.700397 59.76 1.76024L35 26.5102L10.24 1.76024C9.10259 0.700397 7.59822 0.123411 6.04381 0.150837C4.4894 0.178263 3.00632 0.807959 1.90702 1.90726C0.807714 3.00657 0.178019 4.48965 0.150593 6.04406C0.123167 7.59846 0.700153 9.10284 1.75999 10.2402L30.76 39.2402Z"})}),_e=function(X){return _jsx(ActionIcon,_objectSpread({icon:ve},X))},we=function(X){return(0,ye.jsx)(Z.Z,(0,L.Z)({icon:ge},X))},de=function(X){return(0,ye.jsx)(Z.Z,(0,L.Z)({icon:(0,ye.jsx)(Et.Z,{})},X))},Y=function(X){return _jsx(ActionIcon,_objectSpread({icon:_jsx(EditFilled,{})},X))},te=J(58583),Oe,ee,Ae,Te,$e,Je,it,tt,St,ot,Rt,Lt,pt="0 0 0 calc(1px / var(--scale-x, 1)) rgba(0, 0, 0, 0.05)",Xe="0 1px calc(3px / var(--scale-x, 1)) 0 rgba(0, 0, 0, 0.15)",Be="".concat(pt," ").concat(Xe),Ct=(0,Nt.F4)(Oe||(Oe=(0,te.Z)([`
	0% {
		box-shadow: var(--box-shadow);
		transform: scale(1);
	}
	100% {
		box-shadow: var(--box-shadow-picked-up);
		transform: scale(var(--scale));
	}
`]))),Wt=(0,Nt.F4)(ee||(ee=(0,te.Z)([`
	0% {
	  opacity: 0;
	}
	100% {
	  opacity: 1;
	}
`]))),Xt=(0,Nt.kc)(function(F,X){var P=F.css,W=F.cx,Fe=F.token,Ge="".concat(X);return{item:W("".concat(X,"-item"),P(Ae||(Ae=(0,te.Z)([`
        position: relative;
        display: flex;
        flex-grow: 1;
        align-items: center;
        justify-content: space-between;
        box-sizing: border-box;
        padding: 1px 0;
        color: `,`;
        font-size: 12px;
        white-space: nowrap;
        list-style: none;
        border-radius: 4px;
        outline: none;
        transform: scale(var(--scale, 1));
        transform-origin: 50% 50%;
        transition: box-shadow 200ms cubic-bezier(0.18, 0.67, 0.6, 1.22);
        -webkit-tap-highlight-color: transparent;

        &:focus-visible {
          box-shadow: 0 0 4px 1px #4c9ffe, `,`;
        }

        &:not(.`,`-item-withHandle) {
          cursor: grab;
          -webkit-user-select: none;
          user-select: none;
          touch-action: none;
        }

        &-dragging:not(.`,`-item-dragOverlay) {
          z-index: 0;
          opacity: var(--dragging-opacity, 0.5);

          &:focus {
            box-shadow: `,`;
          }
        }

        &:hover .`,`-item-actions {
          opacity: 1;
        }
      `])),Fe.colorTextSecondary,Be,Ge,Ge,Be,X)),disabled:W("".concat(X,"-item-disabled"),P(Te||(Te=(0,te.Z)([`
        color: #999;
        background-color: #f1f1f1;
        cursor: not-allowed;
        &:focus {
          box-shadow: 0 0 4px 1px rgba(0, 0, 0, 0.1), `,`;
        }
      `])),Be)),dragOverlay:W("".concat(X,"-item-dragOverlay"),P($e||($e=(0,te.Z)([`
        padding: 4px 0;
        background-color: `,`;
        border: none;
        box-shadow: var(--box-shadow-picked-up);
        transform: scale(var(--scale));
        cursor: inherit;
        opacity: 1;

        /* box-shadow: 0 0px 6px 2px @focused-outline-color; */
        animation: `,` 200ms cubic-bezier(0.18, 0.67, 0.6, 1.22);
      `])),Fe.colorBgElevated,Ct)),wrapper:W("".concat(X,"-item-wrapper"),P(Je||(Je=(0,te.Z)([`
        display: flex;
        box-sizing: border-box;
        transform: translate3d(var(--translate-x, 0), var(--translate-y, 0), 0)
          scaleX(var(--scale-x, 1)) scaleY(var(--scale-y, 1));
        transform-origin: 0 0;
        touch-action: manipulation;

        &:not(:last-child) {
          margin-bottom: 2px;
        }
      `])))),wrapperFadeIn:W("".concat(X,"-item-wrapper-fadeIn"),P(it||(it=(0,te.Z)([`
        animation: `,` 500ms ease;
      `])),Wt)),wrapperdragOverlay:W("".concat(X,"-item-wrapper-dragOverlay"),P(tt||(tt=(0,te.Z)([`
        --scale: 1.05;
        --box-shadow: `,`;
        --box-shadow-picked-up: `,`, -1px 0 15px 0 rgba(82, 82, 82, 0.01),
          0 15px 15px 0 rgba(82, 82, 82, 0.25);

        z-index: 999;
      `])),Be,pt)),actions:W("".concat(X,"-item-actions"),P(St||(St=(0,te.Z)([`
        z-index: 10;
        color: hsla(0, 0, 0, 0.45);
        opacity: 0;
      `])))),actionsLeft:W("".concat(X,"-item-actions-left"),P(ot||(ot=(0,te.Z)([`
        position: absolute;
        top: 0;
        left: 0;

        .studio-btn.studio-btn-sm.studio-btn-icon-only {
          width: 14px;
          height: 24px;
          > svg {
            width: 14px;
          }
        }
      `])))),actionsRight:W("".concat(X,"-item-actions-right"),P(Rt||(Rt=(0,te.Z)([`
        position: absolute;
        top: 1px;
        right: 1px;
        align-self: flex-end;
        overflow: hidden;
        border-radius: 1px;
        // \u91C7\u7528\u80CC\u666F\u6A21\u7CCA\u6765\u89E3\u51B3\u591A\u79CD\u80CC\u666F\u8272\u4E0B\u8986\u76D6\u5185\u5BB9\u7684\u95EE\u9898 TODO\uFF1AFireFox \u517C\u5BB9
        backdrop-filter: blur(5px);
        //background-image: linear-gradient(90deg, rgba(255, 255, 255, 0) 0%, @bg-2 10%, @bg-2 100%);

        .tech-studio-actionicon-icon {
          height: 22px;
        }
      `])))),content:W("".concat(X,"-item-content"),P(Lt||(Lt=(0,te.Z)([`
        position: relative;
        width: 100%;
      `]))))}}),Yt=["color","dragOverlay","dragging","disabled","fadeIn","handle","index","listeners","onRemove","hideRemove","compact","children","sorting","style","transition","transform","id","className","actions","prefixCls"],wn=(0,g.memo)((0,g.forwardRef)(function(F,X){var P,W,Fe=F.color,Ge=F.dragOverlay,ut=F.dragging,kt=F.disabled,Ht=F.fadeIn,ht=F.handle,vt=ht===void 0?!0:ht,ft=F.index,Gt=F.listeners,An=F.onRemove,Rn=F.hideRemove,Gn=Rn===void 0?!1:Rn,Pn=F.compact,kn=Pn===void 0?!1:Pn,Qn=F.children,cn=F.sorting,Zn=F.style,cr=F.transition,Er=F.transform,Kr=F.id,bi=F.className,li=F.actions,fi=F.prefixCls,Ci=(0,x.Z)(F,Yt),Ii=Xt(fi),Or=Ii.styles,Gr=dt()("".concat(fi,"-item"));return(0,g.useEffect)(function(){if(Ge)return document.body.style.cursor="grabbing",function(){document.body.style.cursor=""}},[Ge]),(0,ye.jsx)("li",{className:dt()(Or.wrapper,bi,(P={},(0,Ve.Z)(P,Or.wrapperFadeIn,Ht),(0,Ve.Z)(P,"".concat(Gr,"-wrapper-sorting"),cn),(0,Ve.Z)(P,Or.wrapperdragOverlay,Ge),P)),style:{transition:cr,"--translate-x":Er?"".concat(Math.round(Er.x),"px"):void 0,"--translate-y":Er?"".concat(Math.round(Er.y),"px"):void 0,"--scale-x":Er!=null&&Er.scaleX?"".concat(Er.scaleX):void 0,"--scale-y":Er!=null&&Er.scaleY?"".concat(Er.scaleY):void 0,"--index":ft,"--color":Fe},"data-testid":"list-item",ref:X,children:(0,ye.jsx)("div",(0,L.Z)((0,L.Z)((0,L.Z)({className:dt()(Or.item,(W={},(0,Ve.Z)(W,"".concat(Gr,"-dragging"),ut),(0,Ve.Z)(W,"".concat(Gr,"-withHandle"),vt),(0,Ve.Z)(W,Or.dragOverlay,Ge),(0,Ve.Z)(W,Or.disabled,kt),(0,Ve.Z)(W,"".concat(Gr,"-discolorabled"),Fe),W)),style:(0,L.Z)((0,L.Z)({},Zn),{},{backgroundColor:kn?void 0:"hsl(0, 0%, 98%)"}),"data-cypress":"draggable-item"},vt?void 0:Gt),Ci),{},{tabIndex:vt?void 0:0,children:(0,ye.jsxs)(O.D,{className:Or.content,direction:"horizontal",align:"center",children:[(0,ye.jsx)(O.D,{className:dt()(Or.actionsLeft,Or.actions),direction:"horizontal",children:vt?(0,ye.jsx)(we,(0,L.Z)({tabIndex:-1,cursor:"grab","data-cypress":"draggable-handle",style:kn?void 0:{position:"absolute",left:"-13px"}},Gt)):null}),Qn,(0,ye.jsxs)(O.D,{className:dt()(Or.actions,kn?Or.actionsRight:void 0),direction:"horizontal",children:[li,Gn?null:(0,ye.jsx)(de,{tabIndex:-1,onClick:An,style:{height:22}})]})]})}))},Kr)})),an=wn,un=J(34961),Tn=function(X){return{activeId:X.activeId,compact:X.compact,renderContent:X.renderContent,getActiveIndex:X.getActiveIndex}},yt=function(X){var P=X.prefixCls,W=(0,un.oR)(Tn,Ye),Fe=W.activeId,Ge=W.compact,ut=W.renderContent,kt=W.getActiveIndex,Ht=(0,un.oR)(function(vt){return vt.value},Pt()),ht=kt();return(0,ye.jsx)(T.y9,{adjustScale:!1,dropAnimation:(0,L.Z)((0,L.Z)({},T.RJ),{},{sideEffects:(0,T.Ai)({styles:{active:{opacity:"0.5"}}})}),children:Fe?(0,ye.jsx)(an,{id:Fe,dragOverlay:!0,prefixCls:P,compact:Ge,children:ut(Ht[ht],ht)}):null})},pe=(0,g.memo)(yt),Ce=J(66441),Ne=(0,Nt.kc)(function(F,X){var P=X.prefixCls,W=X.horizontal;return{container:(0,Nt.cx)("".concat(P,"-container"),(0,Nt.iv)({listStyle:"none",display:"grid",gridAutoRows:"max-content",gridGap:"2px",gridTemplateColumns:"repeat(var(--columns, 1), 1fr)",width:"100%",margin:"0",padding:"0",borderRadius:"4px",transition:"background-color 350ms ease",gridAutoFlow:W?"column":void 0}))}}),Ze=(0,g.forwardRef)(function(F,X){var P=F.children,W=F.columns,Fe=W===void 0?1:W,Ge=F.horizontal,ut=F.style,kt=F.className,Ht=F.prefixCls,ht=Ne({prefixCls:Ht,horizontal:Ge}),vt=ht.styles,ft=dt()(vt.container,kt);return(0,ye.jsx)("ul",{ref:X,style:(0,L.Z)((0,L.Z)({},ut),{},{"--columns":Fe}),className:ft,children:P})}),et=Ze;function Ft(F){var X=F.disabled,P=F.id,W=F.index,Fe=F.actions,Ge=F.onRemove,ut=F.useDragOverlay,kt=ut===void 0?!0:ut,Ht=F.children,ht=F.prefixCls,vt=F.hideRemove,ft=vt===void 0?!1:vt,Gt=F.compact,An=Gt===void 0?!1:Gt,Rn=(0,Qt.nB)({id:P,disabled:X}),Gn=Rn.attributes,Pn=Rn.isDragging,kn=Rn.isSorting,Qn=Rn.listeners,cn=Rn.setNodeRef,Zn=Rn.transform,cr=Rn.transition;return(0,ye.jsx)(an,(0,L.Z)((0,L.Z)({ref:cn,id:P,disabled:X,dragging:Pn,sorting:kn,compact:An,hideRemove:ft,index:W,actions:Fe,onRemove:Ge?function(){return Ge(W)}:void 0,transform:Zn,transition:!kt&&Pn?"none":cr,listeners:Qn,"data-index":W,"data-id":P,dragOverlay:!kt&&Pn,prefixCls:ht},Gn),{},{children:Ht}),P)}var qt=J(96430),$n=J(59892),dn=J(52380),Me=J(33134),Qe,Ke,at,Bt,En,ln,zt,me,Ie,ct,It,en=function(X){var P=X.token,W=X.css,Fe=W(Qe||(Qe=(0,te.Z)([`
    cursor: pointer;
    transition: 150ms background-color ease-in-out;
    &:hover {
      background: `,`;
    }
  `])),P.colorFillQuaternary),Ge=W(Ke||(Ke=(0,te.Z)([`
    color: `,`;
    background-color: `,`;
    border-color: transparent;
  `])),P.colorText,P.colorFillTertiary),ut=W(at||(at=(0,te.Z)([`
    color: `,` !important;
    background-color: `,` !important;
    border-color: `,` !important;
    box-shadow: none;
  `])),P.colorText,P.colorFillQuaternary,P.colorPrimary),kt=W(Bt||(Bt=(0,te.Z)([`
    color: `,`;
    background: `,`;
    border-color: transparent;
  `])),P.colorTextSecondary,P.colorFillQuaternary);return{defaultButton:W(En||(En=(0,te.Z)([`
      `,`;

      &:hover {
        color: `,` !important;
        background: `,` !important;
        border-color: transparent !important;
      }
      &:focus {
        `,`;
        border-color: `,` !important;
      }
    `])),kt,P.colorText,P.colorFillSecondary,kt,P.colorPrimary),textInfo:W(ln||(ln=(0,te.Z)([`
      color: `,`;
      &:hover {
        color: `,`;
      }
    `])),P.colorTextSecondary,P.colorText),textDefault:W(zt||(zt=(0,te.Z)([`
      color: `,`;
    `])),P.colorTextSecondary),containerBgHover:W(me||(me=(0,te.Z)([`
      cursor: pointer;
      transition: 150ms background-color ease-in-out;

      &:hover {
        background: `,`;
      }
    `])),P.colorFillQuaternary),containerBgL2:W(Ie||(Ie=(0,te.Z)([`
      `,`;
      border-radius: 4px;
      background: `,`;

      &:hover {
        background: `,`;
      }
    `])),Fe,P.colorFillQuaternary,P.colorFillTertiary),controlContainerFocused:ut,controlContainer:W(ct||(ct=(0,te.Z)([`
      &:hover {
        `,`
      }
      &:focus {
        `,`
      }
    `])),Ge,ut),backgroundBlur:W(It||(It=(0,te.Z)([`
      background: `,`;
      backdrop-filter: blur(10px);
    `])),(0,Me.DZ)(.4)(P.colorBgElevated))}},bn,Vn=(0,Nt.kc)(function(F,X){var P=F.token,W=F.css,Fe=en(F);return{btnAdd:(0,Nt.cx)("".concat(X,"-btn-add"),W(bn||(bn=(0,te.Z)([`
        height: 24px;
        padding-block: 2px;
        margin-top: `,`px;
      `])),P.marginXXS),Fe.defaultButton)}}),tr=function(X){return{renderContent:X.renderContent,compact:X.compact,hideRemove:X.hideRemove,creatorButtonProps:X.creatorButtonProps,dispatchListData:X.dispatchListData}},lr=function(X){var P=X.prefixCls,W=(0,un.oR)(tr,Ye),Fe=W.dispatchListData,Ge=W.renderContent,ut=W.compact,kt=W.hideRemove,Ht=(0,un.oR)(function(li){return[li.value,li.keyManager,li.creatorButtonProps,li.actions]},Pt()),ht=(0,Ce.Z)(Ht,4),vt=ht[0],ft=ht[1],Gt=ht[2],An=ht[3],Rn=Gt||{},Gn=Rn.record,Pn=Rn.creatorButtonText,kn=Pn===void 0?"\u6DFB\u52A0\u4E00\u5217":Pn,Qn=Rn.showInList,cn=Qn===void 0?!0:Qn,Zn=Rn.showInEmpty,cr=Zn===void 0?!0:Zn,Er=Vn(P),Kr=Er.styles,bi=function(fi){var Ci=fi.empty,Ii=Ci===void 0?!1:Ci;return(0,ye.jsx)($n.ZP,{block:!Ii,size:"small",className:Kr.btnAdd,onClick:function(){var Gr=(0,L.Z)({},Gn&&typeof Gn=="function"?Gn(vt.length):Gn);Fe({type:"addItem",item:Gr})},icon:(0,ye.jsx)(qt.Z,{}),children:kn})};return(0,ye.jsx)(ye.Fragment,{children:Array.isArray(vt)&&vt.length===0?(0,ye.jsx)(ye.Fragment,{children:(0,ye.jsx)(dn.Z,{image:dn.Z.PRESENTED_IMAGE_SIMPLE,children:cr===!1?null:(0,ye.jsx)(bi,{empty:!0})})}):(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(et,{prefixCls:P,children:vt.map(function(li,fi){return(0,ye.jsx)(Ft,{id:ft.keys[fi],index:fi,compact:ut,hideRemove:kt,onRemove:function(){return Fe({type:"removeItem",index:fi})},actions:typeof An=="function"?An(li,fi):An,useDragOverlay:!0,prefixCls:P,children:Ge==null?void 0:Ge(li,fi)},ft.keys[fi])})}),cn===!1?null:(0,ye.jsx)(bi,{})]})})},Ar=(0,g.memo)(lr),ti={strategy:T.uN.Always},ai=function(X){return{handleDragStart:X.handleDragStart,handleDragCancel:X.handleDragCancel,handleDragEnd:X.handleDragEnd,renderHeader:X.renderHeader}},Pr=function(X){var P=X.className,W=X.style,Fe=X.prefixCls,Ge=(0,un.oR)(ai,Ye),ut=Ge.handleDragStart,kt=Ge.handleDragCancel,Ht=Ge.handleDragEnd,ht=Ge.renderHeader,vt=(0,un.oR)(function(Rn){return Rn.keyManager},Pt()),ft=(0,Ot.k2)("sortable-list",Fe),Gt=(0,T.Dy)((0,T.VT)(T.MA),(0,T.VT)(T.LO),(0,T.VT)(T.Lg,{coordinateGetter:Qt.is})),An=(0,g.useMemo)(function(){return(0,$.createPortal)((0,ye.jsx)(pe,{prefixCls:ft}),document.body)},[]);return(0,ye.jsx)(O.D,{className:(0,Nt.cx)(P,ft),style:W,children:(0,ye.jsx)(T.LB,{sensors:Gt,collisionDetection:T.pE,onDragStart:ut,onDragEnd:Ht,measuring:{droppable:ti},onDragCancel:kt,modifiers:[k,rt],children:(0,ye.jsxs)(Qt.Fo,{items:vt.keys.map(function(Rn){return{id:Rn}}),strategy:Qt.qw,children:[ht==null?void 0:ht(),(0,ye.jsx)(Ar,{prefixCls:ft}),An]})})})},mi=Pr,D=function(X){var P=X.children,W=X.showDevtools,Fe=!0,Ge=(0,ye.jsx)(ye.Fragment,{children:P});try{(0,un.AC)()}catch(ut){Fe=!1}return Fe?Ge:(0,ye.jsx)(un.zt,{createStore:function(){return(0,un.MT)(W)},children:Ge})},j=J(18846),m=function(X){return function(P,W){var Fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[W],Ge=arguments.length>3?arguments[3]:void 0,ut=Ge!=null?Ge:X.setState;(0,g.useEffect)(function(){typeof W!="undefined"&&ut((0,Ve.Z)({},P,W))},Fe)}},v=J(39181),w=(0,g.forwardRef)(function(F,X){var P=F.creatorButtonProps,W=F.initialValues,Fe=F.value,Ge=F.onChange,ut=F.renderContent,kt=F.renderHeader,Ht=F.actions,ht=F.compact,vt=F.hideRemove,ft=(0,un.AC)(),Gt=m(ft),An=function(Pn,kn){var Qn=ft.getState(),cn=Qn.keyManager,Zn=(0,j.Uy)(cn,function(cr){return Pn[kn].forEach(function(Er,Kr){var bi=cr.keys[Kr];bi===void 0&&(cr.keys[Kr]=cr.id,cr.id+=1)}),cr});ft.setState((0,Ve.Z)({keyManager:Zn},kn,Pn[kn]))};Gt("value",W,[]),Gt("onChange",Ge),Gt("creatorButtonProps",P),Gt("renderContent",ut),Gt("renderHeader",kt),Gt("actions",Ht),Gt("compact",ht),Gt("hideRemove",vt),Gt("initialValues",W,[W],function(Gn){An(Gn,"initialValues")}),Gt("value",Fe,[Fe],function(Gn){return An(Gn,"value")});var Rn=(0,v.t)();return(0,g.useImperativeHandle)(X,function(){return Rn}),null}),S=w,z=["SHOW_STORE_IN_DEVTOOLS","className","style"],ae=(0,g.memo)((0,g.forwardRef)(function(F,X){var P=F.SHOW_STORE_IN_DEVTOOLS,W=F.className,Fe=F.style,Ge=(0,x.Z)(F,z);return(0,ye.jsx)(C.iV,{children:(0,ye.jsxs)(D,{showDevtools:P,children:[(0,ye.jsx)(mi,{style:Fe,className:W}),(0,ye.jsx)(S,(0,L.Z)((0,L.Z)({},Ge),{},{ref:X}))]})})}))},39181:function(tn,qe,J){"use strict";J.d(qe,{t:function(){return g}});var L=J(28062),x=J(34961),g=function(){var T=(0,x.AC)(),$=(0,L.Z)(function(){return T.getState().activeId}),H=(0,L.Z)(function(){return T.getState().value}),K=function(Se,k){return T.getState().dispatchListData({type:"addItem",item:Se,index:k})},ce=function(Se){return T.getState().dispatchListData({type:"removeItem",index:Se})},oe=function(Se,k){return T.getState().dispatchListData({type:"updateItem",item:Se,index:k})};return{getActiveId:$,getValue:H,addItem:K,removeItem:ce,updateItem:oe}}},34961:function(tn,qe,J){"use strict";J.d(qe,{zt:function(){return ot},MT:function(){return Je},oR:function(){return tt},AC:function(){return St}});const L=Rt=>{let Lt;const pt=new Set,Xe=(Yt,wn)=>{const an=typeof Yt=="function"?Yt(Lt):Yt;if(!Object.is(an,Lt)){const un=Lt;Lt=(wn!=null?wn:typeof an!="object")?an:Object.assign({},Lt,an),pt.forEach(Tn=>Tn(Lt,un))}},Be=()=>Lt,Xt={setState:Xe,getState:Be,subscribe:Yt=>(pt.add(Yt),()=>pt.delete(Yt)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),pt.clear()}};return Lt=Rt(Xe,Be,Xt),Xt},x=Rt=>Rt?L(Rt):L;var g=Rt=>(console.warn("[DEPRECATED] Default export is deprecated. Instead use import { createStore } from 'zustand/vanilla'."),x(Rt)),C=J(50959),T=J(7231);const{useSyncExternalStoreWithSelector:$}=T;function H(Rt,Lt=Rt.getState,pt){const Xe=$(Rt.subscribe,Rt.getState,Rt.getServerState||Rt.getState,Lt,pt);return(0,C.useDebugValue)(Xe),Xe}const K=Rt=>{typeof Rt!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const Lt=typeof Rt=="function"?x(Rt):Rt,pt=(Xe,Be)=>H(Lt,Xe,Be);return Object.assign(pt,Lt),pt},ce=Rt=>Rt?K(Rt):K;var oe=Rt=>(console.warn("[DEPRECATED] Default export is deprecated. Instead use `import { create } from 'zustand'`."),ce(Rt)),xe=function(){var Lt=(0,C.createContext)(void 0),pt=function(Wt){var Xt=Wt.createStore,Yt=Wt.children,wn=(0,C.useRef)();return wn.current||(wn.current=Xt()),(0,C.createElement)(Lt.Provider,{value:wn.current},Yt)},Xe=function(Wt,Xt){var Yt=(0,C.useContext)(Lt);if(!Yt)throw new Error("Seems like you have not used zustand provider as an ancestor.");return H(Yt,Wt,Xt)},Be=function(){var Wt=(0,C.useContext)(Lt);if(!Wt)throw new Error("Seems like you have not used zustand provider as an ancestor.");return Wt};return{Provider:pt,useStore:Xe,useStoreApi:Be}};const Se=(Rt,Lt)=>(pt,Xe,Be)=>(Be.dispatch=Ct=>(pt(Wt=>Rt(Wt,Ct),!1,Ct),Ct),Be.dispatchFromDevtools=!0,sn({dispatch:(...Ct)=>Be.dispatch(...Ct)},Lt)),k=null,rt=new Map,lt=Rt=>{const Lt=rt.get(Rt);return Lt?Object.fromEntries(Object.entries(Lt.stores).map(([pt,Xe])=>[pt,Xe.getState()])):{}},Qt=(Rt,Lt,pt)=>{if(Rt===void 0)return{type:"untracked",connection:Lt.connect(pt)};const Xe=rt.get(pt.name);if(Xe)return sn({type:"tracked",store:Rt},Xe);const Be={connection:Lt.connect(pt),stores:{}};return rt.set(pt.name,Be),sn({type:"tracked",store:Rt},Be)},Pt=(Rt,Lt={})=>(pt,Xe,Be)=>{const Ce=Lt,{enabled:Ct,anonymousActionType:Wt,store:Xt}=Ce,Yt=Lo(Ce,["enabled","anonymousActionType","store"]);let wn;try{wn=(Ct!=null?Ct:void 0!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(Ze){}if(!wn)return Ct&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),Rt(pt,Xe,Be);const Ne=Qt(Xt,wn,Yt),{connection:an}=Ne,un=Lo(Ne,["connection"]);let Tn=!0;Be.setState=(Ze,et,Ft)=>{const qt=pt(Ze,et);if(!Tn)return qt;const $n=Ft===void 0?{type:Wt||"anonymous"}:typeof Ft=="string"?{type:Ft}:Ft;return Xt===void 0?(an==null||an.send($n,Xe()),qt):(an==null||an.send(zr(sn({},$n),{type:`${Xt}/${$n.type}`}),zr(sn({},lt(Yt.name)),{[Xt]:Be.getState()})),qt)};const yt=(...Ze)=>{const et=Tn;Tn=!1,pt(...Ze),Tn=et},pe=Rt(Be.setState,Xe,Be);if(un.type==="untracked"?an==null||an.init(pe):(un.stores[un.store]=Be,an==null||an.init(Object.fromEntries(Object.entries(un.stores).map(([Ze,et])=>[Ze,Ze===un.store?pe:et.getState()])))),Be.dispatchFromDevtools&&typeof Be.dispatch=="function"){let Ze=!1;const et=Be.dispatch;Be.dispatch=(...Ft)=>{Ft[0].type==="__setState"&&!Ze&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),Ze=!0),et(...Ft)}}return an.subscribe(Ze=>{var et;switch(Ze.type){case"ACTION":if(typeof Ze.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return O(Ze.payload,Ft=>{if(Ft.type==="__setState"){if(Xt===void 0){yt(Ft.state);return}Object.keys(Ft.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const qt=Ft.state[Xt];if(qt==null)return;JSON.stringify(Be.getState())!==JSON.stringify(qt)&&yt(qt);return}Be.dispatchFromDevtools&&typeof Be.dispatch=="function"&&Be.dispatch(Ft)});case"DISPATCH":switch(Ze.payload.type){case"RESET":return yt(pe),Xt===void 0?an==null?void 0:an.init(Be.getState()):an==null?void 0:an.init(lt(Yt.name));case"COMMIT":if(Xt===void 0){an==null||an.init(Be.getState());return}return an==null?void 0:an.init(lt(Yt.name));case"ROLLBACK":return O(Ze.state,Ft=>{if(Xt===void 0){yt(Ft),an==null||an.init(Be.getState());return}yt(Ft[Xt]),an==null||an.init(lt(Yt.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return O(Ze.state,Ft=>{if(Xt===void 0){yt(Ft);return}JSON.stringify(Be.getState())!==JSON.stringify(Ft[Xt])&&yt(Ft[Xt])});case"IMPORT_STATE":{const{nextLiftedState:Ft}=Ze.payload,qt=(et=Ft.computedStates.slice(-1)[0])==null?void 0:et.state;if(!qt)return;yt(Xt===void 0?qt:qt[Xt]),an==null||an.send(null,Ft);return}case"PAUSE_RECORDING":return Tn=!Tn}return}}),pe},O=(Rt,Lt)=>{let pt;try{pt=JSON.parse(Rt)}catch(Xe){console.error("[zustand devtools middleware] Could not parse the received json",Xe)}pt!==void 0&&Lt(pt)},Ye=Rt=>(Lt,pt,Xe)=>{const Be=Xe.subscribe;return Xe.subscribe=(Wt,Xt,Yt)=>{let wn=Wt;if(Xt){const an=(Yt==null?void 0:Yt.equalityFn)||Object.is;let un=Wt(Xe.getState());wn=Tn=>{const yt=Wt(Tn);if(!an(un,yt)){const pe=un;Xt(un=yt,pe)}},Yt!=null&&Yt.fireImmediately&&Xt(un,un)}return Be(wn)},Rt(Lt,pt,Xe)},gt=null,Ot=(Rt,Lt)=>(...pt)=>Object.assign({},Rt,Lt(...pt));function Nt(Rt,Lt){let pt;try{pt=Rt()}catch(Be){return}return{getItem:Be=>{var Ct;const Wt=Yt=>Yt===null?null:JSON.parse(Yt,Lt==null?void 0:Lt.reviver),Xt=(Ct=pt.getItem(Be))!=null?Ct:null;return Xt instanceof Promise?Xt.then(Wt):Wt(Xt)},setItem:(Be,Ct)=>pt.setItem(Be,JSON.stringify(Ct,Lt==null?void 0:Lt.replacer)),removeItem:Be=>pt.removeItem(Be)}}const Ve=Rt=>Lt=>{try{const pt=Rt(Lt);return pt instanceof Promise?pt:{then(Xe){return Ve(Xe)(pt)},catch(Xe){return this}}}catch(pt){return{then(Xe){return this},catch(Xe){return Ve(Xe)(pt)}}}},ke=(Rt,Lt)=>(pt,Xe,Be)=>{let Ct=sn({getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:Ne=>Ne,version:0,merge:(Ne,Ze)=>sn(sn({},Ze),Ne)},Lt),Wt=!1;const Xt=new Set,Yt=new Set;let wn;try{wn=Ct.getStorage()}catch(Ne){}if(!wn)return Rt((...Ne)=>{console.warn(`[zustand persist middleware] Unable to update item '${Ct.name}', the given storage is currently unavailable.`),pt(...Ne)},Xe,Be);const an=Ve(Ct.serialize),un=()=>{const Ne=Ct.partialize(sn({},Xe()));let Ze;const et=an({state:Ne,version:Ct.version}).then(Ft=>wn.setItem(Ct.name,Ft)).catch(Ft=>{Ze=Ft});if(Ze)throw Ze;return et},Tn=Be.setState;Be.setState=(Ne,Ze)=>{Tn(Ne,Ze),un()};const yt=Rt((...Ne)=>{pt(...Ne),un()},Xe,Be);let pe;const Ce=()=>{var Ne;if(!wn)return;Wt=!1,Xt.forEach(et=>et(Xe()));const Ze=((Ne=Ct.onRehydrateStorage)==null?void 0:Ne.call(Ct,Xe()))||void 0;return Ve(wn.getItem.bind(wn))(Ct.name).then(et=>{if(et)return Ct.deserialize(et)}).then(et=>{if(et)if(typeof et.version=="number"&&et.version!==Ct.version){if(Ct.migrate)return Ct.migrate(et.state,et.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return et.state}).then(et=>{var Ft;return pe=Ct.merge(et,(Ft=Xe())!=null?Ft:yt),pt(pe,!0),un()}).then(()=>{Ze==null||Ze(pe,void 0),Wt=!0,Yt.forEach(et=>et(pe))}).catch(et=>{Ze==null||Ze(void 0,et)})};return Be.persist={setOptions:Ne=>{Ct=sn(sn({},Ct),Ne),Ne.getStorage&&(wn=Ne.getStorage())},clearStorage:()=>{wn==null||wn.removeItem(Ct.name)},getOptions:()=>Ct,rehydrate:()=>Ce(),hasHydrated:()=>Wt,onHydrate:Ne=>(Xt.add(Ne),()=>{Xt.delete(Ne)}),onFinishHydration:Ne=>(Yt.add(Ne),()=>{Yt.delete(Ne)})},Ce(),pe||yt},dt=(Rt,Lt)=>(pt,Xe,Be)=>{let Ct=sn({storage:Nt(()=>localStorage),partialize:Ce=>Ce,version:0,merge:(Ce,Ne)=>sn(sn({},Ne),Ce)},Lt),Wt=!1;const Xt=new Set,Yt=new Set;let wn=Ct.storage;if(!wn)return Rt((...Ce)=>{console.warn(`[zustand persist middleware] Unable to update item '${Ct.name}', the given storage is currently unavailable.`),pt(...Ce)},Xe,Be);const an=()=>{const Ce=Ct.partialize(sn({},Xe()));return wn.setItem(Ct.name,{state:Ce,version:Ct.version})},un=Be.setState;Be.setState=(Ce,Ne)=>{un(Ce,Ne),an()};const Tn=Rt((...Ce)=>{pt(...Ce),an()},Xe,Be);let yt;const pe=()=>{var Ce,Ne;if(!wn)return;Wt=!1,Xt.forEach(et=>{var Ft;return et((Ft=Xe())!=null?Ft:Tn)});const Ze=((Ne=Ct.onRehydrateStorage)==null?void 0:Ne.call(Ct,(Ce=Xe())!=null?Ce:Tn))||void 0;return Ve(wn.getItem.bind(wn))(Ct.name).then(et=>{if(et)if(typeof et.version=="number"&&et.version!==Ct.version){if(Ct.migrate)return Ct.migrate(et.state,et.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return et.state}).then(et=>{var Ft;return yt=Ct.merge(et,(Ft=Xe())!=null?Ft:Tn),pt(yt,!0),an()}).then(()=>{Ze==null||Ze(yt,void 0),yt=Xe(),Wt=!0,Yt.forEach(et=>et(yt))}).catch(et=>{Ze==null||Ze(void 0,et)})};return Be.persist={setOptions:Ce=>{Ct=sn(sn({},Ct),Ce),Ce.storage&&(wn=Ce.storage)},clearStorage:()=>{wn==null||wn.removeItem(Ct.name)},getOptions:()=>Ct,rehydrate:()=>pe(),hasHydrated:()=>Wt,onHydrate:Ce=>(Xt.add(Ce),()=>{Xt.delete(Ce)}),onFinishHydration:Ce=>(Yt.add(Ce),()=>{Yt.delete(Ce)})},Ct.skipHydration||pe(),yt||Tn},Et=(Rt,Lt)=>"getStorage"in Lt||"serialize"in Lt||"deserialize"in Lt?(console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),ke(Rt,Lt)):dt(Rt,Lt),Z=null;var ye=function(Lt){return function(pt,Xe){var Be=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[Xe],Ct=arguments.length>3?arguments[3]:void 0,Wt=Lt();useEffect(function(){typeof Xe!="undefined"&&(Ct?Ct(Xe):Wt.setState(_defineProperty({},pt,Xe)))},Be)}},ge=function(Lt){return Lt?Pt:function(pt){return pt}},ve=J(185),_e=J(5899),we=J.n(_e),de={activeId:null,value:[],keyManager:{keys:[],id:1},compact:!1,hideRemove:!1,onChange:void 0,renderHeader:void 0,renderContent:void 0,actions:[]},Y=J(59671),te=J(18846),Oe=J(72266),ee=J.n(Oe),Ae=function(Lt,pt,Xe){switch(Xe.type){case"moveItem":var Be=Xe.activeId,Ct=Xe.targetId,Wt=Be?pt.keys.indexOf(Be):-1,Xt=Ct?pt.keys.indexOf(Ct):-1;return Wt===Xt||Wt<0||Wt>=Lt.length||Xt<0||Xt>=Lt.length?void 0:{data:(0,te.Uy)(Lt,function(Tn){var yt=(0,Y.Rp)(Tn,Wt,Xt);return yt}),manager:(0,te.Uy)(pt,function(Tn){return Tn.keys=(0,Y.Rp)(Tn.keys,Wt,Xt),Tn})};case"removeItem":var Yt=new Set(Array.isArray(Xe.index)?Xe.index:[Xe.index]);return Yt.size<=0?void 0:{data:(0,te.Uy)(Lt,function(Tn){var yt=Tn.filter(function(pe,Ce){return!Yt.has(Ce)});return yt}),manager:(0,te.Uy)(pt,function(Tn){return Tn.keys=Tn.keys.filter(function(yt,pe){return!Yt.has(pe)}),Tn})};case"addItem":var wn=Xe.item,an=Xe.index,un=an===void 0?Lt.length:an;return{data:(0,te.Uy)(Lt,function(Tn){return Tn.splice(un,0,wn),Tn}),manager:(0,te.Uy)(pt,function(Tn){return Tn.keys.splice(un,0,Tn.id),Tn.id+=1,Tn})};case"updateItem":return{data:(0,te.Uy)(Lt,function(Tn){var yt=Xe.item,pe=Xe.index;return Tn[pe]=ee()(Tn[pe],yt),Tn}),manager:(0,te.Uy)(pt,function(Tn){return Tn})}}},Te=function(Lt,pt){return(0,ve.Z)((0,ve.Z)({},de),{},{handleDragStart:function(Be){var Ct=Be.active.id;Ct&&Lt({activeId:Ct})},handleDragEnd:function(Be){var Ct=Be.over,Wt=Be.active,Xt=pt(),Yt=Xt.dispatchListData;Ct&&Yt({type:"moveItem",activeId:Wt.id,targetId:Ct.id}),Lt({activeId:null})},handleDragCancel:function(){Lt({activeId:null})},dispatchListData:function(Be){var Ct=pt(),Wt=Ct.value,Xt=Ct.onChange,Yt=Ct.keyManager,wn=Ae(Wt,Yt,Be)||{},an=wn.data,un=wn.manager;if(an){if(we()(Wt,an))return;Lt({value:an}),Xt&&Xt(an)}un&&Lt({keyManager:un})},getActiveIndex:function(){var Be=pt(),Ct=Be.keyManager,Wt=Be.activeId,Xt=Wt?Ct.keys.indexOf(Wt):-1;return Xt}})},$e=Te,Je=function(Lt){return ce(ge(Lt)($e,{name:"SortableList"}))},it=xe(),tt=it.useStore,St=it.useStoreApi,ot=it.Provider},28257:function(tn,qe,J){"use strict";J.d(qe,{LB:function(){return Ii},y9:function(){return Hi},g4:function(){return dn},Lg:function(){return Ke},uN:function(){return Pr},MA:function(){return ct},LO:function(){return en},pE:function(){return Et},ey:function(){return Z},RJ:function(){return us},Ai:function(){return es},VK:function(){return Te},_8:function(){return ke},hI:function(){return St},Cj:function(){return ci},O1:function(){return ro},Zj:function(){return mo},VT:function(){return mt},Dy:function(){return Pt}});var L=J(50959),x=J(10422),g=J(84341);const C={display:"none"};function T(U){let{id:Q,value:Pe}=U;return L.createElement("div",{id:Q,style:C},Pe)}const $={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};function H(U){let{id:Q,announcement:Pe}=U;return L.createElement("div",{id:Q,style:$,role:"status","aria-live":"assertive","aria-atomic":!0},Pe)}function K(){const[U,Q]=(0,L.useState)("");return{announce:(0,L.useCallback)(st=>{st!=null&&Q(st)},[]),announcement:U}}const ce=(0,L.createContext)(null);function oe(U){const Q=(0,L.useContext)(ce);(0,L.useEffect)(()=>{if(!Q)throw new Error("useDndMonitor must be used within a children of <DndContext>");return Q(U)},[U,Q])}function xe(){const[U]=(0,L.useState)(()=>new Set),Q=(0,L.useCallback)(st=>(U.add(st),()=>U.delete(st)),[U]);return[(0,L.useCallback)(st=>{let{type:Dt,event:Tt}=st;U.forEach(G=>{var be;return(be=G[Dt])==null?void 0:be.call(G,Tt)})},[U]),Q]}const Se={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},k={onDragStart(U){let{active:Q}=U;return"Picked up draggable item "+Q.id+"."},onDragOver(U){let{active:Q,over:Pe}=U;return Pe?"Draggable item "+Q.id+" was moved over droppable area "+Pe.id+".":"Draggable item "+Q.id+" is no longer over a droppable area."},onDragEnd(U){let{active:Q,over:Pe}=U;return Pe?"Draggable item "+Q.id+" was dropped over droppable area "+Pe.id:"Draggable item "+Q.id+" was dropped."},onDragCancel(U){let{active:Q}=U;return"Dragging was cancelled. Draggable item "+Q.id+" was dropped."}};function rt(U){let{announcements:Q=k,container:Pe,hiddenTextDescribedById:st,screenReaderInstructions:Dt=Se}=U;const{announce:Tt,announcement:G}=K(),be=(0,g.Ld)("DndLiveRegion"),[I,ie]=(0,L.useState)(!1);if((0,L.useEffect)(()=>{ie(!0)},[]),oe((0,L.useMemo)(()=>({onDragStart(xt){let{active:Mn}=xt;Tt(Q.onDragStart({active:Mn}))},onDragMove(xt){let{active:Mn,over:In}=xt;Q.onDragMove&&Tt(Q.onDragMove({active:Mn,over:In}))},onDragOver(xt){let{active:Mn,over:In}=xt;Tt(Q.onDragOver({active:Mn,over:In}))},onDragEnd(xt){let{active:Mn,over:In}=xt;Tt(Q.onDragEnd({active:Mn,over:In}))},onDragCancel(xt){let{active:Mn,over:In}=xt;Tt(Q.onDragCancel({active:Mn,over:In}))}}),[Tt,Q])),!I)return null;const We=L.createElement(L.Fragment,null,L.createElement(T,{id:st,value:Dt.draggable}),L.createElement(H,{id:be,announcement:G}));return Pe?(0,x.createPortal)(We,Pe):We}var lt;(function(U){U.DragStart="dragStart",U.DragMove="dragMove",U.DragEnd="dragEnd",U.DragCancel="dragCancel",U.DragOver="dragOver",U.RegisterDroppable="registerDroppable",U.SetDroppableDisabled="setDroppableDisabled",U.UnregisterDroppable="unregisterDroppable"})(lt||(lt={}));function Qt(){}function mt(U,Q){return(0,L.useMemo)(()=>({sensor:U,options:Q!=null?Q:{}}),[U,Q])}function Pt(){for(var U=arguments.length,Q=new Array(U),Pe=0;Pe<U;Pe++)Q[Pe]=arguments[Pe];return(0,L.useMemo)(()=>[...Q].filter(st=>st!=null),[...Q])}const O=Object.freeze({x:0,y:0});function Ye(U,Q){return Math.sqrt(Math.pow(U.x-Q.x,2)+Math.pow(U.y-Q.y,2))}function gt(U,Q){const Pe=(0,g.DC)(U);if(!Pe)return"0 0";const st={x:(Pe.x-Q.left)/Q.width*100,y:(Pe.y-Q.top)/Q.height*100};return st.x+"% "+st.y+"%"}function Ot(U,Q){let{data:{value:Pe}}=U,{data:{value:st}}=Q;return Pe-st}function Nt(U,Q){let{data:{value:Pe}}=U,{data:{value:st}}=Q;return st-Pe}function Ve(U){let{left:Q,top:Pe,height:st,width:Dt}=U;return[{x:Q,y:Pe},{x:Q+Dt,y:Pe},{x:Q,y:Pe+st},{x:Q+Dt,y:Pe+st}]}function ke(U,Q){if(!U||U.length===0)return null;const[Pe]=U;return Q?Pe[Q]:Pe}function dt(U,Q,Pe){return Q===void 0&&(Q=U.left),Pe===void 0&&(Pe=U.top),{x:Q+U.width*.5,y:Pe+U.height*.5}}const Et=U=>{let{collisionRect:Q,droppableRects:Pe,droppableContainers:st}=U;const Dt=dt(Q,Q.left,Q.top),Tt=[];for(const G of st){const{id:be}=G,I=Pe.get(be);if(I){const ie=Ye(dt(I),Dt);Tt.push({id:be,data:{droppableContainer:G,value:ie}})}}return Tt.sort(Ot)},Z=U=>{let{collisionRect:Q,droppableRects:Pe,droppableContainers:st}=U;const Dt=Ve(Q),Tt=[];for(const G of st){const{id:be}=G,I=Pe.get(be);if(I){const ie=Ve(I),We=Dt.reduce((Mn,In,Xn)=>Mn+Ye(ie[Xn],In),0),xt=Number((We/4).toFixed(4));Tt.push({id:be,data:{droppableContainer:G,value:xt}})}}return Tt.sort(Ot)};function ye(U,Q){const Pe=Math.max(Q.top,U.top),st=Math.max(Q.left,U.left),Dt=Math.min(Q.left+Q.width,U.left+U.width),Tt=Math.min(Q.top+Q.height,U.top+U.height),G=Dt-st,be=Tt-Pe;if(st<Dt&&Pe<Tt){const I=Q.width*Q.height,ie=U.width*U.height,We=G*be,xt=We/(I+ie-We);return Number(xt.toFixed(4))}return 0}const ge=U=>{let{collisionRect:Q,droppableRects:Pe,droppableContainers:st}=U;const Dt=[];for(const Tt of st){const{id:G}=Tt,be=Pe.get(G);if(be){const I=ye(be,Q);I>0&&Dt.push({id:G,data:{droppableContainer:Tt,value:I}})}}return Dt.sort(Nt)};function ve(U,Q){const{top:Pe,left:st,bottom:Dt,right:Tt}=Q;return Pe<=U.y&&U.y<=Dt&&st<=U.x&&U.x<=Tt}const _e=U=>{let{droppableContainers:Q,droppableRects:Pe,pointerCoordinates:st}=U;if(!st)return[];const Dt=[];for(const Tt of Q){const{id:G}=Tt,be=Pe.get(G);if(be&&ve(st,be)){const ie=Ve(be).reduce((xt,Mn)=>xt+Ye(st,Mn),0),We=Number((ie/4).toFixed(4));Dt.push({id:G,data:{droppableContainer:Tt,value:We}})}}return Dt.sort(Ot)};function we(U,Q,Pe){return zr(sn({},U),{scaleX:Q&&Pe?Q.width/Pe.width:1,scaleY:Q&&Pe?Q.height/Pe.height:1})}function de(U,Q){return U&&Q?{x:U.left-Q.left,y:U.top-Q.top}:O}function Y(U){return function(Pe){for(var st=arguments.length,Dt=new Array(st>1?st-1:0),Tt=1;Tt<st;Tt++)Dt[Tt-1]=arguments[Tt];return Dt.reduce((G,be)=>zr(sn({},G),{top:G.top+U*be.y,bottom:G.bottom+U*be.y,left:G.left+U*be.x,right:G.right+U*be.x}),sn({},Pe))}}const te=Y(1);function Oe(U){if(U.startsWith("matrix3d(")){const Q=U.slice(9,-1).split(/, /);return{x:+Q[12],y:+Q[13],scaleX:+Q[0],scaleY:+Q[5]}}else if(U.startsWith("matrix(")){const Q=U.slice(7,-1).split(/, /);return{x:+Q[4],y:+Q[5],scaleX:+Q[0],scaleY:+Q[3]}}return null}function ee(U,Q,Pe){const st=Oe(Q);if(!st)return U;const{scaleX:Dt,scaleY:Tt,x:G,y:be}=st,I=U.left-G-(1-Dt)*parseFloat(Pe),ie=U.top-be-(1-Tt)*parseFloat(Pe.slice(Pe.indexOf(" ")+1)),We=Dt?U.width/Dt:U.width,xt=Tt?U.height/Tt:U.height;return{width:We,height:xt,top:ie,right:I+We,bottom:ie+xt,left:I}}const Ae={ignoreTransform:!1};function Te(U,Q){Q===void 0&&(Q=Ae);let Pe=U.getBoundingClientRect();if(Q.ignoreTransform){const{transform:ie,transformOrigin:We}=(0,g.Jj)(U).getComputedStyle(U);ie&&(Pe=ee(Pe,ie,We))}const{top:st,left:Dt,width:Tt,height:G,bottom:be,right:I}=Pe;return{top:st,left:Dt,width:Tt,height:G,bottom:be,right:I}}function $e(U){return Te(U,{ignoreTransform:!0})}function Je(U){const Q=U.innerWidth,Pe=U.innerHeight;return{top:0,left:0,right:Q,bottom:Pe,width:Q,height:Pe}}function it(U,Q){return Q===void 0&&(Q=(0,g.Jj)(U).getComputedStyle(U)),Q.position==="fixed"}function tt(U,Q){Q===void 0&&(Q=(0,g.Jj)(U).getComputedStyle(U));const Pe=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(Dt=>{const Tt=Q[Dt];return typeof Tt=="string"?Pe.test(Tt):!1})}function St(U,Q){const Pe=[];function st(Dt){if(Q!=null&&Pe.length>=Q||!Dt)return Pe;if((0,g.qk)(Dt)&&Dt.scrollingElement!=null&&!Pe.includes(Dt.scrollingElement))return Pe.push(Dt.scrollingElement),Pe;if(!(0,g.Re)(Dt)||(0,g.vZ)(Dt)||Pe.includes(Dt))return Pe;const Tt=(0,g.Jj)(U).getComputedStyle(Dt);return Dt!==U&&tt(Dt,Tt)&&Pe.push(Dt),it(Dt,Tt)?Pe:st(Dt.parentNode)}return U?st(U):Pe}function ot(U){const[Q]=St(U,1);return Q!=null?Q:null}function Rt(U){return!g.Nq||!U?null:(0,g.FJ)(U)?U:(0,g.UG)(U)?(0,g.qk)(U)||U===(0,g.r3)(U).scrollingElement?window:(0,g.Re)(U)?U:null:null}function Lt(U){return(0,g.FJ)(U)?U.scrollX:U.scrollLeft}function pt(U){return(0,g.FJ)(U)?U.scrollY:U.scrollTop}function Xe(U){return{x:Lt(U),y:pt(U)}}var Be;(function(U){U[U.Forward=1]="Forward",U[U.Backward=-1]="Backward"})(Be||(Be={}));function Ct(U){return!g.Nq||!U?!1:U===document.scrollingElement}function Wt(U){const Q={x:0,y:0},Pe=Ct(U)?{height:window.innerHeight,width:window.innerWidth}:{height:U.clientHeight,width:U.clientWidth},st={x:U.scrollWidth-Pe.width,y:U.scrollHeight-Pe.height},Dt=U.scrollTop<=Q.y,Tt=U.scrollLeft<=Q.x,G=U.scrollTop>=st.y,be=U.scrollLeft>=st.x;return{isTop:Dt,isLeft:Tt,isBottom:G,isRight:be,maxScroll:st,minScroll:Q}}const Xt={x:.2,y:.2};function Yt(U,Q,Pe,st,Dt){let{top:Tt,left:G,right:be,bottom:I}=Pe;st===void 0&&(st=10),Dt===void 0&&(Dt=Xt);const{isTop:ie,isBottom:We,isLeft:xt,isRight:Mn}=Wt(U),In={x:0,y:0},Xn={x:0,y:0},yn={height:Q.height*Dt.y,width:Q.width*Dt.x};return!ie&&Tt<=Q.top+yn.height?(In.y=Be.Backward,Xn.y=st*Math.abs((Q.top+yn.height-Tt)/yn.height)):!We&&I>=Q.bottom-yn.height&&(In.y=Be.Forward,Xn.y=st*Math.abs((Q.bottom-yn.height-I)/yn.height)),!Mn&&be>=Q.right-yn.width?(In.x=Be.Forward,Xn.x=st*Math.abs((Q.right-yn.width-be)/yn.width)):!xt&&G<=Q.left+yn.width&&(In.x=Be.Backward,Xn.x=st*Math.abs((Q.left+yn.width-G)/yn.width)),{direction:In,speed:Xn}}function wn(U){if(U===document.scrollingElement){const{innerWidth:Tt,innerHeight:G}=window;return{top:0,left:0,right:Tt,bottom:G,width:Tt,height:G}}const{top:Q,left:Pe,right:st,bottom:Dt}=U.getBoundingClientRect();return{top:Q,left:Pe,right:st,bottom:Dt,width:U.clientWidth,height:U.clientHeight}}function an(U){return U.reduce((Q,Pe)=>(0,g.IH)(Q,Xe(Pe)),O)}function un(U){return U.reduce((Q,Pe)=>Q+Lt(Pe),0)}function Tn(U){return U.reduce((Q,Pe)=>Q+pt(Pe),0)}function yt(U,Q){if(Q===void 0&&(Q=Te),!U)return;const{top:Pe,left:st,bottom:Dt,right:Tt}=Q(U);ot(U)&&(Dt<=0||Tt<=0||Pe>=window.innerHeight||st>=window.innerWidth)&&U.scrollIntoView({block:"center",inline:"center"})}const pe=[["x",["left","right"],un],["y",["top","bottom"],Tn]];class Ce{constructor(Q,Pe){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const st=St(Pe),Dt=an(st);this.rect=sn({},Q),this.width=Q.width,this.height=Q.height;for(const[Tt,G,be]of pe)for(const I of G)Object.defineProperty(this,I,{get:()=>{const ie=be(st),We=Dt[Tt]-ie;return this.rect[I]+We},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ne{constructor(Q){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(Pe=>{var st;return(st=this.target)==null?void 0:st.removeEventListener(...Pe)})},this.target=Q}add(Q,Pe,st){var Dt;(Dt=this.target)==null||Dt.addEventListener(Q,Pe,st),this.listeners.push([Q,Pe,st])}}function Ze(U){const{EventTarget:Q}=(0,g.Jj)(U);return U instanceof Q?U:(0,g.r3)(U)}function et(U,Q){const Pe=Math.abs(U.x),st=Math.abs(U.y);return typeof Q=="number"?Math.sqrt(Uu(Pe,2)+Uu(st,2))>Q:"x"in Q&&"y"in Q?Pe>Q.x&&st>Q.y:"x"in Q?Pe>Q.x:"y"in Q?st>Q.y:!1}var Ft;(function(U){U.Click="click",U.DragStart="dragstart",U.Keydown="keydown",U.ContextMenu="contextmenu",U.Resize="resize",U.SelectionChange="selectionchange",U.VisibilityChange="visibilitychange"})(Ft||(Ft={}));function qt(U){U.preventDefault()}function $n(U){U.stopPropagation()}var dn;(function(U){U.Space="Space",U.Down="ArrowDown",U.Right="ArrowRight",U.Left="ArrowLeft",U.Up="ArrowUp",U.Esc="Escape",U.Enter="Enter"})(dn||(dn={}));const Me={start:[dn.Space,dn.Enter],cancel:[dn.Esc],end:[dn.Space,dn.Enter]},Qe=(U,Q)=>{let{currentCoordinates:Pe}=Q;switch(U.code){case dn.Right:return zr(sn({},Pe),{x:Pe.x+25});case dn.Left:return zr(sn({},Pe),{x:Pe.x-25});case dn.Down:return zr(sn({},Pe),{y:Pe.y+25});case dn.Up:return zr(sn({},Pe),{y:Pe.y-25})}};class Ke{constructor(Q){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=Q;const{event:{target:Pe}}=Q;this.props=Q,this.listeners=new Ne((0,g.r3)(Pe)),this.windowListeners=new Ne((0,g.Jj)(Pe)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ft.Resize,this.handleCancel),this.windowListeners.add(Ft.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ft.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:Q,onStart:Pe}=this.props,st=Q.node.current;st&&yt(st),Pe(O)}handleKeyDown(Q){if((0,g.vd)(Q)){const{active:Pe,context:st,options:Dt}=this.props,{keyboardCodes:Tt=Me,coordinateGetter:G=Qe,scrollBehavior:be="smooth"}=Dt,{code:I}=Q;if(Tt.end.includes(I)){this.handleEnd(Q);return}if(Tt.cancel.includes(I)){this.handleCancel(Q);return}const{collisionRect:ie}=st.current,We=ie?{x:ie.left,y:ie.top}:O;this.referenceCoordinates||(this.referenceCoordinates=We);const xt=G(Q,{active:Pe,context:st.current,currentCoordinates:We});if(xt){const Mn=(0,g.$X)(xt,We),In={x:0,y:0},{scrollableAncestors:Xn}=st.current;for(const yn of Xn){const Yn=Q.code,{isTop:vr,isRight:ir,isLeft:yr,isBottom:ri,maxScroll:Wr,minScroll:ii}=Wt(yn),Xr=wn(yn),hi={x:Math.min(Yn===dn.Right?Xr.right-Xr.width/2:Xr.right,Math.max(Yn===dn.Right?Xr.left:Xr.left+Xr.width/2,xt.x)),y:Math.min(Yn===dn.Down?Xr.bottom-Xr.height/2:Xr.bottom,Math.max(Yn===dn.Down?Xr.top:Xr.top+Xr.height/2,xt.y))},Mi=Yn===dn.Right&&!ir||Yn===dn.Left&&!yr,Ni=Yn===dn.Down&&!ri||Yn===dn.Up&&!vr;if(Mi&&hi.x!==xt.x){const gi=yn.scrollLeft+Mn.x,di=Yn===dn.Right&&gi<=Wr.x||Yn===dn.Left&&gi>=ii.x;if(di&&!Mn.y){yn.scrollTo({left:gi,behavior:be});return}di?In.x=yn.scrollLeft-gi:In.x=Yn===dn.Right?yn.scrollLeft-Wr.x:yn.scrollLeft-ii.x,In.x&&yn.scrollBy({left:-In.x,behavior:be});break}else if(Ni&&hi.y!==xt.y){const gi=yn.scrollTop+Mn.y,di=Yn===dn.Down&&gi<=Wr.y||Yn===dn.Up&&gi>=ii.y;if(di&&!Mn.x){yn.scrollTo({top:gi,behavior:be});return}di?In.y=yn.scrollTop-gi:In.y=Yn===dn.Down?yn.scrollTop-Wr.y:yn.scrollTop-ii.y,In.y&&yn.scrollBy({top:-In.y,behavior:be});break}}this.handleMove(Q,(0,g.IH)((0,g.$X)(xt,this.referenceCoordinates),In))}}}handleMove(Q,Pe){const{onMove:st}=this.props;Q.preventDefault(),st(Pe)}handleEnd(Q){const{onEnd:Pe}=this.props;Q.preventDefault(),this.detach(),Pe()}handleCancel(Q){const{onCancel:Pe}=this.props;Q.preventDefault(),this.detach(),Pe()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Ke.activators=[{eventName:"onKeyDown",handler:(U,Q,Pe)=>{let{keyboardCodes:st=Me,onActivation:Dt}=Q,{active:Tt}=Pe;const{code:G}=U.nativeEvent;if(st.start.includes(G)){const be=Tt.activatorNode.current;return be&&U.target!==be?!1:(U.preventDefault(),Dt==null||Dt({event:U.nativeEvent}),!0)}return!1}}];function at(U){return Boolean(U&&"distance"in U)}function Bt(U){return Boolean(U&&"delay"in U)}class En{constructor(Q,Pe,st){var Dt;st===void 0&&(st=Ze(Q.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=Q,this.events=Pe;const{event:Tt}=Q,{target:G}=Tt;this.props=Q,this.events=Pe,this.document=(0,g.r3)(G),this.documentListeners=new Ne(this.document),this.listeners=new Ne(st),this.windowListeners=new Ne((0,g.Jj)(G)),this.initialCoordinates=(Dt=(0,g.DC)(Tt))!=null?Dt:O,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:Q,props:{options:{activationConstraint:Pe}}}=this;if(this.listeners.add(Q.move.name,this.handleMove,{passive:!1}),this.listeners.add(Q.end.name,this.handleEnd),this.windowListeners.add(Ft.Resize,this.handleCancel),this.windowListeners.add(Ft.DragStart,qt),this.windowListeners.add(Ft.VisibilityChange,this.handleCancel),this.windowListeners.add(Ft.ContextMenu,qt),this.documentListeners.add(Ft.Keydown,this.handleKeydown),Pe){if(at(Pe))return;if(Bt(Pe)){this.timeoutId=setTimeout(this.handleStart,Pe.delay);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:Q}=this,{onStart:Pe}=this.props;Q&&(this.activated=!0,this.documentListeners.add(Ft.Click,$n,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ft.SelectionChange,this.removeTextSelection),Pe(Q))}handleMove(Q){var Pe;const{activated:st,initialCoordinates:Dt,props:Tt}=this,{onMove:G,options:{activationConstraint:be}}=Tt;if(!Dt)return;const I=(Pe=(0,g.DC)(Q))!=null?Pe:O,ie=(0,g.$X)(Dt,I);if(!st&&be){if(Bt(be))return et(ie,be.tolerance)?this.handleCancel():void 0;if(at(be))return be.tolerance!=null&&et(ie,be.tolerance)?this.handleCancel():et(ie,be.distance)?this.handleStart():void 0}Q.cancelable&&Q.preventDefault(),G(I)}handleEnd(){const{onEnd:Q}=this.props;this.detach(),Q()}handleCancel(){const{onCancel:Q}=this.props;this.detach(),Q()}handleKeydown(Q){Q.code===dn.Esc&&this.handleCancel()}removeTextSelection(){var Q;(Q=this.document.getSelection())==null||Q.removeAllRanges()}}const ln={move:{name:"pointermove"},end:{name:"pointerup"}};class zt extends En{constructor(Q){const{event:Pe}=Q,st=(0,g.r3)(Pe.target);super(Q,ln,st)}}zt.activators=[{eventName:"onPointerDown",handler:(U,Q)=>{let{nativeEvent:Pe}=U,{onActivation:st}=Q;return!Pe.isPrimary||Pe.button!==0?!1:(st==null||st({event:Pe}),!0)}}];const me={move:{name:"mousemove"},end:{name:"mouseup"}};var Ie;(function(U){U[U.RightClick=2]="RightClick"})(Ie||(Ie={}));class ct extends En{constructor(Q){super(Q,me,(0,g.r3)(Q.event.target))}}ct.activators=[{eventName:"onMouseDown",handler:(U,Q)=>{let{nativeEvent:Pe}=U,{onActivation:st}=Q;return Pe.button===Ie.RightClick?!1:(st==null||st({event:Pe}),!0)}}];const It={move:{name:"touchmove"},end:{name:"touchend"}};class en extends En{constructor(Q){super(Q,It)}static setup(){return window.addEventListener(It.move.name,Q,{capture:!1,passive:!1}),function(){window.removeEventListener(It.move.name,Q)};function Q(){}}}en.activators=[{eventName:"onTouchStart",handler:(U,Q)=>{let{nativeEvent:Pe}=U,{onActivation:st}=Q;const{touches:Dt}=Pe;return Dt.length>1?!1:(st==null||st({event:Pe}),!0)}}];var bn;(function(U){U[U.Pointer=0]="Pointer",U[U.DraggableRect=1]="DraggableRect"})(bn||(bn={}));var Vn;(function(U){U[U.TreeOrder=0]="TreeOrder",U[U.ReversedTreeOrder=1]="ReversedTreeOrder"})(Vn||(Vn={}));function tr(U){let{acceleration:Q,activator:Pe=bn.Pointer,canScroll:st,draggingRect:Dt,enabled:Tt,interval:G=5,order:be=Vn.TreeOrder,pointerCoordinates:I,scrollableAncestors:ie,scrollableAncestorRects:We,delta:xt,threshold:Mn}=U;const In=Ar({delta:xt,disabled:!Tt}),[Xn,yn]=(0,g.Yz)(),Yn=(0,L.useRef)({x:0,y:0}),vr=(0,L.useRef)({x:0,y:0}),ir=(0,L.useMemo)(()=>{switch(Pe){case bn.Pointer:return I?{top:I.y,bottom:I.y,left:I.x,right:I.x}:null;case bn.DraggableRect:return Dt}},[Pe,Dt,I]),yr=(0,L.useRef)(null),ri=(0,L.useCallback)(()=>{const ii=yr.current;if(!ii)return;const Xr=Yn.current.x*vr.current.x,hi=Yn.current.y*vr.current.y;ii.scrollBy(Xr,hi)},[]),Wr=(0,L.useMemo)(()=>be===Vn.TreeOrder?[...ie].reverse():ie,[be,ie]);(0,L.useEffect)(()=>{if(!Tt||!ie.length||!ir){yn();return}for(const ii of Wr){if((st==null?void 0:st(ii))===!1)continue;const Xr=ie.indexOf(ii),hi=We[Xr];if(!hi)continue;const{direction:Mi,speed:Ni}=Yt(ii,hi,ir,Q,Mn);for(const gi of["x","y"])In[gi][Mi[gi]]||(Ni[gi]=0,Mi[gi]=0);if(Ni.x>0||Ni.y>0){yn(),yr.current=ii,Xn(ri,G),Yn.current=Ni,vr.current=Mi;return}}Yn.current={x:0,y:0},vr.current={x:0,y:0},yn()},[Q,ri,st,yn,Tt,G,JSON.stringify(ir),JSON.stringify(In),Xn,ie,Wr,We,JSON.stringify(Mn)])}const lr={x:{[Be.Backward]:!1,[Be.Forward]:!1},y:{[Be.Backward]:!1,[Be.Forward]:!1}};function Ar(U){let{delta:Q,disabled:Pe}=U;const st=(0,g.D9)(Q);return(0,g.Gj)(Dt=>{if(Pe||!st||!Dt)return lr;const Tt={x:Math.sign(Q.x-st.x),y:Math.sign(Q.y-st.y)};return{x:{[Be.Backward]:Dt.x[Be.Backward]||Tt.x===-1,[Be.Forward]:Dt.x[Be.Forward]||Tt.x===1},y:{[Be.Backward]:Dt.y[Be.Backward]||Tt.y===-1,[Be.Forward]:Dt.y[Be.Forward]||Tt.y===1}}},[Pe,Q,st])}function ti(U,Q){const Pe=Q!==null?U.get(Q):void 0,st=Pe?Pe.node.current:null;return(0,g.Gj)(Dt=>{var Tt;return Q===null?null:(Tt=st!=null?st:Dt)!=null?Tt:null},[st,Q])}function ai(U,Q){return(0,L.useMemo)(()=>U.reduce((Pe,st)=>{const{sensor:Dt}=st,Tt=Dt.activators.map(G=>({eventName:G.eventName,handler:Q(G.handler,st)}));return[...Pe,...Tt]},[]),[U,Q])}var Pr;(function(U){U[U.Always=0]="Always",U[U.BeforeDragging=1]="BeforeDragging",U[U.WhileDragging=2]="WhileDragging"})(Pr||(Pr={}));var mi;(function(U){U.Optimized="optimized"})(mi||(mi={}));const D=new Map;function j(U,Q){let{dragging:Pe,dependencies:st,config:Dt}=Q;const[Tt,G]=(0,L.useState)(null),{frequency:be,measure:I,strategy:ie}=Dt,We=(0,L.useRef)(U),xt=Yn(),Mn=(0,g.Ey)(xt),In=(0,L.useCallback)(function(vr){vr===void 0&&(vr=[]),!Mn.current&&G(ir=>ir===null?vr:ir.concat(vr.filter(yr=>!ir.includes(yr))))},[Mn]),Xn=(0,L.useRef)(null),yn=(0,g.Gj)(vr=>{if(xt&&!Pe)return D;if(!vr||vr===D||We.current!==U||Tt!=null){const ir=new Map;for(let yr of U){if(!yr)continue;if(Tt&&Tt.length>0&&!Tt.includes(yr.id)&&yr.rect.current){ir.set(yr.id,yr.rect.current);continue}const ri=yr.node.current,Wr=ri?new Ce(I(ri),ri):null;yr.rect.current=Wr,Wr&&ir.set(yr.id,Wr)}return ir}return vr},[U,Tt,Pe,xt,I]);return(0,L.useEffect)(()=>{We.current=U},[U]),(0,L.useEffect)(()=>{xt||In()},[Pe,xt]),(0,L.useEffect)(()=>{Tt&&Tt.length>0&&G(null)},[JSON.stringify(Tt)]),(0,L.useEffect)(()=>{xt||typeof be!="number"||Xn.current!==null||(Xn.current=setTimeout(()=>{In(),Xn.current=null},be))},[be,xt,In,...st]),{droppableRects:yn,measureDroppableContainers:In,measuringScheduled:Tt!=null};function Yn(){switch(ie){case Pr.Always:return!1;case Pr.BeforeDragging:return Pe;default:return!Pe}}}function m(U,Q){return(0,g.Gj)(Pe=>U?Pe||(typeof Q=="function"?Q(U):U):null,[Q,U])}function v(U,Q){return m(U,Q)}function w(U){let{callback:Q,disabled:Pe}=U;const st=(0,g.zX)(Q),Dt=(0,L.useMemo)(()=>{if(Pe||typeof window=="undefined"||typeof window.MutationObserver=="undefined")return;const{MutationObserver:Tt}=window;return new Tt(st)},[st,Pe]);return(0,L.useEffect)(()=>()=>Dt==null?void 0:Dt.disconnect(),[Dt]),Dt}function S(U){let{callback:Q,disabled:Pe}=U;const st=(0,g.zX)(Q),Dt=(0,L.useMemo)(()=>{if(Pe||typeof window=="undefined"||typeof window.ResizeObserver=="undefined")return;const{ResizeObserver:Tt}=window;return new Tt(st)},[Pe]);return(0,L.useEffect)(()=>()=>Dt==null?void 0:Dt.disconnect(),[Dt]),Dt}function z(U){return new Ce(Te(U),U)}function ae(U,Q,Pe){Q===void 0&&(Q=z);const[st,Dt]=(0,L.useReducer)(be,null),Tt=w({callback(I){if(U)for(const ie of I){const{type:We,target:xt}=ie;if(We==="childList"&&xt instanceof HTMLElement&&xt.contains(U)){Dt();break}}}}),G=S({callback:Dt});return(0,g.LI)(()=>{Dt(),U?(G==null||G.observe(U),Tt==null||Tt.observe(document.body,{childList:!0,subtree:!0})):(G==null||G.disconnect(),Tt==null||Tt.disconnect())},[U]),st;function be(I){if(!U)return null;if(U.isConnected===!1){var ie;return(ie=I!=null?I:Pe)!=null?ie:null}const We=Q(U);return JSON.stringify(I)===JSON.stringify(We)?I:We}}function F(U){const Q=m(U);return de(U,Q)}const X=[];function P(U){const Q=(0,L.useRef)(U),Pe=(0,g.Gj)(st=>U?st&&st!==X&&U&&Q.current&&U.parentNode===Q.current.parentNode?st:St(U):X,[U]);return(0,L.useEffect)(()=>{Q.current=U},[U]),Pe}function W(U){const[Q,Pe]=(0,L.useState)(null),st=(0,L.useRef)(U),Dt=(0,L.useCallback)(Tt=>{const G=Rt(Tt.target);G&&Pe(be=>be?(be.set(G,Xe(G)),new Map(be)):null)},[]);return(0,L.useEffect)(()=>{const Tt=st.current;if(U!==Tt){G(Tt);const be=U.map(I=>{const ie=Rt(I);return ie?(ie.addEventListener("scroll",Dt,{passive:!0}),[ie,Xe(ie)]):null}).filter(I=>I!=null);Pe(be.length?new Map(be):null),st.current=U}return()=>{G(U),G(Tt)};function G(be){be.forEach(I=>{const ie=Rt(I);ie==null||ie.removeEventListener("scroll",Dt)})}},[Dt,U]),(0,L.useMemo)(()=>U.length?Q?Array.from(Q.values()).reduce((Tt,G)=>(0,g.IH)(Tt,G),O):an(U):O,[U,Q])}function Fe(U,Q){Q===void 0&&(Q=[]);const Pe=(0,L.useRef)(null);return(0,L.useEffect)(()=>{Pe.current=null},Q),(0,L.useEffect)(()=>{const st=U!==O;st&&!Pe.current&&(Pe.current=U),!st&&Pe.current&&(Pe.current=null)},[U]),Pe.current?(0,g.$X)(U,Pe.current):O}function Ge(U){(0,L.useEffect)(()=>{if(!g.Nq)return;const Q=U.map(Pe=>{let{sensor:st}=Pe;return st.setup==null?void 0:st.setup()});return()=>{for(const Pe of Q)Pe==null||Pe()}},U.map(Q=>{let{sensor:Pe}=Q;return Pe}))}function ut(U,Q){return(0,L.useMemo)(()=>U.reduce((Pe,st)=>{let{eventName:Dt,handler:Tt}=st;return Pe[Dt]=G=>{Tt(G,Q)},Pe},{}),[U,Q])}function kt(U){return(0,L.useMemo)(()=>U?Je(U):null,[U])}const Ht=[];function ht(U,Q){Q===void 0&&(Q=Te);const[Pe]=U,st=kt(Pe?(0,g.Jj)(Pe):null),[Dt,Tt]=(0,L.useReducer)(be,Ht),G=S({callback:Tt});return U.length>0&&Dt===Ht&&Tt(),(0,g.LI)(()=>{U.length?U.forEach(I=>G==null?void 0:G.observe(I)):(G==null||G.disconnect(),Tt())},[U]),Dt;function be(){return U.length?U.map(I=>Ct(I)?st:new Ce(Q(I),I)):Ht}}function vt(U){if(!U)return null;if(U.children.length>1)return U;const Q=U.children[0];return(0,g.Re)(Q)?Q:U}function ft(U){let{measure:Q}=U;const[Pe,st]=(0,L.useState)(null),Dt=(0,L.useCallback)(ie=>{for(const{target:We}of ie)if((0,g.Re)(We)){st(xt=>{const Mn=Q(We);return xt?zr(sn({},xt),{width:Mn.width,height:Mn.height}):Mn});break}},[Q]),Tt=S({callback:Dt}),G=(0,L.useCallback)(ie=>{const We=vt(ie);Tt==null||Tt.disconnect(),We&&(Tt==null||Tt.observe(We)),st(We?Q(We):null)},[Q,Tt]),[be,I]=(0,g.wm)(G);return(0,L.useMemo)(()=>({nodeRef:be,rect:Pe,setRef:I}),[Pe,be,I])}const Gt=[{sensor:zt,options:{}},{sensor:Ke,options:{}}],An={current:{}},Rn={draggable:{measure:$e},droppable:{measure:$e,strategy:Pr.WhileDragging,frequency:mi.Optimized},dragOverlay:{measure:Te}};class Gn extends Map{get(Q){var Pe;return Q!=null&&(Pe=super.get(Q))!=null?Pe:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(Q=>{let{disabled:Pe}=Q;return!Pe})}getNodeFor(Q){var Pe,st;return(Pe=(st=this.get(Q))==null?void 0:st.node.current)!=null?Pe:void 0}}const Pn={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Gn,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Qt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Rn,measureDroppableContainers:Qt,windowRect:null,measuringScheduled:!1},kn={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Qt,draggableNodes:new Map,over:null,measureDroppableContainers:Qt},Qn=(0,L.createContext)(kn),cn=(0,L.createContext)(Pn);function Zn(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Gn}}}function cr(U,Q){switch(Q.type){case lt.DragStart:return zr(sn({},U),{draggable:zr(sn({},U.draggable),{initialCoordinates:Q.initialCoordinates,active:Q.active})});case lt.DragMove:return U.draggable.active?zr(sn({},U),{draggable:zr(sn({},U.draggable),{translate:{x:Q.coordinates.x-U.draggable.initialCoordinates.x,y:Q.coordinates.y-U.draggable.initialCoordinates.y}})}):U;case lt.DragEnd:case lt.DragCancel:return zr(sn({},U),{draggable:zr(sn({},U.draggable),{active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}})});case lt.RegisterDroppable:{const{element:Pe}=Q,{id:st}=Pe,Dt=new Gn(U.droppable.containers);return Dt.set(st,Pe),zr(sn({},U),{droppable:zr(sn({},U.droppable),{containers:Dt})})}case lt.SetDroppableDisabled:{const{id:Pe,key:st,disabled:Dt}=Q,Tt=U.droppable.containers.get(Pe);if(!Tt||st!==Tt.key)return U;const G=new Gn(U.droppable.containers);return G.set(Pe,zr(sn({},Tt),{disabled:Dt})),zr(sn({},U),{droppable:zr(sn({},U.droppable),{containers:G})})}case lt.UnregisterDroppable:{const{id:Pe,key:st}=Q,Dt=U.droppable.containers.get(Pe);if(!Dt||st!==Dt.key)return U;const Tt=new Gn(U.droppable.containers);return Tt.delete(Pe),zr(sn({},U),{droppable:zr(sn({},U.droppable),{containers:Tt})})}default:return U}}function Er(U){let{disabled:Q}=U;const{active:Pe,activatorEvent:st,draggableNodes:Dt}=(0,L.useContext)(Qn),Tt=(0,g.D9)(st),G=(0,g.D9)(Pe==null?void 0:Pe.id);return(0,L.useEffect)(()=>{if(!Q&&!st&&Tt&&G!=null){if(!(0,g.vd)(Tt)||document.activeElement===Tt.target)return;const be=Dt.get(G);if(!be)return;const{activatorNode:I,node:ie}=be;if(!I.current&&!ie.current)return;requestAnimationFrame(()=>{for(const We of[I.current,ie.current]){if(!We)continue;const xt=(0,g.so)(We);if(xt){xt.focus();break}}})}},[st,Q,Dt,G,Tt]),null}function Kr(U,Q){let Dt=Q,{transform:Pe}=Dt,st=Lo(Dt,["transform"]);return U!=null&&U.length?U.reduce((Tt,G)=>G(sn({transform:Tt},st)),Pe):Pe}function bi(U){return(0,L.useMemo)(()=>({draggable:sn(sn({},Rn.draggable),U==null?void 0:U.draggable),droppable:sn(sn({},Rn.droppable),U==null?void 0:U.droppable),dragOverlay:sn(sn({},Rn.dragOverlay),U==null?void 0:U.dragOverlay)}),[U==null?void 0:U.draggable,U==null?void 0:U.droppable,U==null?void 0:U.dragOverlay])}function li(U){let{activeNode:Q,measure:Pe,initialRect:st,config:Dt=!0}=U;const Tt=(0,L.useRef)(!1),{x:G,y:be}=typeof Dt=="boolean"?{x:Dt,y:Dt}:Dt;(0,g.LI)(()=>{if(!G&&!be||!Q){Tt.current=!1;return}if(Tt.current||!st)return;const ie=Q==null?void 0:Q.node.current;if(!ie||ie.isConnected===!1)return;const We=Pe(ie),xt=de(We,st);if(G||(xt.x=0),be||(xt.y=0),Tt.current=!0,Math.abs(xt.x)>0||Math.abs(xt.y)>0){const Mn=ot(ie);Mn&&Mn.scrollBy({top:xt.y,left:xt.x})}},[Q,G,be,st,Pe])}const fi=(0,L.createContext)(zr(sn({},O),{scaleX:1,scaleY:1}));var Ci;(function(U){U[U.Uninitialized=0]="Uninitialized",U[U.Initializing=1]="Initializing",U[U.Initialized=2]="Initialized"})(Ci||(Ci={}));const Ii=(0,L.memo)(function(Q){var Pe,st,Dt,Tt;let y1=Q,{id:G,accessibility:be,autoScroll:I=!0,children:ie,sensors:We=Gt,collisionDetection:xt=ge,measuring:Mn,modifiers:In}=y1,Xn=Lo(y1,["id","accessibility","autoScroll","children","sensors","collisionDetection","measuring","modifiers"]);const yn=(0,L.useReducer)(cr,void 0,Zn),[Yn,vr]=yn,[ir,yr]=xe(),[ri,Wr]=(0,L.useState)(Ci.Uninitialized),ii=ri===Ci.Initialized,{draggable:{active:Xr,nodes:hi,translate:Mi},droppable:{containers:Ni}}=Yn,gi=Xr?hi.get(Xr):null,di=(0,L.useRef)({initial:null,translated:null}),io=(0,L.useMemo)(()=>{var qr;return Xr!=null?{id:Xr,data:(qr=gi==null?void 0:gi.data)!=null?qr:An,rect:di}:null},[Xr,gi]),qi=(0,L.useRef)(null),[Ds,Oo]=(0,L.useState)(null),[oi,fs]=(0,L.useState)(null),Vs=(0,g.Ey)(Xn,Object.values(Xn)),qa=(0,g.Ld)("DndDescribedBy",G),Hs=(0,L.useMemo)(()=>Ni.getEnabled(),[Ni]),Fs=bi(Mn),{droppableRects:Qs,measureDroppableContainers:ga,measuringScheduled:Da}=j(Hs,{dragging:ii,dependencies:[Mi.x,Mi.y],config:Fs.droppable}),ts=ti(hi,Xr),v1=(0,L.useMemo)(()=>oi?(0,g.DC)(oi):null,[oi]),C1=Zs(),Ja=v(ts,Fs.draggable.measure);li({activeNode:Xr?hi.get(Xr):null,config:C1.layoutShiftCompensation,initialRect:Ja,measure:Fs.draggable.measure});const yo=ae(ts,Fs.draggable.measure,Ja),ks=ae(ts?ts.parentElement:null),ns=(0,L.useRef)({activatorEvent:null,active:null,activeNode:ts,collisionRect:null,collisions:null,droppableRects:Qs,draggableNodes:hi,draggingNode:null,draggingNodeRect:null,droppableContainers:Ni,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),va=Ni.getNodeFor((Pe=ns.current.over)==null?void 0:Pe.id),oo=ft({measure:Fs.dragOverlay.measure}),Io=(st=oo.nodeRef.current)!=null?st:ts,ki=ii?(Dt=oo.rect)!=null?Dt:yo:null,Tr=Boolean(oo.nodeRef.current&&oo.rect),gs=F(Tr?null:yo),Cn=kt(Io?(0,g.Jj)(Io):null),Nr=P(ii?va!=null?va:ts:null),$s=ht(Nr),ea=Kr(In,{transform:{x:Mi.x-gs.x,y:Mi.y-gs.y,scaleX:1,scaleY:1},activatorEvent:oi,active:io,activeNodeRect:yo,containerNodeRect:ks,draggingNodeRect:ki,over:ns.current.over,overlayNodeRect:oo.rect,scrollableAncestors:Nr,scrollableAncestorRects:$s,windowRect:Cn}),Wo=v1?(0,g.IH)(v1,Mi):null,so=W(Nr),Ai=Fe(so),Ca=Fe(so,[yo]),no=(0,g.IH)(ea,Ai),rs=ki?te(ki,ea):null,js=io&&rs?xt({active:io,collisionRect:rs,droppableRects:Qs,droppableContainers:Hs,pointerCoordinates:Wo}):null,Qa=ke(js,"id"),[vs,_1]=(0,L.useState)(null),Ha=Tr?ea:(0,g.IH)(ea,Ca),_a=we(Ha,(Tt=vs==null?void 0:vs.rect)!=null?Tt:null,yo),e1=(0,L.useCallback)((qr,wr)=>{let{sensor:zi,options:wo}=wr;if(qi.current==null)return;const Ji=hi.get(qi.current);if(!Ji)return;const Do=qr.nativeEvent,Ho=new zi({active:qi.current,activeNode:Ji,event:Do,options:wo,context:ns,onStart(Ui){const Ee=qi.current;if(Ee==null)return;const _s=hi.get(Ee);if(!_s)return;const{onDragStart:na}=Vs.current,No={active:{id:Ee,data:_s.data,rect:di}};(0,x.unstable_batchedUpdates)(()=>{na==null||na(No),Wr(Ci.Initializing),vr({type:lt.DragStart,initialCoordinates:Ui,active:Ee}),ir({type:"onDragStart",event:No})})},onMove(Ui){vr({type:lt.DragMove,coordinates:Ui})},onEnd:ta(lt.DragEnd),onCancel:ta(lt.DragCancel)});(0,x.unstable_batchedUpdates)(()=>{Oo(Ho),fs(qr.nativeEvent)});function ta(Ui){return function(){return Fl(this,null,function*(){const{active:_s,collisions:na,over:No,scrollAdjustedTranslate:Yo}=ns.current;let $i=null;if(_s&&Yo){const{cancelDrop:zo}=Vs.current;$i={activatorEvent:Do,active:_s,collisions:na,delta:Yo,over:No},Ui===lt.DragEnd&&typeof zo=="function"&&(yield Promise.resolve(zo($i)))&&(Ui=lt.DragCancel)}qi.current=null,(0,x.unstable_batchedUpdates)(()=>{vr({type:Ui}),Wr(Ci.Uninitialized),_1(null),Oo(null),fs(null);const zo=Ui===lt.DragEnd?"onDragEnd":"onDragCancel";if($i){const Ri=Vs.current[zo];Ri==null||Ri($i),ir({type:zo,event:$i})}})})}}},[hi]),xo=(0,L.useCallback)((qr,wr)=>(zi,wo)=>{const Ji=zi.nativeEvent,Do=hi.get(wo);if(qi.current!==null||!Do||Ji.dndKit||Ji.defaultPrevented)return;const Ho={active:Do};qr(zi,wr.options,Ho)===!0&&(Ji.dndKit={capturedBy:wr.sensor},qi.current=wo,e1(zi,wr))},[hi,e1]),Cs=ai(We,xo);Ge(We),(0,g.LI)(()=>{yo&&ri===Ci.Initializing&&Wr(Ci.Initialized)},[yo,ri]),(0,L.useEffect)(()=>{const{onDragMove:qr}=Vs.current,{active:wr,activatorEvent:zi,collisions:wo,over:Ji}=ns.current;if(!wr||!zi)return;const Do={active:wr,activatorEvent:zi,collisions:wo,delta:{x:no.x,y:no.y},over:Ji};(0,x.unstable_batchedUpdates)(()=>{qr==null||qr(Do),ir({type:"onDragMove",event:Do})})},[no.x,no.y]),(0,L.useEffect)(()=>{const{active:qr,activatorEvent:wr,collisions:zi,droppableContainers:wo,scrollAdjustedTranslate:Ji}=ns.current;if(!qr||qi.current==null||!wr||!Ji)return;const{onDragOver:Do}=Vs.current,Ho=wo.get(Qa),ta=Ho&&Ho.rect.current?{id:Ho.id,rect:Ho.rect.current,data:Ho.data,disabled:Ho.disabled}:null,Ui={active:qr,activatorEvent:wr,collisions:zi,delta:{x:Ji.x,y:Ji.y},over:ta};(0,x.unstable_batchedUpdates)(()=>{_1(ta),Do==null||Do(Ui),ir({type:"onDragOver",event:Ui})})},[Qa]),(0,g.LI)(()=>{ns.current={activatorEvent:oi,active:io,activeNode:ts,collisionRect:rs,collisions:js,droppableRects:Qs,draggableNodes:hi,draggingNode:Io,draggingNodeRect:ki,droppableContainers:Ni,over:vs,scrollableAncestors:Nr,scrollAdjustedTranslate:no},di.current={initial:ki,translated:rs}},[io,ts,js,rs,hi,Io,ki,Qs,Ni,vs,Nr,no]),tr(zr(sn({},C1),{delta:Mi,draggingRect:rs,pointerCoordinates:Wo,scrollableAncestors:Nr,scrollableAncestorRects:$s}));const t1=(0,L.useMemo)(()=>({active:io,activeNode:ts,activeNodeRect:yo,activatorEvent:oi,collisions:js,containerNodeRect:ks,dragOverlay:oo,draggableNodes:hi,droppableContainers:Ni,droppableRects:Qs,over:vs,measureDroppableContainers:ga,scrollableAncestors:Nr,scrollableAncestorRects:$s,measuringConfiguration:Fs,measuringScheduled:Da,windowRect:Cn}),[io,ts,yo,oi,js,ks,oo,hi,Ni,Qs,vs,ga,Nr,$s,Fs,Da,Cn]),Ws=(0,L.useMemo)(()=>({activatorEvent:oi,activators:Cs,active:io,activeNodeRect:yo,ariaDescribedById:{draggable:qa},dispatch:vr,draggableNodes:hi,over:vs,measureDroppableContainers:ga}),[oi,Cs,io,yo,vr,qa,hi,vs,ga]);return L.createElement(ce.Provider,{value:yr},L.createElement(Qn.Provider,{value:Ws},L.createElement(cn.Provider,{value:t1},L.createElement(fi.Provider,{value:_a},ie)),L.createElement(Er,{disabled:(be==null?void 0:be.restoreFocus)===!1})),L.createElement(rt,zr(sn({},be),{hiddenTextDescribedById:qa})));function Zs(){const qr=(Ds==null?void 0:Ds.autoScrollEnabled)===!1,wr=typeof I=="object"?I.enabled===!1:I===!1,zi=ii&&!qr&&!wr;return typeof I=="object"?zr(sn({},I),{enabled:zi}):{enabled:zi}}}),Or=(0,L.createContext)(null),Gr="button",Di="Droppable";function ro(U){let{id:Q,data:Pe,disabled:st=!1,attributes:Dt}=U;const Tt=(0,g.Ld)(Di),{activators:G,activatorEvent:be,active:I,activeNodeRect:ie,ariaDescribedById:We,draggableNodes:xt,over:Mn}=(0,L.useContext)(Qn),{role:In=Gr,roleDescription:Xn="draggable",tabIndex:yn=0}=Dt!=null?Dt:{},Yn=(I==null?void 0:I.id)===Q,vr=(0,L.useContext)(Yn?fi:Or),[ir,yr]=(0,g.wm)(),[ri,Wr]=(0,g.wm)(),ii=ut(G,Q),Xr=(0,g.Ey)(Pe);(0,g.LI)(()=>(xt.set(Q,{id:Q,key:Tt,node:ir,activatorNode:ri,data:Xr}),()=>{const Mi=xt.get(Q);Mi&&Mi.key===Tt&&xt.delete(Q)}),[xt,Q]);const hi=(0,L.useMemo)(()=>({role:In,tabIndex:yn,"aria-disabled":st,"aria-pressed":Yn&&In===Gr?!0:void 0,"aria-roledescription":Xn,"aria-describedby":We.draggable}),[st,In,yn,Yn,Xn,We.draggable]);return{active:I,activatorEvent:be,activeNodeRect:ie,attributes:hi,isDragging:Yn,listeners:st?void 0:ii,node:ir,over:Mn,setNodeRef:yr,setActivatorNodeRef:Wr,transform:vr}}function ci(){return(0,L.useContext)(cn)}const $o="Droppable",To={timeout:25};function mo(U){let{data:Q,disabled:Pe=!1,id:st,resizeObserverConfig:Dt}=U;const Tt=(0,g.Ld)($o),{active:G,dispatch:be,over:I,measureDroppableContainers:ie}=(0,L.useContext)(Qn),We=(0,L.useRef)({disabled:Pe}),xt=(0,L.useRef)(!1),Mn=(0,L.useRef)(null),In=(0,L.useRef)(null),{disabled:Xn,updateMeasurementsFor:yn,timeout:Yn}=sn(sn({},To),Dt),vr=(0,g.Ey)(yn!=null?yn:st),ir=(0,L.useCallback)(()=>{if(!xt.current){xt.current=!0;return}In.current!=null&&clearTimeout(In.current),In.current=setTimeout(()=>{ie(Array.isArray(vr.current)?vr.current:[vr.current]),In.current=null},Yn)},[Yn]),yr=S({callback:ir,disabled:Xn||!G}),ri=(0,L.useCallback)((hi,Mi)=>{yr&&(Mi&&(yr.unobserve(Mi),xt.current=!1),hi&&yr.observe(hi))},[yr]),[Wr,ii]=(0,g.wm)(ri),Xr=(0,g.Ey)(Q);return(0,L.useEffect)(()=>{!yr||!Wr.current||(yr.disconnect(),xt.current=!1,yr.observe(Wr.current))},[Wr,yr]),(0,g.LI)(()=>(be({type:lt.RegisterDroppable,element:{id:st,key:Tt,disabled:Pe,node:Wr,rect:Mn,data:Xr}}),()=>be({type:lt.UnregisterDroppable,key:Tt,id:st})),[st]),(0,L.useEffect)(()=>{Pe!==We.current.disabled&&(be({type:lt.SetDroppableDisabled,id:st,key:Tt,disabled:Pe}),We.current.disabled=Pe)},[st,Tt,Pe,be]),{active:G,rect:Mn,isOver:(I==null?void 0:I.id)===st,node:Wr,over:I,setNodeRef:ii}}function Us(U){let{animation:Q,children:Pe}=U;const[st,Dt]=(0,L.useState)(null),[Tt,G]=(0,L.useState)(null),be=(0,g.D9)(Pe);return!Pe&&!st&&be&&Dt(be),(0,g.LI)(()=>{if(!Tt)return;const I=st==null?void 0:st.key,ie=st==null?void 0:st.props.id;if(I==null||ie==null){Dt(null);return}Promise.resolve(Q(ie,Tt)).then(()=>{Dt(null)})},[Q,st,Tt]),L.createElement(L.Fragment,null,Pe,st?(0,L.cloneElement)(st,{ref:G}):null)}const ma={x:0,y:0,scaleX:1,scaleY:1};function Js(U){let{children:Q}=U;return L.createElement(Qn.Provider,{value:kn},L.createElement(fi.Provider,{value:ma},Q))}const Is={position:"fixed",touchAction:"none"},to=U=>(0,g.vd)(U)?"transform 250ms ease":void 0,Ao=(0,L.forwardRef)((U,Q)=>{let{as:Pe,activatorEvent:st,adjustScale:Dt,children:Tt,className:G,rect:be,style:I,transform:ie,transition:We=to}=U;if(!be)return null;const xt=Dt?ie:zr(sn({},ie),{scaleX:1,scaleY:1}),Mn=sn(zr(sn({},Is),{width:be.width,height:be.height,top:be.top,left:be.left,transform:g.ux.Transform.toString(xt),transformOrigin:Dt&&st?gt(st,be):void 0,transition:typeof We=="function"?We(st):We}),I);return L.createElement(Pe,{className:G,style:Mn,ref:Q},Tt)}),es=U=>Q=>{let{active:Pe,dragOverlay:st}=Q;const Dt={},{styles:Tt,className:G}=U;if(Tt!=null&&Tt.active)for(const[be,I]of Object.entries(Tt.active))I!==void 0&&(Dt[be]=Pe.node.style.getPropertyValue(be),Pe.node.style.setProperty(be,I));if(Tt!=null&&Tt.dragOverlay)for(const[be,I]of Object.entries(Tt.dragOverlay))I!==void 0&&st.node.style.setProperty(be,I);return G!=null&&G.active&&Pe.node.classList.add(G.active),G!=null&&G.dragOverlay&&st.node.classList.add(G.dragOverlay),function(){for(const[I,ie]of Object.entries(Dt))Pe.node.style.setProperty(I,ie);G!=null&&G.active&&Pe.node.classList.remove(G.active)}},us={duration:250,easing:"ease",keyframes:U=>{let{transform:{initial:Q,final:Pe}}=U;return[{transform:g.ux.Transform.toString(Q)},{transform:g.ux.Transform.toString(Pe)}]},sideEffects:es({styles:{active:{opacity:"0"}}})};function Po(U){let{config:Q,draggableNodes:Pe,droppableContainers:st,measuringConfiguration:Dt}=U;return(0,g.zX)((Tt,G)=>{if(Q===null)return;const be=Pe.get(Tt);if(!be)return;const I=be.node.current;if(!I)return;const ie=vt(G);if(!ie)return;const{transform:We}=(0,g.Jj)(G).getComputedStyle(G),xt=Oe(We);if(!xt)return;const Mn=typeof Q=="function"?Q:Sr(Q);return yt(I,Dt.draggable.measure),Mn({active:{id:Tt,data:be.data,node:I,rect:Dt.draggable.measure(I)},draggableNodes:Pe,dragOverlay:{node:G,rect:Dt.dragOverlay.measure(ie)},droppableContainers:st,measuringConfiguration:Dt,transform:xt})})}function Sr(U){const{duration:Q,easing:Pe,sideEffects:st,keyframes:Dt}=sn(sn({},us),U);return Tt=>{let ir=Tt,{active:G,dragOverlay:be,transform:I}=ir,ie=Lo(ir,["active","dragOverlay","transform"]);if(!Q)return;const We={x:be.rect.left-G.rect.left,y:be.rect.top-G.rect.top},xt={scaleX:I.scaleX!==1?G.rect.width*I.scaleX/be.rect.width:1,scaleY:I.scaleY!==1?G.rect.height*I.scaleY/be.rect.height:1},Mn=sn({x:I.x-We.x,y:I.y-We.y},xt),In=Dt(zr(sn({},ie),{active:G,dragOverlay:be,transform:{initial:I,final:Mn}})),[Xn]=In,yn=In[In.length-1];if(JSON.stringify(Xn)===JSON.stringify(yn))return;const Yn=st==null?void 0:st(sn({active:G,dragOverlay:be},ie)),vr=be.node.animate(In,{duration:Q,easing:Pe,fill:"forwards"});return new Promise(yr=>{vr.onfinish=()=>{Yn==null||Yn(),yr()}})}}let go=0;function jo(U){return(0,L.useMemo)(()=>{if(U!=null)return go++,go},[U])}const Hi=L.memo(U=>{let{adjustScale:Q=!1,children:Pe,dropAnimation:st,style:Dt,transition:Tt,modifiers:G,wrapperElement:be="div",className:I,zIndex:ie=999}=U;const{activatorEvent:We,active:xt,activeNodeRect:Mn,containerNodeRect:In,draggableNodes:Xn,droppableContainers:yn,dragOverlay:Yn,over:vr,measuringConfiguration:ir,scrollableAncestors:yr,scrollableAncestorRects:ri,windowRect:Wr}=ci(),ii=(0,L.useContext)(fi),Xr=jo(xt==null?void 0:xt.id),hi=Kr(G,{activatorEvent:We,active:xt,activeNodeRect:Mn,containerNodeRect:In,draggingNodeRect:Yn.rect,over:vr,overlayNodeRect:Yn.rect,scrollableAncestors:yr,scrollableAncestorRects:ri,transform:ii,windowRect:Wr}),Mi=m(Mn),Ni=Po({config:st,draggableNodes:Xn,droppableContainers:yn,measuringConfiguration:ir}),gi=Mi?Yn.setRef:void 0;return L.createElement(Js,null,L.createElement(Us,{animation:Ni},xt&&Xr?L.createElement(Ao,{key:Xr,id:xt.id,ref:gi,as:be,activatorEvent:We,adjustScale:Q,className:I,transition:Tt,rect:Mi,style:sn({zIndex:ie},Dt),transform:hi},Pe):null))})},59671:function(tn,qe,J){"use strict";J.d(qe,{Fo:function(){return Ye},Rp:function(){return C},is:function(){return _e},nB:function(){return Z},qw:function(){return Qt}});var L=J(50959),x=J(28257),g=J(84341);function C(Y,te,Oe){const ee=Y.slice();return ee.splice(Oe<0?ee.length+Oe:Oe,0,ee.splice(te,1)[0]),ee}function T(Y,te,Oe){const ee=Y.slice();return ee[te]=Y[Oe],ee[Oe]=Y[te],ee}function $(Y,te){return Y.reduce((Oe,ee,Ae)=>{const Te=te.get(ee);return Te&&(Oe[Ae]=Te),Oe},Array(Y.length))}function H(Y){return Y!==null&&Y>=0}function K(Y,te){if(Y===te)return!0;if(Y.length!==te.length)return!1;for(let Oe=0;Oe<Y.length;Oe++)if(Y[Oe]!==te[Oe])return!1;return!0}function ce(Y){return typeof Y=="boolean"?{draggable:Y,droppable:Y}:Y}const oe={scaleX:1,scaleY:1},xe=Y=>{var te;let{rects:Oe,activeNodeRect:ee,activeIndex:Ae,overIndex:Te,index:$e}=Y;const Je=(te=Oe[Ae])!=null?te:ee;if(!Je)return null;const it=Se(Oe,$e,Ae);if($e===Ae){const tt=Oe[Te];return tt?sn({x:Ae<Te?tt.left+tt.width-(Je.left+Je.width):tt.left-Je.left,y:0},oe):null}return $e>Ae&&$e<=Te?sn({x:-Je.width-it,y:0},oe):$e<Ae&&$e>=Te?sn({x:Je.width+it,y:0},oe):sn({x:0,y:0},oe)};function Se(Y,te,Oe){const ee=Y[te],Ae=Y[te-1],Te=Y[te+1];return!ee||!Ae&&!Te?0:Oe<te?Ae?ee.left-(Ae.left+Ae.width):Te.left-(ee.left+ee.width):Te?Te.left-(ee.left+ee.width):ee.left-(Ae.left+Ae.width)}const k=Y=>{let{rects:te,activeIndex:Oe,overIndex:ee,index:Ae}=Y;const Te=C(te,ee,Oe),$e=te[Ae],Je=Te[Ae];return!Je||!$e?null:{x:Je.left-$e.left,y:Je.top-$e.top,scaleX:Je.width/$e.width,scaleY:Je.height/$e.height}},rt=Y=>{let{activeIndex:te,index:Oe,rects:ee,overIndex:Ae}=Y,Te,$e;return Oe===te&&(Te=ee[Oe],$e=ee[Ae]),Oe===Ae&&(Te=ee[Oe],$e=ee[te]),!$e||!Te?null:{x:$e.left-Te.left,y:$e.top-Te.top,scaleX:$e.width/Te.width,scaleY:$e.height/Te.height}},lt={scaleX:1,scaleY:1},Qt=Y=>{var te;let{activeIndex:Oe,activeNodeRect:ee,index:Ae,rects:Te,overIndex:$e}=Y;const Je=(te=Te[Oe])!=null?te:ee;if(!Je)return null;if(Ae===Oe){const tt=Te[$e];return tt?sn({x:0,y:Oe<$e?tt.top+tt.height-(Je.top+Je.height):tt.top-Je.top},lt):null}const it=mt(Te,Ae,Oe);return Ae>Oe&&Ae<=$e?sn({x:0,y:-Je.height-it},lt):Ae<Oe&&Ae>=$e?sn({x:0,y:Je.height+it},lt):sn({x:0,y:0},lt)};function mt(Y,te,Oe){const ee=Y[te],Ae=Y[te-1],Te=Y[te+1];return ee?Oe<te?Ae?ee.top-(Ae.top+Ae.height):Te?Te.top-(ee.top+ee.height):0:Te?Te.top-(ee.top+ee.height):Ae?ee.top-(Ae.top+Ae.height):0:0}const Pt="Sortable",O=L.createContext({activeIndex:-1,containerId:Pt,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:k,disabled:{draggable:!1,droppable:!1}});function Ye(Y){let{children:te,id:Oe,items:ee,strategy:Ae=k,disabled:Te=!1}=Y;const{active:$e,dragOverlay:Je,droppableRects:it,over:tt,measureDroppableContainers:St}=(0,x.Cj)(),ot=(0,g.Ld)(Pt,Oe),Rt=Boolean(Je.rect!==null),Lt=(0,L.useMemo)(()=>ee.map(an=>typeof an=="object"&&"id"in an?an.id:an),[ee]),pt=$e!=null,Xe=$e?Lt.indexOf($e.id):-1,Be=tt?Lt.indexOf(tt.id):-1,Ct=(0,L.useRef)(Lt),Wt=!K(Lt,Ct.current),Xt=Be!==-1&&Xe===-1||Wt,Yt=ce(Te);(0,g.LI)(()=>{Wt&&pt&&St(Lt)},[Wt,Lt,pt,St]),(0,L.useEffect)(()=>{Ct.current=Lt},[Lt]);const wn=(0,L.useMemo)(()=>({activeIndex:Xe,containerId:ot,disabled:Yt,disableTransforms:Xt,items:Lt,overIndex:Be,useDragOverlay:Rt,sortedRects:$(Lt,it),strategy:Ae}),[Xe,ot,Yt.draggable,Yt.droppable,Xt,Lt,Be,it,Rt,Ae]);return L.createElement(O.Provider,{value:wn},te)}const gt=Y=>{let{id:te,items:Oe,activeIndex:ee,overIndex:Ae}=Y;return C(Oe,ee,Ae).indexOf(te)},Ot=Y=>{let{containerId:te,isSorting:Oe,wasDragging:ee,index:Ae,items:Te,newIndex:$e,previousItems:Je,previousContainerId:it,transition:tt}=Y;return!tt||!ee||Je!==Te&&Ae===$e?!1:Oe?!0:$e!==Ae&&te===it},Nt={duration:200,easing:"ease"},Ve="transform",ke=g.ux.Transition.toString({property:Ve,duration:0,easing:"linear"}),dt={roleDescription:"sortable"};function Et(Y){let{disabled:te,index:Oe,node:ee,rect:Ae}=Y;const[Te,$e]=(0,L.useState)(null),Je=(0,L.useRef)(Oe);return(0,g.LI)(()=>{if(!te&&Oe!==Je.current&&ee.current){const it=Ae.current;if(it){const tt=(0,x.VK)(ee.current,{ignoreTransform:!0}),St={x:it.left-tt.left,y:it.top-tt.top,scaleX:it.width/tt.width,scaleY:it.height/tt.height};(St.x||St.y)&&$e(St)}}Oe!==Je.current&&(Je.current=Oe)},[te,Oe,ee,Ae]),(0,L.useEffect)(()=>{Te&&$e(null)},[Te]),Te}function Z(Y){let{animateLayoutChanges:te=Ot,attributes:Oe,disabled:ee,data:Ae,getNewIndex:Te=gt,id:$e,strategy:Je,resizeObserverConfig:it,transition:tt=Nt}=Y;const{items:St,containerId:ot,activeIndex:Rt,disabled:Lt,disableTransforms:pt,sortedRects:Xe,overIndex:Be,useDragOverlay:Ct,strategy:Wt}=(0,L.useContext)(O),Xt=ye(ee,Lt),Yt=St.indexOf($e),wn=(0,L.useMemo)(()=>sn({sortable:{containerId:ot,index:Yt,items:St}},Ae),[ot,Ae,Yt,St]),an=(0,L.useMemo)(()=>St.slice(St.indexOf($e)),[St,$e]),{rect:un,node:Tn,isOver:yt,setNodeRef:pe}=(0,x.Zj)({id:$e,data:wn,disabled:Xt.droppable,resizeObserverConfig:sn({updateMeasurementsFor:an},it)}),{active:Ce,activatorEvent:Ne,activeNodeRect:Ze,attributes:et,setNodeRef:Ft,listeners:qt,isDragging:$n,over:dn,setActivatorNodeRef:Me,transform:Qe}=(0,x.O1)({id:$e,data:wn,attributes:sn(sn({},dt),Oe),disabled:Xt.draggable}),Ke=(0,g.HB)(pe,Ft),at=Boolean(Ce),Bt=at&&!pt&&H(Rt)&&H(Be),En=!Ct&&$n,ln=En&&Bt?Qe:null,zt=Je!=null?Je:Wt,me=Bt?ln!=null?ln:zt({rects:Xe,activeNodeRect:Ze,activeIndex:Rt,overIndex:Be,index:Yt}):null,Ie=H(Rt)&&H(Be)?Te({id:$e,items:St,activeIndex:Rt,overIndex:Be}):Yt,ct=Ce==null?void 0:Ce.id,It=(0,L.useRef)({activeId:ct,items:St,newIndex:Ie,containerId:ot}),en=St!==It.current.items,bn=te({active:Ce,containerId:ot,isDragging:$n,isSorting:at,id:$e,index:Yt,items:St,newIndex:It.current.newIndex,previousItems:It.current.items,previousContainerId:It.current.containerId,transition:tt,wasDragging:It.current.activeId!=null}),Vn=Et({disabled:!bn,index:Yt,node:Tn,rect:un});return(0,L.useEffect)(()=>{at&&It.current.newIndex!==Ie&&(It.current.newIndex=Ie),ot!==It.current.containerId&&(It.current.containerId=ot),St!==It.current.items&&(It.current.items=St)},[at,Ie,ot,St]),(0,L.useEffect)(()=>{if(ct===It.current.activeId)return;if(ct&&!It.current.activeId){It.current.activeId=ct;return}const lr=setTimeout(()=>{It.current.activeId=ct},50);return()=>clearTimeout(lr)},[ct]),{active:Ce,activeIndex:Rt,attributes:et,data:wn,rect:un,index:Yt,newIndex:Ie,items:St,isOver:yt,isSorting:at,isDragging:$n,listeners:qt,node:Tn,overIndex:Be,over:dn,setNodeRef:Ke,setActivatorNodeRef:Me,setDroppableNodeRef:pe,setDraggableNodeRef:Ft,transform:Vn!=null?Vn:me,transition:tr()};function tr(){if(Vn||en&&It.current.newIndex===Yt)return ke;if(!(En&&!(0,g.vd)(Ne)||!tt)&&(at||bn))return g.ux.Transition.toString(zr(sn({},tt),{property:Ve}))}}function ye(Y,te){var Oe,ee;return typeof Y=="boolean"?{draggable:Y,droppable:!1}:{draggable:(Oe=Y==null?void 0:Y.draggable)!=null?Oe:te.draggable,droppable:(ee=Y==null?void 0:Y.droppable)!=null?ee:te.droppable}}function ge(Y){if(!Y)return!1;const te=Y.data.current;return!!(te&&"sortable"in te&&typeof te.sortable=="object"&&"containerId"in te.sortable&&"items"in te.sortable&&"index"in te.sortable)}const ve=[x.g4.Down,x.g4.Right,x.g4.Up,x.g4.Left],_e=(Y,te)=>{let{context:{active:Oe,collisionRect:ee,droppableRects:Ae,droppableContainers:Te,over:$e,scrollableAncestors:Je}}=te;if(ve.includes(Y.code)){if(Y.preventDefault(),!Oe||!ee)return;const it=[];Te.getEnabled().forEach(ot=>{if(!ot||ot!=null&&ot.disabled)return;const Rt=Ae.get(ot.id);if(Rt)switch(Y.code){case x.g4.Down:ee.top<Rt.top&&it.push(ot);break;case x.g4.Up:ee.top>Rt.top&&it.push(ot);break;case x.g4.Left:ee.left>Rt.left&&it.push(ot);break;case x.g4.Right:ee.left<Rt.left&&it.push(ot);break}});const tt=(0,x.ey)({active:Oe,collisionRect:ee,droppableRects:Ae,droppableContainers:it,pointerCoordinates:null});let St=(0,x._8)(tt,"id");if(St===($e==null?void 0:$e.id)&&tt.length>1&&(St=tt[1].id),St!=null){const ot=Te.get(Oe.id),Rt=Te.get(St),Lt=Rt?Ae.get(Rt.id):null,pt=Rt==null?void 0:Rt.node.current;if(pt&&Lt&&ot&&Rt){const Be=(0,x.hI)(pt).some((an,un)=>Je[un]!==an),Ct=we(ot,Rt),Wt=de(ot,Rt),Xt=Be||!Ct?{x:0,y:0}:{x:Wt?ee.width-Lt.width:0,y:Wt?ee.height-Lt.height:0},Yt={x:Lt.left,y:Lt.top};return Xt.x&&Xt.y?Yt:(0,g.$X)(Yt,Xt)}}}};function we(Y,te){return!ge(Y)||!ge(te)?!1:Y.data.current.sortable.containerId===te.data.current.sortable.containerId}function de(Y,te){return!ge(Y)||!ge(te)||!we(Y,te)?!1:Y.data.current.sortable.index<te.data.current.sortable.index}},84341:function(tn,qe,J){"use strict";J.d(qe,{$X:function(){return Ot},D9:function(){return mt},DC:function(){return dt},Ey:function(){return rt},FJ:function(){return C},Gj:function(){return lt},HB:function(){return x},IH:function(){return gt},Jj:function(){return $},LI:function(){return xe},Ld:function(){return O},Nq:function(){return g},Re:function(){return K},UG:function(){return T},Yz:function(){return k},qk:function(){return H},r3:function(){return oe},so:function(){return ye},ux:function(){return Et},vZ:function(){return ce},vd:function(){return Ve},wm:function(){return Qt},zX:function(){return Se}});var L=J(50959);function x(){for(var ge=arguments.length,ve=new Array(ge),_e=0;_e<ge;_e++)ve[_e]=arguments[_e];return(0,L.useMemo)(()=>we=>{ve.forEach(de=>de(we))},ve)}const g=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";function C(ge){const ve=Object.prototype.toString.call(ge);return ve==="[object Window]"||ve==="[object global]"}function T(ge){return"nodeType"in ge}function $(ge){var ve,_e;return ge?C(ge)?ge:T(ge)&&(ve=(_e=ge.ownerDocument)==null?void 0:_e.defaultView)!=null?ve:window:window}function H(ge){const{Document:ve}=$(ge);return ge instanceof ve}function K(ge){return C(ge)?!1:ge instanceof $(ge).HTMLElement}function ce(ge){return ge instanceof $(ge).SVGElement}function oe(ge){return ge?C(ge)?ge.document:T(ge)?H(ge)?ge:K(ge)?ge.ownerDocument:document:document:document}const xe=g?L.useLayoutEffect:L.useEffect;function Se(ge){const ve=(0,L.useRef)(ge);return xe(()=>{ve.current=ge}),(0,L.useCallback)(function(){for(var _e=arguments.length,we=new Array(_e),de=0;de<_e;de++)we[de]=arguments[de];return ve.current==null?void 0:ve.current(...we)},[])}function k(){const ge=(0,L.useRef)(null),ve=(0,L.useCallback)((we,de)=>{ge.current=setInterval(we,de)},[]),_e=(0,L.useCallback)(()=>{ge.current!==null&&(clearInterval(ge.current),ge.current=null)},[]);return[ve,_e]}function rt(ge,ve){ve===void 0&&(ve=[ge]);const _e=(0,L.useRef)(ge);return xe(()=>{_e.current!==ge&&(_e.current=ge)},ve),_e}function lt(ge,ve){const _e=(0,L.useRef)();return(0,L.useMemo)(()=>{const we=ge(_e.current);return _e.current=we,we},[...ve])}function Qt(ge){const ve=Se(ge),_e=(0,L.useRef)(null),we=(0,L.useCallback)(de=>{de!==_e.current&&(ve==null||ve(de,_e.current)),_e.current=de},[]);return[_e,we]}function mt(ge){const ve=(0,L.useRef)();return(0,L.useEffect)(()=>{ve.current=ge},[ge]),ve.current}let Pt={};function O(ge,ve){return(0,L.useMemo)(()=>{if(ve)return ve;const _e=Pt[ge]==null?0:Pt[ge]+1;return Pt[ge]=_e,ge+"-"+_e},[ge,ve])}function Ye(ge){return function(ve){for(var _e=arguments.length,we=new Array(_e>1?_e-1:0),de=1;de<_e;de++)we[de-1]=arguments[de];return we.reduce((Y,te)=>{const Oe=Object.entries(te);for(const[ee,Ae]of Oe){const Te=Y[ee];Te!=null&&(Y[ee]=Te+ge*Ae)}return Y},sn({},ve))}}const gt=Ye(1),Ot=Ye(-1);function Nt(ge){return"clientX"in ge&&"clientY"in ge}function Ve(ge){if(!ge)return!1;const{KeyboardEvent:ve}=$(ge.target);return ve&&ge instanceof ve}function ke(ge){if(!ge)return!1;const{TouchEvent:ve}=$(ge.target);return ve&&ge instanceof ve}function dt(ge){if(ke(ge)){if(ge.touches&&ge.touches.length){const{clientX:ve,clientY:_e}=ge.touches[0];return{x:ve,y:_e}}else if(ge.changedTouches&&ge.changedTouches.length){const{clientX:ve,clientY:_e}=ge.changedTouches[0];return{x:ve,y:_e}}}return Nt(ge)?{x:ge.clientX,y:ge.clientY}:null}const Et=Object.freeze({Translate:{toString(ge){if(!ge)return;const{x:ve,y:_e}=ge;return"translate3d("+(ve?Math.round(ve):0)+"px, "+(_e?Math.round(_e):0)+"px, 0)"}},Scale:{toString(ge){if(!ge)return;const{scaleX:ve,scaleY:_e}=ge;return"scaleX("+ve+") scaleY("+_e+")"}},Transform:{toString(ge){if(ge)return[Et.Translate.toString(ge),Et.Scale.toString(ge)].join(" ")}},Transition:{toString(ge){let{property:ve,duration:_e,easing:we}=ge;return ve+" "+_e+"ms "+we}}}),Z="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function ye(ge){return ge.matches(Z)?ge:ge.querySelector(Z)}},76089:function(tn,qe,J){"use strict";J.d(qe,{W:function(){return yt}});var L=J(88338),x=J(46191),g=J(50959),C=J(10422),T=J(42669);const $=pe=>H([pe])[pe],H=pe=>useStoreContext().useStore(({data:Ze})=>pe.reduce((et,Ft)=>Ze[Ft]&&"value"in Ze[Ft]?Object.assign(et,{[Ft]:Ze[Ft].value}):et,{}),shallow),K={Row:L.R,Label:L.L,Portal:L.P,Overlay:L.O,String:L.a8,Number:L.a9,Boolean:L.aa,Select:L.ab,Vector:L.a,InnerLabel:L.ac};var ce=J(94440);function oe(pe,Ce,Ne){return Ce in pe?Object.defineProperty(pe,Ce,{value:Ne,enumerable:!0,configurable:!0,writable:!0}):pe[Ce]=Ne,pe}function xe(pe,Ce){var Ne=Object.keys(pe);if(Object.getOwnPropertySymbols){var Ze=Object.getOwnPropertySymbols(pe);Ce&&(Ze=Ze.filter(function(et){return Object.getOwnPropertyDescriptor(pe,et).enumerable})),Ne.push.apply(Ne,Ze)}return Ne}function Se(pe){for(var Ce=1;Ce<arguments.length;Ce++){var Ne=arguments[Ce]!=null?arguments[Ce]:{};Ce%2?xe(Object(Ne),!0).forEach(function(Ze){oe(pe,Ze,Ne[Ze])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Ne)):xe(Object(Ne)).forEach(function(Ze){Object.defineProperty(pe,Ze,Object.getOwnPropertyDescriptor(Ne,Ze))})}return pe}function k(){return k=Object.assign||function(pe){for(var Ce=1;Ce<arguments.length;Ce++){var Ne=arguments[Ce];for(var Ze in Ne)Object.prototype.hasOwnProperty.call(Ne,Ze)&&(pe[Ze]=Ne[Ze])}return pe},k.apply(this,arguments)}const rt=()=>(0,g.useCallback)((pe,Ce)=>Ce*pe,[]),lt=()=>(0,g.useCallback)((pe,Ce)=>pe/Ce,[]),Qt=4,mt=.001,Pt=1e-7,O=10,Ye=11,gt=1/(Ye-1),Ot=(pe,Ce)=>1-3*Ce+3*pe,Nt=(pe,Ce)=>3*Ce-6*pe,Ve=pe=>3*pe,ke=(pe,Ce,Ne)=>((Ot(Ce,Ne)*pe+Nt(Ce,Ne))*pe+Ve(Ce))*pe,dt=(pe,Ce,Ne)=>3*Ot(Ce,Ne)*pe*pe+2*Nt(Ce,Ne)*pe+Ve(Ce),Et=(pe,Ce,Ne,Ze,et)=>{let Ft,qt,$n=0;do qt=Ce+(Ne-Ce)/2,Ft=ke(qt,Ze,et)-pe,Ft>0?Ne=qt:Ce=qt;while(Math.abs(Ft)>Pt&&++$n<O);return qt},Z=(pe,Ce,Ne,Ze)=>{for(let et=0;et<Qt;++et){const Ft=dt(Ce,Ne,Ze);if(Ft===0)return Ce;const qt=ke(Ce,Ne,Ze)-pe;Ce-=qt/Ft}return Ce},ye=pe=>pe,ge=(pe,Ce,Ne,Ze)=>{if(!(0<=pe&&pe<=1&&0<=Ne&&Ne<=1))throw new Error("bezier x values must be in [0, 1] range");if(pe===Ce&&Ne===Ze)return ye;const et=new Float32Array(Ye);for(let qt=0;qt<Ye;++qt)et[qt]=ke(qt*gt,pe,Ne);const Ft=qt=>{let $n=0,dn=1,Me=Ye-1;for(;dn!==Me&&et[dn]<=qt;++dn)$n+=gt;--dn;const Qe=(qt-et[dn])/(et[dn+1]-et[dn]),Ke=$n+Qe*gt,at=dt(Ke,pe,Ne);return at>=mt?Z(qt,Ke,pe,Ne):at===0?Ke:Et(qt,$n,$n+gt,pe,Ne)};return qt=>qt===0||qt===1?qt:ke(Ft(qt),Ce,Ze)},ve=(0,L.s)("svg",{width:"100%",height:"$controlWidth",marginTop:"$rowGap",overflow:"visible",zIndex:100,"> path":{stroke:"$highlight3",strokeWidth:2},g:{color:"$accent1","&:hover":{color:"$accent3"},"&:active":{color:"$vivid1"}},circle:{fill:"currentColor",strokeWidth:10,stroke:"transparent",cursor:"pointer"},"> line":{stroke:"$highlight1",strokeWidth:2},"> g > line":{stroke:"currentColor"},variants:{withPreview:{true:{marginBottom:0},false:{marginBottom:"$rowGap"}}}}),_e=pe=>(0,L.ah)({"0%":{opacity:0},"10%":{opacity:.8},"100%":{opacity:pe}}),we=(0,L.ah)({"0%":{transform:"translateX(5%)"},"100%":{transform:"translateX(95%)"}}),de=(0,L.s)("svg",{width:"100%",overflow:"visible",height:6,"> circle":{fill:"$vivid1",cy:"50%",animation:`${_e(.3)} 1000ms both`,"&:first-of-type":{animationName:_e(.7)},"&:last-of-type":{animationName:we}}}),Y=(0,L.s)("div",{userSelect:"none",$flexCenter:"",height:14,width:14,borderRadius:7,marginRight:"$sm",cursor:"pointer",fontSize:"0.8em",variants:{graph:{true:{backgroundColor:"$elevation1"}}}}),te=(0,L.s)("div",{display:"grid",gridTemplateColumns:"auto 1fr",alignItems:"center"}),Oe=4;function ee({sx:pe,sy:Ce,cx:Ne,cy:Ze}){const et=Math.atan2(Ze-Ce,Ne-pe),Ft=Ne-Oe*Math.cos(et),qt=Ze-Oe*Math.sin(et);return g.createElement("line",{x1:Ft,y1:qt,x2:pe,y2:Ce})}function Ae({displayValue:pe,onUpdate:Ce,withPreview:Ne}){const Ze=rt(),et=lt(),[Ft,{width:qt,height:$n}]=(0,ce.Z)(),dn=(0,g.useRef)(null),Me=(0,g.useRef)(null),Qe=(0,g.useRef)(null),Ke=(0,g.useRef)(),at=(0,L.e)(({xy:[lr,Ar],event:ti,first:ai,memo:Pr})=>{ai&&(Ke.current=dn.current.getBoundingClientRect(),Pr=[Me.current,Qe.current].indexOf(ti.target),Pr<0&&(Pr=lr-Ke.current.left<qt/2?0:1),Pr*=2);const mi=lr-Ke.current.left,D=Ar-Ke.current.top;return Ce(j=>{const m=[...j];return m[Pr]=et(mi,qt),m[Pr+1]=1-et(D,$n),m}),Pr}),{x1:Bt,y1:En,x2:ln,y2:zt}=pe,{sx:me,sy:Ie,ex:ct,ey:It,cx1:en,cy1:bn,cx2:Vn,cy2:tr}=(0,g.useMemo)(()=>({sx:Ze(0,qt),sy:Ze(1,$n),ex:Ze(1,qt),ey:Ze(0,$n),cx1:Ze(Bt,qt),cy1:Ze(1-En,$n),cx2:Ze(ln,qt),cy2:Ze(1-zt,$n)}),[Ze,Bt,En,ln,zt,qt,$n]);return g.createElement(ve,k({ref:(0,L.af)([dn,Ft])},at(),{withPreview:Ne}),g.createElement("line",{x1:me,y1:Ie,x2:ct,y2:It}),g.createElement("path",{fill:"none",d:`M${me},${Ie} C${en},${bn} ${Vn},${tr} ${ct},${It}`,strokeLinecap:"round"}),g.createElement("g",null,g.createElement(ee,{sx:me,sy:Ie,cx:en,cy:bn}),g.createElement("circle",{ref:Me,cx:en,cy:bn,r:Oe})),g.createElement("g",null,g.createElement(ee,{sx:ct,sy:It,cx:Vn,cy:tr}),g.createElement("circle",{ref:Qe,cx:Vn,cy:tr,r:Oe})))}const Te=g.memo(({value:pe})=>{const[,Ce]=(0,g.useReducer)(Ze=>Ze+1,0),Ne=Array(21).fill(0).map((Ze,et)=>5+pe.evaluate(et/20)*90);return g.createElement(de,{onClick:Ce},Ne.map((Ze,et)=>g.createElement("circle",{key:et+Date.now(),r:3,cx:`${Ze}%`,style:{animationDelay:`${et*50}ms`}})),g.createElement("circle",{key:Date.now()-1,r:3,style:{animationTimingFunction:`cubic-bezier(${pe.join(",")})`,animationDuration:`${Ne.length*50}ms`}}))});function $e({value:pe}){const[Ce,Ne]=(0,g.useState)(pe),Ze=(0,g.useMemo)(()=>(0,L.U)(et=>Ne(et),250),[]);return(0,g.useEffect)(()=>void Ze(pe),[pe,Ze]),g.createElement(Te,{value:Ce})}function Je(pe,Ce){if(pe==null)return{};var Ne={},Ze=Object.keys(pe),et,Ft;for(Ft=0;Ft<Ze.length;Ft++)et=Ze[Ft],!(Ce.indexOf(et)>=0)&&(Ne[et]=pe[et]);return Ne}function it(pe,Ce){if(pe==null)return{};var Ne=Je(pe,Ce),Ze,et;if(Object.getOwnPropertySymbols){var Ft=Object.getOwnPropertySymbols(pe);for(et=0;et<Ft.length;et++)Ze=Ft[et],!(Ce.indexOf(Ze)>=0)&&Object.prototype.propertyIsEnumerable.call(pe,Ze)&&(Ne[Ze]=pe[Ze])}return Ne}const tt=["handles"],St={min:0,max:1,step:.01},ot={step:.01},Rt={graph:!0,preview:!0},Lt={ease:[.25,.1,.25,1],linear:[0,0,1,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1],"in-out-sine":[.45,.05,.55,.95],"in-out-quadratic":[.46,.03,.52,.96],"in-out-cubic":[.65,.05,.36,1],"fast-out-slow-in":[.4,0,.2,1],"in-out-back":[.68,-.55,.27,1.55]},pt=(pe=[.25,.1,.25,1])=>{let Ce=typeof pe=="object"&&"handles"in pe?pe:{handles:pe},{handles:Ne}=Ce,Ze=it(Ce,tt);Ne=typeof Ne=="string"?Lt[Ne]:Ne;const et={x1:St,y1:ot,x2:St,y2:ot},{value:Ft,settings:qt}=(0,L.am)(Ne,et,["x1","y1","x2","y2"]),$n=Ft;return $n.evaluate=ge(...Ft),$n.cssEasing=`cubic-bezier(${Ft.join(",")})`,{value:$n,settings:Se(Se(Se({},qt),Rt),Ze)}},Xe=(pe,Ce,Ne)=>{const Ze=(0,L.ak)(pe,Ce,Ne),et=Ze;return et.evaluate=ge(...Ze),et.cssEasing=`cubic-bezier(${Ze.join(",")})`,et},{Label:Be,Row:Ct,Vector:Wt,Select:Xt}=K,Yt=["custom",...Object.keys(Lt)],wn=[!1,...Object.values(Lt).map(pe=>pe.toString())],an={keys:Yt,values:wn};function un({value:pe,onUpdate:Ce}){const Ne=(0,g.useMemo)(()=>wn.find(qt=>qt===pe.toString())||!1,[pe]),Ze={type:"SELECT",value:Ne,settings:an},et=qt=>qt&&Ce(qt.split(",")),Ft=(0,L.A)(Se(Se({},Ze),{},{setValue:et}));return g.createElement(Xt,{value:Ne,displayValue:Ft.displayValue,onUpdate:Ft.onUpdate,settings:an})}function Tn(){const{label:pe,value:Ce,displayValue:Ne,settings:Ze,onUpdate:et,setSettings:Ft}=(0,L.u)(),{graph:qt,preview:$n}=Ze;return g.createElement(g.Fragment,null,g.createElement(Ct,{input:!0},g.createElement(Be,null,pe),g.createElement(te,null,g.createElement(Y,{graph:qt,onClick:()=>Ft({graph:!qt})},"\u{1D453}"),g.createElement(un,{value:Ce,onUpdate:et}))),qt&&g.createElement(Ae,{displayValue:Ne,onUpdate:et,withPreview:$n}),$n&&g.createElement(Ct,null,g.createElement($e,{value:Ce})),qt&&g.createElement(Ct,null,g.createElement(Wt,{value:Ne,settings:Ze,onUpdate:et,innerLabelTrim:2})))}const yt=(0,L.ag)({normalize:pt,sanitize:Xe,format:(pe,Ce)=>(0,L.al)(pe,Ce),component:Tn})},961:function(tn,qe,J){"use strict";J.d(qe,{AS7:function(){return of},EGi:function(){return wn},L52:function(){return Ko},Nn4:function(){return ef},QlJ:function(){return _l},RgI:function(){return V1},TOI:function(){return Ao},VZf:function(){return af},Wwj:function(){return st},dNJ:function(){return ma},dYt:function(){return nf},h6i:function(){return Ve},hNW:function(){return hc},rlr:function(){return Yl},tK:function(){return tt},vfO:function(){return dd},zkR:function(){return cf}});var L=J(50959);function x(ne,fe){if(ne==null)return{};var re={},le=Object.keys(ne),ue,gc;for(gc=0;gc<le.length;gc++)ue=le[gc],!(fe.indexOf(ue)>=0)&&(re[ue]=ne[ue]);return re}var g=null,C=null,T=null,$=null,H=null,K=null,ce=null,oe=null,xe=null,Se=null,k=null,rt=null,lt=null,Qt=null,mt=null,Pt=null,O=null,Ye=null,gt=null,Ot=null,Nt=["color"],Ve=(0,L.forwardRef)(function(ne,fe){var re=ne.color,le=re===void 0?"currentColor":re,ue=x(ne,Nt);return(0,L.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ue,{ref:fe}),(0,L.createElement)("path",{d:"M8.8914 2.1937C9.1158 2.35464 9.16725 2.66701 9.00631 2.89141L2.47388 12H13.5C13.7761 12 14 12.2239 14 12.5C14 12.7762 13.7761 13 13.5 13H1.5C1.31254 13 1.14082 12.8952 1.0552 12.7284C0.969578 12.5616 0.984438 12.361 1.09369 12.2086L8.19369 2.30862C8.35462 2.08422 8.667 2.03277 8.8914 2.1937ZM11.1 6.50001C11.1 6.22387 11.3238 6.00001 11.6 6.00001C11.8761 6.00001 12.1 6.22387 12.1 6.50001C12.1 6.77615 11.8761 7.00001 11.6 7.00001C11.3238 7.00001 11.1 6.77615 11.1 6.50001ZM10.4 4.00001C10.1239 4.00001 9.90003 4.22387 9.90003 4.50001C9.90003 4.77615 10.1239 5.00001 10.4 5.00001C10.6762 5.00001 10.9 4.77615 10.9 4.50001C10.9 4.22387 10.6762 4.00001 10.4 4.00001ZM12.1 8.50001C12.1 8.22387 12.3238 8.00001 12.6 8.00001C12.8761 8.00001 13.1 8.22387 13.1 8.50001C13.1 8.77615 12.8761 9.00001 12.6 9.00001C12.3238 9.00001 12.1 8.77615 12.1 8.50001ZM13.4 10C13.1239 10 12.9 10.2239 12.9 10.5C12.9 10.7761 13.1239 11 13.4 11C13.6762 11 13.9 10.7761 13.9 10.5C13.9 10.2239 13.6762 10 13.4 10Z",fill:le,fillRule:"evenodd",clipRule:"evenodd"}))}),ke=null,dt=null,Et=null,Z=null,ye=null,ge=null,ve=null,_e=null,we=null,de=null,Y=null,te=null,Oe=null,ee=null,Ae=null,Te=null,$e=null,Je=null,it=["color"],tt=(0,L.forwardRef)(function(ne,fe){var re=ne.color,le=re===void 0?"currentColor":re,ue=x(ne,it);return(0,L.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ue,{ref:fe}),(0,L.createElement)("path",{d:"M2.5 2H12.5C12.7761 2 13 2.22386 13 2.5V12.5C13 12.7761 12.7761 13 12.5 13H2.5C2.22386 13 2 12.7761 2 12.5V2.5C2 2.22386 2.22386 2 2.5 2ZM1 2.5C1 1.67157 1.67157 1 2.5 1H12.5C13.3284 1 14 1.67157 14 2.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V2.5ZM7.5 4C7.77614 4 8 3.77614 8 3.5C8 3.22386 7.77614 3 7.5 3C7.22386 3 7 3.22386 7 3.5C7 3.77614 7.22386 4 7.5 4ZM8 5.5C8 5.77614 7.77614 6 7.5 6C7.22386 6 7 5.77614 7 5.5C7 5.22386 7.22386 5 7.5 5C7.77614 5 8 5.22386 8 5.5ZM7.5 8C7.77614 8 8 7.77614 8 7.5C8 7.22386 7.77614 7 7.5 7C7.22386 7 7 7.22386 7 7.5C7 7.77614 7.22386 8 7.5 8ZM10 7.5C10 7.77614 9.77614 8 9.5 8C9.22386 8 9 7.77614 9 7.5C9 7.22386 9.22386 7 9.5 7C9.77614 7 10 7.22386 10 7.5ZM11.5 8C11.7761 8 12 7.77614 12 7.5C12 7.22386 11.7761 7 11.5 7C11.2239 7 11 7.22386 11 7.5C11 7.77614 11.2239 8 11.5 8Z",fill:le,fillRule:"evenodd",clipRule:"evenodd"}))}),St=null,ot=null,Rt=null,Lt=null,pt=null,Xe=null,Be=null,Ct=null,Wt=null,Xt=null,Yt=["color"],wn=(0,L.forwardRef)(function(ne,fe){var re=ne.color,le=re===void 0?"currentColor":re,ue=x(ne,Yt);return(0,L.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ue,{ref:fe}),(0,L.createElement)("path",{d:"M3 9C3 6.5 4.5 4.25 7.5 1.5C10.5 4.25 12 6.5 12 9C12 11.4853 9.98528 13.5 7.5 13.5C5.01472 13.5 3 11.4853 3 9ZM10.9524 8.30307C9.67347 7.82121 8.2879 8.46208 6.98956 9.06259C5.9327 9.55142 4.93365 10.0135 4.09695 9.82153C4.03357 9.55804 4 9.28294 4 9C4 7.11203 5.02686 5.27195 7.5 2.87357C9.66837 4.97639 10.725 6.65004 10.9524 8.30307Z",fill:le,fillRule:"evenodd",clipRule:"evenodd"}))}),an=null,un=null,Tn=null,yt=null,pe=null,Ce=null,Ne=null,Ze=null,et=null,Ft=null,qt=null,$n=null,dn=null,Me=null,Qe=null,Ke=null,at=null,Bt=null,En=null,ln=null,zt=null,me=null,Ie=null,ct=null,It=null,en=null,bn=null,Vn=null,tr=null,lr=null,Ar=null,ti=null,ai=null,Pr=null,mi=null,D=null,j=null,m=null,v=null,w=null,S=null,z=null,ae=null,F=null,X=null,P=null,W=null,Fe=null,Ge=null,ut=null,kt=null,Ht=null,ht=null,vt=null,ft=null,Gt=null,An=null,Rn=null,Gn=null,Pn=null,kn=null,Qn=null,cn=null,Zn=null,cr=null,Er=null,Kr=null,bi=null,li=null,fi=null,Ci=null,Ii=null,Or=null,Gr=null,Di=null,ro=null,ci=null,$o=null,To=null,mo=null,Us=["color"],ma=(0,L.forwardRef)(function(ne,fe){var re=ne.color,le=re===void 0?"currentColor":re,ue=x(ne,Us);return(0,L.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ue,{ref:fe}),(0,L.createElement)("path",{d:"M9.96424 2.68571C10.0668 2.42931 9.94209 2.13833 9.6857 2.03577C9.4293 1.93322 9.13832 2.05792 9.03576 2.31432L5.03576 12.3143C4.9332 12.5707 5.05791 12.8617 5.3143 12.9642C5.5707 13.0668 5.86168 12.9421 5.96424 12.6857L9.96424 2.68571ZM3.85355 5.14646C4.04882 5.34172 4.04882 5.6583 3.85355 5.85356L2.20711 7.50001L3.85355 9.14646C4.04882 9.34172 4.04882 9.6583 3.85355 9.85356C3.65829 10.0488 3.34171 10.0488 3.14645 9.85356L1.14645 7.85356C0.951184 7.6583 0.951184 7.34172 1.14645 7.14646L3.14645 5.14646C3.34171 4.9512 3.65829 4.9512 3.85355 5.14646ZM11.1464 5.14646C11.3417 4.9512 11.6583 4.9512 11.8536 5.14646L13.8536 7.14646C14.0488 7.34172 14.0488 7.6583 13.8536 7.85356L11.8536 9.85356C11.6583 10.0488 11.3417 10.0488 11.1464 9.85356C10.9512 9.6583 10.9512 9.34172 11.1464 9.14646L12.7929 7.50001L11.1464 5.85356C10.9512 5.6583 10.9512 5.34172 11.1464 5.14646Z",fill:le,fillRule:"evenodd",clipRule:"evenodd"}))}),Js=null,Is=null,to=["color"],Ao=(0,L.forwardRef)(function(ne,fe){var re=ne.color,le=re===void 0?"currentColor":re,ue=x(ne,to);return(0,L.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ue,{ref:fe}),(0,L.createElement)("path",{d:"M0.877075 7.49985C0.877075 3.84216 3.84222 0.877014 7.49991 0.877014C11.1576 0.877014 14.1227 3.84216 14.1227 7.49985C14.1227 11.1575 11.1576 14.1227 7.49991 14.1227C3.84222 14.1227 0.877075 11.1575 0.877075 7.49985ZM3.78135 3.21565C4.68298 2.43239 5.83429 1.92904 7.09998 1.84089V6.53429L3.78135 3.21565ZM3.21567 3.78134C2.43242 4.68298 1.92909 5.83428 1.84095 7.09997H6.5343L3.21567 3.78134ZM6.5343 7.89997H1.84097C1.92916 9.16562 2.43253 10.3169 3.21579 11.2185L6.5343 7.89997ZM3.78149 11.7842C4.6831 12.5673 5.83435 13.0707 7.09998 13.1588V8.46566L3.78149 11.7842ZM7.89998 8.46566V13.1588C9.16559 13.0706 10.3168 12.5673 11.2184 11.7841L7.89998 8.46566ZM11.7841 11.2184C12.5673 10.3168 13.0707 9.16558 13.1588 7.89997H8.46567L11.7841 11.2184ZM8.46567 7.09997H13.1589C13.0707 5.83432 12.5674 4.68305 11.7842 3.78143L8.46567 7.09997ZM11.2185 3.21573C10.3169 2.43246 9.16565 1.92909 7.89998 1.8409V6.53429L11.2185 3.21573Z",fill:le,fillRule:"evenodd",clipRule:"evenodd"}))}),es=null,Br=null,us=null,Po=null,Sr=null,go=null,jo=null,Hi=null,U=null,Q=null,Pe=["color"],st=(0,L.forwardRef)(function(ne,fe){var re=ne.color,le=re===void 0?"currentColor":re,ue=x(ne,Pe);return(0,L.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ue,{ref:fe}),(0,L.createElement)("path",{d:"M7.85367 1.48956C7.65841 1.29429 7.34182 1.29429 7.14656 1.48956L1.48971 7.14641C1.29445 7.34167 1.29445 7.65825 1.48971 7.85352L7.14656 13.5104C7.34182 13.7056 7.65841 13.7056 7.85367 13.5104L13.5105 7.85352C13.7058 7.65825 13.7058 7.34167 13.5105 7.14641L7.85367 1.48956ZM7.5 2.55033L2.55037 7.49996L7.5 12.4496V2.55033Z",fill:le,fillRule:"evenodd",clipRule:"evenodd"}))}),Dt=null,Tt=null,G=null,be=null,I=null,ie=null,We=null,xt=null,Mn=null,In=null,Xn=null,yn=null,Yn=null,vr=null,ir=null,yr=null,ri=null,Wr=null,ii=null,Xr=null,hi=null,Mi=null,Ni=null,gi=null,di=null,io=null,qi=null,Ds=null,Oo=null,oi=null,fs=null,Vs=null,qa=null,Hs=null,Fs=null,Qs=null,ga=null,Da=null,ts=null,v1=null,C1=null,Ja=null,yo=null,ks=null,ns=null,va=null,oo=null,Io=null,ki=null,Tr=null,gs=null,Cn=null,Nr=null,$s=null,ea=null,Wo=null,so=null,Ai=null,Ca=null,no=null,rs=null,js=null,Qa=null,vs=null,_1=null,Ha=null,_a=null,e1=null,xo=null,Cs=null,t1=null,Ws=null,Zs=null,y1=null,qr=null,wr=null,zi=null,wo=null,Ji=null,Do=null,Ho=null,ta=null,Ui=null,Ee=null,_s=null,na=null,No=null,Yo=null,$i=null,zo=null,Ri=null,ao=null,Qi=null,Ns=null,ys=null,zs=null,x1=null,vo=null,n1=null,ra=null,w1=null,ia=null,is=null,oa=null,ds=null,xs=null,G1=null,b1=null,sa=null,X1=null,M1=null,Y1=null,Na=null,Ur=null,ya=["color"],Ko=(0,L.forwardRef)(function(ne,fe){var re=ne.color,le=re===void 0?"currentColor":re,ue=x(ne,ya);return(0,L.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ue,{ref:fe}),(0,L.createElement)("path",{d:"M13.3536 2.35355C13.5488 2.15829 13.5488 1.84171 13.3536 1.64645C13.1583 1.45118 12.8417 1.45118 12.6464 1.64645L10.6828 3.61012C9.70652 3.21671 8.63759 3 7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C0.902945 9.08812 2.02314 10.1861 3.36061 10.9323L1.64645 12.6464C1.45118 12.8417 1.45118 13.1583 1.64645 13.3536C1.84171 13.5488 2.15829 13.5488 2.35355 13.3536L4.31723 11.3899C5.29348 11.7833 6.36241 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C14.0971 5.9119 12.9769 4.81391 11.6394 4.06771L13.3536 2.35355ZM9.90428 4.38861C9.15332 4.1361 8.34759 4 7.5 4C4.80285 4 2.52952 5.37816 1.09622 7.50001C1.87284 8.6497 2.89609 9.58106 4.09974 10.1931L9.90428 4.38861ZM5.09572 10.6114L10.9003 4.80685C12.1039 5.41894 13.1272 6.35031 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11C6.65241 11 5.84668 10.8639 5.09572 10.6114Z",fill:le,fillRule:"evenodd",clipRule:"evenodd"}))}),K1=null,kl=null,ws=null,E1=null,os=null,$l=null,jl=null,za=null,S1=null,Pc=null,Oc=null,Ba=null,aa=null,q1=null,r1=null,Ic=null,Dc=null,Wl=null,R1=null,Hc=null,Vu=null,Nc=null,_i=null,hs=null,la=null,J1=null,Gs=null,Ua=null,Va=null,Zl=null,bs=null,Q1=null,Fa=null,xa=null,Bo=null,el=null,Uo=null,i1=null,ji=null,tl=null,Gl=null,qn=null,Pi=null,ca=null,Xs=null,zc=null,qo=null,o1=null,Xl=null,lo=null,s1=null,Vi=null,Bc=null,nl=null,rl=null,Uc=null,a1=["color"],Yl=(0,L.forwardRef)(function(ne,fe){var re=ne.color,le=re===void 0?"currentColor":re,ue=x(ne,a1);return(0,L.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ue,{ref:fe}),(0,L.createElement)("path",{d:"M12.3536 13.3536C12.1583 13.5488 11.8417 13.5488 11.6465 13.3536L6.39645 8.10355C6.36478 8.07188 6.33824 8.03702 6.31685 8H5.00002C4.78719 8 4.59769 7.86528 4.52777 7.66426L2.12777 0.764277C2.05268 0.548387 2.13355 0.309061 2.3242 0.182972C2.51486 0.0568819 2.76674 0.0761337 2.93602 0.229734L8.336 5.12972C8.44044 5.22449 8.50001 5.35897 8.50001 5.5V5.81684C8.53702 5.83824 8.57189 5.86478 8.60356 5.89645L13.8536 11.1464C14.0488 11.3417 14.0488 11.6583 13.8536 11.8536L12.3536 13.3536ZM8.25 6.95711L7.45711 7.75L12 12.2929L12.7929 11.5L8.25 6.95711ZM3.71669 2.28845L5.35549 7H6.2929L7.50001 5.79289V5.72146L3.71669 2.28845Z",fill:le,fillRule:"evenodd",clipRule:"evenodd"}))}),il=null,ol=null,dr=null,Kl=null,Vc=null,uo=null,ql=null,l1=null,Zo=null,Bs=null,bo=null,xn=null,L1=null,Ms=null,T1=null,Fc=null,Es=null,Ys=null,wa=null,sl=null,A1=null,P1=null,O1=null,I1=null,Jl=null,al=null,ll=null,D1=null,c1=null,fo=null,Fu=null,cl=null,ua=null,ka=null,Go=null,kc=null,H1=null,N1=null,ul=null,fl=null,ps=null,ba=null,Co=null,Ma=null,Ea=null,Ql=null,$a=null,$c=null,u1=null,ec=null,co=null,Vr=null,Wi=null,eo=null,ho=null,ss=null,f1=null,Xi=null,z1=null,d1=null,dl=null,tc=null,B1=null,as=null,nc=null,rc=null,h1=null,hl=null,ic=null,Sa=null,pl=null,Ra=null,ml=null,U1=null,oc=null,gl=null,vl=null,Jo=null,La=null,Ss=null,Cl=null,ls=null,jc=null,sc=null,ac=null,ku=null,Ta=null,Wc=null,Zc=null,lc=null,ja=null,Gc=null,cc=["color"],_l=(0,L.forwardRef)(function(ne,fe){var re=ne.color,le=re===void 0?"currentColor":re,ue=x(ne,cc);return(0,L.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ue,{ref:fe}),(0,L.createElement)("path",{d:"M7.5 1.5C4.5 4.25 3 6.5 3 9C3 11.4853 5.01472 13.5 7.5 13.5C9.98528 13.5 12 11.4853 12 9C12 6.5 10.5 4.25 7.5 1.5ZM11 9C11 7.11203 9.97315 5.27195 7.5 2.87357C5.02686 5.27195 4 7.11203 4 9C4 10.933 5.567 12.5 7.5 12.5C9.433 12.5 11 10.933 11 9Z",fill:le,fillRule:"evenodd",clipRule:"evenodd"}))}),yl=null,$u=null,ju=null,Xc=null,Yc=null,Wa=null,Wu=null,Za=null,Kc=null,cs=null,Zu=null,qc=null,Gu=null,Xu=null,Jc=null,Qc=null,Yu=null,Rs=null,uc=null,Ku=null,fa=["color"],V1=(0,L.forwardRef)(function(ne,fe){var re=ne.color,le=re===void 0?"currentColor":re,ue=x(ne,fa);return(0,L.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ue,{ref:fe}),(0,L.createElement)("path",{d:"M13.5 13.95C13.7485 13.95 13.95 13.7485 13.95 13.5C13.95 13.2514 13.7485 13.05 13.5 13.05L1.49995 13.05C1.25142 13.05 1.04995 13.2514 1.04995 13.5C1.04995 13.7485 1.25142 13.95 1.49995 13.95L13.5 13.95ZM11.0681 7.5683C11.2439 7.39257 11.2439 7.10764 11.0681 6.93191C10.8924 6.75617 10.6075 6.75617 10.4317 6.93191L7.94993 9.41371L7.94993 1.49998C7.94993 1.25146 7.74846 1.04998 7.49993 1.04998C7.2514 1.04998 7.04993 1.25146 7.04993 1.49998L7.04993 9.41371L4.56813 6.93191C4.39239 6.75617 4.10746 6.75617 3.93173 6.93191C3.75599 7.10764 3.75599 7.39257 3.93173 7.5683L7.18173 10.8183C7.35746 10.994 7.64239 10.994 7.81812 10.8183L11.0681 7.5683Z",fill:le,fillRule:"evenodd",clipRule:"evenodd"}))}),Ga=null,xl=null,fc=null,dc=null,eu=["color"],hc=(0,L.forwardRef)(function(ne,fe){var re=ne.color,le=re===void 0?"currentColor":re,ue=x(ne,eu);return(0,L.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ue,{ref:fe}),(0,L.createElement)("path",{d:"M1.50005 1.05005C1.25152 1.05005 1.05005 1.25152 1.05005 1.50005C1.05005 1.74858 1.25152 1.95005 1.50005 1.95005L13.5 1.95005C13.7486 1.95005 13.95 1.74858 13.95 1.50005C13.95 1.25152 13.7486 1.05005 13.5 1.05005H1.50005ZM3.93188 7.43169C3.75614 7.60743 3.75614 7.89236 3.93188 8.06809C4.10761 8.24383 4.39254 8.24383 4.56827 8.06809L7.05007 5.58629V13.5C7.05007 13.7485 7.25155 13.95 7.50007 13.95C7.7486 13.95 7.95007 13.7485 7.95007 13.5L7.95007 5.58629L10.4319 8.06809C10.6076 8.24383 10.8925 8.24383 11.0683 8.06809C11.244 7.89235 11.244 7.60743 11.0683 7.43169L7.81827 4.18169C7.64254 4.00596 7.35761 4.00596 7.18188 4.18169L3.93188 7.43169Z",fill:le,fillRule:"evenodd",clipRule:"evenodd"}))}),tu=null,nu=null,ru=null,pc=null,qu=null,Ju=null,i=null,a=null,u=null,h=null,E=null,N=null,ze=null,wt=null,rn=null,jn=null,ur=null,Jr=null,Rr=null,Fi=null,_r=null,Xo=null,Ls=null,$t=null,At=null,Kt=null,nr=null,Cr=null,si=null,Qr=null,Ei=null,Mo=null,Si=null,Aa=null,Qu=null,ad=null,ld=null,cd=null,ud=null,mh=null,gh=null,vh=null,fd=["color"],dd=(0,L.forwardRef)(function(ne,fe){var re=ne.color,le=re===void 0?"currentColor":re,ue=x(ne,fd);return(0,L.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ue,{ref:fe}),(0,L.createElement)("path",{opacity:".05",d:"M6.78296 13.376C8.73904 9.95284 8.73904 5.04719 6.78296 1.62405L7.21708 1.37598C9.261 4.95283 9.261 10.0472 7.21708 13.624L6.78296 13.376Z",fill:le,fillRule:"evenodd",clipRule:"evenodd"}),(0,L.createElement)("path",{opacity:".1",d:"M7.28204 13.4775C9.23929 9.99523 9.23929 5.00475 7.28204 1.52248L7.71791 1.2775C9.76067 4.9119 9.76067 10.0881 7.71791 13.7225L7.28204 13.4775Z",fill:le,fillRule:"evenodd",clipRule:"evenodd"}),(0,L.createElement)("path",{opacity:".15",d:"M7.82098 13.5064C9.72502 9.99523 9.72636 5.01411 7.82492 1.50084L8.26465 1.26285C10.2465 4.92466 10.2451 10.085 8.26052 13.7448L7.82098 13.5064Z",fill:le,fillRule:"evenodd",clipRule:"evenodd"}),(0,L.createElement)("path",{opacity:".2",d:"M8.41284 13.429C10.1952 9.92842 10.1957 5.07537 8.41435 1.57402L8.85999 1.34729C10.7139 4.99113 10.7133 10.0128 8.85841 13.6559L8.41284 13.429Z",fill:le,fillRule:"evenodd",clipRule:"evenodd"}),(0,L.createElement)("path",{opacity:".25",d:"M9.02441 13.2956C10.6567 9.8379 10.6586 5.17715 9.03005 1.71656L9.48245 1.50366C11.1745 5.09919 11.1726 9.91629 9.47657 13.5091L9.02441 13.2956Z",fill:le,fillRule:"evenodd",clipRule:"evenodd"}),(0,L.createElement)("path",{opacity:".3",d:"M9.66809 13.0655C11.1097 9.69572 11.1107 5.3121 9.67088 1.94095L10.1307 1.74457C11.6241 5.24121 11.6231 9.76683 10.1278 13.2622L9.66809 13.0655Z",fill:le,fillRule:"evenodd",clipRule:"evenodd"}),(0,L.createElement)("path",{opacity:".35",d:"M10.331 12.7456C11.5551 9.52073 11.5564 5.49103 10.3347 2.26444L10.8024 2.0874C12.0672 5.42815 12.0659 9.58394 10.7985 12.9231L10.331 12.7456Z",fill:le,fillRule:"evenodd",clipRule:"evenodd"}),(0,L.createElement)("path",{opacity:".4",d:"M11.0155 12.2986C11.9938 9.29744 11.9948 5.71296 11.0184 2.71067L11.4939 2.55603C12.503 5.6589 12.502 9.35178 11.4909 12.4535L11.0155 12.2986Z",fill:le,fillRule:"evenodd",clipRule:"evenodd"}),(0,L.createElement)("path",{opacity:".45",d:"M11.7214 11.668C12.4254 9.01303 12.4262 5.99691 11.7237 3.34116L12.2071 3.21329C12.9318 5.95292 12.931 9.05728 12.2047 11.7961L11.7214 11.668Z",fill:le,fillRule:"evenodd",clipRule:"evenodd"}),(0,L.createElement)("path",{opacity:".5",d:"M12.4432 10.752C12.8524 8.63762 12.8523 6.36089 12.4429 4.2466L12.9338 4.15155C13.3553 6.32861 13.3554 8.66985 12.9341 10.847L12.4432 10.752Z",fill:le,fillRule:"evenodd",clipRule:"evenodd"}),(0,L.createElement)("path",{d:"M0.877075 7.49988C0.877075 3.84219 3.84222 0.877045 7.49991 0.877045C11.1576 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1576 14.1227 7.49991 14.1227C3.84222 14.1227 0.877075 11.1575 0.877075 7.49988ZM7.49991 1.82704C4.36689 1.82704 1.82708 4.36686 1.82708 7.49988C1.82708 10.6329 4.36689 13.1727 7.49991 13.1727C10.6329 13.1727 13.1727 10.6329 13.1727 7.49988C13.1727 4.36686 10.6329 1.82704 7.49991 1.82704Z",fill:le,fillRule:"evenodd",clipRule:"evenodd"}))}),Ch=null,_h=null,yh=null,xh=null,wh=null,bh=null,Mh=null,Eh=null,Sh=null,Rh=null,Lh=null,Th=null,Ah=null,Ph=null,Oh=null,Ih=null,Dh=null,Hh=null,Nh=null,zh=null,Bh=null,Uh=null,Vh=null,Fh=null,kh=null,$h=null,jh=null,Wh=null,Zh=null,ui=null,Jn=null,da=null,iu=null,hd=null,pd=null,md=null,gd=null,vd=null,Cd=null,ou=null,wl=null,B0=null,F1=null,e0=null,U0=null,t0=null,k1=null,bl=null,V0=null,n0=null,_d=null,F0=null,su=null,yd=null,k0=null,$0=null,r0=null,xd=null,wd=null,bd=null,Md=null,Ed=null,Sd=null,Rd=null,Ld=null,Td=null,j0=null,W0=null,Z0=null,G0=null,X0=null,Y0=null,K0=null,q0=null,J0=null,Ml=null,Vo=null,Fo=null,au=null,Ad=null,Pd=null,Od=null,Id=null,Dd=null,Hd=null,Nd=null,zd=null,Bd=null,Ud=null,Vd=null,Fd=null,kd=null,$d=null,jd=null,Q0=["color"],ef=(0,L.forwardRef)(function(ne,fe){var re=ne.color,le=re===void 0?"currentColor":re,ue=x(ne,Q0);return(0,L.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ue,{ref:fe}),(0,L.createElement)("path",{d:"M4.5 2C3.11929 2 2 3.11929 2 4.5C2 5.88072 3.11929 7 4.5 7C5.88072 7 7 5.88072 7 4.5C7 3.11929 5.88072 2 4.5 2ZM3 4.5C3 3.67157 3.67157 3 4.5 3C5.32843 3 6 3.67157 6 4.5C6 5.32843 5.32843 6 4.5 6C3.67157 6 3 5.32843 3 4.5ZM10.5 2C9.11929 2 8 3.11929 8 4.5C8 5.88072 9.11929 7 10.5 7C11.8807 7 13 5.88072 13 4.5C13 3.11929 11.8807 2 10.5 2ZM9 4.5C9 3.67157 9.67157 3 10.5 3C11.3284 3 12 3.67157 12 4.5C12 5.32843 11.3284 6 10.5 6C9.67157 6 9 5.32843 9 4.5ZM2 10.5C2 9.11929 3.11929 8 4.5 8C5.88072 8 7 9.11929 7 10.5C7 11.8807 5.88072 13 4.5 13C3.11929 13 2 11.8807 2 10.5ZM4.5 9C3.67157 9 3 9.67157 3 10.5C3 11.3284 3.67157 12 4.5 12C5.32843 12 6 11.3284 6 10.5C6 9.67157 5.32843 9 4.5 9ZM10.5 8C9.11929 8 8 9.11929 8 10.5C8 11.8807 9.11929 13 10.5 13C11.8807 13 13 11.8807 13 10.5C13 9.11929 11.8807 8 10.5 8ZM9 10.5C9 9.67157 9.67157 9 10.5 9C11.3284 9 12 9.67157 12 10.5C12 11.3284 11.3284 12 10.5 12C9.67157 12 9 11.3284 9 10.5Z",fill:le,fillRule:"evenodd",clipRule:"evenodd"}))}),Wd=null,Zd=null,Gd=null,Xd=null,tf=["color"],nf=(0,L.forwardRef)(function(ne,fe){var re=ne.color,le=re===void 0?"currentColor":re,ue=x(ne,tf);return(0,L.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ue,{ref:fe}),(0,L.createElement)("path",{d:"M0.849976 1.74998C0.849976 1.25292 1.25292 0.849976 1.74998 0.849976H3.24998C3.74703 0.849976 4.14998 1.25292 4.14998 1.74998V2.04998H10.85V1.74998C10.85 1.25292 11.2529 0.849976 11.75 0.849976H13.25C13.747 0.849976 14.15 1.25292 14.15 1.74998V3.24998C14.15 3.74703 13.747 4.14998 13.25 4.14998H12.95V10.85H13.25C13.747 10.85 14.15 11.2529 14.15 11.75V13.25C14.15 13.747 13.747 14.15 13.25 14.15H11.75C11.2529 14.15 10.85 13.747 10.85 13.25V12.95H4.14998V13.25C4.14998 13.747 3.74703 14.15 3.24998 14.15H1.74998C1.25292 14.15 0.849976 13.747 0.849976 13.25V11.75C0.849976 11.2529 1.25292 10.85 1.74998 10.85H2.04998V4.14998H1.74998C1.25292 4.14998 0.849976 3.74703 0.849976 3.24998V1.74998ZM2.94998 4.14998V10.85H3.24998C3.74703 10.85 4.14998 11.2529 4.14998 11.75V12.05H10.85V11.75C10.85 11.2529 11.2529 10.85 11.75 10.85H12.05V4.14998H11.75C11.2529 4.14998 10.85 3.74703 10.85 3.24998V2.94998H4.14998V3.24998C4.14998 3.74703 3.74703 4.14998 3.24998 4.14998H2.94998ZM2.34998 1.74998H1.74998V2.34998V2.64998V3.24998H2.34998H2.64998H3.24998V2.64998V2.34998V1.74998H2.64998H2.34998ZM5.09998 5.99998C5.09998 5.50292 5.50292 5.09998 5.99998 5.09998H6.99998C7.49703 5.09998 7.89998 5.50292 7.89998 5.99998V6.99998C7.89998 7.03591 7.89787 7.07134 7.89378 7.10618C7.92861 7.10208 7.96405 7.09998 7.99998 7.09998H8.99998C9.49703 7.09998 9.89998 7.50292 9.89998 7.99998V8.99998C9.89998 9.49703 9.49703 9.89998 8.99998 9.89998H7.99998C7.50292 9.89998 7.09998 9.49703 7.09998 8.99998V7.99998C7.09998 7.96405 7.10208 7.92861 7.10618 7.89378C7.07134 7.89787 7.03591 7.89998 6.99998 7.89998H5.99998C5.50292 7.89998 5.09998 7.49703 5.09998 6.99998V5.99998ZM6.09998 5.99998H5.99998V6.09998V6.89998V6.99998H6.09998H6.89998H6.99998V6.89998V6.09998V5.99998H6.89998H6.09998ZM7.99998 7.99998H8.09998H8.89998H8.99998V8.09998V8.89998V8.99998H8.89998H8.09998H7.99998V8.89998V8.09998V7.99998ZM2.64998 11.75H2.34998H1.74998V12.35V12.65V13.25H2.34998H2.64998H3.24998V12.65V12.35V11.75H2.64998ZM11.75 1.74998H12.35H12.65H13.25V2.34998V2.64998V3.24998H12.65H12.35H11.75V2.64998V2.34998V1.74998ZM12.65 11.75H12.35H11.75V12.35V12.65V13.25H12.35H12.65H13.25V12.65V12.35V11.75H12.65Z",fill:le,fillRule:"evenodd",clipRule:"evenodd"}))}),Yd=null,Kd=null,qd=null,Jd=null,rf=["color"],of=(0,L.forwardRef)(function(ne,fe){var re=ne.color,le=re===void 0?"currentColor":re,ue=x(ne,rf);return(0,L.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ue,{ref:fe}),(0,L.createElement)("path",{d:"M4 6H11L7.5 10.5L4 6Z",fill:le}))}),Qd=null,e2=null,sf=["color"],af=(0,L.forwardRef)(function(ne,fe){var re=ne.color,le=re===void 0?"currentColor":re,ue=x(ne,sf);return(0,L.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ue,{ref:fe}),(0,L.createElement)("path",{d:"M6 11L6 4L10.5 7.5L6 11Z",fill:le}))}),t2=null,n2=null,r2=null,i2=null,o2=null,s2=null,lf=["color"],cf=(0,L.forwardRef)(function(ne,fe){var re=ne.color,le=re===void 0?"currentColor":re,ue=x(ne,lf);return(0,L.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ue,{ref:fe}),(0,L.createElement)("path",{d:"M1.90321 7.29677C1.90321 10.341 4.11041 12.4147 6.58893 12.8439C6.87255 12.893 7.06266 13.1627 7.01355 13.4464C6.96444 13.73 6.69471 13.9201 6.41109 13.871C3.49942 13.3668 0.86084 10.9127 0.86084 7.29677C0.860839 5.76009 1.55996 4.55245 2.37639 3.63377C2.96124 2.97568 3.63034 2.44135 4.16846 2.03202L2.53205 2.03202C2.25591 2.03202 2.03205 1.80816 2.03205 1.53202C2.03205 1.25588 2.25591 1.03202 2.53205 1.03202L5.53205 1.03202C5.80819 1.03202 6.03205 1.25588 6.03205 1.53202L6.03205 4.53202C6.03205 4.80816 5.80819 5.03202 5.53205 5.03202C5.25591 5.03202 5.03205 4.80816 5.03205 4.53202L5.03205 2.68645L5.03054 2.68759L5.03045 2.68766L5.03044 2.68767L5.03043 2.68767C4.45896 3.11868 3.76059 3.64538 3.15554 4.3262C2.44102 5.13021 1.90321 6.10154 1.90321 7.29677ZM13.0109 7.70321C13.0109 4.69115 10.8505 2.6296 8.40384 2.17029C8.12093 2.11718 7.93465 1.84479 7.98776 1.56188C8.04087 1.27898 8.31326 1.0927 8.59616 1.14581C11.4704 1.68541 14.0532 4.12605 14.0532 7.70321C14.0532 9.23988 13.3541 10.4475 12.5377 11.3662C11.9528 12.0243 11.2837 12.5586 10.7456 12.968L12.3821 12.968C12.6582 12.968 12.8821 13.1918 12.8821 13.468C12.8821 13.7441 12.6582 13.968 12.3821 13.968L9.38205 13.968C9.10591 13.968 8.88205 13.7441 8.88205 13.468L8.88205 10.468C8.88205 10.1918 9.10591 9.96796 9.38205 9.96796C9.65819 9.96796 9.88205 10.1918 9.88205 10.468L9.88205 12.3135L9.88362 12.3123C10.4551 11.8813 11.1535 11.3546 11.7585 10.6738C12.4731 9.86976 13.0109 8.89844 13.0109 7.70321Z",fill:le,fillRule:"evenodd",clipRule:"evenodd"}))}),a2=null,l2=null,i0=null,uf=null,c2=null,lu=null,ff=null,u2=null,f2=null,d2=null,df=null,h2=null,p2=null,m2=null,g2=null,v2=null,mc=null,hf=null,pf=null,C2=null,o0=null,_2=null,y2=null,mf=null},77828:function(tn,qe,J){"use strict";J.d(qe,{qA:function(){return Pt}});var L=J(72564),x=J(50959),g=J(63905),C=J(48119);const T=O=>O&&O.isCubeTexture;class $ extends C.Mesh{constructor(Ye,gt){var Ot,Nt;const Ve=T(Ye),dt=((Ot=Ve?(Nt=Ye.image[0])===null||Nt===void 0?void 0:Nt.width:Ye.image.width)!=null?Ot:1024)/4,Et=Math.floor(Math.log2(dt)),Z=Math.pow(2,Et),ye=3*Math.max(Z,16*7),ge=4*Z,ve=[Ve?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/ye}`,`#define CUBEUV_TEXEL_HEIGHT ${1/ge}`,`#define CUBEUV_MAX_MIP ${Et}.0`],_e=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,we=ve.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <encodings_fragment>
        }
        `,de={map:{value:Ye},height:{value:(gt==null?void 0:gt.height)||15},radius:{value:(gt==null?void 0:gt.radius)||100}},Y=new C.IcosahedronGeometry(1,16),te=new C.ShaderMaterial({uniforms:de,fragmentShader:we,vertexShader:_e,side:C.DoubleSide});super(Y,te)}set radius(Ye){this.material.uniforms.radius.value=Ye}get radius(){return this.material.uniforms.radius.value}set height(Ye){this.material.uniforms.height.value=Ye}get height(){return this.material.uniforms.height.value}}class H extends C.DataTextureLoader{constructor(Ye){super(Ye),this.type=C.HalfFloatType}parse(Ye){const dt=function(ee,Ae){switch(ee){case 1:console.error("THREE.RGBELoader Read Error: "+(Ae||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(Ae||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(Ae||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(Ae||""))}return-1},ge=`
`,ve=function(ee,Ae,Te){Ae=Ae||1024;let Je=ee.pos,it=-1,tt=0,St="",ot=String.fromCharCode.apply(null,new Uint16Array(ee.subarray(Je,Je+128)));for(;0>(it=ot.indexOf(ge))&&tt<Ae&&Je<ee.byteLength;)St+=ot,tt+=ot.length,Je+=128,ot+=String.fromCharCode.apply(null,new Uint16Array(ee.subarray(Je,Je+128)));return-1<it?(Te!==!1&&(ee.pos+=tt+it+1),St+ot.slice(0,it)):!1},_e=function(ee){const Ae=/^#\?(\S+)/,Te=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,$e=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,Je=/^\s*FORMAT=(\S+)\s*$/,it=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,tt={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let St,ot;if(ee.pos>=ee.byteLength||!(St=ve(ee)))return dt(1,"no header found");if(!(ot=St.match(Ae)))return dt(3,"bad initial token");for(tt.valid|=1,tt.programtype=ot[1],tt.string+=St+`
`;St=ve(ee),St!==!1;){if(tt.string+=St+`
`,St.charAt(0)==="#"){tt.comments+=St+`
`;continue}if((ot=St.match(Te))&&(tt.gamma=parseFloat(ot[1])),(ot=St.match($e))&&(tt.exposure=parseFloat(ot[1])),(ot=St.match(Je))&&(tt.valid|=2,tt.format=ot[1]),(ot=St.match(it))&&(tt.valid|=4,tt.height=parseInt(ot[1],10),tt.width=parseInt(ot[2],10)),tt.valid&2&&tt.valid&4)break}return tt.valid&2?tt.valid&4?tt:dt(3,"missing image size specifier"):dt(3,"missing format specifier")},we=function(ee,Ae,Te){const $e=Ae;if($e<8||$e>32767||ee[0]!==2||ee[1]!==2||ee[2]&128)return new Uint8Array(ee);if($e!==(ee[2]<<8|ee[3]))return dt(3,"wrong scanline width");const Je=new Uint8Array(4*Ae*Te);if(!Je.length)return dt(4,"unable to allocate buffer space");let it=0,tt=0;const St=4*$e,ot=new Uint8Array(4),Rt=new Uint8Array(St);let Lt=Te;for(;Lt>0&&tt<ee.byteLength;){if(tt+4>ee.byteLength)return dt(1);if(ot[0]=ee[tt++],ot[1]=ee[tt++],ot[2]=ee[tt++],ot[3]=ee[tt++],ot[0]!=2||ot[1]!=2||(ot[2]<<8|ot[3])!=$e)return dt(3,"bad rgbe scanline format");let pt=0,Xe;for(;pt<St&&tt<ee.byteLength;){Xe=ee[tt++];const Ct=Xe>128;if(Ct&&(Xe-=128),Xe===0||pt+Xe>St)return dt(3,"bad scanline data");if(Ct){const Wt=ee[tt++];for(let Xt=0;Xt<Xe;Xt++)Rt[pt++]=Wt}else Rt.set(ee.subarray(tt,tt+Xe),pt),pt+=Xe,tt+=Xe}const Be=$e;for(let Ct=0;Ct<Be;Ct++){let Wt=0;Je[it]=Rt[Ct+Wt],Wt+=$e,Je[it+1]=Rt[Ct+Wt],Wt+=$e,Je[it+2]=Rt[Ct+Wt],Wt+=$e,Je[it+3]=Rt[Ct+Wt],it+=4}Lt--}return Je},de=function(ee,Ae,Te,$e){const Je=ee[Ae+3],it=Math.pow(2,Je-128)/255;Te[$e+0]=ee[Ae+0]*it,Te[$e+1]=ee[Ae+1]*it,Te[$e+2]=ee[Ae+2]*it,Te[$e+3]=1},Y=function(ee,Ae,Te,$e){const Je=ee[Ae+3],it=Math.pow(2,Je-128)/255;Te[$e+0]=C.DataUtils.toHalfFloat(Math.min(ee[Ae+0]*it,65504)),Te[$e+1]=C.DataUtils.toHalfFloat(Math.min(ee[Ae+1]*it,65504)),Te[$e+2]=C.DataUtils.toHalfFloat(Math.min(ee[Ae+2]*it,65504)),Te[$e+3]=C.DataUtils.toHalfFloat(1)},te=new Uint8Array(Ye);te.pos=0;const Oe=_e(te);if(Oe!==-1){const ee=Oe.width,Ae=Oe.height,Te=we(te.subarray(te.pos),ee,Ae);if(Te!==-1){let $e,Je,it;switch(this.type){case C.FloatType:it=Te.length/4;const tt=new Float32Array(it*4);for(let ot=0;ot<it;ot++)de(Te,ot*4,tt,ot*4);$e=tt,Je=C.FloatType;break;case C.HalfFloatType:it=Te.length/4;const St=new Uint16Array(it*4);for(let ot=0;ot<it;ot++)Y(Te,ot*4,St,ot*4);$e=St,Je=C.HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:ee,height:Ae,data:$e,header:Oe.string,gamma:Oe.gamma,exposure:Oe.exposure,type:Je}}}return null}setDataType(Ye){return this.type=Ye,this}load(Ye,gt,Ot,Nt){function Ve(ke,dt){switch(ke.type){case C.FloatType:case C.HalfFloatType:"colorSpace"in ke?ke.colorSpace="srgb-linear":ke.encoding=3e3,ke.minFilter=C.LinearFilter,ke.magFilter=C.LinearFilter,ke.generateMipmaps=!1,ke.flipY=!0;break}gt&&gt(ke,dt)}return super.load(Ye,Ve,Ot,Nt)}}const K={sunset:"venice/venice_sunset_1k.hdr",dawn:"kiara/kiara_1_dawn_1k.hdr",night:"dikhololo/dikhololo_night_1k.hdr",warehouse:"empty-wharehouse/empty_warehouse_01_1k.hdr",forest:"forrest-slope/forest_slope_1k.hdr",apartment:"lebombo/lebombo_1k.hdr",studio:"studio-small-3/studio_small_03_1k.hdr",city:"potsdamer-platz/potsdamer_platz_1k.hdr",park:"rooitou/rooitou_park_1k.hdr",lobby:"st-fagans/st_fagans_interior_1k.hdr"},ce="https://market-assets.fra1.cdn.digitaloceanspaces.com/market-assets/hdris/";function oe({files:O=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:Ye="",preset:gt=void 0,encoding:Ot=void 0,extensions:Nt}={}){if(gt){if(!(gt in K))throw new Error("Preset must be one of: "+Object.keys(K).join(", "));O=K[gt],Ye=ce}const Ve=Array.isArray(O),ke=Ve?C.CubeTextureLoader:H,dt=(0,g.D)(ke,Ve?[O]:O,Z=>{Z.setPath(Ye),Nt&&Nt(Z)}),Et=Ve?dt[0]:dt;return Et.mapping=Ve?C.CubeReflectionMapping:C.EquirectangularReflectionMapping,Et.encoding=(Ot!=null?Ot:Ve)?C.sRGBEncoding:C.LinearEncoding,Et}const xe=O=>O.current&&O.current.isScene,Se=O=>xe(O)?O.current:O;function k(O,Ye,gt,Ot,Nt=0){const Ve=Se(Ye||gt),ke=Ve.background,dt=Ve.environment,Et=Ve.backgroundBlurriness||0;return O!=="only"&&(Ve.environment=Ot),O&&(Ve.background=Ot),O&&Ve.backgroundBlurriness!==void 0&&(Ve.backgroundBlurriness=Nt),()=>{O!=="only"&&(Ve.environment=dt),O&&(Ve.background=ke),O&&Ve.backgroundBlurriness!==void 0&&(Ve.backgroundBlurriness=Et)}}function rt({scene:O,background:Ye=!1,blur:gt,map:Ot}){const Nt=(0,g.z)(Ve=>Ve.scene);return x.useLayoutEffect(()=>{if(Ot)return k(Ye,O,Nt,Ot,gt)},[Nt,O,Ot,Ye,gt]),null}function lt(Nt){var Ve=Nt,{background:O=!1,scene:Ye,blur:gt}=Ve,Ot=Lo(Ve,["background","scene","blur"]);const ke=oe(Ot),dt=(0,g.z)(Et=>Et.scene);return x.useLayoutEffect(()=>k(O,Ye,dt,ke,gt),[ke,O,Ye,dt,gt]),null}function Qt({children:O,near:Ye=1,far:gt=1e3,resolution:Ot=256,frames:Nt=1,map:Ve,background:ke=!1,blur:dt,scene:Et,files:Z,path:ye,preset:ge=void 0,extensions:ve}){const _e=(0,g.z)(ee=>ee.gl),we=(0,g.z)(ee=>ee.scene),de=x.useRef(null),[Y]=x.useState(()=>new C.Scene),te=x.useMemo(()=>{const ee=new C.WebGLCubeRenderTarget(Ot);return ee.texture.type=C.HalfFloatType,ee},[Ot]);x.useLayoutEffect(()=>(Nt===1&&de.current.update(_e,Y),k(ke,Et,we,te.texture,dt)),[O,Y,te.texture,Et,we,ke,Nt,_e]);let Oe=1;return(0,g.A)(()=>{(Nt===1/0||Oe<Nt)&&(de.current.update(_e,Y),Oe++)}),x.createElement(x.Fragment,null,(0,g.g)(x.createElement(x.Fragment,null,O,x.createElement("cubeCamera",{ref:de,args:[Ye,gt,te]}),Z||ge?x.createElement(lt,{background:!0,files:Z,preset:ge,path:ye,extensions:ve}):Ve?x.createElement(rt,{background:!0,map:Ve,extensions:ve}):null),Y))}function mt(O){var Ye,gt,Ot,Nt;const Ve=oe(O),ke=O.map||Ve;x.useMemo(()=>(0,g.e)({GroundProjectedEnvImpl:$}),[]);const dt=x.useMemo(()=>[ke],[ke]),Et=(Ye=O.ground)==null?void 0:Ye.height,Z=(gt=O.ground)==null?void 0:gt.radius,ye=(Ot=(Nt=O.ground)==null?void 0:Nt.scale)!==null&&Ot!==void 0?Ot:1e3;return x.createElement(x.Fragment,null,x.createElement(rt,(0,L.Z)({},O,{map:ke})),x.createElement("groundProjectedEnvImpl",{args:dt,scale:ye,height:Et,radius:Z}))}function Pt(O){return O.ground?x.createElement(mt,O):O.map?x.createElement(rt,O):O.children?x.createElement(Qt,O):x.createElement(lt,O)}},53537:function(tn,qe,J){"use strict";J.d(qe,{z:function(){return ce}});var L=J(72564),x=J(63905),g=J(50959),C=J(45389),T=J(48119);const $=(oe,xe)=>(oe%xe+xe)%xe;class H extends T.EventDispatcher{constructor(xe,Se){super(),(0,C.Z)(this,"object",void 0),(0,C.Z)(this,"domElement",void 0),(0,C.Z)(this,"enabled",!0),(0,C.Z)(this,"target",new T.Vector3),(0,C.Z)(this,"minDistance",0),(0,C.Z)(this,"maxDistance",1/0),(0,C.Z)(this,"minZoom",0),(0,C.Z)(this,"maxZoom",1/0),(0,C.Z)(this,"minPolarAngle",0),(0,C.Z)(this,"maxPolarAngle",Math.PI),(0,C.Z)(this,"minAzimuthAngle",-1/0),(0,C.Z)(this,"maxAzimuthAngle",1/0),(0,C.Z)(this,"enableDamping",!1),(0,C.Z)(this,"dampingFactor",.05),(0,C.Z)(this,"enableZoom",!0),(0,C.Z)(this,"zoomSpeed",1),(0,C.Z)(this,"enableRotate",!0),(0,C.Z)(this,"rotateSpeed",1),(0,C.Z)(this,"enablePan",!0),(0,C.Z)(this,"panSpeed",1),(0,C.Z)(this,"screenSpacePanning",!0),(0,C.Z)(this,"keyPanSpeed",7),(0,C.Z)(this,"autoRotate",!1),(0,C.Z)(this,"autoRotateSpeed",2),(0,C.Z)(this,"reverseOrbit",!1),(0,C.Z)(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),(0,C.Z)(this,"mouseButtons",{LEFT:T.MOUSE.ROTATE,MIDDLE:T.MOUSE.DOLLY,RIGHT:T.MOUSE.PAN}),(0,C.Z)(this,"touches",{ONE:T.TOUCH.ROTATE,TWO:T.TOUCH.DOLLY_PAN}),(0,C.Z)(this,"target0",void 0),(0,C.Z)(this,"position0",void 0),(0,C.Z)(this,"zoom0",void 0),(0,C.Z)(this,"_domElementKeyEvents",null),(0,C.Z)(this,"getPolarAngle",void 0),(0,C.Z)(this,"getAzimuthalAngle",void 0),(0,C.Z)(this,"setPolarAngle",void 0),(0,C.Z)(this,"setAzimuthalAngle",void 0),(0,C.Z)(this,"getDistance",void 0),(0,C.Z)(this,"listenToKeyEvents",void 0),(0,C.Z)(this,"saveState",void 0),(0,C.Z)(this,"reset",void 0),(0,C.Z)(this,"update",void 0),(0,C.Z)(this,"connect",void 0),(0,C.Z)(this,"dispose",void 0),this.object=xe,this.domElement=Se,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof T.PerspectiveCamera?this.object.zoom:1,this.getPolarAngle=()=>Ye.phi,this.getAzimuthalAngle=()=>Ye.theta,this.setPolarAngle=me=>{let Ie=$(me,2*Math.PI),ct=Ye.phi;ct<0&&(ct+=2*Math.PI),Ie<0&&(Ie+=2*Math.PI);let It=Math.abs(Ie-ct);2*Math.PI-It<It&&(Ie<ct?Ie+=2*Math.PI:ct+=2*Math.PI),gt.phi=Ie-ct,k.update()},this.setAzimuthalAngle=me=>{let Ie=$(me,2*Math.PI),ct=Ye.theta;ct<0&&(ct+=2*Math.PI),Ie<0&&(Ie+=2*Math.PI);let It=Math.abs(Ie-ct);2*Math.PI-It<It&&(Ie<ct?Ie+=2*Math.PI:ct+=2*Math.PI),gt.theta=Ie-ct,k.update()},this.getDistance=()=>k.object.position.distanceTo(k.target),this.listenToKeyEvents=me=>{me.addEventListener("keydown",Me),this._domElementKeyEvents=me},this.saveState=()=>{k.target0.copy(k.target),k.position0.copy(k.object.position),k.zoom0=k.object instanceof T.PerspectiveCamera?k.object.zoom:1},this.reset=()=>{k.target.copy(k.target0),k.object.position.copy(k.position0),k.object instanceof T.PerspectiveCamera&&(k.object.zoom=k.zoom0,k.object.updateProjectionMatrix()),k.dispatchEvent(rt),k.update(),Pt=mt.NONE},this.update=(()=>{const me=new T.Vector3,Ie=new T.Quaternion().setFromUnitVectors(xe.up,new T.Vector3(0,1,0)),ct=Ie.clone().invert(),It=new T.Vector3,en=new T.Quaternion,bn=2*Math.PI;return function(){const tr=k.object.position;me.copy(tr).sub(k.target),me.applyQuaternion(Ie),Ye.setFromVector3(me),k.autoRotate&&Pt===mt.NONE&&ee(te()),k.enableDamping?(Ye.theta+=gt.theta*k.dampingFactor,Ye.phi+=gt.phi*k.dampingFactor):(Ye.theta+=gt.theta,Ye.phi+=gt.phi);let lr=k.minAzimuthAngle,Ar=k.maxAzimuthAngle;return isFinite(lr)&&isFinite(Ar)&&(lr<-Math.PI?lr+=bn:lr>Math.PI&&(lr-=bn),Ar<-Math.PI?Ar+=bn:Ar>Math.PI&&(Ar-=bn),lr<=Ar?Ye.theta=Math.max(lr,Math.min(Ar,Ye.theta)):Ye.theta=Ye.theta>(lr+Ar)/2?Math.max(lr,Ye.theta):Math.min(Ar,Ye.theta)),Ye.phi=Math.max(k.minPolarAngle,Math.min(k.maxPolarAngle,Ye.phi)),Ye.makeSafe(),Ye.radius*=Ot,Ye.radius=Math.max(k.minDistance,Math.min(k.maxDistance,Ye.radius)),k.enableDamping===!0?k.target.addScaledVector(Nt,k.dampingFactor):k.target.add(Nt),me.setFromSpherical(Ye),me.applyQuaternion(ct),tr.copy(k.target).add(me),k.object.lookAt(k.target),k.enableDamping===!0?(gt.theta*=1-k.dampingFactor,gt.phi*=1-k.dampingFactor,Nt.multiplyScalar(1-k.dampingFactor)):(gt.set(0,0,0),Nt.set(0,0,0)),Ot=1,Ve||It.distanceToSquared(k.object.position)>O||8*(1-en.dot(k.object.quaternion))>O?(k.dispatchEvent(rt),It.copy(k.object.position),en.copy(k.object.quaternion),Ve=!1,!0):!1}})(),this.connect=me=>{me===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),k.domElement=me,k.domElement.style.touchAction="none",k.domElement.addEventListener("contextmenu",at),k.domElement.addEventListener("pointerdown",Ne),k.domElement.addEventListener("pointercancel",Ft),k.domElement.addEventListener("wheel",dn)},this.dispose=()=>{var me,Ie,ct,It,en,bn;(me=k.domElement)===null||me===void 0||me.removeEventListener("contextmenu",at),(Ie=k.domElement)===null||Ie===void 0||Ie.removeEventListener("pointerdown",Ne),(ct=k.domElement)===null||ct===void 0||ct.removeEventListener("pointercancel",Ft),(It=k.domElement)===null||It===void 0||It.removeEventListener("wheel",dn),(en=k.domElement)===null||en===void 0||en.ownerDocument.removeEventListener("pointermove",Ze),(bn=k.domElement)===null||bn===void 0||bn.ownerDocument.removeEventListener("pointerup",et),k._domElementKeyEvents!==null&&k._domElementKeyEvents.removeEventListener("keydown",Me)};const k=this,rt={type:"change"},lt={type:"start"},Qt={type:"end"},mt={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let Pt=mt.NONE;const O=1e-6,Ye=new T.Spherical,gt=new T.Spherical;let Ot=1;const Nt=new T.Vector3;let Ve=!1;const ke=new T.Vector2,dt=new T.Vector2,Et=new T.Vector2,Z=new T.Vector2,ye=new T.Vector2,ge=new T.Vector2,ve=new T.Vector2,_e=new T.Vector2,we=new T.Vector2,de=[],Y={};function te(){return 2*Math.PI/60/60*k.autoRotateSpeed}function Oe(){return Math.pow(.95,k.zoomSpeed)}function ee(me){k.reverseOrbit?gt.theta+=me:gt.theta-=me}function Ae(me){k.reverseOrbit?gt.phi+=me:gt.phi-=me}const Te=(()=>{const me=new T.Vector3;return function(ct,It){me.setFromMatrixColumn(It,0),me.multiplyScalar(-ct),Nt.add(me)}})(),$e=(()=>{const me=new T.Vector3;return function(ct,It){k.screenSpacePanning===!0?me.setFromMatrixColumn(It,1):(me.setFromMatrixColumn(It,0),me.crossVectors(k.object.up,me)),me.multiplyScalar(ct),Nt.add(me)}})(),Je=(()=>{const me=new T.Vector3;return function(ct,It){const en=k.domElement;if(en&&k.object instanceof T.PerspectiveCamera&&k.object.isPerspectiveCamera){const bn=k.object.position;me.copy(bn).sub(k.target);let Vn=me.length();Vn*=Math.tan(k.object.fov/2*Math.PI/180),Te(2*ct*Vn/en.clientHeight,k.object.matrix),$e(2*It*Vn/en.clientHeight,k.object.matrix)}else en&&k.object instanceof T.OrthographicCamera&&k.object.isOrthographicCamera?(Te(ct*(k.object.right-k.object.left)/k.object.zoom/en.clientWidth,k.object.matrix),$e(It*(k.object.top-k.object.bottom)/k.object.zoom/en.clientHeight,k.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),k.enablePan=!1)}})();function it(me){k.object instanceof T.PerspectiveCamera&&k.object.isPerspectiveCamera?Ot/=me:k.object instanceof T.OrthographicCamera&&k.object.isOrthographicCamera?(k.object.zoom=Math.max(k.minZoom,Math.min(k.maxZoom,k.object.zoom*me)),k.object.updateProjectionMatrix(),Ve=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),k.enableZoom=!1)}function tt(me){k.object instanceof T.PerspectiveCamera&&k.object.isPerspectiveCamera?Ot*=me:k.object instanceof T.OrthographicCamera&&k.object.isOrthographicCamera?(k.object.zoom=Math.max(k.minZoom,Math.min(k.maxZoom,k.object.zoom/me)),k.object.updateProjectionMatrix(),Ve=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),k.enableZoom=!1)}function St(me){ke.set(me.clientX,me.clientY)}function ot(me){ve.set(me.clientX,me.clientY)}function Rt(me){Z.set(me.clientX,me.clientY)}function Lt(me){dt.set(me.clientX,me.clientY),Et.subVectors(dt,ke).multiplyScalar(k.rotateSpeed);const Ie=k.domElement;Ie&&(ee(2*Math.PI*Et.x/Ie.clientHeight),Ae(2*Math.PI*Et.y/Ie.clientHeight)),ke.copy(dt),k.update()}function pt(me){_e.set(me.clientX,me.clientY),we.subVectors(_e,ve),we.y>0?it(Oe()):we.y<0&&tt(Oe()),ve.copy(_e),k.update()}function Xe(me){ye.set(me.clientX,me.clientY),ge.subVectors(ye,Z).multiplyScalar(k.panSpeed),Je(ge.x,ge.y),Z.copy(ye),k.update()}function Be(me){me.deltaY<0?tt(Oe()):me.deltaY>0&&it(Oe()),k.update()}function Ct(me){let Ie=!1;switch(me.code){case k.keys.UP:Je(0,k.keyPanSpeed),Ie=!0;break;case k.keys.BOTTOM:Je(0,-k.keyPanSpeed),Ie=!0;break;case k.keys.LEFT:Je(k.keyPanSpeed,0),Ie=!0;break;case k.keys.RIGHT:Je(-k.keyPanSpeed,0),Ie=!0;break}Ie&&(me.preventDefault(),k.update())}function Wt(){if(de.length==1)ke.set(de[0].pageX,de[0].pageY);else{const me=.5*(de[0].pageX+de[1].pageX),Ie=.5*(de[0].pageY+de[1].pageY);ke.set(me,Ie)}}function Xt(){if(de.length==1)Z.set(de[0].pageX,de[0].pageY);else{const me=.5*(de[0].pageX+de[1].pageX),Ie=.5*(de[0].pageY+de[1].pageY);Z.set(me,Ie)}}function Yt(){const me=de[0].pageX-de[1].pageX,Ie=de[0].pageY-de[1].pageY,ct=Math.sqrt(me*me+Ie*Ie);ve.set(0,ct)}function wn(){k.enableZoom&&Yt(),k.enablePan&&Xt()}function an(){k.enableZoom&&Yt(),k.enableRotate&&Wt()}function un(me){if(de.length==1)dt.set(me.pageX,me.pageY);else{const ct=zt(me),It=.5*(me.pageX+ct.x),en=.5*(me.pageY+ct.y);dt.set(It,en)}Et.subVectors(dt,ke).multiplyScalar(k.rotateSpeed);const Ie=k.domElement;Ie&&(ee(2*Math.PI*Et.x/Ie.clientHeight),Ae(2*Math.PI*Et.y/Ie.clientHeight)),ke.copy(dt)}function Tn(me){if(de.length==1)ye.set(me.pageX,me.pageY);else{const Ie=zt(me),ct=.5*(me.pageX+Ie.x),It=.5*(me.pageY+Ie.y);ye.set(ct,It)}ge.subVectors(ye,Z).multiplyScalar(k.panSpeed),Je(ge.x,ge.y),Z.copy(ye)}function yt(me){const Ie=zt(me),ct=me.pageX-Ie.x,It=me.pageY-Ie.y,en=Math.sqrt(ct*ct+It*It);_e.set(0,en),we.set(0,Math.pow(_e.y/ve.y,k.zoomSpeed)),it(we.y),ve.copy(_e)}function pe(me){k.enableZoom&&yt(me),k.enablePan&&Tn(me)}function Ce(me){k.enableZoom&&yt(me),k.enableRotate&&un(me)}function Ne(me){if(k.enabled!==!1){if(de.length===0){var Ie,ct;(Ie=k.domElement)===null||Ie===void 0||Ie.ownerDocument.addEventListener("pointermove",Ze),(ct=k.domElement)===null||ct===void 0||ct.ownerDocument.addEventListener("pointerup",et)}Bt(me),me.pointerType==="touch"?Qe(me):qt(me)}}function Ze(me){k.enabled!==!1&&(me.pointerType==="touch"?Ke(me):$n(me))}function et(me){if(En(me),de.length===0){var Ie,ct,It;(Ie=k.domElement)===null||Ie===void 0||Ie.releasePointerCapture(me.pointerId),(ct=k.domElement)===null||ct===void 0||ct.ownerDocument.removeEventListener("pointermove",Ze),(It=k.domElement)===null||It===void 0||It.ownerDocument.removeEventListener("pointerup",et)}k.dispatchEvent(Qt),Pt=mt.NONE}function Ft(me){En(me)}function qt(me){let Ie;switch(me.button){case 0:Ie=k.mouseButtons.LEFT;break;case 1:Ie=k.mouseButtons.MIDDLE;break;case 2:Ie=k.mouseButtons.RIGHT;break;default:Ie=-1}switch(Ie){case T.MOUSE.DOLLY:if(k.enableZoom===!1)return;ot(me),Pt=mt.DOLLY;break;case T.MOUSE.ROTATE:if(me.ctrlKey||me.metaKey||me.shiftKey){if(k.enablePan===!1)return;Rt(me),Pt=mt.PAN}else{if(k.enableRotate===!1)return;St(me),Pt=mt.ROTATE}break;case T.MOUSE.PAN:if(me.ctrlKey||me.metaKey||me.shiftKey){if(k.enableRotate===!1)return;St(me),Pt=mt.ROTATE}else{if(k.enablePan===!1)return;Rt(me),Pt=mt.PAN}break;default:Pt=mt.NONE}Pt!==mt.NONE&&k.dispatchEvent(lt)}function $n(me){if(k.enabled!==!1)switch(Pt){case mt.ROTATE:if(k.enableRotate===!1)return;Lt(me);break;case mt.DOLLY:if(k.enableZoom===!1)return;pt(me);break;case mt.PAN:if(k.enablePan===!1)return;Xe(me);break}}function dn(me){k.enabled===!1||k.enableZoom===!1||Pt!==mt.NONE&&Pt!==mt.ROTATE||(me.preventDefault(),k.dispatchEvent(lt),Be(me),k.dispatchEvent(Qt))}function Me(me){k.enabled===!1||k.enablePan===!1||Ct(me)}function Qe(me){switch(ln(me),de.length){case 1:switch(k.touches.ONE){case T.TOUCH.ROTATE:if(k.enableRotate===!1)return;Wt(),Pt=mt.TOUCH_ROTATE;break;case T.TOUCH.PAN:if(k.enablePan===!1)return;Xt(),Pt=mt.TOUCH_PAN;break;default:Pt=mt.NONE}break;case 2:switch(k.touches.TWO){case T.TOUCH.DOLLY_PAN:if(k.enableZoom===!1&&k.enablePan===!1)return;wn(),Pt=mt.TOUCH_DOLLY_PAN;break;case T.TOUCH.DOLLY_ROTATE:if(k.enableZoom===!1&&k.enableRotate===!1)return;an(),Pt=mt.TOUCH_DOLLY_ROTATE;break;default:Pt=mt.NONE}break;default:Pt=mt.NONE}Pt!==mt.NONE&&k.dispatchEvent(lt)}function Ke(me){switch(ln(me),Pt){case mt.TOUCH_ROTATE:if(k.enableRotate===!1)return;un(me),k.update();break;case mt.TOUCH_PAN:if(k.enablePan===!1)return;Tn(me),k.update();break;case mt.TOUCH_DOLLY_PAN:if(k.enableZoom===!1&&k.enablePan===!1)return;pe(me),k.update();break;case mt.TOUCH_DOLLY_ROTATE:if(k.enableZoom===!1&&k.enableRotate===!1)return;Ce(me),k.update();break;default:Pt=mt.NONE}}function at(me){k.enabled!==!1&&me.preventDefault()}function Bt(me){de.push(me)}function En(me){delete Y[me.pointerId];for(let Ie=0;Ie<de.length;Ie++)if(de[Ie].pointerId==me.pointerId){de.splice(Ie,1);return}}function ln(me){let Ie=Y[me.pointerId];Ie===void 0&&(Ie=new T.Vector2,Y[me.pointerId]=Ie),Ie.set(me.pageX,me.pageY)}function zt(me){const Ie=me.pointerId===de[0].pointerId?de[1]:de[0];return Y[Ie.pointerId]}Se!==void 0&&this.connect(Se),this.update()}}class K extends null{constructor(xe,Se){super(xe,Se),this.screenSpacePanning=!1,this.mouseButtons.LEFT=MOUSE.PAN,this.mouseButtons.RIGHT=MOUSE.ROTATE,this.touches.ONE=TOUCH.PAN,this.touches.TWO=TOUCH.DOLLY_ROTATE}}const ce=g.forwardRef((Ye,O)=>{var gt=Ye,{makeDefault:oe,camera:xe,regress:Se,domElement:k,enableDamping:rt=!0,onChange:lt,onStart:Qt,onEnd:mt}=gt,Pt=Lo(gt,["makeDefault","camera","regress","domElement","enableDamping","onChange","onStart","onEnd"]);const Ot=(0,x.z)(we=>we.invalidate),Nt=(0,x.z)(we=>we.camera),Ve=(0,x.z)(we=>we.gl),ke=(0,x.z)(we=>we.events),dt=(0,x.z)(we=>we.setEvents),Et=(0,x.z)(we=>we.set),Z=(0,x.z)(we=>we.get),ye=(0,x.z)(we=>we.performance),ge=xe||Nt,ve=k||ke.connected||Ve.domElement,_e=g.useMemo(()=>new H(ge),[ge]);return(0,x.A)(()=>{_e.enabled&&_e.update()},-1),g.useEffect(()=>(_e.connect(ve),()=>void _e.dispose()),[ve,Se,_e,Ot]),g.useEffect(()=>{const we=te=>{Ot(),Se&&ye.regress(),lt&&lt(te)},de=te=>{Qt&&Qt(te)},Y=te=>{mt&&mt(te)};return _e.addEventListener("change",we),_e.addEventListener("start",de),_e.addEventListener("end",Y),()=>{_e.removeEventListener("start",de),_e.removeEventListener("end",Y),_e.removeEventListener("change",we)}},[lt,Qt,mt,_e,Ot,dt]),g.useEffect(()=>{if(oe){const we=Z().controls;return Et({controls:_e}),()=>Et({controls:we})}},[oe,_e]),g.createElement("primitive",(0,L.Z)({ref:O,object:_e,enableDamping:rt},Pt))})},38760:function(tn,qe,J){"use strict";J.d(qe,{H:function(){return dt}});var L=J(72564),x=J(50959),g=J(77828),C=J(48119),T=J(63905);const $={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},H={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `},K=x.forwardRef(($e,Te)=>{var Je=$e,{scale:Et=10,frames:Z=1/0,opacity:ye=1,width:ge=1,height:ve=1,blur:_e=1,far:we=10,resolution:de=512,smooth:Y=!0,color:te="#000000",depthWrite:Oe=!1,renderOrder:ee}=Je,Ae=Lo(Je,["scale","frames","opacity","width","height","blur","far","resolution","smooth","color","depthWrite","renderOrder"]);const it=x.useRef(null),tt=(0,T.z)(un=>un.scene),St=(0,T.z)(un=>un.gl),ot=x.useRef(null);ge=ge*(Array.isArray(Et)?Et[0]:Et||1),ve=ve*(Array.isArray(Et)?Et[1]:Et||1);const[Rt,Lt,pt,Xe,Be,Ct,Wt]=x.useMemo(()=>{const un=new C.WebGLRenderTarget(de,de),Tn=new C.WebGLRenderTarget(de,de);Tn.texture.generateMipmaps=un.texture.generateMipmaps=!1;const yt=new C.PlaneGeometry(ge,ve).rotateX(Math.PI/2),pe=new C.Mesh(yt),Ce=new C.MeshDepthMaterial;Ce.depthTest=Ce.depthWrite=!1,Ce.onBeforeCompile=et=>{et.uniforms=zr(sn({},et.uniforms),{ucolor:{value:new C.Color(te)}}),et.fragmentShader=et.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),et.fragmentShader=et.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const Ne=new C.ShaderMaterial($),Ze=new C.ShaderMaterial(H);return Ze.depthTest=Ne.depthTest=!1,[un,yt,Ce,pe,Ne,Ze,Tn]},[de,ge,ve,Et,te]),Xt=un=>{Xe.visible=!0,Xe.material=Be,Be.uniforms.tDiffuse.value=Rt.texture,Be.uniforms.h.value=un*1/256,St.setRenderTarget(Wt),St.render(Xe,ot.current),Xe.material=Ct,Ct.uniforms.tDiffuse.value=Wt.texture,Ct.uniforms.v.value=un*1/256,St.setRenderTarget(Rt),St.render(Xe,ot.current),Xe.visible=!1};let Yt=0,wn,an;return(0,T.A)(()=>{ot.current&&(Z===1/0||Yt<Z)&&(Yt++,wn=tt.background,an=tt.overrideMaterial,it.current.visible=!1,tt.background=null,tt.overrideMaterial=pt,St.setRenderTarget(Rt),St.render(tt,ot.current),Xt(_e),Y&&Xt(_e*.4),St.setRenderTarget(null),it.current.visible=!0,tt.overrideMaterial=an,tt.background=wn)}),x.useImperativeHandle(Te,()=>it.current,[]),x.createElement("group",(0,L.Z)({"rotation-x":Math.PI/2},Ae,{ref:it}),x.createElement("mesh",{renderOrder:ee,geometry:Lt,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},x.createElement("meshBasicMaterial",{transparent:!0,map:Rt.texture,opacity:ye,depthWrite:Oe})),x.createElement("orthographicCamera",{ref:ot,args:[-ge/2,ge/2,ve/2,-ve/2,0,we]}))}),ce=x.forwardRef(function(tt,it){var St=tt,{children:Z,disable:ye,disableX:ge,disableY:ve,disableZ:_e,left:we,right:de,top:Y,bottom:te,front:Oe,back:ee,onCentered:Ae,precise:Te=!0,cacheKey:$e=0}=St,Je=Lo(St,["children","disable","disableX","disableY","disableZ","left","right","top","bottom","front","back","onCentered","precise","cacheKey"]);const ot=x.useRef(null),Rt=x.useRef(null),Lt=x.useRef(null);return x.useLayoutEffect(()=>{Rt.current.matrixWorld.identity();const pt=new C.Box3().setFromObject(Lt.current,Te),Xe=new C.Vector3,Be=new C.Sphere,Ct=pt.max.x-pt.min.x,Wt=pt.max.y-pt.min.y,Xt=pt.max.z-pt.min.z;pt.getCenter(Xe),pt.getBoundingSphere(Be);const Yt=Y?Wt/2:te?-Wt/2:0,wn=we?-Ct/2:de?Ct/2:0,an=Oe?Xt/2:ee?-Xt/2:0;Rt.current.position.set(ye||ge?0:-Xe.x+wn,ye||ve?0:-Xe.y+Yt,ye||_e?0:-Xe.z+an),typeof Ae!="undefined"&&Ae({parent:ot.current.parent,container:ot.current,width:Ct,height:Wt,depth:Xt,boundingBox:pt,boundingSphere:Be,center:Xe,verticalAlignment:Yt,horizontalAlignment:wn,depthAlignment:an})},[$e,Ae,Y,we,Oe,ye,ge,ve,_e,Te,de,te,ee]),x.useImperativeHandle(it,()=>ot.current,[]),x.createElement("group",(0,L.Z)({ref:ot},Je),x.createElement("group",{ref:Rt},x.createElement("group",{ref:Lt},Z)))});function oe(Et,Z,ye,ge){const ve=class extends C.ShaderMaterial{constructor(we={}){const de=Object.entries(Et);super({uniforms:de.reduce((Y,[te,Oe])=>{const ee=C.UniformsUtils.clone({[te]:{value:Oe}});return sn(sn({},Y),ee)},{}),vertexShader:Z,fragmentShader:ye});ph(this,"key","");de.forEach(([Y])=>Object.defineProperty(this,Y,{get:()=>this.uniforms[Y].value,set:te=>this.uniforms[Y].value=te})),Object.assign(this,we),ge&&ge(this)}};return ve.key=C.MathUtils.generateUUID(),ve}const xe=oe({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }");function Se(Et){return Et.isLight}function k(Et){return!!Et.geometry}const rt=x.createContext(null),lt=oe({color:new C.Color,blend:2,alphaTest:.75,opacity:0,map:null},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vUv = uv;
   }`,`varying vec2 vUv;
   uniform sampler2D map;
   uniform vec3 color;
   uniform float opacity;
   uniform float alphaTest;
   uniform float blend;
   void main() {
     vec4 sampledDiffuseColor = texture2D(map, vUv);
     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);
     #include <tonemapping_fragment>
     #include <encodings_fragment>
   }`),Qt=x.forwardRef(($e,Te)=>{var Je=$e,{children:Et,temporal:Z,frames:ye=40,limit:ge=1/0,blend:ve=20,scale:_e=10,opacity:we=1,alphaTest:de=.75,color:Y="black",colorBlend:te=2,resolution:Oe=1024,toneMapped:ee=!0}=Je,Ae=Lo(Je,["children","temporal","frames","limit","blend","scale","opacity","alphaTest","color","colorBlend","resolution","toneMapped"]);(0,T.e)({SoftShadowMaterial:lt});const it=(0,T.z)(Be=>Be.gl),tt=(0,T.z)(Be=>Be.scene),St=(0,T.z)(Be=>Be.camera),ot=(0,T.z)(Be=>Be.invalidate),Rt=x.useRef(null),Lt=x.useRef(null),[pt]=x.useState(()=>new Pt(it,tt,Oe));x.useLayoutEffect(()=>{pt.configure(Rt.current)},[]);const Xe=x.useMemo(()=>({lights:new Map,temporal:!!Z,frames:Math.max(2,ye),blend:Math.max(2,ye===1/0?ve:ye),count:0,getMesh:()=>Rt.current,reset:()=>{pt.clear();const Be=Rt.current.material;Be.opacity=0,Be.alphaTest=0,Xe.count=0},update:(Be=1)=>{const Ct=Rt.current.material;Xe.temporal?(Ct.opacity=Math.min(we,Ct.opacity+we/Xe.blend),Ct.alphaTest=Math.min(de,Ct.alphaTest+de/Xe.blend)):(Ct.opacity=we,Ct.alphaTest=de),Lt.current.visible=!0,pt.prepare();for(let Wt=0;Wt<Be;Wt++)Xe.lights.forEach(Xt=>Xt.update()),pt.update(St,Xe.blend);Lt.current.visible=!1,pt.finish()}}),[pt,St,tt,Z,ye,ve,we,de]);return x.useLayoutEffect(()=>{Xe.reset(),!Xe.temporal&&Xe.frames!==1/0&&Xe.update(Xe.blend)}),x.useImperativeHandle(Te,()=>Xe,[Xe]),(0,T.A)(()=>{(Xe.temporal||Xe.frames===1/0)&&Xe.count<Xe.frames&&Xe.count<ge&&(ot(),Xe.update(),Xe.count++)}),x.createElement("group",Ae,x.createElement("group",{traverse:()=>null,ref:Lt},x.createElement(rt.Provider,{value:Xe},Et)),x.createElement("mesh",{receiveShadow:!0,ref:Rt,scale:_e,rotation:[-Math.PI/2,0,0]},x.createElement("planeGeometry",null),x.createElement("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:ee,color:Y,blend:te,map:pt.progressiveLightMap2.texture})))}),mt=x.forwardRef(($e,Te)=>{var Je=$e,{castShadow:Et=!0,bias:Z=.001,mapSize:ye=512,size:ge=5,near:ve=.5,far:_e=500,frames:we=1,position:de=[0,0,0],radius:Y=1,amount:te=8,intensity:Oe=1,ambient:ee=.5}=Je,Ae=Lo(Je,["castShadow","bias","mapSize","size","near","far","frames","position","radius","amount","intensity","ambient"]);const it=x.useRef(null),tt=new C.Vector3(...de).length(),St=x.useContext(rt),ot=x.useCallback(()=>{let Lt;if(it.current)for(let pt=0;pt<it.current.children.length;pt++)if(Lt=it.current.children[pt],Math.random()>ee)Lt.position.set(de[0]+C.MathUtils.randFloatSpread(Y),de[1]+C.MathUtils.randFloatSpread(Y),de[2]+C.MathUtils.randFloatSpread(Y));else{let Xe=Math.acos(2*Math.random()-1)-Math.PI/2,Be=2*Math.PI*Math.random();Lt.position.set(Math.cos(Xe)*Math.cos(Be)*tt,Math.abs(Math.cos(Xe)*Math.sin(Be)*tt),Math.sin(Xe)*tt)}},[Y,ee,tt,...de]),Rt=x.useMemo(()=>({update:ot}),[ot]);return x.useImperativeHandle(Te,()=>Rt,[Rt]),x.useLayoutEffect(()=>{const Lt=it.current;return St&&St.lights.set(Lt.uuid,Rt),()=>void St.lights.delete(Lt.uuid)},[St,Rt]),x.createElement("group",(0,L.Z)({ref:it},Ae),Array.from({length:te},(Lt,pt)=>x.createElement("directionalLight",{key:pt,castShadow:Et,"shadow-bias":Z,"shadow-mapSize":[ye,ye],intensity:Oe/te},x.createElement("orthographicCamera",{attach:"shadow-camera",args:[-ge,ge,ge,-ge,ve,_e]}))))});class Pt{constructor(Z,ye,ge=1024){this.renderer=Z,this.res=ge,this.scene=ye,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null,this.clearColor=new C.Color,this.clearAlpha=0;const ve=/(Android|iPad|iPhone|iPod)/g.test(navigator.userAgent)?C.HalfFloatType:C.FloatType;this.progressiveLightMap1=new C.WebGLRenderTarget(this.res,this.res,{type:ve}),this.progressiveLightMap2=new C.WebGLRenderTarget(this.res,this.res,{type:ve}),this.discardMat=new xe,this.targetMat=new C.MeshLambertMaterial({fog:!1}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=_e=>{_e.vertexShader=`varying vec2 vUv;
`+_e.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";const we=_e.fragmentShader.indexOf("void main() {");_e.fragmentShader=`varying vec2 vUv;
`+_e.fragmentShader.slice(0,we)+`uniform sampler2D previousShadowMap;
	uniform float averagingWindow;
`+_e.fragmentShader.slice(we-1,-1)+`
vec3 texelOld = texture2D(previousShadowMap, vUv).rgb;
        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/ averagingWindow);
      }`,_e.uniforms.previousShadowMap=this.previousShadowMap,_e.uniforms.averagingWindow=this.averagingWindow}}clear(){this.renderer.getClearColor(this.clearColor),this.clearAlpha=this.renderer.getClearAlpha(),this.renderer.setClearColor("black",1),this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.clearColor,this.clearAlpha),this.lights=[],this.meshes=[],this.scene.traverse(Z=>{k(Z)?this.meshes.push({object:Z,material:Z.material}):Se(Z)&&this.lights.push({object:Z,intensity:Z.intensity})})}prepare(){this.lights.forEach(Z=>Z.object.intensity=0),this.meshes.forEach(Z=>Z.object.material=this.discardMat)}finish(){this.lights.forEach(Z=>Z.object.intensity=Z.intensity),this.meshes.forEach(Z=>Z.object.material=Z.material)}configure(Z){this.object=Z}update(Z,ye=100){if(!this.object)return;this.averagingWindow.value=ye,this.object.material=this.targetMat;const ge=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,ve=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1,_e=this.scene.background;this.scene.background=null,this.renderer.setRenderTarget(ge),this.previousShadowMap.value=ve.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,Z),this.renderer.setRenderTarget(null),this.scene.background=_e}}const O=Et=>Et&&Et.isOrthographicCamera,Ye=Et=>Et&&Et.isBox3,gt=x.createContext(null);function Ot({children:Et,damping:Z=6,fit:ye,clip:ge,observe:ve,margin:_e=1.2,eps:we=.01,onFit:de}){const Y=x.useRef(null),{camera:te,invalidate:Oe,size:ee,controls:Ae}=(0,T.z)(),Te=Ae,$e=x.useRef(de);$e.current=de;function Je(pt,Xe){return Math.abs(pt.x-Xe.x)<we&&Math.abs(pt.y-Xe.y)<we&&Math.abs(pt.z-Xe.z)<we}function it(pt,Xe,Be,Ct){pt.x=C.MathUtils.damp(pt.x,Xe.x,Be,Ct),pt.y=C.MathUtils.damp(pt.y,Xe.y,Be,Ct),pt.z=C.MathUtils.damp(pt.z,Xe.z,Be,Ct)}const[tt]=x.useState(()=>({animating:!1,focus:new C.Vector3,camera:new C.Vector3,zoom:1})),[St]=x.useState(()=>({focus:new C.Vector3,camera:new C.Vector3,zoom:1})),[ot]=x.useState(()=>new C.Box3),Rt=x.useMemo(()=>{function pt(){const Xe=ot.getSize(new C.Vector3),Be=ot.getCenter(new C.Vector3),Ct=Math.max(Xe.x,Xe.y,Xe.z),Wt=O(te)?Ct*4:Ct/(2*Math.atan(Math.PI*te.fov/360)),Xt=O(te)?Ct*4:Wt/te.aspect,Yt=_e*Math.max(Wt,Xt);return{box:ot,size:Xe,center:Be,distance:Yt}}return{getSize:pt,refresh(Xe){if(Ye(Xe))ot.copy(Xe);else{const Be=Xe||Y.current;Be.updateWorldMatrix(!0,!0),ot.setFromObject(Be)}if(ot.isEmpty()){const Be=te.position.length()||10;ot.setFromCenterAndSize(new C.Vector3,new C.Vector3(Be,Be,Be))}if((Te==null?void 0:Te.constructor.name)==="OrthographicTrackballControls"){const{distance:Be}=pt(),Ct=te.position.clone().sub(Te.target).normalize().multiplyScalar(Be),Wt=Te.target.clone().add(Ct);te.position.copy(Wt)}return this},clip(){const{distance:Xe}=pt();return Te&&(Te.maxDistance=Xe*10),te.near=Xe/100,te.far=Xe*100,te.updateProjectionMatrix(),Te&&Te.update(),Oe(),this},to({position:Xe,target:Be}){tt.camera.copy(te.position);const{center:Ct}=pt();return St.camera.set(...Xe),Be?St.focus.set(...Be):St.focus.copy(Ct),Z?tt.animating=!0:te.position.set(...Xe),this},fit(){tt.camera.copy(te.position),Te&&tt.focus.copy(Te.target);const{center:Xe,distance:Be}=pt(),Ct=Xe.clone().sub(te.position).normalize().multiplyScalar(Be);if(St.camera.copy(Xe).sub(Ct),St.focus.copy(Xe),O(te)){tt.zoom=te.zoom;let Wt=0,Xt=0;const Yt=[new C.Vector3(ot.min.x,ot.min.y,ot.min.z),new C.Vector3(ot.min.x,ot.max.y,ot.min.z),new C.Vector3(ot.min.x,ot.min.y,ot.max.z),new C.Vector3(ot.min.x,ot.max.y,ot.max.z),new C.Vector3(ot.max.x,ot.max.y,ot.max.z),new C.Vector3(ot.max.x,ot.max.y,ot.min.z),new C.Vector3(ot.max.x,ot.min.y,ot.max.z),new C.Vector3(ot.max.x,ot.min.y,ot.min.z)];Xe.applyMatrix4(te.matrixWorldInverse);for(const un of Yt)un.applyMatrix4(te.matrixWorldInverse),Wt=Math.max(Wt,Math.abs(un.y-Xe.y)),Xt=Math.max(Xt,Math.abs(un.x-Xe.x));Wt*=2,Xt*=2;const wn=(te.top-te.bottom)/Wt,an=(te.right-te.left)/Xt;St.zoom=Math.min(wn,an)/_e,Z||(te.zoom=St.zoom,te.updateProjectionMatrix())}return Z?tt.animating=!0:(te.position.copy(St.camera),te.lookAt(St.focus),Te&&(Te.target.copy(St.focus),Te.update())),$e.current&&$e.current(this.getSize()),Oe(),this}}},[ot,te,Te,_e,Z,Oe]);x.useLayoutEffect(()=>{if(Te){const pt=()=>tt.animating=!1;return Te.addEventListener("start",pt),()=>Te.removeEventListener("start",pt)}},[Te]);const Lt=x.useRef(0);return x.useLayoutEffect(()=>{(ve||Lt.current++===0)&&(Rt.refresh(),ye&&Rt.fit(),ge&&Rt.clip())},[ee,ge,ye,ve,te,Te]),(0,T.A)((pt,Xe)=>{if(tt.animating){if(it(tt.focus,St.focus,Z,Xe),it(tt.camera,St.camera,Z,Xe),tt.zoom=C.MathUtils.damp(tt.zoom,St.zoom,Z,Xe),te.position.copy(tt.camera),O(te)&&(te.zoom=tt.zoom,te.updateProjectionMatrix()),Te?(Te.target.copy(tt.focus),Te.update()):te.lookAt(tt.focus),Oe(),O(te)&&!(Math.abs(tt.zoom-St.zoom)<we)||!O(te)&&!Je(tt.camera,St.camera)||Te&&!Je(tt.focus,St.focus))return;tt.animating=!1}}),x.createElement("group",{ref:Y},x.createElement(gt.Provider,{value:Rt},Et))}function Nt(){return x.useContext(gt)}const Ve={rembrandt:{main:[1,2,1],fill:[-2,-.5,-2]},portrait:{main:[-1,2,.5],fill:[-1,.5,-1.5]},upfront:{main:[0,2,1],fill:[-1,.5,-1.5]},soft:{main:[-2,4,4],fill:[-1,.5,-1.5]}};function ke({radius:Et,adjustCamera:Z}){const ye=Nt();return x.useEffect(()=>{Z&&ye.refresh().clip().fit()},[Et,Z]),null}function dt(Y){var te=Y,{children:Et,center:Z,adjustCamera:ye=!0,intensity:ge=.5,shadows:ve="contact",environment:_e="city",preset:we="rembrandt"}=te,de=Lo(te,["children","center","adjustCamera","intensity","shadows","environment","preset"]);var Oe,ee,Ae,Te,$e,Je,it,tt;const St=typeof we=="string"?Ve[we]:we,[{radius:ot,height:Rt},Lt]=x.useState({radius:0,width:0,height:0,depth:0}),pt=(Oe=ve==null?void 0:ve.bias)!==null&&Oe!==void 0?Oe:-1e-4,Xe=(ee=ve==null?void 0:ve.normalBias)!==null&&ee!==void 0?ee:0,Be=(Ae=ve==null?void 0:ve.size)!==null&&Ae!==void 0?Ae:1024,Ct=(Te=ve==null?void 0:ve.offset)!==null&&Te!==void 0?Te:0,Wt=ve==="contact"||(ve==null?void 0:ve.type)==="contact",Xt=ve==="accumulative"||(ve==null?void 0:ve.type)==="accumulative",Yt=sn({},typeof ve=="object"?ve:{}),wn=_e?typeof _e=="string"?{preset:_e}:_e:null,an=x.useCallback(un=>{const{width:Tn,height:yt,depth:pe,boundingSphere:Ce}=un;Lt({radius:Ce.radius,width:Tn,height:yt,depth:pe}),Z!=null&&Z.onCentered&&Z.onCentered(un)},[]);return x.createElement(x.Fragment,null,x.createElement("ambientLight",{intensity:ge/3}),x.createElement("spotLight",{penumbra:1,position:[St.main[0]*ot,St.main[1]*ot,St.main[2]*ot],intensity:ge*2,castShadow:!!ve,"shadow-bias":pt,"shadow-normalBias":Xe,"shadow-mapSize":Be}),x.createElement("pointLight",{position:[St.fill[0]*ot,St.fill[1]*ot,St.fill[2]*ot],intensity:ge}),x.createElement(Ot,(0,L.Z)({fit:!!ye,clip:!!ye,margin:Number(ye),observe:!0},de),x.createElement(ke,{radius:ot,adjustCamera:ye}),x.createElement(ce,(0,L.Z)({},Z,{position:[0,Ct/2,0],onCentered:an}),Et)),x.createElement("group",{position:[0,-Rt/2-Ct/2,0]},Wt&&x.createElement(K,(0,L.Z)({scale:ot*4,far:ot,blur:2},Yt)),Xt&&x.createElement(Qt,(0,L.Z)({temporal:!0,frames:100,alphaTest:.9,toneMapped:!0,scale:ot*4},Yt),x.createElement(mt,{amount:($e=Yt.amount)!==null&&$e!==void 0?$e:8,radius:(Je=Yt.radius)!==null&&Je!==void 0?Je:ot,ambient:(it=Yt.ambient)!==null&&it!==void 0?it:.5,intensity:(tt=Yt.intensity)!==null&&tt!==void 0?tt:1,position:[St.main[0]*ot,St.main[1]*ot,St.main[2]*ot],size:ot*4,bias:-pt,mapSize:Be}))),_e&&x.createElement(g.qA,wn))}},63905:function(tn,qe,J){"use strict";J.d(qe,{A:function(){return at},B:function(){return Et},D:function(){return ln},E:function(){return Z},a:function(){return ke},b:function(){return tr},c:function(){return Be},d:function(){return ti},e:function(){return mt},g:function(){return ai},i:function(){return Ve},u:function(){return dt},z:function(){return Ke}});var L=J(48119),x=J(50959),g=J(85259),C=J(31171),T=J(97427),$=J.n(T),H=J(65297);function K(D,j,m=(v,w)=>v===w){if(D===j)return!0;if(!D||!j)return!1;const v=D.length;if(j.length!==v)return!1;for(let w=0;w<v;w++)if(!m(D[w],j[w]))return!1;return!0}const ce=[];function oe(D,j,m=!1,v={}){for(const S of ce)if(K(j,S.keys,S.equal)){if(m)return;if(Object.prototype.hasOwnProperty.call(S,"error"))throw S.error;if(Object.prototype.hasOwnProperty.call(S,"response"))return S.response;if(!m)throw S.promise}const w={keys:j,equal:v.equal,promise:D(...j).then(S=>w.response=S).then(()=>{v.lifespan&&v.lifespan>0&&setTimeout(()=>{const S=ce.indexOf(w);S!==-1&&ce.splice(S,1)},v.lifespan)}).catch(S=>w.error=S)};if(ce.push(w),!m)throw w.promise}const xe=(D,j,m)=>oe(D,j,!1,m),Se=(D,j,m)=>void oe(D,j,!0,m),k=D=>{var j;return(j=ce.find(m=>K(D,m.keys,m.equal)))==null?void 0:j.response},rt=D=>{if(D===void 0||D.length===0)ce.splice(0,ce.length);else{const j=ce.find(m=>K(D,m.keys,m.equal));if(j){const m=ce.indexOf(j);m!==-1&&ce.splice(m,1)}}};var lt=Object.freeze({__proto__:null});const Qt={},mt=D=>void Object.assign(Qt,D);function Pt(D,j){function m(P,kt,ut){var Ht=kt,{args:W=[],attach:Fe}=Ht,Ge=Lo(Ht,["args","attach"]);let ht=`${P[0].toUpperCase()}${P.slice(1)}`,vt;if(P==="primitive"){if(Ge.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const ft=Ge.object;vt=Oe(ft,{type:P,root:ut,attach:Fe,primitive:!0})}else{const ft=Qt[ht];if(!ft)throw new Error(`R3F: ${ht} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(W))throw new Error("R3F: The args prop must be an array!");vt=Oe(new ft(...W),{type:P,root:ut,attach:Fe,memoizedProps:{args:W}})}return vt.__r3f.attach===void 0&&(vt instanceof L.BufferGeometry?vt.__r3f.attach="geometry":vt instanceof L.Material&&(vt.__r3f.attach="material")),ht!=="inject"&&it(vt,Ge),vt}function v(P,W){let Fe=!1;if(W){var Ge,ut;(Ge=W.__r3f)!=null&&Ge.attach?Te(P,W,W.__r3f.attach):W.isObject3D&&P.isObject3D&&(P.add(W),Fe=!0),Fe||(ut=P.__r3f)==null||ut.objects.push(W),W.__r3f||Oe(W,{}),W.__r3f.parent=P,St(W),tt(W)}}function w(P,W,Fe){let Ge=!1;if(W){var ut,kt;if((ut=W.__r3f)!=null&&ut.attach)Te(P,W,W.__r3f.attach);else if(W.isObject3D&&P.isObject3D){W.parent=P,W.dispatchEvent({type:"added"});const Ht=P.children.filter(vt=>vt!==W),ht=Ht.indexOf(Fe);P.children=[...Ht.slice(0,ht),W,...Ht.slice(ht)],Ge=!0}Ge||(kt=P.__r3f)==null||kt.objects.push(W),W.__r3f||Oe(W,{}),W.__r3f.parent=P,St(W),tt(W)}}function S(P,W,Fe=!1){P&&[...P].forEach(Ge=>z(W,Ge,Fe))}function z(P,W,Fe){if(W){var Ge,ut,kt;if(W.__r3f&&(W.__r3f.parent=null),(Ge=P.__r3f)!=null&&Ge.objects&&(P.__r3f.objects=P.__r3f.objects.filter(Gt=>Gt!==W)),(ut=W.__r3f)!=null&&ut.attach)$e(P,W,W.__r3f.attach);else if(W.isObject3D&&P.isObject3D){var Ht;P.remove(W),(Ht=W.__r3f)!=null&&Ht.root&&Xe(W.__r3f.root,W)}const vt=(kt=W.__r3f)==null?void 0:kt.primitive,ft=Fe===void 0?W.dispose!==null&&!vt:Fe;if(!vt){var ht;S((ht=W.__r3f)==null?void 0:ht.objects,W,ft),S(W.children,W,ft)}W.__r3f&&(delete W.__r3f.root,delete W.__r3f.objects,delete W.__r3f.handlers,delete W.__r3f.memoizedProps,vt||delete W.__r3f),ft&&W.dispose&&W.type!=="Scene"&&(0,H.unstable_scheduleCallback)(H.unstable_IdlePriority,()=>{try{W.dispose()}catch(Gt){}}),tt(P)}}function ae(P,W,Fe,Ge){var ut;const kt=(ut=P.__r3f)==null?void 0:ut.parent;if(!kt)return;const Ht=m(W,Fe,P.__r3f.root);if(P.children){for(const ht of P.children)ht.__r3f&&v(Ht,ht);P.children=P.children.filter(ht=>!ht.__r3f)}P.__r3f.objects.forEach(ht=>v(Ht,ht)),P.__r3f.objects=[],P.__r3f.autoRemovedBeforeAppend||z(kt,P),Ht.parent&&(Ht.__r3f.autoRemovedBeforeAppend=!0),v(kt,Ht),Ht.raycast&&Ht.__r3f.eventCount&&Ht.__r3f.root.getState().internal.interaction.push(Ht),[Ge,Ge.alternate].forEach(ht=>{ht!==null&&(ht.stateNode=Ht,ht.ref&&(typeof ht.ref=="function"?ht.ref(Ht):ht.ref.current=Ht))})}const F=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:$()({createInstance:m,removeChild:z,appendChild:v,appendInitialChild:v,insertBefore:w,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(P,W)=>{if(!W)return;const Fe=P.getState().scene;Fe.__r3f&&(Fe.__r3f.root=P,v(Fe,W))},removeChildFromContainer:(P,W)=>{W&&z(P.getState().scene,W)},insertInContainerBefore:(P,W,Fe)=>{if(!W||!Fe)return;const Ge=P.getState().scene;Ge.__r3f&&w(Ge,W,Fe)},getRootHostContext:()=>null,getChildHostContext:P=>P,finalizeInitialChildren(P){var W;const Fe=(W=P==null?void 0:P.__r3f)!=null?W:{};return Boolean(Fe.handlers)},prepareUpdate(P,W,Fe,Ge){if(P.__r3f.primitive&&Ge.object&&Ge.object!==P)return[!0];{const ut=Ge,{args:Ht=[],children:ht}=ut,vt=Lo(ut,["args","children"]),kt=Fe,{args:ft=[],children:Gt}=kt,An=Lo(kt,["args","children"]);if(!Array.isArray(Ht))throw new Error("R3F: the args prop must be an array!");if(Ht.some((Gn,Pn)=>Gn!==ft[Pn]))return[!0];const Rn=Je(P,vt,An,!0);return Rn.changes.length?[!1,Rn]:null}},commitUpdate(P,[W,Fe],Ge,ut,kt,Ht){W?ae(P,Ge,kt,Ht):it(P,Fe)},commitMount(P,W,Fe,Ge){var ut;const kt=(ut=P.__r3f)!=null?ut:{};P.raycast&&kt.handlers&&kt.eventCount&&P.__r3f.root.getState().internal.interaction.push(P)},getPublicInstance:P=>P,prepareForCommit:()=>null,preparePortalMount:P=>Oe(P.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(P){var W;const{attach:Fe,parent:Ge}=(W=P.__r3f)!=null?W:{};Fe&&Ge&&$e(Ge,P,Fe),P.isObject3D&&(P.visible=!1),tt(P)},unhideInstance(P,W){var Fe;const{attach:Ge,parent:ut}=(Fe=P.__r3f)!=null?Fe:{};Ge&&ut&&Te(ut,P,Ge),(P.isObject3D&&W.visible==null||W.visible)&&(P.visible=!0),tt(P)},createTextInstance:F,hideTextInstance:F,unhideTextInstance:F,getCurrentEventPriority:()=>j?j():g.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance!="undefined"&&de.fun(performance.now)?performance.now:de.fun(Date.now)?Date.now:()=>0,scheduleTimeout:de.fun(setTimeout)?setTimeout:void 0,cancelTimeout:de.fun(clearTimeout)?clearTimeout:void 0}),applyProps:it}}var O,Ye;const gt=D=>"colorSpace"in D||"outputColorSpace"in D,Ot=()=>{var D;return(D=Qt.ColorManagement)!=null?D:null},Nt=D=>D&&D.isOrthographicCamera,Ve=D=>D&&D.hasOwnProperty("current"),ke=typeof window!="undefined"&&((O=window.document)!=null&&O.createElement||((Ye=window.navigator)==null?void 0:Ye.product)==="ReactNative")?x.useLayoutEffect:x.useEffect;function dt(D){const j=x.useRef(D);return ke(()=>void(j.current=D),[D]),j}function Et({set:D}){return ke(()=>(D(new Promise(()=>null)),()=>D(!1)),[D]),null}class Z extends x.Component{constructor(...j){super(...j),this.state={error:!1}}componentDidCatch(j){this.props.set(j)}render(){return this.state.error?null:this.props.children}}Z.getDerivedStateFromError=()=>({error:!0});const ye="__default",ge=new Map,ve=D=>D&&!!D.memoized&&!!D.changes;function _e(D){var j;const m=typeof window!="undefined"?(j=window.devicePixelRatio)!=null?j:2:1;return Array.isArray(D)?Math.min(Math.max(D[0],m),D[1]):D}const we=D=>{var j;return(j=D.__r3f)==null?void 0:j.root.getState()},de={obj:D=>D===Object(D)&&!de.arr(D)&&typeof D!="function",fun:D=>typeof D=="function",str:D=>typeof D=="string",num:D=>typeof D=="number",boo:D=>typeof D=="boolean",und:D=>D===void 0,arr:D=>Array.isArray(D),equ(D,j,{arrays:m="shallow",objects:v="reference",strict:w=!0}={}){if(typeof D!=typeof j||!!D!=!!j)return!1;if(de.str(D)||de.num(D))return D===j;const S=de.obj(D);if(S&&v==="reference")return D===j;const z=de.arr(D);if(z&&m==="reference")return D===j;if((z||S)&&D===j)return!0;let ae;for(ae in D)if(!(ae in j))return!1;if(S&&m==="shallow"&&v==="shallow"){for(ae in w?j:D)if(!de.equ(D[ae],j[ae],{strict:w,objects:"reference"}))return!1}else for(ae in w?j:D)if(D[ae]!==j[ae])return!1;if(de.und(ae)){if(z&&D.length===0&&j.length===0||S&&Object.keys(D).length===0&&Object.keys(j).length===0)return!0;if(D!==j)return!1}return!0}};function Y(D){const j={nodes:{},materials:{}};return D&&D.traverse(m=>{m.name&&(j.nodes[m.name]=m),m.material&&!j.materials[m.material.name]&&(j.materials[m.material.name]=m.material)}),j}function te(D){D.dispose&&D.type!=="Scene"&&D.dispose();for(const j in D)j.dispose==null||j.dispose(),delete D[j]}function Oe(D,j){const m=D;return(j!=null&&j.primitive||!m.__r3f)&&(m.__r3f=sn({type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null},j)),D}function ee(D,j){let m=D;if(j.includes("-")){const v=j.split("-"),w=v.pop();return m=v.reduce((S,z)=>S[z],D),{target:m,key:w}}else return{target:m,key:j}}const Ae=/-\d+$/;function Te(D,j,m){if(de.str(m)){if(Ae.test(m)){const S=m.replace(Ae,""),{target:z,key:ae}=ee(D,S);Array.isArray(z[ae])||(z[ae]=[])}const{target:v,key:w}=ee(D,m);j.__r3f.previousAttach=v[w],v[w]=j}else j.__r3f.previousAttach=m(D,j)}function $e(D,j,m){var v,w;if(de.str(m)){const{target:S,key:z}=ee(D,m),ae=j.__r3f.previousAttach;ae===void 0?delete S[z]:S[z]=ae}else(v=j.__r3f)==null||v.previousAttach==null||v.previousAttach(D,j);(w=j.__r3f)==null||delete w.previousAttach}function Je(D,P,Fe={},X=!1){var W=P,{children:j,key:m,ref:v}=W,w=Lo(W,["children","key","ref"]);var Ge=Fe,{children:S,key:z,ref:ae}=Ge,F=Lo(Ge,["children","key","ref"]);var ut;const kt=(ut=D==null?void 0:D.__r3f)!=null?ut:{},Ht=Object.entries(w),ht=[];if(X){const ft=Object.keys(F);for(let Gt=0;Gt<ft.length;Gt++)w.hasOwnProperty(ft[Gt])||Ht.unshift([ft[Gt],ye+"remove"])}Ht.forEach(([ft,Gt])=>{var An;if((An=D.__r3f)!=null&&An.primitive&&ft==="object"||de.equ(Gt,F[ft]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(ft))return ht.push([ft,Gt,!0,[]]);let Rn=[];ft.includes("-")&&(Rn=ft.split("-")),ht.push([ft,Gt,!1,Rn]);for(const Gn in w){const Pn=w[Gn];Gn.startsWith(`${ft}-`)&&ht.push([Gn,Pn,!1,Gn.split("-")])}});const vt=sn({},w);return kt.memoizedProps&&kt.memoizedProps.args&&(vt.args=kt.memoizedProps.args),kt.memoizedProps&&kt.memoizedProps.attach&&(vt.attach=kt.memoizedProps.attach),{memoized:vt,changes:ht}}function it(D,j){var m,v,w;const S=(m=D.__r3f)!=null?m:{},z=S.root,ae=(v=z==null||z.getState==null?void 0:z.getState())!=null?v:{},{memoized:F,changes:X}=ve(j)?j:Je(D,j),P=S.eventCount;D.__r3f&&(D.__r3f.memoizedProps=F);for(let Fe=0;Fe<X.length;Fe++){let[Ge,ut,kt,Ht]=X[Fe];if(gt(D)){const Gt="srgb",An="srgb-linear";Ge==="encoding"?(Ge="colorSpace",ut=ut===3001?Gt:An):Ge==="outputEncoding"&&(Ge="outputColorSpace",ut=ut===3001?Gt:An)}let ht=D,vt=ht[Ge];if(Ht.length&&(vt=Ht.reduce((ft,Gt)=>ft[Gt],D),!(vt&&vt.set))){const[ft,...Gt]=Ht.reverse();ht=Gt.reverse().reduce((An,Rn)=>An[Rn],D),Ge=ft}if(ut===ye+"remove")if(ht.constructor){let ft=ge.get(ht.constructor);ft||(ft=new ht.constructor,ge.set(ht.constructor,ft)),ut=ft[Ge]}else ut=0;if(kt)ut?S.handlers[Ge]=ut:delete S.handlers[Ge],S.eventCount=Object.keys(S.handlers).length;else if(vt&&vt.set&&(vt.copy||vt instanceof L.Layers)){if(Array.isArray(ut))vt.fromArray?vt.fromArray(ut):vt.set(...ut);else if(vt.copy&&ut&&ut.constructor&&vt.constructor===ut.constructor)vt.copy(ut);else if(ut!==void 0){const ft=vt instanceof L.Color;!ft&&vt.setScalar?vt.setScalar(ut):vt instanceof L.Layers&&ut instanceof L.Layers?vt.mask=ut.mask:vt.set(ut),!Ot()&&!ae.linear&&ft&&vt.convertSRGBToLinear()}}else if(ht[Ge]=ut,ht[Ge]instanceof L.Texture&&ht[Ge].format===L.RGBAFormat&&ht[Ge].type===L.UnsignedByteType){const ft=ht[Ge];gt(ft)&&gt(ae.gl)?ft.colorSpace=ae.gl.outputColorSpace:ft.encoding=ae.gl.outputEncoding}tt(D)}if(S.parent&&ae.internal&&D.raycast&&P!==S.eventCount){const Fe=ae.internal.interaction.indexOf(D);Fe>-1&&ae.internal.interaction.splice(Fe,1),S.eventCount&&ae.internal.interaction.push(D)}return!(X.length===1&&X[0][0]==="onUpdate")&&X.length&&(w=D.__r3f)!=null&&w.parent&&St(D),D}function tt(D){var j,m;const v=(j=D.__r3f)==null||(m=j.root)==null||m.getState==null?void 0:m.getState();v&&v.internal.frames===0&&v.invalidate()}function St(D){D.onUpdate==null||D.onUpdate(D)}function ot(D,j){D.manual||(Nt(D)?(D.left=j.width/-2,D.right=j.width/2,D.top=j.height/2,D.bottom=j.height/-2):D.aspect=j.width/j.height,D.updateProjectionMatrix(),D.updateMatrixWorld())}function Rt(D){return(D.eventObject||D.object).uuid+"/"+D.index+D.instanceId}function Lt(){var D;const j=typeof self!="undefined"&&self||typeof window!="undefined"&&window;if(!j)return g.DefaultEventPriority;switch((D=j.event)==null?void 0:D.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return g.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return g.ContinuousEventPriority;default:return g.DefaultEventPriority}}function pt(D,j,m,v){const w=m.get(j);w&&(m.delete(j),m.size===0&&(D.delete(v),w.target.releasePointerCapture(v)))}function Xe(D,j){const{internal:m}=D.getState();m.interaction=m.interaction.filter(v=>v!==j),m.initialHits=m.initialHits.filter(v=>v!==j),m.hovered.forEach((v,w)=>{(v.eventObject===j||v.object===j)&&m.hovered.delete(w)}),m.capturedMap.forEach((v,w)=>{pt(m.capturedMap,j,v,w)})}function Be(D){function j(F){const{internal:X}=D.getState(),P=F.offsetX-X.initialClick[0],W=F.offsetY-X.initialClick[1];return Math.round(Math.sqrt(P*P+W*W))}function m(F){return F.filter(X=>["Move","Over","Enter","Out","Leave"].some(P=>{var W;return(W=X.__r3f)==null?void 0:W.handlers["onPointer"+P]}))}function v(F,X){const P=D.getState(),W=new Set,Fe=[],Ge=X?X(P.internal.interaction):P.internal.interaction;for(let ht=0;ht<Ge.length;ht++){const vt=we(Ge[ht]);vt&&(vt.raycaster.camera=void 0)}P.previousRoot||P.events.compute==null||P.events.compute(F,P);function ut(ht){const vt=we(ht);if(!vt||!vt.events.enabled||vt.raycaster.camera===null)return[];if(vt.raycaster.camera===void 0){var ft;vt.events.compute==null||vt.events.compute(F,vt,(ft=vt.previousRoot)==null?void 0:ft.getState()),vt.raycaster.camera===void 0&&(vt.raycaster.camera=null)}return vt.raycaster.camera?vt.raycaster.intersectObject(ht,!0):[]}let kt=Ge.flatMap(ut).sort((ht,vt)=>{const ft=we(ht.object),Gt=we(vt.object);return!ft||!Gt?ht.distance-vt.distance:Gt.events.priority-ft.events.priority||ht.distance-vt.distance}).filter(ht=>{const vt=Rt(ht);return W.has(vt)?!1:(W.add(vt),!0)});P.events.filter&&(kt=P.events.filter(kt,P));for(const ht of kt){let vt=ht.object;for(;vt;){var Ht;(Ht=vt.__r3f)!=null&&Ht.eventCount&&Fe.push(zr(sn({},ht),{eventObject:vt})),vt=vt.parent}}if("pointerId"in F&&P.internal.capturedMap.has(F.pointerId))for(let ht of P.internal.capturedMap.get(F.pointerId).values())W.has(Rt(ht.intersection))||Fe.push(ht.intersection);return Fe}function w(F,X,P,W){const Fe=D.getState();if(F.length){const Ge={stopped:!1};for(const ut of F){const kt=we(ut.object)||Fe,{raycaster:Ht,pointer:ht,camera:vt,internal:ft}=kt,Gt=new L.Vector3(ht.x,ht.y,0).unproject(vt),An=Qn=>{var cn,Zn;return(cn=(Zn=ft.capturedMap.get(Qn))==null?void 0:Zn.has(ut.eventObject))!=null?cn:!1},Rn=Qn=>{const cn={intersection:ut,target:X.target};ft.capturedMap.has(Qn)?ft.capturedMap.get(Qn).set(ut.eventObject,cn):ft.capturedMap.set(Qn,new Map([[ut.eventObject,cn]])),X.target.setPointerCapture(Qn)},Gn=Qn=>{const cn=ft.capturedMap.get(Qn);cn&&pt(ft.capturedMap,ut.eventObject,cn,Qn)};let Pn={};for(let Qn in X){let cn=X[Qn];typeof cn!="function"&&(Pn[Qn]=cn)}let kn=zr(sn(sn({},ut),Pn),{pointer:ht,intersections:F,stopped:Ge.stopped,delta:P,unprojectedPoint:Gt,ray:Ht.ray,camera:vt,stopPropagation(){const Qn="pointerId"in X&&ft.capturedMap.get(X.pointerId);if((!Qn||Qn.has(ut.eventObject))&&(kn.stopped=Ge.stopped=!0,ft.hovered.size&&Array.from(ft.hovered.values()).find(cn=>cn.eventObject===ut.eventObject))){const cn=F.slice(0,F.indexOf(ut));S([...cn,ut])}},target:{hasPointerCapture:An,setPointerCapture:Rn,releasePointerCapture:Gn},currentTarget:{hasPointerCapture:An,setPointerCapture:Rn,releasePointerCapture:Gn},nativeEvent:X});if(W(kn),Ge.stopped===!0)break}}return F}function S(F){const{internal:X}=D.getState();for(const P of X.hovered.values())if(!F.length||!F.find(W=>W.object===P.object&&W.index===P.index&&W.instanceId===P.instanceId)){const Fe=P.eventObject.__r3f,Ge=Fe==null?void 0:Fe.handlers;if(X.hovered.delete(Rt(P)),Fe!=null&&Fe.eventCount){const ut=zr(sn({},P),{intersections:F});Ge.onPointerOut==null||Ge.onPointerOut(ut),Ge.onPointerLeave==null||Ge.onPointerLeave(ut)}}}function z(F,X){for(let P=0;P<X.length;P++){const W=X[P].__r3f;W==null||W.handlers.onPointerMissed==null||W.handlers.onPointerMissed(F)}}function ae(F){switch(F){case"onPointerLeave":case"onPointerCancel":return()=>S([]);case"onLostPointerCapture":return X=>{const{internal:P}=D.getState();"pointerId"in X&&P.capturedMap.has(X.pointerId)&&requestAnimationFrame(()=>{P.capturedMap.has(X.pointerId)&&(P.capturedMap.delete(X.pointerId),S([]))})}}return function(P){const{onPointerMissed:W,internal:Fe}=D.getState();Fe.lastEvent.current=P;const Ge=F==="onPointerMove",ut=F==="onClick"||F==="onContextMenu"||F==="onDoubleClick",Ht=v(P,Ge?m:void 0),ht=ut?j(P):0;F==="onPointerDown"&&(Fe.initialClick=[P.offsetX,P.offsetY],Fe.initialHits=Ht.map(ft=>ft.eventObject)),ut&&!Ht.length&&ht<=2&&(z(P,Fe.interaction),W&&W(P)),Ge&&S(Ht);function vt(ft){const Gt=ft.eventObject,An=Gt.__r3f,Rn=An==null?void 0:An.handlers;if(An!=null&&An.eventCount)if(Ge){if(Rn.onPointerOver||Rn.onPointerEnter||Rn.onPointerOut||Rn.onPointerLeave){const Gn=Rt(ft),Pn=Fe.hovered.get(Gn);Pn?Pn.stopped&&ft.stopPropagation():(Fe.hovered.set(Gn,ft),Rn.onPointerOver==null||Rn.onPointerOver(ft),Rn.onPointerEnter==null||Rn.onPointerEnter(ft))}Rn.onPointerMove==null||Rn.onPointerMove(ft)}else{const Gn=Rn[F];Gn?(!ut||Fe.initialHits.includes(Gt))&&(z(P,Fe.interaction.filter(Pn=>!Fe.initialHits.includes(Pn))),Gn(ft)):ut&&Fe.initialHits.includes(Gt)&&z(P,Fe.interaction.filter(Pn=>!Fe.initialHits.includes(Pn)))}}w(Ht,P,ht,vt)}}return{handlePointer:ae}}const Ct=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],Wt=D=>!!(D!=null&&D.render),Xt=x.createContext(null),Yt=(D,j)=>{const m=(0,C.Z)((ae,F)=>{const X=new L.Vector3,P=new L.Vector3,W=new L.Vector3;function Fe(ht=F().camera,vt=P,ft=F().size){const{width:Gt,height:An,top:Rn,left:Gn}=ft,Pn=Gt/An;vt instanceof L.Vector3?W.copy(vt):W.set(...vt);const kn=ht.getWorldPosition(X).distanceTo(W);if(Nt(ht))return{width:Gt/ht.zoom,height:An/ht.zoom,top:Rn,left:Gn,factor:1,distance:kn,aspect:Pn};{const Qn=ht.fov*Math.PI/180,cn=2*Math.tan(Qn/2)*kn,Zn=cn*(Gt/An);return{width:Zn,height:cn,top:Rn,left:Gn,factor:Gt/Zn,distance:kn,aspect:Pn}}}let Ge;const ut=ht=>ae(vt=>({performance:zr(sn({},vt.performance),{current:ht})})),kt=new L.Vector2;return{set:ae,get:F,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(ht=1)=>D(F(),ht),advance:(ht,vt)=>j(ht,vt,F()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new L.Clock,pointer:kt,mouse:kt,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const ht=F();Ge&&clearTimeout(Ge),ht.performance.current!==ht.performance.min&&ut(ht.performance.min),Ge=setTimeout(()=>ut(F().performance.max),ht.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:Fe},setEvents:ht=>ae(vt=>zr(sn({},vt),{events:sn(sn({},vt.events),ht)})),setSize:(ht,vt,ft,Gt,An)=>{const Rn=F().camera,Gn={width:ht,height:vt,top:Gt||0,left:An||0,updateStyle:ft};ae(Pn=>({size:Gn,viewport:sn(sn({},Pn.viewport),Fe(Rn,P,Gn))}))},setDpr:ht=>ae(vt=>{const ft=_e(ht);return{viewport:zr(sn({},vt.viewport),{dpr:ft,initialDpr:vt.viewport.initialDpr||ft})}}),setFrameloop:(ht="always")=>{const vt=F().clock;vt.stop(),vt.elapsedTime=0,ht!=="never"&&(vt.start(),vt.elapsedTime=0),ae(()=>({frameloop:ht}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:x.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(ht,vt,ft)=>{const Gt=F().internal;return Gt.priority=Gt.priority+(vt>0?1:0),Gt.subscribers.push({ref:ht,priority:vt,store:ft}),Gt.subscribers=Gt.subscribers.sort((An,Rn)=>An.priority-Rn.priority),()=>{const An=F().internal;An!=null&&An.subscribers&&(An.priority=An.priority-(vt>0?1:0),An.subscribers=An.subscribers.filter(Rn=>Rn.ref!==ht))}}}}}),v=m.getState();let w=v.size,S=v.viewport.dpr,z=v.camera;return m.subscribe(()=>{const{camera:ae,size:F,viewport:X,gl:P,set:W}=m.getState();if(F!==w||X.dpr!==S){var Fe;w=F,S=X.dpr,ot(ae,F),P.setPixelRatio(X.dpr);const Ge=(Fe=F.updateStyle)!=null?Fe:typeof HTMLCanvasElement!="undefined"&&P.domElement instanceof HTMLCanvasElement;P.setSize(F.width,F.height,Ge)}ae!==z&&(z=ae,W(Ge=>({viewport:sn(sn({},Ge.viewport),Ge.viewport.getCurrentViewport(ae))})))}),m.subscribe(ae=>D(ae)),m};function wn(D,j){const m={callback:D};return j.add(m),()=>void j.delete(m)}let an,un=new Set,Tn=new Set,yt=new Set;const pe=D=>wn(D,un),Ce=D=>wn(D,Tn),Ne=D=>wn(D,yt);function Ze(D,j){if(D.size)for(const{callback:m}of D.values())m(j)}function et(D,j){switch(D){case"before":return Ze(un,j);case"after":return Ze(Tn,j);case"tail":return Ze(yt,j)}}let Ft,qt;function $n(D,j,m){let v=j.clock.getDelta();for(j.frameloop==="never"&&typeof D=="number"&&(v=D-j.clock.elapsedTime,j.clock.oldTime=j.clock.elapsedTime,j.clock.elapsedTime=D),Ft=j.internal.subscribers,an=0;an<Ft.length;an++)qt=Ft[an],qt.ref.current(qt.store.getState(),v,m);return!j.internal.priority&&j.gl.render&&j.gl.render(j.scene,j.camera),j.internal.frames=Math.max(0,j.internal.frames-1),j.frameloop==="always"?1:j.internal.frames}function dn(D){let j=!1,m,v,w;function S(F){v=requestAnimationFrame(S),j=!0,m=0,et("before",F);for(const P of D.values()){var X;w=P.store.getState(),w.internal.active&&(w.frameloop==="always"||w.internal.frames>0)&&!((X=w.gl.xr)!=null&&X.isPresenting)&&(m+=$n(F,w))}if(et("after",F),m===0)return et("tail",F),j=!1,cancelAnimationFrame(v)}function z(F,X=1){var P;if(!F)return D.forEach(W=>z(W.store.getState()),X);(P=F.gl.xr)!=null&&P.isPresenting||!F.internal.active||F.frameloop==="never"||(F.internal.frames=Math.min(60,F.internal.frames+X),j||(j=!0,requestAnimationFrame(S)))}function ae(F,X=!0,P,W){if(X&&et("before",F),P)$n(F,P,W);else for(const Fe of D.values())$n(F,Fe.store.getState());X&&et("after",F)}return{loop:S,invalidate:z,advance:ae}}function Me(D){const j=React.useRef(null);return ke(()=>void(j.current=D.current.__r3f),[D]),j}function Qe(){const D=x.useContext(Xt);if(!D)throw new Error("R3F: Hooks can only be used within the Canvas component!");return D}function Ke(D=m=>m,j){return Qe()(D,j)}function at(D,j=0){const m=Qe(),v=m.getState().internal.subscribe,w=dt(D);return ke(()=>v(w,j,m),[j,v,m]),null}function Bt(D){return React.useMemo(()=>Y(D),[D])}function En(D,j){return function(m,...v){const w=new m;return D&&D(w),Promise.all(v.map(S=>new Promise((z,ae)=>w.load(S,F=>{F.scene&&Object.assign(F,Y(F.scene)),z(F)},j,F=>ae(new Error(`Could not load ${S}: ${F.message})`))))))}}function ln(D,j,m,v){const w=Array.isArray(j)?j:[j],S=xe(En(m,v),[D,...w],{equal:de.equ});return Array.isArray(j)?S:S[0]}ln.preload=function(D,j,m){const v=Array.isArray(j)?j:[j];return Se(En(m),[D,...v])},ln.clear=function(D,j){const m=Array.isArray(j)?j:[j];return rt([D,...m])};const zt=new Map,{invalidate:me,advance:Ie}=dn(zt),{reconciler:ct,applyProps:It}=Pt(zt,Lt),en={objects:"shallow",strict:!1},bn=(D,j)=>{const m=typeof D=="function"?D(j):D;return Wt(m)?m:new L.WebGLRenderer(sn({powerPreference:"high-performance",canvas:j,antialias:!0,alpha:!0},D))};function Vn(D,j){if(j)return j;if(typeof HTMLCanvasElement!="undefined"&&D instanceof HTMLCanvasElement&&D.parentElement){const{width:m,height:v,top:w,left:S}=D.parentElement.getBoundingClientRect();return{width:m,height:v,top:w,left:S}}else if(typeof OffscreenCanvas!="undefined"&&D instanceof OffscreenCanvas)return{width:D.width,height:D.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function tr(D){const j=zt.get(D),m=j==null?void 0:j.fiber,v=j==null?void 0:j.store;j&&console.warn("R3F.createRoot should only be called once!");const w=typeof reportError=="function"?reportError:console.error,S=v||Yt(me,Ie),z=m||ct.createContainer(S,g.ConcurrentRoot,null,!1,null,"",w,null);j||zt.set(D,{fiber:z,store:S});let ae,F=!1,X;return{configure(P={}){let{gl:W,size:Fe,scene:Ge,events:ut,onCreated:kt,shadows:Ht=!1,linear:ht=!1,flat:vt=!1,legacy:ft=!1,orthographic:Gt=!1,frameloop:An="always",dpr:Rn=[1,2],performance:Gn,raycaster:Pn,camera:kn,onPointerMissed:Qn}=P,cn=S.getState(),Zn=cn.gl;cn.gl||cn.set({gl:Zn=bn(W,D)});let cr=cn.raycaster;cr||cn.set({raycaster:cr=new L.Raycaster});const Or=Pn||{},{params:Er}=Or,Kr=Lo(Or,["params"]);if(de.equ(Kr,cr,en)||It(cr,sn({},Kr)),de.equ(Er,cr.params,en)||It(cr,{params:sn(sn({},cr.params),Er)}),!cn.camera||cn.camera===X&&!de.equ(X,kn,en)){X=kn;const Gr=kn instanceof L.Camera,Di=Gr?kn:Gt?new L.OrthographicCamera(0,0,0,0,.1,1e3):new L.PerspectiveCamera(75,0,.1,1e3);Gr||(Di.position.z=5,kn&&It(Di,kn),!cn.camera&&!(kn!=null&&kn.rotation)&&Di.lookAt(0,0,0)),cn.set({camera:Di})}if(!cn.scene){let Gr;Ge instanceof L.Scene?Gr=Ge:(Gr=new L.Scene,Ge&&It(Gr,Ge)),cn.set({scene:Oe(Gr)})}if(!cn.xr){const Gr=(ci,$o)=>{const To=S.getState();To.frameloop!=="never"&&Ie(ci,!0,To,$o)},Di=()=>{const ci=S.getState();ci.gl.xr.enabled=ci.gl.xr.isPresenting,ci.gl.xr.setAnimationLoop(ci.gl.xr.isPresenting?Gr:null),ci.gl.xr.isPresenting||me(ci)},ro={connect(){const ci=S.getState().gl;ci.xr.addEventListener("sessionstart",Di),ci.xr.addEventListener("sessionend",Di)},disconnect(){const ci=S.getState().gl;ci.xr.removeEventListener("sessionstart",Di),ci.xr.removeEventListener("sessionend",Di)}};Zn.xr&&ro.connect(),cn.set({xr:ro})}if(Zn.shadowMap){const Gr=Zn.shadowMap.enabled,Di=Zn.shadowMap.type;if(Zn.shadowMap.enabled=!!Ht,de.boo(Ht))Zn.shadowMap.type=L.PCFSoftShadowMap;else if(de.str(Ht)){var bi;const ro={basic:L.BasicShadowMap,percentage:L.PCFShadowMap,soft:L.PCFSoftShadowMap,variance:L.VSMShadowMap};Zn.shadowMap.type=(bi=ro[Ht])!=null?bi:L.PCFSoftShadowMap}else de.obj(Ht)&&Object.assign(Zn.shadowMap,Ht);(Gr!==Zn.shadowMap.enabled||Di!==Zn.shadowMap.type)&&(Zn.shadowMap.needsUpdate=!0)}const li=Ot();li&&("enabled"in li?li.enabled=!ft:"legacyMode"in li&&(li.legacyMode=ft)),It(Zn,{outputEncoding:ht?3e3:3001,toneMapping:vt?L.NoToneMapping:L.ACESFilmicToneMapping}),cn.legacy!==ft&&cn.set(()=>({legacy:ft})),cn.linear!==ht&&cn.set(()=>({linear:ht})),cn.flat!==vt&&cn.set(()=>({flat:vt})),W&&!de.fun(W)&&!Wt(W)&&!de.equ(W,Zn,en)&&It(Zn,W),ut&&!cn.events.handlers&&cn.set({events:ut(S)});const Ii=Vn(D,Fe);return de.equ(Ii,cn.size,en)||cn.setSize(Ii.width,Ii.height,Ii.updateStyle,Ii.top,Ii.left),Rn&&cn.viewport.dpr!==_e(Rn)&&cn.setDpr(Rn),cn.frameloop!==An&&cn.setFrameloop(An),cn.onPointerMissed||cn.set({onPointerMissed:Qn}),Gn&&!de.equ(Gn,cn.performance,en)&&cn.set(Gr=>({performance:sn(sn({},Gr.performance),Gn)})),ae=kt,F=!0,this},render(P){return F||this.configure(),ct.updateContainer(x.createElement(Ar,{store:S,children:P,onCreated:ae,rootElement:D}),z,null,()=>{}),S},unmount(){ti(D)}}}function lr(D,j,m){console.warn("R3F.render is no longer supported in React 18. Use createRoot instead!");const v=tr(j);return v.configure(m),v.render(D)}function Ar({store:D,children:j,onCreated:m,rootElement:v}){return ke(()=>{const w=D.getState();w.set(S=>({internal:zr(sn({},S.internal),{active:!0})})),m&&m(w),D.getState().events.connected||w.events.connect==null||w.events.connect(v)},[]),x.createElement(Xt.Provider,{value:D},j)}function ti(D,j){const m=zt.get(D),v=m==null?void 0:m.fiber;if(v){const w=m==null?void 0:m.store.getState();w&&(w.internal.active=!1),ct.updateContainer(null,v,null,()=>{w&&setTimeout(()=>{try{var S,z,ae,F;w.events.disconnect==null||w.events.disconnect(),(S=w.gl)==null||(z=S.renderLists)==null||z.dispose==null||z.dispose(),(ae=w.gl)==null||ae.forceContextLoss==null||ae.forceContextLoss(),(F=w.gl)!=null&&F.xr&&w.xr.disconnect(),te(w),zt.delete(D),j&&j(D)}catch(X){}},500)})}}function ai(D,j,m){return x.createElement(Pr,{key:j.uuid,children:D,container:j,state:m})}function Pr({state:D={},children:j,container:m}){const W=D,{events:v,size:w}=W,S=Lo(W,["events","size"]),z=Qe(),[ae]=x.useState(()=>new L.Raycaster),[F]=x.useState(()=>new L.Vector2),X=x.useCallback((Fe,Ge)=>{const ut=sn({},Fe);Object.keys(Fe).forEach(Ht=>{(Ct.includes(Ht)||Fe[Ht]!==Ge[Ht]&&Ge[Ht])&&delete ut[Ht]});let kt;if(Ge&&w){const Ht=Ge.camera;kt=Fe.viewport.getCurrentViewport(Ht,new L.Vector3,w),Ht!==Fe.camera&&ot(Ht,w)}return sn(zr(sn({},ut),{scene:m,raycaster:ae,pointer:F,mouse:F,previousRoot:z,events:sn(sn(sn({},Fe.events),Ge==null?void 0:Ge.events),v),size:sn(sn({},Fe.size),w),viewport:sn(sn({},Fe.viewport),kt)}),S)},[D]),[P]=x.useState(()=>{const Fe=z.getState();return(0,C.Z)((ut,kt)=>zr(sn(zr(sn({},Fe),{scene:m,raycaster:ae,pointer:F,mouse:F,previousRoot:z,events:sn(sn({},Fe.events),v),size:sn(sn({},Fe.size),w)}),S),{set:ut,get:kt,setEvents:Ht=>ut(ht=>zr(sn({},ht),{events:sn(sn({},ht.events),Ht)}))}))});return x.useEffect(()=>{const Fe=z.subscribe(Ge=>P.setState(ut=>X(Ge,ut)));return()=>{Fe(),P.destroy()}},[]),x.useEffect(()=>{P.setState(Fe=>X(z.getState(),Fe))},[X]),x.createElement(x.Fragment,null,ct.createPortal(x.createElement(Xt.Provider,{value:P},j),P,null))}ct.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:x.version});const mi=x.unstable_act},52038:function(tn,qe,J){"use strict";J.d(qe,{Xz:function(){return we}});var L=J(63905),x=J(72564),g=J(50959),C=J(48119),T=J(94440),$=Object.defineProperty,H=Object.defineProperties,K=Object.getOwnPropertyDescriptors,ce=Object.getOwnPropertySymbols,oe=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable,Se=(de,Y,te)=>Y in de?$(de,Y,{enumerable:!0,configurable:!0,writable:!0,value:te}):de[Y]=te,k=(de,Y)=>{for(var te in Y||(Y={}))oe.call(Y,te)&&Se(de,te,Y[te]);if(ce)for(var te of ce(Y))xe.call(Y,te)&&Se(de,te,Y[te]);return de},rt=(de,Y)=>H(de,K(Y));function lt(de,Y,te){if(!de)return;if(te(de)===!0)return de;let Oe=Y?de.return:de.child;for(;Oe;){const ee=lt(Oe,Y,te);if(ee)return ee;Oe=Y?null:Oe.sibling}}function Qt(de){try{return Object.defineProperties(de,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch(Y){return de}}const mt=Qt(g.createContext(null));class Pt extends g.Component{render(){return g.createElement(mt.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:O,ReactCurrentDispatcher:Ye}=g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function gt(){const de=g.useContext(mt);if(de===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const Y=g.useId();return g.useMemo(()=>{for(const Oe of[O==null?void 0:O.current,de,de==null?void 0:de.alternate]){if(!Oe)continue;const ee=lt(Oe,!1,Ae=>{let Te=Ae.memoizedState;for(;Te;){if(Te.memoizedState===Y)return!0;Te=Te.next}});if(ee)return ee}},[de,Y])}function Ot(){const de=gt(),Y=React.useMemo(()=>lt(de,!0,te=>{var Oe;return((Oe=te.stateNode)==null?void 0:Oe.containerInfo)!=null}),[de]);return Y==null?void 0:Y.stateNode.containerInfo}function Nt(de){const Y=gt(),te=React.useRef();return React.useLayoutEffect(()=>{var Oe;te.current=(Oe=lt(Y,!1,ee=>typeof ee.type=="string"&&(de===void 0||ee.type===de)))==null?void 0:Oe.stateNode},[Y]),te}function Ve(de){const Y=gt(),te=React.useRef();return React.useLayoutEffect(()=>{var Oe;te.current=(Oe=lt(Y,!0,ee=>typeof ee.type=="string"&&(de===void 0||ee.type===de)))==null?void 0:Oe.stateNode},[Y]),te}function ke(){var de,Y;const te=gt(),[Oe]=g.useState(()=>new Map);Oe.clear();let ee=te;for(;ee;){const Ae=(de=ee.type)==null?void 0:de._context;Ae&&Ae!==mt&&!Oe.has(Ae)&&Oe.set(Ae,(Y=Ye==null?void 0:Ye.current)==null?void 0:Y.readContext(Qt(Ae))),ee=ee.return}return Oe}function dt(){const de=ke();return g.useMemo(()=>Array.from(de.keys()).reduce((Y,te)=>Oe=>g.createElement(Y,null,g.createElement(te.Provider,rt(k({},Oe),{value:de.get(te)}))),Y=>g.createElement(Pt,k({},Y))),[de])}var Et=J(85259),Z=J(97427),ye=J(65297);const ge={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function ve(de){const{handlePointer:Y}=(0,L.c)(de);return{priority:1,enabled:!0,compute(te,Oe,ee){Oe.pointer.set(te.offsetX/Oe.size.width*2-1,-(te.offsetY/Oe.size.height)*2+1),Oe.raycaster.setFromCamera(Oe.pointer,Oe.camera)},connected:void 0,handlers:Object.keys(ge).reduce((te,Oe)=>zr(sn({},te),{[Oe]:Y(Oe)}),{}),update:()=>{var te;const{events:Oe,internal:ee}=de.getState();(te=ee.lastEvent)!=null&&te.current&&Oe.handlers&&Oe.handlers.onPointerMove(ee.lastEvent.current)},connect:te=>{var Oe;const{set:ee,events:Ae}=de.getState();Ae.disconnect==null||Ae.disconnect(),ee(Te=>({events:zr(sn({},Te.events),{connected:te})})),Object.entries((Oe=Ae.handlers)!=null?Oe:[]).forEach(([Te,$e])=>{const[Je,it]=ge[Te];te.addEventListener(Je,$e,{passive:it})})},disconnect:()=>{const{set:te,events:Oe}=de.getState();if(Oe.connected){var ee;Object.entries((ee=Oe.handlers)!=null?ee:[]).forEach(([Ae,Te])=>{if(Oe&&Oe.connected instanceof HTMLElement){const[$e]=ge[Ae];Oe.connected.removeEventListener($e,Te)}}),te(Ae=>({events:zr(sn({},Ae.events),{connected:void 0})}))}}}}const _e=g.forwardRef(function(an,wn){var un=an,{children:Y,fallback:te,resize:Oe,style:ee,gl:Ae,events:Te=ve,eventSource:$e,eventPrefix:Je,shadows:it,linear:tt,flat:St,legacy:ot,orthographic:Rt,frameloop:Lt,dpr:pt,performance:Xe,raycaster:Be,camera:Ct,onPointerMissed:Wt,onCreated:Xt}=un,Yt=Lo(un,["children","fallback","resize","style","gl","events","eventSource","eventPrefix","shadows","linear","flat","legacy","orthographic","frameloop","dpr","performance","raycaster","camera","onPointerMissed","onCreated"]);g.useMemo(()=>(0,L.e)(C),[]);const Tn=dt(),[yt,pe]=(0,T.Z)(sn({scroll:!0,debounce:{scroll:50,resize:0}},Oe)),Ce=g.useRef(null),Ne=g.useRef(null);g.useImperativeHandle(wn,()=>Ce.current);const Ze=(0,L.u)(Wt),[et,Ft]=g.useState(!1),[qt,$n]=g.useState(!1);if(et)throw et;if(qt)throw qt;const dn=g.useRef(null);(0,L.a)(()=>{const Qe=Ce.current;pe.width>0&&pe.height>0&&Qe&&(dn.current||(dn.current=(0,L.b)(Qe)),dn.current.configure({gl:Ae,events:Te,shadows:it,linear:tt,flat:St,legacy:ot,orthographic:Rt,frameloop:Lt,dpr:pt,performance:Xe,raycaster:Be,camera:Ct,size:pe,onPointerMissed:(...Ke)=>Ze.current==null?void 0:Ze.current(...Ke),onCreated:Ke=>{Ke.events.connect==null||Ke.events.connect($e?(0,L.i)($e)?$e.current:$e:Ne.current),Je&&Ke.setEvents({compute:(at,Bt)=>{const En=at[Je+"X"],ln=at[Je+"Y"];Bt.pointer.set(En/Bt.size.width*2-1,-(ln/Bt.size.height)*2+1),Bt.raycaster.setFromCamera(Bt.pointer,Bt.camera)}}),Xt==null||Xt(Ke)}}),dn.current.render(g.createElement(Tn,null,g.createElement(L.E,{set:$n},g.createElement(g.Suspense,{fallback:g.createElement(L.B,{set:Ft})},Y)))))}),g.useEffect(()=>{const Qe=Ce.current;if(Qe)return()=>(0,L.d)(Qe)},[]);const Me=$e?"none":"auto";return g.createElement("div",(0,x.Z)({ref:Ne,style:sn({position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Me},ee)},Yt),g.createElement("div",{ref:yt,style:{width:"100%",height:"100%"}},g.createElement("canvas",{ref:Ce,style:{display:"block"}},te)))}),we=g.forwardRef(function(Y,te){return g.createElement(Pt,null,g.createElement(_e,(0,x.Z)({},Y,{ref:te})))})},31048:function(tn,qe,J){"use strict";var L=J(45389),x=J(75188),g=J(43957),C=J(40846),T=J(11527),$=["children"];function H(ce,oe){var xe=Object.keys(ce);if(Object.getOwnPropertySymbols){var Se=Object.getOwnPropertySymbols(ce);oe&&(Se=Se.filter(function(k){return Object.getOwnPropertyDescriptor(ce,k).enumerable})),xe.push.apply(xe,Se)}return xe}function K(ce){for(var oe=1;oe<arguments.length;oe++){var xe=arguments[oe]!=null?arguments[oe]:{};oe%2?H(Object(xe),!0).forEach(function(Se){(0,L.Z)(ce,Se,xe[Se])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ce,Object.getOwnPropertyDescriptors(xe)):H(Object(xe)).forEach(function(Se){Object.defineProperty(ce,Se,Object.getOwnPropertyDescriptor(xe,Se))})}return ce}qe.Z=function(ce){var oe=ce.children,xe=(0,x.Z)(ce,$);return(0,T.jsx)(C.f,K(K({},xe),{},{children:(0,T.jsx)(g.Z,{children:oe})}))}},7798:function(tn,qe,J){"use strict";J.d(qe,{Z:function(){return oe}});var L=J(40513),x=J(50959),g=J(28062),C=J(18621),T=J(49937);function $(xe){function Se(k,rt){rt===void 0&&(rt={});var lt,Qt=rt.onError,mt=Qt===void 0?function(ke){console.error(ke)}:Qt;try{lt=xe()}catch(ke){mt(ke)}var Pt=function(ke){return rt!=null&&rt.serializer?rt==null?void 0:rt.serializer(ke):JSON.stringify(ke)},O=function(ke){return rt!=null&&rt.deserializer?rt==null?void 0:rt.deserializer(ke):JSON.parse(ke)};function Ye(){try{var ke=lt==null?void 0:lt.getItem(k);if(ke)return O(ke)}catch(dt){mt(dt)}return(0,T.mf)(rt==null?void 0:rt.defaultValue)?rt==null?void 0:rt.defaultValue():rt==null?void 0:rt.defaultValue}var gt=(0,L.CR)((0,x.useState)(function(){return Ye()}),2),Ot=gt[0],Nt=gt[1];(0,C.Z)(function(){Nt(Ye())},[k]);var Ve=function(ke){var dt=(0,T.mf)(ke)?ke(Ot):ke;if(Nt(dt),(0,T.G7)(dt))lt==null||lt.removeItem(k);else try{lt==null||lt.setItem(k,Pt(dt))}catch(Et){console.error(Et)}};return[Ot,(0,g.Z)(Ve)]}return Se}var H=!!(typeof window!="undefined"&&window.document&&window.document.createElement),K=H,ce=$(function(){return K?localStorage:void 0}),oe=ce},28062:function(tn,qe,J){"use strict";var L=J(50959),x=J(49937),g=J(70510);function C(T){g.Z&&((0,x.mf)(T)||console.error("useMemoizedFn expected parameter is a function, got ".concat(typeof T)));var $=(0,L.useRef)(T);$.current=(0,L.useMemo)(function(){return T},[T]);var H=(0,L.useRef)();return H.current||(H.current=function(){for(var K=[],ce=0;ce<arguments.length;ce++)K[ce]=arguments[ce];return $.current.apply(this,K)}),H.current}qe.Z=C},18621:function(tn,qe,J){"use strict";J.d(qe,{Z:function(){return C}});var L=J(50959),x=function(T){return function($,H){var K=(0,L.useRef)(!1);T(function(){return function(){K.current=!1}},[]),T(function(){if(!K.current)K.current=!0;else return $()},H)}},g=null,C=x(L.useEffect)},49937:function(tn,qe,J){"use strict";J.d(qe,{G7:function(){return $},mf:function(){return x}});var L=function(H){return H!==null&&typeof H=="object"},x=function(H){return typeof H=="function"},g=function(H){return typeof H=="string"},C=function(H){return typeof H=="boolean"},T=function(H){return typeof H=="number"},$=function(H){return typeof H=="undefined"}},70510:function(tn,qe){"use strict";var J=!1;qe.Z=J},45924:function(tn,qe,J){"use strict";J.r(qe),J.d(qe,{clsx:function(){return x}});function L(g){var C,T,$="";if(typeof g=="string"||typeof g=="number")$+=g;else if(typeof g=="object")if(Array.isArray(g))for(C=0;C<g.length;C++)g[C]&&(T=L(g[C]))&&($&&($+=" "),$+=T);else for(C in g)g[C]&&($&&($+=" "),$+=C);return $}function x(){for(var g,C,T=0,$="";T<arguments.length;)(g=arguments[T++])&&(C=L(g))&&($&&($+=" "),$+=C);return $}qe.default=x},31110:function(tn){function qe(J,L,x){var g,C,T,$,H;L==null&&(L=100);function K(){var oe=Date.now()-$;oe<L&&oe>=0?g=setTimeout(K,L-oe):(g=null,x||(H=J.apply(T,C),T=C=null))}var ce=function(){T=this,C=arguments,$=Date.now();var oe=x&&!g;return g||(g=setTimeout(K,L)),oe&&(H=J.apply(T,C),T=C=null),H};return ce.clear=function(){g&&(clearTimeout(g),g=null)},ce.flush=function(){g&&(H=J.apply(T,C),T=C=null,clearTimeout(g),g=null)},ce}qe.debounce=qe,tn.exports=qe},69978:function(tn){function qe(oe,xe){var Se=xe&&xe.cache?xe.cache:ce,k=xe&&xe.serializer?xe.serializer:H,rt=xe&&xe.strategy?xe.strategy:C;return rt(oe,{cache:Se,serializer:k})}function J(oe){return oe==null||typeof oe=="number"||typeof oe=="boolean"}function L(oe,xe,Se,k){var rt=J(k)?k:Se(k),lt=xe.get(rt);return typeof lt=="undefined"&&(lt=oe.call(this,k),xe.set(rt,lt)),lt}function x(oe,xe,Se){var k=Array.prototype.slice.call(arguments,3),rt=Se(k),lt=xe.get(rt);return typeof lt=="undefined"&&(lt=oe.apply(this,k),xe.set(rt,lt)),lt}function g(oe,xe,Se,k,rt){return Se.bind(xe,oe,k,rt)}function C(oe,xe){var Se=oe.length===1?L:x;return g(oe,this,Se,xe.cache.create(),xe.serializer)}function T(oe,xe){var Se=x;return g(oe,this,Se,xe.cache.create(),xe.serializer)}function $(oe,xe){var Se=L;return g(oe,this,Se,xe.cache.create(),xe.serializer)}function H(){return JSON.stringify(arguments)}function K(){this.cache=Object.create(null)}K.prototype.has=function(oe){return oe in this.cache},K.prototype.get=function(oe){return this.cache[oe]},K.prototype.set=function(oe,xe){this.cache[oe]=xe};var ce={create:function(){return new K}};tn.exports=qe,tn.exports.strategies={variadic:T,monadic:$}},5899:function(tn,qe,J){tn=J.nmd(tn);var L=200,x="__lodash_hash_undefined__",g=1,C=2,T=9007199254740991,$="[object Arguments]",H="[object Array]",K="[object AsyncFunction]",ce="[object Boolean]",oe="[object Date]",xe="[object Error]",Se="[object Function]",k="[object GeneratorFunction]",rt="[object Map]",lt="[object Number]",Qt="[object Null]",mt="[object Object]",Pt="[object Promise]",O="[object Proxy]",Ye="[object RegExp]",gt="[object Set]",Ot="[object String]",Nt="[object Symbol]",Ve="[object Undefined]",ke="[object WeakMap]",dt="[object ArrayBuffer]",Et="[object DataView]",Z="[object Float32Array]",ye="[object Float64Array]",ge="[object Int8Array]",ve="[object Int16Array]",_e="[object Int32Array]",we="[object Uint8Array]",de="[object Uint8ClampedArray]",Y="[object Uint16Array]",te="[object Uint32Array]",Oe=/[\\^$.*+?()[\]{}|]/g,ee=/^\[object .+?Constructor\]$/,Ae=/^(?:0|[1-9]\d*)$/,Te={};Te[Z]=Te[ye]=Te[ge]=Te[ve]=Te[_e]=Te[we]=Te[de]=Te[Y]=Te[te]=!0,Te[$]=Te[H]=Te[dt]=Te[ce]=Te[Et]=Te[oe]=Te[xe]=Te[Se]=Te[rt]=Te[lt]=Te[mt]=Te[Ye]=Te[gt]=Te[Ot]=Te[ke]=!1;var $e=typeof J.g=="object"&&J.g&&J.g.Object===Object&&J.g,Je=typeof self=="object"&&self&&self.Object===Object&&self,it=$e||Je||Function("return this")(),tt=qe&&!qe.nodeType&&qe,St=tt&&!0&&tn&&!tn.nodeType&&tn,ot=St&&St.exports===tt,Rt=ot&&$e.process,Lt=function(){try{return Rt&&Rt.binding&&Rt.binding("util")}catch(G){}}(),pt=Lt&&Lt.isTypedArray;function Xe(G,be){for(var I=-1,ie=G==null?0:G.length,We=0,xt=[];++I<ie;){var Mn=G[I];be(Mn,I,G)&&(xt[We++]=Mn)}return xt}function Be(G,be){for(var I=-1,ie=be.length,We=G.length;++I<ie;)G[We+I]=be[I];return G}function Ct(G,be){for(var I=-1,ie=G==null?0:G.length;++I<ie;)if(be(G[I],I,G))return!0;return!1}function Wt(G,be){for(var I=-1,ie=Array(G);++I<G;)ie[I]=be(I);return ie}function Xt(G){return function(be){return G(be)}}function Yt(G,be){return G.has(be)}function wn(G,be){return G==null?void 0:G[be]}function an(G){var be=-1,I=Array(G.size);return G.forEach(function(ie,We){I[++be]=[We,ie]}),I}function un(G,be){return function(I){return G(be(I))}}function Tn(G){var be=-1,I=Array(G.size);return G.forEach(function(ie){I[++be]=ie}),I}var yt=Array.prototype,pe=Function.prototype,Ce=Object.prototype,Ne=it["__core-js_shared__"],Ze=pe.toString,et=Ce.hasOwnProperty,Ft=function(){var G=/[^.]+$/.exec(Ne&&Ne.keys&&Ne.keys.IE_PROTO||"");return G?"Symbol(src)_1."+G:""}(),qt=Ce.toString,$n=RegExp("^"+Ze.call(et).replace(Oe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),dn=ot?it.Buffer:void 0,Me=it.Symbol,Qe=it.Uint8Array,Ke=Ce.propertyIsEnumerable,at=yt.splice,Bt=Me?Me.toStringTag:void 0,En=Object.getOwnPropertySymbols,ln=dn?dn.isBuffer:void 0,zt=un(Object.keys,Object),me=ci(it,"DataView"),Ie=ci(it,"Map"),ct=ci(it,"Promise"),It=ci(it,"Set"),en=ci(it,"WeakMap"),bn=ci(Object,"create"),Vn=Ao(me),tr=Ao(Ie),lr=Ao(ct),Ar=Ao(It),ti=Ao(en),ai=Me?Me.prototype:void 0,Pr=ai?ai.valueOf:void 0;function mi(G){var be=-1,I=G==null?0:G.length;for(this.clear();++be<I;){var ie=G[be];this.set(ie[0],ie[1])}}function D(){this.__data__=bn?bn(null):{},this.size=0}function j(G){var be=this.has(G)&&delete this.__data__[G];return this.size-=be?1:0,be}function m(G){var be=this.__data__;if(bn){var I=be[G];return I===x?void 0:I}return et.call(be,G)?be[G]:void 0}function v(G){var be=this.__data__;return bn?be[G]!==void 0:et.call(be,G)}function w(G,be){var I=this.__data__;return this.size+=this.has(G)?0:1,I[G]=bn&&be===void 0?x:be,this}mi.prototype.clear=D,mi.prototype.delete=j,mi.prototype.get=m,mi.prototype.has=v,mi.prototype.set=w;function S(G){var be=-1,I=G==null?0:G.length;for(this.clear();++be<I;){var ie=G[be];this.set(ie[0],ie[1])}}function z(){this.__data__=[],this.size=0}function ae(G){var be=this.__data__,I=cn(be,G);if(I<0)return!1;var ie=be.length-1;return I==ie?be.pop():at.call(be,I,1),--this.size,!0}function F(G){var be=this.__data__,I=cn(be,G);return I<0?void 0:be[I][1]}function X(G){return cn(this.__data__,G)>-1}function P(G,be){var I=this.__data__,ie=cn(I,G);return ie<0?(++this.size,I.push([G,be])):I[ie][1]=be,this}S.prototype.clear=z,S.prototype.delete=ae,S.prototype.get=F,S.prototype.has=X,S.prototype.set=P;function W(G){var be=-1,I=G==null?0:G.length;for(this.clear();++be<I;){var ie=G[be];this.set(ie[0],ie[1])}}function Fe(){this.size=0,this.__data__={hash:new mi,map:new(Ie||S),string:new mi}}function Ge(G){var be=ro(this,G).delete(G);return this.size-=be?1:0,be}function ut(G){return ro(this,G).get(G)}function kt(G){return ro(this,G).has(G)}function Ht(G,be){var I=ro(this,G),ie=I.size;return I.set(G,be),this.size+=I.size==ie?0:1,this}W.prototype.clear=Fe,W.prototype.delete=Ge,W.prototype.get=ut,W.prototype.has=kt,W.prototype.set=Ht;function ht(G){var be=-1,I=G==null?0:G.length;for(this.__data__=new W;++be<I;)this.add(G[be])}function vt(G){return this.__data__.set(G,x),this}function ft(G){return this.__data__.has(G)}ht.prototype.add=ht.prototype.push=vt,ht.prototype.has=ft;function Gt(G){var be=this.__data__=new S(G);this.size=be.size}function An(){this.__data__=new S,this.size=0}function Rn(G){var be=this.__data__,I=be.delete(G);return this.size=be.size,I}function Gn(G){return this.__data__.get(G)}function Pn(G){return this.__data__.has(G)}function kn(G,be){var I=this.__data__;if(I instanceof S){var ie=I.__data__;if(!Ie||ie.length<L-1)return ie.push([G,be]),this.size=++I.size,this;I=this.__data__=new W(ie)}return I.set(G,be),this.size=I.size,this}Gt.prototype.clear=An,Gt.prototype.delete=Rn,Gt.prototype.get=Gn,Gt.prototype.has=Pn,Gt.prototype.set=kn;function Qn(G,be){var I=us(G),ie=!I&&Br(G),We=!I&&!ie&&Sr(G),xt=!I&&!ie&&!We&&Pe(G),Mn=I||ie||We||xt,In=Mn?Wt(G.length,String):[],Xn=In.length;for(var yn in G)(be||et.call(G,yn))&&!(Mn&&(yn=="length"||We&&(yn=="offset"||yn=="parent")||xt&&(yn=="buffer"||yn=="byteLength"||yn=="byteOffset")||Us(yn,Xn)))&&In.push(yn);return In}function cn(G,be){for(var I=G.length;I--;)if(es(G[I][0],be))return I;return-1}function Zn(G,be,I){var ie=be(G);return us(G)?ie:Be(ie,I(G))}function cr(G){return G==null?G===void 0?Ve:Qt:Bt&&Bt in Object(G)?$o(G):to(G)}function Er(G){return Q(G)&&cr(G)==$}function Kr(G,be,I,ie,We){return G===be?!0:G==null||be==null||!Q(G)&&!Q(be)?G!==G&&be!==be:bi(G,be,I,ie,Kr,We)}function bi(G,be,I,ie,We,xt){var Mn=us(G),In=us(be),Xn=Mn?H:mo(G),yn=In?H:mo(be);Xn=Xn==$?mt:Xn,yn=yn==$?mt:yn;var Yn=Xn==mt,vr=yn==mt,ir=Xn==yn;if(ir&&Sr(G)){if(!Sr(be))return!1;Mn=!0,Yn=!1}if(ir&&!Yn)return xt||(xt=new Gt),Mn||Pe(G)?Ii(G,be,I,ie,We,xt):Or(G,be,Xn,I,ie,We,xt);if(!(I&g)){var yr=Yn&&et.call(G,"__wrapped__"),ri=vr&&et.call(be,"__wrapped__");if(yr||ri){var Wr=yr?G.value():G,ii=ri?be.value():be;return xt||(xt=new Gt),We(Wr,ii,I,ie,xt)}}return ir?(xt||(xt=new Gt),Gr(G,be,I,ie,We,xt)):!1}function li(G){if(!U(G)||Js(G))return!1;var be=jo(G)?$n:ee;return be.test(Ao(G))}function fi(G){return Q(G)&&Hi(G.length)&&!!Te[cr(G)]}function Ci(G){if(!Is(G))return zt(G);var be=[];for(var I in Object(G))et.call(G,I)&&I!="constructor"&&be.push(I);return be}function Ii(G,be,I,ie,We,xt){var Mn=I&g,In=G.length,Xn=be.length;if(In!=Xn&&!(Mn&&Xn>In))return!1;var yn=xt.get(G);if(yn&&xt.get(be))return yn==be;var Yn=-1,vr=!0,ir=I&C?new ht:void 0;for(xt.set(G,be),xt.set(be,G);++Yn<In;){var yr=G[Yn],ri=be[Yn];if(ie)var Wr=Mn?ie(ri,yr,Yn,be,G,xt):ie(yr,ri,Yn,G,be,xt);if(Wr!==void 0){if(Wr)continue;vr=!1;break}if(ir){if(!Ct(be,function(ii,Xr){if(!Yt(ir,Xr)&&(yr===ii||We(yr,ii,I,ie,xt)))return ir.push(Xr)})){vr=!1;break}}else if(!(yr===ri||We(yr,ri,I,ie,xt))){vr=!1;break}}return xt.delete(G),xt.delete(be),vr}function Or(G,be,I,ie,We,xt,Mn){switch(I){case Et:if(G.byteLength!=be.byteLength||G.byteOffset!=be.byteOffset)return!1;G=G.buffer,be=be.buffer;case dt:return!(G.byteLength!=be.byteLength||!xt(new Qe(G),new Qe(be)));case ce:case oe:case lt:return es(+G,+be);case xe:return G.name==be.name&&G.message==be.message;case Ye:case Ot:return G==be+"";case rt:var In=an;case gt:var Xn=ie&g;if(In||(In=Tn),G.size!=be.size&&!Xn)return!1;var yn=Mn.get(G);if(yn)return yn==be;ie|=C,Mn.set(G,be);var Yn=Ii(In(G),In(be),ie,We,xt,Mn);return Mn.delete(G),Yn;case Nt:if(Pr)return Pr.call(G)==Pr.call(be)}return!1}function Gr(G,be,I,ie,We,xt){var Mn=I&g,In=Di(G),Xn=In.length,yn=Di(be),Yn=yn.length;if(Xn!=Yn&&!Mn)return!1;for(var vr=Xn;vr--;){var ir=In[vr];if(!(Mn?ir in be:et.call(be,ir)))return!1}var yr=xt.get(G);if(yr&&xt.get(be))return yr==be;var ri=!0;xt.set(G,be),xt.set(be,G);for(var Wr=Mn;++vr<Xn;){ir=In[vr];var ii=G[ir],Xr=be[ir];if(ie)var hi=Mn?ie(Xr,ii,ir,be,G,xt):ie(ii,Xr,ir,G,be,xt);if(!(hi===void 0?ii===Xr||We(ii,Xr,I,ie,xt):hi)){ri=!1;break}Wr||(Wr=ir=="constructor")}if(ri&&!Wr){var Mi=G.constructor,Ni=be.constructor;Mi!=Ni&&"constructor"in G&&"constructor"in be&&!(typeof Mi=="function"&&Mi instanceof Mi&&typeof Ni=="function"&&Ni instanceof Ni)&&(ri=!1)}return xt.delete(G),xt.delete(be),ri}function Di(G){return Zn(G,st,To)}function ro(G,be){var I=G.__data__;return ma(be)?I[typeof be=="string"?"string":"hash"]:I.map}function ci(G,be){var I=wn(G,be);return li(I)?I:void 0}function $o(G){var be=et.call(G,Bt),I=G[Bt];try{G[Bt]=void 0;var ie=!0}catch(xt){}var We=qt.call(G);return ie&&(be?G[Bt]=I:delete G[Bt]),We}var To=En?function(G){return G==null?[]:(G=Object(G),Xe(En(G),function(be){return Ke.call(G,be)}))}:Dt,mo=cr;(me&&mo(new me(new ArrayBuffer(1)))!=Et||Ie&&mo(new Ie)!=rt||ct&&mo(ct.resolve())!=Pt||It&&mo(new It)!=gt||en&&mo(new en)!=ke)&&(mo=function(G){var be=cr(G),I=be==mt?G.constructor:void 0,ie=I?Ao(I):"";if(ie)switch(ie){case Vn:return Et;case tr:return rt;case lr:return Pt;case Ar:return gt;case ti:return ke}return be});function Us(G,be){return be=be==null?T:be,!!be&&(typeof G=="number"||Ae.test(G))&&G>-1&&G%1==0&&G<be}function ma(G){var be=typeof G;return be=="string"||be=="number"||be=="symbol"||be=="boolean"?G!=="__proto__":G===null}function Js(G){return!!Ft&&Ft in G}function Is(G){var be=G&&G.constructor,I=typeof be=="function"&&be.prototype||Ce;return G===I}function to(G){return qt.call(G)}function Ao(G){if(G!=null){try{return Ze.call(G)}catch(be){}try{return G+""}catch(be){}}return""}function es(G,be){return G===be||G!==G&&be!==be}var Br=Er(function(){return arguments}())?Er:function(G){return Q(G)&&et.call(G,"callee")&&!Ke.call(G,"callee")},us=Array.isArray;function Po(G){return G!=null&&Hi(G.length)&&!jo(G)}var Sr=ln||Tt;function go(G,be){return Kr(G,be)}function jo(G){if(!U(G))return!1;var be=cr(G);return be==Se||be==k||be==K||be==O}function Hi(G){return typeof G=="number"&&G>-1&&G%1==0&&G<=T}function U(G){var be=typeof G;return G!=null&&(be=="object"||be=="function")}function Q(G){return G!=null&&typeof G=="object"}var Pe=pt?Xt(pt):fi;function st(G){return Po(G)?Qn(G):Ci(G)}function Dt(){return[]}function Tt(){return!1}tn.exports=go},72266:function(tn,qe,J){tn=J.nmd(tn);var L=200,x="__lodash_hash_undefined__",g=800,C=16,T=9007199254740991,$="[object Arguments]",H="[object Array]",K="[object AsyncFunction]",ce="[object Boolean]",oe="[object Date]",xe="[object Error]",Se="[object Function]",k="[object GeneratorFunction]",rt="[object Map]",lt="[object Number]",Qt="[object Null]",mt="[object Object]",Pt="[object Proxy]",O="[object RegExp]",Ye="[object Set]",gt="[object String]",Ot="[object Undefined]",Nt="[object WeakMap]",Ve="[object ArrayBuffer]",ke="[object DataView]",dt="[object Float32Array]",Et="[object Float64Array]",Z="[object Int8Array]",ye="[object Int16Array]",ge="[object Int32Array]",ve="[object Uint8Array]",_e="[object Uint8ClampedArray]",we="[object Uint16Array]",de="[object Uint32Array]",Y=/[\\^$.*+?()[\]{}|]/g,te=/^\[object .+?Constructor\]$/,Oe=/^(?:0|[1-9]\d*)$/,ee={};ee[dt]=ee[Et]=ee[Z]=ee[ye]=ee[ge]=ee[ve]=ee[_e]=ee[we]=ee[de]=!0,ee[$]=ee[H]=ee[Ve]=ee[ce]=ee[ke]=ee[oe]=ee[xe]=ee[Se]=ee[rt]=ee[lt]=ee[mt]=ee[O]=ee[Ye]=ee[gt]=ee[Nt]=!1;var Ae=typeof J.g=="object"&&J.g&&J.g.Object===Object&&J.g,Te=typeof self=="object"&&self&&self.Object===Object&&self,$e=Ae||Te||Function("return this")(),Je=qe&&!qe.nodeType&&qe,it=Je&&!0&&tn&&!tn.nodeType&&tn,tt=it&&it.exports===Je,St=tt&&Ae.process,ot=function(){try{var I=it&&it.require&&it.require("util").types;return I||St&&St.binding&&St.binding("util")}catch(ie){}}(),Rt=ot&&ot.isTypedArray;function Lt(I,ie,We){switch(We.length){case 0:return I.call(ie);case 1:return I.call(ie,We[0]);case 2:return I.call(ie,We[0],We[1]);case 3:return I.call(ie,We[0],We[1],We[2])}return I.apply(ie,We)}function pt(I,ie){for(var We=-1,xt=Array(I);++We<I;)xt[We]=ie(We);return xt}function Xe(I){return function(ie){return I(ie)}}function Be(I,ie){return I==null?void 0:I[ie]}function Ct(I,ie){return function(We){return I(ie(We))}}var Wt=Array.prototype,Xt=Function.prototype,Yt=Object.prototype,wn=$e["__core-js_shared__"],an=Xt.toString,un=Yt.hasOwnProperty,Tn=function(){var I=/[^.]+$/.exec(wn&&wn.keys&&wn.keys.IE_PROTO||"");return I?"Symbol(src)_1."+I:""}(),yt=Yt.toString,pe=an.call(Object),Ce=RegExp("^"+an.call(un).replace(Y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ne=tt?$e.Buffer:void 0,Ze=$e.Symbol,et=$e.Uint8Array,Ft=Ne?Ne.allocUnsafe:void 0,qt=Ct(Object.getPrototypeOf,Object),$n=Object.create,dn=Yt.propertyIsEnumerable,Me=Wt.splice,Qe=Ze?Ze.toStringTag:void 0,Ke=function(){try{var I=fi(Object,"defineProperty");return I({},"",{}),I}catch(ie){}}(),at=Ne?Ne.isBuffer:void 0,Bt=Math.max,En=Date.now,ln=fi($e,"Map"),zt=fi(Object,"create"),me=function(){function I(){}return function(ie){if(!jo(ie))return{};if($n)return $n(ie);I.prototype=ie;var We=new I;return I.prototype=void 0,We}}();function Ie(I){var ie=-1,We=I==null?0:I.length;for(this.clear();++ie<We;){var xt=I[ie];this.set(xt[0],xt[1])}}function ct(){this.__data__=zt?zt(null):{},this.size=0}function It(I){var ie=this.has(I)&&delete this.__data__[I];return this.size-=ie?1:0,ie}function en(I){var ie=this.__data__;if(zt){var We=ie[I];return We===x?void 0:We}return un.call(ie,I)?ie[I]:void 0}function bn(I){var ie=this.__data__;return zt?ie[I]!==void 0:un.call(ie,I)}function Vn(I,ie){var We=this.__data__;return this.size+=this.has(I)?0:1,We[I]=zt&&ie===void 0?x:ie,this}Ie.prototype.clear=ct,Ie.prototype.delete=It,Ie.prototype.get=en,Ie.prototype.has=bn,Ie.prototype.set=Vn;function tr(I){var ie=-1,We=I==null?0:I.length;for(this.clear();++ie<We;){var xt=I[ie];this.set(xt[0],xt[1])}}function lr(){this.__data__=[],this.size=0}function Ar(I){var ie=this.__data__,We=ut(ie,I);if(We<0)return!1;var xt=ie.length-1;return We==xt?ie.pop():Me.call(ie,We,1),--this.size,!0}function ti(I){var ie=this.__data__,We=ut(ie,I);return We<0?void 0:ie[We][1]}function ai(I){return ut(this.__data__,I)>-1}function Pr(I,ie){var We=this.__data__,xt=ut(We,I);return xt<0?(++this.size,We.push([I,ie])):We[xt][1]=ie,this}tr.prototype.clear=lr,tr.prototype.delete=Ar,tr.prototype.get=ti,tr.prototype.has=ai,tr.prototype.set=Pr;function mi(I){var ie=-1,We=I==null?0:I.length;for(this.clear();++ie<We;){var xt=I[ie];this.set(xt[0],xt[1])}}function D(){this.size=0,this.__data__={hash:new Ie,map:new(ln||tr),string:new Ie}}function j(I){var ie=li(this,I).delete(I);return this.size-=ie?1:0,ie}function m(I){return li(this,I).get(I)}function v(I){return li(this,I).has(I)}function w(I,ie){var We=li(this,I),xt=We.size;return We.set(I,ie),this.size+=We.size==xt?0:1,this}mi.prototype.clear=D,mi.prototype.delete=j,mi.prototype.get=m,mi.prototype.has=v,mi.prototype.set=w;function S(I){var ie=this.__data__=new tr(I);this.size=ie.size}function z(){this.__data__=new tr,this.size=0}function ae(I){var ie=this.__data__,We=ie.delete(I);return this.size=ie.size,We}function F(I){return this.__data__.get(I)}function X(I){return this.__data__.has(I)}function P(I,ie){var We=this.__data__;if(We instanceof tr){var xt=We.__data__;if(!ln||xt.length<L-1)return xt.push([I,ie]),this.size=++We.size,this;We=this.__data__=new mi(xt)}return We.set(I,ie),this.size=We.size,this}S.prototype.clear=z,S.prototype.delete=ae,S.prototype.get=F,S.prototype.has=X,S.prototype.set=P;function W(I,ie){var We=es(I),xt=!We&&Ao(I),Mn=!We&&!xt&&Po(I),In=!We&&!xt&&!Mn&&Q(I),Xn=We||xt||Mn||In,yn=Xn?pt(I.length,String):[],Yn=yn.length;for(var vr in I)(ie||un.call(I,vr))&&!(Xn&&(vr=="length"||Mn&&(vr=="offset"||vr=="parent")||In&&(vr=="buffer"||vr=="byteLength"||vr=="byteOffset")||Or(vr,Yn)))&&yn.push(vr);return yn}function Fe(I,ie,We){(We!==void 0&&!to(I[ie],We)||We===void 0&&!(ie in I))&&kt(I,ie,We)}function Ge(I,ie,We){var xt=I[ie];(!(un.call(I,ie)&&to(xt,We))||We===void 0&&!(ie in I))&&kt(I,ie,We)}function ut(I,ie){for(var We=I.length;We--;)if(to(I[We][0],ie))return We;return-1}function kt(I,ie,We){ie=="__proto__"&&Ke?Ke(I,ie,{configurable:!0,enumerable:!0,value:We,writable:!0}):I[ie]=We}var Ht=bi();function ht(I){return I==null?I===void 0?Ot:Qt:Qe&&Qe in Object(I)?Ci(I):To(I)}function vt(I){return Hi(I)&&ht(I)==$}function ft(I){if(!jo(I)||ro(I))return!1;var ie=Sr(I)?Ce:te;return ie.test(Is(I))}function Gt(I){return Hi(I)&&go(I.length)&&!!ee[ht(I)]}function An(I){if(!jo(I))return $o(I);var ie=ci(I),We=[];for(var xt in I)xt=="constructor"&&(ie||!un.call(I,xt))||We.push(xt);return We}function Rn(I,ie,We,xt,Mn){I!==ie&&Ht(ie,function(In,Xn){if(Mn||(Mn=new S),jo(In))Gn(I,ie,Xn,We,Rn,xt,Mn);else{var yn=xt?xt(Us(I,Xn),In,Xn+"",I,ie,Mn):void 0;yn===void 0&&(yn=In),Fe(I,Xn,yn)}},st)}function Gn(I,ie,We,xt,Mn,In,Xn){var yn=Us(I,We),Yn=Us(ie,We),vr=Xn.get(Yn);if(vr){Fe(I,We,vr);return}var ir=In?In(yn,Yn,We+"",I,ie,Xn):void 0,yr=ir===void 0;if(yr){var ri=es(Yn),Wr=!ri&&Po(Yn),ii=!ri&&!Wr&&Q(Yn);ir=Yn,ri||Wr||ii?es(yn)?ir=yn:us(yn)?ir=cr(yn):Wr?(yr=!1,ir=Qn(Yn,!0)):ii?(yr=!1,ir=Zn(Yn,!0)):ir=[]:U(Yn)||Ao(Yn)?(ir=yn,Ao(yn)?ir=Pe(yn):(!jo(yn)||Sr(yn))&&(ir=Ii(Yn))):yr=!1}yr&&(Xn.set(Yn,ir),Mn(ir,Yn,xt,In,Xn),Xn.delete(Yn)),Fe(I,We,ir)}function Pn(I,ie){return ma(mo(I,ie,G),I+"")}var kn=Ke?function(I,ie){return Ke(I,"toString",{configurable:!0,enumerable:!1,value:Tt(ie),writable:!0})}:G;function Qn(I,ie){if(ie)return I.slice();var We=I.length,xt=Ft?Ft(We):new I.constructor(We);return I.copy(xt),xt}function cn(I){var ie=new I.constructor(I.byteLength);return new et(ie).set(new et(I)),ie}function Zn(I,ie){var We=ie?cn(I.buffer):I.buffer;return new I.constructor(We,I.byteOffset,I.length)}function cr(I,ie){var We=-1,xt=I.length;for(ie||(ie=Array(xt));++We<xt;)ie[We]=I[We];return ie}function Er(I,ie,We,xt){var Mn=!We;We||(We={});for(var In=-1,Xn=ie.length;++In<Xn;){var yn=ie[In],Yn=xt?xt(We[yn],I[yn],yn,We,I):void 0;Yn===void 0&&(Yn=I[yn]),Mn?kt(We,yn,Yn):Ge(We,yn,Yn)}return We}function Kr(I){return Pn(function(ie,We){var xt=-1,Mn=We.length,In=Mn>1?We[Mn-1]:void 0,Xn=Mn>2?We[2]:void 0;for(In=I.length>3&&typeof In=="function"?(Mn--,In):void 0,Xn&&Gr(We[0],We[1],Xn)&&(In=Mn<3?void 0:In,Mn=1),ie=Object(ie);++xt<Mn;){var yn=We[xt];yn&&I(ie,yn,xt,In)}return ie})}function bi(I){return function(ie,We,xt){for(var Mn=-1,In=Object(ie),Xn=xt(ie),yn=Xn.length;yn--;){var Yn=Xn[I?yn:++Mn];if(We(In[Yn],Yn,In)===!1)break}return ie}}function li(I,ie){var We=I.__data__;return Di(ie)?We[typeof ie=="string"?"string":"hash"]:We.map}function fi(I,ie){var We=Be(I,ie);return ft(We)?We:void 0}function Ci(I){var ie=un.call(I,Qe),We=I[Qe];try{I[Qe]=void 0;var xt=!0}catch(In){}var Mn=yt.call(I);return xt&&(ie?I[Qe]=We:delete I[Qe]),Mn}function Ii(I){return typeof I.constructor=="function"&&!ci(I)?me(qt(I)):{}}function Or(I,ie){var We=typeof I;return ie=ie==null?T:ie,!!ie&&(We=="number"||We!="symbol"&&Oe.test(I))&&I>-1&&I%1==0&&I<ie}function Gr(I,ie,We){if(!jo(We))return!1;var xt=typeof ie;return(xt=="number"?Br(We)&&Or(ie,We.length):xt=="string"&&ie in We)?to(We[ie],I):!1}function Di(I){var ie=typeof I;return ie=="string"||ie=="number"||ie=="symbol"||ie=="boolean"?I!=="__proto__":I===null}function ro(I){return!!Tn&&Tn in I}function ci(I){var ie=I&&I.constructor,We=typeof ie=="function"&&ie.prototype||Yt;return I===We}function $o(I){var ie=[];if(I!=null)for(var We in Object(I))ie.push(We);return ie}function To(I){return yt.call(I)}function mo(I,ie,We){return ie=Bt(ie===void 0?I.length-1:ie,0),function(){for(var xt=arguments,Mn=-1,In=Bt(xt.length-ie,0),Xn=Array(In);++Mn<In;)Xn[Mn]=xt[ie+Mn];Mn=-1;for(var yn=Array(ie+1);++Mn<ie;)yn[Mn]=xt[Mn];return yn[ie]=We(Xn),Lt(I,this,yn)}}function Us(I,ie){if(!(ie==="constructor"&&typeof I[ie]=="function")&&ie!="__proto__")return I[ie]}var ma=Js(kn);function Js(I){var ie=0,We=0;return function(){var xt=En(),Mn=C-(xt-We);if(We=xt,Mn>0){if(++ie>=g)return arguments[0]}else ie=0;return I.apply(void 0,arguments)}}function Is(I){if(I!=null){try{return an.call(I)}catch(ie){}try{return I+""}catch(ie){}}return""}function to(I,ie){return I===ie||I!==I&&ie!==ie}var Ao=vt(function(){return arguments}())?vt:function(I){return Hi(I)&&un.call(I,"callee")&&!dn.call(I,"callee")},es=Array.isArray;function Br(I){return I!=null&&go(I.length)&&!Sr(I)}function us(I){return Hi(I)&&Br(I)}var Po=at||be;function Sr(I){if(!jo(I))return!1;var ie=ht(I);return ie==Se||ie==k||ie==K||ie==Pt}function go(I){return typeof I=="number"&&I>-1&&I%1==0&&I<=T}function jo(I){var ie=typeof I;return I!=null&&(ie=="object"||ie=="function")}function Hi(I){return I!=null&&typeof I=="object"}function U(I){if(!Hi(I)||ht(I)!=mt)return!1;var ie=qt(I);if(ie===null)return!0;var We=un.call(ie,"constructor")&&ie.constructor;return typeof We=="function"&&We instanceof We&&an.call(We)==pe}var Q=Rt?Xe(Rt):Gt;function Pe(I){return Er(I,st(I))}function st(I){return Br(I)?W(I,!0):An(I)}var Dt=Kr(function(I,ie,We){Rn(I,ie,We)});function Tt(I){return function(){return I}}function G(I){return I}function be(){return!1}tn.exports=Dt},44929:function(tn,qe,J){"use strict";function L(ee){return L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ae){return typeof Ae}:function(Ae){return Ae&&typeof Symbol=="function"&&Ae.constructor===Symbol&&Ae!==Symbol.prototype?"symbol":typeof Ae},L(ee)}Object.defineProperty(qe,"__esModule",{value:!0}),Object.defineProperty(qe,"DraggableCore",{enumerable:!0,get:function(){return ce.default}}),qe.default=void 0;var x=rt(J(50959)),g=Se(J(40507)),C=Se(J(10422)),T=Se(J(45924)),$=J(3767),H=J(21476),K=J(89323),ce=Se(J(67703)),oe=Se(J(21261)),xe=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function Se(ee){return ee&&ee.__esModule?ee:{default:ee}}function k(ee){if(typeof WeakMap!="function")return null;var Ae=new WeakMap,Te=new WeakMap;return(k=function(Je){return Je?Te:Ae})(ee)}function rt(ee,Ae){if(!Ae&&ee&&ee.__esModule)return ee;if(ee===null||L(ee)!=="object"&&typeof ee!="function")return{default:ee};var Te=k(Ae);if(Te&&Te.has(ee))return Te.get(ee);var $e={},Je=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var it in ee)if(it!=="default"&&Object.prototype.hasOwnProperty.call(ee,it)){var tt=Je?Object.getOwnPropertyDescriptor(ee,it):null;tt&&(tt.get||tt.set)?Object.defineProperty($e,it,tt):$e[it]=ee[it]}return $e.default=ee,Te&&Te.set(ee,$e),$e}function lt(){return lt=Object.assign||function(ee){for(var Ae=1;Ae<arguments.length;Ae++){var Te=arguments[Ae];for(var $e in Te)Object.prototype.hasOwnProperty.call(Te,$e)&&(ee[$e]=Te[$e])}return ee},lt.apply(this,arguments)}function Qt(ee,Ae){if(ee==null)return{};var Te=mt(ee,Ae),$e,Je;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(ee);for(Je=0;Je<it.length;Je++)$e=it[Je],!(Ae.indexOf($e)>=0)&&Object.prototype.propertyIsEnumerable.call(ee,$e)&&(Te[$e]=ee[$e])}return Te}function mt(ee,Ae){if(ee==null)return{};var Te={},$e=Object.keys(ee),Je,it;for(it=0;it<$e.length;it++)Je=$e[it],!(Ae.indexOf(Je)>=0)&&(Te[Je]=ee[Je]);return Te}function Pt(ee,Ae){var Te=Object.keys(ee);if(Object.getOwnPropertySymbols){var $e=Object.getOwnPropertySymbols(ee);Ae&&($e=$e.filter(function(Je){return Object.getOwnPropertyDescriptor(ee,Je).enumerable})),Te.push.apply(Te,$e)}return Te}function O(ee){for(var Ae=1;Ae<arguments.length;Ae++){var Te=arguments[Ae]!=null?arguments[Ae]:{};Ae%2?Pt(Object(Te),!0).forEach(function($e){te(ee,$e,Te[$e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ee,Object.getOwnPropertyDescriptors(Te)):Pt(Object(Te)).forEach(function($e){Object.defineProperty(ee,$e,Object.getOwnPropertyDescriptor(Te,$e))})}return ee}function Ye(ee,Ae){return ke(ee)||Ve(ee,Ae)||Ot(ee,Ae)||gt()}function gt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ot(ee,Ae){if(ee){if(typeof ee=="string")return Nt(ee,Ae);var Te=Object.prototype.toString.call(ee).slice(8,-1);if(Te==="Object"&&ee.constructor&&(Te=ee.constructor.name),Te==="Map"||Te==="Set")return Array.from(ee);if(Te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Te))return Nt(ee,Ae)}}function Nt(ee,Ae){(Ae==null||Ae>ee.length)&&(Ae=ee.length);for(var Te=0,$e=new Array(Ae);Te<Ae;Te++)$e[Te]=ee[Te];return $e}function Ve(ee,Ae){var Te=ee==null?null:typeof Symbol!="undefined"&&ee[Symbol.iterator]||ee["@@iterator"];if(Te!=null){var $e=[],Je=!0,it=!1,tt,St;try{for(Te=Te.call(ee);!(Je=(tt=Te.next()).done)&&($e.push(tt.value),!(Ae&&$e.length===Ae));Je=!0);}catch(ot){it=!0,St=ot}finally{try{!Je&&Te.return!=null&&Te.return()}finally{if(it)throw St}}return $e}}function ke(ee){if(Array.isArray(ee))return ee}function dt(ee,Ae){if(!(ee instanceof Ae))throw new TypeError("Cannot call a class as a function")}function Et(ee,Ae){for(var Te=0;Te<Ae.length;Te++){var $e=Ae[Te];$e.enumerable=$e.enumerable||!1,$e.configurable=!0,"value"in $e&&($e.writable=!0),Object.defineProperty(ee,$e.key,$e)}}function Z(ee,Ae,Te){return Ae&&Et(ee.prototype,Ae),Te&&Et(ee,Te),Object.defineProperty(ee,"prototype",{writable:!1}),ee}function ye(ee,Ae){if(typeof Ae!="function"&&Ae!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(Ae&&Ae.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),Object.defineProperty(ee,"prototype",{writable:!1}),Ae&&ge(ee,Ae)}function ge(ee,Ae){return ge=Object.setPrototypeOf||function($e,Je){return $e.__proto__=Je,$e},ge(ee,Ae)}function ve(ee){var Ae=de();return function(){var $e=Y(ee),Je;if(Ae){var it=Y(this).constructor;Je=Reflect.construct($e,arguments,it)}else Je=$e.apply(this,arguments);return _e(this,Je)}}function _e(ee,Ae){if(Ae&&(L(Ae)==="object"||typeof Ae=="function"))return Ae;if(Ae!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return we(ee)}function we(ee){if(ee===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ee}function de(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}function Y(ee){return Y=Object.setPrototypeOf?Object.getPrototypeOf:function(Te){return Te.__proto__||Object.getPrototypeOf(Te)},Y(ee)}function te(ee,Ae,Te){return Ae in ee?Object.defineProperty(ee,Ae,{value:Te,enumerable:!0,configurable:!0,writable:!0}):ee[Ae]=Te,ee}var Oe=function(ee){ye(Te,ee);var Ae=ve(Te);function Te($e){var Je;return dt(this,Te),Je=Ae.call(this,$e),te(we(Je),"onDragStart",function(it,tt){(0,oe.default)("Draggable: onDragStart: %j",tt);var St=Je.props.onStart(it,(0,H.createDraggableData)(we(Je),tt));if(St===!1)return!1;Je.setState({dragging:!0,dragged:!0})}),te(we(Je),"onDrag",function(it,tt){if(!Je.state.dragging)return!1;(0,oe.default)("Draggable: onDrag: %j",tt);var St=(0,H.createDraggableData)(we(Je),tt),ot={x:St.x,y:St.y};if(Je.props.bounds){var Rt=ot.x,Lt=ot.y;ot.x+=Je.state.slackX,ot.y+=Je.state.slackY;var pt=(0,H.getBoundPosition)(we(Je),ot.x,ot.y),Xe=Ye(pt,2),Be=Xe[0],Ct=Xe[1];ot.x=Be,ot.y=Ct,ot.slackX=Je.state.slackX+(Rt-ot.x),ot.slackY=Je.state.slackY+(Lt-ot.y),St.x=ot.x,St.y=ot.y,St.deltaX=ot.x-Je.state.x,St.deltaY=ot.y-Je.state.y}var Wt=Je.props.onDrag(it,St);if(Wt===!1)return!1;Je.setState(ot)}),te(we(Je),"onDragStop",function(it,tt){if(!Je.state.dragging)return!1;var St=Je.props.onStop(it,(0,H.createDraggableData)(we(Je),tt));if(St===!1)return!1;(0,oe.default)("Draggable: onDragStop: %j",tt);var ot={dragging:!1,slackX:0,slackY:0},Rt=Boolean(Je.props.position);if(Rt){var Lt=Je.props.position,pt=Lt.x,Xe=Lt.y;ot.x=pt,ot.y=Xe}Je.setState(ot)}),Je.state={dragging:!1,dragged:!1,x:$e.position?$e.position.x:$e.defaultPosition.x,y:$e.position?$e.position.y:$e.defaultPosition.y,prevPropsPosition:O({},$e.position),slackX:0,slackY:0,isElementSVG:!1},$e.position&&!($e.onDrag||$e.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),Je}return Z(Te,[{key:"componentDidMount",value:function(){typeof window.SVGElement!="undefined"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var Je,it,tt;return(Je=(it=this.props)===null||it===void 0||(tt=it.nodeRef)===null||tt===void 0?void 0:tt.current)!==null&&Je!==void 0?Je:C.default.findDOMNode(this)}},{key:"render",value:function(){var Je,it=this.props,tt=it.axis,St=it.bounds,ot=it.children,Rt=it.defaultPosition,Lt=it.defaultClassName,pt=it.defaultClassNameDragging,Xe=it.defaultClassNameDragged,Be=it.position,Ct=it.positionOffset,Wt=it.scale,Xt=Qt(it,xe),Yt={},wn=null,an=Boolean(Be),un=!an||this.state.dragging,Tn=Be||Rt,yt={x:(0,H.canDragX)(this)&&un?this.state.x:Tn.x,y:(0,H.canDragY)(this)&&un?this.state.y:Tn.y};this.state.isElementSVG?wn=(0,$.createSVGTransform)(yt,Ct):Yt=(0,$.createCSSTransform)(yt,Ct);var pe=(0,T.default)(ot.props.className||"",Lt,(Je={},te(Je,pt,this.state.dragging),te(Je,Xe,this.state.dragged),Je));return x.createElement(ce.default,lt({},Xt,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),x.cloneElement(x.Children.only(ot),{className:pe,style:O(O({},ot.props.style),Yt),transform:wn}))}}],[{key:"getDerivedStateFromProps",value:function(Je,it){var tt=Je.position,St=it.prevPropsPosition;return tt&&(!St||tt.x!==St.x||tt.y!==St.y)?((0,oe.default)("Draggable: getDerivedStateFromProps %j",{position:tt,prevPropsPosition:St}),{x:tt.x,y:tt.y,prevPropsPosition:O({},tt)}):null}}]),Te}(x.Component);qe.default=Oe,te(Oe,"displayName","Draggable"),te(Oe,"propTypes",O(O({},ce.default.propTypes),{},{axis:g.default.oneOf(["both","x","y","none"]),bounds:g.default.oneOfType([g.default.shape({left:g.default.number,right:g.default.number,top:g.default.number,bottom:g.default.number}),g.default.string,g.default.oneOf([!1])]),defaultClassName:g.default.string,defaultClassNameDragging:g.default.string,defaultClassNameDragged:g.default.string,defaultPosition:g.default.shape({x:g.default.number,y:g.default.number}),positionOffset:g.default.shape({x:g.default.oneOfType([g.default.number,g.default.string]),y:g.default.oneOfType([g.default.number,g.default.string])}),position:g.default.shape({x:g.default.number,y:g.default.number}),className:K.dontSetMe,style:K.dontSetMe,transform:K.dontSetMe})),te(Oe,"defaultProps",O(O({},ce.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))},67703:function(tn,qe,J){"use strict";function L(_e){return L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(we){return typeof we}:function(we){return we&&typeof Symbol=="function"&&we.constructor===Symbol&&we!==Symbol.prototype?"symbol":typeof we},L(_e)}Object.defineProperty(qe,"__esModule",{value:!0}),qe.default=void 0;var x=xe(J(50959)),g=ce(J(40507)),C=ce(J(10422)),T=J(3767),$=J(21476),H=J(89323),K=ce(J(21261));function ce(_e){return _e&&_e.__esModule?_e:{default:_e}}function oe(_e){if(typeof WeakMap!="function")return null;var we=new WeakMap,de=new WeakMap;return(oe=function(te){return te?de:we})(_e)}function xe(_e,we){if(!we&&_e&&_e.__esModule)return _e;if(_e===null||L(_e)!=="object"&&typeof _e!="function")return{default:_e};var de=oe(we);if(de&&de.has(_e))return de.get(_e);var Y={},te=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Oe in _e)if(Oe!=="default"&&Object.prototype.hasOwnProperty.call(_e,Oe)){var ee=te?Object.getOwnPropertyDescriptor(_e,Oe):null;ee&&(ee.get||ee.set)?Object.defineProperty(Y,Oe,ee):Y[Oe]=_e[Oe]}return Y.default=_e,de&&de.set(_e,Y),Y}function Se(_e,we){return mt(_e)||Qt(_e,we)||rt(_e,we)||k()}function k(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rt(_e,we){if(_e){if(typeof _e=="string")return lt(_e,we);var de=Object.prototype.toString.call(_e).slice(8,-1);if(de==="Object"&&_e.constructor&&(de=_e.constructor.name),de==="Map"||de==="Set")return Array.from(_e);if(de==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(de))return lt(_e,we)}}function lt(_e,we){(we==null||we>_e.length)&&(we=_e.length);for(var de=0,Y=new Array(we);de<we;de++)Y[de]=_e[de];return Y}function Qt(_e,we){var de=_e==null?null:typeof Symbol!="undefined"&&_e[Symbol.iterator]||_e["@@iterator"];if(de!=null){var Y=[],te=!0,Oe=!1,ee,Ae;try{for(de=de.call(_e);!(te=(ee=de.next()).done)&&(Y.push(ee.value),!(we&&Y.length===we));te=!0);}catch(Te){Oe=!0,Ae=Te}finally{try{!te&&de.return!=null&&de.return()}finally{if(Oe)throw Ae}}return Y}}function mt(_e){if(Array.isArray(_e))return _e}function Pt(_e,we){if(!(_e instanceof we))throw new TypeError("Cannot call a class as a function")}function O(_e,we){for(var de=0;de<we.length;de++){var Y=we[de];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(_e,Y.key,Y)}}function Ye(_e,we,de){return we&&O(_e.prototype,we),de&&O(_e,de),Object.defineProperty(_e,"prototype",{writable:!1}),_e}function gt(_e,we){if(typeof we!="function"&&we!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(we&&we.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),Object.defineProperty(_e,"prototype",{writable:!1}),we&&Ot(_e,we)}function Ot(_e,we){return Ot=Object.setPrototypeOf||function(Y,te){return Y.__proto__=te,Y},Ot(_e,we)}function Nt(_e){var we=dt();return function(){var Y=Et(_e),te;if(we){var Oe=Et(this).constructor;te=Reflect.construct(Y,arguments,Oe)}else te=Y.apply(this,arguments);return Ve(this,te)}}function Ve(_e,we){if(we&&(L(we)==="object"||typeof we=="function"))return we;if(we!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ke(_e)}function ke(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function dt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(_e){return!1}}function Et(_e){return Et=Object.setPrototypeOf?Object.getPrototypeOf:function(de){return de.__proto__||Object.getPrototypeOf(de)},Et(_e)}function Z(_e,we,de){return we in _e?Object.defineProperty(_e,we,{value:de,enumerable:!0,configurable:!0,writable:!0}):_e[we]=de,_e}var ye={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},ge=ye.mouse,ve=function(_e){gt(de,_e);var we=Nt(de);function de(){var Y;Pt(this,de);for(var te=arguments.length,Oe=new Array(te),ee=0;ee<te;ee++)Oe[ee]=arguments[ee];return Y=we.call.apply(we,[this].concat(Oe)),Z(ke(Y),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),Z(ke(Y),"mounted",!1),Z(ke(Y),"handleDragStart",function(Ae){if(Y.props.onMouseDown(Ae),!Y.props.allowAnyClick&&typeof Ae.button=="number"&&Ae.button!==0)return!1;var Te=Y.findDOMNode();if(!Te||!Te.ownerDocument||!Te.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var $e=Te.ownerDocument;if(!(Y.props.disabled||!(Ae.target instanceof $e.defaultView.Node)||Y.props.handle&&!(0,T.matchesSelectorAndParentsTo)(Ae.target,Y.props.handle,Te)||Y.props.cancel&&(0,T.matchesSelectorAndParentsTo)(Ae.target,Y.props.cancel,Te))){Ae.type==="touchstart"&&Ae.preventDefault();var Je=(0,T.getTouchIdentifier)(Ae);Y.setState({touchIdentifier:Je});var it=(0,$.getControlPosition)(Ae,Je,ke(Y));if(it!=null){var tt=it.x,St=it.y,ot=(0,$.createCoreData)(ke(Y),tt,St);(0,K.default)("DraggableCore: handleDragStart: %j",ot),(0,K.default)("calling",Y.props.onStart);var Rt=Y.props.onStart(Ae,ot);Rt===!1||Y.mounted===!1||(Y.props.enableUserSelectHack&&(0,T.addUserSelectStyles)($e),Y.setState({dragging:!0,lastX:tt,lastY:St}),(0,T.addEvent)($e,ge.move,Y.handleDrag),(0,T.addEvent)($e,ge.stop,Y.handleDragStop))}}}),Z(ke(Y),"handleDrag",function(Ae){var Te=(0,$.getControlPosition)(Ae,Y.state.touchIdentifier,ke(Y));if(Te!=null){var $e=Te.x,Je=Te.y;if(Array.isArray(Y.props.grid)){var it=$e-Y.state.lastX,tt=Je-Y.state.lastY,St=(0,$.snapToGrid)(Y.props.grid,it,tt),ot=Se(St,2);if(it=ot[0],tt=ot[1],!it&&!tt)return;$e=Y.state.lastX+it,Je=Y.state.lastY+tt}var Rt=(0,$.createCoreData)(ke(Y),$e,Je);(0,K.default)("DraggableCore: handleDrag: %j",Rt);var Lt=Y.props.onDrag(Ae,Rt);if(Lt===!1||Y.mounted===!1){try{Y.handleDragStop(new MouseEvent("mouseup"))}catch(Xe){var pt=document.createEvent("MouseEvents");pt.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),Y.handleDragStop(pt)}return}Y.setState({lastX:$e,lastY:Je})}}),Z(ke(Y),"handleDragStop",function(Ae){if(Y.state.dragging){var Te=(0,$.getControlPosition)(Ae,Y.state.touchIdentifier,ke(Y));if(Te!=null){var $e=Te.x,Je=Te.y;if(Array.isArray(Y.props.grid)){var it=$e-Y.state.lastX||0,tt=Je-Y.state.lastY||0,St=(0,$.snapToGrid)(Y.props.grid,it,tt),ot=Se(St,2);it=ot[0],tt=ot[1],$e=Y.state.lastX+it,Je=Y.state.lastY+tt}var Rt=(0,$.createCoreData)(ke(Y),$e,Je),Lt=Y.props.onStop(Ae,Rt);if(Lt===!1||Y.mounted===!1)return!1;var pt=Y.findDOMNode();pt&&Y.props.enableUserSelectHack&&(0,T.removeUserSelectStyles)(pt.ownerDocument),(0,K.default)("DraggableCore: handleDragStop: %j",Rt),Y.setState({dragging:!1,lastX:NaN,lastY:NaN}),pt&&((0,K.default)("DraggableCore: Removing handlers"),(0,T.removeEvent)(pt.ownerDocument,ge.move,Y.handleDrag),(0,T.removeEvent)(pt.ownerDocument,ge.stop,Y.handleDragStop))}}}),Z(ke(Y),"onMouseDown",function(Ae){return ge=ye.mouse,Y.handleDragStart(Ae)}),Z(ke(Y),"onMouseUp",function(Ae){return ge=ye.mouse,Y.handleDragStop(Ae)}),Z(ke(Y),"onTouchStart",function(Ae){return ge=ye.touch,Y.handleDragStart(Ae)}),Z(ke(Y),"onTouchEnd",function(Ae){return ge=ye.touch,Y.handleDragStop(Ae)}),Y}return Ye(de,[{key:"componentDidMount",value:function(){this.mounted=!0;var te=this.findDOMNode();te&&(0,T.addEvent)(te,ye.touch.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var te=this.findDOMNode();if(te){var Oe=te.ownerDocument;(0,T.removeEvent)(Oe,ye.mouse.move,this.handleDrag),(0,T.removeEvent)(Oe,ye.touch.move,this.handleDrag),(0,T.removeEvent)(Oe,ye.mouse.stop,this.handleDragStop),(0,T.removeEvent)(Oe,ye.touch.stop,this.handleDragStop),(0,T.removeEvent)(te,ye.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,T.removeUserSelectStyles)(Oe)}}},{key:"findDOMNode",value:function(){var te,Oe,ee;return(te=this.props)!==null&&te!==void 0&&te.nodeRef?(Oe=this.props)===null||Oe===void 0||(ee=Oe.nodeRef)===null||ee===void 0?void 0:ee.current:C.default.findDOMNode(this)}},{key:"render",value:function(){return x.cloneElement(x.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),de}(x.Component);qe.default=ve,Z(ve,"displayName","DraggableCore"),Z(ve,"propTypes",{allowAnyClick:g.default.bool,disabled:g.default.bool,enableUserSelectHack:g.default.bool,offsetParent:function(we,de){if(we[de]&&we[de].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:g.default.arrayOf(g.default.number),handle:g.default.string,cancel:g.default.string,nodeRef:g.default.object,onStart:g.default.func,onDrag:g.default.func,onStop:g.default.func,onMouseDown:g.default.func,scale:g.default.number,className:H.dontSetMe,style:H.dontSetMe,transform:H.dontSetMe}),Z(ve,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},74901:function(tn,qe,J){"use strict";var L=J(44929),x=L.default,g=L.DraggableCore;tn.exports=x,tn.exports.default=x,tn.exports.DraggableCore=g},3767:function(tn,qe,J){"use strict";function L(Z){return L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ye){return typeof ye}:function(ye){return ye&&typeof Symbol=="function"&&ye.constructor===Symbol&&ye!==Symbol.prototype?"symbol":typeof ye},L(Z)}Object.defineProperty(qe,"__esModule",{value:!0}),qe.addClassName=dt,qe.addEvent=Se,qe.addUserSelectStyles=Ve,qe.createCSSTransform=O,qe.createSVGTransform=Ye,qe.getTouch=Ot,qe.getTouchIdentifier=Nt,qe.getTranslation=gt,qe.innerHeight=Qt,qe.innerWidth=mt,qe.matchesSelector=oe,qe.matchesSelectorAndParentsTo=xe,qe.offsetXYFromParent=Pt,qe.outerHeight=rt,qe.outerWidth=lt,qe.removeClassName=Et,qe.removeEvent=k,qe.removeUserSelectStyles=ke;var x=J(89323),g=T(J(14642));function C(Z){if(typeof WeakMap!="function")return null;var ye=new WeakMap,ge=new WeakMap;return(C=function(_e){return _e?ge:ye})(Z)}function T(Z,ye){if(!ye&&Z&&Z.__esModule)return Z;if(Z===null||L(Z)!=="object"&&typeof Z!="function")return{default:Z};var ge=C(ye);if(ge&&ge.has(Z))return ge.get(Z);var ve={},_e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var we in Z)if(we!=="default"&&Object.prototype.hasOwnProperty.call(Z,we)){var de=_e?Object.getOwnPropertyDescriptor(Z,we):null;de&&(de.get||de.set)?Object.defineProperty(ve,we,de):ve[we]=Z[we]}return ve.default=Z,ge&&ge.set(Z,ve),ve}function $(Z,ye){var ge=Object.keys(Z);if(Object.getOwnPropertySymbols){var ve=Object.getOwnPropertySymbols(Z);ye&&(ve=ve.filter(function(_e){return Object.getOwnPropertyDescriptor(Z,_e).enumerable})),ge.push.apply(ge,ve)}return ge}function H(Z){for(var ye=1;ye<arguments.length;ye++){var ge=arguments[ye]!=null?arguments[ye]:{};ye%2?$(Object(ge),!0).forEach(function(ve){K(Z,ve,ge[ve])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(ge)):$(Object(ge)).forEach(function(ve){Object.defineProperty(Z,ve,Object.getOwnPropertyDescriptor(ge,ve))})}return Z}function K(Z,ye,ge){return ye in Z?Object.defineProperty(Z,ye,{value:ge,enumerable:!0,configurable:!0,writable:!0}):Z[ye]=ge,Z}var ce="";function oe(Z,ye){return ce||(ce=(0,x.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(ge){return(0,x.isFunction)(Z[ge])})),(0,x.isFunction)(Z[ce])?Z[ce](ye):!1}function xe(Z,ye,ge){var ve=Z;do{if(oe(ve,ye))return!0;if(ve===ge)return!1;ve=ve.parentNode}while(ve);return!1}function Se(Z,ye,ge,ve){if(Z){var _e=H({capture:!0},ve);Z.addEventListener?Z.addEventListener(ye,ge,_e):Z.attachEvent?Z.attachEvent("on"+ye,ge):Z["on"+ye]=ge}}function k(Z,ye,ge,ve){if(Z){var _e=H({capture:!0},ve);Z.removeEventListener?Z.removeEventListener(ye,ge,_e):Z.detachEvent?Z.detachEvent("on"+ye,ge):Z["on"+ye]=null}}function rt(Z){var ye=Z.clientHeight,ge=Z.ownerDocument.defaultView.getComputedStyle(Z);return ye+=(0,x.int)(ge.borderTopWidth),ye+=(0,x.int)(ge.borderBottomWidth),ye}function lt(Z){var ye=Z.clientWidth,ge=Z.ownerDocument.defaultView.getComputedStyle(Z);return ye+=(0,x.int)(ge.borderLeftWidth),ye+=(0,x.int)(ge.borderRightWidth),ye}function Qt(Z){var ye=Z.clientHeight,ge=Z.ownerDocument.defaultView.getComputedStyle(Z);return ye-=(0,x.int)(ge.paddingTop),ye-=(0,x.int)(ge.paddingBottom),ye}function mt(Z){var ye=Z.clientWidth,ge=Z.ownerDocument.defaultView.getComputedStyle(Z);return ye-=(0,x.int)(ge.paddingLeft),ye-=(0,x.int)(ge.paddingRight),ye}function Pt(Z,ye,ge){var ve=ye===ye.ownerDocument.body,_e=ve?{left:0,top:0}:ye.getBoundingClientRect(),we=(Z.clientX+ye.scrollLeft-_e.left)/ge,de=(Z.clientY+ye.scrollTop-_e.top)/ge;return{x:we,y:de}}function O(Z,ye){var ge=gt(Z,ye,"px");return K({},(0,g.browserPrefixToKey)("transform",g.default),ge)}function Ye(Z,ye){var ge=gt(Z,ye,"");return ge}function gt(Z,ye,ge){var ve=Z.x,_e=Z.y,we="translate(".concat(ve).concat(ge,",").concat(_e).concat(ge,")");if(ye){var de="".concat(typeof ye.x=="string"?ye.x:ye.x+ge),Y="".concat(typeof ye.y=="string"?ye.y:ye.y+ge);we="translate(".concat(de,", ").concat(Y,")")+we}return we}function Ot(Z,ye){return Z.targetTouches&&(0,x.findInArray)(Z.targetTouches,function(ge){return ye===ge.identifier})||Z.changedTouches&&(0,x.findInArray)(Z.changedTouches,function(ge){return ye===ge.identifier})}function Nt(Z){if(Z.targetTouches&&Z.targetTouches[0])return Z.targetTouches[0].identifier;if(Z.changedTouches&&Z.changedTouches[0])return Z.changedTouches[0].identifier}function Ve(Z){if(Z){var ye=Z.getElementById("react-draggable-style-el");ye||(ye=Z.createElement("style"),ye.type="text/css",ye.id="react-draggable-style-el",ye.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,ye.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,Z.getElementsByTagName("head")[0].appendChild(ye)),Z.body&&dt(Z.body,"react-draggable-transparent-selection")}}function ke(Z){if(Z)try{if(Z.body&&Et(Z.body,"react-draggable-transparent-selection"),Z.selection)Z.selection.empty();else{var ye=(Z.defaultView||window).getSelection();ye&&ye.type!=="Caret"&&ye.removeAllRanges()}}catch(ge){}}function dt(Z,ye){Z.classList?Z.classList.add(ye):Z.className.match(new RegExp("(?:^|\\s)".concat(ye,"(?!\\S)")))||(Z.className+=" ".concat(ye))}function Et(Z,ye){Z.classList?Z.classList.remove(ye):Z.className=Z.className.replace(new RegExp("(?:^|\\s)".concat(ye,"(?!\\S)"),"g"),"")}},14642:function(tn,qe){"use strict";Object.defineProperty(qe,"__esModule",{value:!0}),qe.browserPrefixToKey=x,qe.browserPrefixToStyle=g,qe.default=void 0,qe.getPrefix=L;var J=["Moz","Webkit","O","ms"];function L(){var $,H,K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window=="undefined")return"";var ce=($=window.document)===null||$===void 0||(H=$.documentElement)===null||H===void 0?void 0:H.style;if(!ce||K in ce)return"";for(var oe=0;oe<J.length;oe++)if(x(K,J[oe])in ce)return J[oe];return""}function x($,H){return H?"".concat(H).concat(C($)):$}function g($,H){return H?"-".concat(H.toLowerCase(),"-").concat($):$}function C($){for(var H="",K=!0,ce=0;ce<$.length;ce++)K?(H+=$[ce].toUpperCase(),K=!1):$[ce]==="-"?K=!0:H+=$[ce];return H}var T=L();qe.default=T},21261:function(tn,qe){"use strict";Object.defineProperty(qe,"__esModule",{value:!0}),qe.default=J;function J(){var L}},21476:function(tn,qe,J){"use strict";Object.defineProperty(qe,"__esModule",{value:!0}),qe.canDragX=T,qe.canDragY=$,qe.createCoreData=K,qe.createDraggableData=ce,qe.getBoundPosition=g,qe.getControlPosition=H,qe.snapToGrid=C;var L=J(89323),x=J(3767);function g(Se,k,rt){if(!Se.props.bounds)return[k,rt];var lt=Se.props.bounds;lt=typeof lt=="string"?lt:oe(lt);var Qt=xe(Se);if(typeof lt=="string"){var mt=Qt.ownerDocument,Pt=mt.defaultView,O;if(lt==="parent"?O=Qt.parentNode:O=mt.querySelector(lt),!(O instanceof Pt.HTMLElement))throw new Error('Bounds selector "'+lt+'" could not find an element.');var Ye=O,gt=Pt.getComputedStyle(Qt),Ot=Pt.getComputedStyle(Ye);lt={left:-Qt.offsetLeft+(0,L.int)(Ot.paddingLeft)+(0,L.int)(gt.marginLeft),top:-Qt.offsetTop+(0,L.int)(Ot.paddingTop)+(0,L.int)(gt.marginTop),right:(0,x.innerWidth)(Ye)-(0,x.outerWidth)(Qt)-Qt.offsetLeft+(0,L.int)(Ot.paddingRight)-(0,L.int)(gt.marginRight),bottom:(0,x.innerHeight)(Ye)-(0,x.outerHeight)(Qt)-Qt.offsetTop+(0,L.int)(Ot.paddingBottom)-(0,L.int)(gt.marginBottom)}}return(0,L.isNum)(lt.right)&&(k=Math.min(k,lt.right)),(0,L.isNum)(lt.bottom)&&(rt=Math.min(rt,lt.bottom)),(0,L.isNum)(lt.left)&&(k=Math.max(k,lt.left)),(0,L.isNum)(lt.top)&&(rt=Math.max(rt,lt.top)),[k,rt]}function C(Se,k,rt){var lt=Math.round(k/Se[0])*Se[0],Qt=Math.round(rt/Se[1])*Se[1];return[lt,Qt]}function T(Se){return Se.props.axis==="both"||Se.props.axis==="x"}function $(Se){return Se.props.axis==="both"||Se.props.axis==="y"}function H(Se,k,rt){var lt=typeof k=="number"?(0,x.getTouch)(Se,k):null;if(typeof k=="number"&&!lt)return null;var Qt=xe(rt),mt=rt.props.offsetParent||Qt.offsetParent||Qt.ownerDocument.body;return(0,x.offsetXYFromParent)(lt||Se,mt,rt.props.scale)}function K(Se,k,rt){var lt=Se.state,Qt=!(0,L.isNum)(lt.lastX),mt=xe(Se);return Qt?{node:mt,deltaX:0,deltaY:0,lastX:k,lastY:rt,x:k,y:rt}:{node:mt,deltaX:k-lt.lastX,deltaY:rt-lt.lastY,lastX:lt.lastX,lastY:lt.lastY,x:k,y:rt}}function ce(Se,k){var rt=Se.props.scale;return{node:k.node,x:Se.state.x+k.deltaX/rt,y:Se.state.y+k.deltaY/rt,deltaX:k.deltaX/rt,deltaY:k.deltaY/rt,lastX:Se.state.x,lastY:Se.state.y}}function oe(Se){return{left:Se.left,top:Se.top,right:Se.right,bottom:Se.bottom}}function xe(Se){var k=Se.findDOMNode();if(!k)throw new Error("<DraggableCore>: Unmounted during event!");return k}},89323:function(tn,qe){"use strict";Object.defineProperty(qe,"__esModule",{value:!0}),qe.dontSetMe=C,qe.findInArray=J,qe.int=g,qe.isFunction=L,qe.isNum=x;function J(T,$){for(var H=0,K=T.length;H<K;H++)if($.apply($,[T[H],H,T]))return T[H]}function L(T){return typeof T=="function"||Object.prototype.toString.call(T)==="[object Function]"}function x(T){return typeof T=="number"&&!isNaN(T)}function g(T){return parseInt(T,10)}function C(T,$,H){if(T[$])return new Error("Invalid prop ".concat($," passed to ").concat(H," - do not set this, set it on the child."))}},58882:function(tn,qe,J){(function(L,x){tn.exports=x(J(50959))})(this,function(L){return function(x){var g={};function C(T){if(g[T])return g[T].exports;var $=g[T]={i:T,l:!1,exports:{}};return x[T].call($.exports,$,$.exports,C),$.l=!0,$.exports}return C.m=x,C.c=g,C.d=function(T,$,H){C.o(T,$)||Object.defineProperty(T,$,{enumerable:!0,get:H})},C.r=function(T){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(T,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(T,"__esModule",{value:!0})},C.t=function(T,$){if(1&$&&(T=C(T)),8&$||4&$&&typeof T=="object"&&T&&T.__esModule)return T;var H=Object.create(null);if(C.r(H),Object.defineProperty(H,"default",{enumerable:!0,value:T}),2&$&&typeof T!="string")for(var K in T)C.d(H,K,function(ce){return T[ce]}.bind(null,K));return H},C.n=function(T){var $=T&&T.__esModule?function(){return T.default}:function(){return T};return C.d($,"a",$),$},C.o=function(T,$){return Object.prototype.hasOwnProperty.call(T,$)},C.p="",C(C.s=48)}([function(x,g){x.exports=L},function(x,g){var C=x.exports={version:"2.6.12"};typeof __e=="number"&&(__e=C)},function(x,g,C){var T=C(26)("wks"),$=C(17),H=C(3).Symbol,K=typeof H=="function";(x.exports=function(ce){return T[ce]||(T[ce]=K&&H[ce]||(K?H:$)("Symbol."+ce))}).store=T},function(x,g){var C=x.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=C)},function(x,g,C){x.exports=!C(8)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(x,g){var C={}.hasOwnProperty;x.exports=function(T,$){return C.call(T,$)}},function(x,g,C){var T=C(7),$=C(16);x.exports=C(4)?function(H,K,ce){return T.f(H,K,$(1,ce))}:function(H,K,ce){return H[K]=ce,H}},function(x,g,C){var T=C(10),$=C(35),H=C(23),K=Object.defineProperty;g.f=C(4)?Object.defineProperty:function(ce,oe,xe){if(T(ce),oe=H(oe,!0),T(xe),$)try{return K(ce,oe,xe)}catch(Se){}if("get"in xe||"set"in xe)throw TypeError("Accessors not supported!");return"value"in xe&&(ce[oe]=xe.value),ce}},function(x,g){x.exports=function(C){try{return!!C()}catch(T){return!0}}},function(x,g,C){var T=C(40),$=C(22);x.exports=function(H){return T($(H))}},function(x,g,C){var T=C(11);x.exports=function($){if(!T($))throw TypeError($+" is not an object!");return $}},function(x,g){x.exports=function(C){return typeof C=="object"?C!==null:typeof C=="function"}},function(x,g){x.exports={}},function(x,g,C){var T=C(39),$=C(27);x.exports=Object.keys||function(H){return T(H,$)}},function(x,g){x.exports=!0},function(x,g,C){var T=C(3),$=C(1),H=C(53),K=C(6),ce=C(5),oe=function(xe,Se,k){var rt,lt,Qt,mt=xe&oe.F,Pt=xe&oe.G,O=xe&oe.S,Ye=xe&oe.P,gt=xe&oe.B,Ot=xe&oe.W,Nt=Pt?$:$[Se]||($[Se]={}),Ve=Nt.prototype,ke=Pt?T:O?T[Se]:(T[Se]||{}).prototype;for(rt in Pt&&(k=Se),k)(lt=!mt&&ke&&ke[rt]!==void 0)&&ce(Nt,rt)||(Qt=lt?ke[rt]:k[rt],Nt[rt]=Pt&&typeof ke[rt]!="function"?k[rt]:gt&&lt?H(Qt,T):Ot&&ke[rt]==Qt?function(dt){var Et=function(Z,ye,ge){if(this instanceof dt){switch(arguments.length){case 0:return new dt;case 1:return new dt(Z);case 2:return new dt(Z,ye)}return new dt(Z,ye,ge)}return dt.apply(this,arguments)};return Et.prototype=dt.prototype,Et}(Qt):Ye&&typeof Qt=="function"?H(Function.call,Qt):Qt,Ye&&((Nt.virtual||(Nt.virtual={}))[rt]=Qt,xe&oe.R&&Ve&&!Ve[rt]&&K(Ve,rt,Qt)))};oe.F=1,oe.G=2,oe.S=4,oe.P=8,oe.B=16,oe.W=32,oe.U=64,oe.R=128,x.exports=oe},function(x,g){x.exports=function(C,T){return{enumerable:!(1&C),configurable:!(2&C),writable:!(4&C),value:T}}},function(x,g){var C=0,T=Math.random();x.exports=function($){return"Symbol(".concat($===void 0?"":$,")_",(++C+T).toString(36))}},function(x,g,C){var T=C(22);x.exports=function($){return Object(T($))}},function(x,g){g.f={}.propertyIsEnumerable},function(x,g,C){"use strict";var T=C(52)(!0);C(34)(String,"String",function($){this._t=String($),this._i=0},function(){var $,H=this._t,K=this._i;return K>=H.length?{value:void 0,done:!0}:($=T(H,K),this._i+=$.length,{value:$,done:!1})})},function(x,g){var C=Math.ceil,T=Math.floor;x.exports=function($){return isNaN($=+$)?0:($>0?T:C)($)}},function(x,g){x.exports=function(C){if(C==null)throw TypeError("Can't call method on  "+C);return C}},function(x,g,C){var T=C(11);x.exports=function($,H){if(!T($))return $;var K,ce;if(H&&typeof(K=$.toString)=="function"&&!T(ce=K.call($))||typeof(K=$.valueOf)=="function"&&!T(ce=K.call($))||!H&&typeof(K=$.toString)=="function"&&!T(ce=K.call($)))return ce;throw TypeError("Can't convert object to primitive value")}},function(x,g){var C={}.toString;x.exports=function(T){return C.call(T).slice(8,-1)}},function(x,g,C){var T=C(26)("keys"),$=C(17);x.exports=function(H){return T[H]||(T[H]=$(H))}},function(x,g,C){var T=C(1),$=C(3),H=$["__core-js_shared__"]||($["__core-js_shared__"]={});(x.exports=function(K,ce){return H[K]||(H[K]=ce!==void 0?ce:{})})("versions",[]).push({version:T.version,mode:C(14)?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})},function(x,g){x.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(x,g,C){var T=C(7).f,$=C(5),H=C(2)("toStringTag");x.exports=function(K,ce,oe){K&&!$(K=oe?K:K.prototype,H)&&T(K,H,{configurable:!0,value:ce})}},function(x,g,C){C(62);for(var T=C(3),$=C(6),H=C(12),K=C(2)("toStringTag"),ce="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),oe=0;oe<ce.length;oe++){var xe=ce[oe],Se=T[xe],k=Se&&Se.prototype;k&&!k[K]&&$(k,K,xe),H[xe]=H.Array}},function(x,g,C){g.f=C(2)},function(x,g,C){var T=C(3),$=C(1),H=C(14),K=C(30),ce=C(7).f;x.exports=function(oe){var xe=$.Symbol||($.Symbol=H?{}:T.Symbol||{});oe.charAt(0)=="_"||oe in xe||ce(xe,oe,{value:K.f(oe)})}},function(x,g){g.f=Object.getOwnPropertySymbols},function(x,g){x.exports=function(C,T,$){return Math.min(Math.max(C,T),$)}},function(x,g,C){"use strict";var T=C(14),$=C(15),H=C(37),K=C(6),ce=C(12),oe=C(55),xe=C(28),Se=C(61),k=C(2)("iterator"),rt=!([].keys&&"next"in[].keys()),lt=function(){return this};x.exports=function(Qt,mt,Pt,O,Ye,gt,Ot){oe(Pt,mt,O);var Nt,Ve,ke,dt=function(Y){if(!rt&&Y in ge)return ge[Y];switch(Y){case"keys":case"values":return function(){return new Pt(this,Y)}}return function(){return new Pt(this,Y)}},Et=mt+" Iterator",Z=Ye=="values",ye=!1,ge=Qt.prototype,ve=ge[k]||ge["@@iterator"]||Ye&&ge[Ye],_e=ve||dt(Ye),we=Ye?Z?dt("entries"):_e:void 0,de=mt=="Array"&&ge.entries||ve;if(de&&(ke=Se(de.call(new Qt)))!==Object.prototype&&ke.next&&(xe(ke,Et,!0),T||typeof ke[k]=="function"||K(ke,k,lt)),Z&&ve&&ve.name!=="values"&&(ye=!0,_e=function(){return ve.call(this)}),T&&!Ot||!rt&&!ye&&ge[k]||K(ge,k,_e),ce[mt]=_e,ce[Et]=lt,Ye)if(Nt={values:Z?_e:dt("values"),keys:gt?_e:dt("keys"),entries:we},Ot)for(Ve in Nt)Ve in ge||H(ge,Ve,Nt[Ve]);else $($.P+$.F*(rt||ye),mt,Nt);return Nt}},function(x,g,C){x.exports=!C(4)&&!C(8)(function(){return Object.defineProperty(C(36)("div"),"a",{get:function(){return 7}}).a!=7})},function(x,g,C){var T=C(11),$=C(3).document,H=T($)&&T($.createElement);x.exports=function(K){return H?$.createElement(K):{}}},function(x,g,C){x.exports=C(6)},function(x,g,C){var T=C(10),$=C(56),H=C(27),K=C(25)("IE_PROTO"),ce=function(){},oe=function(){var xe,Se=C(36)("iframe"),k=H.length;for(Se.style.display="none",C(60).appendChild(Se),Se.src="javascript:",(xe=Se.contentWindow.document).open(),xe.write("<script>document.F=Object<\/script>"),xe.close(),oe=xe.F;k--;)delete oe.prototype[H[k]];return oe()};x.exports=Object.create||function(xe,Se){var k;return xe!==null?(ce.prototype=T(xe),k=new ce,ce.prototype=null,k[K]=xe):k=oe(),Se===void 0?k:$(k,Se)}},function(x,g,C){var T=C(5),$=C(9),H=C(57)(!1),K=C(25)("IE_PROTO");x.exports=function(ce,oe){var xe,Se=$(ce),k=0,rt=[];for(xe in Se)xe!=K&&T(Se,xe)&&rt.push(xe);for(;oe.length>k;)T(Se,xe=oe[k++])&&(~H(rt,xe)||rt.push(xe));return rt}},function(x,g,C){var T=C(24);x.exports=Object("z").propertyIsEnumerable(0)?Object:function($){return T($)=="String"?$.split(""):Object($)}},function(x,g,C){var T=C(39),$=C(27).concat("length","prototype");g.f=Object.getOwnPropertyNames||function(H){return T(H,$)}},function(x,g,C){var T=C(24),$=C(2)("toStringTag"),H=T(function(){return arguments}())=="Arguments";x.exports=function(K){var ce,oe,xe;return K===void 0?"Undefined":K===null?"Null":typeof(oe=function(Se,k){try{return Se[k]}catch(rt){}}(ce=Object(K),$))=="string"?oe:H?T(ce):(xe=T(ce))=="Object"&&typeof ce.callee=="function"?"Arguments":xe}},function(x,g){var C;C=function(){return this}();try{C=C||new Function("return this")()}catch(T){typeof window=="object"&&(C=window)}x.exports=C},function(x,g){var C=/-?\d+(\.\d+)?%?/g;x.exports=function(T){return T.match(C)}},function(x,g,C){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.getBase16Theme=g.createStyling=g.invertTheme=void 0;var T=lt(C(49)),$=lt(C(76)),H=lt(C(81)),K=lt(C(89)),ce=lt(C(93)),oe=function(Ve){if(Ve&&Ve.__esModule)return Ve;var ke={};if(Ve!=null)for(var dt in Ve)Object.prototype.hasOwnProperty.call(Ve,dt)&&(ke[dt]=Ve[dt]);return ke.default=Ve,ke}(C(94)),xe=lt(C(132)),Se=lt(C(133)),k=lt(C(138)),rt=C(139);function lt(Ve){return Ve&&Ve.__esModule?Ve:{default:Ve}}var Qt=oe.default,mt=(0,K.default)(Qt),Pt=(0,k.default)(Se.default,rt.rgb2yuv,function(Ve){var ke,dt=(0,H.default)(Ve,3),Et=dt[0],Z=dt[1],ye=dt[2];return[(ke=Et,ke<.25?1:ke<.5?.9-ke:1.1-ke),Z,ye]},rt.yuv2rgb,xe.default),O=function(Ve){return function(ke){return{className:[ke.className,Ve.className].filter(Boolean).join(" "),style:(0,$.default)({},ke.style||{},Ve.style||{})}}},Ye=function(Ve,ke){var dt=(0,K.default)(ke);for(var Et in Ve)dt.indexOf(Et)===-1&&dt.push(Et);return dt.reduce(function(Z,ye){return Z[ye]=function(ge,ve){if(ge===void 0)return ve;if(ve===void 0)return ge;var _e=ge===void 0?"undefined":(0,T.default)(ge),we=ve===void 0?"undefined":(0,T.default)(ve);switch(_e){case"string":switch(we){case"string":return[ve,ge].filter(Boolean).join(" ");case"object":return O({className:ge,style:ve});case"function":return function(de){for(var Y=arguments.length,te=Array(Y>1?Y-1:0),Oe=1;Oe<Y;Oe++)te[Oe-1]=arguments[Oe];return O({className:ge})(ve.apply(void 0,[de].concat(te)))}}case"object":switch(we){case"string":return O({className:ve,style:ge});case"object":return(0,$.default)({},ve,ge);case"function":return function(de){for(var Y=arguments.length,te=Array(Y>1?Y-1:0),Oe=1;Oe<Y;Oe++)te[Oe-1]=arguments[Oe];return O({style:ge})(ve.apply(void 0,[de].concat(te)))}}case"function":switch(we){case"string":return function(de){for(var Y=arguments.length,te=Array(Y>1?Y-1:0),Oe=1;Oe<Y;Oe++)te[Oe-1]=arguments[Oe];return ge.apply(void 0,[O(de)({className:ve})].concat(te))};case"object":return function(de){for(var Y=arguments.length,te=Array(Y>1?Y-1:0),Oe=1;Oe<Y;Oe++)te[Oe-1]=arguments[Oe];return ge.apply(void 0,[O(de)({style:ve})].concat(te))};case"function":return function(de){for(var Y=arguments.length,te=Array(Y>1?Y-1:0),Oe=1;Oe<Y;Oe++)te[Oe-1]=arguments[Oe];return ge.apply(void 0,[ve.apply(void 0,[de].concat(te))].concat(te))}}}}(Ve[ye],ke[ye]),Z},{})},gt=function(Ve,ke){for(var dt=arguments.length,Et=Array(dt>2?dt-2:0),Z=2;Z<dt;Z++)Et[Z-2]=arguments[Z];if(ke===null)return Ve;Array.isArray(ke)||(ke=[ke]);var ye=ke.map(function(ve){return Ve[ve]}).filter(Boolean),ge=ye.reduce(function(ve,_e){return typeof _e=="string"?ve.className=[ve.className,_e].filter(Boolean).join(" "):(_e===void 0?"undefined":(0,T.default)(_e))==="object"?ve.style=(0,$.default)({},ve.style,_e):typeof _e=="function"&&(ve=(0,$.default)({},ve,_e.apply(void 0,[ve].concat(Et)))),ve},{className:"",style:{}});return ge.className||delete ge.className,(0,K.default)(ge.style).length===0&&delete ge.style,ge},Ot=g.invertTheme=function(Ve){return(0,K.default)(Ve).reduce(function(ke,dt){return ke[dt]=/^base/.test(dt)?Pt(Ve[dt]):dt==="scheme"?Ve[dt]+":inverted":Ve[dt],ke},{})},Nt=(g.createStyling=(0,ce.default)(function(Ve){for(var ke=arguments.length,dt=Array(ke>3?ke-3:0),Et=3;Et<ke;Et++)dt[Et-3]=arguments[Et];var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ge=Z.defaultBase16,ve=ge===void 0?Qt:ge,_e=Z.base16Themes,we=_e===void 0?null:_e,de=Nt(ye,we);de&&(ye=(0,$.default)({},de,ye));var Y=mt.reduce(function(Ae,Te){return Ae[Te]=ye[Te]||ve[Te],Ae},{}),te=(0,K.default)(ye).reduce(function(Ae,Te){return mt.indexOf(Te)===-1&&(Ae[Te]=ye[Te]),Ae},{}),Oe=Ve(Y),ee=Ye(te,Oe);return(0,ce.default)(gt,2).apply(void 0,[ee].concat(dt))},3),g.getBase16Theme=function(Ve,ke){if(Ve&&Ve.extend&&(Ve=Ve.extend),typeof Ve=="string"){var dt=Ve.split(":"),Et=(0,H.default)(dt,2),Z=Et[0],ye=Et[1];Ve=(ke||{})[Z]||oe[Z],ye==="inverted"&&(Ve=Ot(Ve))}return Ve&&Ve.hasOwnProperty("base00")?Ve:void 0})},function(x,g,C){"use strict";var T,$=typeof Reflect=="object"?Reflect:null,H=$&&typeof $.apply=="function"?$.apply:function(O,Ye,gt){return Function.prototype.apply.call(O,Ye,gt)};T=$&&typeof $.ownKeys=="function"?$.ownKeys:Object.getOwnPropertySymbols?function(O){return Object.getOwnPropertyNames(O).concat(Object.getOwnPropertySymbols(O))}:function(O){return Object.getOwnPropertyNames(O)};var K=Number.isNaN||function(O){return O!=O};function ce(){ce.init.call(this)}x.exports=ce,x.exports.once=function(O,Ye){return new Promise(function(gt,Ot){function Nt(){Ve!==void 0&&O.removeListener("error",Ve),gt([].slice.call(arguments))}var Ve;Ye!=="error"&&(Ve=function(ke){O.removeListener(Ye,Nt),Ot(ke)},O.once("error",Ve)),O.once(Ye,Nt)})},ce.EventEmitter=ce,ce.prototype._events=void 0,ce.prototype._eventsCount=0,ce.prototype._maxListeners=void 0;var oe=10;function xe(O){if(typeof O!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof O)}function Se(O){return O._maxListeners===void 0?ce.defaultMaxListeners:O._maxListeners}function k(O,Ye,gt,Ot){var Nt,Ve,ke,dt;if(xe(gt),(Ve=O._events)===void 0?(Ve=O._events=Object.create(null),O._eventsCount=0):(Ve.newListener!==void 0&&(O.emit("newListener",Ye,gt.listener?gt.listener:gt),Ve=O._events),ke=Ve[Ye]),ke===void 0)ke=Ve[Ye]=gt,++O._eventsCount;else if(typeof ke=="function"?ke=Ve[Ye]=Ot?[gt,ke]:[ke,gt]:Ot?ke.unshift(gt):ke.push(gt),(Nt=Se(O))>0&&ke.length>Nt&&!ke.warned){ke.warned=!0;var Et=new Error("Possible EventEmitter memory leak detected. "+ke.length+" "+String(Ye)+" listeners added. Use emitter.setMaxListeners() to increase limit");Et.name="MaxListenersExceededWarning",Et.emitter=O,Et.type=Ye,Et.count=ke.length,dt=Et,console&&console.warn&&console.warn(dt)}return O}function rt(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function lt(O,Ye,gt){var Ot={fired:!1,wrapFn:void 0,target:O,type:Ye,listener:gt},Nt=rt.bind(Ot);return Nt.listener=gt,Ot.wrapFn=Nt,Nt}function Qt(O,Ye,gt){var Ot=O._events;if(Ot===void 0)return[];var Nt=Ot[Ye];return Nt===void 0?[]:typeof Nt=="function"?gt?[Nt.listener||Nt]:[Nt]:gt?function(Ve){for(var ke=new Array(Ve.length),dt=0;dt<ke.length;++dt)ke[dt]=Ve[dt].listener||Ve[dt];return ke}(Nt):Pt(Nt,Nt.length)}function mt(O){var Ye=this._events;if(Ye!==void 0){var gt=Ye[O];if(typeof gt=="function")return 1;if(gt!==void 0)return gt.length}return 0}function Pt(O,Ye){for(var gt=new Array(Ye),Ot=0;Ot<Ye;++Ot)gt[Ot]=O[Ot];return gt}Object.defineProperty(ce,"defaultMaxListeners",{enumerable:!0,get:function(){return oe},set:function(O){if(typeof O!="number"||O<0||K(O))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+O+".");oe=O}}),ce.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ce.prototype.setMaxListeners=function(O){if(typeof O!="number"||O<0||K(O))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+O+".");return this._maxListeners=O,this},ce.prototype.getMaxListeners=function(){return Se(this)},ce.prototype.emit=function(O){for(var Ye=[],gt=1;gt<arguments.length;gt++)Ye.push(arguments[gt]);var Ot=O==="error",Nt=this._events;if(Nt!==void 0)Ot=Ot&&Nt.error===void 0;else if(!Ot)return!1;if(Ot){var Ve;if(Ye.length>0&&(Ve=Ye[0]),Ve instanceof Error)throw Ve;var ke=new Error("Unhandled error."+(Ve?" ("+Ve.message+")":""));throw ke.context=Ve,ke}var dt=Nt[O];if(dt===void 0)return!1;if(typeof dt=="function")H(dt,this,Ye);else{var Et=dt.length,Z=Pt(dt,Et);for(gt=0;gt<Et;++gt)H(Z[gt],this,Ye)}return!0},ce.prototype.addListener=function(O,Ye){return k(this,O,Ye,!1)},ce.prototype.on=ce.prototype.addListener,ce.prototype.prependListener=function(O,Ye){return k(this,O,Ye,!0)},ce.prototype.once=function(O,Ye){return xe(Ye),this.on(O,lt(this,O,Ye)),this},ce.prototype.prependOnceListener=function(O,Ye){return xe(Ye),this.prependListener(O,lt(this,O,Ye)),this},ce.prototype.removeListener=function(O,Ye){var gt,Ot,Nt,Ve,ke;if(xe(Ye),(Ot=this._events)===void 0)return this;if((gt=Ot[O])===void 0)return this;if(gt===Ye||gt.listener===Ye)--this._eventsCount==0?this._events=Object.create(null):(delete Ot[O],Ot.removeListener&&this.emit("removeListener",O,gt.listener||Ye));else if(typeof gt!="function"){for(Nt=-1,Ve=gt.length-1;Ve>=0;Ve--)if(gt[Ve]===Ye||gt[Ve].listener===Ye){ke=gt[Ve].listener,Nt=Ve;break}if(Nt<0)return this;Nt===0?gt.shift():function(dt,Et){for(;Et+1<dt.length;Et++)dt[Et]=dt[Et+1];dt.pop()}(gt,Nt),gt.length===1&&(Ot[O]=gt[0]),Ot.removeListener!==void 0&&this.emit("removeListener",O,ke||Ye)}return this},ce.prototype.off=ce.prototype.removeListener,ce.prototype.removeAllListeners=function(O){var Ye,gt,Ot;if((gt=this._events)===void 0)return this;if(gt.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):gt[O]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete gt[O]),this;if(arguments.length===0){var Nt,Ve=Object.keys(gt);for(Ot=0;Ot<Ve.length;++Ot)(Nt=Ve[Ot])!=="removeListener"&&this.removeAllListeners(Nt);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(Ye=gt[O])=="function")this.removeListener(O,Ye);else if(Ye!==void 0)for(Ot=Ye.length-1;Ot>=0;Ot--)this.removeListener(O,Ye[Ot]);return this},ce.prototype.listeners=function(O){return Qt(this,O,!0)},ce.prototype.rawListeners=function(O){return Qt(this,O,!1)},ce.listenerCount=function(O,Ye){return typeof O.listenerCount=="function"?O.listenerCount(Ye):mt.call(O,Ye)},ce.prototype.listenerCount=mt,ce.prototype.eventNames=function(){return this._eventsCount>0?T(this._events):[]}},function(x,g,C){x.exports.Dispatcher=C(140)},function(x,g,C){x.exports=C(142)},function(x,g,C){"use strict";g.__esModule=!0;var T=K(C(50)),$=K(C(65)),H=typeof $.default=="function"&&typeof T.default=="symbol"?function(ce){return typeof ce}:function(ce){return ce&&typeof $.default=="function"&&ce.constructor===$.default&&ce!==$.default.prototype?"symbol":typeof ce};function K(ce){return ce&&ce.__esModule?ce:{default:ce}}g.default=typeof $.default=="function"&&H(T.default)==="symbol"?function(ce){return ce===void 0?"undefined":H(ce)}:function(ce){return ce&&typeof $.default=="function"&&ce.constructor===$.default&&ce!==$.default.prototype?"symbol":ce===void 0?"undefined":H(ce)}},function(x,g,C){x.exports={default:C(51),__esModule:!0}},function(x,g,C){C(20),C(29),x.exports=C(30).f("iterator")},function(x,g,C){var T=C(21),$=C(22);x.exports=function(H){return function(K,ce){var oe,xe,Se=String($(K)),k=T(ce),rt=Se.length;return k<0||k>=rt?H?"":void 0:(oe=Se.charCodeAt(k))<55296||oe>56319||k+1===rt||(xe=Se.charCodeAt(k+1))<56320||xe>57343?H?Se.charAt(k):oe:H?Se.slice(k,k+2):xe-56320+(oe-55296<<10)+65536}}},function(x,g,C){var T=C(54);x.exports=function($,H,K){if(T($),H===void 0)return $;switch(K){case 1:return function(ce){return $.call(H,ce)};case 2:return function(ce,oe){return $.call(H,ce,oe)};case 3:return function(ce,oe,xe){return $.call(H,ce,oe,xe)}}return function(){return $.apply(H,arguments)}}},function(x,g){x.exports=function(C){if(typeof C!="function")throw TypeError(C+" is not a function!");return C}},function(x,g,C){"use strict";var T=C(38),$=C(16),H=C(28),K={};C(6)(K,C(2)("iterator"),function(){return this}),x.exports=function(ce,oe,xe){ce.prototype=T(K,{next:$(1,xe)}),H(ce,oe+" Iterator")}},function(x,g,C){var T=C(7),$=C(10),H=C(13);x.exports=C(4)?Object.defineProperties:function(K,ce){$(K);for(var oe,xe=H(ce),Se=xe.length,k=0;Se>k;)T.f(K,oe=xe[k++],ce[oe]);return K}},function(x,g,C){var T=C(9),$=C(58),H=C(59);x.exports=function(K){return function(ce,oe,xe){var Se,k=T(ce),rt=$(k.length),lt=H(xe,rt);if(K&&oe!=oe){for(;rt>lt;)if((Se=k[lt++])!=Se)return!0}else for(;rt>lt;lt++)if((K||lt in k)&&k[lt]===oe)return K||lt||0;return!K&&-1}}},function(x,g,C){var T=C(21),$=Math.min;x.exports=function(H){return H>0?$(T(H),9007199254740991):0}},function(x,g,C){var T=C(21),$=Math.max,H=Math.min;x.exports=function(K,ce){return(K=T(K))<0?$(K+ce,0):H(K,ce)}},function(x,g,C){var T=C(3).document;x.exports=T&&T.documentElement},function(x,g,C){var T=C(5),$=C(18),H=C(25)("IE_PROTO"),K=Object.prototype;x.exports=Object.getPrototypeOf||function(ce){return ce=$(ce),T(ce,H)?ce[H]:typeof ce.constructor=="function"&&ce instanceof ce.constructor?ce.constructor.prototype:ce instanceof Object?K:null}},function(x,g,C){"use strict";var T=C(63),$=C(64),H=C(12),K=C(9);x.exports=C(34)(Array,"Array",function(ce,oe){this._t=K(ce),this._i=0,this._k=oe},function(){var ce=this._t,oe=this._k,xe=this._i++;return!ce||xe>=ce.length?(this._t=void 0,$(1)):$(0,oe=="keys"?xe:oe=="values"?ce[xe]:[xe,ce[xe]])},"values"),H.Arguments=H.Array,T("keys"),T("values"),T("entries")},function(x,g){x.exports=function(){}},function(x,g){x.exports=function(C,T){return{value:T,done:!!C}}},function(x,g,C){x.exports={default:C(66),__esModule:!0}},function(x,g,C){C(67),C(73),C(74),C(75),x.exports=C(1).Symbol},function(x,g,C){"use strict";var T=C(3),$=C(5),H=C(4),K=C(15),ce=C(37),oe=C(68).KEY,xe=C(8),Se=C(26),k=C(28),rt=C(17),lt=C(2),Qt=C(30),mt=C(31),Pt=C(69),O=C(70),Ye=C(10),gt=C(11),Ot=C(18),Nt=C(9),Ve=C(23),ke=C(16),dt=C(38),Et=C(71),Z=C(72),ye=C(32),ge=C(7),ve=C(13),_e=Z.f,we=ge.f,de=Et.f,Y=T.Symbol,te=T.JSON,Oe=te&&te.stringify,ee=lt("_hidden"),Ae=lt("toPrimitive"),Te={}.propertyIsEnumerable,$e=Se("symbol-registry"),Je=Se("symbols"),it=Se("op-symbols"),tt=Object.prototype,St=typeof Y=="function"&&!!ye.f,ot=T.QObject,Rt=!ot||!ot.prototype||!ot.prototype.findChild,Lt=H&&xe(function(){return dt(we({},"a",{get:function(){return we(this,"a",{value:7}).a}})).a!=7})?function(Ce,Ne,Ze){var et=_e(tt,Ne);et&&delete tt[Ne],we(Ce,Ne,Ze),et&&Ce!==tt&&we(tt,Ne,et)}:we,pt=function(Ce){var Ne=Je[Ce]=dt(Y.prototype);return Ne._k=Ce,Ne},Xe=St&&typeof Y.iterator=="symbol"?function(Ce){return typeof Ce=="symbol"}:function(Ce){return Ce instanceof Y},Be=function(Ce,Ne,Ze){return Ce===tt&&Be(it,Ne,Ze),Ye(Ce),Ne=Ve(Ne,!0),Ye(Ze),$(Je,Ne)?(Ze.enumerable?($(Ce,ee)&&Ce[ee][Ne]&&(Ce[ee][Ne]=!1),Ze=dt(Ze,{enumerable:ke(0,!1)})):($(Ce,ee)||we(Ce,ee,ke(1,{})),Ce[ee][Ne]=!0),Lt(Ce,Ne,Ze)):we(Ce,Ne,Ze)},Ct=function(Ce,Ne){Ye(Ce);for(var Ze,et=Pt(Ne=Nt(Ne)),Ft=0,qt=et.length;qt>Ft;)Be(Ce,Ze=et[Ft++],Ne[Ze]);return Ce},Wt=function(Ce){var Ne=Te.call(this,Ce=Ve(Ce,!0));return!(this===tt&&$(Je,Ce)&&!$(it,Ce))&&(!(Ne||!$(this,Ce)||!$(Je,Ce)||$(this,ee)&&this[ee][Ce])||Ne)},Xt=function(Ce,Ne){if(Ce=Nt(Ce),Ne=Ve(Ne,!0),Ce!==tt||!$(Je,Ne)||$(it,Ne)){var Ze=_e(Ce,Ne);return!Ze||!$(Je,Ne)||$(Ce,ee)&&Ce[ee][Ne]||(Ze.enumerable=!0),Ze}},Yt=function(Ce){for(var Ne,Ze=de(Nt(Ce)),et=[],Ft=0;Ze.length>Ft;)$(Je,Ne=Ze[Ft++])||Ne==ee||Ne==oe||et.push(Ne);return et},wn=function(Ce){for(var Ne,Ze=Ce===tt,et=de(Ze?it:Nt(Ce)),Ft=[],qt=0;et.length>qt;)!$(Je,Ne=et[qt++])||Ze&&!$(tt,Ne)||Ft.push(Je[Ne]);return Ft};St||(ce((Y=function(){if(this instanceof Y)throw TypeError("Symbol is not a constructor!");var Ce=rt(arguments.length>0?arguments[0]:void 0),Ne=function(Ze){this===tt&&Ne.call(it,Ze),$(this,ee)&&$(this[ee],Ce)&&(this[ee][Ce]=!1),Lt(this,Ce,ke(1,Ze))};return H&&Rt&&Lt(tt,Ce,{configurable:!0,set:Ne}),pt(Ce)}).prototype,"toString",function(){return this._k}),Z.f=Xt,ge.f=Be,C(41).f=Et.f=Yt,C(19).f=Wt,ye.f=wn,H&&!C(14)&&ce(tt,"propertyIsEnumerable",Wt,!0),Qt.f=function(Ce){return pt(lt(Ce))}),K(K.G+K.W+K.F*!St,{Symbol:Y});for(var an="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),un=0;an.length>un;)lt(an[un++]);for(var Tn=ve(lt.store),yt=0;Tn.length>yt;)mt(Tn[yt++]);K(K.S+K.F*!St,"Symbol",{for:function(Ce){return $($e,Ce+="")?$e[Ce]:$e[Ce]=Y(Ce)},keyFor:function(Ce){if(!Xe(Ce))throw TypeError(Ce+" is not a symbol!");for(var Ne in $e)if($e[Ne]===Ce)return Ne},useSetter:function(){Rt=!0},useSimple:function(){Rt=!1}}),K(K.S+K.F*!St,"Object",{create:function(Ce,Ne){return Ne===void 0?dt(Ce):Ct(dt(Ce),Ne)},defineProperty:Be,defineProperties:Ct,getOwnPropertyDescriptor:Xt,getOwnPropertyNames:Yt,getOwnPropertySymbols:wn});var pe=xe(function(){ye.f(1)});K(K.S+K.F*pe,"Object",{getOwnPropertySymbols:function(Ce){return ye.f(Ot(Ce))}}),te&&K(K.S+K.F*(!St||xe(function(){var Ce=Y();return Oe([Ce])!="[null]"||Oe({a:Ce})!="{}"||Oe(Object(Ce))!="{}"})),"JSON",{stringify:function(Ce){for(var Ne,Ze,et=[Ce],Ft=1;arguments.length>Ft;)et.push(arguments[Ft++]);if(Ze=Ne=et[1],(gt(Ne)||Ce!==void 0)&&!Xe(Ce))return O(Ne)||(Ne=function(qt,$n){if(typeof Ze=="function"&&($n=Ze.call(this,qt,$n)),!Xe($n))return $n}),et[1]=Ne,Oe.apply(te,et)}}),Y.prototype[Ae]||C(6)(Y.prototype,Ae,Y.prototype.valueOf),k(Y,"Symbol"),k(Math,"Math",!0),k(T.JSON,"JSON",!0)},function(x,g,C){var T=C(17)("meta"),$=C(11),H=C(5),K=C(7).f,ce=0,oe=Object.isExtensible||function(){return!0},xe=!C(8)(function(){return oe(Object.preventExtensions({}))}),Se=function(rt){K(rt,T,{value:{i:"O"+ ++ce,w:{}}})},k=x.exports={KEY:T,NEED:!1,fastKey:function(rt,lt){if(!$(rt))return typeof rt=="symbol"?rt:(typeof rt=="string"?"S":"P")+rt;if(!H(rt,T)){if(!oe(rt))return"F";if(!lt)return"E";Se(rt)}return rt[T].i},getWeak:function(rt,lt){if(!H(rt,T)){if(!oe(rt))return!0;if(!lt)return!1;Se(rt)}return rt[T].w},onFreeze:function(rt){return xe&&k.NEED&&oe(rt)&&!H(rt,T)&&Se(rt),rt}}},function(x,g,C){var T=C(13),$=C(32),H=C(19);x.exports=function(K){var ce=T(K),oe=$.f;if(oe)for(var xe,Se=oe(K),k=H.f,rt=0;Se.length>rt;)k.call(K,xe=Se[rt++])&&ce.push(xe);return ce}},function(x,g,C){var T=C(24);x.exports=Array.isArray||function($){return T($)=="Array"}},function(x,g,C){var T=C(9),$=C(41).f,H={}.toString,K=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];x.exports.f=function(ce){return K&&H.call(ce)=="[object Window]"?function(oe){try{return $(oe)}catch(xe){return K.slice()}}(ce):$(T(ce))}},function(x,g,C){var T=C(19),$=C(16),H=C(9),K=C(23),ce=C(5),oe=C(35),xe=Object.getOwnPropertyDescriptor;g.f=C(4)?xe:function(Se,k){if(Se=H(Se),k=K(k,!0),oe)try{return xe(Se,k)}catch(rt){}if(ce(Se,k))return $(!T.f.call(Se,k),Se[k])}},function(x,g){},function(x,g,C){C(31)("asyncIterator")},function(x,g,C){C(31)("observable")},function(x,g,C){"use strict";g.__esModule=!0;var T,$=C(77),H=(T=$)&&T.__esModule?T:{default:T};g.default=H.default||function(K){for(var ce=1;ce<arguments.length;ce++){var oe=arguments[ce];for(var xe in oe)Object.prototype.hasOwnProperty.call(oe,xe)&&(K[xe]=oe[xe])}return K}},function(x,g,C){x.exports={default:C(78),__esModule:!0}},function(x,g,C){C(79),x.exports=C(1).Object.assign},function(x,g,C){var T=C(15);T(T.S+T.F,"Object",{assign:C(80)})},function(x,g,C){"use strict";var T=C(4),$=C(13),H=C(32),K=C(19),ce=C(18),oe=C(40),xe=Object.assign;x.exports=!xe||C(8)(function(){var Se={},k={},rt=Symbol(),lt="abcdefghijklmnopqrst";return Se[rt]=7,lt.split("").forEach(function(Qt){k[Qt]=Qt}),xe({},Se)[rt]!=7||Object.keys(xe({},k)).join("")!=lt})?function(Se,k){for(var rt=ce(Se),lt=arguments.length,Qt=1,mt=H.f,Pt=K.f;lt>Qt;)for(var O,Ye=oe(arguments[Qt++]),gt=mt?$(Ye).concat(mt(Ye)):$(Ye),Ot=gt.length,Nt=0;Ot>Nt;)O=gt[Nt++],T&&!Pt.call(Ye,O)||(rt[O]=Ye[O]);return rt}:xe},function(x,g,C){"use strict";g.__esModule=!0;var T=H(C(82)),$=H(C(85));function H(K){return K&&K.__esModule?K:{default:K}}g.default=function(K,ce){if(Array.isArray(K))return K;if((0,T.default)(Object(K)))return function(oe,xe){var Se=[],k=!0,rt=!1,lt=void 0;try{for(var Qt,mt=(0,$.default)(oe);!(k=(Qt=mt.next()).done)&&(Se.push(Qt.value),!xe||Se.length!==xe);k=!0);}catch(Pt){rt=!0,lt=Pt}finally{try{!k&&mt.return&&mt.return()}finally{if(rt)throw lt}}return Se}(K,ce);throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(x,g,C){x.exports={default:C(83),__esModule:!0}},function(x,g,C){C(29),C(20),x.exports=C(84)},function(x,g,C){var T=C(42),$=C(2)("iterator"),H=C(12);x.exports=C(1).isIterable=function(K){var ce=Object(K);return ce[$]!==void 0||"@@iterator"in ce||H.hasOwnProperty(T(ce))}},function(x,g,C){x.exports={default:C(86),__esModule:!0}},function(x,g,C){C(29),C(20),x.exports=C(87)},function(x,g,C){var T=C(10),$=C(88);x.exports=C(1).getIterator=function(H){var K=$(H);if(typeof K!="function")throw TypeError(H+" is not iterable!");return T(K.call(H))}},function(x,g,C){var T=C(42),$=C(2)("iterator"),H=C(12);x.exports=C(1).getIteratorMethod=function(K){if(K!=null)return K[$]||K["@@iterator"]||H[T(K)]}},function(x,g,C){x.exports={default:C(90),__esModule:!0}},function(x,g,C){C(91),x.exports=C(1).Object.keys},function(x,g,C){var T=C(18),$=C(13);C(92)("keys",function(){return function(H){return $(T(H))}})},function(x,g,C){var T=C(15),$=C(1),H=C(8);x.exports=function(K,ce){var oe=($.Object||{})[K]||Object[K],xe={};xe[K]=ce(oe),T(T.S+T.F*H(function(){oe(1)}),"Object",xe)}},function(x,g,C){(function(T){var $=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],H=/^\s+|\s+$/g,K=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ce=/\{\n\/\* \[wrapped with (.+)\] \*/,oe=/,? & /,xe=/^[-+]0x[0-9a-f]+$/i,Se=/^0b[01]+$/i,k=/^\[object .+?Constructor\]$/,rt=/^0o[0-7]+$/i,lt=/^(?:0|[1-9]\d*)$/,Qt=parseInt,mt=typeof T=="object"&&T&&T.Object===Object&&T,Pt=typeof self=="object"&&self&&self.Object===Object&&self,O=mt||Pt||Function("return this")();function Ye(yt,pe,Ce){switch(Ce.length){case 0:return yt.call(pe);case 1:return yt.call(pe,Ce[0]);case 2:return yt.call(pe,Ce[0],Ce[1]);case 3:return yt.call(pe,Ce[0],Ce[1],Ce[2])}return yt.apply(pe,Ce)}function gt(yt,pe){return!!(yt&&yt.length)&&function(Ce,Ne,Ze){if(Ne!=Ne)return function(qt,$n,dn,Me){for(var Qe=qt.length,Ke=dn+(Me?1:-1);Me?Ke--:++Ke<Qe;)if($n(qt[Ke],Ke,qt))return Ke;return-1}(Ce,Ot,Ze);for(var et=Ze-1,Ft=Ce.length;++et<Ft;)if(Ce[et]===Ne)return et;return-1}(yt,pe,0)>-1}function Ot(yt){return yt!=yt}function Nt(yt,pe){for(var Ce=yt.length,Ne=0;Ce--;)yt[Ce]===pe&&Ne++;return Ne}function Ve(yt,pe){for(var Ce=-1,Ne=yt.length,Ze=0,et=[];++Ce<Ne;){var Ft=yt[Ce];Ft!==pe&&Ft!=="__lodash_placeholder__"||(yt[Ce]="__lodash_placeholder__",et[Ze++]=Ce)}return et}var ke,dt,Et,Z=Function.prototype,ye=Object.prototype,ge=O["__core-js_shared__"],ve=(ke=/[^.]+$/.exec(ge&&ge.keys&&ge.keys.IE_PROTO||""))?"Symbol(src)_1."+ke:"",_e=Z.toString,we=ye.hasOwnProperty,de=ye.toString,Y=RegExp("^"+_e.call(we).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=Object.create,Oe=Math.max,ee=Math.min,Ae=(dt=pt(Object,"defineProperty"),(Et=pt.name)&&Et.length>2?dt:void 0);function Te(yt){return an(yt)?te(yt):{}}function $e(yt){return!(!an(yt)||function(pe){return!!ve&&ve in pe}(yt))&&(function(pe){var Ce=an(pe)?de.call(pe):"";return Ce=="[object Function]"||Ce=="[object GeneratorFunction]"}(yt)||function(pe){var Ce=!1;if(pe!=null&&typeof pe.toString!="function")try{Ce=!!(pe+"")}catch(Ne){}return Ce}(yt)?Y:k).test(function(pe){if(pe!=null){try{return _e.call(pe)}catch(Ce){}try{return pe+""}catch(Ce){}}return""}(yt))}function Je(yt,pe,Ce,Ne){for(var Ze=-1,et=yt.length,Ft=Ce.length,qt=-1,$n=pe.length,dn=Oe(et-Ft,0),Me=Array($n+dn),Qe=!Ne;++qt<$n;)Me[qt]=pe[qt];for(;++Ze<Ft;)(Qe||Ze<et)&&(Me[Ce[Ze]]=yt[Ze]);for(;dn--;)Me[qt++]=yt[Ze++];return Me}function it(yt,pe,Ce,Ne){for(var Ze=-1,et=yt.length,Ft=-1,qt=Ce.length,$n=-1,dn=pe.length,Me=Oe(et-qt,0),Qe=Array(Me+dn),Ke=!Ne;++Ze<Me;)Qe[Ze]=yt[Ze];for(var at=Ze;++$n<dn;)Qe[at+$n]=pe[$n];for(;++Ft<qt;)(Ke||Ze<et)&&(Qe[at+Ce[Ft]]=yt[Ze++]);return Qe}function tt(yt){return function(){var pe=arguments;switch(pe.length){case 0:return new yt;case 1:return new yt(pe[0]);case 2:return new yt(pe[0],pe[1]);case 3:return new yt(pe[0],pe[1],pe[2]);case 4:return new yt(pe[0],pe[1],pe[2],pe[3]);case 5:return new yt(pe[0],pe[1],pe[2],pe[3],pe[4]);case 6:return new yt(pe[0],pe[1],pe[2],pe[3],pe[4],pe[5]);case 7:return new yt(pe[0],pe[1],pe[2],pe[3],pe[4],pe[5],pe[6])}var Ce=Te(yt.prototype),Ne=yt.apply(Ce,pe);return an(Ne)?Ne:Ce}}function St(yt,pe,Ce,Ne,Ze,et,Ft,qt,$n,dn){var Me=128&pe,Qe=1&pe,Ke=2&pe,at=24&pe,Bt=512&pe,En=Ke?void 0:tt(yt);return function ln(){for(var zt=arguments.length,me=Array(zt),Ie=zt;Ie--;)me[Ie]=arguments[Ie];if(at)var ct=Lt(ln),It=Nt(me,ct);if(Ne&&(me=Je(me,Ne,Ze,at)),et&&(me=it(me,et,Ft,at)),zt-=It,at&&zt<dn){var en=Ve(me,ct);return ot(yt,pe,St,ln.placeholder,Ce,me,en,qt,$n,dn-zt)}var bn=Qe?Ce:this,Vn=Ke?bn[yt]:yt;return zt=me.length,qt?me=Wt(me,qt):Bt&&zt>1&&me.reverse(),Me&&$n<zt&&(me.length=$n),this&&this!==O&&this instanceof ln&&(Vn=En||tt(Vn)),Vn.apply(bn,me)}}function ot(yt,pe,Ce,Ne,Ze,et,Ft,qt,$n,dn){var Me=8&pe;pe|=Me?32:64,4&(pe&=~(Me?64:32))||(pe&=-4);var Qe=Ce(yt,pe,Ze,Me?et:void 0,Me?Ft:void 0,Me?void 0:et,Me?void 0:Ft,qt,$n,dn);return Qe.placeholder=Ne,Xt(Qe,yt,pe)}function Rt(yt,pe,Ce,Ne,Ze,et,Ft,qt){var $n=2&pe;if(!$n&&typeof yt!="function")throw new TypeError("Expected a function");var dn=Ne?Ne.length:0;if(dn||(pe&=-97,Ne=Ze=void 0),Ft=Ft===void 0?Ft:Oe(Tn(Ft),0),qt=qt===void 0?qt:Tn(qt),dn-=Ze?Ze.length:0,64&pe){var Me=Ne,Qe=Ze;Ne=Ze=void 0}var Ke=[yt,pe,Ce,Ne,Ze,Me,Qe,et,Ft,qt];if(yt=Ke[0],pe=Ke[1],Ce=Ke[2],Ne=Ke[3],Ze=Ke[4],!(qt=Ke[9]=Ke[9]==null?$n?0:yt.length:Oe(Ke[9]-dn,0))&&24&pe&&(pe&=-25),pe&&pe!=1)at=pe==8||pe==16?function(Bt,En,ln){var zt=tt(Bt);return function me(){for(var Ie=arguments.length,ct=Array(Ie),It=Ie,en=Lt(me);It--;)ct[It]=arguments[It];var bn=Ie<3&&ct[0]!==en&&ct[Ie-1]!==en?[]:Ve(ct,en);if((Ie-=bn.length)<ln)return ot(Bt,En,St,me.placeholder,void 0,ct,bn,void 0,void 0,ln-Ie);var Vn=this&&this!==O&&this instanceof me?zt:Bt;return Ye(Vn,this,ct)}}(yt,pe,qt):pe!=32&&pe!=33||Ze.length?St.apply(void 0,Ke):function(Bt,En,ln,zt){var me=1&En,Ie=tt(Bt);return function ct(){for(var It=-1,en=arguments.length,bn=-1,Vn=zt.length,tr=Array(Vn+en),lr=this&&this!==O&&this instanceof ct?Ie:Bt;++bn<Vn;)tr[bn]=zt[bn];for(;en--;)tr[bn++]=arguments[++It];return Ye(lr,me?ln:this,tr)}}(yt,pe,Ce,Ne);else var at=function(Bt,En,ln){var zt=1&En,me=tt(Bt);return function Ie(){var ct=this&&this!==O&&this instanceof Ie?me:Bt;return ct.apply(zt?ln:this,arguments)}}(yt,pe,Ce);return Xt(at,yt,pe)}function Lt(yt){return yt.placeholder}function pt(yt,pe){var Ce=function(Ne,Ze){return Ne==null?void 0:Ne[Ze]}(yt,pe);return $e(Ce)?Ce:void 0}function Xe(yt){var pe=yt.match(ce);return pe?pe[1].split(oe):[]}function Be(yt,pe){var Ce=pe.length,Ne=Ce-1;return pe[Ne]=(Ce>1?"& ":"")+pe[Ne],pe=pe.join(Ce>2?", ":" "),yt.replace(K,`{
/* [wrapped with `+pe+`] */
`)}function Ct(yt,pe){return!!(pe=pe==null?9007199254740991:pe)&&(typeof yt=="number"||lt.test(yt))&&yt>-1&&yt%1==0&&yt<pe}function Wt(yt,pe){for(var Ce=yt.length,Ne=ee(pe.length,Ce),Ze=function(Ft,qt){var $n=-1,dn=Ft.length;for(qt||(qt=Array(dn));++$n<dn;)qt[$n]=Ft[$n];return qt}(yt);Ne--;){var et=pe[Ne];yt[Ne]=Ct(et,Ce)?Ze[et]:void 0}return yt}var Xt=Ae?function(yt,pe,Ce){var Ne,Ze=pe+"";return Ae(yt,"toString",{configurable:!0,enumerable:!1,value:(Ne=Be(Ze,Yt(Xe(Ze),Ce)),function(){return Ne})})}:function(yt){return yt};function Yt(yt,pe){return function(Ce,Ne){for(var Ze=-1,et=Ce?Ce.length:0;++Ze<et&&Ne(Ce[Ze],Ze,Ce)!==!1;);}($,function(Ce){var Ne="_."+Ce[0];pe&Ce[1]&&!gt(yt,Ne)&&yt.push(Ne)}),yt.sort()}function wn(yt,pe,Ce){var Ne=Rt(yt,8,void 0,void 0,void 0,void 0,void 0,pe=Ce?void 0:pe);return Ne.placeholder=wn.placeholder,Ne}function an(yt){var pe=typeof yt;return!!yt&&(pe=="object"||pe=="function")}function un(yt){return yt?(yt=function(pe){if(typeof pe=="number")return pe;if(function(Ze){return typeof Ze=="symbol"||function(et){return!!et&&typeof et=="object"}(Ze)&&de.call(Ze)=="[object Symbol]"}(pe))return NaN;if(an(pe)){var Ce=typeof pe.valueOf=="function"?pe.valueOf():pe;pe=an(Ce)?Ce+"":Ce}if(typeof pe!="string")return pe===0?pe:+pe;pe=pe.replace(H,"");var Ne=Se.test(pe);return Ne||rt.test(pe)?Qt(pe.slice(2),Ne?2:8):xe.test(pe)?NaN:+pe}(yt))===1/0||yt===-1/0?17976931348623157e292*(yt<0?-1:1):yt==yt?yt:0:yt===0?yt:0}function Tn(yt){var pe=un(yt),Ce=pe%1;return pe==pe?Ce?pe-Ce:pe:0}wn.placeholder={},x.exports=wn}).call(this,C(43))},function(x,g,C){"use strict";function T(it){return it&&it.__esModule?it.default:it}g.__esModule=!0;var $=C(95);g.threezerotwofour=T($);var H=C(96);g.apathy=T(H);var K=C(97);g.ashes=T(K);var ce=C(98);g.atelierDune=T(ce);var oe=C(99);g.atelierForest=T(oe);var xe=C(100);g.atelierHeath=T(xe);var Se=C(101);g.atelierLakeside=T(Se);var k=C(102);g.atelierSeaside=T(k);var rt=C(103);g.bespin=T(rt);var lt=C(104);g.brewer=T(lt);var Qt=C(105);g.bright=T(Qt);var mt=C(106);g.chalk=T(mt);var Pt=C(107);g.codeschool=T(Pt);var O=C(108);g.colors=T(O);var Ye=C(109);g.default=T(Ye);var gt=C(110);g.eighties=T(gt);var Ot=C(111);g.embers=T(Ot);var Nt=C(112);g.flat=T(Nt);var Ve=C(113);g.google=T(Ve);var ke=C(114);g.grayscale=T(ke);var dt=C(115);g.greenscreen=T(dt);var Et=C(116);g.harmonic=T(Et);var Z=C(117);g.hopscotch=T(Z);var ye=C(118);g.isotope=T(ye);var ge=C(119);g.marrakesh=T(ge);var ve=C(120);g.mocha=T(ve);var _e=C(121);g.monokai=T(_e);var we=C(122);g.ocean=T(we);var de=C(123);g.paraiso=T(de);var Y=C(124);g.pop=T(Y);var te=C(125);g.railscasts=T(te);var Oe=C(126);g.shapeshifter=T(Oe);var ee=C(127);g.solarized=T(ee);var Ae=C(128);g.summerfruit=T(Ae);var Te=C(129);g.tomorrow=T(Te);var $e=C(130);g.tube=T($e);var Je=C(131);g.twilight=T(Je)},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"threezerotwofour",author:"jan t. sott (http://github.com/idleberg)",base00:"#090300",base01:"#3a3432",base02:"#4a4543",base03:"#5c5855",base04:"#807d7c",base05:"#a5a2a2",base06:"#d6d5d4",base07:"#f7f7f7",base08:"#db2d20",base09:"#e8bbd0",base0A:"#fded02",base0B:"#01a252",base0C:"#b5e4f4",base0D:"#01a0e4",base0E:"#a16a94",base0F:"#cdab53"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"apathy",author:"jannik siebert (https://github.com/janniks)",base00:"#031A16",base01:"#0B342D",base02:"#184E45",base03:"#2B685E",base04:"#5F9C92",base05:"#81B5AC",base06:"#A7CEC8",base07:"#D2E7E4",base08:"#3E9688",base09:"#3E7996",base0A:"#3E4C96",base0B:"#883E96",base0C:"#963E4C",base0D:"#96883E",base0E:"#4C963E",base0F:"#3E965B"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"ashes",author:"jannik siebert (https://github.com/janniks)",base00:"#1C2023",base01:"#393F45",base02:"#565E65",base03:"#747C84",base04:"#ADB3BA",base05:"#C7CCD1",base06:"#DFE2E5",base07:"#F3F4F5",base08:"#C7AE95",base09:"#C7C795",base0A:"#AEC795",base0B:"#95C7AE",base0C:"#95AEC7",base0D:"#AE95C7",base0E:"#C795AE",base0F:"#C79595"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"atelier dune",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/dune)",base00:"#20201d",base01:"#292824",base02:"#6e6b5e",base03:"#7d7a68",base04:"#999580",base05:"#a6a28c",base06:"#e8e4cf",base07:"#fefbec",base08:"#d73737",base09:"#b65611",base0A:"#cfb017",base0B:"#60ac39",base0C:"#1fad83",base0D:"#6684e1",base0E:"#b854d4",base0F:"#d43552"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"atelier forest",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/forest)",base00:"#1b1918",base01:"#2c2421",base02:"#68615e",base03:"#766e6b",base04:"#9c9491",base05:"#a8a19f",base06:"#e6e2e0",base07:"#f1efee",base08:"#f22c40",base09:"#df5320",base0A:"#d5911a",base0B:"#5ab738",base0C:"#00ad9c",base0D:"#407ee7",base0E:"#6666ea",base0F:"#c33ff3"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"atelier heath",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/heath)",base00:"#1b181b",base01:"#292329",base02:"#695d69",base03:"#776977",base04:"#9e8f9e",base05:"#ab9bab",base06:"#d8cad8",base07:"#f7f3f7",base08:"#ca402b",base09:"#a65926",base0A:"#bb8a35",base0B:"#379a37",base0C:"#159393",base0D:"#516aec",base0E:"#7b59c0",base0F:"#cc33cc"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"atelier lakeside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/lakeside/)",base00:"#161b1d",base01:"#1f292e",base02:"#516d7b",base03:"#5a7b8c",base04:"#7195a8",base05:"#7ea2b4",base06:"#c1e4f6",base07:"#ebf8ff",base08:"#d22d72",base09:"#935c25",base0A:"#8a8a0f",base0B:"#568c3b",base0C:"#2d8f6f",base0D:"#257fad",base0E:"#5d5db1",base0F:"#b72dd2"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"atelier seaside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/seaside/)",base00:"#131513",base01:"#242924",base02:"#5e6e5e",base03:"#687d68",base04:"#809980",base05:"#8ca68c",base06:"#cfe8cf",base07:"#f0fff0",base08:"#e6193c",base09:"#87711d",base0A:"#c3c322",base0B:"#29a329",base0C:"#1999b3",base0D:"#3d62f5",base0E:"#ad2bee",base0F:"#e619c3"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"bespin",author:"jan t. sott",base00:"#28211c",base01:"#36312e",base02:"#5e5d5c",base03:"#666666",base04:"#797977",base05:"#8a8986",base06:"#9d9b97",base07:"#baae9e",base08:"#cf6a4c",base09:"#cf7d34",base0A:"#f9ee98",base0B:"#54be0d",base0C:"#afc4db",base0D:"#5ea6ea",base0E:"#9b859d",base0F:"#937121"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"brewer",author:"timoth\xE9e poisot (http://github.com/tpoisot)",base00:"#0c0d0e",base01:"#2e2f30",base02:"#515253",base03:"#737475",base04:"#959697",base05:"#b7b8b9",base06:"#dadbdc",base07:"#fcfdfe",base08:"#e31a1c",base09:"#e6550d",base0A:"#dca060",base0B:"#31a354",base0C:"#80b1d3",base0D:"#3182bd",base0E:"#756bb1",base0F:"#b15928"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"bright",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#303030",base02:"#505050",base03:"#b0b0b0",base04:"#d0d0d0",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ffffff",base08:"#fb0120",base09:"#fc6d24",base0A:"#fda331",base0B:"#a1c659",base0C:"#76c7b7",base0D:"#6fb3d2",base0E:"#d381c3",base0F:"#be643c"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"chalk",author:"chris kempson (http://chriskempson.com)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#f5f5f5",base08:"#fb9fb1",base09:"#eda987",base0A:"#ddb26f",base0B:"#acc267",base0C:"#12cfc0",base0D:"#6fc2ef",base0E:"#e1a3ee",base0F:"#deaf8f"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"codeschool",author:"brettof86",base00:"#232c31",base01:"#1c3657",base02:"#2a343a",base03:"#3f4944",base04:"#84898c",base05:"#9ea7a6",base06:"#a7cfa3",base07:"#b5d8f6",base08:"#2a5491",base09:"#43820d",base0A:"#a03b1e",base0B:"#237986",base0C:"#b02f30",base0D:"#484d79",base0E:"#c59820",base0F:"#c98344"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"colors",author:"mrmrs (http://clrs.cc)",base00:"#111111",base01:"#333333",base02:"#555555",base03:"#777777",base04:"#999999",base05:"#bbbbbb",base06:"#dddddd",base07:"#ffffff",base08:"#ff4136",base09:"#ff851b",base0A:"#ffdc00",base0B:"#2ecc40",base0C:"#7fdbff",base0D:"#0074d9",base0E:"#b10dc9",base0F:"#85144b"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"default",author:"chris kempson (http://chriskempson.com)",base00:"#181818",base01:"#282828",base02:"#383838",base03:"#585858",base04:"#b8b8b8",base05:"#d8d8d8",base06:"#e8e8e8",base07:"#f8f8f8",base08:"#ab4642",base09:"#dc9656",base0A:"#f7ca88",base0B:"#a1b56c",base0C:"#86c1b9",base0D:"#7cafc2",base0E:"#ba8baf",base0F:"#a16946"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"eighties",author:"chris kempson (http://chriskempson.com)",base00:"#2d2d2d",base01:"#393939",base02:"#515151",base03:"#747369",base04:"#a09f93",base05:"#d3d0c8",base06:"#e8e6df",base07:"#f2f0ec",base08:"#f2777a",base09:"#f99157",base0A:"#ffcc66",base0B:"#99cc99",base0C:"#66cccc",base0D:"#6699cc",base0E:"#cc99cc",base0F:"#d27b53"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"embers",author:"jannik siebert (https://github.com/janniks)",base00:"#16130F",base01:"#2C2620",base02:"#433B32",base03:"#5A5047",base04:"#8A8075",base05:"#A39A90",base06:"#BEB6AE",base07:"#DBD6D1",base08:"#826D57",base09:"#828257",base0A:"#6D8257",base0B:"#57826D",base0C:"#576D82",base0D:"#6D5782",base0E:"#82576D",base0F:"#825757"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"flat",author:"chris kempson (http://chriskempson.com)",base00:"#2C3E50",base01:"#34495E",base02:"#7F8C8D",base03:"#95A5A6",base04:"#BDC3C7",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ECF0F1",base08:"#E74C3C",base09:"#E67E22",base0A:"#F1C40F",base0B:"#2ECC71",base0C:"#1ABC9C",base0D:"#3498DB",base0E:"#9B59B6",base0F:"#be643c"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"google",author:"seth wright (http://sethawright.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#CC342B",base09:"#F96A38",base0A:"#FBA922",base0B:"#198844",base0C:"#3971ED",base0D:"#3971ED",base0E:"#A36AC7",base0F:"#3971ED"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"grayscale",author:"alexandre gavioli (https://github.com/alexx2/)",base00:"#101010",base01:"#252525",base02:"#464646",base03:"#525252",base04:"#ababab",base05:"#b9b9b9",base06:"#e3e3e3",base07:"#f7f7f7",base08:"#7c7c7c",base09:"#999999",base0A:"#a0a0a0",base0B:"#8e8e8e",base0C:"#868686",base0D:"#686868",base0E:"#747474",base0F:"#5e5e5e"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"green screen",author:"chris kempson (http://chriskempson.com)",base00:"#001100",base01:"#003300",base02:"#005500",base03:"#007700",base04:"#009900",base05:"#00bb00",base06:"#00dd00",base07:"#00ff00",base08:"#007700",base09:"#009900",base0A:"#007700",base0B:"#00bb00",base0C:"#005500",base0D:"#009900",base0E:"#00bb00",base0F:"#005500"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"harmonic16",author:"jannik siebert (https://github.com/janniks)",base00:"#0b1c2c",base01:"#223b54",base02:"#405c79",base03:"#627e99",base04:"#aabcce",base05:"#cbd6e2",base06:"#e5ebf1",base07:"#f7f9fb",base08:"#bf8b56",base09:"#bfbf56",base0A:"#8bbf56",base0B:"#56bf8b",base0C:"#568bbf",base0D:"#8b56bf",base0E:"#bf568b",base0F:"#bf5656"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"hopscotch",author:"jan t. sott",base00:"#322931",base01:"#433b42",base02:"#5c545b",base03:"#797379",base04:"#989498",base05:"#b9b5b8",base06:"#d5d3d5",base07:"#ffffff",base08:"#dd464c",base09:"#fd8b19",base0A:"#fdcc59",base0B:"#8fc13e",base0C:"#149b93",base0D:"#1290bf",base0E:"#c85e7c",base0F:"#b33508"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"isotope",author:"jan t. sott",base00:"#000000",base01:"#404040",base02:"#606060",base03:"#808080",base04:"#c0c0c0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#ff0000",base09:"#ff9900",base0A:"#ff0099",base0B:"#33ff00",base0C:"#00ffff",base0D:"#0066ff",base0E:"#cc00ff",base0F:"#3300ff"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"marrakesh",author:"alexandre gavioli (http://github.com/alexx2/)",base00:"#201602",base01:"#302e00",base02:"#5f5b17",base03:"#6c6823",base04:"#86813b",base05:"#948e48",base06:"#ccc37a",base07:"#faf0a5",base08:"#c35359",base09:"#b36144",base0A:"#a88339",base0B:"#18974e",base0C:"#75a738",base0D:"#477ca1",base0E:"#8868b3",base0F:"#b3588e"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"mocha",author:"chris kempson (http://chriskempson.com)",base00:"#3B3228",base01:"#534636",base02:"#645240",base03:"#7e705a",base04:"#b8afad",base05:"#d0c8c6",base06:"#e9e1dd",base07:"#f5eeeb",base08:"#cb6077",base09:"#d28b71",base0A:"#f4bc87",base0B:"#beb55b",base0C:"#7bbda4",base0D:"#8ab3b5",base0E:"#a89bb9",base0F:"#bb9584"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"monokai",author:"wimer hazenberg (http://www.monokai.nl)",base00:"#272822",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#66d9ef",base0E:"#ae81ff",base0F:"#cc6633"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"ocean",author:"chris kempson (http://chriskempson.com)",base00:"#2b303b",base01:"#343d46",base02:"#4f5b66",base03:"#65737e",base04:"#a7adba",base05:"#c0c5ce",base06:"#dfe1e8",base07:"#eff1f5",base08:"#bf616a",base09:"#d08770",base0A:"#ebcb8b",base0B:"#a3be8c",base0C:"#96b5b4",base0D:"#8fa1b3",base0E:"#b48ead",base0F:"#ab7967"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"paraiso",author:"jan t. sott",base00:"#2f1e2e",base01:"#41323f",base02:"#4f424c",base03:"#776e71",base04:"#8d8687",base05:"#a39e9b",base06:"#b9b6b0",base07:"#e7e9db",base08:"#ef6155",base09:"#f99b15",base0A:"#fec418",base0B:"#48b685",base0C:"#5bc4bf",base0D:"#06b6ef",base0E:"#815ba4",base0F:"#e96ba8"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"pop",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#eb008a",base09:"#f29333",base0A:"#f8ca12",base0B:"#37b349",base0C:"#00aabb",base0D:"#0e5a94",base0E:"#b31e8d",base0F:"#7a2d00"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"railscasts",author:"ryan bates (http://railscasts.com)",base00:"#2b2b2b",base01:"#272935",base02:"#3a4055",base03:"#5a647e",base04:"#d4cfc9",base05:"#e6e1dc",base06:"#f4f1ed",base07:"#f9f7f3",base08:"#da4939",base09:"#cc7833",base0A:"#ffc66d",base0B:"#a5c261",base0C:"#519f50",base0D:"#6d9cbe",base0E:"#b6b3eb",base0F:"#bc9458"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"shapeshifter",author:"tyler benziger (http://tybenz.com)",base00:"#000000",base01:"#040404",base02:"#102015",base03:"#343434",base04:"#555555",base05:"#ababab",base06:"#e0e0e0",base07:"#f9f9f9",base08:"#e92f2f",base09:"#e09448",base0A:"#dddd13",base0B:"#0ed839",base0C:"#23edda",base0D:"#3b48e3",base0E:"#f996e2",base0F:"#69542d"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"summerfruit",author:"christopher corley (http://cscorley.github.io/)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#B0B0B0",base05:"#D0D0D0",base06:"#E0E0E0",base07:"#FFFFFF",base08:"#FF0086",base09:"#FD8900",base0A:"#ABA800",base0B:"#00C918",base0C:"#1faaaa",base0D:"#3777E6",base0E:"#AD00A1",base0F:"#cc6633"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"tomorrow",author:"chris kempson (http://chriskempson.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#cc6666",base09:"#de935f",base0A:"#f0c674",base0B:"#b5bd68",base0C:"#8abeb7",base0D:"#81a2be",base0E:"#b294bb",base0F:"#a3685a"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"london tube",author:"jan t. sott",base00:"#231f20",base01:"#1c3f95",base02:"#5a5758",base03:"#737171",base04:"#959ca1",base05:"#d9d8d8",base06:"#e7e7e8",base07:"#ffffff",base08:"#ee2e24",base09:"#f386a1",base0A:"#ffd204",base0B:"#00853e",base0C:"#85cebc",base0D:"#009ddc",base0E:"#98005d",base0F:"#b06110"},x.exports=g.default},function(x,g,C){"use strict";g.__esModule=!0,g.default={scheme:"twilight",author:"david hart (http://hart-dev.com)",base00:"#1e1e1e",base01:"#323537",base02:"#464b50",base03:"#5f5a60",base04:"#838184",base05:"#a7a7a7",base06:"#c3c3c3",base07:"#ffffff",base08:"#cf6a4c",base09:"#cda869",base0A:"#f9ee98",base0B:"#8f9d6a",base0C:"#afc4db",base0D:"#7587a6",base0E:"#9b859d",base0F:"#9b703f"},x.exports=g.default},function(x,g,C){var T=C(33);function $(H){var K=Math.round(T(H,0,255)).toString(16);return K.length==1?"0"+K:K}x.exports=function(H){var K=H.length===4?$(255*H[3]):"";return"#"+$(H[0])+$(H[1])+$(H[2])+K}},function(x,g,C){var T=C(134),$=C(135),H=C(136),K=C(137),ce={"#":$,hsl:function(xe){var Se=T(xe),k=K(Se);return Se.length===4&&k.push(Se[3]),k},rgb:H};function oe(xe){for(var Se in ce)if(xe.indexOf(Se)===0)return ce[Se](xe)}oe.rgb=H,oe.hsl=T,oe.hex=$,x.exports=oe},function(x,g,C){var T=C(44),$=C(33);function H(K,ce){switch(K=parseFloat(K),ce){case 0:return $(K,0,360);case 1:case 2:return $(K,0,100);case 3:return $(K,0,1)}}x.exports=function(K){return T(K).map(H)}},function(x,g){x.exports=function(C){C.length!==4&&C.length!==5||(C=function(H){for(var K="#",ce=1;ce<H.length;ce++){var oe=H.charAt(ce);K+=oe+oe}return K}(C));var T=[parseInt(C.substring(1,3),16),parseInt(C.substring(3,5),16),parseInt(C.substring(5,7),16)];if(C.length===9){var $=parseFloat((parseInt(C.substring(7,9),16)/255).toFixed(2));T.push($)}return T}},function(x,g,C){var T=C(44),$=C(33);function H(K,ce){return ce<3?K.indexOf("%")!=-1?Math.round(255*$(parseInt(K,10),0,100)/100):$(parseInt(K,10),0,255):$(parseFloat(K),0,1)}x.exports=function(K){return T(K).map(H)}},function(x,g){x.exports=function(C){var T,$,H,K,ce,oe=C[0]/360,xe=C[1]/100,Se=C[2]/100;if(xe==0)return[ce=255*Se,ce,ce];T=2*Se-($=Se<.5?Se*(1+xe):Se+xe-Se*xe),K=[0,0,0];for(var k=0;k<3;k++)(H=oe+1/3*-(k-1))<0&&H++,H>1&&H--,ce=6*H<1?T+6*($-T)*H:2*H<1?$:3*H<2?T+($-T)*(2/3-H)*6:T,K[k]=255*ce;return K}},function(x,g,C){(function(T){var $=typeof T=="object"&&T&&T.Object===Object&&T,H=typeof self=="object"&&self&&self.Object===Object&&self,K=$||H||Function("return this")();function ce(Ve,ke,dt){switch(dt.length){case 0:return Ve.call(ke);case 1:return Ve.call(ke,dt[0]);case 2:return Ve.call(ke,dt[0],dt[1]);case 3:return Ve.call(ke,dt[0],dt[1],dt[2])}return Ve.apply(ke,dt)}function oe(Ve,ke){for(var dt=-1,Et=ke.length,Z=Ve.length;++dt<Et;)Ve[Z+dt]=ke[dt];return Ve}var xe=Object.prototype,Se=xe.hasOwnProperty,k=xe.toString,rt=K.Symbol,lt=xe.propertyIsEnumerable,Qt=rt?rt.isConcatSpreadable:void 0,mt=Math.max;function Pt(Ve){return O(Ve)||function(ke){return function(dt){return function(Et){return!!Et&&typeof Et=="object"}(dt)&&function(Et){return Et!=null&&function(Z){return typeof Z=="number"&&Z>-1&&Z%1==0&&Z<=9007199254740991}(Et.length)&&!function(Z){var ye=function(ge){var ve=typeof ge;return!!ge&&(ve=="object"||ve=="function")}(Z)?k.call(Z):"";return ye=="[object Function]"||ye=="[object GeneratorFunction]"}(Et)}(dt)}(ke)&&Se.call(ke,"callee")&&(!lt.call(ke,"callee")||k.call(ke)=="[object Arguments]")}(Ve)||!!(Qt&&Ve&&Ve[Qt])}var O=Array.isArray,Ye,gt,Ot,Nt=(gt=function(Ve){var ke=(Ve=function Et(Z,ye,ge,ve,_e){var we=-1,de=Z.length;for(ge||(ge=Pt),_e||(_e=[]);++we<de;){var Y=Z[we];ye>0&&ge(Y)?ye>1?Et(Y,ye-1,ge,ve,_e):oe(_e,Y):ve||(_e[_e.length]=Y)}return _e}(Ve,1)).length,dt=ke;for(Ye&&Ve.reverse();dt--;)if(typeof Ve[dt]!="function")throw new TypeError("Expected a function");return function(){for(var Et=0,Z=ke?Ve[Et].apply(this,arguments):arguments[0];++Et<ke;)Z=Ve[Et].call(this,Z);return Z}},Ot=mt(Ot===void 0?gt.length-1:Ot,0),function(){for(var Ve=arguments,ke=-1,dt=mt(Ve.length-Ot,0),Et=Array(dt);++ke<dt;)Et[ke]=Ve[Ot+ke];ke=-1;for(var Z=Array(Ot+1);++ke<Ot;)Z[ke]=Ve[ke];return Z[Ot]=Et,ce(gt,this,Z)});x.exports=Nt}).call(this,C(43))},function(x,g,C){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.yuv2rgb=function(T){var $,H,K,ce=T[0],oe=T[1],xe=T[2];return $=1*ce+0*oe+1.13983*xe,H=1*ce+-.39465*oe+-.5806*xe,K=1*ce+2.02311*oe+0*xe,$=Math.min(Math.max(0,$),1),H=Math.min(Math.max(0,H),1),K=Math.min(Math.max(0,K),1),[255*$,255*H,255*K]},g.rgb2yuv=function(T){var $=T[0]/255,H=T[1]/255,K=T[2]/255;return[.299*$+.587*H+.114*K,-.14713*$+-.28886*H+.436*K,.615*$+-.51499*H+-.10001*K]}},function(x,g,C){"use strict";function T(K,ce,oe){return ce in K?Object.defineProperty(K,ce,{value:oe,enumerable:!0,configurable:!0,writable:!0}):K[ce]=oe,K}var $=C(141),H=function(){function K(){T(this,"_callbacks",void 0),T(this,"_isDispatching",void 0),T(this,"_isHandled",void 0),T(this,"_isPending",void 0),T(this,"_lastID",void 0),T(this,"_pendingPayload",void 0),this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}var ce=K.prototype;return ce.register=function(oe){var xe="ID_"+this._lastID++;return this._callbacks[xe]=oe,xe},ce.unregister=function(oe){this._callbacks[oe]||$(!1),delete this._callbacks[oe]},ce.waitFor=function(oe){this._isDispatching||$(!1);for(var xe=0;xe<oe.length;xe++){var Se=oe[xe];this._isPending[Se]?this._isHandled[Se]||$(!1):(this._callbacks[Se]||$(!1),this._invokeCallback(Se))}},ce.dispatch=function(oe){this._isDispatching&&$(!1),this._startDispatching(oe);try{for(var xe in this._callbacks)this._isPending[xe]||this._invokeCallback(xe)}finally{this._stopDispatching()}},ce.isDispatching=function(){return this._isDispatching},ce._invokeCallback=function(oe){this._isPending[oe]=!0,this._callbacks[oe](this._pendingPayload),this._isHandled[oe]=!0},ce._startDispatching=function(oe){for(var xe in this._callbacks)this._isPending[xe]=!1,this._isHandled[xe]=!1;this._pendingPayload=oe,this._isDispatching=!0},ce._stopDispatching=function(){delete this._pendingPayload,this._isDispatching=!1},K}();x.exports=H},function(x,g,C){"use strict";var T=function($){};x.exports=function($,H){for(var K=arguments.length,ce=new Array(K>2?K-2:0),oe=2;oe<K;oe++)ce[oe-2]=arguments[oe];if(T(H),!$){var xe;if(H===void 0)xe=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var Se=0;(xe=new Error(H.replace(/%s/g,function(){return String(ce[Se++])}))).name="Invariant Violation"}throw xe.framesToPop=1,xe}}},function(x,g,C){"use strict";function T(m,v,w){return v in m?Object.defineProperty(m,v,{value:w,enumerable:!0,configurable:!0,writable:!0}):m[v]=w,m}function $(m,v){var w=Object.keys(m);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(m);v&&(S=S.filter(function(z){return Object.getOwnPropertyDescriptor(m,z).enumerable})),w.push.apply(w,S)}return w}function H(m){for(var v=1;v<arguments.length;v++){var w=arguments[v]!=null?arguments[v]:{};v%2?$(Object(w),!0).forEach(function(S){T(m,S,w[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(w)):$(Object(w)).forEach(function(S){Object.defineProperty(m,S,Object.getOwnPropertyDescriptor(w,S))})}return m}function K(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}function ce(m,v){for(var w=0;w<v.length;w++){var S=v[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(m,S.key,S)}}function oe(m,v,w){return v&&ce(m.prototype,v),w&&ce(m,w),m}function xe(m,v){return(xe=Object.setPrototypeOf||function(w,S){return w.__proto__=S,w})(m,v)}function Se(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(v&&v.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),v&&xe(m,v)}function k(m){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)})(m)}function rt(m){return(rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(m)}function lt(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function Qt(m,v){return!v||rt(v)!=="object"&&typeof v!="function"?lt(m):v}function mt(m){var v=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,S=k(m);if(v){var z=k(this).constructor;w=Reflect.construct(S,arguments,z)}else w=S.apply(this,arguments);return Qt(this,w)}}C.r(g);var Pt=C(0),O=C.n(Pt);function Ye(){var m=this.constructor.getDerivedStateFromProps(this.props,this.state);m!=null&&this.setState(m)}function gt(m){this.setState(function(v){var w=this.constructor.getDerivedStateFromProps(m,v);return w!=null?w:null}.bind(this))}function Ot(m,v){try{var w=this.props,S=this.state;this.props=m,this.state=v,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(w,S)}finally{this.props=w,this.state=S}}function Nt(m){var v=m.prototype;if(!v||!v.isReactComponent)throw new Error("Can only polyfill class components");if(typeof m.getDerivedStateFromProps!="function"&&typeof v.getSnapshotBeforeUpdate!="function")return m;var w=null,S=null,z=null;if(typeof v.componentWillMount=="function"?w="componentWillMount":typeof v.UNSAFE_componentWillMount=="function"&&(w="UNSAFE_componentWillMount"),typeof v.componentWillReceiveProps=="function"?S="componentWillReceiveProps":typeof v.UNSAFE_componentWillReceiveProps=="function"&&(S="UNSAFE_componentWillReceiveProps"),typeof v.componentWillUpdate=="function"?z="componentWillUpdate":typeof v.UNSAFE_componentWillUpdate=="function"&&(z="UNSAFE_componentWillUpdate"),w!==null||S!==null||z!==null){var ae=m.displayName||m.name,F=typeof m.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+ae+" uses "+F+" but also contains the following legacy lifecycles:"+(w!==null?`
  `+w:"")+(S!==null?`
  `+S:"")+(z!==null?`
  `+z:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof m.getDerivedStateFromProps=="function"&&(v.componentWillMount=Ye,v.componentWillReceiveProps=gt),typeof v.getSnapshotBeforeUpdate=="function"){if(typeof v.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");v.componentWillUpdate=Ot;var X=v.componentDidUpdate;v.componentDidUpdate=function(P,W,Fe){var Ge=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:Fe;X.call(this,P,W,Ge)}}return m}function Ve(m,v){if(m==null)return{};var w,S,z=function(F,X){if(F==null)return{};var P,W,Fe={},Ge=Object.keys(F);for(W=0;W<Ge.length;W++)P=Ge[W],X.indexOf(P)>=0||(Fe[P]=F[P]);return Fe}(m,v);if(Object.getOwnPropertySymbols){var ae=Object.getOwnPropertySymbols(m);for(S=0;S<ae.length;S++)w=ae[S],v.indexOf(w)>=0||Object.prototype.propertyIsEnumerable.call(m,w)&&(z[w]=m[w])}return z}function ke(m){var v=function(w){return{}.toString.call(w).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}(m);return v==="number"&&(v=isNaN(m)?"nan":(0|m)!=m?"float":"integer"),v}Ye.__suppressDeprecationWarning=!0,gt.__suppressDeprecationWarning=!0,Ot.__suppressDeprecationWarning=!0;var dt={scheme:"rjv-default",author:"mac gainor",base00:"rgba(0, 0, 0, 0)",base01:"rgb(245, 245, 245)",base02:"rgb(235, 235, 235)",base03:"#93a1a1",base04:"rgba(0, 0, 0, 0.3)",base05:"#586e75",base06:"#073642",base07:"#002b36",base08:"#d33682",base09:"#cb4b16",base0A:"#dc322f",base0B:"#859900",base0C:"#6c71c4",base0D:"#586e75",base0E:"#2aa198",base0F:"#268bd2"},Et={scheme:"rjv-grey",author:"mac gainor",base00:"rgba(1, 1, 1, 0)",base01:"rgba(1, 1, 1, 0.1)",base02:"rgba(0, 0, 0, 0.2)",base03:"rgba(1, 1, 1, 0.3)",base04:"rgba(0, 0, 0, 0.4)",base05:"rgba(1, 1, 1, 0.5)",base06:"rgba(1, 1, 1, 0.6)",base07:"rgba(1, 1, 1, 0.7)",base08:"rgba(1, 1, 1, 0.8)",base09:"rgba(1, 1, 1, 0.8)",base0A:"rgba(1, 1, 1, 0.8)",base0B:"rgba(1, 1, 1, 0.8)",base0C:"rgba(1, 1, 1, 0.8)",base0D:"rgba(1, 1, 1, 0.8)",base0E:"rgba(1, 1, 1, 0.8)",base0F:"rgba(1, 1, 1, 0.8)"},Z={white:"#fff",black:"#000",transparent:"rgba(1, 1, 1, 0)",globalFontFamily:"monospace",globalCursor:"default",indentBlockWidth:"5px",braceFontWeight:"bold",braceCursor:"pointer",ellipsisFontSize:"18px",ellipsisLineHeight:"10px",ellipsisCursor:"pointer",keyMargin:"0px 5px",keyLetterSpacing:"0.5px",keyFontStyle:"none",keyBorderRadius:"3px",keyColonWeight:"bold",keyVerticalAlign:"top",keyOpacity:"0.85",keyOpacityHover:"1",keyValPaddingTop:"3px",keyValPaddingBottom:"3px",keyValPaddingRight:"5px",keyValBorderLeft:"1px solid",keyValBorderHover:"2px solid",keyValPaddingHover:"3px 5px 3px 4px",pushedContentMarginLeft:"6px",variableValuePaddingRight:"6px",nullFontSize:"11px",nullFontWeight:"bold",nullPadding:"1px 2px",nullBorderRadius:"3px",nanFontSize:"11px",nanFontWeight:"bold",nanPadding:"1px 2px",nanBorderRadius:"3px",undefinedFontSize:"11px",undefinedFontWeight:"bold",undefinedPadding:"1px 2px",undefinedBorderRadius:"3px",dataTypeFontSize:"11px",dataTypeMarginRight:"4px",datatypeOpacity:"0.8",objectSizeBorderRadius:"3px",objectSizeFontStyle:"italic",objectSizeMargin:"0px 6px 0px 0px",clipboardCursor:"pointer",clipboardCheckMarginLeft:"-12px",metaDataPadding:"0px 0px 0px 10px",arrayGroupMetaPadding:"0px 0px 0px 4px",iconContainerWidth:"17px",tooltipPadding:"4px",editInputMinWidth:"130px",editInputBorderRadius:"2px",editInputPadding:"5px",editInputMarginRight:"4px",editInputFontFamily:"monospace",iconCursor:"pointer",iconFontSize:"15px",iconPaddingRight:"1px",dateValueMarginLeft:"2px",iconMarginRight:"3px",detectedRowPaddingTop:"3px",addKeyCoverBackground:"rgba(255, 255, 255, 0.3)",addKeyCoverPosition:"absolute",addKeyCoverPositionPx:"0px",addKeyModalWidth:"200px",addKeyModalMargin:"auto",addKeyModalPadding:"10px",addKeyModalRadius:"3px"},ye=C(45),ge=function(m){var v=function(w){return{backgroundColor:w.base00,ellipsisColor:w.base09,braceColor:w.base07,expandedIcon:w.base0D,collapsedIcon:w.base0E,keyColor:w.base07,arrayKeyColor:w.base0C,objectSize:w.base04,copyToClipboard:w.base0F,copyToClipboardCheck:w.base0D,objectBorder:w.base02,dataTypes:{boolean:w.base0E,date:w.base0D,float:w.base0B,function:w.base0D,integer:w.base0F,string:w.base09,nan:w.base08,null:w.base0A,undefined:w.base05,regexp:w.base0A,background:w.base02},editVariable:{editIcon:w.base0E,cancelIcon:w.base09,removeIcon:w.base09,addIcon:w.base0E,checkIcon:w.base0E,background:w.base01,color:w.base0A,border:w.base07},addKeyModal:{background:w.base05,border:w.base04,color:w.base0A,labelColor:w.base01},validationFailure:{background:w.base09,iconColor:w.base01,fontColor:w.base01}}}(m);return{"app-container":{fontFamily:Z.globalFontFamily,cursor:Z.globalCursor,backgroundColor:v.backgroundColor,position:"relative"},ellipsis:{display:"inline-block",color:v.ellipsisColor,fontSize:Z.ellipsisFontSize,lineHeight:Z.ellipsisLineHeight,cursor:Z.ellipsisCursor},"brace-row":{display:"inline-block",cursor:"pointer"},brace:{display:"inline-block",cursor:Z.braceCursor,fontWeight:Z.braceFontWeight,color:v.braceColor},"expanded-icon":{color:v.expandedIcon},"collapsed-icon":{color:v.collapsedIcon},colon:{display:"inline-block",margin:Z.keyMargin,color:v.keyColor,verticalAlign:"top"},objectKeyVal:function(w,S){return{style:H({paddingTop:Z.keyValPaddingTop,paddingRight:Z.keyValPaddingRight,paddingBottom:Z.keyValPaddingBottom,borderLeft:Z.keyValBorderLeft+" "+v.objectBorder,":hover":{paddingLeft:S.paddingLeft-1+"px",borderLeft:Z.keyValBorderHover+" "+v.objectBorder}},S)}},"object-key-val-no-border":{padding:Z.keyValPadding},"pushed-content":{marginLeft:Z.pushedContentMarginLeft},variableValue:function(w,S){return{style:H({display:"inline-block",paddingRight:Z.variableValuePaddingRight,position:"relative"},S)}},"object-name":{display:"inline-block",color:v.keyColor,letterSpacing:Z.keyLetterSpacing,fontStyle:Z.keyFontStyle,verticalAlign:Z.keyVerticalAlign,opacity:Z.keyOpacity,":hover":{opacity:Z.keyOpacityHover}},"array-key":{display:"inline-block",color:v.arrayKeyColor,letterSpacing:Z.keyLetterSpacing,fontStyle:Z.keyFontStyle,verticalAlign:Z.keyVerticalAlign,opacity:Z.keyOpacity,":hover":{opacity:Z.keyOpacityHover}},"object-size":{color:v.objectSize,borderRadius:Z.objectSizeBorderRadius,fontStyle:Z.objectSizeFontStyle,margin:Z.objectSizeMargin,cursor:"default"},"data-type-label":{fontSize:Z.dataTypeFontSize,marginRight:Z.dataTypeMarginRight,opacity:Z.datatypeOpacity},boolean:{display:"inline-block",color:v.dataTypes.boolean},date:{display:"inline-block",color:v.dataTypes.date},"date-value":{marginLeft:Z.dateValueMarginLeft},float:{display:"inline-block",color:v.dataTypes.float},function:{display:"inline-block",color:v.dataTypes.function,cursor:"pointer",whiteSpace:"pre-line"},"function-value":{fontStyle:"italic"},integer:{display:"inline-block",color:v.dataTypes.integer},string:{display:"inline-block",color:v.dataTypes.string},nan:{display:"inline-block",color:v.dataTypes.nan,fontSize:Z.nanFontSize,fontWeight:Z.nanFontWeight,backgroundColor:v.dataTypes.background,padding:Z.nanPadding,borderRadius:Z.nanBorderRadius},null:{display:"inline-block",color:v.dataTypes.null,fontSize:Z.nullFontSize,fontWeight:Z.nullFontWeight,backgroundColor:v.dataTypes.background,padding:Z.nullPadding,borderRadius:Z.nullBorderRadius},undefined:{display:"inline-block",color:v.dataTypes.undefined,fontSize:Z.undefinedFontSize,padding:Z.undefinedPadding,borderRadius:Z.undefinedBorderRadius,backgroundColor:v.dataTypes.background},regexp:{display:"inline-block",color:v.dataTypes.regexp},"copy-to-clipboard":{cursor:Z.clipboardCursor},"copy-icon":{color:v.copyToClipboard,fontSize:Z.iconFontSize,marginRight:Z.iconMarginRight,verticalAlign:"top"},"copy-icon-copied":{color:v.copyToClipboardCheck,marginLeft:Z.clipboardCheckMarginLeft},"array-group-meta-data":{display:"inline-block",padding:Z.arrayGroupMetaPadding},"object-meta-data":{display:"inline-block",padding:Z.metaDataPadding},"icon-container":{display:"inline-block",width:Z.iconContainerWidth},tooltip:{padding:Z.tooltipPadding},removeVarIcon:{verticalAlign:"top",display:"inline-block",color:v.editVariable.removeIcon,cursor:Z.iconCursor,fontSize:Z.iconFontSize,marginRight:Z.iconMarginRight},addVarIcon:{verticalAlign:"top",display:"inline-block",color:v.editVariable.addIcon,cursor:Z.iconCursor,fontSize:Z.iconFontSize,marginRight:Z.iconMarginRight},editVarIcon:{verticalAlign:"top",display:"inline-block",color:v.editVariable.editIcon,cursor:Z.iconCursor,fontSize:Z.iconFontSize,marginRight:Z.iconMarginRight},"edit-icon-container":{display:"inline-block",verticalAlign:"top"},"check-icon":{display:"inline-block",cursor:Z.iconCursor,color:v.editVariable.checkIcon,fontSize:Z.iconFontSize,paddingRight:Z.iconPaddingRight},"cancel-icon":{display:"inline-block",cursor:Z.iconCursor,color:v.editVariable.cancelIcon,fontSize:Z.iconFontSize,paddingRight:Z.iconPaddingRight},"edit-input":{display:"inline-block",minWidth:Z.editInputMinWidth,borderRadius:Z.editInputBorderRadius,backgroundColor:v.editVariable.background,color:v.editVariable.color,padding:Z.editInputPadding,marginRight:Z.editInputMarginRight,fontFamily:Z.editInputFontFamily},"detected-row":{paddingTop:Z.detectedRowPaddingTop},"key-modal-request":{position:Z.addKeyCoverPosition,top:Z.addKeyCoverPositionPx,left:Z.addKeyCoverPositionPx,right:Z.addKeyCoverPositionPx,bottom:Z.addKeyCoverPositionPx,backgroundColor:Z.addKeyCoverBackground},"key-modal":{width:Z.addKeyModalWidth,backgroundColor:v.addKeyModal.background,marginLeft:Z.addKeyModalMargin,marginRight:Z.addKeyModalMargin,padding:Z.addKeyModalPadding,borderRadius:Z.addKeyModalRadius,marginTop:"15px",position:"relative"},"key-modal-label":{color:v.addKeyModal.labelColor,marginLeft:"2px",marginBottom:"5px",fontSize:"11px"},"key-modal-input-container":{overflow:"hidden"},"key-modal-input":{width:"100%",padding:"3px 6px",fontFamily:"monospace",color:v.addKeyModal.color,border:"none",boxSizing:"border-box",borderRadius:"2px"},"key-modal-cancel":{backgroundColor:v.editVariable.removeIcon,position:"absolute",top:"0px",right:"0px",borderRadius:"0px 3px 0px 3px",cursor:"pointer"},"key-modal-cancel-icon":{color:v.addKeyModal.labelColor,fontSize:Z.iconFontSize,transform:"rotate(45deg)"},"key-modal-submit":{color:v.editVariable.addIcon,fontSize:Z.iconFontSize,position:"absolute",right:"2px",top:"3px",cursor:"pointer"},"function-ellipsis":{display:"inline-block",color:v.ellipsisColor,fontSize:Z.ellipsisFontSize,lineHeight:Z.ellipsisLineHeight,cursor:Z.ellipsisCursor},"validation-failure":{float:"right",padding:"3px 6px",borderRadius:"2px",cursor:"pointer",color:v.validationFailure.fontColor,backgroundColor:v.validationFailure.background},"validation-failure-label":{marginRight:"6px"},"validation-failure-clear":{position:"relative",verticalAlign:"top",cursor:"pointer",color:v.validationFailure.iconColor,fontSize:Z.iconFontSize,transform:"rotate(45deg)"}}};function ve(m,v,w){return m||console.error("theme has not been set"),function(S){var z=dt;return S!==!1&&S!=="none"||(z=Et),Object(ye.createStyling)(ge,{defaultBase16:z})(S)}(m)(v,w)}var _e=function(m){Se(w,m);var v=mt(w);function w(){return K(this,w),v.apply(this,arguments)}return oe(w,[{key:"render",value:function(){var S=this.props,z=(S.rjvId,S.type_name),ae=S.displayDataTypes,F=S.theme;return ae?O.a.createElement("span",Object.assign({className:"data-type-label"},ve(F,"data-type-label")),z):null}}]),w}(O.a.PureComponent),we=function(m){Se(w,m);var v=mt(w);function w(){return K(this,w),v.apply(this,arguments)}return oe(w,[{key:"render",value:function(){var S=this.props;return O.a.createElement("div",ve(S.theme,"boolean"),O.a.createElement(_e,Object.assign({type_name:"bool"},S)),S.value?"true":"false")}}]),w}(O.a.PureComponent),de=function(m){Se(w,m);var v=mt(w);function w(){return K(this,w),v.apply(this,arguments)}return oe(w,[{key:"render",value:function(){var S=this.props;return O.a.createElement("div",ve(S.theme,"date"),O.a.createElement(_e,Object.assign({type_name:"date"},S)),O.a.createElement("span",Object.assign({className:"date-value"},ve(S.theme,"date-value")),S.value.toLocaleTimeString("en-us",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})))}}]),w}(O.a.PureComponent),Y=function(m){Se(w,m);var v=mt(w);function w(){return K(this,w),v.apply(this,arguments)}return oe(w,[{key:"render",value:function(){var S=this.props;return O.a.createElement("div",ve(S.theme,"float"),O.a.createElement(_e,Object.assign({type_name:"float"},S)),this.props.value)}}]),w}(O.a.PureComponent);function te(m,v){(v==null||v>m.length)&&(v=m.length);for(var w=0,S=new Array(v);w<v;w++)S[w]=m[w];return S}function Oe(m,v){if(m){if(typeof m=="string")return te(m,v);var w=Object.prototype.toString.call(m).slice(8,-1);return w==="Object"&&m.constructor&&(w=m.constructor.name),w==="Map"||w==="Set"?Array.from(m):w==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w)?te(m,v):void 0}}function ee(m,v){var w;if(typeof Symbol=="undefined"||m[Symbol.iterator]==null){if(Array.isArray(m)||(w=Oe(m))||v&&m&&typeof m.length=="number"){w&&(m=w);var S=0,z=function(){};return{s:z,n:function(){return S>=m.length?{done:!0}:{done:!1,value:m[S++]}},e:function(P){throw P},f:z}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ae,F=!0,X=!1;return{s:function(){w=m[Symbol.iterator]()},n:function(){var P=w.next();return F=P.done,P},e:function(P){X=!0,ae=P},f:function(){try{F||w.return==null||w.return()}finally{if(X)throw ae}}}}function Ae(m){return function(v){if(Array.isArray(v))return te(v)}(m)||function(v){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(v))return Array.from(v)}(m)||Oe(m)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var Te=C(46),$e=new(C(47)).Dispatcher,Je=new(function(m){Se(w,m);var v=mt(w);function w(){var S;K(this,w);for(var z=arguments.length,ae=new Array(z),F=0;F<z;F++)ae[F]=arguments[F];return(S=v.call.apply(v,[this].concat(ae))).objects={},S.set=function(X,P,W,Fe){S.objects[X]===void 0&&(S.objects[X]={}),S.objects[X][P]===void 0&&(S.objects[X][P]={}),S.objects[X][P][W]=Fe},S.get=function(X,P,W,Fe){return S.objects[X]===void 0||S.objects[X][P]===void 0||S.objects[X][P][W]==null?Fe:S.objects[X][P][W]},S.handleAction=function(X){var P=X.rjvId,W=X.data;switch(X.name){case"RESET":S.emit("reset-"+P);break;case"VARIABLE_UPDATED":X.data.updated_src=S.updateSrc(P,W),S.set(P,"action","variable-update",H(H({},W),{},{type:"variable-edited"})),S.emit("variable-update-"+P);break;case"VARIABLE_REMOVED":X.data.updated_src=S.updateSrc(P,W),S.set(P,"action","variable-update",H(H({},W),{},{type:"variable-removed"})),S.emit("variable-update-"+P);break;case"VARIABLE_ADDED":X.data.updated_src=S.updateSrc(P,W),S.set(P,"action","variable-update",H(H({},W),{},{type:"variable-added"})),S.emit("variable-update-"+P);break;case"ADD_VARIABLE_KEY_REQUEST":S.set(P,"action","new-key-request",W),S.emit("add-key-request-"+P)}},S.updateSrc=function(X,P){var W=P.name,Fe=P.namespace,Ge=P.new_value,ut=(P.existing_value,P.variable_removed);Fe.shift();var kt,Ht=S.get(X,"global","src"),ht=S.deepCopy(Ht,Ae(Fe)),vt=ht,ft=ee(Fe);try{for(ft.s();!(kt=ft.n()).done;)vt=vt[kt.value]}catch(Gt){ft.e(Gt)}finally{ft.f()}return ut?ke(vt)=="array"?vt.splice(W,1):delete vt[W]:W!==null?vt[W]=Ge:ht=Ge,S.set(X,"global","src",ht),ht},S.deepCopy=function(X,P){var W,Fe=ke(X),Ge=P.shift();return Fe=="array"?W=Ae(X):Fe=="object"&&(W=H({},X)),Ge!==void 0&&(W[Ge]=S.deepCopy(X[Ge],P)),W},S}return w}(Te.EventEmitter));$e.register(Je.handleAction.bind(Je));var it=Je,tt=function(m){Se(w,m);var v=mt(w);function w(S){var z;return K(this,w),(z=v.call(this,S)).toggleCollapsed=function(){z.setState({collapsed:!z.state.collapsed},function(){it.set(z.props.rjvId,z.props.namespace,"collapsed",z.state.collapsed)})},z.getFunctionDisplay=function(ae){var F=lt(z).props;return ae?O.a.createElement("span",null,z.props.value.toString().slice(9,-1).replace(/\{[\s\S]+/,""),O.a.createElement("span",{className:"function-collapsed",style:{fontWeight:"bold"}},O.a.createElement("span",null,"{"),O.a.createElement("span",ve(F.theme,"ellipsis"),"..."),O.a.createElement("span",null,"}"))):z.props.value.toString().slice(9,-1)},z.state={collapsed:it.get(S.rjvId,S.namespace,"collapsed",!0)},z}return oe(w,[{key:"render",value:function(){var S=this.props,z=this.state.collapsed;return O.a.createElement("div",ve(S.theme,"function"),O.a.createElement(_e,Object.assign({type_name:"function"},S)),O.a.createElement("span",Object.assign({},ve(S.theme,"function-value"),{className:"rjv-function-container",onClick:this.toggleCollapsed}),this.getFunctionDisplay(z)))}}]),w}(O.a.PureComponent),St=function(m){Se(w,m);var v=mt(w);function w(){return K(this,w),v.apply(this,arguments)}return oe(w,[{key:"render",value:function(){return O.a.createElement("div",ve(this.props.theme,"nan"),"NaN")}}]),w}(O.a.PureComponent),ot=function(m){Se(w,m);var v=mt(w);function w(){return K(this,w),v.apply(this,arguments)}return oe(w,[{key:"render",value:function(){return O.a.createElement("div",ve(this.props.theme,"null"),"NULL")}}]),w}(O.a.PureComponent),Rt=function(m){Se(w,m);var v=mt(w);function w(){return K(this,w),v.apply(this,arguments)}return oe(w,[{key:"render",value:function(){var S=this.props;return O.a.createElement("div",ve(S.theme,"integer"),O.a.createElement(_e,Object.assign({type_name:"int"},S)),this.props.value)}}]),w}(O.a.PureComponent),Lt=function(m){Se(w,m);var v=mt(w);function w(){return K(this,w),v.apply(this,arguments)}return oe(w,[{key:"render",value:function(){var S=this.props;return O.a.createElement("div",ve(S.theme,"regexp"),O.a.createElement(_e,Object.assign({type_name:"regexp"},S)),this.props.value.toString())}}]),w}(O.a.PureComponent),pt=function(m){Se(w,m);var v=mt(w);function w(S){var z;return K(this,w),(z=v.call(this,S)).toggleCollapsed=function(){z.setState({collapsed:!z.state.collapsed},function(){it.set(z.props.rjvId,z.props.namespace,"collapsed",z.state.collapsed)})},z.state={collapsed:it.get(S.rjvId,S.namespace,"collapsed",!0)},z}return oe(w,[{key:"render",value:function(){this.state.collapsed;var S=this.props,z=S.collapseStringsAfterLength,ae=S.theme,F=S.value,X={style:{cursor:"default"}};return ke(z)==="integer"&&F.length>z&&(X.style.cursor="pointer",this.state.collapsed&&(F=O.a.createElement("span",null,F.substring(0,z),O.a.createElement("span",ve(ae,"ellipsis")," ...")))),O.a.createElement("div",ve(ae,"string"),O.a.createElement(_e,Object.assign({type_name:"string"},S)),O.a.createElement("span",Object.assign({className:"string-value"},X,{onClick:this.toggleCollapsed}),'"',F,'"'))}}]),w}(O.a.PureComponent),Xe=function(m){Se(w,m);var v=mt(w);function w(){return K(this,w),v.apply(this,arguments)}return oe(w,[{key:"render",value:function(){return O.a.createElement("div",ve(this.props.theme,"undefined"),"undefined")}}]),w}(O.a.PureComponent);function Be(){return(Be=Object.assign||function(m){for(var v=1;v<arguments.length;v++){var w=arguments[v];for(var S in w)Object.prototype.hasOwnProperty.call(w,S)&&(m[S]=w[S])}return m}).apply(this,arguments)}var Ct=Pt.useLayoutEffect,Wt=function(m){var v=Object(Pt.useRef)(m);return Ct(function(){v.current=m}),v},Xt=function(m,v){typeof m!="function"?m.current=v:m(v)},Yt=function(m,v){var w=Object(Pt.useRef)();return Object(Pt.useCallback)(function(S){m.current=S,w.current&&Xt(w.current,null),w.current=v,v&&Xt(v,S)},[v])},wn={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},an=function(m){Object.keys(wn).forEach(function(v){m.style.setProperty(v,wn[v],"important")})},un=null,Tn=function(){},yt=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width"],pe=!!document.documentElement.currentStyle,Ce=function(m,v){var w=m.cacheMeasurements,S=m.maxRows,z=m.minRows,ae=m.onChange,F=ae===void 0?Tn:ae,X=m.onHeightChange,P=X===void 0?Tn:X,W=function(ft,Gt){if(ft==null)return{};var An,Rn,Gn={},Pn=Object.keys(ft);for(Rn=0;Rn<Pn.length;Rn++)An=Pn[Rn],Gt.indexOf(An)>=0||(Gn[An]=ft[An]);return Gn}(m,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]),Fe,Ge=W.value!==void 0,ut=Object(Pt.useRef)(null),kt=Yt(ut,v),Ht=Object(Pt.useRef)(0),ht=Object(Pt.useRef)(),vt=function(){var ft=ut.current,Gt=w&&ht.current?ht.current:function(Pn){var kn=window.getComputedStyle(Pn);if(kn===null)return null;var Qn,cn=(Qn=kn,yt.reduce(function(cr,Er){return cr[Er]=Qn[Er],cr},{})),Zn=cn.boxSizing;return Zn===""?null:(pe&&Zn==="border-box"&&(cn.width=parseFloat(cn.width)+parseFloat(cn.borderRightWidth)+parseFloat(cn.borderLeftWidth)+parseFloat(cn.paddingRight)+parseFloat(cn.paddingLeft)+"px"),{sizingStyle:cn,paddingSize:parseFloat(cn.paddingBottom)+parseFloat(cn.paddingTop),borderSize:parseFloat(cn.borderBottomWidth)+parseFloat(cn.borderTopWidth)})}(ft);if(Gt){ht.current=Gt;var An=function(Pn,kn,Qn,cn){Qn===void 0&&(Qn=1),cn===void 0&&(cn=1/0),un||((un=document.createElement("textarea")).setAttribute("tab-index","-1"),un.setAttribute("aria-hidden","true"),an(un)),un.parentNode===null&&document.body.appendChild(un);var Zn=Pn.paddingSize,cr=Pn.borderSize,Er=Pn.sizingStyle,Kr=Er.boxSizing;Object.keys(Er).forEach(function(Ii){var Or=Ii;un.style[Or]=Er[Or]}),an(un),un.value=kn;var bi=function(Ii,Or){var Gr=Ii.scrollHeight;return Or.sizingStyle.boxSizing==="border-box"?Gr+Or.borderSize:Gr-Or.paddingSize}(un,Pn);un.value="x";var li=un.scrollHeight-Zn,fi=li*Qn;Kr==="border-box"&&(fi=fi+Zn+cr),bi=Math.max(fi,bi);var Ci=li*cn;return Kr==="border-box"&&(Ci=Ci+Zn+cr),[bi=Math.min(Ci,bi),li]}(Gt,ft.value||ft.placeholder||"x",z,S),Rn=An[0],Gn=An[1];Ht.current!==Rn&&(Ht.current=Rn,ft.style.setProperty("height",Rn+"px","important"),P(Rn,{rowHeight:Gn}))}};return Object(Pt.useLayoutEffect)(vt),Fe=Wt(vt),Object(Pt.useLayoutEffect)(function(){var ft=function(Gt){Fe.current(Gt)};return window.addEventListener("resize",ft),function(){window.removeEventListener("resize",ft)}},[]),Object(Pt.createElement)("textarea",Be({},W,{onChange:function(ft){Ge||vt(),F(ft)},ref:kt}))},Ne=Object(Pt.forwardRef)(Ce);function Ze(m){m=m.trim();try{if((m=JSON.stringify(JSON.parse(m)))[0]==="[")return et("array",JSON.parse(m));if(m[0]==="{")return et("object",JSON.parse(m));if(m.match(/\-?\d+\.\d+/)&&m.match(/\-?\d+\.\d+/)[0]===m)return et("float",parseFloat(m));if(m.match(/\-?\d+e-\d+/)&&m.match(/\-?\d+e-\d+/)[0]===m)return et("float",Number(m));if(m.match(/\-?\d+/)&&m.match(/\-?\d+/)[0]===m)return et("integer",parseInt(m));if(m.match(/\-?\d+e\+\d+/)&&m.match(/\-?\d+e\+\d+/)[0]===m)return et("integer",Number(m))}catch(v){}switch(m=m.toLowerCase()){case"undefined":return et("undefined",void 0);case"nan":return et("nan",NaN);case"null":return et("null",null);case"true":return et("boolean",!0);case"false":return et("boolean",!1);default:if(m=Date.parse(m))return et("date",new Date(m))}return et(!1,null)}function et(m,v){return{type:m,value:v}}var Ft=function(m){Se(w,m);var v=mt(w);function w(){return K(this,w),v.apply(this,arguments)}return oe(w,[{key:"render",value:function(){var S=this.props,z=S.style,ae=Ve(S,["style"]);return O.a.createElement("span",ae,O.a.createElement("svg",Object.assign({},me(z),{viewBox:"0 0 24 24",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),O.a.createElement("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M7,13H17V11H7"})))}}]),w}(O.a.PureComponent),qt=function(m){Se(w,m);var v=mt(w);function w(){return K(this,w),v.apply(this,arguments)}return oe(w,[{key:"render",value:function(){var S=this.props,z=S.style,ae=Ve(S,["style"]);return O.a.createElement("span",ae,O.a.createElement("svg",Object.assign({},me(z),{viewBox:"0 0 24 24",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),O.a.createElement("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z"})))}}]),w}(O.a.PureComponent),$n=function(m){Se(w,m);var v=mt(w);function w(){return K(this,w),v.apply(this,arguments)}return oe(w,[{key:"render",value:function(){var S=this.props,z=S.style,ae=Ve(S,["style"]),F=me(z).style;return O.a.createElement("span",ae,O.a.createElement("svg",{fill:F.color,width:F.height,height:F.width,style:F,viewBox:"0 0 1792 1792"},O.a.createElement("path",{d:"M1344 800v64q0 14-9 23t-23 9h-832q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h832q14 0 23 9t9 23zm128 448v-832q0-66-47-113t-113-47h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113zm128-832v832q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q119 0 203.5 84.5t84.5 203.5z"})))}}]),w}(O.a.PureComponent),dn=function(m){Se(w,m);var v=mt(w);function w(){return K(this,w),v.apply(this,arguments)}return oe(w,[{key:"render",value:function(){var S=this.props,z=S.style,ae=Ve(S,["style"]),F=me(z).style;return O.a.createElement("span",ae,O.a.createElement("svg",{fill:F.color,width:F.height,height:F.width,style:F,viewBox:"0 0 1792 1792"},O.a.createElement("path",{d:"M1344 800v64q0 14-9 23t-23 9h-352v352q0 14-9 23t-23 9h-64q-14 0-23-9t-9-23v-352h-352q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h352v-352q0-14 9-23t23-9h64q14 0 23 9t9 23v352h352q14 0 23 9t9 23zm128 448v-832q0-66-47-113t-113-47h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113zm128-832v832q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q119 0 203.5 84.5t84.5 203.5z"})))}}]),w}(O.a.PureComponent),Me=function(m){Se(w,m);var v=mt(w);function w(){return K(this,w),v.apply(this,arguments)}return oe(w,[{key:"render",value:function(){var S=this.props,z=S.style,ae=Ve(S,["style"]);return O.a.createElement("span",ae,O.a.createElement("svg",{style:H(H({},me(z).style),{},{paddingLeft:"2px",verticalAlign:"top"}),viewBox:"0 0 15 15",fill:"currentColor"},O.a.createElement("path",{d:"M0 14l6-6-6-6z"})))}}]),w}(O.a.PureComponent),Qe=function(m){Se(w,m);var v=mt(w);function w(){return K(this,w),v.apply(this,arguments)}return oe(w,[{key:"render",value:function(){var S=this.props,z=S.style,ae=Ve(S,["style"]);return O.a.createElement("span",ae,O.a.createElement("svg",{style:H(H({},me(z).style),{},{paddingLeft:"2px",verticalAlign:"top"}),viewBox:"0 0 15 15",fill:"currentColor"},O.a.createElement("path",{d:"M0 5l6 6 6-6z"})))}}]),w}(O.a.PureComponent),Ke=function(m){Se(w,m);var v=mt(w);function w(){return K(this,w),v.apply(this,arguments)}return oe(w,[{key:"render",value:function(){var S=this.props,z=S.style,ae=Ve(S,["style"]);return O.a.createElement("span",ae,O.a.createElement("svg",Object.assign({},me(z),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),O.a.createElement("g",null,O.a.createElement("path",{d:"m30 35h-25v-22.5h25v7.5h2.5v-12.5c0-1.4-1.1-2.5-2.5-2.5h-7.5c0-2.8-2.2-5-5-5s-5 2.2-5 5h-7.5c-1.4 0-2.5 1.1-2.5 2.5v27.5c0 1.4 1.1 2.5 2.5 2.5h25c1.4 0 2.5-1.1 2.5-2.5v-5h-2.5v5z m-20-27.5h2.5s2.5-1.1 2.5-2.5 1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5 1.3 2.5 2.5 2.5h2.5s2.5 1.1 2.5 2.5h-20c0-1.5 1.1-2.5 2.5-2.5z m-2.5 20h5v-2.5h-5v2.5z m17.5-5v-5l-10 7.5 10 7.5v-5h12.5v-5h-12.5z m-17.5 10h7.5v-2.5h-7.5v2.5z m12.5-17.5h-12.5v2.5h12.5v-2.5z m-7.5 5h-5v2.5h5v-2.5z"}))))}}]),w}(O.a.PureComponent),at=function(m){Se(w,m);var v=mt(w);function w(){return K(this,w),v.apply(this,arguments)}return oe(w,[{key:"render",value:function(){var S=this.props,z=S.style,ae=Ve(S,["style"]);return O.a.createElement("span",ae,O.a.createElement("svg",Object.assign({},me(z),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),O.a.createElement("g",null,O.a.createElement("path",{d:"m28.6 25q0-0.5-0.4-1l-4-4 4-4q0.4-0.5 0.4-1 0-0.6-0.4-1.1l-2-2q-0.4-0.4-1-0.4-0.6 0-1 0.4l-4.1 4.1-4-4.1q-0.4-0.4-1-0.4-0.6 0-1 0.4l-2 2q-0.5 0.5-0.5 1.1 0 0.5 0.5 1l4 4-4 4q-0.5 0.5-0.5 1 0 0.7 0.5 1.1l2 2q0.4 0.4 1 0.4 0.6 0 1-0.4l4-4.1 4.1 4.1q0.4 0.4 1 0.4 0.6 0 1-0.4l2-2q0.4-0.4 0.4-1z m8.7-5q0 4.7-2.3 8.6t-6.3 6.2-8.6 2.3-8.6-2.3-6.2-6.2-2.3-8.6 2.3-8.6 6.2-6.2 8.6-2.3 8.6 2.3 6.3 6.2 2.3 8.6z"}))))}}]),w}(O.a.PureComponent),Bt=function(m){Se(w,m);var v=mt(w);function w(){return K(this,w),v.apply(this,arguments)}return oe(w,[{key:"render",value:function(){var S=this.props,z=S.style,ae=Ve(S,["style"]);return O.a.createElement("span",ae,O.a.createElement("svg",Object.assign({},me(z),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),O.a.createElement("g",null,O.a.createElement("path",{d:"m30.1 21.4v-2.8q0-0.6-0.4-1t-1-0.5h-5.7v-5.7q0-0.6-0.4-1t-1-0.4h-2.9q-0.6 0-1 0.4t-0.4 1v5.7h-5.7q-0.6 0-1 0.5t-0.5 1v2.8q0 0.6 0.5 1t1 0.5h5.7v5.7q0 0.5 0.4 1t1 0.4h2.9q0.6 0 1-0.4t0.4-1v-5.7h5.7q0.6 0 1-0.5t0.4-1z m7.2-1.4q0 4.7-2.3 8.6t-6.3 6.2-8.6 2.3-8.6-2.3-6.2-6.2-2.3-8.6 2.3-8.6 6.2-6.2 8.6-2.3 8.6 2.3 6.3 6.2 2.3 8.6z"}))))}}]),w}(O.a.PureComponent),En=function(m){Se(w,m);var v=mt(w);function w(){return K(this,w),v.apply(this,arguments)}return oe(w,[{key:"render",value:function(){var S=this.props,z=S.style,ae=Ve(S,["style"]);return O.a.createElement("span",ae,O.a.createElement("svg",Object.assign({},me(z),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),O.a.createElement("g",null,O.a.createElement("path",{d:"m31.6 21.6h-10v10h-3.2v-10h-10v-3.2h10v-10h3.2v10h10v3.2z"}))))}}]),w}(O.a.PureComponent),ln=function(m){Se(w,m);var v=mt(w);function w(){return K(this,w),v.apply(this,arguments)}return oe(w,[{key:"render",value:function(){var S=this.props,z=S.style,ae=Ve(S,["style"]);return O.a.createElement("span",ae,O.a.createElement("svg",Object.assign({},me(z),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),O.a.createElement("g",null,O.a.createElement("path",{d:"m19.8 26.4l2.6-2.6-3.4-3.4-2.6 2.6v1.3h2.2v2.1h1.2z m9.8-16q-0.3-0.4-0.7 0l-7.8 7.8q-0.4 0.4 0 0.7t0.7 0l7.8-7.8q0.4-0.4 0-0.7z m1.8 13.2v4.3q0 2.6-1.9 4.5t-4.5 1.9h-18.6q-2.6 0-4.5-1.9t-1.9-4.5v-18.6q0-2.7 1.9-4.6t4.5-1.8h18.6q1.4 0 2.6 0.5 0.3 0.2 0.4 0.5 0.1 0.4-0.2 0.7l-1.1 1.1q-0.3 0.3-0.7 0.1-0.5-0.1-1-0.1h-18.6q-1.4 0-2.5 1.1t-1 2.5v18.6q0 1.4 1 2.5t2.5 1h18.6q1.5 0 2.5-1t1.1-2.5v-2.9q0-0.2 0.2-0.4l1.4-1.5q0.3-0.3 0.8-0.1t0.4 0.6z m-2.1-16.5l6.4 6.5-15 15h-6.4v-6.5z m9.9 3l-2.1 2-6.4-6.4 2.1-2q0.6-0.7 1.5-0.7t1.5 0.7l3.4 3.4q0.6 0.6 0.6 1.5t-0.6 1.5z"}))))}}]),w}(O.a.PureComponent),zt=function(m){Se(w,m);var v=mt(w);function w(){return K(this,w),v.apply(this,arguments)}return oe(w,[{key:"render",value:function(){var S=this.props,z=S.style,ae=Ve(S,["style"]);return O.a.createElement("span",ae,O.a.createElement("svg",Object.assign({},me(z),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),O.a.createElement("g",null,O.a.createElement("path",{d:"m31.7 16.4q0-0.6-0.4-1l-2.1-2.1q-0.4-0.4-1-0.4t-1 0.4l-9.1 9.1-5-5q-0.5-0.4-1-0.4t-1 0.4l-2.1 2q-0.4 0.4-0.4 1 0 0.6 0.4 1l8.1 8.1q0.4 0.4 1 0.4 0.6 0 1-0.4l12.2-12.1q0.4-0.4 0.4-1z m5.6 3.6q0 4.7-2.3 8.6t-6.3 6.2-8.6 2.3-8.6-2.3-6.2-6.2-2.3-8.6 2.3-8.6 6.2-6.2 8.6-2.3 8.6 2.3 6.3 6.2 2.3 8.6z"}))))}}]),w}(O.a.PureComponent);function me(m){return m||(m={}),{style:H(H({verticalAlign:"middle"},m),{},{color:m.color?m.color:"#000000",height:"1em",width:"1em"})}}var Ie=function(m){Se(w,m);var v=mt(w);function w(S){var z;return K(this,w),(z=v.call(this,S)).copiedTimer=null,z.handleCopy=function(){var ae=document.createElement("textarea"),F=z.props,X=F.clickCallback,P=F.src,W=F.namespace;ae.innerHTML=JSON.stringify(z.clipboardValue(P),null,"  "),document.body.appendChild(ae),ae.select(),document.execCommand("copy"),document.body.removeChild(ae),z.copiedTimer=setTimeout(function(){z.setState({copied:!1})},5500),z.setState({copied:!0},function(){typeof X=="function"&&X({src:P,namespace:W,name:W[W.length-1]})})},z.getClippyIcon=function(){var ae=z.props.theme;return z.state.copied?O.a.createElement("span",null,O.a.createElement(Ke,Object.assign({className:"copy-icon"},ve(ae,"copy-icon"))),O.a.createElement("span",ve(ae,"copy-icon-copied"),"\u2714")):O.a.createElement(Ke,Object.assign({className:"copy-icon"},ve(ae,"copy-icon")))},z.clipboardValue=function(ae){switch(ke(ae)){case"function":case"regexp":return ae.toString();default:return ae}},z.state={copied:!1},z}return oe(w,[{key:"componentWillUnmount",value:function(){this.copiedTimer&&(clearTimeout(this.copiedTimer),this.copiedTimer=null)}},{key:"render",value:function(){var S=this.props,z=(S.src,S.theme),ae=S.hidden,F=S.rowHovered,X=ve(z,"copy-to-clipboard").style,P="inline";return ae&&(P="none"),O.a.createElement("span",{className:"copy-to-clipboard-container",title:"Copy to clipboard",style:{verticalAlign:"top",display:F?"inline-block":"none"}},O.a.createElement("span",{style:H(H({},X),{},{display:P}),onClick:this.handleCopy},this.getClippyIcon()))}}]),w}(O.a.PureComponent),ct=function(m){Se(w,m);var v=mt(w);function w(S){var z;return K(this,w),(z=v.call(this,S)).getEditIcon=function(){var ae=z.props,F=ae.variable,X=ae.theme;return O.a.createElement("div",{className:"click-to-edit",style:{verticalAlign:"top",display:z.state.hovered?"inline-block":"none"}},O.a.createElement(ln,Object.assign({className:"click-to-edit-icon"},ve(X,"editVarIcon"),{onClick:function(){z.prepopInput(F)}})))},z.prepopInput=function(ae){if(z.props.onEdit!==!1){var F=function(P){var W;switch(ke(P)){case"undefined":W="undefined";break;case"nan":W="NaN";break;case"string":W=P;break;case"date":case"function":case"regexp":W=P.toString();break;default:try{W=JSON.stringify(P,null,"  ")}catch(Fe){W=""}}return W}(ae.value),X=Ze(F);z.setState({editMode:!0,editValue:F,parsedInput:{type:X.type,value:X.value}})}},z.getRemoveIcon=function(){var ae=z.props,F=ae.variable,X=ae.namespace,P=ae.theme,W=ae.rjvId;return O.a.createElement("div",{className:"click-to-remove",style:{verticalAlign:"top",display:z.state.hovered?"inline-block":"none"}},O.a.createElement(at,Object.assign({className:"click-to-remove-icon"},ve(P,"removeVarIcon"),{onClick:function(){$e.dispatch({name:"VARIABLE_REMOVED",rjvId:W,data:{name:F.name,namespace:X,existing_value:F.value,variable_removed:!0}})}})))},z.getValue=function(ae,F){var X=!F&&ae.type,P=lt(z).props;switch(X){case!1:return z.getEditInput();case"string":return O.a.createElement(pt,Object.assign({value:ae.value},P));case"integer":return O.a.createElement(Rt,Object.assign({value:ae.value},P));case"float":return O.a.createElement(Y,Object.assign({value:ae.value},P));case"boolean":return O.a.createElement(we,Object.assign({value:ae.value},P));case"function":return O.a.createElement(tt,Object.assign({value:ae.value},P));case"null":return O.a.createElement(ot,P);case"nan":return O.a.createElement(St,P);case"undefined":return O.a.createElement(Xe,P);case"date":return O.a.createElement(de,Object.assign({value:ae.value},P));case"regexp":return O.a.createElement(Lt,Object.assign({value:ae.value},P));default:return O.a.createElement("div",{className:"object-value"},JSON.stringify(ae.value))}},z.getEditInput=function(){var ae=z.props.theme,F=z.state.editValue;return O.a.createElement("div",null,O.a.createElement(Ne,Object.assign({type:"text",inputRef:function(X){return X&&X.focus()},value:F,className:"variable-editor",onChange:function(X){var P=X.target.value,W=Ze(P);z.setState({editValue:P,parsedInput:{type:W.type,value:W.value}})},onKeyDown:function(X){switch(X.key){case"Escape":z.setState({editMode:!1,editValue:""});break;case"Enter":(X.ctrlKey||X.metaKey)&&z.submitEdit(!0)}X.stopPropagation()},placeholder:"update this value",minRows:2},ve(ae,"edit-input"))),O.a.createElement("div",ve(ae,"edit-icon-container"),O.a.createElement(at,Object.assign({className:"edit-cancel"},ve(ae,"cancel-icon"),{onClick:function(){z.setState({editMode:!1,editValue:""})}})),O.a.createElement(zt,Object.assign({className:"edit-check string-value"},ve(ae,"check-icon"),{onClick:function(){z.submitEdit()}})),O.a.createElement("div",null,z.showDetected())))},z.submitEdit=function(ae){var F=z.props,X=F.variable,P=F.namespace,W=F.rjvId,Fe=z.state,Ge=Fe.editValue,ut=Fe.parsedInput,kt=Ge;ae&&ut.type&&(kt=ut.value),z.setState({editMode:!1}),$e.dispatch({name:"VARIABLE_UPDATED",rjvId:W,data:{name:X.name,namespace:P,existing_value:X.value,new_value:kt,variable_removed:!1}})},z.showDetected=function(){var ae=z.props,F=ae.theme,X=(ae.variable,ae.namespace,ae.rjvId,z.state.parsedInput),P=(X.type,X.value,z.getDetectedInput());if(P)return O.a.createElement("div",null,O.a.createElement("div",ve(F,"detected-row"),P,O.a.createElement(zt,{className:"edit-check detected",style:H({verticalAlign:"top",paddingLeft:"3px"},ve(F,"check-icon").style),onClick:function(){z.submitEdit(!0)}})))},z.getDetectedInput=function(){var ae=z.state.parsedInput,F=ae.type,X=ae.value,P=lt(z).props,W=P.theme;if(F!==!1)switch(F.toLowerCase()){case"object":return O.a.createElement("span",null,O.a.createElement("span",{style:H(H({},ve(W,"brace").style),{},{cursor:"default"})},"{"),O.a.createElement("span",{style:H(H({},ve(W,"ellipsis").style),{},{cursor:"default"})},"..."),O.a.createElement("span",{style:H(H({},ve(W,"brace").style),{},{cursor:"default"})},"}"));case"array":return O.a.createElement("span",null,O.a.createElement("span",{style:H(H({},ve(W,"brace").style),{},{cursor:"default"})},"["),O.a.createElement("span",{style:H(H({},ve(W,"ellipsis").style),{},{cursor:"default"})},"..."),O.a.createElement("span",{style:H(H({},ve(W,"brace").style),{},{cursor:"default"})},"]"));case"string":return O.a.createElement(pt,Object.assign({value:X},P));case"integer":return O.a.createElement(Rt,Object.assign({value:X},P));case"float":return O.a.createElement(Y,Object.assign({value:X},P));case"boolean":return O.a.createElement(we,Object.assign({value:X},P));case"function":return O.a.createElement(tt,Object.assign({value:X},P));case"null":return O.a.createElement(ot,P);case"nan":return O.a.createElement(St,P);case"undefined":return O.a.createElement(Xe,P);case"date":return O.a.createElement(de,Object.assign({value:new Date(X)},P))}},z.state={editMode:!1,editValue:"",hovered:!1,renameKey:!1,parsedInput:{type:!1,value:null}},z}return oe(w,[{key:"render",value:function(){var S=this,z=this.props,ae=z.variable,F=z.singleIndent,X=z.type,P=z.theme,W=z.namespace,Fe=z.indentWidth,Ge=z.enableClipboard,ut=z.onEdit,kt=z.onDelete,Ht=z.onSelect,ht=z.displayArrayKey,vt=z.quotesOnKeys,ft=this.state.editMode;return O.a.createElement("div",Object.assign({},ve(P,"objectKeyVal",{paddingLeft:Fe*F}),{onMouseEnter:function(){return S.setState(H(H({},S.state),{},{hovered:!0}))},onMouseLeave:function(){return S.setState(H(H({},S.state),{},{hovered:!1}))},className:"variable-row",key:ae.name}),X=="array"?ht?O.a.createElement("span",Object.assign({},ve(P,"array-key"),{key:ae.name+"_"+W}),ae.name,O.a.createElement("div",ve(P,"colon"),":")):null:O.a.createElement("span",null,O.a.createElement("span",Object.assign({},ve(P,"object-name"),{className:"object-key",key:ae.name+"_"+W}),!!vt&&O.a.createElement("span",{style:{verticalAlign:"top"}},'"'),O.a.createElement("span",{style:{display:"inline-block"}},ae.name),!!vt&&O.a.createElement("span",{style:{verticalAlign:"top"}},'"')),O.a.createElement("span",ve(P,"colon"),":")),O.a.createElement("div",Object.assign({className:"variable-value",onClick:Ht===!1&&ut===!1?null:function(Gt){var An=Ae(W);(Gt.ctrlKey||Gt.metaKey)&&ut!==!1?S.prepopInput(ae):Ht!==!1&&(An.shift(),Ht(H(H({},ae),{},{namespace:An})))}},ve(P,"variableValue",{cursor:Ht===!1?"default":"pointer"})),this.getValue(ae,ft)),Ge?O.a.createElement(Ie,{rowHovered:this.state.hovered,hidden:ft,src:ae.value,clickCallback:Ge,theme:P,namespace:[].concat(Ae(W),[ae.name])}):null,ut!==!1&&ft==0?this.getEditIcon():null,kt!==!1&&ft==0?this.getRemoveIcon():null)}}]),w}(O.a.PureComponent),It=function(m){Se(w,m);var v=mt(w);function w(){var S;K(this,w);for(var z=arguments.length,ae=new Array(z),F=0;F<z;F++)ae[F]=arguments[F];return(S=v.call.apply(v,[this].concat(ae))).getObjectSize=function(){var X=S.props,P=X.size,W=X.theme;if(X.displayObjectSize)return O.a.createElement("span",Object.assign({className:"object-size"},ve(W,"object-size")),P," item",P===1?"":"s")},S.getAddAttribute=function(X){var P=S.props,W=P.theme,Fe=P.namespace,Ge=P.name,ut=P.src,kt=P.rjvId,Ht=P.depth;return O.a.createElement("span",{className:"click-to-add",style:{verticalAlign:"top",display:X?"inline-block":"none"}},O.a.createElement(Bt,Object.assign({className:"click-to-add-icon"},ve(W,"addVarIcon"),{onClick:function(){var ht={name:Ht>0?Ge:null,namespace:Fe.splice(0,Fe.length-1),existing_value:ut,variable_removed:!1,key_name:null};ke(ut)==="object"?$e.dispatch({name:"ADD_VARIABLE_KEY_REQUEST",rjvId:kt,data:ht}):$e.dispatch({name:"VARIABLE_ADDED",rjvId:kt,data:H(H({},ht),{},{new_value:[].concat(Ae(ut),[null])})})}})))},S.getRemoveObject=function(X){var P=S.props,W=P.theme,Fe=(P.hover,P.namespace),Ge=P.name,ut=P.src,kt=P.rjvId;if(Fe.length!==1)return O.a.createElement("span",{className:"click-to-remove",style:{display:X?"inline-block":"none"}},O.a.createElement(at,Object.assign({className:"click-to-remove-icon"},ve(W,"removeVarIcon"),{onClick:function(){$e.dispatch({name:"VARIABLE_REMOVED",rjvId:kt,data:{name:Ge,namespace:Fe.splice(0,Fe.length-1),existing_value:ut,variable_removed:!0}})}})))},S.render=function(){var X=S.props,P=X.theme,W=X.onDelete,Fe=X.onAdd,Ge=X.enableClipboard,ut=X.src,kt=X.namespace,Ht=X.rowHovered;return O.a.createElement("div",Object.assign({},ve(P,"object-meta-data"),{className:"object-meta-data",onClick:function(ht){ht.stopPropagation()}}),S.getObjectSize(),Ge?O.a.createElement(Ie,{rowHovered:Ht,clickCallback:Ge,src:ut,theme:P,namespace:kt}):null,Fe!==!1?S.getAddAttribute(Ht):null,W!==!1?S.getRemoveObject(Ht):null)},S}return w}(O.a.PureComponent);function en(m){var v=m.parent_type,w=m.namespace,S=m.quotesOnKeys,z=m.theme,ae=m.jsvRoot,F=m.name,X=m.displayArrayKey,P=m.name?m.name:"";return!ae||F!==!1&&F!==null?v=="array"?X?O.a.createElement("span",Object.assign({},ve(z,"array-key"),{key:w}),O.a.createElement("span",{className:"array-key"},P),O.a.createElement("span",ve(z,"colon"),":")):O.a.createElement("span",null):O.a.createElement("span",Object.assign({},ve(z,"object-name"),{key:w}),O.a.createElement("span",{className:"object-key"},S&&O.a.createElement("span",{style:{verticalAlign:"top"}},'"'),O.a.createElement("span",null,P),S&&O.a.createElement("span",{style:{verticalAlign:"top"}},'"')),O.a.createElement("span",ve(z,"colon"),":")):O.a.createElement("span",null)}function bn(m){var v=m.theme;switch(m.iconStyle){case"triangle":return O.a.createElement(Qe,Object.assign({},ve(v,"expanded-icon"),{className:"expanded-icon"}));case"square":return O.a.createElement($n,Object.assign({},ve(v,"expanded-icon"),{className:"expanded-icon"}));default:return O.a.createElement(Ft,Object.assign({},ve(v,"expanded-icon"),{className:"expanded-icon"}))}}function Vn(m){var v=m.theme;switch(m.iconStyle){case"triangle":return O.a.createElement(Me,Object.assign({},ve(v,"collapsed-icon"),{className:"collapsed-icon"}));case"square":return O.a.createElement(dn,Object.assign({},ve(v,"collapsed-icon"),{className:"collapsed-icon"}));default:return O.a.createElement(qt,Object.assign({},ve(v,"collapsed-icon"),{className:"collapsed-icon"}))}}var tr=function(m){Se(w,m);var v=mt(w);function w(S){var z;return K(this,w),(z=v.call(this,S)).toggleCollapsed=function(ae){var F=[];for(var X in z.state.expanded)F.push(z.state.expanded[X]);F[ae]=!F[ae],z.setState({expanded:F})},z.state={expanded:[]},z}return oe(w,[{key:"getExpandedIcon",value:function(S){var z=this.props,ae=z.theme,F=z.iconStyle;return this.state.expanded[S]?O.a.createElement(bn,{theme:ae,iconStyle:F}):O.a.createElement(Vn,{theme:ae,iconStyle:F})}},{key:"render",value:function(){var S=this,z=this.props,ae=z.src,F=z.groupArraysAfterLength,X=(z.depth,z.name),P=z.theme,W=z.jsvRoot,Fe=z.namespace,Ge=(z.parent_type,Ve(z,["src","groupArraysAfterLength","depth","name","theme","jsvRoot","namespace","parent_type"])),ut=0,kt=5*this.props.indentWidth;W||(ut=5*this.props.indentWidth);var Ht=F,ht=Math.ceil(ae.length/Ht);return O.a.createElement("div",Object.assign({className:"object-key-val"},ve(P,W?"jsv-root":"objectKeyVal",{paddingLeft:ut})),O.a.createElement(en,this.props),O.a.createElement("span",null,O.a.createElement(It,Object.assign({size:ae.length},this.props))),Ae(Array(ht)).map(function(vt,ft){return O.a.createElement("div",Object.assign({key:ft,className:"object-key-val array-group"},ve(P,"objectKeyVal",{marginLeft:6,paddingLeft:kt})),O.a.createElement("span",ve(P,"brace-row"),O.a.createElement("div",Object.assign({className:"icon-container"},ve(P,"icon-container"),{onClick:function(Gt){S.toggleCollapsed(ft)}}),S.getExpandedIcon(ft)),S.state.expanded[ft]?O.a.createElement(ti,Object.assign({key:X+ft,depth:0,name:!1,collapsed:!1,groupArraysAfterLength:Ht,index_offset:ft*Ht,src:ae.slice(ft*Ht,ft*Ht+Ht),namespace:Fe,type:"array",parent_type:"array_group",theme:P},Ge)):O.a.createElement("span",Object.assign({},ve(P,"brace"),{onClick:function(Gt){S.toggleCollapsed(ft)},className:"array-group-brace"}),"[",O.a.createElement("div",Object.assign({},ve(P,"array-group-meta-data"),{className:"array-group-meta-data"}),O.a.createElement("span",Object.assign({className:"object-size"},ve(P,"object-size")),ft*Ht," - ",ft*Ht+Ht>ae.length?ae.length:ft*Ht+Ht)),"]")))}))}}]),w}(O.a.PureComponent),lr=function(m){Se(w,m);var v=mt(w);function w(S){var z;K(this,w),(z=v.call(this,S)).toggleCollapsed=function(){z.setState({expanded:!z.state.expanded},function(){it.set(z.props.rjvId,z.props.namespace,"expanded",z.state.expanded)})},z.getObjectContent=function(F,X,P){return O.a.createElement("div",{className:"pushed-content object-container"},O.a.createElement("div",Object.assign({className:"object-content"},ve(z.props.theme,"pushed-content")),z.renderObjectContents(X,P)))},z.getEllipsis=function(){return z.state.size===0?null:O.a.createElement("div",Object.assign({},ve(z.props.theme,"ellipsis"),{className:"node-ellipsis",onClick:z.toggleCollapsed}),"...")},z.getObjectMetaData=function(F){var X=z.props,P=(X.rjvId,X.theme,z.state),W=P.size,Fe=P.hovered;return O.a.createElement(It,Object.assign({rowHovered:Fe,size:W},z.props))},z.renderObjectContents=function(F,X){var P,W=z.props,Fe=W.depth,Ge=W.parent_type,ut=W.index_offset,kt=W.groupArraysAfterLength,Ht=W.namespace,ht=z.state.object_type,vt=[],ft=Object.keys(F||{});return z.props.sortKeys&&ht!=="array"&&(ft=ft.sort()),ft.forEach(function(Gt){if(P=new Ar(Gt,F[Gt]),Ge==="array_group"&&ut&&(P.name=parseInt(P.name)+ut),F.hasOwnProperty(Gt))if(P.type==="object")vt.push(O.a.createElement(ti,Object.assign({key:P.name,depth:Fe+1,name:P.name,src:P.value,namespace:Ht.concat(P.name),parent_type:ht},X)));else if(P.type==="array"){var An=ti;kt&&P.value.length>kt&&(An=tr),vt.push(O.a.createElement(An,Object.assign({key:P.name,depth:Fe+1,name:P.name,src:P.value,namespace:Ht.concat(P.name),type:"array",parent_type:ht},X)))}else vt.push(O.a.createElement(ct,Object.assign({key:P.name+"_"+Ht,variable:P,singleIndent:5,namespace:Ht,type:z.props.type},X)))}),vt};var ae=w.getState(S);return z.state=H(H({},ae),{},{prevProps:{}}),z}return oe(w,[{key:"getBraceStart",value:function(S,z){var ae=this,F=this.props,X=F.src,P=F.theme,W=F.iconStyle;if(F.parent_type==="array_group")return O.a.createElement("span",null,O.a.createElement("span",ve(P,"brace"),S==="array"?"[":"{"),z?this.getObjectMetaData(X):null);var Fe=z?bn:Vn;return O.a.createElement("span",null,O.a.createElement("span",Object.assign({onClick:function(Ge){ae.toggleCollapsed()}},ve(P,"brace-row")),O.a.createElement("div",Object.assign({className:"icon-container"},ve(P,"icon-container")),O.a.createElement(Fe,{theme:P,iconStyle:W})),O.a.createElement(en,this.props),O.a.createElement("span",ve(P,"brace"),S==="array"?"[":"{")),z?this.getObjectMetaData(X):null)}},{key:"render",value:function(){var S=this,z=this.props,ae=z.depth,F=z.src,X=(z.namespace,z.name,z.type,z.parent_type),P=z.theme,W=z.jsvRoot,Fe=z.iconStyle,Ge=Ve(z,["depth","src","namespace","name","type","parent_type","theme","jsvRoot","iconStyle"]),ut=this.state,kt=ut.object_type,Ht=ut.expanded,ht={};return W||X==="array_group"?X==="array_group"&&(ht.borderLeft=0,ht.display="inline"):ht.paddingLeft=5*this.props.indentWidth,O.a.createElement("div",Object.assign({className:"object-key-val",onMouseEnter:function(){return S.setState(H(H({},S.state),{},{hovered:!0}))},onMouseLeave:function(){return S.setState(H(H({},S.state),{},{hovered:!1}))}},ve(P,W?"jsv-root":"objectKeyVal",ht)),this.getBraceStart(kt,Ht),Ht?this.getObjectContent(ae,F,H({theme:P,iconStyle:Fe},Ge)):this.getEllipsis(),O.a.createElement("span",{className:"brace-row"},O.a.createElement("span",{style:H(H({},ve(P,"brace").style),{},{paddingLeft:Ht?"3px":"0px"})},kt==="array"?"]":"}"),Ht?null:this.getObjectMetaData(F)))}}],[{key:"getDerivedStateFromProps",value:function(S,z){var ae=z.prevProps;return S.src!==ae.src||S.collapsed!==ae.collapsed||S.name!==ae.name||S.namespace!==ae.namespace||S.rjvId!==ae.rjvId?H(H({},w.getState(S)),{},{prevProps:S}):null}}]),w}(O.a.PureComponent);lr.getState=function(m){var v=Object.keys(m.src).length,w=(m.collapsed===!1||m.collapsed!==!0&&m.collapsed>m.depth)&&(!m.shouldCollapse||m.shouldCollapse({name:m.name,src:m.src,type:ke(m.src),namespace:m.namespace})===!1)&&v!==0;return{expanded:it.get(m.rjvId,m.namespace,"expanded",w),object_type:m.type==="array"?"array":"object",parent_type:m.type==="array"?"array":"object",size:v,hovered:!1}};var Ar=function m(v,w){K(this,m),this.name=v,this.value=w,this.type=ke(w)};Nt(lr);var ti=lr,ai=function(m){Se(w,m);var v=mt(w);function w(){var S;K(this,w);for(var z=arguments.length,ae=new Array(z),F=0;F<z;F++)ae[F]=arguments[F];return(S=v.call.apply(v,[this].concat(ae))).render=function(){var X=lt(S).props,P=[X.name],W=ti;return Array.isArray(X.src)&&X.groupArraysAfterLength&&X.src.length>X.groupArraysAfterLength&&(W=tr),O.a.createElement("div",{className:"pretty-json-container object-container"},O.a.createElement("div",{className:"object-content"},O.a.createElement(W,Object.assign({namespace:P,depth:0,jsvRoot:!0},X))))},S}return w}(O.a.PureComponent),Pr=function(m){Se(w,m);var v=mt(w);function w(S){var z;return K(this,w),(z=v.call(this,S)).closeModal=function(){$e.dispatch({rjvId:z.props.rjvId,name:"RESET"})},z.submit=function(){z.props.submit(z.state.input)},z.state={input:S.input?S.input:""},z}return oe(w,[{key:"render",value:function(){var S=this,z=this.props,ae=z.theme,F=z.rjvId,X=z.isValid,P=this.state.input,W=X(P);return O.a.createElement("div",Object.assign({className:"key-modal-request"},ve(ae,"key-modal-request"),{onClick:this.closeModal}),O.a.createElement("div",Object.assign({},ve(ae,"key-modal"),{onClick:function(Fe){Fe.stopPropagation()}}),O.a.createElement("div",ve(ae,"key-modal-label"),"Key Name:"),O.a.createElement("div",{style:{position:"relative"}},O.a.createElement("input",Object.assign({},ve(ae,"key-modal-input"),{className:"key-modal-input",ref:function(Fe){return Fe&&Fe.focus()},spellCheck:!1,value:P,placeholder:"...",onChange:function(Fe){S.setState({input:Fe.target.value})},onKeyPress:function(Fe){W&&Fe.key==="Enter"?S.submit():Fe.key==="Escape"&&S.closeModal()}})),W?O.a.createElement(zt,Object.assign({},ve(ae,"key-modal-submit"),{className:"key-modal-submit",onClick:function(Fe){return S.submit()}})):null),O.a.createElement("span",ve(ae,"key-modal-cancel"),O.a.createElement(En,Object.assign({},ve(ae,"key-modal-cancel-icon"),{className:"key-modal-cancel",onClick:function(){$e.dispatch({rjvId:F,name:"RESET"})}})))))}}]),w}(O.a.PureComponent),mi=function(m){Se(w,m);var v=mt(w);function w(){var S;K(this,w);for(var z=arguments.length,ae=new Array(z),F=0;F<z;F++)ae[F]=arguments[F];return(S=v.call.apply(v,[this].concat(ae))).isValid=function(X){var P=S.props.rjvId,W=it.get(P,"action","new-key-request");return X!=""&&Object.keys(W.existing_value).indexOf(X)===-1},S.submit=function(X){var P=S.props.rjvId,W=it.get(P,"action","new-key-request");W.new_value=H({},W.existing_value),W.new_value[X]=S.props.defaultValue,$e.dispatch({name:"VARIABLE_ADDED",rjvId:P,data:W})},S}return oe(w,[{key:"render",value:function(){var S=this.props,z=S.active,ae=S.theme,F=S.rjvId;return z?O.a.createElement(Pr,{rjvId:F,theme:ae,isValid:this.isValid,submit:this.submit}):null}}]),w}(O.a.PureComponent),D=function(m){Se(w,m);var v=mt(w);function w(){return K(this,w),v.apply(this,arguments)}return oe(w,[{key:"render",value:function(){var S=this.props,z=S.message,ae=S.active,F=S.theme,X=S.rjvId;return ae?O.a.createElement("div",Object.assign({className:"validation-failure"},ve(F,"validation-failure"),{onClick:function(){$e.dispatch({rjvId:X,name:"RESET"})}}),O.a.createElement("span",ve(F,"validation-failure-label"),z),O.a.createElement(En,ve(F,"validation-failure-clear"))):null}}]),w}(O.a.PureComponent),j=function(m){Se(w,m);var v=mt(w);function w(S){var z;return K(this,w),(z=v.call(this,S)).rjvId=Date.now().toString(),z.getListeners=function(){return{reset:z.resetState,"variable-update":z.updateSrc,"add-key-request":z.addKeyRequest}},z.updateSrc=function(){var ae,F=it.get(z.rjvId,"action","variable-update"),X=F.name,P=F.namespace,W=F.new_value,Fe=F.existing_value,Ge=(F.variable_removed,F.updated_src),ut=F.type,kt=z.props,Ht=kt.onEdit,ht=kt.onDelete,vt=kt.onAdd,ft={existing_src:z.state.src,new_value:W,updated_src:Ge,name:X,namespace:P,existing_value:Fe};switch(ut){case"variable-added":ae=vt(ft);break;case"variable-edited":ae=Ht(ft);break;case"variable-removed":ae=ht(ft)}ae!==!1?(it.set(z.rjvId,"global","src",Ge),z.setState({src:Ge})):z.setState({validationFailure:!0})},z.addKeyRequest=function(){z.setState({addKeyRequest:!0})},z.resetState=function(){z.setState({validationFailure:!1,addKeyRequest:!1})},z.state={addKeyRequest:!1,editKeyRequest:!1,validationFailure:!1,src:w.defaultProps.src,name:w.defaultProps.name,theme:w.defaultProps.theme,validationMessage:w.defaultProps.validationMessage,prevSrc:w.defaultProps.src,prevName:w.defaultProps.name,prevTheme:w.defaultProps.theme},z}return oe(w,[{key:"componentDidMount",value:function(){it.set(this.rjvId,"global","src",this.state.src);var S=this.getListeners();for(var z in S)it.on(z+"-"+this.rjvId,S[z]);this.setState({addKeyRequest:!1,editKeyRequest:!1})}},{key:"componentDidUpdate",value:function(S,z){z.addKeyRequest!==!1&&this.setState({addKeyRequest:!1}),z.editKeyRequest!==!1&&this.setState({editKeyRequest:!1}),S.src!==this.state.src&&it.set(this.rjvId,"global","src",this.state.src)}},{key:"componentWillUnmount",value:function(){var S=this.getListeners();for(var z in S)it.removeListener(z+"-"+this.rjvId,S[z])}},{key:"render",value:function(){var S=this.state,z=S.validationFailure,ae=S.validationMessage,F=S.addKeyRequest,X=S.theme,P=S.src,W=S.name,Fe=this.props,Ge=Fe.style,ut=Fe.defaultValue;return O.a.createElement("div",{className:"react-json-view",style:H(H({},ve(X,"app-container").style),Ge)},O.a.createElement(D,{message:ae,active:z,theme:X,rjvId:this.rjvId}),O.a.createElement(ai,Object.assign({},this.props,{src:P,name:W,theme:X,type:ke(P),rjvId:this.rjvId})),O.a.createElement(mi,{active:F,theme:X,rjvId:this.rjvId,defaultValue:ut}))}}],[{key:"getDerivedStateFromProps",value:function(S,z){if(S.src!==z.prevSrc||S.name!==z.prevName||S.theme!==z.prevTheme){var ae={src:S.src,name:S.name,theme:S.theme,validationMessage:S.validationMessage,prevSrc:S.src,prevName:S.name,prevTheme:S.theme};return w.validateState(ae)}return null}}]),w}(O.a.PureComponent);j.defaultProps={src:{},name:"root",theme:"rjv-default",collapsed:!1,collapseStringsAfterLength:!1,shouldCollapse:!1,sortKeys:!1,quotesOnKeys:!0,groupArraysAfterLength:100,indentWidth:4,enableClipboard:!0,displayObjectSize:!0,displayDataTypes:!0,onEdit:!1,onDelete:!1,onAdd:!1,onSelect:!1,iconStyle:"triangle",style:{},validationMessage:"Validation Error",defaultValue:null,displayArrayKey:!0},j.validateState=function(m){var v={};return ke(m.theme)!=="object"||function(w){var S=["base00","base01","base02","base03","base04","base05","base06","base07","base08","base09","base0A","base0B","base0C","base0D","base0E","base0F"];if(ke(w)==="object"){for(var z=0;z<S.length;z++)if(!(S[z]in w))return!1;return!0}return!1}(m.theme)||(console.error("react-json-view error:","theme prop must be a theme name or valid base-16 theme object.",'defaulting to "rjv-default" theme'),v.theme="rjv-default"),ke(m.src)!=="object"&&ke(m.src)!=="array"&&(console.error("react-json-view error:","src property must be a valid json object"),v.name="ERROR",v.src={message:"src property must be a valid json object"}),H(H({},m),v)},Nt(j),g.default=j}])})},23406:function(tn,qe){"use strict";var J;qe.ConcurrentRoot=1,qe.ContinuousEventPriority=4,qe.DefaultEventPriority=16,qe.DiscreteEventPriority=1,J=536870912,J=0},45658:function(tn,qe,J){tn.exports=function(x){var g={},C=J(50959),T=J(65297),$=Object.assign;function H(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var K=C.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ce=Symbol.for("react.element"),oe=Symbol.for("react.portal"),xe=Symbol.for("react.fragment"),Se=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),rt=Symbol.for("react.provider"),lt=Symbol.for("react.context"),Qt=Symbol.for("react.forward_ref"),mt=Symbol.for("react.suspense"),Pt=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),Ye=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var gt=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var Ot=Symbol.iterator;function Nt(i){return i===null||typeof i!="object"?null:(i=Ot&&i[Ot]||i["@@iterator"],typeof i=="function"?i:null)}function Ve(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case xe:return"Fragment";case oe:return"Portal";case k:return"Profiler";case Se:return"StrictMode";case mt:return"Suspense";case Pt:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case lt:return(i.displayName||"Context")+".Consumer";case rt:return(i._context.displayName||"Context")+".Provider";case Qt:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case O:return a=i.displayName||null,a!==null?a:Ve(i.type)||"Memo";case Ye:a=i._payload,i=i._init;try{return Ve(i(a))}catch(u){}}return null}function ke(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ve(a);case 8:return a===Se?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function dt(i){var a=i,u=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,a.flags&4098&&(u=a.return),i=a.return;while(i)}return a.tag===3?u:null}function Et(i){if(dt(i)!==i)throw Error(H(188))}function Z(i){var a=i.alternate;if(!a){if(a=dt(i),a===null)throw Error(H(188));return a!==i?null:i}for(var u=i,h=a;;){var E=u.return;if(E===null)break;var N=E.alternate;if(N===null){if(h=E.return,h!==null){u=h;continue}break}if(E.child===N.child){for(N=E.child;N;){if(N===u)return Et(E),i;if(N===h)return Et(E),a;N=N.sibling}throw Error(H(188))}if(u.return!==h.return)u=E,h=N;else{for(var ze=!1,wt=E.child;wt;){if(wt===u){ze=!0,u=E,h=N;break}if(wt===h){ze=!0,h=E,u=N;break}wt=wt.sibling}if(!ze){for(wt=N.child;wt;){if(wt===u){ze=!0,u=N,h=E;break}if(wt===h){ze=!0,h=N,u=E;break}wt=wt.sibling}if(!ze)throw Error(H(189))}}if(u.alternate!==h)throw Error(H(190))}if(u.tag!==3)throw Error(H(188));return u.stateNode.current===u?i:a}function ye(i){return i=Z(i),i!==null?ge(i):null}function ge(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=ge(i);if(a!==null)return a;i=i.sibling}return null}function ve(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){if(i.tag!==4){var a=ve(i);if(a!==null)return a}i=i.sibling}return null}var _e=Array.isArray,we=x.getPublicInstance,de=x.getRootHostContext,Y=x.getChildHostContext,te=x.prepareForCommit,Oe=x.resetAfterCommit,ee=x.createInstance,Ae=x.appendInitialChild,Te=x.finalizeInitialChildren,$e=x.prepareUpdate,Je=x.shouldSetTextContent,it=x.createTextInstance,tt=x.scheduleTimeout,St=x.cancelTimeout,ot=x.noTimeout,Rt=x.isPrimaryRenderer,Lt=x.supportsMutation,pt=x.supportsPersistence,Xe=x.supportsHydration,Be=x.getInstanceFromNode,Ct=x.preparePortalMount,Wt=x.getCurrentEventPriority,Xt=x.detachDeletedInstance,Yt=x.supportsMicrotasks,wn=x.scheduleMicrotask,an=x.supportsTestSelectors,un=x.findFiberRoot,Tn=x.getBoundingRect,yt=x.getTextContent,pe=x.isHiddenSubtree,Ce=x.matchAccessibilityRole,Ne=x.setFocusIfFocusable,Ze=x.setupIntersectionObserver,et=x.appendChild,Ft=x.appendChildToContainer,qt=x.commitTextUpdate,$n=x.commitMount,dn=x.commitUpdate,Me=x.insertBefore,Qe=x.insertInContainerBefore,Ke=x.removeChild,at=x.removeChildFromContainer,Bt=x.resetTextContent,En=x.hideInstance,ln=x.hideTextInstance,zt=x.unhideInstance,me=x.unhideTextInstance,Ie=x.clearContainer,ct=x.cloneInstance,It=x.createContainerChildSet,en=x.appendChildToContainerChildSet,bn=x.finalizeContainerChildren,Vn=x.replaceContainerChildren,tr=x.cloneHiddenInstance,lr=x.cloneHiddenTextInstance,Ar=x.canHydrateInstance,ti=x.canHydrateTextInstance,ai=x.canHydrateSuspenseInstance,Pr=x.isSuspenseInstancePending,mi=x.isSuspenseInstanceFallback,D=x.registerSuspenseInstanceRetry,j=x.getNextHydratableSibling,m=x.getFirstHydratableChild,v=x.getFirstHydratableChildWithinContainer,w=x.getFirstHydratableChildWithinSuspenseInstance,S=x.hydrateInstance,z=x.hydrateTextInstance,ae=x.hydrateSuspenseInstance,F=x.getNextHydratableInstanceAfterSuspenseInstance,X=x.commitHydratedContainer,P=x.commitHydratedSuspenseInstance,W=x.clearSuspenseBoundary,Fe=x.clearSuspenseBoundaryFromContainer,Ge=x.shouldDeleteUnhydratedTailInstances,ut=x.didNotMatchHydratedContainerTextInstance,kt=x.didNotMatchHydratedTextInstance,Ht;function ht(i){if(Ht===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);Ht=a&&a[1]||""}return`
`+Ht+i}var vt=!1;function ft(i,a){if(!i||vt)return"";vt=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(jn){var h=jn}Reflect.construct(i,[],a)}else{try{a.call()}catch(jn){h=jn}i.call(a.prototype)}else{try{throw Error()}catch(jn){h=jn}i()}}catch(jn){if(jn&&h&&typeof jn.stack=="string"){for(var E=jn.stack.split(`
`),N=h.stack.split(`
`),ze=E.length-1,wt=N.length-1;1<=ze&&0<=wt&&E[ze]!==N[wt];)wt--;for(;1<=ze&&0<=wt;ze--,wt--)if(E[ze]!==N[wt]){if(ze!==1||wt!==1)do if(ze--,wt--,0>wt||E[ze]!==N[wt]){var rn=`
`+E[ze].replace(" at new "," at ");return i.displayName&&rn.includes("<anonymous>")&&(rn=rn.replace("<anonymous>",i.displayName)),rn}while(1<=ze&&0<=wt);break}}}finally{vt=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?ht(i):""}var Gt=Object.prototype.hasOwnProperty,An=[],Rn=-1;function Gn(i){return{current:i}}function Pn(i){0>Rn||(i.current=An[Rn],An[Rn]=null,Rn--)}function kn(i,a){Rn++,An[Rn]=i.current,i.current=a}var Qn={},cn=Gn(Qn),Zn=Gn(!1),cr=Qn;function Er(i,a){var u=i.type.contextTypes;if(!u)return Qn;var h=i.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===a)return h.__reactInternalMemoizedMaskedChildContext;var E={},N;for(N in u)E[N]=a[N];return h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=E),E}function Kr(i){return i=i.childContextTypes,i!=null}function bi(){Pn(Zn),Pn(cn)}function li(i,a,u){if(cn.current!==Qn)throw Error(H(168));kn(cn,a),kn(Zn,u)}function fi(i,a,u){var h=i.stateNode;if(a=a.childContextTypes,typeof h.getChildContext!="function")return u;h=h.getChildContext();for(var E in h)if(!(E in a))throw Error(H(108,ke(i)||"Unknown",E));return $({},u,h)}function Ci(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Qn,cr=cn.current,kn(cn,i),kn(Zn,Zn.current),!0}function Ii(i,a,u){var h=i.stateNode;if(!h)throw Error(H(169));u?(i=fi(i,a,cr),h.__reactInternalMemoizedMergedChildContext=i,Pn(Zn),Pn(cn),kn(cn,i)):Pn(Zn),kn(Zn,u)}var Or=Math.clz32?Math.clz32:ro,Gr=Math.log,Di=Math.LN2;function ro(i){return i>>>=0,i===0?32:31-(Gr(i)/Di|0)|0}var ci=64,$o=4194304;function To(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function mo(i,a){var u=i.pendingLanes;if(u===0)return 0;var h=0,E=i.suspendedLanes,N=i.pingedLanes,ze=u&268435455;if(ze!==0){var wt=ze&~E;wt!==0?h=To(wt):(N&=ze,N!==0&&(h=To(N)))}else ze=u&~E,ze!==0?h=To(ze):N!==0&&(h=To(N));if(h===0)return 0;if(a!==0&&a!==h&&!(a&E)&&(E=h&-h,N=a&-a,E>=N||E===16&&(N&4194240)!==0))return a;if(h&4&&(h|=u&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=h;0<a;)u=31-Or(a),E=1<<u,h|=i[u],a&=~E;return h}function Us(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ma(i,a){for(var u=i.suspendedLanes,h=i.pingedLanes,E=i.expirationTimes,N=i.pendingLanes;0<N;){var ze=31-Or(N),wt=1<<ze,rn=E[ze];rn===-1?(!(wt&u)||wt&h)&&(E[ze]=Us(wt,a)):rn<=a&&(i.expiredLanes|=wt),N&=~wt}}function Js(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Is(i){for(var a=[],u=0;31>u;u++)a.push(i);return a}function to(i,a,u){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-Or(a),i[a]=u}function Ao(i,a){var u=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var h=i.eventTimes;for(i=i.expirationTimes;0<u;){var E=31-Or(u),N=1<<E;a[E]=0,h[E]=-1,i[E]=-1,u&=~N}}function es(i,a){var u=i.entangledLanes|=a;for(i=i.entanglements;u;){var h=31-Or(u),E=1<<h;E&a|i[h]&a&&(i[h]|=a),u&=~E}}var Br=0;function us(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Po=T.unstable_scheduleCallback,Sr=T.unstable_cancelCallback,go=T.unstable_shouldYield,jo=T.unstable_requestPaint,Hi=T.unstable_now,U=T.unstable_ImmediatePriority,Q=T.unstable_UserBlockingPriority,Pe=T.unstable_NormalPriority,st=T.unstable_IdlePriority,Dt=null,Tt=null;function G(i){if(Tt&&typeof Tt.onCommitFiberRoot=="function")try{Tt.onCommitFiberRoot(Dt,i,void 0,(i.current.flags&128)===128)}catch(a){}}function be(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var I=typeof Object.is=="function"?Object.is:be,ie=null,We=!1,xt=!1;function Mn(i){ie===null?ie=[i]:ie.push(i)}function In(i){We=!0,Mn(i)}function Xn(){if(!xt&&ie!==null){xt=!0;var i=0,a=Br;try{var u=ie;for(Br=1;i<u.length;i++){var h=u[i];do h=h(!0);while(h!==null)}ie=null,We=!1}catch(E){throw ie!==null&&(ie=ie.slice(i+1)),Po(U,Xn),E}finally{Br=a,xt=!1}}return null}var yn=K.ReactCurrentBatchConfig;function Yn(i,a){if(I(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var u=Object.keys(i),h=Object.keys(a);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var E=u[h];if(!Gt.call(a,E)||!I(i[E],a[E]))return!1}return!0}function vr(i){switch(i.tag){case 5:return ht(i.type);case 16:return ht("Lazy");case 13:return ht("Suspense");case 19:return ht("SuspenseList");case 0:case 2:case 15:return i=ft(i.type,!1),i;case 11:return i=ft(i.type.render,!1),i;case 1:return i=ft(i.type,!0),i;default:return""}}function ir(i,a){if(i&&i.defaultProps){a=$({},a),i=i.defaultProps;for(var u in i)a[u]===void 0&&(a[u]=i[u]);return a}return a}var yr=Gn(null),ri=null,Wr=null,ii=null;function Xr(){ii=Wr=ri=null}function hi(i,a,u){Rt?(kn(yr,a._currentValue),a._currentValue=u):(kn(yr,a._currentValue2),a._currentValue2=u)}function Mi(i){var a=yr.current;Pn(yr),Rt?i._currentValue=a:i._currentValue2=a}function Ni(i,a,u){for(;i!==null;){var h=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),i===u)break;i=i.return}}function gi(i,a){ri=i,ii=Wr=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&a&&(qn=!0),i.firstContext=null)}function di(i){var a=Rt?i._currentValue:i._currentValue2;if(ii!==i)if(i={context:i,memoizedValue:a,next:null},Wr===null){if(ri===null)throw Error(H(308));Wr=i,ri.dependencies={lanes:0,firstContext:i}}else Wr=Wr.next=i;return a}var io=null,qi=!1;function Ds(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oo(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function oi(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function fs(i,a){var u=i.updateQueue;u!==null&&(u=u.shared,Wi!==null&&i.mode&1&&!(Vr&2)?(i=u.interleaved,i===null?(a.next=a,io===null?io=[u]:io.push(u)):(a.next=i.next,i.next=a),u.interleaved=a):(i=u.pending,i===null?a.next=a:(a.next=i.next,i.next=a),u.pending=a))}function Vs(i,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var h=a.lanes;h&=i.pendingLanes,u|=h,a.lanes=u,es(i,u)}}function qa(i,a){var u=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var E=null,N=null;if(u=u.firstBaseUpdate,u!==null){do{var ze={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};N===null?E=N=ze:N=N.next=ze,u=u.next}while(u!==null);N===null?E=N=a:N=N.next=a}else E=N=a;u={baseState:h.baseState,firstBaseUpdate:E,lastBaseUpdate:N,shared:h.shared,effects:h.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=a:i.next=a,u.lastBaseUpdate=a}function Hs(i,a,u,h){var E=i.updateQueue;qi=!1;var N=E.firstBaseUpdate,ze=E.lastBaseUpdate,wt=E.shared.pending;if(wt!==null){E.shared.pending=null;var rn=wt,jn=rn.next;rn.next=null,ze===null?N=jn:ze.next=jn,ze=rn;var ur=i.alternate;ur!==null&&(ur=ur.updateQueue,wt=ur.lastBaseUpdate,wt!==ze&&(wt===null?ur.firstBaseUpdate=jn:wt.next=jn,ur.lastBaseUpdate=rn))}if(N!==null){var Jr=E.baseState;ze=0,ur=jn=rn=null,wt=N;do{var Rr=wt.lane,Fi=wt.eventTime;if((h&Rr)===Rr){ur!==null&&(ur=ur.next={eventTime:Fi,lane:0,tag:wt.tag,payload:wt.payload,callback:wt.callback,next:null});e:{var _r=i,Xo=wt;switch(Rr=a,Fi=u,Xo.tag){case 1:if(_r=Xo.payload,typeof _r=="function"){Jr=_r.call(Fi,Jr,Rr);break e}Jr=_r;break e;case 3:_r.flags=_r.flags&-65537|128;case 0:if(_r=Xo.payload,Rr=typeof _r=="function"?_r.call(Fi,Jr,Rr):_r,Rr==null)break e;Jr=$({},Jr,Rr);break e;case 2:qi=!0}}wt.callback!==null&&wt.lane!==0&&(i.flags|=64,Rr=E.effects,Rr===null?E.effects=[wt]:Rr.push(wt))}else Fi={eventTime:Fi,lane:Rr,tag:wt.tag,payload:wt.payload,callback:wt.callback,next:null},ur===null?(jn=ur=Fi,rn=Jr):ur=ur.next=Fi,ze|=Rr;if(wt=wt.next,wt===null){if(wt=E.shared.pending,wt===null)break;Rr=wt,wt=Rr.next,Rr.next=null,E.lastBaseUpdate=Rr,E.shared.pending=null}}while(1);if(ur===null&&(rn=Jr),E.baseState=rn,E.firstBaseUpdate=jn,E.lastBaseUpdate=ur,a=E.shared.interleaved,a!==null){E=a;do ze|=E.lane,E=E.next;while(E!==a)}else N===null&&(E.shared.lanes=0);d1|=ze,i.lanes=ze,i.memoizedState=Jr}}function Fs(i,a,u){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var h=i[a],E=h.callback;if(E!==null){if(h.callback=null,h=u,typeof E!="function")throw Error(H(191,E));E.call(h)}}}var Qs=new C.Component().refs;function ga(i,a,u,h){a=i.memoizedState,u=u(h,a),u=u==null?a:$({},a,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Da={isMounted:function(i){return(i=i._reactInternals)?dt(i)===i:!1},enqueueSetState:function(i,a,u){i=i._reactInternals;var h=Jo(),E=La(i),N=oi(h,E);N.payload=a,u!=null&&(N.callback=u),fs(i,N),a=Ss(i,E,h),a!==null&&Vs(a,i,E)},enqueueReplaceState:function(i,a,u){i=i._reactInternals;var h=Jo(),E=La(i),N=oi(h,E);N.tag=1,N.payload=a,u!=null&&(N.callback=u),fs(i,N),a=Ss(i,E,h),a!==null&&Vs(a,i,E)},enqueueForceUpdate:function(i,a){i=i._reactInternals;var u=Jo(),h=La(i),E=oi(u,h);E.tag=2,a!=null&&(E.callback=a),fs(i,E),a=Ss(i,h,u),a!==null&&Vs(a,i,h)}};function ts(i,a,u,h,E,N,ze){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,N,ze):a.prototype&&a.prototype.isPureReactComponent?!Yn(u,h)||!Yn(E,N):!0}function v1(i,a,u){var h=!1,E=Qn,N=a.contextType;return typeof N=="object"&&N!==null?N=di(N):(E=Kr(a)?cr:cn.current,h=a.contextTypes,N=(h=h!=null)?Er(i,E):Qn),a=new a(u,N),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Da,i.stateNode=a,a._reactInternals=i,h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=E,i.__reactInternalMemoizedMaskedChildContext=N),a}function C1(i,a,u,h){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,h),a.state!==i&&Da.enqueueReplaceState(a,a.state,null)}function Ja(i,a,u,h){var E=i.stateNode;E.props=u,E.state=i.memoizedState,E.refs=Qs,Ds(i);var N=a.contextType;typeof N=="object"&&N!==null?E.context=di(N):(N=Kr(a)?cr:cn.current,E.context=Er(i,N)),E.state=i.memoizedState,N=a.getDerivedStateFromProps,typeof N=="function"&&(ga(i,a,N,u),E.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(a=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),a!==E.state&&Da.enqueueReplaceState(E,E.state,null),Hs(i,u,E,h),E.state=i.memoizedState),typeof E.componentDidMount=="function"&&(i.flags|=4194308)}var yo=[],ks=0,ns=null,va=0,oo=[],Io=0,ki=null,Tr=1,gs="";function Cn(i,a){yo[ks++]=va,yo[ks++]=ns,ns=i,va=a}function Nr(i,a,u){oo[Io++]=Tr,oo[Io++]=gs,oo[Io++]=ki,ki=i;var h=Tr;i=gs;var E=32-Or(h)-1;h&=~(1<<E),u+=1;var N=32-Or(a)+E;if(30<N){var ze=E-E%5;N=(h&(1<<ze)-1).toString(32),h>>=ze,E-=ze,Tr=1<<32-Or(a)+E|u<<E|h,gs=N+i}else Tr=1<<N|u<<E|h,gs=i}function $s(i){i.return!==null&&(Cn(i,1),Nr(i,1,0))}function ea(i){for(;i===ns;)ns=yo[--ks],yo[ks]=null,va=yo[--ks],yo[ks]=null;for(;i===ki;)ki=oo[--Io],oo[Io]=null,gs=oo[--Io],oo[Io]=null,Tr=oo[--Io],oo[Io]=null}var Wo=null,so=null,Ai=!1,Ca=!1,no=null;function rs(i,a){var u=Rs(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=i,a=i.deletions,a===null?(i.deletions=[u],i.flags|=16):a.push(u)}function js(i,a){switch(i.tag){case 5:return a=Ar(a,i.type,i.pendingProps),a!==null?(i.stateNode=a,Wo=i,so=m(a),!0):!1;case 6:return a=ti(a,i.pendingProps),a!==null?(i.stateNode=a,Wo=i,so=null,!0):!1;case 13:if(a=ai(a),a!==null){var u=ki!==null?{id:Tr,overflow:gs}:null;return i.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=Rs(18,null,null,0),u.stateNode=a,u.return=i,i.child=u,Wo=i,so=null,!0}return!1;default:return!1}}function Qa(i){return(i.mode&1)!==0&&(i.flags&128)===0}function vs(i){if(Ai){var a=so;if(a){var u=a;if(!js(i,a)){if(Qa(i))throw Error(H(418));a=j(u);var h=Wo;a&&js(i,a)?rs(h,u):(i.flags=i.flags&-4097|2,Ai=!1,Wo=i)}}else{if(Qa(i))throw Error(H(418));i.flags=i.flags&-4097|2,Ai=!1,Wo=i}}}function _1(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Wo=i}function Ha(i){if(!Xe||i!==Wo)return!1;if(!Ai)return _1(i),Ai=!0,!1;if(i.tag!==3&&(i.tag!==5||Ge(i.type)&&!Je(i.type,i.memoizedProps))){var a=so;if(a){if(Qa(i)){for(i=so;i;)i=j(i);throw Error(H(418))}for(;a;)rs(i,a),a=j(a)}}if(_1(i),i.tag===13){if(!Xe)throw Error(H(316));if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));so=F(i)}else so=Wo?j(i.stateNode):null;return!0}function _a(){Xe&&(so=Wo=null,Ca=Ai=!1)}function e1(i){no===null?no=[i]:no.push(i)}function xo(i,a,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(H(309));var h=u.stateNode}if(!h)throw Error(H(147,i));var E=h,N=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===N?a.ref:(a=function(ze){var wt=E.refs;wt===Qs&&(wt=E.refs={}),ze===null?delete wt[N]:wt[N]=ze},a._stringRef=N,a)}if(typeof i!="string")throw Error(H(284));if(!u._owner)throw Error(H(290,i))}return i}function Cs(i,a){throw i=Object.prototype.toString.call(a),Error(H(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function t1(i){var a=i._init;return a(i._payload)}function Ws(i){function a($t,At){if(i){var Kt=$t.deletions;Kt===null?($t.deletions=[At],$t.flags|=16):Kt.push(At)}}function u($t,At){if(!i)return null;for(;At!==null;)a($t,At),At=At.sibling;return null}function h($t,At){for($t=new Map;At!==null;)At.key!==null?$t.set(At.key,At):$t.set(At.index,At),At=At.sibling;return $t}function E($t,At){return $t=fa($t,At),$t.index=0,$t.sibling=null,$t}function N($t,At,Kt){return $t.index=Kt,i?(Kt=$t.alternate,Kt!==null?(Kt=Kt.index,Kt<At?($t.flags|=2,At):Kt):($t.flags|=2,At)):($t.flags|=1048576,At)}function ze($t){return i&&$t.alternate===null&&($t.flags|=2),$t}function wt($t,At,Kt,nr){return At===null||At.tag!==6?(At=fc(Kt,$t.mode,nr),At.return=$t,At):(At=E(At,Kt),At.return=$t,At)}function rn($t,At,Kt,nr){var Cr=Kt.type;return Cr===xe?ur($t,At,Kt.props.children,nr,Kt.key):At!==null&&(At.elementType===Cr||typeof Cr=="object"&&Cr!==null&&Cr.$$typeof===Ye&&t1(Cr)===At.type)?(nr=E(At,Kt.props),nr.ref=xo($t,At,Kt),nr.return=$t,nr):(nr=V1(Kt.type,Kt.key,Kt.props,null,$t.mode,nr),nr.ref=xo($t,At,Kt),nr.return=$t,nr)}function jn($t,At,Kt,nr){return At===null||At.tag!==4||At.stateNode.containerInfo!==Kt.containerInfo||At.stateNode.implementation!==Kt.implementation?(At=dc(Kt,$t.mode,nr),At.return=$t,At):(At=E(At,Kt.children||[]),At.return=$t,At)}function ur($t,At,Kt,nr,Cr){return At===null||At.tag!==7?(At=Ga(Kt,$t.mode,nr,Cr),At.return=$t,At):(At=E(At,Kt),At.return=$t,At)}function Jr($t,At,Kt){if(typeof At=="string"&&At!==""||typeof At=="number")return At=fc(""+At,$t.mode,Kt),At.return=$t,At;if(typeof At=="object"&&At!==null){switch(At.$$typeof){case ce:return Kt=V1(At.type,At.key,At.props,null,$t.mode,Kt),Kt.ref=xo($t,null,At),Kt.return=$t,Kt;case oe:return At=dc(At,$t.mode,Kt),At.return=$t,At;case Ye:var nr=At._init;return Jr($t,nr(At._payload),Kt)}if(_e(At)||Nt(At))return At=Ga(At,$t.mode,Kt,null),At.return=$t,At;Cs($t,At)}return null}function Rr($t,At,Kt,nr){var Cr=At!==null?At.key:null;if(typeof Kt=="string"&&Kt!==""||typeof Kt=="number")return Cr!==null?null:wt($t,At,""+Kt,nr);if(typeof Kt=="object"&&Kt!==null){switch(Kt.$$typeof){case ce:return Kt.key===Cr?rn($t,At,Kt,nr):null;case oe:return Kt.key===Cr?jn($t,At,Kt,nr):null;case Ye:return Cr=Kt._init,Rr($t,At,Cr(Kt._payload),nr)}if(_e(Kt)||Nt(Kt))return Cr!==null?null:ur($t,At,Kt,nr,null);Cs($t,Kt)}return null}function Fi($t,At,Kt,nr,Cr){if(typeof nr=="string"&&nr!==""||typeof nr=="number")return $t=$t.get(Kt)||null,wt(At,$t,""+nr,Cr);if(typeof nr=="object"&&nr!==null){switch(nr.$$typeof){case ce:return $t=$t.get(nr.key===null?Kt:nr.key)||null,rn(At,$t,nr,Cr);case oe:return $t=$t.get(nr.key===null?Kt:nr.key)||null,jn(At,$t,nr,Cr);case Ye:var si=nr._init;return Fi($t,At,Kt,si(nr._payload),Cr)}if(_e(nr)||Nt(nr))return $t=$t.get(Kt)||null,ur(At,$t,nr,Cr,null);Cs(At,nr)}return null}function _r($t,At,Kt,nr){for(var Cr=null,si=null,Qr=At,Ei=At=0,Mo=null;Qr!==null&&Ei<Kt.length;Ei++){Qr.index>Ei?(Mo=Qr,Qr=null):Mo=Qr.sibling;var Si=Rr($t,Qr,Kt[Ei],nr);if(Si===null){Qr===null&&(Qr=Mo);break}i&&Qr&&Si.alternate===null&&a($t,Qr),At=N(Si,At,Ei),si===null?Cr=Si:si.sibling=Si,si=Si,Qr=Mo}if(Ei===Kt.length)return u($t,Qr),Ai&&Cn($t,Ei),Cr;if(Qr===null){for(;Ei<Kt.length;Ei++)Qr=Jr($t,Kt[Ei],nr),Qr!==null&&(At=N(Qr,At,Ei),si===null?Cr=Qr:si.sibling=Qr,si=Qr);return Ai&&Cn($t,Ei),Cr}for(Qr=h($t,Qr);Ei<Kt.length;Ei++)Mo=Fi(Qr,$t,Ei,Kt[Ei],nr),Mo!==null&&(i&&Mo.alternate!==null&&Qr.delete(Mo.key===null?Ei:Mo.key),At=N(Mo,At,Ei),si===null?Cr=Mo:si.sibling=Mo,si=Mo);return i&&Qr.forEach(function(Aa){return a($t,Aa)}),Ai&&Cn($t,Ei),Cr}function Xo($t,At,Kt,nr){var Cr=Nt(Kt);if(typeof Cr!="function")throw Error(H(150));if(Kt=Cr.call(Kt),Kt==null)throw Error(H(151));for(var si=Cr=null,Qr=At,Ei=At=0,Mo=null,Si=Kt.next();Qr!==null&&!Si.done;Ei++,Si=Kt.next()){Qr.index>Ei?(Mo=Qr,Qr=null):Mo=Qr.sibling;var Aa=Rr($t,Qr,Si.value,nr);if(Aa===null){Qr===null&&(Qr=Mo);break}i&&Qr&&Aa.alternate===null&&a($t,Qr),At=N(Aa,At,Ei),si===null?Cr=Aa:si.sibling=Aa,si=Aa,Qr=Mo}if(Si.done)return u($t,Qr),Ai&&Cn($t,Ei),Cr;if(Qr===null){for(;!Si.done;Ei++,Si=Kt.next())Si=Jr($t,Si.value,nr),Si!==null&&(At=N(Si,At,Ei),si===null?Cr=Si:si.sibling=Si,si=Si);return Ai&&Cn($t,Ei),Cr}for(Qr=h($t,Qr);!Si.done;Ei++,Si=Kt.next())Si=Fi(Qr,$t,Ei,Si.value,nr),Si!==null&&(i&&Si.alternate!==null&&Qr.delete(Si.key===null?Ei:Si.key),At=N(Si,At,Ei),si===null?Cr=Si:si.sibling=Si,si=Si);return i&&Qr.forEach(function(Qu){return a($t,Qu)}),Ai&&Cn($t,Ei),Cr}function Ls($t,At,Kt,nr){if(typeof Kt=="object"&&Kt!==null&&Kt.type===xe&&Kt.key===null&&(Kt=Kt.props.children),typeof Kt=="object"&&Kt!==null){switch(Kt.$$typeof){case ce:e:{for(var Cr=Kt.key,si=At;si!==null;){if(si.key===Cr){if(Cr=Kt.type,Cr===xe){if(si.tag===7){u($t,si.sibling),At=E(si,Kt.props.children),At.return=$t,$t=At;break e}}else if(si.elementType===Cr||typeof Cr=="object"&&Cr!==null&&Cr.$$typeof===Ye&&t1(Cr)===si.type){u($t,si.sibling),At=E(si,Kt.props),At.ref=xo($t,si,Kt),At.return=$t,$t=At;break e}u($t,si);break}else a($t,si);si=si.sibling}Kt.type===xe?(At=Ga(Kt.props.children,$t.mode,nr,Kt.key),At.return=$t,$t=At):(nr=V1(Kt.type,Kt.key,Kt.props,null,$t.mode,nr),nr.ref=xo($t,At,Kt),nr.return=$t,$t=nr)}return ze($t);case oe:e:{for(si=Kt.key;At!==null;){if(At.key===si)if(At.tag===4&&At.stateNode.containerInfo===Kt.containerInfo&&At.stateNode.implementation===Kt.implementation){u($t,At.sibling),At=E(At,Kt.children||[]),At.return=$t,$t=At;break e}else{u($t,At);break}else a($t,At);At=At.sibling}At=dc(Kt,$t.mode,nr),At.return=$t,$t=At}return ze($t);case Ye:return si=Kt._init,Ls($t,At,si(Kt._payload),nr)}if(_e(Kt))return _r($t,At,Kt,nr);if(Nt(Kt))return Xo($t,At,Kt,nr);Cs($t,Kt)}return typeof Kt=="string"&&Kt!==""||typeof Kt=="number"?(Kt=""+Kt,At!==null&&At.tag===6?(u($t,At.sibling),At=E(At,Kt),At.return=$t,$t=At):(u($t,At),At=fc(Kt,$t.mode,nr),At.return=$t,$t=At),ze($t)):u($t,At)}return Ls}var Zs=Ws(!0),y1=Ws(!1),qr={},wr=Gn(qr),zi=Gn(qr),wo=Gn(qr);function Ji(i){if(i===qr)throw Error(H(174));return i}function Do(i,a){kn(wo,a),kn(zi,i),kn(wr,qr),i=de(a),Pn(wr),kn(wr,i)}function Ho(){Pn(wr),Pn(zi),Pn(wo)}function ta(i){var a=Ji(wo.current),u=Ji(wr.current);a=Y(u,i.type,a),u!==a&&(kn(zi,i),kn(wr,a))}function Ui(i){zi.current===i&&(Pn(wr),Pn(zi))}var Ee=Gn(0);function _s(i){for(var a=i;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Pr(u)||mi(u)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(a.flags&128)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var na=[];function No(){for(var i=0;i<na.length;i++){var a=na[i];Rt?a._workInProgressVersionPrimary=null:a._workInProgressVersionSecondary=null}na.length=0}var Yo=K.ReactCurrentDispatcher,$i=K.ReactCurrentBatchConfig,zo=0,Ri=null,ao=null,Qi=null,Ns=!1,ys=!1,zs=0,x1=0;function vo(){throw Error(H(321))}function n1(i,a){if(a===null)return!1;for(var u=0;u<a.length&&u<i.length;u++)if(!I(i[u],a[u]))return!1;return!0}function ra(i,a,u,h,E,N){if(zo=N,Ri=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Yo.current=i===null||i.memoizedState===null?Hc:Vu,i=u(h,E),ys){N=0;do{if(ys=!1,zs=0,25<=N)throw Error(H(301));N+=1,Qi=ao=null,a.updateQueue=null,Yo.current=Nc,i=u(h,E)}while(ys)}if(Yo.current=R1,a=ao!==null&&ao.next!==null,zo=0,Qi=ao=Ri=null,Ns=!1,a)throw Error(H(300));return i}function w1(){var i=zs!==0;return zs=0,i}function ia(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qi===null?Ri.memoizedState=Qi=i:Qi=Qi.next=i,Qi}function is(){if(ao===null){var i=Ri.alternate;i=i!==null?i.memoizedState:null}else i=ao.next;var a=Qi===null?Ri.memoizedState:Qi.next;if(a!==null)Qi=a,ao=i;else{if(i===null)throw Error(H(310));ao=i,i={memoizedState:ao.memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},Qi===null?Ri.memoizedState=Qi=i:Qi=Qi.next=i}return Qi}function oa(i,a){return typeof a=="function"?a(i):a}function ds(i){var a=is(),u=a.queue;if(u===null)throw Error(H(311));u.lastRenderedReducer=i;var h=ao,E=h.baseQueue,N=u.pending;if(N!==null){if(E!==null){var ze=E.next;E.next=N.next,N.next=ze}h.baseQueue=E=N,u.pending=null}if(E!==null){N=E.next,h=h.baseState;var wt=ze=null,rn=null,jn=N;do{var ur=jn.lane;if((zo&ur)===ur)rn!==null&&(rn=rn.next={lane:0,action:jn.action,hasEagerState:jn.hasEagerState,eagerState:jn.eagerState,next:null}),h=jn.hasEagerState?jn.eagerState:i(h,jn.action);else{var Jr={lane:ur,action:jn.action,hasEagerState:jn.hasEagerState,eagerState:jn.eagerState,next:null};rn===null?(wt=rn=Jr,ze=h):rn=rn.next=Jr,Ri.lanes|=ur,d1|=ur}jn=jn.next}while(jn!==null&&jn!==N);rn===null?ze=h:rn.next=wt,I(h,a.memoizedState)||(qn=!0),a.memoizedState=h,a.baseState=ze,a.baseQueue=rn,u.lastRenderedState=h}if(i=u.interleaved,i!==null){E=i;do N=E.lane,Ri.lanes|=N,d1|=N,E=E.next;while(E!==i)}else E===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function xs(i){var a=is(),u=a.queue;if(u===null)throw Error(H(311));u.lastRenderedReducer=i;var h=u.dispatch,E=u.pending,N=a.memoizedState;if(E!==null){u.pending=null;var ze=E=E.next;do N=i(N,ze.action),ze=ze.next;while(ze!==E);I(N,a.memoizedState)||(qn=!0),a.memoizedState=N,a.baseQueue===null&&(a.baseState=N),u.lastRenderedState=N}return[N,h]}function G1(){}function b1(i,a){var u=Ri,h=is(),E=a(),N=!I(h.memoizedState,E);if(N&&(h.memoizedState=E,qn=!0),h=h.queue,ws(M1.bind(null,u,h,i),[i]),h.getSnapshot!==a||N||Qi!==null&&Qi.memoizedState.tag&1){if(u.flags|=2048,Ur(9,X1.bind(null,u,h,E,a),void 0,null),Wi===null)throw Error(H(349));zo&30||sa(u,a,E)}return E}function sa(i,a,u){i.flags|=16384,i={getSnapshot:a,value:u},a=Ri.updateQueue,a===null?(a={lastEffect:null,stores:null},Ri.updateQueue=a,a.stores=[i]):(u=a.stores,u===null?a.stores=[i]:u.push(i))}function X1(i,a,u,h){a.value=u,a.getSnapshot=h,Y1(a)&&Ss(i,1,-1)}function M1(i,a,u){return u(function(){Y1(a)&&Ss(i,1,-1)})}function Y1(i){var a=i.getSnapshot;i=i.value;try{var u=a();return!I(i,u)}catch(h){return!0}}function Na(i){var a=ia();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:i},a.queue=i,i=i.dispatch=q1.bind(null,Ri,i),[a.memoizedState,i]}function Ur(i,a,u,h){return i={tag:i,create:a,destroy:u,deps:h,next:null},a=Ri.updateQueue,a===null?(a={lastEffect:null,stores:null},Ri.updateQueue=a,a.lastEffect=i.next=i):(u=a.lastEffect,u===null?a.lastEffect=i.next=i:(h=u.next,u.next=i,i.next=h,a.lastEffect=i)),i}function ya(){return is().memoizedState}function Ko(i,a,u,h){var E=ia();Ri.flags|=i,E.memoizedState=Ur(1|a,u,void 0,h===void 0?null:h)}function K1(i,a,u,h){var E=is();h=h===void 0?null:h;var N=void 0;if(ao!==null){var ze=ao.memoizedState;if(N=ze.destroy,h!==null&&n1(h,ze.deps)){E.memoizedState=Ur(a,u,N,h);return}}Ri.flags|=i,E.memoizedState=Ur(1|a,u,N,h)}function kl(i,a){return Ko(8390656,8,i,a)}function ws(i,a){return K1(2048,8,i,a)}function E1(i,a){return K1(4,2,i,a)}function os(i,a){return K1(4,4,i,a)}function $l(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function jl(i,a,u){return u=u!=null?u.concat([i]):null,K1(4,4,$l.bind(null,a,i),u)}function za(){}function S1(i,a){var u=is();a=a===void 0?null:a;var h=u.memoizedState;return h!==null&&a!==null&&n1(a,h[1])?h[0]:(u.memoizedState=[i,a],i)}function Pc(i,a){var u=is();a=a===void 0?null:a;var h=u.memoizedState;return h!==null&&a!==null&&n1(a,h[1])?h[0]:(i=i(),u.memoizedState=[i,a],i)}function Oc(i,a){var u=Br;Br=u!==0&&4>u?u:4,i(!0);var h=$i.transition;$i.transition={};try{i(!1),a()}finally{Br=u,$i.transition=h}}function Ba(){return is().memoizedState}function aa(i,a,u){var h=La(i);u={lane:h,action:u,hasEagerState:!1,eagerState:null,next:null},r1(i)?Ic(a,u):(Dc(i,a,u),u=Jo(),i=Ss(i,h,u),i!==null&&Wl(i,a,h))}function q1(i,a,u){var h=La(i),E={lane:h,action:u,hasEagerState:!1,eagerState:null,next:null};if(r1(i))Ic(a,E);else{Dc(i,a,E);var N=i.alternate;if(i.lanes===0&&(N===null||N.lanes===0)&&(N=a.lastRenderedReducer,N!==null))try{var ze=a.lastRenderedState,wt=N(ze,u);if(E.hasEagerState=!0,E.eagerState=wt,I(wt,ze))return}catch(rn){}finally{}u=Jo(),i=Ss(i,h,u),i!==null&&Wl(i,a,h)}}function r1(i){var a=i.alternate;return i===Ri||a!==null&&a===Ri}function Ic(i,a){ys=Ns=!0;var u=i.pending;u===null?a.next=a:(a.next=u.next,u.next=a),i.pending=a}function Dc(i,a,u){Wi!==null&&i.mode&1&&!(Vr&2)?(i=a.interleaved,i===null?(u.next=u,io===null?io=[a]:io.push(a)):(u.next=i.next,i.next=u),a.interleaved=u):(i=a.pending,i===null?u.next=u:(u.next=i.next,i.next=u),a.pending=u)}function Wl(i,a,u){if(u&4194240){var h=a.lanes;h&=i.pendingLanes,u|=h,a.lanes=u,es(i,u)}}var R1={readContext:di,useCallback:vo,useContext:vo,useEffect:vo,useImperativeHandle:vo,useInsertionEffect:vo,useLayoutEffect:vo,useMemo:vo,useReducer:vo,useRef:vo,useState:vo,useDebugValue:vo,useDeferredValue:vo,useTransition:vo,useMutableSource:vo,useSyncExternalStore:vo,useId:vo,unstable_isNewReconciler:!1},Hc={readContext:di,useCallback:function(i,a){return ia().memoizedState=[i,a===void 0?null:a],i},useContext:di,useEffect:kl,useImperativeHandle:function(i,a,u){return u=u!=null?u.concat([i]):null,Ko(4194308,4,$l.bind(null,a,i),u)},useLayoutEffect:function(i,a){return Ko(4194308,4,i,a)},useInsertionEffect:function(i,a){return Ko(4,2,i,a)},useMemo:function(i,a){var u=ia();return a=a===void 0?null:a,i=i(),u.memoizedState=[i,a],i},useReducer:function(i,a,u){var h=ia();return a=u!==void 0?u(a):a,h.memoizedState=h.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},h.queue=i,i=i.dispatch=aa.bind(null,Ri,i),[h.memoizedState,i]},useRef:function(i){var a=ia();return i={current:i},a.memoizedState=i},useState:Na,useDebugValue:za,useDeferredValue:function(i){var a=Na(i),u=a[0],h=a[1];return kl(function(){var E=$i.transition;$i.transition={};try{h(i)}finally{$i.transition=E}},[i]),u},useTransition:function(){var i=Na(!1),a=i[0];return i=Oc.bind(null,i[1]),ia().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,u){var h=Ri,E=ia();if(Ai){if(u===void 0)throw Error(H(407));u=u()}else{if(u=a(),Wi===null)throw Error(H(349));zo&30||sa(h,a,u)}E.memoizedState=u;var N={value:u,getSnapshot:a};return E.queue=N,kl(M1.bind(null,h,N,i),[i]),h.flags|=2048,Ur(9,X1.bind(null,h,N,u,a),void 0,null),u},useId:function(){var i=ia(),a=Wi.identifierPrefix;if(Ai){var u=gs,h=Tr;u=(h&~(1<<32-Or(h)-1)).toString(32)+u,a=":"+a+"R"+u,u=zs++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=x1++,a=":"+a+"r"+u.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},Vu={readContext:di,useCallback:S1,useContext:di,useEffect:ws,useImperativeHandle:jl,useInsertionEffect:E1,useLayoutEffect:os,useMemo:Pc,useReducer:ds,useRef:ya,useState:function(){return ds(oa)},useDebugValue:za,useDeferredValue:function(i){var a=ds(oa),u=a[0],h=a[1];return ws(function(){var E=$i.transition;$i.transition={};try{h(i)}finally{$i.transition=E}},[i]),u},useTransition:function(){var i=ds(oa)[0],a=is().memoizedState;return[i,a]},useMutableSource:G1,useSyncExternalStore:b1,useId:Ba,unstable_isNewReconciler:!1},Nc={readContext:di,useCallback:S1,useContext:di,useEffect:ws,useImperativeHandle:jl,useInsertionEffect:E1,useLayoutEffect:os,useMemo:Pc,useReducer:xs,useRef:ya,useState:function(){return xs(oa)},useDebugValue:za,useDeferredValue:function(i){var a=xs(oa),u=a[0],h=a[1];return ws(function(){var E=$i.transition;$i.transition={};try{h(i)}finally{$i.transition=E}},[i]),u},useTransition:function(){var i=xs(oa)[0],a=is().memoizedState;return[i,a]},useMutableSource:G1,useSyncExternalStore:b1,useId:Ba,unstable_isNewReconciler:!1};function _i(i,a){try{var u="",h=a;do u+=vr(h),h=h.return;while(h);var E=u}catch(N){E=`
Error generating stack: `+N.message+`
`+N.stack}return{value:i,source:a,stack:E}}function hs(i,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var la=typeof WeakMap=="function"?WeakMap:Map;function J1(i,a,u){u=oi(-1,u),u.tag=3,u.payload={element:null};var h=a.value;return u.callback=function(){hl||(hl=!0,ic=h),hs(i,a)},u}function Gs(i,a,u){u=oi(-1,u),u.tag=3;var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var E=a.value;u.payload=function(){return h(E)},u.callback=function(){hs(i,a)}}var N=i.stateNode;return N!==null&&typeof N.componentDidCatch=="function"&&(u.callback=function(){hs(i,a),typeof h!="function"&&(Sa===null?Sa=new Set([this]):Sa.add(this));var ze=a.stack;this.componentDidCatch(a.value,{componentStack:ze!==null?ze:""})}),u}function Ua(i,a,u){var h=i.pingCache;if(h===null){h=i.pingCache=new la;var E=new Set;h.set(a,E)}else E=h.get(a),E===void 0&&(E=new Set,h.set(a,E));E.has(u)||(E.add(u),i=Zu.bind(null,i,a,u),a.then(i,i))}function Va(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function Zl(i,a,u,h,E){return i.mode&1?(i.flags|=65536,i.lanes=E,i):(i===a?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=oi(-1,1),a.tag=2,fs(u,a))),u.lanes|=1),i)}function bs(i){i.flags|=4}function Q1(i,a){if(i!==null&&i.child===a.child)return!0;if(a.flags&16)return!1;for(i=a.child;i!==null;){if(i.flags&12854||i.subtreeFlags&12854)return!1;i=i.sibling}return!0}var Fa,xa,Bo,el;if(Lt)Fa=function(i,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)Ae(i,u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},xa=function(){},Bo=function(i,a,u,h,E){if(i=i.memoizedProps,i!==h){var N=a.stateNode,ze=Ji(wr.current);u=$e(N,u,i,h,E,ze),(a.updateQueue=u)&&bs(a)}},el=function(i,a,u,h){u!==h&&bs(a)};else if(pt){Fa=function(i,a,u,h){for(var E=a.child;E!==null;){if(E.tag===5){var N=E.stateNode;u&&h&&(N=tr(N,E.type,E.memoizedProps,E)),Ae(i,N)}else if(E.tag===6)N=E.stateNode,u&&h&&(N=lr(N,E.memoizedProps,E)),Ae(i,N);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)N=E.child,N!==null&&(N.return=E),Fa(i,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===a)break;for(;E.sibling===null;){if(E.return===null||E.return===a)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};var Uo=function(i,a,u,h){for(var E=a.child;E!==null;){if(E.tag===5){var N=E.stateNode;u&&h&&(N=tr(N,E.type,E.memoizedProps,E)),en(i,N)}else if(E.tag===6)N=E.stateNode,u&&h&&(N=lr(N,E.memoizedProps,E)),en(i,N);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)N=E.child,N!==null&&(N.return=E),Uo(i,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===a)break;for(;E.sibling===null;){if(E.return===null||E.return===a)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};xa=function(i,a){var u=a.stateNode;if(!Q1(i,a)){i=u.containerInfo;var h=It(i);Uo(h,a,!1,!1),u.pendingChildren=h,bs(a),bn(i,h)}},Bo=function(i,a,u,h,E){var N=i.stateNode,ze=i.memoizedProps;if((i=Q1(i,a))&&ze===h)a.stateNode=N;else{var wt=a.stateNode,rn=Ji(wr.current),jn=null;ze!==h&&(jn=$e(wt,u,ze,h,E,rn)),i&&jn===null?a.stateNode=N:(N=ct(N,jn,u,ze,h,a,i,wt),Te(N,u,h,E,rn)&&bs(a),a.stateNode=N,i?bs(a):Fa(N,a,!1,!1))}},el=function(i,a,u,h){u!==h?(i=Ji(wo.current),u=Ji(wr.current),a.stateNode=it(h,i,u,a),bs(a)):a.stateNode=i.stateNode}}else xa=function(){},Bo=function(){},el=function(){};function i1(i,a){if(!Ai)switch(i.tailMode){case"hidden":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function ji(i){var a=i.alternate!==null&&i.alternate.child===i.child,u=0,h=0;if(a)for(var E=i.child;E!==null;)u|=E.lanes|E.childLanes,h|=E.subtreeFlags&14680064,h|=E.flags&14680064,E.return=i,E=E.sibling;else for(E=i.child;E!==null;)u|=E.lanes|E.childLanes,h|=E.subtreeFlags,h|=E.flags,E.return=i,E=E.sibling;return i.subtreeFlags|=h,i.childLanes=u,a}function tl(i,a,u){var h=a.pendingProps;switch(ea(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ji(a),null;case 1:return Kr(a.type)&&bi(),ji(a),null;case 3:return h=a.stateNode,Ho(),Pn(Zn),Pn(cn),No(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(i===null||i.child===null)&&(Ha(a)?bs(a):i===null||i.memoizedState.isDehydrated&&!(a.flags&256)||(a.flags|=1024,no!==null&&(ac(no),no=null))),xa(i,a),ji(a),null;case 5:Ui(a),u=Ji(wo.current);var E=a.type;if(i!==null&&a.stateNode!=null)Bo(i,a,E,h,u),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!h){if(a.stateNode===null)throw Error(H(166));return ji(a),null}if(i=Ji(wr.current),Ha(a)){if(!Xe)throw Error(H(175));i=S(a.stateNode,a.type,a.memoizedProps,u,i,a,!Ca),a.updateQueue=i,i!==null&&bs(a)}else{var N=ee(E,h,u,i,a);Fa(N,a,!1,!1),a.stateNode=N,Te(N,E,h,u,i)&&bs(a)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return ji(a),null;case 6:if(i&&a.stateNode!=null)el(i,a,i.memoizedProps,h);else{if(typeof h!="string"&&a.stateNode===null)throw Error(H(166));if(i=Ji(wo.current),u=Ji(wr.current),Ha(a)){if(!Xe)throw Error(H(176));if(i=a.stateNode,h=a.memoizedProps,(u=z(i,h,a,!Ca))&&(E=Wo,E!==null))switch(N=(E.mode&1)!==0,E.tag){case 3:ut(E.stateNode.containerInfo,i,h,N);break;case 5:kt(E.type,E.memoizedProps,E.stateNode,i,h,N)}u&&bs(a)}else a.stateNode=it(h,i,u,a)}return ji(a),null;case 13:if(Pn(Ee),h=a.memoizedState,Ai&&so!==null&&a.mode&1&&!(a.flags&128)){for(i=so;i;)i=j(i);return _a(),a.flags|=98560,a}if(h!==null&&h.dehydrated!==null){if(h=Ha(a),i===null){if(!h)throw Error(H(318));if(!Xe)throw Error(H(344));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));ae(i,a)}else _a(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;return ji(a),null}return no!==null&&(ac(no),no=null),a.flags&128?(a.lanes=u,a):(h=h!==null,u=!1,i===null?Ha(a):u=i.memoizedState!==null,h&&!u&&(a.child.flags|=8192,a.mode&1&&(i===null||Ee.current&1?Xi===0&&(Xi=3):_l())),a.updateQueue!==null&&(a.flags|=4),ji(a),null);case 4:return Ho(),xa(i,a),i===null&&Ct(a.stateNode.containerInfo),ji(a),null;case 10:return Mi(a.type._context),ji(a),null;case 17:return Kr(a.type)&&bi(),ji(a),null;case 19:if(Pn(Ee),E=a.memoizedState,E===null)return ji(a),null;if(h=(a.flags&128)!==0,N=E.rendering,N===null)if(h)i1(E,!1);else{if(Xi!==0||i!==null&&i.flags&128)for(i=a.child;i!==null;){if(N=_s(i),N!==null){for(a.flags|=128,i1(E,!1),i=N.updateQueue,i!==null&&(a.updateQueue=i,a.flags|=4),a.subtreeFlags=0,i=u,h=a.child;h!==null;)u=h,E=i,u.flags&=14680066,N=u.alternate,N===null?(u.childLanes=0,u.lanes=E,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=N.childLanes,u.lanes=N.lanes,u.child=N.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=N.memoizedProps,u.memoizedState=N.memoizedState,u.updateQueue=N.updateQueue,u.type=N.type,E=N.dependencies,u.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext}),h=h.sibling;return kn(Ee,Ee.current&1|2),a.child}i=i.sibling}E.tail!==null&&Hi()>rc&&(a.flags|=128,h=!0,i1(E,!1),a.lanes=4194304)}else{if(!h)if(i=_s(N),i!==null){if(a.flags|=128,h=!0,i=i.updateQueue,i!==null&&(a.updateQueue=i,a.flags|=4),i1(E,!0),E.tail===null&&E.tailMode==="hidden"&&!N.alternate&&!Ai)return ji(a),null}else 2*Hi()-E.renderingStartTime>rc&&u!==1073741824&&(a.flags|=128,h=!0,i1(E,!1),a.lanes=4194304);E.isBackwards?(N.sibling=a.child,a.child=N):(i=E.last,i!==null?i.sibling=N:a.child=N,E.last=N)}return E.tail!==null?(a=E.tail,E.rendering=a,E.tail=a.sibling,E.renderingStartTime=Hi(),a.sibling=null,i=Ee.current,kn(Ee,h?i&1|2:i&1),a):(ji(a),null);case 22:case 23:return lc(),h=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==h&&(a.flags|=8192),h&&a.mode&1?ss&1073741824&&(ji(a),Lt&&a.subtreeFlags&6&&(a.flags|=8192)):ji(a),null;case 24:return null;case 25:return null}throw Error(H(156,a.tag))}var Gl=K.ReactCurrentOwner,qn=!1;function Pi(i,a,u,h){a.child=i===null?y1(a,null,u,h):Zs(a,i.child,u,h)}function ca(i,a,u,h,E){u=u.render;var N=a.ref;return gi(a,E),h=ra(i,a,u,h,N,E),u=w1(),i!==null&&!qn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~E,uo(i,a,E)):(Ai&&u&&$s(a),a.flags|=1,Pi(i,a,h,E),a.child)}function Xs(i,a,u,h,E){if(i===null){var N=u.type;return typeof N=="function"&&!uc(N)&&N.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=N,zc(i,a,N,h,E)):(i=V1(u.type,null,h,a,a.mode,E),i.ref=a.ref,i.return=a,a.child=i)}if(N=i.child,!(i.lanes&E)){var ze=N.memoizedProps;if(u=u.compare,u=u!==null?u:Yn,u(ze,h)&&i.ref===a.ref)return uo(i,a,E)}return a.flags|=1,i=fa(N,h),i.ref=a.ref,i.return=a,a.child=i}function zc(i,a,u,h,E){if(i!==null&&Yn(i.memoizedProps,h)&&i.ref===a.ref)if(qn=!1,(i.lanes&E)!==0)i.flags&131072&&(qn=!0);else return a.lanes=i.lanes,uo(i,a,E);return Xl(i,a,u,h,E)}function qo(i,a,u){var h=a.pendingProps,E=h.children,N=i!==null?i.memoizedState:null;if(h.mode==="hidden")if(!(a.mode&1))a.memoizedState={baseLanes:0,cachePool:null},kn(f1,ss),ss|=u;else if(u&1073741824)a.memoizedState={baseLanes:0,cachePool:null},h=N!==null?N.baseLanes:u,kn(f1,ss),ss|=h;else return i=N!==null?N.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null},a.updateQueue=null,kn(f1,ss),ss|=i,null;else N!==null?(h=N.baseLanes|u,a.memoizedState=null):h=u,kn(f1,ss),ss|=h;return Pi(i,a,E,u),a.child}function o1(i,a){var u=a.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function Xl(i,a,u,h,E){var N=Kr(u)?cr:cn.current;return N=Er(a,N),gi(a,E),u=ra(i,a,u,h,N,E),h=w1(),i!==null&&!qn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~E,uo(i,a,E)):(Ai&&h&&$s(a),a.flags|=1,Pi(i,a,u,E),a.child)}function lo(i,a,u,h,E){if(Kr(u)){var N=!0;Ci(a)}else N=!1;if(gi(a,E),a.stateNode===null)i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2),v1(a,u,h),Ja(a,u,h,E),h=!0;else if(i===null){var ze=a.stateNode,wt=a.memoizedProps;ze.props=wt;var rn=ze.context,jn=u.contextType;typeof jn=="object"&&jn!==null?jn=di(jn):(jn=Kr(u)?cr:cn.current,jn=Er(a,jn));var ur=u.getDerivedStateFromProps,Jr=typeof ur=="function"||typeof ze.getSnapshotBeforeUpdate=="function";Jr||typeof ze.UNSAFE_componentWillReceiveProps!="function"&&typeof ze.componentWillReceiveProps!="function"||(wt!==h||rn!==jn)&&C1(a,ze,h,jn),qi=!1;var Rr=a.memoizedState;ze.state=Rr,Hs(a,h,ze,E),rn=a.memoizedState,wt!==h||Rr!==rn||Zn.current||qi?(typeof ur=="function"&&(ga(a,u,ur,h),rn=a.memoizedState),(wt=qi||ts(a,u,wt,h,Rr,rn,jn))?(Jr||typeof ze.UNSAFE_componentWillMount!="function"&&typeof ze.componentWillMount!="function"||(typeof ze.componentWillMount=="function"&&ze.componentWillMount(),typeof ze.UNSAFE_componentWillMount=="function"&&ze.UNSAFE_componentWillMount()),typeof ze.componentDidMount=="function"&&(a.flags|=4194308)):(typeof ze.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=rn),ze.props=h,ze.state=rn,ze.context=jn,h=wt):(typeof ze.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{ze=a.stateNode,Oo(i,a),wt=a.memoizedProps,jn=a.type===a.elementType?wt:ir(a.type,wt),ze.props=jn,Jr=a.pendingProps,Rr=ze.context,rn=u.contextType,typeof rn=="object"&&rn!==null?rn=di(rn):(rn=Kr(u)?cr:cn.current,rn=Er(a,rn));var Fi=u.getDerivedStateFromProps;(ur=typeof Fi=="function"||typeof ze.getSnapshotBeforeUpdate=="function")||typeof ze.UNSAFE_componentWillReceiveProps!="function"&&typeof ze.componentWillReceiveProps!="function"||(wt!==Jr||Rr!==rn)&&C1(a,ze,h,rn),qi=!1,Rr=a.memoizedState,ze.state=Rr,Hs(a,h,ze,E);var _r=a.memoizedState;wt!==Jr||Rr!==_r||Zn.current||qi?(typeof Fi=="function"&&(ga(a,u,Fi,h),_r=a.memoizedState),(jn=qi||ts(a,u,jn,h,Rr,_r,rn)||!1)?(ur||typeof ze.UNSAFE_componentWillUpdate!="function"&&typeof ze.componentWillUpdate!="function"||(typeof ze.componentWillUpdate=="function"&&ze.componentWillUpdate(h,_r,rn),typeof ze.UNSAFE_componentWillUpdate=="function"&&ze.UNSAFE_componentWillUpdate(h,_r,rn)),typeof ze.componentDidUpdate=="function"&&(a.flags|=4),typeof ze.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof ze.componentDidUpdate!="function"||wt===i.memoizedProps&&Rr===i.memoizedState||(a.flags|=4),typeof ze.getSnapshotBeforeUpdate!="function"||wt===i.memoizedProps&&Rr===i.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=_r),ze.props=h,ze.state=_r,ze.context=rn,h=jn):(typeof ze.componentDidUpdate!="function"||wt===i.memoizedProps&&Rr===i.memoizedState||(a.flags|=4),typeof ze.getSnapshotBeforeUpdate!="function"||wt===i.memoizedProps&&Rr===i.memoizedState||(a.flags|=1024),h=!1)}return s1(i,a,u,h,N,E)}function s1(i,a,u,h,E,N){o1(i,a);var ze=(a.flags&128)!==0;if(!h&&!ze)return E&&Ii(a,u,!1),uo(i,a,N);h=a.stateNode,Gl.current=a;var wt=ze&&typeof u.getDerivedStateFromError!="function"?null:h.render();return a.flags|=1,i!==null&&ze?(a.child=Zs(a,i.child,null,N),a.child=Zs(a,null,wt,N)):Pi(i,a,wt,N),a.memoizedState=h.state,E&&Ii(a,u,!0),a.child}function Vi(i){var a=i.stateNode;a.pendingContext?li(i,a.pendingContext,a.pendingContext!==a.context):a.context&&li(i,a.context,!1),Do(i,a.containerInfo)}function Bc(i,a,u,h,E){return _a(),e1(E),a.flags|=256,Pi(i,a,u,h),a.child}var nl={dehydrated:null,treeContext:null,retryLane:0};function rl(i){return{baseLanes:i,cachePool:null}}function Uc(i,a,u){var h=a.pendingProps,E=Ee.current,N=!1,ze=(a.flags&128)!==0,wt;if((wt=ze)||(wt=i!==null&&i.memoizedState===null?!1:(E&2)!==0),wt?(N=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(E|=1),kn(Ee,E&1),i===null)return vs(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(a.mode&1?mi(i)?a.lanes=8:a.lanes=1073741824:a.lanes=1,null):(E=h.children,i=h.fallback,N?(h=a.mode,N=a.child,E={mode:"hidden",children:E},!(h&1)&&N!==null?(N.childLanes=0,N.pendingProps=E):N=xl(E,h,0,null),i=Ga(i,h,u,null),N.return=a,i.return=a,N.sibling=i,a.child=N,a.child.memoizedState=rl(u),a.memoizedState=nl,i):a1(a,E));if(E=i.memoizedState,E!==null){if(wt=E.dehydrated,wt!==null){if(ze)return a.flags&256?(a.flags&=-257,ol(i,a,u,Error(H(422)))):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(N=h.fallback,E=a.mode,h=xl({mode:"visible",children:h.children},E,0,null),N=Ga(N,E,u,null),N.flags|=2,h.return=a,N.return=a,h.sibling=N,a.child=h,a.mode&1&&Zs(a,i.child,null,u),a.child.memoizedState=rl(u),a.memoizedState=nl,N);if(!(a.mode&1))a=ol(i,a,u,null);else if(mi(wt))a=ol(i,a,u,Error(H(419)));else if(h=(u&i.childLanes)!==0,qn||h){if(h=Wi,h!==null){switch(u&-u){case 4:N=2;break;case 16:N=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:N=32;break;case 536870912:N=268435456;break;default:N=0}h=N&(h.suspendedLanes|u)?0:N,h!==0&&h!==E.retryLane&&(E.retryLane=h,Ss(i,h,-1))}_l(),a=ol(i,a,u,Error(H(421)))}else Pr(wt)?(a.flags|=128,a.child=i.child,a=Gu.bind(null,i),D(wt,a),a=null):(u=E.treeContext,Xe&&(so=w(wt),Wo=a,Ai=!0,no=null,Ca=!1,u!==null&&(oo[Io++]=Tr,oo[Io++]=gs,oo[Io++]=ki,Tr=u.id,gs=u.overflow,ki=a)),a=a1(a,a.pendingProps.children),a.flags|=4096);return a}return N?(h=il(i,a,h.children,h.fallback,u),N=a.child,E=i.child.memoizedState,N.memoizedState=E===null?rl(u):{baseLanes:E.baseLanes|u,cachePool:null},N.childLanes=i.childLanes&~u,a.memoizedState=nl,h):(u=Yl(i,a,h.children,u),a.memoizedState=null,u)}return N?(h=il(i,a,h.children,h.fallback,u),N=a.child,E=i.child.memoizedState,N.memoizedState=E===null?rl(u):{baseLanes:E.baseLanes|u,cachePool:null},N.childLanes=i.childLanes&~u,a.memoizedState=nl,h):(u=Yl(i,a,h.children,u),a.memoizedState=null,u)}function a1(i,a){return a=xl({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function Yl(i,a,u,h){var E=i.child;return i=E.sibling,u=fa(E,{mode:"visible",children:u}),!(a.mode&1)&&(u.lanes=h),u.return=a,u.sibling=null,i!==null&&(h=a.deletions,h===null?(a.deletions=[i],a.flags|=16):h.push(i)),a.child=u}function il(i,a,u,h,E){var N=a.mode;i=i.child;var ze=i.sibling,wt={mode:"hidden",children:u};return!(N&1)&&a.child!==i?(u=a.child,u.childLanes=0,u.pendingProps=wt,a.deletions=null):(u=fa(i,wt),u.subtreeFlags=i.subtreeFlags&14680064),ze!==null?h=fa(ze,h):(h=Ga(h,N,E,null),h.flags|=2),h.return=a,u.return=a,u.sibling=h,a.child=u,h}function ol(i,a,u,h){return h!==null&&e1(h),Zs(a,i.child,null,u),i=a1(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function dr(i,a,u){i.lanes|=a;var h=i.alternate;h!==null&&(h.lanes|=a),Ni(i.return,a,u)}function Kl(i,a,u,h,E){var N=i.memoizedState;N===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:E}:(N.isBackwards=a,N.rendering=null,N.renderingStartTime=0,N.last=h,N.tail=u,N.tailMode=E)}function Vc(i,a,u){var h=a.pendingProps,E=h.revealOrder,N=h.tail;if(Pi(i,a,h.children,u),h=Ee.current,h&2)h=h&1|2,a.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&dr(i,u,a);else if(i.tag===19)dr(i,u,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}if(kn(Ee,h),!(a.mode&1))a.memoizedState=null;else switch(E){case"forwards":for(u=a.child,E=null;u!==null;)i=u.alternate,i!==null&&_s(i)===null&&(E=u),u=u.sibling;u=E,u===null?(E=a.child,a.child=null):(E=u.sibling,u.sibling=null),Kl(a,!1,E,u,N);break;case"backwards":for(u=null,E=a.child,a.child=null;E!==null;){if(i=E.alternate,i!==null&&_s(i)===null){a.child=E;break}i=E.sibling,E.sibling=u,u=E,E=i}Kl(a,!0,u,null,N);break;case"together":Kl(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function uo(i,a,u){if(i!==null&&(a.dependencies=i.dependencies),d1|=a.lanes,!(u&a.childLanes))return null;if(i!==null&&a.child!==i.child)throw Error(H(153));if(a.child!==null){for(i=a.child,u=fa(i,i.pendingProps),a.child=u,u.return=a;i.sibling!==null;)i=i.sibling,u=u.sibling=fa(i,i.pendingProps),u.return=a;u.sibling=null}return a.child}function ql(i,a,u){switch(a.tag){case 3:Vi(a),_a();break;case 5:ta(a);break;case 1:Kr(a.type)&&Ci(a);break;case 4:Do(a,a.stateNode.containerInfo);break;case 10:hi(a,a.type._context,a.memoizedProps.value);break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(kn(Ee,Ee.current&1),a.flags|=128,null):u&a.child.childLanes?Uc(i,a,u):(kn(Ee,Ee.current&1),i=uo(i,a,u),i!==null?i.sibling:null);kn(Ee,Ee.current&1);break;case 19:if(h=(u&a.childLanes)!==0,i.flags&128){if(h)return Vc(i,a,u);a.flags|=128}var E=a.memoizedState;if(E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),kn(Ee,Ee.current),h)break;return null;case 22:case 23:return a.lanes=0,qo(i,a,u)}return uo(i,a,u)}function l1(i,a){switch(ea(a),a.tag){case 1:return Kr(a.type)&&bi(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Ho(),Pn(Zn),Pn(cn),No(),i=a.flags,i&65536&&!(i&128)?(a.flags=i&-65537|128,a):null;case 5:return Ui(a),null;case 13:if(Pn(Ee),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(H(340));_a()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return Pn(Ee),null;case 4:return Ho(),null;case 10:return Mi(a.type._context),null;case 22:case 23:return lc(),null;case 24:return null;default:return null}}var Zo=!1,Bs=!1,bo=typeof WeakSet=="function"?WeakSet:Set,xn=null;function L1(i,a){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(h){cs(i,a,h)}else u.current=null}function Ms(i,a,u){try{u()}catch(h){cs(i,a,h)}}var T1=!1;function Fc(i,a){for(te(i.containerInfo),xn=a;xn!==null;)if(i=xn,a=i.child,(i.subtreeFlags&1028)!==0&&a!==null)a.return=i,xn=a;else for(;xn!==null;){i=xn;try{var u=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(u!==null){var h=u.memoizedProps,E=u.memoizedState,N=i.stateNode,ze=N.getSnapshotBeforeUpdate(i.elementType===i.type?h:ir(i.type,h),E);N.__reactInternalSnapshotBeforeUpdate=ze}break;case 3:Lt&&Ie(i.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(wt){cs(i,i.return,wt)}if(a=i.sibling,a!==null){a.return=i.return,xn=a;break}xn=i.return}return u=T1,T1=!1,u}function Es(i,a,u){var h=a.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var E=h=h.next;do{if((E.tag&i)===i){var N=E.destroy;E.destroy=void 0,N!==void 0&&Ms(a,u,N)}E=E.next}while(E!==h)}}function Ys(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&i)===i){var h=u.create;u.destroy=h()}u=u.next}while(u!==a)}}function wa(i){var a=i.ref;if(a!==null){var u=i.stateNode;switch(i.tag){case 5:i=we(u);break;default:i=u}typeof a=="function"?a(i):a.current=i}}function sl(i,a,u){if(Tt&&typeof Tt.onCommitFiberUnmount=="function")try{Tt.onCommitFiberUnmount(Dt,a)}catch(ze){}switch(a.tag){case 0:case 11:case 14:case 15:if(i=a.updateQueue,i!==null&&(i=i.lastEffect,i!==null)){var h=i=i.next;do{var E=h,N=E.destroy;E=E.tag,N!==void 0&&(E&2||E&4)&&Ms(a,u,N),h=h.next}while(h!==i)}break;case 1:if(L1(a,u),i=a.stateNode,typeof i.componentWillUnmount=="function")try{i.props=a.memoizedProps,i.state=a.memoizedState,i.componentWillUnmount()}catch(ze){cs(a,u,ze)}break;case 5:L1(a,u);break;case 4:Lt?D1(i,a,u):pt&&pt&&(a=a.stateNode.containerInfo,u=It(a),Vn(a,u))}}function A1(i,a,u){for(var h=a;;)if(sl(i,h,u),h.child===null||Lt&&h.tag===4){if(h===a)break;for(;h.sibling===null;){if(h.return===null||h.return===a)return;h=h.return}h.sibling.return=h.return,h=h.sibling}else h.child.return=h,h=h.child}function P1(i){var a=i.alternate;a!==null&&(i.alternate=null,P1(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Xt(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function O1(i){return i.tag===5||i.tag===3||i.tag===4}function I1(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||O1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Jl(i){if(Lt){e:{for(var a=i.return;a!==null;){if(O1(a))break e;a=a.return}throw Error(H(160))}var u=a;switch(u.tag){case 5:a=u.stateNode,u.flags&32&&(Bt(a),u.flags&=-33),u=I1(i),ll(i,u,a);break;case 3:case 4:a=u.stateNode.containerInfo,u=I1(i),al(i,u,a);break;default:throw Error(H(161))}}}function al(i,a,u){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?Qe(u,i,a):Ft(u,i);else if(h!==4&&(i=i.child,i!==null))for(al(i,a,u),i=i.sibling;i!==null;)al(i,a,u),i=i.sibling}function ll(i,a,u){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?Me(u,i,a):et(u,i);else if(h!==4&&(i=i.child,i!==null))for(ll(i,a,u),i=i.sibling;i!==null;)ll(i,a,u),i=i.sibling}function D1(i,a,u){for(var h=a,E=!1,N,ze;;){if(!E){E=h.return;e:for(;;){if(E===null)throw Error(H(160));switch(N=E.stateNode,E.tag){case 5:ze=!1;break e;case 3:N=N.containerInfo,ze=!0;break e;case 4:N=N.containerInfo,ze=!0;break e}E=E.return}E=!0}if(h.tag===5||h.tag===6)A1(i,h,u),ze?at(N,h.stateNode):Ke(N,h.stateNode);else if(h.tag===18)ze?Fe(N,h.stateNode):W(N,h.stateNode);else if(h.tag===4){if(h.child!==null){N=h.stateNode.containerInfo,ze=!0,h.child.return=h,h=h.child;continue}}else if(sl(i,h,u),h.child!==null){h.child.return=h,h=h.child;continue}if(h===a)break;for(;h.sibling===null;){if(h.return===null||h.return===a)return;h=h.return,h.tag===4&&(E=!1)}h.sibling.return=h.return,h=h.sibling}}function c1(i,a){if(Lt){switch(a.tag){case 0:case 11:case 14:case 15:Es(3,a,a.return),Ys(3,a),Es(5,a,a.return);return;case 1:return;case 5:var u=a.stateNode;if(u!=null){var h=a.memoizedProps;i=i!==null?i.memoizedProps:h;var E=a.type,N=a.updateQueue;a.updateQueue=null,N!==null&&dn(u,N,E,i,h,a)}return;case 6:if(a.stateNode===null)throw Error(H(162));u=a.memoizedProps,qt(a.stateNode,i!==null?i.memoizedProps:u,u);return;case 3:Xe&&i!==null&&i.memoizedState.isDehydrated&&X(a.stateNode.containerInfo);return;case 12:return;case 13:fo(a);return;case 19:fo(a);return;case 17:return}throw Error(H(163))}switch(a.tag){case 0:case 11:case 14:case 15:Es(3,a,a.return),Ys(3,a),Es(5,a,a.return);return;case 12:return;case 13:fo(a);return;case 19:fo(a);return;case 3:Xe&&i!==null&&i.memoizedState.isDehydrated&&X(a.stateNode.containerInfo);break;case 22:case 23:return}e:if(pt){switch(a.tag){case 1:case 5:case 6:break e;case 3:case 4:a=a.stateNode,Vn(a.containerInfo,a.pendingChildren);break e}throw Error(H(163))}}function fo(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new bo),a.forEach(function(h){var E=Xu.bind(null,i,h);u.has(h)||(u.add(h),h.then(E,E))})}}function Fu(i,a){for(xn=a;xn!==null;){a=xn;var u=a.deletions;if(u!==null)for(var h=0;h<u.length;h++){var E=u[h];try{var N=i;Lt?D1(N,E,a):A1(N,E,a);var ze=E.alternate;ze!==null&&(ze.return=null),E.return=null}catch(Cr){cs(E,a,Cr)}}if(u=a.child,a.subtreeFlags&12854&&u!==null)u.return=a,xn=u;else for(;xn!==null;){a=xn;try{var wt=a.flags;if(wt&32&&Lt&&Bt(a.stateNode),wt&512){var rn=a.alternate;if(rn!==null){var jn=rn.ref;jn!==null&&(typeof jn=="function"?jn(null):jn.current=null)}}if(wt&8192)switch(a.tag){case 13:if(a.memoizedState!==null){var ur=a.alternate;(ur===null||ur.memoizedState===null)&&(nc=Hi())}break;case 22:var Jr=a.memoizedState!==null,Rr=a.alternate,Fi=Rr!==null&&Rr.memoizedState!==null;if(u=a,Lt){e:if(h=u,E=Jr,N=null,Lt)for(var _r=h;;){if(_r.tag===5){if(N===null){N=_r;var Xo=_r.stateNode;E?En(Xo):zt(_r.stateNode,_r.memoizedProps)}}else if(_r.tag===6){if(N===null){var Ls=_r.stateNode;E?ln(Ls):me(Ls,_r.memoizedProps)}}else if((_r.tag!==22&&_r.tag!==23||_r.memoizedState===null||_r===h)&&_r.child!==null){_r.child.return=_r,_r=_r.child;continue}if(_r===h)break;for(;_r.sibling===null;){if(_r.return===null||_r.return===h)break e;N===_r&&(N=null),_r=_r.return}N===_r&&(N=null),_r.sibling.return=_r.return,_r=_r.sibling}}if(Jr&&!Fi&&u.mode&1){xn=u;for(var $t=u.child;$t!==null;){for(u=xn=$t;xn!==null;){h=xn;var At=h.child;switch(h.tag){case 0:case 11:case 14:case 15:Es(4,h,h.return);break;case 1:L1(h,h.return);var Kt=h.stateNode;if(typeof Kt.componentWillUnmount=="function"){var nr=h.return;try{Kt.props=h.memoizedProps,Kt.state=h.memoizedState,Kt.componentWillUnmount()}catch(Cr){cs(h,nr,Cr)}}break;case 5:L1(h,h.return);break;case 22:if(h.memoizedState!==null){Go(u);continue}}At!==null?(At.return=h,xn=At):Go(u)}$t=$t.sibling}}}switch(wt&4102){case 2:Jl(a),a.flags&=-3;break;case 6:Jl(a),a.flags&=-3,c1(a.alternate,a);break;case 4096:a.flags&=-4097;break;case 4100:a.flags&=-4097,c1(a.alternate,a);break;case 4:c1(a.alternate,a)}}catch(Cr){cs(a,a.return,Cr)}if(u=a.sibling,u!==null){u.return=a.return,xn=u;break}xn=a.return}}}function cl(i,a,u){xn=i,ua(i,a,u)}function ua(i,a,u){for(var h=(i.mode&1)!==0;xn!==null;){var E=xn,N=E.child;if(E.tag===22&&h){var ze=E.memoizedState!==null||Zo;if(!ze){var wt=E.alternate,rn=wt!==null&&wt.memoizedState!==null||Bs;wt=Zo;var jn=Bs;if(Zo=ze,(Bs=rn)&&!jn)for(xn=E;xn!==null;)ze=xn,rn=ze.child,ze.tag===22&&ze.memoizedState!==null?kc(E):rn!==null?(rn.return=ze,xn=rn):kc(E);for(;N!==null;)xn=N,ua(N,a,u),N=N.sibling;xn=E,Zo=wt,Bs=jn}ka(i,a,u)}else E.subtreeFlags&8772&&N!==null?(N.return=E,xn=N):ka(i,a,u)}}function ka(i){for(;xn!==null;){var a=xn;if(a.flags&8772){var u=a.alternate;try{if(a.flags&8772)switch(a.tag){case 0:case 11:case 15:Bs||Ys(5,a);break;case 1:var h=a.stateNode;if(a.flags&4&&!Bs)if(u===null)h.componentDidMount();else{var E=a.elementType===a.type?u.memoizedProps:ir(a.type,u.memoizedProps);h.componentDidUpdate(E,u.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var N=a.updateQueue;N!==null&&Fs(a,N,h);break;case 3:var ze=a.updateQueue;if(ze!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=we(a.child.stateNode);break;case 1:u=a.child.stateNode}Fs(a,ze,u)}break;case 5:var wt=a.stateNode;u===null&&a.flags&4&&$n(wt,a.type,a.memoizedProps,a);break;case 6:break;case 4:break;case 12:break;case 13:if(Xe&&a.memoizedState===null){var rn=a.alternate;if(rn!==null){var jn=rn.memoizedState;if(jn!==null){var ur=jn.dehydrated;ur!==null&&P(ur)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(H(163))}Bs||a.flags&512&&wa(a)}catch(Jr){cs(a,a.return,Jr)}}if(a===i){xn=null;break}if(u=a.sibling,u!==null){u.return=a.return,xn=u;break}xn=a.return}}function Go(i){for(;xn!==null;){var a=xn;if(a===i){xn=null;break}var u=a.sibling;if(u!==null){u.return=a.return,xn=u;break}xn=a.return}}function kc(i){for(;xn!==null;){var a=xn;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{Ys(4,a)}catch(rn){cs(a,u,rn)}break;case 1:var h=a.stateNode;if(typeof h.componentDidMount=="function"){var E=a.return;try{h.componentDidMount()}catch(rn){cs(a,E,rn)}}var N=a.return;try{wa(a)}catch(rn){cs(a,N,rn)}break;case 5:var ze=a.return;try{wa(a)}catch(rn){cs(a,ze,rn)}}}catch(rn){cs(a,a.return,rn)}if(a===i){xn=null;break}var wt=a.sibling;if(wt!==null){wt.return=a.return,xn=wt;break}xn=a.return}}var H1=0,N1=1,ul=2,fl=3,ps=4;if(typeof Symbol=="function"&&Symbol.for){var ba=Symbol.for;H1=ba("selector.component"),N1=ba("selector.has_pseudo_class"),ul=ba("selector.role"),fl=ba("selector.test_id"),ps=ba("selector.text")}function Co(i){var a=Be(i);if(a!=null){if(typeof a.memoizedProps["data-testname"]!="string")throw Error(H(364));return a}if(i=un(i),i===null)throw Error(H(362));return i.stateNode.current}function Ma(i,a){switch(a.$$typeof){case H1:if(i.type===a.value)return!0;break;case N1:e:{a=a.value,i=[i,0];for(var u=0;u<i.length;){var h=i[u++],E=i[u++],N=a[E];if(h.tag!==5||!pe(h)){for(;N!=null&&Ma(h,N);)E++,N=a[E];if(E===a.length){a=!0;break e}else for(h=h.child;h!==null;)i.push(h,E),h=h.sibling}}a=!1}return a;case ul:if(i.tag===5&&Ce(i.stateNode,a.value))return!0;break;case ps:if((i.tag===5||i.tag===6)&&(i=yt(i),i!==null&&0<=i.indexOf(a.value)))return!0;break;case fl:if(i.tag===5&&(i=i.memoizedProps["data-testname"],typeof i=="string"&&i.toLowerCase()===a.value.toLowerCase()))return!0;break;default:throw Error(H(365))}return!1}function Ea(i){switch(i.$$typeof){case H1:return"<"+(Ve(i.value)||"Unknown")+">";case N1:return":has("+(Ea(i)||"")+")";case ul:return'[role="'+i.value+'"]';case ps:return'"'+i.value+'"';case fl:return'[data-testname="'+i.value+'"]';default:throw Error(H(365))}}function Ql(i,a){var u=[];i=[i,0];for(var h=0;h<i.length;){var E=i[h++],N=i[h++],ze=a[N];if(E.tag!==5||!pe(E)){for(;ze!=null&&Ma(E,ze);)N++,ze=a[N];if(N===a.length)u.push(E);else for(E=E.child;E!==null;)i.push(E,N),E=E.sibling}}return u}function $a(i,a){if(!an)throw Error(H(363));i=Co(i),i=Ql(i,a),a=[],i=Array.from(i);for(var u=0;u<i.length;){var h=i[u++];if(h.tag===5)pe(h)||a.push(h.stateNode);else for(h=h.child;h!==null;)i.push(h),h=h.sibling}return a}var $c=Math.ceil,u1=K.ReactCurrentDispatcher,ec=K.ReactCurrentOwner,co=K.ReactCurrentBatchConfig,Vr=0,Wi=null,eo=null,ho=0,ss=0,f1=Gn(0),Xi=0,z1=null,d1=0,dl=0,tc=0,B1=null,as=null,nc=0,rc=1/0;function h1(){rc=Hi()+500}var hl=!1,ic=null,Sa=null,pl=!1,Ra=null,ml=0,U1=0,oc=null,gl=-1,vl=0;function Jo(){return Vr&6?Hi():gl!==-1?gl:gl=Hi()}function La(i){return i.mode&1?Vr&2&&ho!==0?ho&-ho:yn.transition!==null?(vl===0&&(i=ci,ci<<=1,!(ci&4194240)&&(ci=64),vl=i),vl):(i=Br,i!==0?i:Wt()):1}function Ss(i,a,u){if(50<U1)throw U1=0,oc=null,Error(H(185));var h=Cl(i,a);return h===null?null:(to(h,a,u),(!(Vr&2)||h!==Wi)&&(h===Wi&&(!(Vr&2)&&(dl|=a),Xi===4&&Ta(h,ho)),ls(h,u),a===1&&Vr===0&&!(i.mode&1)&&(h1(),We&&Xn())),h)}function Cl(i,a){i.lanes|=a;var u=i.alternate;for(u!==null&&(u.lanes|=a),u=i,i=i.return;i!==null;)i.childLanes|=a,u=i.alternate,u!==null&&(u.childLanes|=a),u=i,i=i.return;return u.tag===3?u.stateNode:null}function ls(i,a){var u=i.callbackNode;ma(i,a);var h=mo(i,i===Wi?ho:0);if(h===0)u!==null&&Sr(u),i.callbackNode=null,i.callbackPriority=0;else if(a=h&-h,i.callbackPriority!==a){if(u!=null&&Sr(u),a===1)i.tag===0?In(Wc.bind(null,i)):Mn(Wc.bind(null,i)),Yt?wn(function(){Vr===0&&Xn()}):Po(U,Xn),u=null;else{switch(us(h)){case 1:u=U;break;case 4:u=Q;break;case 16:u=Pe;break;case 536870912:u=st;break;default:u=Pe}u=Qc(u,jc.bind(null,i))}i.callbackPriority=a,i.callbackNode=u}}function jc(i,a){if(gl=-1,vl=0,Vr&6)throw Error(H(327));var u=i.callbackNode;if(Za()&&i.callbackNode!==u)return null;var h=mo(i,i===Wi?ho:0);if(h===0)return null;if(h&30||h&i.expiredLanes||a)a=yl(i,h);else{a=h;var E=Vr;Vr|=2;var N=cc();(Wi!==i||ho!==a)&&(h1(),ja(i,a));do try{ju();break}catch(wt){Gc(i,wt)}while(1);Xr(),u1.current=N,Vr=E,eo!==null?a=0:(Wi=null,ho=0,a=Xi)}if(a!==0){if(a===2&&(E=Js(i),E!==0&&(h=E,a=sc(i,E))),a===1)throw u=z1,ja(i,0),Ta(i,h),ls(i,Hi()),u;if(a===6)Ta(i,h);else{if(E=i.current.alternate,!(h&30)&&!ku(E)&&(a=yl(i,h),a===2&&(N=Js(i),N!==0&&(h=N,a=sc(i,N))),a===1))throw u=z1,ja(i,0),Ta(i,h),ls(i,Hi()),u;switch(i.finishedWork=E,i.finishedLanes=h,a){case 0:case 1:throw Error(H(345));case 2:Wa(i,as);break;case 3:if(Ta(i,h),(h&130023424)===h&&(a=nc+500-Hi(),10<a)){if(mo(i,0)!==0)break;if(E=i.suspendedLanes,(E&h)!==h){Jo(),i.pingedLanes|=i.suspendedLanes&E;break}i.timeoutHandle=tt(Wa.bind(null,i,as),a);break}Wa(i,as);break;case 4:if(Ta(i,h),(h&4194240)===h)break;for(a=i.eventTimes,E=-1;0<h;){var ze=31-Or(h);N=1<<ze,ze=a[ze],ze>E&&(E=ze),h&=~N}if(h=E,h=Hi()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*$c(h/1960))-h,10<h){i.timeoutHandle=tt(Wa.bind(null,i,as),h);break}Wa(i,as);break;case 5:Wa(i,as);break;default:throw Error(H(329))}}}return ls(i,Hi()),i.callbackNode===u?jc.bind(null,i):null}function sc(i,a){var u=B1;return i.current.memoizedState.isDehydrated&&(ja(i,a).flags|=256),i=yl(i,a),i!==2&&(a=as,as=u,a!==null&&ac(a)),i}function ac(i){as===null?as=i:as.push.apply(as,i)}function ku(i){for(var a=i;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var h=0;h<u.length;h++){var E=u[h],N=E.getSnapshot;E=E.value;try{if(!I(N(),E))return!1}catch(ze){return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ta(i,a){for(a&=~tc,a&=~dl,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var u=31-Or(a),h=1<<u;i[u]=-1,a&=~h}}function Wc(i){if(Vr&6)throw Error(H(327));Za();var a=mo(i,0);if(!(a&1))return ls(i,Hi()),null;var u=yl(i,a);if(i.tag!==0&&u===2){var h=Js(i);h!==0&&(a=h,u=sc(i,h))}if(u===1)throw u=z1,ja(i,0),Ta(i,a),ls(i,Hi()),u;if(u===6)throw Error(H(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,Wa(i,as),ls(i,Hi()),null}function Zc(i){Ra!==null&&Ra.tag===0&&!(Vr&6)&&Za();var a=Vr;Vr|=1;var u=co.transition,h=Br;try{if(co.transition=null,Br=1,i)return i()}finally{Br=h,co.transition=u,Vr=a,!(Vr&6)&&Xn()}}function lc(){ss=f1.current,Pn(f1)}function ja(i,a){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==ot&&(i.timeoutHandle=ot,St(u)),eo!==null)for(u=eo.return;u!==null;){var h=u;switch(ea(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&bi();break;case 3:Ho(),Pn(Zn),Pn(cn),No();break;case 5:Ui(h);break;case 4:Ho();break;case 13:Pn(Ee);break;case 19:Pn(Ee);break;case 10:Mi(h.type._context);break;case 22:case 23:lc()}u=u.return}if(Wi=i,eo=i=fa(i.current,null),ho=ss=a,Xi=0,z1=null,tc=dl=d1=0,as=B1=null,io!==null){for(a=0;a<io.length;a++)if(u=io[a],h=u.interleaved,h!==null){u.interleaved=null;var E=h.next,N=u.pending;if(N!==null){var ze=N.next;N.next=E,h.next=ze}u.pending=h}io=null}return i}function Gc(i,a){do{var u=eo;try{if(Xr(),Yo.current=R1,Ns){for(var h=Ri.memoizedState;h!==null;){var E=h.queue;E!==null&&(E.pending=null),h=h.next}Ns=!1}if(zo=0,Qi=ao=Ri=null,ys=!1,zs=0,ec.current=null,u===null||u.return===null){Xi=1,z1=a,eo=null;break}e:{var N=i,ze=u.return,wt=u,rn=a;if(a=ho,wt.flags|=32768,rn!==null&&typeof rn=="object"&&typeof rn.then=="function"){var jn=rn,ur=wt,Jr=ur.tag;if(!(ur.mode&1)&&(Jr===0||Jr===11||Jr===15)){var Rr=ur.alternate;Rr?(ur.updateQueue=Rr.updateQueue,ur.memoizedState=Rr.memoizedState,ur.lanes=Rr.lanes):(ur.updateQueue=null,ur.memoizedState=null)}var Fi=Va(ze);if(Fi!==null){Fi.flags&=-257,Zl(Fi,ze,wt,N,a),Fi.mode&1&&Ua(N,jn,a),a=Fi,rn=jn;var _r=a.updateQueue;if(_r===null){var Xo=new Set;Xo.add(rn),a.updateQueue=Xo}else _r.add(rn);break e}else{if(!(a&1)){Ua(N,jn,a),_l();break e}rn=Error(H(426))}}else if(Ai&&wt.mode&1){var Ls=Va(ze);if(Ls!==null){!(Ls.flags&65536)&&(Ls.flags|=256),Zl(Ls,ze,wt,N,a),e1(rn);break e}}N=rn,Xi!==4&&(Xi=2),B1===null?B1=[N]:B1.push(N),rn=_i(rn,wt),wt=ze;do{switch(wt.tag){case 3:wt.flags|=65536,a&=-a,wt.lanes|=a;var $t=J1(wt,rn,a);qa(wt,$t);break e;case 1:N=rn;var At=wt.type,Kt=wt.stateNode;if(!(wt.flags&128)&&(typeof At.getDerivedStateFromError=="function"||Kt!==null&&typeof Kt.componentDidCatch=="function"&&(Sa===null||!Sa.has(Kt)))){wt.flags|=65536,a&=-a,wt.lanes|=a;var nr=Gs(wt,N,a);qa(wt,nr);break e}}wt=wt.return}while(wt!==null)}Yc(u)}catch(Cr){a=Cr,eo===u&&u!==null&&(eo=u=u.return);continue}break}while(1)}function cc(){var i=u1.current;return u1.current=R1,i===null?R1:i}function _l(){(Xi===0||Xi===3||Xi===2)&&(Xi=4),Wi===null||!(d1&268435455)&&!(dl&268435455)||Ta(Wi,ho)}function yl(i,a){var u=Vr;Vr|=2;var h=cc();Wi===i&&ho===a||ja(i,a);do try{$u();break}catch(E){Gc(i,E)}while(1);if(Xr(),Vr=u,u1.current=h,eo!==null)throw Error(H(261));return Wi=null,ho=0,Xi}function $u(){for(;eo!==null;)Xc(eo)}function ju(){for(;eo!==null&&!go();)Xc(eo)}function Xc(i){var a=Jc(i.alternate,i,ss);i.memoizedProps=i.pendingProps,a===null?Yc(i):eo=a,ec.current=null}function Yc(i){var a=i;do{var u=a.alternate;if(i=a.return,a.flags&32768){if(u=l1(u,a),u!==null){u.flags&=32767,eo=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Xi=6,eo=null;return}}else if(u=tl(u,a,ss),u!==null){eo=u;return}if(a=a.sibling,a!==null){eo=a;return}eo=a=i}while(a!==null);Xi===0&&(Xi=5)}function Wa(i,a){var u=Br,h=co.transition;try{co.transition=null,Br=1,Wu(i,a,u)}finally{co.transition=h,Br=u}return null}function Wu(i,a,u){do Za();while(Ra!==null);if(Vr&6)throw Error(H(327));var h=i.finishedWork,E=i.finishedLanes;if(h===null)return null;if(i.finishedWork=null,i.finishedLanes=0,h===i.current)throw Error(H(177));i.callbackNode=null,i.callbackPriority=0;var N=h.lanes|h.childLanes;if(Ao(i,N),i===Wi&&(eo=Wi=null,ho=0),!(h.subtreeFlags&2064)&&!(h.flags&2064)||pl||(pl=!0,Qc(Pe,function(){return Za(),null})),N=(h.flags&15990)!==0,h.subtreeFlags&15990||N){N=co.transition,co.transition=null;var ze=Br;Br=1;var wt=Vr;Vr|=4,ec.current=null,Fc(i,h),Fu(i,h,E),Oe(i.containerInfo),i.current=h,cl(h,i,E),jo(),Vr=wt,Br=ze,co.transition=N}else i.current=h;if(pl&&(pl=!1,Ra=i,ml=E),N=i.pendingLanes,N===0&&(Sa=null),G(h.stateNode,u),ls(i,Hi()),a!==null)for(u=i.onRecoverableError,h=0;h<a.length;h++)u(a[h]);if(hl)throw hl=!1,i=ic,ic=null,i;return ml&1&&i.tag!==0&&Za(),N=i.pendingLanes,N&1?i===oc?U1++:(U1=0,oc=i):U1=0,Xn(),null}function Za(){if(Ra!==null){var i=us(ml),a=co.transition,u=Br;try{if(co.transition=null,Br=16>i?16:i,Ra===null)var h=!1;else{if(i=Ra,Ra=null,ml=0,Vr&6)throw Error(H(331));var E=Vr;for(Vr|=4,xn=i.current;xn!==null;){var N=xn,ze=N.child;if(xn.flags&16){var wt=N.deletions;if(wt!==null){for(var rn=0;rn<wt.length;rn++){var jn=wt[rn];for(xn=jn;xn!==null;){var ur=xn;switch(ur.tag){case 0:case 11:case 15:Es(8,ur,N)}var Jr=ur.child;if(Jr!==null)Jr.return=ur,xn=Jr;else for(;xn!==null;){ur=xn;var Rr=ur.sibling,Fi=ur.return;if(P1(ur),ur===jn){xn=null;break}if(Rr!==null){Rr.return=Fi,xn=Rr;break}xn=Fi}}}var _r=N.alternate;if(_r!==null){var Xo=_r.child;if(Xo!==null){_r.child=null;do{var Ls=Xo.sibling;Xo.sibling=null,Xo=Ls}while(Xo!==null)}}xn=N}}if(N.subtreeFlags&2064&&ze!==null)ze.return=N,xn=ze;else e:for(;xn!==null;){if(N=xn,N.flags&2048)switch(N.tag){case 0:case 11:case 15:Es(9,N,N.return)}var $t=N.sibling;if($t!==null){$t.return=N.return,xn=$t;break e}xn=N.return}}var At=i.current;for(xn=At;xn!==null;){ze=xn;var Kt=ze.child;if(ze.subtreeFlags&2064&&Kt!==null)Kt.return=ze,xn=Kt;else e:for(ze=At;xn!==null;){if(wt=xn,wt.flags&2048)try{switch(wt.tag){case 0:case 11:case 15:Ys(9,wt)}}catch(Cr){cs(wt,wt.return,Cr)}if(wt===ze){xn=null;break e}var nr=wt.sibling;if(nr!==null){nr.return=wt.return,xn=nr;break e}xn=wt.return}}if(Vr=E,Xn(),Tt&&typeof Tt.onPostCommitFiberRoot=="function")try{Tt.onPostCommitFiberRoot(Dt,i)}catch(Cr){}h=!0}return h}finally{Br=u,co.transition=a}}return!1}function Kc(i,a,u){a=_i(u,a),a=J1(i,a,1),fs(i,a),a=Jo(),i=Cl(i,1),i!==null&&(to(i,1,a),ls(i,a))}function cs(i,a,u){if(i.tag===3)Kc(i,i,u);else for(;a!==null;){if(a.tag===3){Kc(a,i,u);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Sa===null||!Sa.has(h))){i=_i(u,i),i=Gs(a,i,1),fs(a,i),i=Jo(),a=Cl(a,1),a!==null&&(to(a,1,i),ls(a,i));break}}a=a.return}}function Zu(i,a,u){var h=i.pingCache;h!==null&&h.delete(a),a=Jo(),i.pingedLanes|=i.suspendedLanes&u,Wi===i&&(ho&u)===u&&(Xi===4||Xi===3&&(ho&130023424)===ho&&500>Hi()-nc?ja(i,0):tc|=u),ls(i,a)}function qc(i,a){a===0&&(i.mode&1?(a=$o,$o<<=1,!($o&130023424)&&($o=4194304)):a=1);var u=Jo();i=Cl(i,a),i!==null&&(to(i,a,u),ls(i,u))}function Gu(i){var a=i.memoizedState,u=0;a!==null&&(u=a.retryLane),qc(i,u)}function Xu(i,a){var u=0;switch(i.tag){case 13:var h=i.stateNode,E=i.memoizedState;E!==null&&(u=E.retryLane);break;case 19:h=i.stateNode;break;default:throw Error(H(314))}h!==null&&h.delete(a),qc(i,u)}var Jc;Jc=function(i,a,u){if(i!==null)if(i.memoizedProps!==a.pendingProps||Zn.current)qn=!0;else{if(!(i.lanes&u)&&!(a.flags&128))return qn=!1,ql(i,a,u);qn=!!(i.flags&131072)}else qn=!1,Ai&&a.flags&1048576&&Nr(a,va,a.index);switch(a.lanes=0,a.tag){case 2:var h=a.type;i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2),i=a.pendingProps;var E=Er(a,cn.current);gi(a,u),E=ra(null,a,h,i,E,u);var N=w1();return a.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Kr(h)?(N=!0,Ci(a)):N=!1,a.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,Ds(a),E.updater=Da,a.stateNode=E,E._reactInternals=a,Ja(a,h,i,u),a=s1(null,a,h,!0,N,u)):(a.tag=0,Ai&&N&&$s(a),Pi(null,a,E,u),a=a.child),a;case 16:h=a.elementType;e:{switch(i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2),i=a.pendingProps,E=h._init,h=E(h._payload),a.type=h,E=a.tag=Ku(h),i=ir(h,i),E){case 0:a=Xl(null,a,h,i,u);break e;case 1:a=lo(null,a,h,i,u);break e;case 11:a=ca(null,a,h,i,u);break e;case 14:a=Xs(null,a,h,ir(h.type,i),u);break e}throw Error(H(306,h,""))}return a;case 0:return h=a.type,E=a.pendingProps,E=a.elementType===h?E:ir(h,E),Xl(i,a,h,E,u);case 1:return h=a.type,E=a.pendingProps,E=a.elementType===h?E:ir(h,E),lo(i,a,h,E,u);case 3:e:{if(Vi(a),i===null)throw Error(H(387));h=a.pendingProps,N=a.memoizedState,E=N.element,Oo(i,a),Hs(a,h,null,u);var ze=a.memoizedState;if(h=ze.element,Xe&&N.isDehydrated)if(N={element:h,isDehydrated:!1,cache:ze.cache,transitions:ze.transitions},a.updateQueue.baseState=N,a.memoizedState=N,a.flags&256){E=Error(H(423)),a=Bc(i,a,h,u,E);break e}else if(h!==E){E=Error(H(424)),a=Bc(i,a,h,u,E);break e}else for(Xe&&(so=v(a.stateNode.containerInfo),Wo=a,Ai=!0,no=null,Ca=!1),u=y1(a,null,h,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(_a(),h===E){a=uo(i,a,u);break e}Pi(i,a,h,u)}a=a.child}return a;case 5:return ta(a),i===null&&vs(a),h=a.type,E=a.pendingProps,N=i!==null?i.memoizedProps:null,ze=E.children,Je(h,E)?ze=null:N!==null&&Je(h,N)&&(a.flags|=32),o1(i,a),Pi(i,a,ze,u),a.child;case 6:return i===null&&vs(a),null;case 13:return Uc(i,a,u);case 4:return Do(a,a.stateNode.containerInfo),h=a.pendingProps,i===null?a.child=Zs(a,null,h,u):Pi(i,a,h,u),a.child;case 11:return h=a.type,E=a.pendingProps,E=a.elementType===h?E:ir(h,E),ca(i,a,h,E,u);case 7:return Pi(i,a,a.pendingProps,u),a.child;case 8:return Pi(i,a,a.pendingProps.children,u),a.child;case 12:return Pi(i,a,a.pendingProps.children,u),a.child;case 10:e:{if(h=a.type._context,E=a.pendingProps,N=a.memoizedProps,ze=E.value,hi(a,h,ze),N!==null)if(I(N.value,ze)){if(N.children===E.children&&!Zn.current){a=uo(i,a,u);break e}}else for(N=a.child,N!==null&&(N.return=a);N!==null;){var wt=N.dependencies;if(wt!==null){ze=N.child;for(var rn=wt.firstContext;rn!==null;){if(rn.context===h){if(N.tag===1){rn=oi(-1,u&-u),rn.tag=2;var jn=N.updateQueue;if(jn!==null){jn=jn.shared;var ur=jn.pending;ur===null?rn.next=rn:(rn.next=ur.next,ur.next=rn),jn.pending=rn}}N.lanes|=u,rn=N.alternate,rn!==null&&(rn.lanes|=u),Ni(N.return,u,a),wt.lanes|=u;break}rn=rn.next}}else if(N.tag===10)ze=N.type===a.type?null:N.child;else if(N.tag===18){if(ze=N.return,ze===null)throw Error(H(341));ze.lanes|=u,wt=ze.alternate,wt!==null&&(wt.lanes|=u),Ni(ze,u,a),ze=N.sibling}else ze=N.child;if(ze!==null)ze.return=N;else for(ze=N;ze!==null;){if(ze===a){ze=null;break}if(N=ze.sibling,N!==null){N.return=ze.return,ze=N;break}ze=ze.return}N=ze}Pi(i,a,E.children,u),a=a.child}return a;case 9:return E=a.type,h=a.pendingProps.children,gi(a,u),E=di(E),h=h(E),a.flags|=1,Pi(i,a,h,u),a.child;case 14:return h=a.type,E=ir(h,a.pendingProps),E=ir(h.type,E),Xs(i,a,h,E,u);case 15:return zc(i,a,a.type,a.pendingProps,u);case 17:return h=a.type,E=a.pendingProps,E=a.elementType===h?E:ir(h,E),i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2),a.tag=1,Kr(h)?(i=!0,Ci(a)):i=!1,gi(a,u),v1(a,h,E),Ja(a,h,E,u),s1(null,a,h,!0,i,u);case 19:return Vc(i,a,u);case 22:return qo(i,a,u)}throw Error(H(156,a.tag))};function Qc(i,a){return Po(i,a)}function Yu(i,a,u,h){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rs(i,a,u,h){return new Yu(i,a,u,h)}function uc(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ku(i){if(typeof i=="function")return uc(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Qt)return 11;if(i===O)return 14}return 2}function fa(i,a){var u=i.alternate;return u===null?(u=Rs(i.tag,a,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=a,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,a=i.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function V1(i,a,u,h,E,N){var ze=2;if(h=i,typeof i=="function")uc(i)&&(ze=1);else if(typeof i=="string")ze=5;else e:switch(i){case xe:return Ga(u.children,E,N,a);case Se:ze=8,E|=8;break;case k:return i=Rs(12,u,a,E|2),i.elementType=k,i.lanes=N,i;case mt:return i=Rs(13,u,a,E),i.elementType=mt,i.lanes=N,i;case Pt:return i=Rs(19,u,a,E),i.elementType=Pt,i.lanes=N,i;case gt:return xl(u,E,N,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case rt:ze=10;break e;case lt:ze=9;break e;case Qt:ze=11;break e;case O:ze=14;break e;case Ye:ze=16,h=null;break e}throw Error(H(130,i==null?i:typeof i,""))}return a=Rs(ze,u,a,E),a.elementType=i,a.type=h,a.lanes=N,a}function Ga(i,a,u,h){return i=Rs(7,i,h,a),i.lanes=u,i}function xl(i,a,u,h){return i=Rs(22,i,h,a),i.elementType=gt,i.lanes=u,i.stateNode={},i}function fc(i,a,u){return i=Rs(6,i,null,a),i.lanes=u,i}function dc(i,a,u){return a=Rs(4,i.children!==null?i.children:[],i.key,a),a.lanes=u,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function eu(i,a,u,h,E){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ot,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Is(0),this.expirationTimes=Is(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Is(0),this.identifierPrefix=h,this.onRecoverableError=E,Xe&&(this.mutableSourceEagerHydrationData=null)}function hc(i,a,u,h,E,N,ze,wt,rn){return i=new eu(i,a,u,wt,rn),a===1?(a=1,N===!0&&(a|=8)):a=0,N=Rs(3,null,null,a),i.current=N,N.stateNode=i,N.memoizedState={element:h,isDehydrated:u,cache:null,transitions:null},Ds(N),i}function tu(i){if(!i)return Qn;i=i._reactInternals;e:{if(dt(i)!==i||i.tag!==1)throw Error(H(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Kr(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(H(171))}if(i.tag===1){var u=i.type;if(Kr(u))return fi(i,u,a)}return a}function nu(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(H(188)):(i=Object.keys(i).join(","),Error(H(268,i)));return i=ye(a),i===null?null:i.stateNode}function ru(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<a?u:a}}function pc(i,a){ru(i,a),(i=i.alternate)&&ru(i,a)}function qu(i){return i=ye(i),i===null?null:i.stateNode}function Ju(){return null}return g.attemptContinuousHydration=function(i){if(i.tag===13){var a=Jo();Ss(i,134217728,a),pc(i,134217728)}},g.attemptHydrationAtCurrentPriority=function(i){if(i.tag===13){var a=Jo(),u=La(i);Ss(i,u,a),pc(i,u)}},g.attemptSynchronousHydration=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var u=To(a.pendingLanes);u!==0&&(es(a,u|1),ls(a,Hi()),!(Vr&6)&&(h1(),Xn()))}break;case 13:var h=Jo();Zc(function(){return Ss(i,1,h)}),pc(i,1)}},g.batchedUpdates=function(i,a){var u=Vr;Vr|=1;try{return i(a)}finally{Vr=u,Vr===0&&(h1(),We&&Xn())}},g.createComponentSelector=function(i){return{$$typeof:H1,value:i}},g.createContainer=function(i,a,u,h,E,N,ze){return hc(i,a,!1,null,u,h,E,N,ze)},g.createHasPseudoClassSelector=function(i){return{$$typeof:N1,value:i}},g.createHydrationContainer=function(i,a,u,h,E,N,ze,wt,rn){return i=hc(u,h,!0,i,E,N,ze,wt,rn),i.context=tu(null),u=i.current,h=Jo(),E=La(u),N=oi(h,E),N.callback=a!=null?a:null,fs(u,N),i.current.lanes=E,to(i,E,h),ls(i,h),i},g.createPortal=function(i,a,u){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oe,key:h==null?null:""+h,children:i,containerInfo:a,implementation:u}},g.createRoleSelector=function(i){return{$$typeof:ul,value:i}},g.createTestNameSelector=function(i){return{$$typeof:fl,value:i}},g.createTextSelector=function(i){return{$$typeof:ps,value:i}},g.deferredUpdates=function(i){var a=Br,u=co.transition;try{return co.transition=null,Br=16,i()}finally{Br=a,co.transition=u}},g.discreteUpdates=function(i,a,u,h,E){var N=Br,ze=co.transition;try{return co.transition=null,Br=1,i(a,u,h,E)}finally{Br=N,co.transition=ze,Vr===0&&h1()}},g.findAllNodes=$a,g.findBoundingRects=function(i,a){if(!an)throw Error(H(363));a=$a(i,a),i=[];for(var u=0;u<a.length;u++)i.push(Tn(a[u]));for(a=i.length-1;0<a;a--){u=i[a];for(var h=u.x,E=h+u.width,N=u.y,ze=N+u.height,wt=a-1;0<=wt;wt--)if(a!==wt){var rn=i[wt],jn=rn.x,ur=jn+rn.width,Jr=rn.y,Rr=Jr+rn.height;if(h>=jn&&N>=Jr&&E<=ur&&ze<=Rr){i.splice(a,1);break}else if(h!==jn||u.width!==rn.width||Rr<N||Jr>ze){if(!(N!==Jr||u.height!==rn.height||ur<h||jn>E)){jn>h&&(rn.width+=jn-h,rn.x=h),ur<E&&(rn.width=E-jn),i.splice(a,1);break}}else{Jr>N&&(rn.height+=Jr-N,rn.y=N),Rr<ze&&(rn.height=ze-Jr),i.splice(a,1);break}}}return i},g.findHostInstance=nu,g.findHostInstanceWithNoPortals=function(i){return i=Z(i),i=i!==null?ve(i):null,i===null?null:i.stateNode},g.findHostInstanceWithWarning=function(i){return nu(i)},g.flushControlled=function(i){var a=Vr;Vr|=1;var u=co.transition,h=Br;try{co.transition=null,Br=1,i()}finally{Br=h,co.transition=u,Vr=a,Vr===0&&(h1(),Xn())}},g.flushPassiveEffects=Za,g.flushSync=Zc,g.focusWithin=function(i,a){if(!an)throw Error(H(363));for(i=Co(i),a=Ql(i,a),a=Array.from(a),i=0;i<a.length;){var u=a[i++];if(!pe(u)){if(u.tag===5&&Ne(u.stateNode))return!0;for(u=u.child;u!==null;)a.push(u),u=u.sibling}}return!1},g.getCurrentUpdatePriority=function(){return Br},g.getFindAllNodesFailureDescription=function(i,a){if(!an)throw Error(H(363));var u=0,h=[];i=[Co(i),0];for(var E=0;E<i.length;){var N=i[E++],ze=i[E++],wt=a[ze];if((N.tag!==5||!pe(N))&&(Ma(N,wt)&&(h.push(Ea(wt)),ze++,ze>u&&(u=ze)),ze<a.length))for(N=N.child;N!==null;)i.push(N,ze),N=N.sibling}if(u<a.length){for(i=[];u<a.length;u++)i.push(Ea(a[u]));return`findAllNodes was able to match part of the selector:
  `+(h.join(" > ")+`

No matching component was found for:
  `)+i.join(" > ")}return null},g.getPublicRootInstance=function(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return we(i.child.stateNode);default:return i.child.stateNode}},g.injectIntoDevTools=function(i){if(i={bundleType:i.bundleType,version:i.version,rendererPackageName:i.rendererPackageName,rendererConfig:i.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:qu,findFiberByHostInstance:i.findFiberByHostInstance||Ju,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")i=!1;else{var a=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(a.isDisabled||!a.supportsFiber)i=!0;else{try{Dt=a.inject(i),Tt=a}catch(u){}i=!!a.checkDCE}}return i},g.isAlreadyRendering=function(){return!1},g.observeVisibleRects=function(i,a,u,h){if(!an)throw Error(H(363));i=$a(i,a);var E=Ze(i,u,h).disconnect;return{disconnect:function(){E()}}},g.registerMutableSourceForHydration=function(i,a){var u=a._getVersion;u=u(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,u]:i.mutableSourceEagerHydrationData.push(a,u)},g.runWithPriority=function(i,a){var u=Br;try{return Br=i,a()}finally{Br=u}},g.shouldError=function(){return null},g.shouldSuspend=function(){return!1},g.updateContainer=function(i,a,u,h){var E=a.current,N=Jo(),ze=La(E);return u=tu(u),a.context===null?a.context=u:a.pendingContext=u,a=oi(N,ze),a.payload={element:i},h=h===void 0?null:h,h!==null&&(a.callback=h),fs(E,a),i=Ss(E,ze,N),i!==null&&Vs(i,E,ze),ze},g}},85259:function(tn,qe,J){"use strict";tn.exports=J(23406)},97427:function(tn,qe,J){"use strict";tn.exports=J(45658)},94440:function(tn,qe,J){"use strict";J.d(qe,{Z:function(){return C}});var L=J(50959),x=J(31110),g=J.n(x);function C(oe){let{debounce:xe,scroll:Se,polyfill:k,offsetSize:rt}=oe===void 0?{debounce:0,scroll:!1,offsetSize:!1}:oe;const lt=k||(typeof window=="undefined"?class{}:window.ResizeObserver);if(!lt)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[Qt,mt]=(0,L.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),Pt=(0,L.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:Qt}),O=xe?typeof xe=="number"?xe:xe.scroll:null,Ye=xe?typeof xe=="number"?xe:xe.resize:null,gt=(0,L.useRef)(!1);(0,L.useEffect)(()=>(gt.current=!0,()=>void(gt.current=!1)));const[Ot,Nt,Ve]=(0,L.useMemo)(()=>{const Z=()=>{if(!Pt.current.element)return;const{left:ye,top:ge,width:ve,height:_e,bottom:we,right:de,x:Y,y:te}=Pt.current.element.getBoundingClientRect(),Oe={left:ye,top:ge,width:ve,height:_e,bottom:we,right:de,x:Y,y:te};Pt.current.element instanceof HTMLElement&&rt&&(Oe.height=Pt.current.element.offsetHeight,Oe.width=Pt.current.element.offsetWidth),Object.freeze(Oe),gt.current&&!ce(Pt.current.lastBounds,Oe)&&mt(Pt.current.lastBounds=Oe)};return[Z,Ye?g()(Z,Ye):Z,O?g()(Z,O):Z]},[mt,rt,O,Ye]);function ke(){Pt.current.scrollContainers&&(Pt.current.scrollContainers.forEach(Z=>Z.removeEventListener("scroll",Ve,!0)),Pt.current.scrollContainers=null),Pt.current.resizeObserver&&(Pt.current.resizeObserver.disconnect(),Pt.current.resizeObserver=null)}function dt(){Pt.current.element&&(Pt.current.resizeObserver=new lt(Ve),Pt.current.resizeObserver.observe(Pt.current.element),Se&&Pt.current.scrollContainers&&Pt.current.scrollContainers.forEach(Z=>Z.addEventListener("scroll",Ve,{capture:!0,passive:!0})))}const Et=Z=>{!Z||Z===Pt.current.element||(ke(),Pt.current.element=Z,Pt.current.scrollContainers=H(Z),dt())};return $(Ve,Boolean(Se)),T(Nt),(0,L.useEffect)(()=>{ke(),dt()},[Se,Ve,Nt]),(0,L.useEffect)(()=>ke,[]),[Et,Qt,Ot]}function T(oe){(0,L.useEffect)(()=>{const xe=oe;return window.addEventListener("resize",xe),()=>void window.removeEventListener("resize",xe)},[oe])}function $(oe,xe){(0,L.useEffect)(()=>{if(xe){const Se=oe;return window.addEventListener("scroll",Se,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",Se,!0)}},[oe,xe])}function H(oe){const xe=[];if(!oe||oe===document.body)return xe;const{overflow:Se,overflowX:k,overflowY:rt}=window.getComputedStyle(oe);return[Se,k,rt].some(lt=>lt==="auto"||lt==="scroll")&&xe.push(oe),[...xe,...H(oe.parentElement)]}const K=["x","y","top","bottom","left","right","width","height"],ce=(oe,xe)=>K.every(Se=>oe[Se]===xe[Se])},70247:function(tn,qe){"use strict";function J(we,de){var Y=we.length;we.push(de);e:for(;0<Y;){var te=Y-1>>>1,Oe=we[te];if(0<g(Oe,de))we[te]=de,we[Y]=Oe,Y=te;else break e}}function L(we){return we.length===0?null:we[0]}function x(we){if(we.length===0)return null;var de=we[0],Y=we.pop();if(Y!==de){we[0]=Y;e:for(var te=0,Oe=we.length,ee=Oe>>>1;te<ee;){var Ae=2*(te+1)-1,Te=we[Ae],$e=Ae+1,Je=we[$e];if(0>g(Te,Y))$e<Oe&&0>g(Je,Te)?(we[te]=Je,we[$e]=Y,te=$e):(we[te]=Te,we[Ae]=Y,te=Ae);else if($e<Oe&&0>g(Je,Y))we[te]=Je,we[$e]=Y,te=$e;else break e}}return de}function g(we,de){var Y=we.sortIndex-de.sortIndex;return Y!==0?Y:we.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var C=performance;qe.unstable_now=function(){return C.now()}}else{var T=Date,$=T.now();qe.unstable_now=function(){return T.now()-$}}var H=[],K=[],ce=1,oe=null,xe=3,Se=!1,k=!1,rt=!1,lt=typeof setTimeout=="function"?setTimeout:null,Qt=typeof clearTimeout=="function"?clearTimeout:null,mt=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Pt(we){for(var de=L(K);de!==null;){if(de.callback===null)x(K);else if(de.startTime<=we)x(K),de.sortIndex=de.expirationTime,J(H,de);else break;de=L(K)}}function O(we){if(rt=!1,Pt(we),!k)if(L(H)!==null)k=!0,ve(Ye);else{var de=L(K);de!==null&&_e(O,de.startTime-we)}}function Ye(we,de){k=!1,rt&&(rt=!1,Qt(Nt),Nt=-1),Se=!0;var Y=xe;try{for(Pt(de),oe=L(H);oe!==null&&(!(oe.expirationTime>de)||we&&!dt());){var te=oe.callback;if(typeof te=="function"){oe.callback=null,xe=oe.priorityLevel;var Oe=te(oe.expirationTime<=de);de=qe.unstable_now(),typeof Oe=="function"?oe.callback=Oe:oe===L(H)&&x(H),Pt(de)}else x(H);oe=L(H)}if(oe!==null)var ee=!0;else{var Ae=L(K);Ae!==null&&_e(O,Ae.startTime-de),ee=!1}return ee}finally{oe=null,xe=Y,Se=!1}}var gt=!1,Ot=null,Nt=-1,Ve=5,ke=-1;function dt(){return!(qe.unstable_now()-ke<Ve)}function Et(){if(Ot!==null){var we=qe.unstable_now();ke=we;var de=!0;try{de=Ot(!0,we)}finally{de?Z():(gt=!1,Ot=null)}}else gt=!1}var Z;if(typeof mt=="function")Z=function(){mt(Et)};else if(typeof MessageChannel!="undefined"){var ye=new MessageChannel,ge=ye.port2;ye.port1.onmessage=Et,Z=function(){ge.postMessage(null)}}else Z=function(){lt(Et,0)};function ve(we){Ot=we,gt||(gt=!0,Z())}function _e(we,de){Nt=lt(function(){we(qe.unstable_now())},de)}qe.unstable_IdlePriority=5,qe.unstable_ImmediatePriority=1,qe.unstable_LowPriority=4,qe.unstable_NormalPriority=3,qe.unstable_Profiling=null,qe.unstable_UserBlockingPriority=2,qe.unstable_cancelCallback=function(we){we.callback=null},qe.unstable_continueExecution=function(){k||Se||(k=!0,ve(Ye))},qe.unstable_forceFrameRate=function(we){0>we||125<we?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ve=0<we?Math.floor(1e3/we):5},qe.unstable_getCurrentPriorityLevel=function(){return xe},qe.unstable_getFirstCallbackNode=function(){return L(H)},qe.unstable_next=function(we){switch(xe){case 1:case 2:case 3:var de=3;break;default:de=xe}var Y=xe;xe=de;try{return we()}finally{xe=Y}},qe.unstable_pauseExecution=function(){},qe.unstable_requestPaint=function(){},qe.unstable_runWithPriority=function(we,de){switch(we){case 1:case 2:case 3:case 4:case 5:break;default:we=3}var Y=xe;xe=we;try{return de()}finally{xe=Y}},qe.unstable_scheduleCallback=function(we,de,Y){var te=qe.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?te+Y:te):Y=te,we){case 1:var Oe=-1;break;case 2:Oe=250;break;case 5:Oe=1073741823;break;case 4:Oe=1e4;break;default:Oe=5e3}return Oe=Y+Oe,we={id:ce++,callback:de,priorityLevel:we,startTime:Y,expirationTime:Oe,sortIndex:-1},Y>te?(we.sortIndex=Y,J(K,we),L(H)===null&&we===L(K)&&(rt?(Qt(Nt),Nt=-1):rt=!0,_e(O,Y-te))):(we.sortIndex=Oe,J(H,we),k||Se||(k=!0,ve(Ye))),we},qe.unstable_shouldYield=dt,qe.unstable_wrapCallback=function(we){var de=xe;return function(){var Y=xe;xe=de;try{return we.apply(this,arguments)}finally{xe=Y}}}},65297:function(tn,qe,J){"use strict";tn.exports=J(70247)},67839:function(tn,qe,J){var L=J(49154),x=J(14614);function g(C,T,$){return x()?(tn.exports=g=Reflect.construct.bind(),tn.exports.__esModule=!0,tn.exports.default=tn.exports):(tn.exports=g=function(K,ce,oe){var xe=[null];xe.push.apply(xe,ce);var Se=Function.bind.apply(K,xe),k=new Se;return oe&&L(k,oe.prototype),k},tn.exports.__esModule=!0,tn.exports.default=tn.exports),g.apply(null,arguments)}tn.exports=g,tn.exports.__esModule=!0,tn.exports.default=tn.exports},14614:function(tn){function qe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}tn.exports=qe,tn.exports.__esModule=!0,tn.exports.default=tn.exports},49154:function(tn){function qe(J,L){return tn.exports=qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,C){return g.__proto__=C,g},tn.exports.__esModule=!0,tn.exports.default=tn.exports,qe(J,L)}tn.exports=qe,tn.exports.__esModule=!0,tn.exports.default=tn.exports},18846:function(tn,qe,J){"use strict";J.d(qe,{Uy:function(){return Ce}});function L(Me){for(var Qe=arguments.length,Ke=Array(Qe>1?Qe-1:0),at=1;at<Qe;at++)Ke[at-1]=arguments[at];if(!1)var Bt,En;throw Error("[Immer] minified error nr: "+Me+(Ke.length?" "+Ke.map(function(ln){return"'"+ln+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function x(Me){return!!Me&&!!Me[Be]}function g(Me){var Qe;return!!Me&&(function(Ke){if(!Ke||typeof Ke!="object")return!1;var at=Object.getPrototypeOf(Ke);if(at===null)return!0;var Bt=Object.hasOwnProperty.call(at,"constructor")&&at.constructor;return Bt===Object||typeof Bt=="function"&&Function.toString.call(Bt)===Xt}(Me)||Array.isArray(Me)||!!Me[Xe]||!!(!((Qe=Me.constructor)===null||Qe===void 0)&&Qe[Xe])||xe(Me)||Se(Me))}function C(Me){return x(Me)||L(23,Me),Me[Be].t}function T(Me,Qe,Ke){Ke===void 0&&(Ke=!1),$(Me)===0?(Ke?Object.keys:Yt)(Me).forEach(function(at){Ke&&typeof at=="symbol"||Qe(at,Me[at],Me)}):Me.forEach(function(at,Bt){return Qe(Bt,at,Me)})}function $(Me){var Qe=Me[Be];return Qe?Qe.i>3?Qe.i-4:Qe.i:Array.isArray(Me)?1:xe(Me)?2:Se(Me)?3:0}function H(Me,Qe){return $(Me)===2?Me.has(Qe):Object.prototype.hasOwnProperty.call(Me,Qe)}function K(Me,Qe){return $(Me)===2?Me.get(Qe):Me[Qe]}function ce(Me,Qe,Ke){var at=$(Me);at===2?Me.set(Qe,Ke):at===3?Me.add(Ke):Me[Qe]=Ke}function oe(Me,Qe){return Me===Qe?Me!==0||1/Me==1/Qe:Me!=Me&&Qe!=Qe}function xe(Me){return ot&&Me instanceof Map}function Se(Me){return Rt&&Me instanceof Set}function k(Me){return Me.o||Me.t}function rt(Me){if(Array.isArray(Me))return Array.prototype.slice.call(Me);var Qe=wn(Me);delete Qe[Be];for(var Ke=Yt(Qe),at=0;at<Ke.length;at++){var Bt=Ke[at],En=Qe[Bt];En.writable===!1&&(En.writable=!0,En.configurable=!0),(En.get||En.set)&&(Qe[Bt]={configurable:!0,writable:!0,enumerable:En.enumerable,value:Me[Bt]})}return Object.create(Object.getPrototypeOf(Me),Qe)}function lt(Me,Qe){return Qe===void 0&&(Qe=!1),mt(Me)||x(Me)||!g(Me)||($(Me)>1&&(Me.set=Me.add=Me.clear=Me.delete=Qt),Object.freeze(Me),Qe&&T(Me,function(Ke,at){return lt(at,!0)},!0)),Me}function Qt(){L(2)}function mt(Me){return Me==null||typeof Me!="object"||Object.isFrozen(Me)}function Pt(Me){var Qe=an[Me];return Qe||L(18,Me),Qe}function O(Me,Qe){an[Me]||(an[Me]=Qe)}function Ye(){return tt}function gt(Me,Qe){Qe&&(Pt("Patches"),Me.u=[],Me.s=[],Me.v=Qe)}function Ot(Me){Nt(Me),Me.p.forEach(ke),Me.p=null}function Nt(Me){Me===tt&&(tt=Me.l)}function Ve(Me){return tt={p:[],l:tt,h:Me,m:!0,_:0}}function ke(Me){var Qe=Me[Be];Qe.i===0||Qe.i===1?Qe.j():Qe.g=!0}function dt(Me,Qe){Qe._=Qe.p.length;var Ke=Qe.p[0],at=Me!==void 0&&Me!==Ke;return Qe.h.O||Pt("ES5").S(Qe,Me,at),at?(Ke[Be].P&&(Ot(Qe),L(4)),g(Me)&&(Me=Et(Qe,Me),Qe.l||ye(Qe,Me)),Qe.u&&Pt("Patches").M(Ke[Be].t,Me,Qe.u,Qe.s)):Me=Et(Qe,Ke,[]),Ot(Qe),Qe.u&&Qe.v(Qe.u,Qe.s),Me!==pt?Me:void 0}function Et(Me,Qe,Ke){if(mt(Qe))return Qe;var at=Qe[Be];if(!at)return T(Qe,function(zt,me){return Z(Me,at,Qe,zt,me,Ke)},!0),Qe;if(at.A!==Me)return Qe;if(!at.P)return ye(Me,at.t,!0),at.t;if(!at.I){at.I=!0,at.A._--;var Bt=at.i===4||at.i===5?at.o=rt(at.k):at.o,En=Bt,ln=!1;at.i===3&&(En=new Set(Bt),Bt.clear(),ln=!0),T(En,function(zt,me){return Z(Me,at,Bt,zt,me,Ke,ln)}),ye(Me,Bt,!1),Ke&&Me.u&&Pt("Patches").N(at,Ke,Me.u,Me.s)}return at.o}function Z(Me,Qe,Ke,at,Bt,En,ln){if(x(Bt)){var zt=Et(Me,Bt,En&&Qe&&Qe.i!==3&&!H(Qe.R,at)?En.concat(at):void 0);if(ce(Ke,at,zt),!x(zt))return;Me.m=!1}else ln&&Ke.add(Bt);if(g(Bt)&&!mt(Bt)){if(!Me.h.D&&Me._<1)return;Et(Me,Bt),Qe&&Qe.A.l||ye(Me,Bt)}}function ye(Me,Qe,Ke){Ke===void 0&&(Ke=!1),!Me.l&&Me.h.D&&Me.m&&lt(Qe,Ke)}function ge(Me,Qe){var Ke=Me[Be];return(Ke?k(Ke):Me)[Qe]}function ve(Me,Qe){if(Qe in Me)for(var Ke=Object.getPrototypeOf(Me);Ke;){var at=Object.getOwnPropertyDescriptor(Ke,Qe);if(at)return at;Ke=Object.getPrototypeOf(Ke)}}function _e(Me){Me.P||(Me.P=!0,Me.l&&_e(Me.l))}function we(Me){Me.o||(Me.o=rt(Me.t))}function de(Me,Qe,Ke){var at=xe(Qe)?Pt("MapSet").F(Qe,Ke):Se(Qe)?Pt("MapSet").T(Qe,Ke):Me.O?function(Bt,En){var ln=Array.isArray(Bt),zt={i:ln?1:0,A:En?En.A:Ye(),P:!1,I:!1,R:{},l:En,t:Bt,k:null,o:null,j:null,C:!1},me=zt,Ie=un;ln&&(me=[zt],Ie=Tn);var ct=Proxy.revocable(me,Ie),It=ct.revoke,en=ct.proxy;return zt.k=en,zt.j=It,en}(Qe,Ke):Pt("ES5").J(Qe,Ke);return(Ke?Ke.A:Ye()).p.push(at),at}function Y(Me){return x(Me)||L(22,Me),function Qe(Ke){if(!g(Ke))return Ke;var at,Bt=Ke[Be],En=$(Ke);if(Bt){if(!Bt.P&&(Bt.i<4||!Pt("ES5").K(Bt)))return Bt.t;Bt.I=!0,at=te(Ke,En),Bt.I=!1}else at=te(Ke,En);return T(at,function(ln,zt){Bt&&K(Bt.t,ln)===zt||ce(at,ln,Qe(zt))}),En===3?new Set(at):at}(Me)}function te(Me,Qe){switch(Qe){case 2:return new Map(Me);case 3:return Array.from(Me)}return rt(Me)}function Oe(){function Me(ln,zt){var me=En[ln];return me?me.enumerable=zt:En[ln]=me={configurable:!0,enumerable:zt,get:function(){var Ie=this[Be];return un.get(Ie,ln)},set:function(Ie){var ct=this[Be];un.set(ct,ln,Ie)}},me}function Qe(ln){for(var zt=ln.length-1;zt>=0;zt--){var me=ln[zt][Be];if(!me.P)switch(me.i){case 5:at(me)&&_e(me);break;case 4:Ke(me)&&_e(me)}}}function Ke(ln){for(var zt=ln.t,me=ln.k,Ie=Yt(me),ct=Ie.length-1;ct>=0;ct--){var It=Ie[ct];if(It!==Be){var en=zt[It];if(en===void 0&&!H(zt,It))return!0;var bn=me[It],Vn=bn&&bn[Be];if(Vn?Vn.t!==en:!oe(bn,en))return!0}}var tr=!!zt[Be];return Ie.length!==Yt(zt).length+(tr?0:1)}function at(ln){var zt=ln.k;if(zt.length!==ln.t.length)return!0;var me=Object.getOwnPropertyDescriptor(zt,zt.length-1);if(me&&!me.get)return!0;for(var Ie=0;Ie<zt.length;Ie++)if(!zt.hasOwnProperty(Ie))return!0;return!1}function Bt(ln){ln.g&&L(3,JSON.stringify(k(ln)))}var En={};O("ES5",{J:function(ln,zt){var me=Array.isArray(ln),Ie=function(It,en){if(It){for(var bn=Array(en.length),Vn=0;Vn<en.length;Vn++)Object.defineProperty(bn,""+Vn,Me(Vn,!0));return bn}var tr=wn(en);delete tr[Be];for(var lr=Yt(tr),Ar=0;Ar<lr.length;Ar++){var ti=lr[Ar];tr[ti]=Me(ti,It||!!tr[ti].enumerable)}return Object.create(Object.getPrototypeOf(en),tr)}(me,ln),ct={i:me?5:4,A:zt?zt.A:Ye(),P:!1,I:!1,R:{},l:zt,t:ln,k:Ie,o:null,g:!1,C:!1};return Object.defineProperty(Ie,Be,{value:ct,writable:!0}),Ie},S:function(ln,zt,me){me?x(zt)&&zt[Be].A===ln&&Qe(ln.p):(ln.u&&function Ie(ct){if(ct&&typeof ct=="object"){var It=ct[Be];if(It){var en=It.t,bn=It.k,Vn=It.R,tr=It.i;if(tr===4)T(bn,function(Pr){Pr!==Be&&(en[Pr]!==void 0||H(en,Pr)?Vn[Pr]||Ie(bn[Pr]):(Vn[Pr]=!0,_e(It)))}),T(en,function(Pr){bn[Pr]!==void 0||H(bn,Pr)||(Vn[Pr]=!1,_e(It))});else if(tr===5){if(at(It)&&(_e(It),Vn.length=!0),bn.length<en.length)for(var lr=bn.length;lr<en.length;lr++)Vn[lr]=!1;else for(var Ar=en.length;Ar<bn.length;Ar++)Vn[Ar]=!0;for(var ti=Math.min(bn.length,en.length),ai=0;ai<ti;ai++)bn.hasOwnProperty(ai)||(Vn[ai]=!0),Vn[ai]===void 0&&Ie(bn[ai])}}}}(ln.p[0]),Qe(ln.p))},K:function(ln){return ln.i===4?Ke(ln):at(ln)}})}function ee(){function Me(at){if(!g(at))return at;if(Array.isArray(at))return at.map(Me);if(xe(at))return new Map(Array.from(at.entries()).map(function(ln){return[ln[0],Me(ln[1])]}));if(Se(at))return new Set(Array.from(at).map(Me));var Bt=Object.create(Object.getPrototypeOf(at));for(var En in at)Bt[En]=Me(at[En]);return H(at,Xe)&&(Bt[Xe]=at[Xe]),Bt}function Qe(at){return x(at)?Me(at):at}var Ke="add";O("Patches",{$:function(at,Bt){return Bt.forEach(function(En){for(var ln=En.path,zt=En.op,me=at,Ie=0;Ie<ln.length-1;Ie++){var ct=$(me),It=ln[Ie];typeof It!="string"&&typeof It!="number"&&(It=""+It),ct!==0&&ct!==1||It!=="__proto__"&&It!=="constructor"||L(24),typeof me=="function"&&It==="prototype"&&L(24),typeof(me=K(me,It))!="object"&&L(15,ln.join("/"))}var en=$(me),bn=Me(En.value),Vn=ln[ln.length-1];switch(zt){case"replace":switch(en){case 2:return me.set(Vn,bn);case 3:L(16);default:return me[Vn]=bn}case Ke:switch(en){case 1:return Vn==="-"?me.push(bn):me.splice(Vn,0,bn);case 2:return me.set(Vn,bn);case 3:return me.add(bn);default:return me[Vn]=bn}case"remove":switch(en){case 1:return me.splice(Vn,1);case 2:return me.delete(Vn);case 3:return me.delete(En.value);default:return delete me[Vn]}default:L(17,zt)}}),at},N:function(at,Bt,En,ln){switch(at.i){case 0:case 4:case 2:return function(zt,me,Ie,ct){var It=zt.t,en=zt.o;T(zt.R,function(bn,Vn){var tr=K(It,bn),lr=K(en,bn),Ar=Vn?H(It,bn)?"replace":Ke:"remove";if(tr!==lr||Ar!=="replace"){var ti=me.concat(bn);Ie.push(Ar==="remove"?{op:Ar,path:ti}:{op:Ar,path:ti,value:lr}),ct.push(Ar===Ke?{op:"remove",path:ti}:Ar==="remove"?{op:Ke,path:ti,value:Qe(tr)}:{op:"replace",path:ti,value:Qe(tr)})}})}(at,Bt,En,ln);case 5:case 1:return function(zt,me,Ie,ct){var It=zt.t,en=zt.R,bn=zt.o;if(bn.length<It.length){var Vn=[bn,It];It=Vn[0],bn=Vn[1];var tr=[ct,Ie];Ie=tr[0],ct=tr[1]}for(var lr=0;lr<It.length;lr++)if(en[lr]&&bn[lr]!==It[lr]){var Ar=me.concat([lr]);Ie.push({op:"replace",path:Ar,value:Qe(bn[lr])}),ct.push({op:"replace",path:Ar,value:Qe(It[lr])})}for(var ti=It.length;ti<bn.length;ti++){var ai=me.concat([ti]);Ie.push({op:Ke,path:ai,value:Qe(bn[ti])})}It.length<bn.length&&ct.push({op:"replace",path:me.concat(["length"]),value:It.length})}(at,Bt,En,ln);case 3:return function(zt,me,Ie,ct){var It=zt.t,en=zt.o,bn=0;It.forEach(function(Vn){if(!en.has(Vn)){var tr=me.concat([bn]);Ie.push({op:"remove",path:tr,value:Vn}),ct.unshift({op:Ke,path:tr,value:Vn})}bn++}),bn=0,en.forEach(function(Vn){if(!It.has(Vn)){var tr=me.concat([bn]);Ie.push({op:Ke,path:tr,value:Vn}),ct.unshift({op:"remove",path:tr,value:Vn})}bn++})}(at,Bt,En,ln)}},M:function(at,Bt,En,ln){En.push({op:"replace",path:[],value:Bt===pt?void 0:Bt}),ln.push({op:"replace",path:[],value:at})}})}function Ae(){function Me(zt,me){function Ie(){this.constructor=zt}Bt(zt,me),zt.prototype=(Ie.prototype=me.prototype,new Ie)}function Qe(zt){zt.o||(zt.R=new Map,zt.o=new Map(zt.t))}function Ke(zt){zt.o||(zt.o=new Set,zt.t.forEach(function(me){if(g(me)){var Ie=de(zt.A.h,me,zt);zt.p.set(me,Ie),zt.o.add(Ie)}else zt.o.add(me)}))}function at(zt){zt.g&&L(3,JSON.stringify(k(zt)))}var Bt=function(zt,me){return(Bt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ie,ct){Ie.__proto__=ct}||function(Ie,ct){for(var It in ct)ct.hasOwnProperty(It)&&(Ie[It]=ct[It])})(zt,me)},En=function(){function zt(Ie,ct){return this[Be]={i:2,l:ct,A:ct?ct.A:Ye(),P:!1,I:!1,o:void 0,R:void 0,t:Ie,k:this,C:!1,g:!1},this}Me(zt,Map);var me=zt.prototype;return Object.defineProperty(me,"size",{get:function(){return k(this[Be]).size}}),me.has=function(Ie){return k(this[Be]).has(Ie)},me.set=function(Ie,ct){var It=this[Be];return at(It),k(It).has(Ie)&&k(It).get(Ie)===ct||(Qe(It),_e(It),It.R.set(Ie,!0),It.o.set(Ie,ct),It.R.set(Ie,!0)),this},me.delete=function(Ie){if(!this.has(Ie))return!1;var ct=this[Be];return at(ct),Qe(ct),_e(ct),ct.t.has(Ie)?ct.R.set(Ie,!1):ct.R.delete(Ie),ct.o.delete(Ie),!0},me.clear=function(){var Ie=this[Be];at(Ie),k(Ie).size&&(Qe(Ie),_e(Ie),Ie.R=new Map,T(Ie.t,function(ct){Ie.R.set(ct,!1)}),Ie.o.clear())},me.forEach=function(Ie,ct){var It=this;k(this[Be]).forEach(function(en,bn){Ie.call(ct,It.get(bn),bn,It)})},me.get=function(Ie){var ct=this[Be];at(ct);var It=k(ct).get(Ie);if(ct.I||!g(It)||It!==ct.t.get(Ie))return It;var en=de(ct.A.h,It,ct);return Qe(ct),ct.o.set(Ie,en),en},me.keys=function(){return k(this[Be]).keys()},me.values=function(){var Ie,ct=this,It=this.keys();return(Ie={})[Ct]=function(){return ct.values()},Ie.next=function(){var en=It.next();return en.done?en:{done:!1,value:ct.get(en.value)}},Ie},me.entries=function(){var Ie,ct=this,It=this.keys();return(Ie={})[Ct]=function(){return ct.entries()},Ie.next=function(){var en=It.next();if(en.done)return en;var bn=ct.get(en.value);return{done:!1,value:[en.value,bn]}},Ie},me[Ct]=function(){return this.entries()},zt}(),ln=function(){function zt(Ie,ct){return this[Be]={i:3,l:ct,A:ct?ct.A:Ye(),P:!1,I:!1,o:void 0,t:Ie,k:this,p:new Map,g:!1,C:!1},this}Me(zt,Set);var me=zt.prototype;return Object.defineProperty(me,"size",{get:function(){return k(this[Be]).size}}),me.has=function(Ie){var ct=this[Be];return at(ct),ct.o?!!ct.o.has(Ie)||!(!ct.p.has(Ie)||!ct.o.has(ct.p.get(Ie))):ct.t.has(Ie)},me.add=function(Ie){var ct=this[Be];return at(ct),this.has(Ie)||(Ke(ct),_e(ct),ct.o.add(Ie)),this},me.delete=function(Ie){if(!this.has(Ie))return!1;var ct=this[Be];return at(ct),Ke(ct),_e(ct),ct.o.delete(Ie)||!!ct.p.has(Ie)&&ct.o.delete(ct.p.get(Ie))},me.clear=function(){var Ie=this[Be];at(Ie),k(Ie).size&&(Ke(Ie),_e(Ie),Ie.o.clear())},me.values=function(){var Ie=this[Be];return at(Ie),Ke(Ie),Ie.o.values()},me.entries=function(){var Ie=this[Be];return at(Ie),Ke(Ie),Ie.o.entries()},me.keys=function(){return this.values()},me[Ct]=function(){return this.values()},me.forEach=function(Ie,ct){for(var It=this.values(),en=It.next();!en.done;)Ie.call(ct,en.value,en.value,this),en=It.next()},zt}();O("MapSet",{F:function(zt,me){return new En(zt,me)},T:function(zt,me){return new ln(zt,me)}})}function Te(){Oe(),Ae(),ee()}function $e(Me){return Me}function Je(Me){return Me}var it,tt,St=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",ot=typeof Map!="undefined",Rt=typeof Set!="undefined",Lt=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",pt=St?Symbol.for("immer-nothing"):((it={})["immer-nothing"]=!0,it),Xe=St?Symbol.for("immer-draftable"):"__$immer_draftable",Be=St?Symbol.for("immer-state"):"__$immer_state",Ct=typeof Symbol!="undefined"&&Symbol.iterator||"@@iterator",Wt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(Me){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+Me},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(Me){return"Cannot apply patch, path doesn't resolve: "+Me},16:'Sets cannot have "replace" patches.',17:function(Me){return"Unsupported patch operation: "+Me},18:function(Me){return"The plugin for '"+Me+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+Me+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(Me){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+Me+"'"},22:function(Me){return"'current' expects a draft, got: "+Me},23:function(Me){return"'original' expects a draft, got: "+Me},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},Xt=""+Object.prototype.constructor,Yt=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(Me){return Object.getOwnPropertyNames(Me).concat(Object.getOwnPropertySymbols(Me))}:Object.getOwnPropertyNames,wn=Object.getOwnPropertyDescriptors||function(Me){var Qe={};return Yt(Me).forEach(function(Ke){Qe[Ke]=Object.getOwnPropertyDescriptor(Me,Ke)}),Qe},an={},un={get:function(Me,Qe){if(Qe===Be)return Me;var Ke=k(Me);if(!H(Ke,Qe))return function(Bt,En,ln){var zt,me=ve(En,ln);return me?"value"in me?me.value:(zt=me.get)===null||zt===void 0?void 0:zt.call(Bt.k):void 0}(Me,Ke,Qe);var at=Ke[Qe];return Me.I||!g(at)?at:at===ge(Me.t,Qe)?(we(Me),Me.o[Qe]=de(Me.A.h,at,Me)):at},has:function(Me,Qe){return Qe in k(Me)},ownKeys:function(Me){return Reflect.ownKeys(k(Me))},set:function(Me,Qe,Ke){var at=ve(k(Me),Qe);if(at!=null&&at.set)return at.set.call(Me.k,Ke),!0;if(!Me.P){var Bt=ge(k(Me),Qe),En=Bt==null?void 0:Bt[Be];if(En&&En.t===Ke)return Me.o[Qe]=Ke,Me.R[Qe]=!1,!0;if(oe(Ke,Bt)&&(Ke!==void 0||H(Me.t,Qe)))return!0;we(Me),_e(Me)}return Me.o[Qe]===Ke&&(Ke!==void 0||Qe in Me.o)||Number.isNaN(Ke)&&Number.isNaN(Me.o[Qe])||(Me.o[Qe]=Ke,Me.R[Qe]=!0),!0},deleteProperty:function(Me,Qe){return ge(Me.t,Qe)!==void 0||Qe in Me.t?(Me.R[Qe]=!1,we(Me),_e(Me)):delete Me.R[Qe],Me.o&&delete Me.o[Qe],!0},getOwnPropertyDescriptor:function(Me,Qe){var Ke=k(Me),at=Reflect.getOwnPropertyDescriptor(Ke,Qe);return at&&{writable:!0,configurable:Me.i!==1||Qe!=="length",enumerable:at.enumerable,value:Ke[Qe]}},defineProperty:function(){L(11)},getPrototypeOf:function(Me){return Object.getPrototypeOf(Me.t)},setPrototypeOf:function(){L(12)}},Tn={};T(un,function(Me,Qe){Tn[Me]=function(){return arguments[0]=arguments[0][0],Qe.apply(this,arguments)}}),Tn.deleteProperty=function(Me,Qe){return Tn.set.call(this,Me,Qe,void 0)},Tn.set=function(Me,Qe,Ke){return un.set.call(this,Me[0],Qe,Ke,Me[0])};var yt=function(){function Me(Ke){var at=this;this.O=Lt,this.D=!0,this.produce=function(Bt,En,ln){if(typeof Bt=="function"&&typeof En!="function"){var zt=En;En=Bt;var me=at;return function(tr){var lr=this;tr===void 0&&(tr=zt);for(var Ar=arguments.length,ti=Array(Ar>1?Ar-1:0),ai=1;ai<Ar;ai++)ti[ai-1]=arguments[ai];return me.produce(tr,function(Pr){var mi;return(mi=En).call.apply(mi,[lr,Pr].concat(ti))})}}var Ie;if(typeof En!="function"&&L(6),ln!==void 0&&typeof ln!="function"&&L(7),g(Bt)){var ct=Ve(at),It=de(at,Bt,void 0),en=!0;try{Ie=En(It),en=!1}finally{en?Ot(ct):Nt(ct)}return typeof Promise!="undefined"&&Ie instanceof Promise?Ie.then(function(tr){return gt(ct,ln),dt(tr,ct)},function(tr){throw Ot(ct),tr}):(gt(ct,ln),dt(Ie,ct))}if(!Bt||typeof Bt!="object"){if((Ie=En(Bt))===void 0&&(Ie=Bt),Ie===pt&&(Ie=void 0),at.D&&lt(Ie,!0),ln){var bn=[],Vn=[];Pt("Patches").M(Bt,Ie,bn,Vn),ln(bn,Vn)}return Ie}L(21,Bt)},this.produceWithPatches=function(Bt,En){if(typeof Bt=="function")return function(Ie){for(var ct=arguments.length,It=Array(ct>1?ct-1:0),en=1;en<ct;en++)It[en-1]=arguments[en];return at.produceWithPatches(Ie,function(bn){return Bt.apply(void 0,[bn].concat(It))})};var ln,zt,me=at.produce(Bt,En,function(Ie,ct){ln=Ie,zt=ct});return typeof Promise!="undefined"&&me instanceof Promise?me.then(function(Ie){return[Ie,ln,zt]}):[me,ln,zt]},typeof(Ke==null?void 0:Ke.useProxies)=="boolean"&&this.setUseProxies(Ke.useProxies),typeof(Ke==null?void 0:Ke.autoFreeze)=="boolean"&&this.setAutoFreeze(Ke.autoFreeze)}var Qe=Me.prototype;return Qe.createDraft=function(Ke){g(Ke)||L(8),x(Ke)&&(Ke=Y(Ke));var at=Ve(this),Bt=de(this,Ke,void 0);return Bt[Be].C=!0,Nt(at),Bt},Qe.finishDraft=function(Ke,at){var Bt=Ke&&Ke[Be],En=Bt.A;return gt(En,at),dt(void 0,En)},Qe.setAutoFreeze=function(Ke){this.D=Ke},Qe.setUseProxies=function(Ke){Ke&&!Lt&&L(20),this.O=Ke},Qe.applyPatches=function(Ke,at){var Bt;for(Bt=at.length-1;Bt>=0;Bt--){var En=at[Bt];if(En.path.length===0&&En.op==="replace"){Ke=En.value;break}}Bt>-1&&(at=at.slice(Bt+1));var ln=Pt("Patches").$;return x(Ke)?ln(Ke,at):this.produce(Ke,function(zt){return ln(zt,at)})},Me}(),pe=new yt,Ce=pe.produce,Ne=pe.produceWithPatches.bind(pe),Ze=pe.setAutoFreeze.bind(pe),et=pe.setUseProxies.bind(pe),Ft=pe.applyPatches.bind(pe),qt=pe.createDraft.bind(pe),$n=pe.finishDraft.bind(pe),dn=null},51741:function(tn,qe,J){"use strict";J.d(qe,{Z:function(){return Qe}});function L(Ke,at,Bt,En){var ln=-1,zt=Ke==null?0:Ke.length;for(En&&zt&&(Bt=Ke[++ln]);++ln<zt;)Bt=at(Bt,Ke[ln],ln,Ke);return Bt}var x=L;function g(Ke){return function(at){return Ke==null?void 0:Ke[at]}}var C=g,T={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},$=C(T),H=$,K=J(45633),ce=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,oe="\\u0300-\\u036f",xe="\\ufe20-\\ufe2f",Se="\\u20d0-\\u20ff",k=oe+xe+Se,rt="["+k+"]",lt=RegExp(rt,"g");function Qt(Ke){return Ke=(0,K.Z)(Ke),Ke&&Ke.replace(ce,H).replace(lt,"")}var mt=Qt,Pt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function O(Ke){return Ke.match(Pt)||[]}var Ye=O,gt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Ot(Ke){return gt.test(Ke)}var Nt=Ot,Ve="\\ud800-\\udfff",ke="\\u0300-\\u036f",dt="\\ufe20-\\ufe2f",Et="\\u20d0-\\u20ff",Z=ke+dt+Et,ye="\\u2700-\\u27bf",ge="a-z\\xdf-\\xf6\\xf8-\\xff",ve="\\xac\\xb1\\xd7\\xf7",_e="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",we="\\u2000-\\u206f",de=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Y="A-Z\\xc0-\\xd6\\xd8-\\xde",te="\\ufe0e\\ufe0f",Oe=ve+_e+we+de,ee="['\u2019]",Ae="["+Oe+"]",Te="["+Z+"]",$e="\\d+",Je="["+ye+"]",it="["+ge+"]",tt="[^"+Ve+Oe+$e+ye+ge+Y+"]",St="\\ud83c[\\udffb-\\udfff]",ot="(?:"+Te+"|"+St+")",Rt="[^"+Ve+"]",Lt="(?:\\ud83c[\\udde6-\\uddff]){2}",pt="[\\ud800-\\udbff][\\udc00-\\udfff]",Xe="["+Y+"]",Be="\\u200d",Ct="(?:"+it+"|"+tt+")",Wt="(?:"+Xe+"|"+tt+")",Xt="(?:"+ee+"(?:d|ll|m|re|s|t|ve))?",Yt="(?:"+ee+"(?:D|LL|M|RE|S|T|VE))?",wn=ot+"?",an="["+te+"]?",un="(?:"+Be+"(?:"+[Rt,Lt,pt].join("|")+")"+an+wn+")*",Tn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",yt="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",pe=an+wn+un,Ce="(?:"+[Je,Lt,pt].join("|")+")"+pe,Ne=RegExp([Xe+"?"+it+"+"+Xt+"(?="+[Ae,Xe,"$"].join("|")+")",Wt+"+"+Yt+"(?="+[Ae,Xe+Ct,"$"].join("|")+")",Xe+"?"+Ct+"+"+Xt,Xe+"+"+Yt,yt,Tn,$e,Ce].join("|"),"g");function Ze(Ke){return Ke.match(Ne)||[]}var et=Ze;function Ft(Ke,at,Bt){return Ke=(0,K.Z)(Ke),at=Bt?void 0:at,at===void 0?Nt(Ke)?et(Ke):Ye(Ke):Ke.match(at)||[]}var qt=Ft,$n="['\u2019]",dn=RegExp($n,"g");function Me(Ke){return function(at){return x(qt(mt(at).replace(dn,"")),Ke,"")}}var Qe=Me},15861:function(tn,qe,J){"use strict";J.d(qe,{Z:function(){return Xe}});var L=J(45633);function x(Be,Ct,Wt){var Xt=-1,Yt=Be.length;Ct<0&&(Ct=-Ct>Yt?0:Yt+Ct),Wt=Wt>Yt?Yt:Wt,Wt<0&&(Wt+=Yt),Yt=Ct>Wt?0:Wt-Ct>>>0,Ct>>>=0;for(var wn=Array(Yt);++Xt<Yt;)wn[Xt]=Be[Xt+Ct];return wn}var g=x;function C(Be,Ct,Wt){var Xt=Be.length;return Wt=Wt===void 0?Xt:Wt,!Ct&&Wt>=Xt?Be:g(Be,Ct,Wt)}var T=C,$="\\ud800-\\udfff",H="\\u0300-\\u036f",K="\\ufe20-\\ufe2f",ce="\\u20d0-\\u20ff",oe=H+K+ce,xe="\\ufe0e\\ufe0f",Se="\\u200d",k=RegExp("["+Se+$+oe+xe+"]");function rt(Be){return k.test(Be)}var lt=rt;function Qt(Be){return Be.split("")}var mt=Qt,Pt="\\ud800-\\udfff",O="\\u0300-\\u036f",Ye="\\ufe20-\\ufe2f",gt="\\u20d0-\\u20ff",Ot=O+Ye+gt,Nt="\\ufe0e\\ufe0f",Ve="["+Pt+"]",ke="["+Ot+"]",dt="\\ud83c[\\udffb-\\udfff]",Et="(?:"+ke+"|"+dt+")",Z="[^"+Pt+"]",ye="(?:\\ud83c[\\udde6-\\uddff]){2}",ge="[\\ud800-\\udbff][\\udc00-\\udfff]",ve="\\u200d",_e=Et+"?",we="["+Nt+"]?",de="(?:"+ve+"(?:"+[Z,ye,ge].join("|")+")"+we+_e+")*",Y=we+_e+de,te="(?:"+[Z+ke+"?",ke,ye,ge,Ve].join("|")+")",Oe=RegExp(dt+"(?="+dt+")|"+te+Y,"g");function ee(Be){return Be.match(Oe)||[]}var Ae=ee;function Te(Be){return lt(Be)?Ae(Be):mt(Be)}var $e=Te;function Je(Be){return function(Ct){Ct=(0,L.Z)(Ct);var Wt=lt(Ct)?$e(Ct):void 0,Xt=Wt?Wt[0]:Ct.charAt(0),Yt=Wt?T(Wt,1).join(""):Ct.slice(1);return Xt[Be]()+Yt}}var it=Je,tt=it("toUpperCase"),St=tt;function ot(Be){return St((0,L.Z)(Be).toLowerCase())}var Rt=ot,Lt=J(51741),pt=(0,Lt.Z)(function(Be,Ct,Wt){return Ct=Ct.toLowerCase(),Be+(Wt?Rt(Ct):Ct)}),Xe=pt},23407:function(tn,qe,J){"use strict";var L=J(51741),x=(0,L.Z)(function(g,C,T){return g+(T?"-":"")+C.toLowerCase()});qe.Z=x},45633:function(tn,qe,J){"use strict";J.d(qe,{Z:function(){return Qt}});var L=J(66711);function x(mt,Pt){for(var O=-1,Ye=mt==null?0:mt.length,gt=Array(Ye);++O<Ye;)gt[O]=Pt(mt[O],O,mt);return gt}var g=x,C=J(56052),T=J(33918),$=J(13795),H="[object Symbol]";function K(mt){return typeof mt=="symbol"||(0,$.Z)(mt)&&(0,T.Z)(mt)==H}var ce=K,oe=1/0,xe=L.Z?L.Z.prototype:void 0,Se=xe?xe.toString:void 0;function k(mt){if(typeof mt=="string")return mt;if((0,C.Z)(mt))return g(mt,k)+"";if(ce(mt))return Se?Se.call(mt):"";var Pt=mt+"";return Pt=="0"&&1/mt==-oe?"-0":Pt}var rt=k;function lt(mt){return mt==null?"":rt(mt)}var Qt=lt},48119:function(tn,qe,J){"use strict";J.r(qe),J.d(qe,{ACESFilmicToneMapping:function(){return Wt},AddEquation:function(){return Ot},AddOperation:function(){return Lt},AdditiveAnimationBlendMode:function(){return mo},AdditiveBlending:function(){return Pt},AlphaFormat:function(){return tr},AlwaysDepth:function(){return Ae},AlwaysStencilFunc:function(){return Xn},AmbientLight:function(){return z9},AmbientLightProbe:function(){return v3},AnimationAction:function(){return J9},AnimationClip:function(){return Hu},AnimationLoader:function(){return i3},AnimationMixer:function(){return H3},AnimationObjectGroup:function(){return I3},AnimationUtils:function(){return e3},ArcCurve:function(){return e9},ArrayCamera:function(){return E2},ArrowHelper:function(){return rp},Audio:function(){return Y9},AudioAnalyser:function(){return b3},AudioContext:function(){return Yf},AudioListener:function(){return y3},AudioLoader:function(){return m3},AxesHelper:function(){return ip},BackSide:function(){return k},BasicDepthPacking:function(){return Ao},BasicShadowMap:function(){return K},Bone:function(){return xf},BooleanKeyframeTrack:function(){return Al},Box2:function(){return $3},Box3:function(){return No},Box3Helper:function(){return tp},BoxBufferGeometry:function(){return sp},BoxGeometry:function(){return ua},BoxHelper:function(){return ep},BufferAttribute:function(){return Vi},BufferGeometry:function(){return xn},BufferGeometryLoader:function(){return F9},ByteType:function(){return En},Cache:function(){return Ol},Camera:function(){return ba},CameraHelper:function(){return Q3},CanvasTexture:function(){return M5},CapsuleBufferGeometry:function(){return ap},CapsuleGeometry:function(){return vu},CatmullRomCurve3:function(){return t9},CineonToneMapping:function(){return Ct},CircleBufferGeometry:function(){return lp},CircleGeometry:function(){return Cu},ClampToEdgeWrapping:function(){return Ce},Clock:function(){return Z9},Color:function(){return qn},ColorKeyframeTrack:function(){return $f},ColorManagement:function(){return xo},CompressedArrayTexture:function(){return b5},CompressedTexture:function(){return Ef},CompressedTextureLoader:function(){return o3},ConeBufferGeometry:function(){return cp},ConeGeometry:function(){return _u},CubeCamera:function(){return Ql},CubeReflectionMapping:function(){return wn},CubeRefractionMapping:function(){return an},CubeTexture:function(){return $a},CubeTextureLoader:function(){return s3},CubeUVReflectionMapping:function(){return yt},CubicBezierCurve:function(){return Af},CubicBezierCurve3:function(){return r9},CubicInterpolant:function(){return S9},CullFaceBack:function(){return T},CullFaceFront:function(){return $},CullFaceFrontBack:function(){return H},CullFaceNone:function(){return C},Curve:function(){return Pa},CurvePath:function(){return o9},CustomBlending:function(){return gt},CustomToneMapping:function(){return Xt},CylinderBufferGeometry:function(){return up},CylinderGeometry:function(){return Sl},Cylindrical:function(){return k3},Data3DTexture:function(){return Do},DataArrayTexture:function(){return wo},DataTexture:function(){return bc},DataTextureLoader:function(){return a3},DataUtils:function(){return Xl},DecrementStencilOp:function(){return st},DecrementWrapStencilOp:function(){return Tt},DefaultLoadingManager:function(){return T9},DepthFormat:function(){return ai},DepthStencilFormat:function(){return Pr},DepthTexture:function(){return S2},DirectionalLight:function(){return N9},DirectionalLightHelper:function(){return J3},DiscreteInterpolant:function(){return R9},DisplayP3ColorSpace:function(){return jo},DodecahedronBufferGeometry:function(){return fp},DodecahedronGeometry:function(){return yu},DoubleSide:function(){return rt},DstAlphaFactor:function(){return we},DstColorFactor:function(){return Y},DynamicCopyUsage:function(){return ii},DynamicDrawUsage:function(){return Yn},DynamicReadUsage:function(){return yr},EdgesGeometry:function(){return s9},EllipseCurve:function(){return C0},EqualDepth:function(){return Je},EqualStencilFunc:function(){return ie},EquirectangularReflectionMapping:function(){return un},EquirectangularRefractionMapping:function(){return Tn},Euler:function(){return za},EventDispatcher:function(){return gi},ExtrudeBufferGeometry:function(){return dp},ExtrudeGeometry:function(){return Mu},FileLoader:function(){return g1},Float16BufferAttribute:function(){return ol},Float32BufferAttribute:function(){return dr},Float64BufferAttribute:function(){return Kl},FloatType:function(){return ct},Fog:function(){return a0},FogExp2:function(){return s0},FramebufferTexture:function(){return w5},FrontSide:function(){return Se},Frustum:function(){return ho},GLBufferAttribute:function(){return U3},GLSL1:function(){return hi},GLSL3:function(){return Mi},GreaterDepth:function(){return tt},GreaterEqualDepth:function(){return it},GreaterEqualStencilFunc:function(){return In},GreaterStencilFunc:function(){return xt},GridHelper:function(){return K3},Group:function(){return vc},HalfFloatType:function(){return It},HemisphereLight:function(){return A9},HemisphereLightHelper:function(){return Y3},HemisphereLightProbe:function(){return g3},IcosahedronBufferGeometry:function(){return hp},IcosahedronGeometry:function(){return Eu},ImageBitmapLoader:function(){return p3},ImageLoader:function(){return Nu},ImageUtils:function(){return t1},IncrementStencilOp:function(){return Pe},IncrementWrapStencilOp:function(){return Dt},InstancedBufferAttribute:function(){return Mc},InstancedBufferGeometry:function(){return V9},InstancedInterleavedBuffer:function(){return B3},InstancedMesh:function(){return j2},Int16BufferAttribute:function(){return Uc},Int32BufferAttribute:function(){return Yl},Int8BufferAttribute:function(){return Bc},IntType:function(){return me},InterleavedBuffer:function(){return l0},InterleavedBufferAttribute:function(){return El},Interpolant:function(){return Ou},InterpolateDiscrete:function(){return Or},InterpolateLinear:function(){return Gr},InterpolateSmooth:function(){return Di},InvertStencilOp:function(){return G},KeepStencilOp:function(){return U},KeyframeTrack:function(){return Oa},LOD:function(){return H2},LatheBufferGeometry:function(){return pp},LatheGeometry:function(){return Sc},Layers:function(){return S1},LessDepth:function(){return Te},LessEqualDepth:function(){return $e},LessEqualStencilFunc:function(){return We},LessStencilFunc:function(){return I},Light:function(){return j1},LightProbe:function(){return R0},Line:function(){return $1},Line3:function(){return j3},LineBasicMaterial:function(){return As},LineCurve:function(){return y0},LineCurve3:function(){return i9},LineDashedMaterial:function(){return M9},LineLoop:function(){return K2},LineSegments:function(){return Xa},LinearEncoding:function(){return Is},LinearFilter:function(){return dn},LinearInterpolant:function(){return kf},LinearMipMapLinearFilter:function(){return at},LinearMipMapNearestFilter:function(){return Qe},LinearMipmapLinearFilter:function(){return Ke},LinearMipmapNearestFilter:function(){return Me},LinearSRGBColorSpace:function(){return go},LinearToneMapping:function(){return Xe},Loader:function(){return Ks},LoaderUtils:function(){return Xf},LoadingManager:function(){return jf},LoopOnce:function(){return fi},LoopPingPong:function(){return Ii},LoopRepeat:function(){return Ci},LuminanceAlphaFormat:function(){return ti},LuminanceFormat:function(){return Ar},MOUSE:function(){return x},Material:function(){return Uo},MaterialLoader:function(){return L0},MathUtils:function(){return gs},Matrix3:function(){return Nr},Matrix4:function(){return Ur},MaxEquation:function(){return dt},Mesh:function(){return fo},MeshBasicMaterial:function(){return ca},MeshDepthMaterial:function(){return gf},MeshDistanceMaterial:function(){return vf},MeshLambertMaterial:function(){return w9},MeshMatcapMaterial:function(){return b9},MeshNormalMaterial:function(){return x9},MeshPhongMaterial:function(){return _9},MeshPhysicalMaterial:function(){return C9},MeshStandardMaterial:function(){return Bf},MeshToonMaterial:function(){return y9},MinEquation:function(){return ke},MirroredRepeatWrapping:function(){return Ne},MixOperation:function(){return Rt},MultiplyBlending:function(){return Ye},MultiplyOperation:function(){return ot},NearestFilter:function(){return Ze},NearestMipMapLinearFilter:function(){return $n},NearestMipMapNearestFilter:function(){return Ft},NearestMipmapLinearFilter:function(){return qt},NearestMipmapNearestFilter:function(){return et},NeverDepth:function(){return ee},NeverStencilFunc:function(){return be},NoBlending:function(){return Qt},NoColorSpace:function(){return Po},NoToneMapping:function(){return pt},NormalAnimationBlendMode:function(){return To},NormalBlending:function(){return mt},NotEqualDepth:function(){return St},NotEqualStencilFunc:function(){return Mn},NumberKeyframeTrack:function(){return Iu},Object3D:function(){return _i},ObjectLoader:function(){return d3},ObjectSpaceNormalMap:function(){return us},OctahedronBufferGeometry:function(){return mp},OctahedronGeometry:function(){return Lc},OneFactor:function(){return Z},OneMinusDstAlphaFactor:function(){return de},OneMinusDstColorFactor:function(){return te},OneMinusSrcAlphaFactor:function(){return _e},OneMinusSrcColorFactor:function(){return ge},OrthographicCamera:function(){return ou},PCFShadowMap:function(){return ce},PCFSoftShadowMap:function(){return oe},PMREMGenerator:function(){return n0},Path:function(){return gu},PerspectiveCamera:function(){return Co},Plane:function(){return Vr},PlaneBufferGeometry:function(){return gp},PlaneGeometry:function(){return Xi},PlaneHelper:function(){return np},PointLight:function(){return H9},PointLightHelper:function(){return G3},Points:function(){return J2},PointsMaterial:function(){return bf},PolarGridHelper:function(){return q3},PolyhedronBufferGeometry:function(){return vp},PolyhedronGeometry:function(){return p1},PositionalAudio:function(){return w3},PropertyBinding:function(){return Oi},PropertyMixer:function(){return q9},QuadraticBezierCurve:function(){return Pf},QuadraticBezierCurve3:function(){return Of},Quaternion:function(){return Ui},QuaternionKeyframeTrack:function(){return Ac},QuaternionLinearInterpolant:function(){return L9},RED_GREEN_RGTC2_Format:function(){return bi},RED_RGTC1_Format:function(){return Er},REVISION:function(){return L},RGBADepthPacking:function(){return es},RGBAFormat:function(){return lr},RGBAIntegerFormat:function(){return v},RGBA_ASTC_10x10_Format:function(){return Qn},RGBA_ASTC_10x5_Format:function(){return Gn},RGBA_ASTC_10x6_Format:function(){return Pn},RGBA_ASTC_10x8_Format:function(){return kn},RGBA_ASTC_12x10_Format:function(){return cn},RGBA_ASTC_12x12_Format:function(){return Zn},RGBA_ASTC_4x4_Format:function(){return kt},RGBA_ASTC_5x4_Format:function(){return Ht},RGBA_ASTC_5x5_Format:function(){return ht},RGBA_ASTC_6x5_Format:function(){return vt},RGBA_ASTC_6x6_Format:function(){return ft},RGBA_ASTC_8x5_Format:function(){return Gt},RGBA_ASTC_8x6_Format:function(){return An},RGBA_ASTC_8x8_Format:function(){return Rn},RGBA_BPTC_Format:function(){return cr},RGBA_ETC2_EAC_Format:function(){return ut},RGBA_PVRTC_2BPPV1_Format:function(){return W},RGBA_PVRTC_4BPPV1_Format:function(){return P},RGBA_S3TC_DXT1_Format:function(){return S},RGBA_S3TC_DXT3_Format:function(){return z},RGBA_S3TC_DXT5_Format:function(){return ae},RGB_ETC1_Format:function(){return Fe},RGB_ETC2_Format:function(){return Ge},RGB_PVRTC_2BPPV1_Format:function(){return X},RGB_PVRTC_4BPPV1_Format:function(){return F},RGB_S3TC_DXT1_Format:function(){return w},RGFormat:function(){return j},RGIntegerFormat:function(){return m},RawShaderMaterial:function(){return v9},Ray:function(){return Na},Raycaster:function(){return V3},RectAreaLight:function(){return B9},RedFormat:function(){return mi},RedIntegerFormat:function(){return D},ReinhardToneMapping:function(){return Be},RepeatWrapping:function(){return pe},ReplaceStencilOp:function(){return Q},ReverseSubtractEquation:function(){return Ve},RingBufferGeometry:function(){return Cp},RingGeometry:function(){return Su},SIGNED_RED_GREEN_RGTC2_Format:function(){return li},SIGNED_RED_RGTC1_Format:function(){return Kr},SRGBColorSpace:function(){return Sr},Scene:function(){return T2},ShaderChunk:function(){return ui},ShaderLib:function(){return da},ShaderMaterial:function(){return ps},ShadowMaterial:function(){return g9},Shape:function(){return Rl},ShapeBufferGeometry:function(){return _p},ShapeGeometry:function(){return Ru},ShapePath:function(){return op},ShapeUtils:function(){return Ya},ShortType:function(){return ln},Skeleton:function(){return h0},SkeletonHelper:function(){return Z3},SkinnedMesh:function(){return V2},Source:function(){return Ws},Sphere:function(){return ds},SphereBufferGeometry:function(){return yp},SphereGeometry:function(){return Tc},Spherical:function(){return F3},SphericalHarmonics3:function(){return U9},SplineCurve:function(){return If},SpotLight:function(){return I9},SpotLightHelper:function(){return W3},Sprite:function(){return I2},SpriteMaterial:function(){return _f},SrcAlphaFactor:function(){return ve},SrcAlphaSaturateFactor:function(){return Oe},SrcColorFactor:function(){return ye},StaticCopyUsage:function(){return Wr},StaticDrawUsage:function(){return yn},StaticReadUsage:function(){return ir},StereoCamera:function(){return C3},StreamCopyUsage:function(){return Xr},StreamDrawUsage:function(){return vr},StreamReadUsage:function(){return ri},StringKeyframeTrack:function(){return Pl},SubtractEquation:function(){return Nt},SubtractiveBlending:function(){return O},TOUCH:function(){return g},TangentSpaceNormalMap:function(){return Br},TetrahedronBufferGeometry:function(){return xp},TetrahedronGeometry:function(){return Lu},Texture:function(){return qr},TextureLoader:function(){return l3},TorusBufferGeometry:function(){return wp},TorusGeometry:function(){return Tu},TorusKnotBufferGeometry:function(){return bp},TorusKnotGeometry:function(){return Au},Triangle:function(){return Bo},TriangleFanDrawMode:function(){return Js},TriangleStripDrawMode:function(){return ma},TrianglesDrawMode:function(){return Us},TubeBufferGeometry:function(){return Mp},TubeGeometry:function(){return Pu},TwoPassDoubleSide:function(){return lt},UVMapping:function(){return Yt},Uint16BufferAttribute:function(){return a1},Uint32BufferAttribute:function(){return il},Uint8BufferAttribute:function(){return nl},Uint8ClampedBufferAttribute:function(){return rl},Uniform:function(){return Jf},UniformsGroup:function(){return z3},UniformsLib:function(){return Jn},UniformsUtils:function(){return N1},UnsignedByteType:function(){return Bt},UnsignedInt248Type:function(){return Vn},UnsignedIntType:function(){return Ie},UnsignedShort4444Type:function(){return en},UnsignedShort5551Type:function(){return bn},UnsignedShortType:function(){return zt},VSMShadowMap:function(){return xe},Vector2:function(){return Cn},Vector3:function(){return Ee},Vector4:function(){return wr},VectorKeyframeTrack:function(){return Du},VideoTexture:function(){return x5},WebGL1Renderer:function(){return L2},WebGL3DRenderTarget:function(){return Ho},WebGLArrayRenderTarget:function(){return Ji},WebGLCubeRenderTarget:function(){return $c},WebGLMultipleRenderTargets:function(){return ta},WebGLRenderTarget:function(){return zi},WebGLRenderer:function(){return R2},WebGLUtils:function(){return M2},WireframeGeometry:function(){return h9},WrapAroundEnding:function(){return $o},ZeroCurvatureEnding:function(){return ro},ZeroFactor:function(){return Et},ZeroSlopeEnding:function(){return ci},ZeroStencilOp:function(){return Hi},_SRGBAFormat:function(){return Ni},sRGBEncoding:function(){return to}});const L="152",x={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},g={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},C=0,T=1,$=2,H=3,K=0,ce=1,oe=2,xe=3,Se=0,k=1,rt=2,lt=2,Qt=0,mt=1,Pt=2,O=3,Ye=4,gt=5,Ot=100,Nt=101,Ve=102,ke=103,dt=104,Et=200,Z=201,ye=202,ge=203,ve=204,_e=205,we=206,de=207,Y=208,te=209,Oe=210,ee=0,Ae=1,Te=2,$e=3,Je=4,it=5,tt=6,St=7,ot=0,Rt=1,Lt=2,pt=0,Xe=1,Be=2,Ct=3,Wt=4,Xt=5,Yt=300,wn=301,an=302,un=303,Tn=304,yt=306,pe=1e3,Ce=1001,Ne=1002,Ze=1003,et=1004,Ft=1004,qt=1005,$n=1005,dn=1006,Me=1007,Qe=1007,Ke=1008,at=1008,Bt=1009,En=1010,ln=1011,zt=1012,me=1013,Ie=1014,ct=1015,It=1016,en=1017,bn=1018,Vn=1020,tr=1021,lr=1023,Ar=1024,ti=1025,ai=1026,Pr=1027,mi=1028,D=1029,j=1030,m=1031,v=1033,w=33776,S=33777,z=33778,ae=33779,F=35840,X=35841,P=35842,W=35843,Fe=36196,Ge=37492,ut=37496,kt=37808,Ht=37809,ht=37810,vt=37811,ft=37812,Gt=37813,An=37814,Rn=37815,Gn=37816,Pn=37817,kn=37818,Qn=37819,cn=37820,Zn=37821,cr=36492,Er=36283,Kr=36284,bi=36285,li=36286,fi=2200,Ci=2201,Ii=2202,Or=2300,Gr=2301,Di=2302,ro=2400,ci=2401,$o=2402,To=2500,mo=2501,Us=0,ma=1,Js=2,Is=3e3,to=3001,Ao=3200,es=3201,Br=0,us=1,Po="",Sr="srgb",go="srgb-linear",jo="display-p3",Hi=0,U=7680,Q=7681,Pe=7682,st=7683,Dt=34055,Tt=34056,G=5386,be=512,I=513,ie=514,We=515,xt=516,Mn=517,In=518,Xn=519,yn=35044,Yn=35048,vr=35040,ir=35045,yr=35049,ri=35041,Wr=35046,ii=35050,Xr=35042,hi="100",Mi="300 es",Ni=1035;class gi{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const o=r.indexOf(t);o!==-1&&r.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let o=0,l=r.length;o<l;o++)r[o].call(this,e);e.target=null}}}const di=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let io=1234567;const qi=Math.PI/180,Ds=180/Math.PI;function Oo(){const s=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(di[s&255]+di[s>>8&255]+di[s>>16&255]+di[s>>24&255]+"-"+di[e&255]+di[e>>8&255]+"-"+di[e>>16&15|64]+di[e>>24&255]+"-"+di[t&63|128]+di[t>>8&255]+"-"+di[t>>16&255]+di[t>>24&255]+di[n&255]+di[n>>8&255]+di[n>>16&255]+di[n>>24&255]).toLowerCase()}function oi(s,e,t){return Math.max(e,Math.min(t,s))}function fs(s,e){return(s%e+e)%e}function Vs(s,e,t,n,r){return n+(s-e)*(r-n)/(t-e)}function qa(s,e,t){return s!==e?(t-s)/(e-s):0}function Hs(s,e,t){return(1-t)*s+t*e}function Fs(s,e,t,n){return Hs(s,e,1-Math.exp(-t*n))}function Qs(s,e=1){return e-Math.abs(fs(s,e*2)-e)}function ga(s,e,t){return s<=e?0:s>=t?1:(s=(s-e)/(t-e),s*s*(3-2*s))}function Da(s,e,t){return s<=e?0:s>=t?1:(s=(s-e)/(t-e),s*s*s*(s*(s*6-15)+10))}function ts(s,e){return s+Math.floor(Math.random()*(e-s+1))}function v1(s,e){return s+Math.random()*(e-s)}function C1(s){return s*(.5-Math.random())}function Ja(s){s!==void 0&&(io=s);let e=io+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function yo(s){return s*qi}function ks(s){return s*Ds}function ns(s){return(s&s-1)===0&&s!==0}function va(s){return Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))}function oo(s){return Math.pow(2,Math.floor(Math.log(s)/Math.LN2))}function Io(s,e,t,n,r){const o=Math.cos,l=Math.sin,c=o(t/2),f=l(t/2),d=o((e+n)/2),p=l((e+n)/2),_=o((e-n)/2),y=l((e-n)/2),b=o((n-e)/2),R=l((n-e)/2);switch(r){case"XYX":s.set(c*p,f*_,f*y,c*d);break;case"YZY":s.set(f*y,c*p,f*_,c*d);break;case"ZXZ":s.set(f*_,f*y,c*p,c*d);break;case"XZX":s.set(c*p,f*R,f*b,c*d);break;case"YXY":s.set(f*b,c*p,f*R,c*d);break;case"ZYZ":s.set(f*R,f*b,c*p,c*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function ki(s,e){switch(e.constructor){case Float32Array:return s;case Uint16Array:return s/65535;case Uint8Array:return s/255;case Int16Array:return Math.max(s/32767,-1);case Int8Array:return Math.max(s/127,-1);default:throw new Error("Invalid component type.")}}function Tr(s,e){switch(e.constructor){case Float32Array:return s;case Uint16Array:return Math.round(s*65535);case Uint8Array:return Math.round(s*255);case Int16Array:return Math.round(s*32767);case Int8Array:return Math.round(s*127);default:throw new Error("Invalid component type.")}}const gs={DEG2RAD:qi,RAD2DEG:Ds,generateUUID:Oo,clamp:oi,euclideanModulo:fs,mapLinear:Vs,inverseLerp:qa,lerp:Hs,damp:Fs,pingpong:Qs,smoothstep:ga,smootherstep:Da,randInt:ts,randFloat:v1,randFloatSpread:C1,seededRandom:Ja,degToRad:yo,radToDeg:ks,isPowerOfTwo:ns,ceilPowerOfTwo:va,floorPowerOfTwo:oo,setQuaternionFromProperEuler:Io,normalize:Tr,denormalize:ki};class Cn{constructor(e=0,t=0){Cn.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(oi(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),o=this.x-e.x,l=this.y-e.y;return this.x=o*n-l*r+e.x,this.y=o*r+l*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Nr{constructor(){Nr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,r,o,l,c,f,d){const p=this.elements;return p[0]=e,p[1]=r,p[2]=c,p[3]=t,p[4]=o,p[5]=f,p[6]=n,p[7]=l,p[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,o=this.elements,l=n[0],c=n[3],f=n[6],d=n[1],p=n[4],_=n[7],y=n[2],b=n[5],R=n[8],B=r[0],A=r[3],M=r[6],q=r[1],V=r[4],he=r[7],Re=r[2],De=r[5],nt=r[8];return o[0]=l*B+c*q+f*Re,o[3]=l*A+c*V+f*De,o[6]=l*M+c*he+f*nt,o[1]=d*B+p*q+_*Re,o[4]=d*A+p*V+_*De,o[7]=d*M+p*he+_*nt,o[2]=y*B+b*q+R*Re,o[5]=y*A+b*V+R*De,o[8]=y*M+b*he+R*nt,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],o=e[3],l=e[4],c=e[5],f=e[6],d=e[7],p=e[8];return t*l*p-t*c*d-n*o*p+n*c*f+r*o*d-r*l*f}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],o=e[3],l=e[4],c=e[5],f=e[6],d=e[7],p=e[8],_=p*l-c*d,y=c*f-p*o,b=d*o-l*f,R=t*_+n*y+r*b;if(R===0)return this.set(0,0,0,0,0,0,0,0,0);const B=1/R;return e[0]=_*B,e[1]=(r*d-p*n)*B,e[2]=(c*n-r*l)*B,e[3]=y*B,e[4]=(p*t-r*f)*B,e[5]=(r*o-c*t)*B,e[6]=b*B,e[7]=(n*f-d*t)*B,e[8]=(l*t-n*o)*B,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,o,l,c){const f=Math.cos(o),d=Math.sin(o);return this.set(n*f,n*d,-n*(f*l+d*c)+l+e,-r*d,r*f,-r*(-d*l+f*c)+c+t,0,0,1),this}scale(e,t){return this.premultiply($s.makeScale(e,t)),this}rotate(e){return this.premultiply($s.makeRotation(-e)),this}translate(e,t){return this.premultiply($s.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const $s=new Nr;function ea(s){for(let e=s.length-1;e>=0;--e)if(s[e]>=65535)return!0;return!1}const Wo={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function so(s,e){return new Wo[s](e)}function Ai(s){return document.createElementNS("http://www.w3.org/1999/xhtml",s)}const Ca={};function no(s){s in Ca||(Ca[s]=!0,console.warn(s))}function rs(s){return s<.04045?s*.0773993808:Math.pow(s*.9478672986+.0521327014,2.4)}function js(s){return s<.0031308?s*12.92:1.055*Math.pow(s,.41666)-.055}const Qa=new Nr().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),vs=new Nr().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function _1(s){return s.convertSRGBToLinear().applyMatrix3(vs)}function Ha(s){return s.applyMatrix3(Qa).convertLinearToSRGB()}const _a={[go]:s=>s,[Sr]:s=>s.convertSRGBToLinear(),[jo]:_1},e1={[go]:s=>s,[Sr]:s=>s.convertLinearToSRGB(),[jo]:Ha},xo={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(s){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!s},get workingColorSpace(){return go},set workingColorSpace(s){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(s,e,t){if(this.enabled===!1||e===t||!e||!t)return s;const n=_a[e],r=e1[t];if(n===void 0||r===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return r(n(s))},fromWorkingColorSpace:function(s,e){return this.convert(s,this.workingColorSpace,e)},toWorkingColorSpace:function(s,e){return this.convert(s,e,this.workingColorSpace)}};let Cs;class t1{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement=="undefined")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Cs===void 0&&(Cs=Ai("canvas")),Cs.width=e.width,Cs.height=e.height;const n=Cs.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Cs}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap){const t=Ai("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),o=r.data;for(let l=0;l<o.length;l++)o[l]=rs(o[l]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(rs(t[n]/255)*255):t[n]=rs(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Ws{constructor(e=null){this.isSource=!0,this.uuid=Oo(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let o;if(Array.isArray(r)){o=[];for(let l=0,c=r.length;l<c;l++)r[l].isDataTexture?o.push(Zs(r[l].image)):o.push(Zs(r[l]))}else o=Zs(r);n.url=o}return t||(e.images[this.uuid]=n),n}}function Zs(s){return typeof HTMLImageElement!="undefined"&&s instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&s instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&s instanceof ImageBitmap?t1.getDataURL(s):s.data?{data:Array.from(s.data),width:s.width,height:s.height,type:s.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let y1=0;class qr extends gi{constructor(e=qr.DEFAULT_IMAGE,t=qr.DEFAULT_MAPPING,n=Ce,r=Ce,o=dn,l=Ke,c=lr,f=Bt,d=qr.DEFAULT_ANISOTROPY,p=Po){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:y1++}),this.uuid=Oo(),this.name="",this.source=new Ws(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=o,this.minFilter=l,this.anisotropy=d,this.format=c,this.internalFormat=null,this.type=f,this.offset=new Cn(0,0),this.repeat=new Cn(1,1),this.center=new Cn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Nr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof p=="string"?this.colorSpace=p:(no("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=p===to?Sr:Po),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Yt)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case pe:e.x=e.x-Math.floor(e.x);break;case Ce:e.x=e.x<0?0:1;break;case Ne:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case pe:e.y=e.y-Math.floor(e.y);break;case Ce:e.y=e.y<0?0:1;break;case Ne:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return no("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Sr?to:Is}set encoding(e){no("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===to?Sr:Po}}qr.DEFAULT_IMAGE=null,qr.DEFAULT_MAPPING=Yt,qr.DEFAULT_ANISOTROPY=1;class wr{constructor(e=0,t=0,n=0,r=1){wr.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,o=this.w,l=e.elements;return this.x=l[0]*t+l[4]*n+l[8]*r+l[12]*o,this.y=l[1]*t+l[5]*n+l[9]*r+l[13]*o,this.z=l[2]*t+l[6]*n+l[10]*r+l[14]*o,this.w=l[3]*t+l[7]*n+l[11]*r+l[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,o;const f=e.elements,d=f[0],p=f[4],_=f[8],y=f[1],b=f[5],R=f[9],B=f[2],A=f[6],M=f[10];if(Math.abs(p-y)<.01&&Math.abs(_-B)<.01&&Math.abs(R-A)<.01){if(Math.abs(p+y)<.1&&Math.abs(_+B)<.1&&Math.abs(R+A)<.1&&Math.abs(d+b+M-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const V=(d+1)/2,he=(b+1)/2,Re=(M+1)/2,De=(p+y)/4,nt=(_+B)/4,_t=(R+A)/4;return V>he&&V>Re?V<.01?(n=0,r=.707106781,o=.707106781):(n=Math.sqrt(V),r=De/n,o=nt/n):he>Re?he<.01?(n=.707106781,r=0,o=.707106781):(r=Math.sqrt(he),n=De/r,o=_t/r):Re<.01?(n=.707106781,r=.707106781,o=0):(o=Math.sqrt(Re),n=nt/o,r=_t/o),this.set(n,r,o,t),this}let q=Math.sqrt((A-R)*(A-R)+(_-B)*(_-B)+(y-p)*(y-p));return Math.abs(q)<.001&&(q=1),this.x=(A-R)/q,this.y=(_-B)/q,this.z=(y-p)/q,this.w=Math.acos((d+b+M-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class zi extends gi{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new wr(0,0,e,t),this.scissorTest=!1,this.viewport=new wr(0,0,e,t);const r={width:e,height:t,depth:1};n.encoding!==void 0&&(no("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===to?Sr:Po),this.texture=new qr(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.internalFormat=n.internalFormat!==void 0?n.internalFormat:null,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:dn,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!1,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null,this.samples=n.samples!==void 0?n.samples:0}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Ws(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class wo extends qr{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Ze,this.minFilter=Ze,this.wrapR=Ce,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ji extends zi{constructor(e=1,t=1,n=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new wo(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Do extends qr{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Ze,this.minFilter=Ze,this.wrapR=Ce,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ho extends zi{constructor(e=1,t=1,n=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new Do(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class ta extends zi{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const o=this.texture;this.texture=[];for(let l=0;l<n;l++)this.texture[l]=o.clone(),this.texture[l].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,o=this.texture.length;r<o;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Ui{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,o,l,c){let f=n[r+0],d=n[r+1],p=n[r+2],_=n[r+3];const y=o[l+0],b=o[l+1],R=o[l+2],B=o[l+3];if(c===0){e[t+0]=f,e[t+1]=d,e[t+2]=p,e[t+3]=_;return}if(c===1){e[t+0]=y,e[t+1]=b,e[t+2]=R,e[t+3]=B;return}if(_!==B||f!==y||d!==b||p!==R){let A=1-c;const M=f*y+d*b+p*R+_*B,q=M>=0?1:-1,V=1-M*M;if(V>Number.EPSILON){const Re=Math.sqrt(V),De=Math.atan2(Re,M*q);A=Math.sin(A*De)/Re,c=Math.sin(c*De)/Re}const he=c*q;if(f=f*A+y*he,d=d*A+b*he,p=p*A+R*he,_=_*A+B*he,A===1-c){const Re=1/Math.sqrt(f*f+d*d+p*p+_*_);f*=Re,d*=Re,p*=Re,_*=Re}}e[t]=f,e[t+1]=d,e[t+2]=p,e[t+3]=_}static multiplyQuaternionsFlat(e,t,n,r,o,l){const c=n[r],f=n[r+1],d=n[r+2],p=n[r+3],_=o[l],y=o[l+1],b=o[l+2],R=o[l+3];return e[t]=c*R+p*_+f*b-d*y,e[t+1]=f*R+p*y+d*_-c*b,e[t+2]=d*R+p*b+c*y-f*_,e[t+3]=p*R-c*_-f*y-d*b,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,r=e._y,o=e._z,l=e._order,c=Math.cos,f=Math.sin,d=c(n/2),p=c(r/2),_=c(o/2),y=f(n/2),b=f(r/2),R=f(o/2);switch(l){case"XYZ":this._x=y*p*_+d*b*R,this._y=d*b*_-y*p*R,this._z=d*p*R+y*b*_,this._w=d*p*_-y*b*R;break;case"YXZ":this._x=y*p*_+d*b*R,this._y=d*b*_-y*p*R,this._z=d*p*R-y*b*_,this._w=d*p*_+y*b*R;break;case"ZXY":this._x=y*p*_-d*b*R,this._y=d*b*_+y*p*R,this._z=d*p*R+y*b*_,this._w=d*p*_-y*b*R;break;case"ZYX":this._x=y*p*_-d*b*R,this._y=d*b*_+y*p*R,this._z=d*p*R-y*b*_,this._w=d*p*_+y*b*R;break;case"YZX":this._x=y*p*_+d*b*R,this._y=d*b*_+y*p*R,this._z=d*p*R-y*b*_,this._w=d*p*_-y*b*R;break;case"XZY":this._x=y*p*_-d*b*R,this._y=d*b*_-y*p*R,this._z=d*p*R+y*b*_,this._w=d*p*_+y*b*R;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],o=t[8],l=t[1],c=t[5],f=t[9],d=t[2],p=t[6],_=t[10],y=n+c+_;if(y>0){const b=.5/Math.sqrt(y+1);this._w=.25/b,this._x=(p-f)*b,this._y=(o-d)*b,this._z=(l-r)*b}else if(n>c&&n>_){const b=2*Math.sqrt(1+n-c-_);this._w=(p-f)/b,this._x=.25*b,this._y=(r+l)/b,this._z=(o+d)/b}else if(c>_){const b=2*Math.sqrt(1+c-n-_);this._w=(o-d)/b,this._x=(r+l)/b,this._y=.25*b,this._z=(f+p)/b}else{const b=2*Math.sqrt(1+_-n-c);this._w=(l-r)/b,this._x=(o+d)/b,this._y=(f+p)/b,this._z=.25*b}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(oi(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,o=e._z,l=e._w,c=t._x,f=t._y,d=t._z,p=t._w;return this._x=n*p+l*c+r*d-o*f,this._y=r*p+l*f+o*c-n*d,this._z=o*p+l*d+n*f-r*c,this._w=l*p-n*c-r*f-o*d,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,o=this._z,l=this._w;let c=l*e._w+n*e._x+r*e._y+o*e._z;if(c<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,c=-c):this.copy(e),c>=1)return this._w=l,this._x=n,this._y=r,this._z=o,this;const f=1-c*c;if(f<=Number.EPSILON){const b=1-t;return this._w=b*l+t*this._w,this._x=b*n+t*this._x,this._y=b*r+t*this._y,this._z=b*o+t*this._z,this.normalize(),this._onChangeCallback(),this}const d=Math.sqrt(f),p=Math.atan2(d,c),_=Math.sin((1-t)*p)/d,y=Math.sin(t*p)/d;return this._w=l*_+this._w*y,this._x=n*_+this._x*y,this._y=r*_+this._y*y,this._z=o*_+this._z*y,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(o),n*Math.cos(o),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Ee{constructor(e=0,t=0,n=0){Ee.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(na.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(na.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[3]*n+o[6]*r,this.y=o[1]*t+o[4]*n+o[7]*r,this.z=o[2]*t+o[5]*n+o[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,o=e.elements,l=1/(o[3]*t+o[7]*n+o[11]*r+o[15]);return this.x=(o[0]*t+o[4]*n+o[8]*r+o[12])*l,this.y=(o[1]*t+o[5]*n+o[9]*r+o[13])*l,this.z=(o[2]*t+o[6]*n+o[10]*r+o[14])*l,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,o=e.x,l=e.y,c=e.z,f=e.w,d=f*t+l*r-c*n,p=f*n+c*t-o*r,_=f*r+o*n-l*t,y=-o*t-l*n-c*r;return this.x=d*f+y*-o+p*-c-_*-l,this.y=p*f+y*-l+_*-o-d*-c,this.z=_*f+y*-c+d*-l-p*-o,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r,this.y=o[1]*t+o[5]*n+o[9]*r,this.z=o[2]*t+o[6]*n+o[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,o=e.z,l=t.x,c=t.y,f=t.z;return this.x=r*f-o*c,this.y=o*l-n*f,this.z=n*c-r*l,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return _s.copy(this).projectOnVector(e),this.sub(_s)}reflect(e){return this.sub(_s.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(oi(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-Uu(e,2));return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _s=new Ee,na=new Ui;class No{constructor(e=new Ee(1/0,1/0,1/0),t=new Ee(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint($i.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint($i.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=$i.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),zo.copy(e.boundingBox),zo.applyMatrix4(e.matrixWorld),this.union(zo);else{const r=e.geometry;if(r!==void 0)if(t&&r.attributes!==void 0&&r.attributes.position!==void 0){const o=r.attributes.position;for(let l=0,c=o.count;l<c;l++)$i.fromBufferAttribute(o,l).applyMatrix4(e.matrixWorld),this.expandByPoint($i)}else r.boundingBox===null&&r.computeBoundingBox(),zo.copy(r.boundingBox),zo.applyMatrix4(e.matrixWorld),this.union(zo)}const n=e.children;for(let r=0,o=n.length;r<o;r++)this.expandByObject(n[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,$i),$i.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(x1),vo.subVectors(this.max,x1),Ri.subVectors(e.a,x1),ao.subVectors(e.b,x1),Qi.subVectors(e.c,x1),Ns.subVectors(ao,Ri),ys.subVectors(Qi,ao),zs.subVectors(Ri,Qi);let t=[0,-Ns.z,Ns.y,0,-ys.z,ys.y,0,-zs.z,zs.y,Ns.z,0,-Ns.x,ys.z,0,-ys.x,zs.z,0,-zs.x,-Ns.y,Ns.x,0,-ys.y,ys.x,0,-zs.y,zs.x,0];return!w1(t,Ri,ao,Qi,vo)||(t=[1,0,0,0,1,0,0,0,1],!w1(t,Ri,ao,Qi,vo))?!1:(n1.crossVectors(Ns,ys),t=[n1.x,n1.y,n1.z],w1(t,Ri,ao,Qi,vo))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,$i).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize($i).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Yo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Yo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Yo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Yo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Yo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Yo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Yo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Yo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Yo),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Yo=[new Ee,new Ee,new Ee,new Ee,new Ee,new Ee,new Ee,new Ee],$i=new Ee,zo=new No,Ri=new Ee,ao=new Ee,Qi=new Ee,Ns=new Ee,ys=new Ee,zs=new Ee,x1=new Ee,vo=new Ee,n1=new Ee,ra=new Ee;function w1(s,e,t,n,r){for(let o=0,l=s.length-3;o<=l;o+=3){ra.fromArray(s,o);const c=r.x*Math.abs(ra.x)+r.y*Math.abs(ra.y)+r.z*Math.abs(ra.z),f=e.dot(ra),d=t.dot(ra),p=n.dot(ra);if(Math.max(-Math.max(f,d,p),Math.min(f,d,p))>c)return!1}return!0}const ia=new No,is=new Ee,oa=new Ee;class ds{constructor(e=new Ee,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):ia.setFromPoints(e).getCenter(n);let r=0;for(let o=0,l=e.length;o<l;o++)r=Math.max(r,n.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;is.subVectors(e,this.center);const t=is.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(is,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(oa.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(is.copy(e.center).add(oa)),this.expandByPoint(is.copy(e.center).sub(oa))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const xs=new Ee,G1=new Ee,b1=new Ee,sa=new Ee,X1=new Ee,M1=new Ee,Y1=new Ee;class Na{constructor(e=new Ee,t=new Ee(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,xs)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=xs.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(xs.copy(this.origin).addScaledVector(this.direction,t),xs.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){G1.copy(e).add(t).multiplyScalar(.5),b1.copy(t).sub(e).normalize(),sa.copy(this.origin).sub(G1);const o=e.distanceTo(t)*.5,l=-this.direction.dot(b1),c=sa.dot(this.direction),f=-sa.dot(b1),d=sa.lengthSq(),p=Math.abs(1-l*l);let _,y,b,R;if(p>0)if(_=l*f-c,y=l*c-f,R=o*p,_>=0)if(y>=-R)if(y<=R){const B=1/p;_*=B,y*=B,b=_*(_+l*y+2*c)+y*(l*_+y+2*f)+d}else y=o,_=Math.max(0,-(l*y+c)),b=-_*_+y*(y+2*f)+d;else y=-o,_=Math.max(0,-(l*y+c)),b=-_*_+y*(y+2*f)+d;else y<=-R?(_=Math.max(0,-(-l*o+c)),y=_>0?-o:Math.min(Math.max(-o,-f),o),b=-_*_+y*(y+2*f)+d):y<=R?(_=0,y=Math.min(Math.max(-o,-f),o),b=y*(y+2*f)+d):(_=Math.max(0,-(l*o+c)),y=_>0?o:Math.min(Math.max(-o,-f),o),b=-_*_+y*(y+2*f)+d);else y=l>0?-o:o,_=Math.max(0,-(l*y+c)),b=-_*_+y*(y+2*f)+d;return n&&n.copy(this.origin).addScaledVector(this.direction,_),r&&r.copy(G1).addScaledVector(b1,y),b}intersectSphere(e,t){xs.subVectors(e.center,this.origin);const n=xs.dot(this.direction),r=xs.dot(xs)-n*n,o=e.radius*e.radius;if(r>o)return null;const l=Math.sqrt(o-r),c=n-l,f=n+l;return f<0?null:c<0?this.at(f,t):this.at(c,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,o,l,c,f;const d=1/this.direction.x,p=1/this.direction.y,_=1/this.direction.z,y=this.origin;return d>=0?(n=(e.min.x-y.x)*d,r=(e.max.x-y.x)*d):(n=(e.max.x-y.x)*d,r=(e.min.x-y.x)*d),p>=0?(o=(e.min.y-y.y)*p,l=(e.max.y-y.y)*p):(o=(e.max.y-y.y)*p,l=(e.min.y-y.y)*p),n>l||o>r||((o>n||isNaN(n))&&(n=o),(l<r||isNaN(r))&&(r=l),_>=0?(c=(e.min.z-y.z)*_,f=(e.max.z-y.z)*_):(c=(e.max.z-y.z)*_,f=(e.min.z-y.z)*_),n>f||c>r)||((c>n||n!==n)&&(n=c),(f<r||r!==r)&&(r=f),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,xs)!==null}intersectTriangle(e,t,n,r,o){X1.subVectors(t,e),M1.subVectors(n,e),Y1.crossVectors(X1,M1);let l=this.direction.dot(Y1),c;if(l>0){if(r)return null;c=1}else if(l<0)c=-1,l=-l;else return null;sa.subVectors(this.origin,e);const f=c*this.direction.dot(M1.crossVectors(sa,M1));if(f<0)return null;const d=c*this.direction.dot(X1.cross(sa));if(d<0||f+d>l)return null;const p=-c*sa.dot(Y1);return p<0?null:this.at(p/l,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ur{constructor(){Ur.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,r,o,l,c,f,d,p,_,y,b,R,B,A){const M=this.elements;return M[0]=e,M[4]=t,M[8]=n,M[12]=r,M[1]=o,M[5]=l,M[9]=c,M[13]=f,M[2]=d,M[6]=p,M[10]=_,M[14]=y,M[3]=b,M[7]=R,M[11]=B,M[15]=A,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ur().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/ya.setFromMatrixColumn(e,0).length(),o=1/ya.setFromMatrixColumn(e,1).length(),l=1/ya.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*o,t[5]=n[5]*o,t[6]=n[6]*o,t[7]=0,t[8]=n[8]*l,t[9]=n[9]*l,t[10]=n[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,o=e.z,l=Math.cos(n),c=Math.sin(n),f=Math.cos(r),d=Math.sin(r),p=Math.cos(o),_=Math.sin(o);if(e.order==="XYZ"){const y=l*p,b=l*_,R=c*p,B=c*_;t[0]=f*p,t[4]=-f*_,t[8]=d,t[1]=b+R*d,t[5]=y-B*d,t[9]=-c*f,t[2]=B-y*d,t[6]=R+b*d,t[10]=l*f}else if(e.order==="YXZ"){const y=f*p,b=f*_,R=d*p,B=d*_;t[0]=y+B*c,t[4]=R*c-b,t[8]=l*d,t[1]=l*_,t[5]=l*p,t[9]=-c,t[2]=b*c-R,t[6]=B+y*c,t[10]=l*f}else if(e.order==="ZXY"){const y=f*p,b=f*_,R=d*p,B=d*_;t[0]=y-B*c,t[4]=-l*_,t[8]=R+b*c,t[1]=b+R*c,t[5]=l*p,t[9]=B-y*c,t[2]=-l*d,t[6]=c,t[10]=l*f}else if(e.order==="ZYX"){const y=l*p,b=l*_,R=c*p,B=c*_;t[0]=f*p,t[4]=R*d-b,t[8]=y*d+B,t[1]=f*_,t[5]=B*d+y,t[9]=b*d-R,t[2]=-d,t[6]=c*f,t[10]=l*f}else if(e.order==="YZX"){const y=l*f,b=l*d,R=c*f,B=c*d;t[0]=f*p,t[4]=B-y*_,t[8]=R*_+b,t[1]=_,t[5]=l*p,t[9]=-c*p,t[2]=-d*p,t[6]=b*_+R,t[10]=y-B*_}else if(e.order==="XZY"){const y=l*f,b=l*d,R=c*f,B=c*d;t[0]=f*p,t[4]=-_,t[8]=d*p,t[1]=y*_+B,t[5]=l*p,t[9]=b*_-R,t[2]=R*_-b,t[6]=c*p,t[10]=B*_+y}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(K1,e,kl)}lookAt(e,t,n){const r=this.elements;return os.subVectors(e,t),os.lengthSq()===0&&(os.z=1),os.normalize(),ws.crossVectors(n,os),ws.lengthSq()===0&&(Math.abs(n.z)===1?os.x+=1e-4:os.z+=1e-4,os.normalize(),ws.crossVectors(n,os)),ws.normalize(),E1.crossVectors(os,ws),r[0]=ws.x,r[4]=E1.x,r[8]=os.x,r[1]=ws.y,r[5]=E1.y,r[9]=os.y,r[2]=ws.z,r[6]=E1.z,r[10]=os.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,o=this.elements,l=n[0],c=n[4],f=n[8],d=n[12],p=n[1],_=n[5],y=n[9],b=n[13],R=n[2],B=n[6],A=n[10],M=n[14],q=n[3],V=n[7],he=n[11],Re=n[15],De=r[0],nt=r[4],_t=r[8],se=r[12],Ue=r[1],Jt=r[5],gn=r[9],Ut=r[13],Zt=r[2],on=r[6],Dn=r[10],Ln=r[14],Sn=r[3],Hn=r[7],Bn=r[11],hr=r[15];return o[0]=l*De+c*Ue+f*Zt+d*Sn,o[4]=l*nt+c*Jt+f*on+d*Hn,o[8]=l*_t+c*gn+f*Dn+d*Bn,o[12]=l*se+c*Ut+f*Ln+d*hr,o[1]=p*De+_*Ue+y*Zt+b*Sn,o[5]=p*nt+_*Jt+y*on+b*Hn,o[9]=p*_t+_*gn+y*Dn+b*Bn,o[13]=p*se+_*Ut+y*Ln+b*hr,o[2]=R*De+B*Ue+A*Zt+M*Sn,o[6]=R*nt+B*Jt+A*on+M*Hn,o[10]=R*_t+B*gn+A*Dn+M*Bn,o[14]=R*se+B*Ut+A*Ln+M*hr,o[3]=q*De+V*Ue+he*Zt+Re*Sn,o[7]=q*nt+V*Jt+he*on+Re*Hn,o[11]=q*_t+V*gn+he*Dn+Re*Bn,o[15]=q*se+V*Ut+he*Ln+Re*hr,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],o=e[12],l=e[1],c=e[5],f=e[9],d=e[13],p=e[2],_=e[6],y=e[10],b=e[14],R=e[3],B=e[7],A=e[11],M=e[15];return R*(+o*f*_-r*d*_-o*c*y+n*d*y+r*c*b-n*f*b)+B*(+t*f*b-t*d*y+o*l*y-r*l*b+r*d*p-o*f*p)+A*(+t*d*_-t*c*b-o*l*_+n*l*b+o*c*p-n*d*p)+M*(-r*c*p-t*f*_+t*c*y+r*l*_-n*l*y+n*f*p)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],o=e[3],l=e[4],c=e[5],f=e[6],d=e[7],p=e[8],_=e[9],y=e[10],b=e[11],R=e[12],B=e[13],A=e[14],M=e[15],q=_*A*d-B*y*d+B*f*b-c*A*b-_*f*M+c*y*M,V=R*y*d-p*A*d-R*f*b+l*A*b+p*f*M-l*y*M,he=p*B*d-R*_*d+R*c*b-l*B*b-p*c*M+l*_*M,Re=R*_*f-p*B*f-R*c*y+l*B*y+p*c*A-l*_*A,De=t*q+n*V+r*he+o*Re;if(De===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const nt=1/De;return e[0]=q*nt,e[1]=(B*y*o-_*A*o-B*r*b+n*A*b+_*r*M-n*y*M)*nt,e[2]=(c*A*o-B*f*o+B*r*d-n*A*d-c*r*M+n*f*M)*nt,e[3]=(_*f*o-c*y*o-_*r*d+n*y*d+c*r*b-n*f*b)*nt,e[4]=V*nt,e[5]=(p*A*o-R*y*o+R*r*b-t*A*b-p*r*M+t*y*M)*nt,e[6]=(R*f*o-l*A*o-R*r*d+t*A*d+l*r*M-t*f*M)*nt,e[7]=(l*y*o-p*f*o+p*r*d-t*y*d-l*r*b+t*f*b)*nt,e[8]=he*nt,e[9]=(R*_*o-p*B*o-R*n*b+t*B*b+p*n*M-t*_*M)*nt,e[10]=(l*B*o-R*c*o+R*n*d-t*B*d-l*n*M+t*c*M)*nt,e[11]=(p*c*o-l*_*o-p*n*d+t*_*d+l*n*b-t*c*b)*nt,e[12]=Re*nt,e[13]=(p*B*r-R*_*r+R*n*y-t*B*y-p*n*A+t*_*A)*nt,e[14]=(R*c*r-l*B*r-R*n*f+t*B*f+l*n*A-t*c*A)*nt,e[15]=(l*_*r-p*c*r+p*n*f-t*_*f-l*n*y+t*c*y)*nt,this}scale(e){const t=this.elements,n=e.x,r=e.y,o=e.z;return t[0]*=n,t[4]*=r,t[8]*=o,t[1]*=n,t[5]*=r,t[9]*=o,t[2]*=n,t[6]*=r,t[10]*=o,t[3]*=n,t[7]*=r,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),o=1-n,l=e.x,c=e.y,f=e.z,d=o*l,p=o*c;return this.set(d*l+n,d*c-r*f,d*f+r*c,0,d*c+r*f,p*c+n,p*f-r*l,0,d*f-r*c,p*f+r*l,o*f*f+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,o,l){return this.set(1,n,o,0,e,1,l,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,o=t._x,l=t._y,c=t._z,f=t._w,d=o+o,p=l+l,_=c+c,y=o*d,b=o*p,R=o*_,B=l*p,A=l*_,M=c*_,q=f*d,V=f*p,he=f*_,Re=n.x,De=n.y,nt=n.z;return r[0]=(1-(B+M))*Re,r[1]=(b+he)*Re,r[2]=(R-V)*Re,r[3]=0,r[4]=(b-he)*De,r[5]=(1-(y+M))*De,r[6]=(A+q)*De,r[7]=0,r[8]=(R+V)*nt,r[9]=(A-q)*nt,r[10]=(1-(y+B))*nt,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let o=ya.set(r[0],r[1],r[2]).length();const l=ya.set(r[4],r[5],r[6]).length(),c=ya.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),e.x=r[12],e.y=r[13],e.z=r[14],Ko.copy(this);const d=1/o,p=1/l,_=1/c;return Ko.elements[0]*=d,Ko.elements[1]*=d,Ko.elements[2]*=d,Ko.elements[4]*=p,Ko.elements[5]*=p,Ko.elements[6]*=p,Ko.elements[8]*=_,Ko.elements[9]*=_,Ko.elements[10]*=_,t.setFromRotationMatrix(Ko),n.x=o,n.y=l,n.z=c,this}makePerspective(e,t,n,r,o,l){const c=this.elements,f=2*o/(t-e),d=2*o/(n-r),p=(t+e)/(t-e),_=(n+r)/(n-r),y=-(l+o)/(l-o),b=-2*l*o/(l-o);return c[0]=f,c[4]=0,c[8]=p,c[12]=0,c[1]=0,c[5]=d,c[9]=_,c[13]=0,c[2]=0,c[6]=0,c[10]=y,c[14]=b,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,n,r,o,l){const c=this.elements,f=1/(t-e),d=1/(n-r),p=1/(l-o),_=(t+e)*f,y=(n+r)*d,b=(l+o)*p;return c[0]=2*f,c[4]=0,c[8]=0,c[12]=-_,c[1]=0,c[5]=2*d,c[9]=0,c[13]=-y,c[2]=0,c[6]=0,c[10]=-2*p,c[14]=-b,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const ya=new Ee,Ko=new Ur,K1=new Ee(0,0,0),kl=new Ee(1,1,1),ws=new Ee,E1=new Ee,os=new Ee,$l=new Ur,jl=new Ui;class za{constructor(e=0,t=0,n=0,r=za.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,o=r[0],l=r[4],c=r[8],f=r[1],d=r[5],p=r[9],_=r[2],y=r[6],b=r[10];switch(t){case"XYZ":this._y=Math.asin(oi(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-p,b),this._z=Math.atan2(-l,o)):(this._x=Math.atan2(y,d),this._z=0);break;case"YXZ":this._x=Math.asin(-oi(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(c,b),this._z=Math.atan2(f,d)):(this._y=Math.atan2(-_,o),this._z=0);break;case"ZXY":this._x=Math.asin(oi(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-_,b),this._z=Math.atan2(-l,d)):(this._y=0,this._z=Math.atan2(f,o));break;case"ZYX":this._y=Math.asin(-oi(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(y,b),this._z=Math.atan2(f,o)):(this._x=0,this._z=Math.atan2(-l,d));break;case"YZX":this._z=Math.asin(oi(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-p,d),this._y=Math.atan2(-_,o)):(this._x=0,this._y=Math.atan2(c,b));break;case"XZY":this._z=Math.asin(-oi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(y,d),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-p,b),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return $l.makeRotationFromQuaternion(e),this.setFromRotationMatrix($l,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return jl.setFromEuler(this),this.setFromQuaternion(jl,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}za.DEFAULT_ORDER="XYZ";class S1{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Pc=0;const Oc=new Ee,Ba=new Ui,aa=new Ur,q1=new Ee,r1=new Ee,Ic=new Ee,Dc=new Ui,Wl=new Ee(1,0,0),R1=new Ee(0,1,0),Hc=new Ee(0,0,1),Vu={type:"added"},Nc={type:"removed"};class _i extends gi{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Pc++}),this.uuid=Oo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=_i.DEFAULT_UP.clone();const e=new Ee,t=new za,n=new Ui,r=new Ee(1,1,1);function o(){n.setFromEuler(t,!1)}function l(){t.setFromQuaternion(n,void 0,!1)}t._onChange(o),n._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ur},normalMatrix:{value:new Nr}}),this.matrix=new Ur,this.matrixWorld=new Ur,this.matrixAutoUpdate=_i.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=_i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new S1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ba.setFromAxisAngle(e,t),this.quaternion.multiply(Ba),this}rotateOnWorldAxis(e,t){return Ba.setFromAxisAngle(e,t),this.quaternion.premultiply(Ba),this}rotateX(e){return this.rotateOnAxis(Wl,e)}rotateY(e){return this.rotateOnAxis(R1,e)}rotateZ(e){return this.rotateOnAxis(Hc,e)}translateOnAxis(e,t){return Oc.copy(e).applyQuaternion(this.quaternion),this.position.add(Oc.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Wl,e)}translateY(e){return this.translateOnAxis(R1,e)}translateZ(e){return this.translateOnAxis(Hc,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(aa.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?q1.copy(e):q1.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),r1.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?aa.lookAt(r1,q1,this.up):aa.lookAt(q1,r1,this.up),this.quaternion.setFromRotationMatrix(aa),r&&(aa.extractRotation(r.matrixWorld),Ba.setFromRotationMatrix(aa),this.quaternion.premultiply(Ba.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Vu)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Nc)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(Nc)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),aa.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),aa.multiply(e.parent.matrixWorld)),e.applyMatrix4(aa),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const l=this.children[n].getObjectByProperty(e,t);if(l!==void 0)return l}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let r=0,o=this.children.length;r<o;r++){const l=this.children[r].getObjectsByProperty(e,t);l.length>0&&(n=n.concat(l))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(r1,e,Ic),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(r1,Dc,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++){const o=t[n];(o.matrixWorldAutoUpdate===!0||e===!0)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let o=0,l=r.length;o<l;o++){const c=r[o];c.matrixWorldAutoUpdate===!0&&c.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function o(c,f){return c[f.uuid]===void 0&&(c[f.uuid]=f.toJSON(e)),f.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=o(e.geometries,this.geometry);const c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){const f=c.shapes;if(Array.isArray(f))for(let d=0,p=f.length;d<p;d++){const _=f[d];o(e.shapes,_)}else o(e.shapes,f)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const c=[];for(let f=0,d=this.material.length;f<d;f++)c.push(o(e.materials,this.material[f]));r.material=c}else r.material=o(e.materials,this.material);if(this.children.length>0){r.children=[];for(let c=0;c<this.children.length;c++)r.children.push(this.children[c].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let c=0;c<this.animations.length;c++){const f=this.animations[c];r.animations.push(o(e.animations,f))}}if(t){const c=l(e.geometries),f=l(e.materials),d=l(e.textures),p=l(e.images),_=l(e.shapes),y=l(e.skeletons),b=l(e.animations),R=l(e.nodes);c.length>0&&(n.geometries=c),f.length>0&&(n.materials=f),d.length>0&&(n.textures=d),p.length>0&&(n.images=p),_.length>0&&(n.shapes=_),y.length>0&&(n.skeletons=y),b.length>0&&(n.animations=b),R.length>0&&(n.nodes=R)}return n.object=r,n;function l(c){const f=[];for(const d in c){const p=c[d];delete p.metadata,f.push(p)}return f}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}}_i.DEFAULT_UP=new Ee(0,1,0),_i.DEFAULT_MATRIX_AUTO_UPDATE=!0,_i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const hs=new Ee,la=new Ee,J1=new Ee,Gs=new Ee,Ua=new Ee,Va=new Ee,Zl=new Ee,bs=new Ee,Q1=new Ee,Fa=new Ee;let xa=!1;class Bo{constructor(e=new Ee,t=new Ee,n=new Ee){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),hs.subVectors(e,t),r.cross(hs);const o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(e,t,n,r,o){hs.subVectors(r,t),la.subVectors(n,t),J1.subVectors(e,t);const l=hs.dot(hs),c=hs.dot(la),f=hs.dot(J1),d=la.dot(la),p=la.dot(J1),_=l*d-c*c;if(_===0)return o.set(-2,-1,-1);const y=1/_,b=(d*f-c*p)*y,R=(l*p-c*f)*y;return o.set(1-b-R,R,b)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,Gs),Gs.x>=0&&Gs.y>=0&&Gs.x+Gs.y<=1}static getUV(e,t,n,r,o,l,c,f){return xa===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),xa=!0),this.getInterpolation(e,t,n,r,o,l,c,f)}static getInterpolation(e,t,n,r,o,l,c,f){return this.getBarycoord(e,t,n,r,Gs),f.setScalar(0),f.addScaledVector(o,Gs.x),f.addScaledVector(l,Gs.y),f.addScaledVector(c,Gs.z),f}static isFrontFacing(e,t,n,r){return hs.subVectors(n,t),la.subVectors(e,t),hs.cross(la).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return hs.subVectors(this.c,this.b),la.subVectors(this.a,this.b),hs.cross(la).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Bo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Bo.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,o){return xa===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),xa=!0),Bo.getInterpolation(e,this.a,this.b,this.c,t,n,r,o)}getInterpolation(e,t,n,r,o){return Bo.getInterpolation(e,this.a,this.b,this.c,t,n,r,o)}containsPoint(e){return Bo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Bo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,o=this.c;let l,c;Ua.subVectors(r,n),Va.subVectors(o,n),bs.subVectors(e,n);const f=Ua.dot(bs),d=Va.dot(bs);if(f<=0&&d<=0)return t.copy(n);Q1.subVectors(e,r);const p=Ua.dot(Q1),_=Va.dot(Q1);if(p>=0&&_<=p)return t.copy(r);const y=f*_-p*d;if(y<=0&&f>=0&&p<=0)return l=f/(f-p),t.copy(n).addScaledVector(Ua,l);Fa.subVectors(e,o);const b=Ua.dot(Fa),R=Va.dot(Fa);if(R>=0&&b<=R)return t.copy(o);const B=b*d-f*R;if(B<=0&&d>=0&&R<=0)return c=d/(d-R),t.copy(n).addScaledVector(Va,c);const A=p*R-b*_;if(A<=0&&_-p>=0&&b-R>=0)return Zl.subVectors(o,r),c=(_-p)/(_-p+(b-R)),t.copy(r).addScaledVector(Zl,c);const M=1/(A+B+y);return l=B*M,c=y*M,t.copy(n).addScaledVector(Ua,l).addScaledVector(Va,c)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let el=0;class Uo extends gi{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:el++}),this.uuid=Oo(),this.name="",this.type="Material",this.blending=mt,this.side=Se,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=ve,this.blendDst=_e,this.blendEquation=Ot,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=$e,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Xn,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=U,this.stencilZFail=U,this.stencilZPass=U,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==mt&&(n.blending=this.blending),this.side!==Se&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(n.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(n.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=this.flatShading),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(o){const l=[];for(const c in o){const f=o[c];delete f.metadata,l.push(f)}return l}if(t){const o=r(e.textures),l=r(e.images);o.length>0&&(n.textures=o),l.length>0&&(n.images=l)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let o=0;o!==r;++o)n[o]=t[o].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const i1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ji={h:0,s:0,l:0},tl={h:0,s:0,l:0};function Gl(s,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?s+(e-s)*6*t:t<1/2?e:t<2/3?s+(e-s)*6*(2/3-t):s}class qn{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&n===void 0?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Sr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,xo.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=xo.workingColorSpace){return this.r=e,this.g=t,this.b=n,xo.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=xo.workingColorSpace){if(e=fs(e,1),t=oi(t,0,1),n=oi(n,0,1),t===0)this.r=this.g=this.b=n;else{const o=n<=.5?n*(1+t):n+t-n*t,l=2*n-o;this.r=Gl(l,o,e+1/3),this.g=Gl(l,o,e),this.b=Gl(l,o,e-1/3)}return xo.toWorkingColorSpace(this,r),this}setStyle(e,t=Sr){function n(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const l=r[1],c=r[2];switch(l){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=r[1],l=o.length;if(l===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(l===6)return this.setHex(parseInt(o,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Sr){const n=i1[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=rs(e.r),this.g=rs(e.g),this.b=rs(e.b),this}copyLinearToSRGB(e){return this.r=js(e.r),this.g=js(e.g),this.b=js(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Sr){return xo.fromWorkingColorSpace(Pi.copy(this),e),Math.round(oi(Pi.r*255,0,255))*65536+Math.round(oi(Pi.g*255,0,255))*256+Math.round(oi(Pi.b*255,0,255))}getHexString(e=Sr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=xo.workingColorSpace){xo.fromWorkingColorSpace(Pi.copy(this),t);const n=Pi.r,r=Pi.g,o=Pi.b,l=Math.max(n,r,o),c=Math.min(n,r,o);let f,d;const p=(c+l)/2;if(c===l)f=0,d=0;else{const _=l-c;switch(d=p<=.5?_/(l+c):_/(2-l-c),l){case n:f=(r-o)/_+(r<o?6:0);break;case r:f=(o-n)/_+2;break;case o:f=(n-r)/_+4;break}f/=6}return e.h=f,e.s=d,e.l=p,e}getRGB(e,t=xo.workingColorSpace){return xo.fromWorkingColorSpace(Pi.copy(this),t),e.r=Pi.r,e.g=Pi.g,e.b=Pi.b,e}getStyle(e=Sr){xo.fromWorkingColorSpace(Pi.copy(this),e);const t=Pi.r,n=Pi.g,r=Pi.b;return e!==Sr?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(e,t,n){return this.getHSL(ji),ji.h+=e,ji.s+=t,ji.l+=n,this.setHSL(ji.h,ji.s,ji.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(ji),e.getHSL(tl);const n=Hs(ji.h,tl.h,t),r=Hs(ji.s,tl.s,t),o=Hs(ji.l,tl.l,t);return this.setHSL(n,r,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,o=e.elements;return this.r=o[0]*t+o[3]*n+o[6]*r,this.g=o[1]*t+o[4]*n+o[7]*r,this.b=o[2]*t+o[5]*n+o[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Pi=new qn;qn.NAMES=i1;class ca extends Uo{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new qn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ot,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Xs=zc();function zc(){const s=new ArrayBuffer(4),e=new Float32Array(s),t=new Uint32Array(s),n=new Uint32Array(512),r=new Uint32Array(512);for(let f=0;f<256;++f){const d=f-127;d<-27?(n[f]=0,n[f|256]=32768,r[f]=24,r[f|256]=24):d<-14?(n[f]=1024>>-d-14,n[f|256]=1024>>-d-14|32768,r[f]=-d-1,r[f|256]=-d-1):d<=15?(n[f]=d+15<<10,n[f|256]=d+15<<10|32768,r[f]=13,r[f|256]=13):d<128?(n[f]=31744,n[f|256]=64512,r[f]=24,r[f|256]=24):(n[f]=31744,n[f|256]=64512,r[f]=13,r[f|256]=13)}const o=new Uint32Array(2048),l=new Uint32Array(64),c=new Uint32Array(64);for(let f=1;f<1024;++f){let d=f<<13,p=0;for(;!(d&8388608);)d<<=1,p-=8388608;d&=-8388609,p+=947912704,o[f]=d|p}for(let f=1024;f<2048;++f)o[f]=939524096+(f-1024<<13);for(let f=1;f<31;++f)l[f]=f<<23;l[31]=1199570944,l[32]=2147483648;for(let f=33;f<63;++f)l[f]=2147483648+(f-32<<23);l[63]=3347054592;for(let f=1;f<64;++f)f!==32&&(c[f]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:r,mantissaTable:o,exponentTable:l,offsetTable:c}}function qo(s){Math.abs(s)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),s=oi(s,-65504,65504),Xs.floatView[0]=s;const e=Xs.uint32View[0],t=e>>23&511;return Xs.baseTable[t]+((e&8388607)>>Xs.shiftTable[t])}function o1(s){const e=s>>10;return Xs.uint32View[0]=Xs.mantissaTable[Xs.offsetTable[e]+(s&1023)]+Xs.exponentTable[e],Xs.floatView[0]}const Xl={toHalfFloat:qo,fromHalfFloat:o1},lo=new Ee,s1=new Cn;class Vi{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=yn,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)s1.fromBufferAttribute(this,t),s1.applyMatrix3(e),this.setXY(t,s1.x,s1.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)lo.fromBufferAttribute(this,t),lo.applyMatrix3(e),this.setXYZ(t,lo.x,lo.y,lo.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)lo.fromBufferAttribute(this,t),lo.applyMatrix4(e),this.setXYZ(t,lo.x,lo.y,lo.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)lo.fromBufferAttribute(this,t),lo.applyNormalMatrix(e),this.setXYZ(t,lo.x,lo.y,lo.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)lo.fromBufferAttribute(this,t),lo.transformDirection(e),this.setXYZ(t,lo.x,lo.y,lo.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ki(t,this.array)),t}setX(e,t){return this.normalized&&(t=Tr(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ki(t,this.array)),t}setY(e,t){return this.normalized&&(t=Tr(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ki(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Tr(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ki(t,this.array)),t}setW(e,t){return this.normalized&&(t=Tr(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Tr(t,this.array),n=Tr(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Tr(t,this.array),n=Tr(n,this.array),r=Tr(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,o){return e*=this.itemSize,this.normalized&&(t=Tr(t,this.array),n=Tr(n,this.array),r=Tr(r,this.array),o=Tr(o,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==yn&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Bc extends Vi{constructor(e,t,n){super(new Int8Array(e),t,n)}}class nl extends Vi{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class rl extends Vi{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class Uc extends Vi{constructor(e,t,n){super(new Int16Array(e),t,n)}}class a1 extends Vi{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Yl extends Vi{constructor(e,t,n){super(new Int32Array(e),t,n)}}class il extends Vi{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class ol extends Vi{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=o1(this.array[e*this.itemSize]);return this.normalized&&(t=ki(t,this.array)),t}setX(e,t){return this.normalized&&(t=Tr(t,this.array)),this.array[e*this.itemSize]=qo(t),this}getY(e){let t=o1(this.array[e*this.itemSize+1]);return this.normalized&&(t=ki(t,this.array)),t}setY(e,t){return this.normalized&&(t=Tr(t,this.array)),this.array[e*this.itemSize+1]=qo(t),this}getZ(e){let t=o1(this.array[e*this.itemSize+2]);return this.normalized&&(t=ki(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Tr(t,this.array)),this.array[e*this.itemSize+2]=qo(t),this}getW(e){let t=o1(this.array[e*this.itemSize+3]);return this.normalized&&(t=ki(t,this.array)),t}setW(e,t){return this.normalized&&(t=Tr(t,this.array)),this.array[e*this.itemSize+3]=qo(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Tr(t,this.array),n=Tr(n,this.array)),this.array[e+0]=qo(t),this.array[e+1]=qo(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Tr(t,this.array),n=Tr(n,this.array),r=Tr(r,this.array)),this.array[e+0]=qo(t),this.array[e+1]=qo(n),this.array[e+2]=qo(r),this}setXYZW(e,t,n,r,o){return e*=this.itemSize,this.normalized&&(t=Tr(t,this.array),n=Tr(n,this.array),r=Tr(r,this.array),o=Tr(o,this.array)),this.array[e+0]=qo(t),this.array[e+1]=qo(n),this.array[e+2]=qo(r),this.array[e+3]=qo(o),this}}class dr extends Vi{constructor(e,t,n){super(new Float32Array(e),t,n)}}class Kl extends Vi{constructor(e,t,n){super(new Float64Array(e),t,n)}}let Vc=0;const uo=new Ur,ql=new _i,l1=new Ee,Zo=new No,Bs=new No,bo=new Ee;class xn extends gi{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Vc++}),this.uuid=Oo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(ea(e)?il:a1)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const o=new Nr().getNormalMatrix(e);n.applyNormalMatrix(o),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return uo.makeRotationFromQuaternion(e),this.applyMatrix4(uo),this}rotateX(e){return uo.makeRotationX(e),this.applyMatrix4(uo),this}rotateY(e){return uo.makeRotationY(e),this.applyMatrix4(uo),this}rotateZ(e){return uo.makeRotationZ(e),this.applyMatrix4(uo),this}translate(e,t,n){return uo.makeTranslation(e,t,n),this.applyMatrix4(uo),this}scale(e,t,n){return uo.makeScale(e,t,n),this.applyMatrix4(uo),this}lookAt(e){return ql.lookAt(e),ql.updateMatrix(),this.applyMatrix4(ql.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(l1).negate(),this.translate(l1.x,l1.y,l1.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const o=e[n];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new dr(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new No);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Ee(-1/0,-1/0,-1/0),new Ee(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const o=t[n];Zo.setFromBufferAttribute(o),this.morphTargetsRelative?(bo.addVectors(this.boundingBox.min,Zo.min),this.boundingBox.expandByPoint(bo),bo.addVectors(this.boundingBox.max,Zo.max),this.boundingBox.expandByPoint(bo)):(this.boundingBox.expandByPoint(Zo.min),this.boundingBox.expandByPoint(Zo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ds);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Ee,1/0);return}if(e){const n=this.boundingSphere.center;if(Zo.setFromBufferAttribute(e),t)for(let o=0,l=t.length;o<l;o++){const c=t[o];Bs.setFromBufferAttribute(c),this.morphTargetsRelative?(bo.addVectors(Zo.min,Bs.min),Zo.expandByPoint(bo),bo.addVectors(Zo.max,Bs.max),Zo.expandByPoint(bo)):(Zo.expandByPoint(Bs.min),Zo.expandByPoint(Bs.max))}Zo.getCenter(n);let r=0;for(let o=0,l=e.count;o<l;o++)bo.fromBufferAttribute(e,o),r=Math.max(r,n.distanceToSquared(bo));if(t)for(let o=0,l=t.length;o<l;o++){const c=t[o],f=this.morphTargetsRelative;for(let d=0,p=c.count;d<p;d++)bo.fromBufferAttribute(c,d),f&&(l1.fromBufferAttribute(e,d),bo.add(l1)),r=Math.max(r,n.distanceToSquared(bo))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.array,r=t.position.array,o=t.normal.array,l=t.uv.array,c=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Vi(new Float32Array(4*c),4));const f=this.getAttribute("tangent").array,d=[],p=[];for(let Ue=0;Ue<c;Ue++)d[Ue]=new Ee,p[Ue]=new Ee;const _=new Ee,y=new Ee,b=new Ee,R=new Cn,B=new Cn,A=new Cn,M=new Ee,q=new Ee;function V(Ue,Jt,gn){_.fromArray(r,Ue*3),y.fromArray(r,Jt*3),b.fromArray(r,gn*3),R.fromArray(l,Ue*2),B.fromArray(l,Jt*2),A.fromArray(l,gn*2),y.sub(_),b.sub(_),B.sub(R),A.sub(R);const Ut=1/(B.x*A.y-A.x*B.y);isFinite(Ut)&&(M.copy(y).multiplyScalar(A.y).addScaledVector(b,-B.y).multiplyScalar(Ut),q.copy(b).multiplyScalar(B.x).addScaledVector(y,-A.x).multiplyScalar(Ut),d[Ue].add(M),d[Jt].add(M),d[gn].add(M),p[Ue].add(q),p[Jt].add(q),p[gn].add(q))}let he=this.groups;he.length===0&&(he=[{start:0,count:n.length}]);for(let Ue=0,Jt=he.length;Ue<Jt;++Ue){const gn=he[Ue],Ut=gn.start,Zt=gn.count;for(let on=Ut,Dn=Ut+Zt;on<Dn;on+=3)V(n[on+0],n[on+1],n[on+2])}const Re=new Ee,De=new Ee,nt=new Ee,_t=new Ee;function se(Ue){nt.fromArray(o,Ue*3),_t.copy(nt);const Jt=d[Ue];Re.copy(Jt),Re.sub(nt.multiplyScalar(nt.dot(Jt))).normalize(),De.crossVectors(_t,Jt);const Ut=De.dot(p[Ue])<0?-1:1;f[Ue*4]=Re.x,f[Ue*4+1]=Re.y,f[Ue*4+2]=Re.z,f[Ue*4+3]=Ut}for(let Ue=0,Jt=he.length;Ue<Jt;++Ue){const gn=he[Ue],Ut=gn.start,Zt=gn.count;for(let on=Ut,Dn=Ut+Zt;on<Dn;on+=3)se(n[on+0]),se(n[on+1]),se(n[on+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Vi(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let y=0,b=n.count;y<b;y++)n.setXYZ(y,0,0,0);const r=new Ee,o=new Ee,l=new Ee,c=new Ee,f=new Ee,d=new Ee,p=new Ee,_=new Ee;if(e)for(let y=0,b=e.count;y<b;y+=3){const R=e.getX(y+0),B=e.getX(y+1),A=e.getX(y+2);r.fromBufferAttribute(t,R),o.fromBufferAttribute(t,B),l.fromBufferAttribute(t,A),p.subVectors(l,o),_.subVectors(r,o),p.cross(_),c.fromBufferAttribute(n,R),f.fromBufferAttribute(n,B),d.fromBufferAttribute(n,A),c.add(p),f.add(p),d.add(p),n.setXYZ(R,c.x,c.y,c.z),n.setXYZ(B,f.x,f.y,f.z),n.setXYZ(A,d.x,d.y,d.z)}else for(let y=0,b=t.count;y<b;y+=3)r.fromBufferAttribute(t,y+0),o.fromBufferAttribute(t,y+1),l.fromBufferAttribute(t,y+2),p.subVectors(l,o),_.subVectors(r,o),p.cross(_),n.setXYZ(y+0,p.x,p.y,p.z),n.setXYZ(y+1,p.x,p.y,p.z),n.setXYZ(y+2,p.x,p.y,p.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)bo.fromBufferAttribute(e,t),bo.normalize(),e.setXYZ(t,bo.x,bo.y,bo.z)}toNonIndexed(){function e(c,f){const d=c.array,p=c.itemSize,_=c.normalized,y=new d.constructor(f.length*p);let b=0,R=0;for(let B=0,A=f.length;B<A;B++){c.isInterleavedBufferAttribute?b=f[B]*c.data.stride+c.offset:b=f[B]*p;for(let M=0;M<p;M++)y[R++]=d[b++]}return new Vi(y,p,_)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new xn,n=this.index.array,r=this.attributes;for(const c in r){const f=r[c],d=e(f,n);t.setAttribute(c,d)}const o=this.morphAttributes;for(const c in o){const f=[],d=o[c];for(let p=0,_=d.length;p<_;p++){const y=d[p],b=e(y,n);f.push(b)}t.morphAttributes[c]=f}t.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let c=0,f=l.length;c<f;c++){const d=l[c];t.addGroup(d.start,d.count,d.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const f=this.parameters;for(const d in f)f[d]!==void 0&&(e[d]=f[d]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const f in n){const d=n[f];e.data.attributes[f]=d.toJSON(e.data)}const r={};let o=!1;for(const f in this.morphAttributes){const d=this.morphAttributes[f],p=[];for(let _=0,y=d.length;_<y;_++){const b=d[_];p.push(b.toJSON(e.data))}p.length>0&&(r[f]=p,o=!0)}o&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const c=this.boundingSphere;return c!==null&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const r=e.attributes;for(const d in r){const p=r[d];this.setAttribute(d,p.clone(t))}const o=e.morphAttributes;for(const d in o){const p=[],_=o[d];for(let y=0,b=_.length;y<b;y++)p.push(_[y].clone(t));this.morphAttributes[d]=p}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let d=0,p=l.length;d<p;d++){const _=l[d];this.addGroup(_.start,_.count,_.materialIndex)}const c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());const f=e.boundingSphere;return f!==null&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const L1=new Ur,Ms=new Na,T1=new ds,Fc=new Ee,Es=new Ee,Ys=new Ee,wa=new Ee,sl=new Ee,A1=new Ee,P1=new Cn,O1=new Cn,I1=new Cn,Jl=new Ee,al=new Ee,ll=new Ee,D1=new Ee,c1=new Ee;class fo extends _i{constructor(e=new xn,t=new ca){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=r.length;o<l;o++){const c=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=o}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,o=n.morphAttributes.position,l=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const c=this.morphTargetInfluences;if(o&&c){A1.set(0,0,0);for(let f=0,d=o.length;f<d;f++){const p=c[f],_=o[f];p!==0&&(sl.fromBufferAttribute(_,e),l?A1.addScaledVector(sl,p):A1.addScaledVector(sl.sub(t),p))}t.add(A1)}return t}raycast(e,t){const n=this.geometry,r=this.material,o=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),T1.copy(n.boundingSphere),T1.applyMatrix4(o),Ms.copy(e.ray).recast(e.near),!(T1.containsPoint(Ms.origin)===!1&&(Ms.intersectSphere(T1,Fc)===null||Ms.origin.distanceToSquared(Fc)>Uu(e.far-e.near,2)))&&(L1.copy(o).invert(),Ms.copy(e.ray).applyMatrix4(L1),!(n.boundingBox!==null&&Ms.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t)))}_computeIntersections(e,t){let n;const r=this.geometry,o=this.material,l=r.index,c=r.attributes.position,f=r.attributes.uv,d=r.attributes.uv1,p=r.attributes.normal,_=r.groups,y=r.drawRange;if(l!==null)if(Array.isArray(o))for(let b=0,R=_.length;b<R;b++){const B=_[b],A=o[B.materialIndex],M=Math.max(B.start,y.start),q=Math.min(l.count,Math.min(B.start+B.count,y.start+y.count));for(let V=M,he=q;V<he;V+=3){const Re=l.getX(V),De=l.getX(V+1),nt=l.getX(V+2);n=cl(this,A,e,Ms,f,d,p,Re,De,nt),n&&(n.faceIndex=Math.floor(V/3),n.face.materialIndex=B.materialIndex,t.push(n))}}else{const b=Math.max(0,y.start),R=Math.min(l.count,y.start+y.count);for(let B=b,A=R;B<A;B+=3){const M=l.getX(B),q=l.getX(B+1),V=l.getX(B+2);n=cl(this,o,e,Ms,f,d,p,M,q,V),n&&(n.faceIndex=Math.floor(B/3),t.push(n))}}else if(c!==void 0)if(Array.isArray(o))for(let b=0,R=_.length;b<R;b++){const B=_[b],A=o[B.materialIndex],M=Math.max(B.start,y.start),q=Math.min(c.count,Math.min(B.start+B.count,y.start+y.count));for(let V=M,he=q;V<he;V+=3){const Re=V,De=V+1,nt=V+2;n=cl(this,A,e,Ms,f,d,p,Re,De,nt),n&&(n.faceIndex=Math.floor(V/3),n.face.materialIndex=B.materialIndex,t.push(n))}}else{const b=Math.max(0,y.start),R=Math.min(c.count,y.start+y.count);for(let B=b,A=R;B<A;B+=3){const M=B,q=B+1,V=B+2;n=cl(this,o,e,Ms,f,d,p,M,q,V),n&&(n.faceIndex=Math.floor(B/3),t.push(n))}}}}function Fu(s,e,t,n,r,o,l,c){let f;if(e.side===k?f=n.intersectTriangle(l,o,r,!0,c):f=n.intersectTriangle(r,o,l,e.side===Se,c),f===null)return null;c1.copy(c),c1.applyMatrix4(s.matrixWorld);const d=t.ray.origin.distanceTo(c1);return d<t.near||d>t.far?null:{distance:d,point:c1.clone(),object:s}}function cl(s,e,t,n,r,o,l,c,f,d){s.getVertexPosition(c,Es),s.getVertexPosition(f,Ys),s.getVertexPosition(d,wa);const p=Fu(s,e,t,n,Es,Ys,wa,D1);if(p){r&&(P1.fromBufferAttribute(r,c),O1.fromBufferAttribute(r,f),I1.fromBufferAttribute(r,d),p.uv=Bo.getInterpolation(D1,Es,Ys,wa,P1,O1,I1,new Cn)),o&&(P1.fromBufferAttribute(o,c),O1.fromBufferAttribute(o,f),I1.fromBufferAttribute(o,d),p.uv1=Bo.getInterpolation(D1,Es,Ys,wa,P1,O1,I1,new Cn),p.uv2=p.uv1),l&&(Jl.fromBufferAttribute(l,c),al.fromBufferAttribute(l,f),ll.fromBufferAttribute(l,d),p.normal=Bo.getInterpolation(D1,Es,Ys,wa,Jl,al,ll,new Ee),p.normal.dot(n.direction)>0&&p.normal.multiplyScalar(-1));const _={a:c,b:f,c:d,normal:new Ee,materialIndex:0};Bo.getNormal(Es,Ys,wa,_.normal),p.face=_}return p}class ua extends xn{constructor(e=1,t=1,n=1,r=1,o=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:o,depthSegments:l};const c=this;r=Math.floor(r),o=Math.floor(o),l=Math.floor(l);const f=[],d=[],p=[],_=[];let y=0,b=0;R("z","y","x",-1,-1,n,t,e,l,o,0),R("z","y","x",1,-1,n,t,-e,l,o,1),R("x","z","y",1,1,e,n,t,r,l,2),R("x","z","y",1,-1,e,n,-t,r,l,3),R("x","y","z",1,-1,e,t,n,r,o,4),R("x","y","z",-1,-1,e,t,-n,r,o,5),this.setIndex(f),this.setAttribute("position",new dr(d,3)),this.setAttribute("normal",new dr(p,3)),this.setAttribute("uv",new dr(_,2));function R(B,A,M,q,V,he,Re,De,nt,_t,se){const Ue=he/nt,Jt=Re/_t,gn=he/2,Ut=Re/2,Zt=De/2,on=nt+1,Dn=_t+1;let Ln=0,Sn=0;const Hn=new Ee;for(let Bn=0;Bn<Dn;Bn++){const hr=Bn*Jt-Ut;for(let sr=0;sr<on;sr++){const fn=sr*Ue-gn;Hn[B]=fn*q,Hn[A]=hr*V,Hn[M]=Zt,d.push(Hn.x,Hn.y,Hn.z),Hn[B]=0,Hn[A]=0,Hn[M]=De>0?1:-1,p.push(Hn.x,Hn.y,Hn.z),_.push(sr/nt),_.push(1-Bn/_t),Ln+=1}}for(let Bn=0;Bn<_t;Bn++)for(let hr=0;hr<nt;hr++){const sr=y+hr+on*Bn,fn=y+hr+on*(Bn+1),On=y+(hr+1)+on*(Bn+1),er=y+(hr+1)+on*Bn;f.push(sr,fn,er),f.push(fn,On,er),Sn+=6}c.addGroup(b,Sn,se),b+=Sn,y+=Ln}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ua(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ka(s){const e={};for(const t in s){e[t]={};for(const n in s[t]){const r=s[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function Go(s){const e={};for(let t=0;t<s.length;t++){const n=ka(s[t]);for(const r in n)e[r]=n[r]}return e}function kc(s){const e=[];for(let t=0;t<s.length;t++)e.push(s[t].clone());return e}function H1(s){return s.getRenderTarget()===null?s.outputColorSpace:go}const N1={clone:ka,merge:Go};var ul=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,fl=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ps extends Uo{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=ul,this.fragmentShader=fl,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ka(e.uniforms),this.uniformsGroups=kc(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const l=this.uniforms[r].value;l&&l.isTexture?t.uniforms[r]={type:"t",value:l.toJSON(e).uuid}:l&&l.isColor?t.uniforms[r]={type:"c",value:l.getHex()}:l&&l.isVector2?t.uniforms[r]={type:"v2",value:l.toArray()}:l&&l.isVector3?t.uniforms[r]={type:"v3",value:l.toArray()}:l&&l.isVector4?t.uniforms[r]={type:"v4",value:l.toArray()}:l&&l.isMatrix3?t.uniforms[r]={type:"m3",value:l.toArray()}:l&&l.isMatrix4?t.uniforms[r]={type:"m4",value:l.toArray()}:t.uniforms[r]={value:l}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class ba extends _i{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ur,this.projectionMatrix=new Ur,this.projectionMatrixInverse=new Ur}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Co extends ba{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Ds*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(qi*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Ds*2*Math.atan(Math.tan(qi*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,o,l){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(qi*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,o=-.5*r;const l=this.view;if(this.view!==null&&this.view.enabled){const f=l.fullWidth,d=l.fullHeight;o+=l.offsetX*r/f,t-=l.offsetY*n/d,r*=l.width/f,n*=l.height/d}const c=this.filmOffset;c!==0&&(o+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Ma=-90,Ea=1;class Ql extends _i{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;const r=new Co(Ma,Ea,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const o=new Co(Ma,Ea,e,t);o.layers=this.layers,o.up.set(0,1,0),o.lookAt(-1,0,0),this.add(o);const l=new Co(Ma,Ea,e,t);l.layers=this.layers,l.up.set(0,0,-1),l.lookAt(0,1,0),this.add(l);const c=new Co(Ma,Ea,e,t);c.layers=this.layers,c.up.set(0,0,1),c.lookAt(0,-1,0),this.add(c);const f=new Co(Ma,Ea,e,t);f.layers=this.layers,f.up.set(0,1,0),f.lookAt(0,0,1),this.add(f);const d=new Co(Ma,Ea,e,t);d.layers=this.layers,d.up.set(0,1,0),d.lookAt(0,0,-1),this.add(d)}update(e,t){this.parent===null&&this.updateMatrixWorld();const n=this.renderTarget,[r,o,l,c,f,d]=this.children,p=e.getRenderTarget(),_=e.toneMapping,y=e.xr.enabled;e.toneMapping=pt,e.xr.enabled=!1;const b=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,o),e.setRenderTarget(n,2),e.render(t,l),e.setRenderTarget(n,3),e.render(t,c),e.setRenderTarget(n,4),e.render(t,f),n.texture.generateMipmaps=b,e.setRenderTarget(n,5),e.render(t,d),e.setRenderTarget(p),e.toneMapping=_,e.xr.enabled=y,n.texture.needsPMREMUpdate=!0}}class $a extends qr{constructor(e,t,n,r,o,l,c,f,d,p){e=e!==void 0?e:[],t=t!==void 0?t:wn,super(e,t,n,r,o,l,c,f,d,p),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class $c extends zi{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];t.encoding!==void 0&&(no("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===to?Sr:Po),this.texture=new $a(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:dn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new ua(5,5,5),o=new ps({name:"CubemapFromEquirect",uniforms:ka(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:k,blending:Qt});o.uniforms.tEquirect.value=t;const l=new fo(r,o),c=t.minFilter;return t.minFilter===Ke&&(t.minFilter=dn),new Ql(1,10,this).update(e,l),t.minFilter=c,l.geometry.dispose(),l.material.dispose(),this}clear(e,t,n,r){const o=e.getRenderTarget();for(let l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(t,n,r);e.setRenderTarget(o)}}const u1=new Ee,ec=new Ee,co=new Nr;class Vr{constructor(e=new Ee(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=u1.subVectors(n,t).cross(ec.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(u1),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:t.copy(e.start).addScaledVector(n,o)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||co.getNormalMatrix(e),r=this.coplanarPoint(u1).applyMatrix4(e),o=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Wi=new ds,eo=new Ee;class ho{constructor(e=new Vr,t=new Vr,n=new Vr,r=new Vr,o=new Vr,l=new Vr){this.planes=[e,t,n,r,o,l]}set(e,t,n,r,o,l){const c=this.planes;return c[0].copy(e),c[1].copy(t),c[2].copy(n),c[3].copy(r),c[4].copy(o),c[5].copy(l),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],o=n[1],l=n[2],c=n[3],f=n[4],d=n[5],p=n[6],_=n[7],y=n[8],b=n[9],R=n[10],B=n[11],A=n[12],M=n[13],q=n[14],V=n[15];return t[0].setComponents(c-r,_-f,B-y,V-A).normalize(),t[1].setComponents(c+r,_+f,B+y,V+A).normalize(),t[2].setComponents(c+o,_+d,B+b,V+M).normalize(),t[3].setComponents(c-o,_-d,B-b,V-M).normalize(),t[4].setComponents(c-l,_-p,B-R,V-q).normalize(),t[5].setComponents(c+l,_+p,B+R,V+q).normalize(),this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Wi.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Wi.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Wi)}intersectsSprite(e){return Wi.center.set(0,0,0),Wi.radius=.7071067811865476,Wi.applyMatrix4(e.matrixWorld),this.intersectsSphere(Wi)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(eo.x=r.normal.x>0?e.max.x:e.min.x,eo.y=r.normal.y>0?e.max.y:e.min.y,eo.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(eo)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function ss(){let s=null,e=!1,t=null,n=null;function r(o,l){t(o,l),n=s.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=s.requestAnimationFrame(r),e=!0)},stop:function(){s.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){s=o}}}function f1(s,e){const t=e.isWebGL2,n=new WeakMap;function r(d,p){const _=d.array,y=d.usage,b=s.createBuffer();s.bindBuffer(p,b),s.bufferData(p,_,y),d.onUploadCallback();let R;if(_ instanceof Float32Array)R=s.FLOAT;else if(_ instanceof Uint16Array)if(d.isFloat16BufferAttribute)if(t)R=s.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else R=s.UNSIGNED_SHORT;else if(_ instanceof Int16Array)R=s.SHORT;else if(_ instanceof Uint32Array)R=s.UNSIGNED_INT;else if(_ instanceof Int32Array)R=s.INT;else if(_ instanceof Int8Array)R=s.BYTE;else if(_ instanceof Uint8Array)R=s.UNSIGNED_BYTE;else if(_ instanceof Uint8ClampedArray)R=s.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+_);return{buffer:b,type:R,bytesPerElement:_.BYTES_PER_ELEMENT,version:d.version}}function o(d,p,_){const y=p.array,b=p.updateRange;s.bindBuffer(_,d),b.count===-1?s.bufferSubData(_,0,y):(t?s.bufferSubData(_,b.offset*y.BYTES_PER_ELEMENT,y,b.offset,b.count):s.bufferSubData(_,b.offset*y.BYTES_PER_ELEMENT,y.subarray(b.offset,b.offset+b.count)),b.count=-1),p.onUploadCallback()}function l(d){return d.isInterleavedBufferAttribute&&(d=d.data),n.get(d)}function c(d){d.isInterleavedBufferAttribute&&(d=d.data);const p=n.get(d);p&&(s.deleteBuffer(p.buffer),n.delete(d))}function f(d,p){if(d.isGLBufferAttribute){const y=n.get(d);(!y||y.version<d.version)&&n.set(d,{buffer:d.buffer,type:d.type,bytesPerElement:d.elementSize,version:d.version});return}d.isInterleavedBufferAttribute&&(d=d.data);const _=n.get(d);_===void 0?n.set(d,r(d,p)):_.version<d.version&&(o(_.buffer,d,p),_.version=d.version)}return{get:l,remove:c,update:f}}class Xi extends xn{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const o=e/2,l=t/2,c=Math.floor(n),f=Math.floor(r),d=c+1,p=f+1,_=e/c,y=t/f,b=[],R=[],B=[],A=[];for(let M=0;M<p;M++){const q=M*y-l;for(let V=0;V<d;V++){const he=V*_-o;R.push(he,-q,0),B.push(0,0,1),A.push(V/c),A.push(1-M/f)}}for(let M=0;M<f;M++)for(let q=0;q<c;q++){const V=q+d*M,he=q+d*(M+1),Re=q+1+d*(M+1),De=q+1+d*M;b.push(V,he,De),b.push(he,Re,De)}this.setIndex(b),this.setAttribute("position",new dr(R,3)),this.setAttribute("normal",new dr(B,3)),this.setAttribute("uv",new dr(A,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xi(e.width,e.height,e.widthSegments,e.heightSegments)}}var z1=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,d1=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,dl=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,tc=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,B1=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,as=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,nc="vec3 transformed = vec3( position );",rc=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,h1=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,hl=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,ic=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Sa=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,pl=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Ra=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,ml=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,U1=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,oc=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,gl=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,vl=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Jo=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,La=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Ss=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Cl=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,ls=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,jc=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,sc=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,ac="gl_FragColor = linearToOutputTexel( gl_FragColor );",ku=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Ta=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Wc=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Zc=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,lc=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,ja=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Gc=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,cc=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,_l=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,yl=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,$u=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,ju=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Xc=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Yc=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Wa=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Wu=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Za=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,Kc=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,cs=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Zu=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,qc=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Gu=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif`,Xu=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Jc=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Qc=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Yu=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Rs=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,uc=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Ku=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,fa=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,V1=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,Ga=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,xl=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,fc=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,dc=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,eu=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,hc=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,tu=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,nu=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,ru=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,pc=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#ifdef USE_NORMALMAP_TANGENTSPACE
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,qu=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Ju=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,i=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,a=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,u=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,h=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,E=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,N=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,ze=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,wt=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,rn=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,jn=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,ur=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Jr=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Rr=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Fi=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,_r=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Xo=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Ls=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,$t=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,At=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Kt=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,nr=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,Cr=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,si=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Qr=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Ei=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Mo=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Si=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Aa=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,Qu=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,ad=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,ld=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,cd=`#ifdef USE_UV
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,ud=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const ui={alphamap_fragment:z1,alphamap_pars_fragment:d1,alphatest_fragment:dl,alphatest_pars_fragment:tc,aomap_fragment:B1,aomap_pars_fragment:as,begin_vertex:nc,beginnormal_vertex:rc,bsdfs:h1,iridescence_fragment:hl,bumpmap_pars_fragment:ic,clipping_planes_fragment:Sa,clipping_planes_pars_fragment:pl,clipping_planes_pars_vertex:Ra,clipping_planes_vertex:ml,color_fragment:U1,color_pars_fragment:oc,color_pars_vertex:gl,color_vertex:vl,common:Jo,cube_uv_reflection_fragment:La,defaultnormal_vertex:Ss,displacementmap_pars_vertex:Cl,displacementmap_vertex:ls,emissivemap_fragment:jc,emissivemap_pars_fragment:sc,encodings_fragment:ac,encodings_pars_fragment:ku,envmap_fragment:Ta,envmap_common_pars_fragment:Wc,envmap_pars_fragment:Zc,envmap_pars_vertex:lc,envmap_physical_pars_fragment:Za,envmap_vertex:ja,fog_vertex:Gc,fog_pars_vertex:cc,fog_fragment:_l,fog_pars_fragment:yl,gradientmap_pars_fragment:$u,lightmap_fragment:ju,lightmap_pars_fragment:Xc,lights_lambert_fragment:Yc,lights_lambert_pars_fragment:Wa,lights_pars_begin:Wu,lights_toon_fragment:Kc,lights_toon_pars_fragment:cs,lights_phong_fragment:Zu,lights_phong_pars_fragment:qc,lights_physical_fragment:Gu,lights_physical_pars_fragment:Xu,lights_fragment_begin:Jc,lights_fragment_maps:Qc,lights_fragment_end:Yu,logdepthbuf_fragment:Rs,logdepthbuf_pars_fragment:uc,logdepthbuf_pars_vertex:Ku,logdepthbuf_vertex:fa,map_fragment:V1,map_pars_fragment:Ga,map_particle_fragment:xl,map_particle_pars_fragment:fc,metalnessmap_fragment:dc,metalnessmap_pars_fragment:eu,morphcolor_vertex:hc,morphnormal_vertex:tu,morphtarget_pars_vertex:nu,morphtarget_vertex:ru,normal_fragment_begin:pc,normal_fragment_maps:qu,normal_pars_fragment:Ju,normal_pars_vertex:i,normal_vertex:a,normalmap_pars_fragment:u,clearcoat_normal_fragment_begin:h,clearcoat_normal_fragment_maps:E,clearcoat_pars_fragment:N,iridescence_pars_fragment:ze,output_fragment:wt,packing:rn,premultiplied_alpha_fragment:jn,project_vertex:ur,dithering_fragment:Jr,dithering_pars_fragment:Rr,roughnessmap_fragment:Fi,roughnessmap_pars_fragment:_r,shadowmap_pars_fragment:Xo,shadowmap_pars_vertex:Ls,shadowmap_vertex:$t,shadowmask_pars_fragment:At,skinbase_vertex:Kt,skinning_pars_vertex:nr,skinning_vertex:Cr,skinnormal_vertex:si,specularmap_fragment:Qr,specularmap_pars_fragment:Ei,tonemapping_fragment:Mo,tonemapping_pars_fragment:Si,transmission_fragment:Aa,transmission_pars_fragment:Qu,uv_pars_fragment:ad,uv_pars_vertex:ld,uv_vertex:cd,worldpos_vertex:ud,background_vert:`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,background_frag:`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,backgroundCube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,backgroundCube_frag:`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cube_frag:`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,depth_vert:`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,distanceRGBA_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,distanceRGBA_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,equirect_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,meshbasic_vert:`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert:`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag:`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert:`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshmatcap_frag:`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshnormal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,meshnormal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert:`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,meshphysical_frag:`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert:`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshtoon_frag:`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,shadow_vert:`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sprite_vert:`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sprite_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`},Jn={common:{diffuse:{value:new qn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Nr},alphaMap:{value:null},alphaMapTransform:{value:new Nr},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Nr}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Nr}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Nr}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Nr},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Nr},normalScale:{value:new Cn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Nr},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Nr}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Nr}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Nr}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new qn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new qn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Nr}},sprite:{diffuse:{value:new qn(16777215)},opacity:{value:1},center:{value:new Cn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Nr},alphaMap:{value:null},alphaTest:{value:0}}},da={basic:{uniforms:Go([Jn.common,Jn.specularmap,Jn.envmap,Jn.aomap,Jn.lightmap,Jn.fog]),vertexShader:ui.meshbasic_vert,fragmentShader:ui.meshbasic_frag},lambert:{uniforms:Go([Jn.common,Jn.specularmap,Jn.envmap,Jn.aomap,Jn.lightmap,Jn.emissivemap,Jn.bumpmap,Jn.normalmap,Jn.displacementmap,Jn.fog,Jn.lights,{emissive:{value:new qn(0)}}]),vertexShader:ui.meshlambert_vert,fragmentShader:ui.meshlambert_frag},phong:{uniforms:Go([Jn.common,Jn.specularmap,Jn.envmap,Jn.aomap,Jn.lightmap,Jn.emissivemap,Jn.bumpmap,Jn.normalmap,Jn.displacementmap,Jn.fog,Jn.lights,{emissive:{value:new qn(0)},specular:{value:new qn(1118481)},shininess:{value:30}}]),vertexShader:ui.meshphong_vert,fragmentShader:ui.meshphong_frag},standard:{uniforms:Go([Jn.common,Jn.envmap,Jn.aomap,Jn.lightmap,Jn.emissivemap,Jn.bumpmap,Jn.normalmap,Jn.displacementmap,Jn.roughnessmap,Jn.metalnessmap,Jn.fog,Jn.lights,{emissive:{value:new qn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ui.meshphysical_vert,fragmentShader:ui.meshphysical_frag},toon:{uniforms:Go([Jn.common,Jn.aomap,Jn.lightmap,Jn.emissivemap,Jn.bumpmap,Jn.normalmap,Jn.displacementmap,Jn.gradientmap,Jn.fog,Jn.lights,{emissive:{value:new qn(0)}}]),vertexShader:ui.meshtoon_vert,fragmentShader:ui.meshtoon_frag},matcap:{uniforms:Go([Jn.common,Jn.bumpmap,Jn.normalmap,Jn.displacementmap,Jn.fog,{matcap:{value:null}}]),vertexShader:ui.meshmatcap_vert,fragmentShader:ui.meshmatcap_frag},points:{uniforms:Go([Jn.points,Jn.fog]),vertexShader:ui.points_vert,fragmentShader:ui.points_frag},dashed:{uniforms:Go([Jn.common,Jn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ui.linedashed_vert,fragmentShader:ui.linedashed_frag},depth:{uniforms:Go([Jn.common,Jn.displacementmap]),vertexShader:ui.depth_vert,fragmentShader:ui.depth_frag},normal:{uniforms:Go([Jn.common,Jn.bumpmap,Jn.normalmap,Jn.displacementmap,{opacity:{value:1}}]),vertexShader:ui.meshnormal_vert,fragmentShader:ui.meshnormal_frag},sprite:{uniforms:Go([Jn.sprite,Jn.fog]),vertexShader:ui.sprite_vert,fragmentShader:ui.sprite_frag},background:{uniforms:{uvTransform:{value:new Nr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ui.background_vert,fragmentShader:ui.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ui.backgroundCube_vert,fragmentShader:ui.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ui.cube_vert,fragmentShader:ui.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ui.equirect_vert,fragmentShader:ui.equirect_frag},distanceRGBA:{uniforms:Go([Jn.common,Jn.displacementmap,{referencePosition:{value:new Ee},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ui.distanceRGBA_vert,fragmentShader:ui.distanceRGBA_frag},shadow:{uniforms:Go([Jn.lights,Jn.fog,{color:{value:new qn(0)},opacity:{value:1}}]),vertexShader:ui.shadow_vert,fragmentShader:ui.shadow_frag}};da.physical={uniforms:Go([da.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Nr},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Nr},clearcoatNormalScale:{value:new Cn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Nr},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Nr},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Nr},sheen:{value:0},sheenColor:{value:new qn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Nr},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Nr},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Nr},transmissionSamplerSize:{value:new Cn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Nr},attenuationDistance:{value:0},attenuationColor:{value:new qn(0)},specularColor:{value:new qn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Nr},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Nr}}]),vertexShader:ui.meshphysical_vert,fragmentShader:ui.meshphysical_frag};const iu={r:0,b:0,g:0};function hd(s,e,t,n,r,o,l){const c=new qn(0);let f=o===!0?0:1,d,p,_=null,y=0,b=null;function R(A,M){let q=!1,V=M.isScene===!0?M.background:null;switch(V&&V.isTexture&&(V=(M.backgroundBlurriness>0?t:e).get(V)),V===null?B(c,f):V&&V.isColor&&(B(V,1),q=!0),s.xr.getEnvironmentBlendMode()){case"opaque":q=!0;break;case"additive":n.buffers.color.setClear(0,0,0,1,l),q=!0;break;case"alpha-blend":n.buffers.color.setClear(0,0,0,0,l),q=!0;break}(s.autoClear||q)&&s.clear(s.autoClearColor,s.autoClearDepth,s.autoClearStencil),V&&(V.isCubeTexture||V.mapping===yt)?(p===void 0&&(p=new fo(new ua(1,1,1),new ps({name:"BackgroundCubeMaterial",uniforms:ka(da.backgroundCube.uniforms),vertexShader:da.backgroundCube.vertexShader,fragmentShader:da.backgroundCube.fragmentShader,side:k,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(De,nt,_t){this.matrixWorld.copyPosition(_t.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(p)),p.material.uniforms.envMap.value=V,p.material.uniforms.flipEnvMap.value=V.isCubeTexture&&V.isRenderTargetTexture===!1?-1:1,p.material.uniforms.backgroundBlurriness.value=M.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=M.backgroundIntensity,p.material.toneMapped=V.colorSpace!==Sr,(_!==V||y!==V.version||b!==s.toneMapping)&&(p.material.needsUpdate=!0,_=V,y=V.version,b=s.toneMapping),p.layers.enableAll(),A.unshift(p,p.geometry,p.material,0,0,null)):V&&V.isTexture&&(d===void 0&&(d=new fo(new Xi(2,2),new ps({name:"BackgroundMaterial",uniforms:ka(da.background.uniforms),vertexShader:da.background.vertexShader,fragmentShader:da.background.fragmentShader,side:Se,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(d)),d.material.uniforms.t2D.value=V,d.material.uniforms.backgroundIntensity.value=M.backgroundIntensity,d.material.toneMapped=V.colorSpace!==Sr,V.matrixAutoUpdate===!0&&V.updateMatrix(),d.material.uniforms.uvTransform.value.copy(V.matrix),(_!==V||y!==V.version||b!==s.toneMapping)&&(d.material.needsUpdate=!0,_=V,y=V.version,b=s.toneMapping),d.layers.enableAll(),A.unshift(d,d.geometry,d.material,0,0,null))}function B(A,M){A.getRGB(iu,H1(s)),n.buffers.color.setClear(iu.r,iu.g,iu.b,M,l)}return{getClearColor:function(){return c},setClearColor:function(A,M=1){c.set(A),f=M,B(c,f)},getClearAlpha:function(){return f},setClearAlpha:function(A){f=A,B(c,f)},render:R}}function pd(s,e,t,n){const r=s.getParameter(s.MAX_VERTEX_ATTRIBS),o=n.isWebGL2?null:e.get("OES_vertex_array_object"),l=n.isWebGL2||o!==null,c={},f=A(null);let d=f,p=!1;function _(Zt,on,Dn,Ln,Sn){let Hn=!1;if(l){const Bn=B(Ln,Dn,on);d!==Bn&&(d=Bn,b(d.object)),Hn=M(Zt,Ln,Dn,Sn),Hn&&q(Zt,Ln,Dn,Sn)}else{const Bn=on.wireframe===!0;(d.geometry!==Ln.id||d.program!==Dn.id||d.wireframe!==Bn)&&(d.geometry=Ln.id,d.program=Dn.id,d.wireframe=Bn,Hn=!0)}Sn!==null&&t.update(Sn,s.ELEMENT_ARRAY_BUFFER),(Hn||p)&&(p=!1,_t(Zt,on,Dn,Ln),Sn!==null&&s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,t.get(Sn).buffer))}function y(){return n.isWebGL2?s.createVertexArray():o.createVertexArrayOES()}function b(Zt){return n.isWebGL2?s.bindVertexArray(Zt):o.bindVertexArrayOES(Zt)}function R(Zt){return n.isWebGL2?s.deleteVertexArray(Zt):o.deleteVertexArrayOES(Zt)}function B(Zt,on,Dn){const Ln=Dn.wireframe===!0;let Sn=c[Zt.id];Sn===void 0&&(Sn={},c[Zt.id]=Sn);let Hn=Sn[on.id];Hn===void 0&&(Hn={},Sn[on.id]=Hn);let Bn=Hn[Ln];return Bn===void 0&&(Bn=A(y()),Hn[Ln]=Bn),Bn}function A(Zt){const on=[],Dn=[],Ln=[];for(let Sn=0;Sn<r;Sn++)on[Sn]=0,Dn[Sn]=0,Ln[Sn]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:on,enabledAttributes:Dn,attributeDivisors:Ln,object:Zt,attributes:{},index:null}}function M(Zt,on,Dn,Ln){const Sn=d.attributes,Hn=on.attributes;let Bn=0;const hr=Dn.getAttributes();for(const sr in hr)if(hr[sr].location>=0){const On=Sn[sr];let er=Hn[sr];if(er===void 0&&(sr==="instanceMatrix"&&Zt.instanceMatrix&&(er=Zt.instanceMatrix),sr==="instanceColor"&&Zt.instanceColor&&(er=Zt.instanceColor)),On===void 0||On.attribute!==er||er&&On.data!==er.data)return!0;Bn++}return d.attributesNum!==Bn||d.index!==Ln}function q(Zt,on,Dn,Ln){const Sn={},Hn=on.attributes;let Bn=0;const hr=Dn.getAttributes();for(const sr in hr)if(hr[sr].location>=0){let On=Hn[sr];On===void 0&&(sr==="instanceMatrix"&&Zt.instanceMatrix&&(On=Zt.instanceMatrix),sr==="instanceColor"&&Zt.instanceColor&&(On=Zt.instanceColor));const er={};er.attribute=On,On&&On.data&&(er.data=On.data),Sn[sr]=er,Bn++}d.attributes=Sn,d.attributesNum=Bn,d.index=Ln}function V(){const Zt=d.newAttributes;for(let on=0,Dn=Zt.length;on<Dn;on++)Zt[on]=0}function he(Zt){Re(Zt,0)}function Re(Zt,on){const Dn=d.newAttributes,Ln=d.enabledAttributes,Sn=d.attributeDivisors;Dn[Zt]=1,Ln[Zt]===0&&(s.enableVertexAttribArray(Zt),Ln[Zt]=1),Sn[Zt]!==on&&((n.isWebGL2?s:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Zt,on),Sn[Zt]=on)}function De(){const Zt=d.newAttributes,on=d.enabledAttributes;for(let Dn=0,Ln=on.length;Dn<Ln;Dn++)on[Dn]!==Zt[Dn]&&(s.disableVertexAttribArray(Dn),on[Dn]=0)}function nt(Zt,on,Dn,Ln,Sn,Hn){n.isWebGL2===!0&&(Dn===s.INT||Dn===s.UNSIGNED_INT)?s.vertexAttribIPointer(Zt,on,Dn,Sn,Hn):s.vertexAttribPointer(Zt,on,Dn,Ln,Sn,Hn)}function _t(Zt,on,Dn,Ln){if(n.isWebGL2===!1&&(Zt.isInstancedMesh||Ln.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;V();const Sn=Ln.attributes,Hn=Dn.getAttributes(),Bn=on.defaultAttributeValues;for(const hr in Hn){const sr=Hn[hr];if(sr.location>=0){let fn=Sn[hr];if(fn===void 0&&(hr==="instanceMatrix"&&Zt.instanceMatrix&&(fn=Zt.instanceMatrix),hr==="instanceColor"&&Zt.instanceColor&&(fn=Zt.instanceColor)),fn!==void 0){const On=fn.normalized,er=fn.itemSize,ar=t.get(fn);if(ar===void 0)continue;const bt=ar.buffer,Yr=ar.type,ei=ar.bytesPerElement;if(fn.isInterleavedBufferAttribute){const Kn=fn.data,br=Kn.stride,Nn=fn.offset;if(Kn.isInstancedInterleavedBuffer){for(let vn=0;vn<sr.locationSize;vn++)Re(sr.location+vn,Kn.meshPerAttribute);Zt.isInstancedMesh!==!0&&Ln._maxInstanceCount===void 0&&(Ln._maxInstanceCount=Kn.meshPerAttribute*Kn.count)}else for(let vn=0;vn<sr.locationSize;vn++)he(sr.location+vn);s.bindBuffer(s.ARRAY_BUFFER,bt);for(let vn=0;vn<sr.locationSize;vn++)nt(sr.location+vn,er/sr.locationSize,Yr,On,br*ei,(Nn+er/sr.locationSize*vn)*ei)}else{if(fn.isInstancedBufferAttribute){for(let Kn=0;Kn<sr.locationSize;Kn++)Re(sr.location+Kn,fn.meshPerAttribute);Zt.isInstancedMesh!==!0&&Ln._maxInstanceCount===void 0&&(Ln._maxInstanceCount=fn.meshPerAttribute*fn.count)}else for(let Kn=0;Kn<sr.locationSize;Kn++)he(sr.location+Kn);s.bindBuffer(s.ARRAY_BUFFER,bt);for(let Kn=0;Kn<sr.locationSize;Kn++)nt(sr.location+Kn,er/sr.locationSize,Yr,On,er*ei,er/sr.locationSize*Kn*ei)}}else if(Bn!==void 0){const On=Bn[hr];if(On!==void 0)switch(On.length){case 2:s.vertexAttrib2fv(sr.location,On);break;case 3:s.vertexAttrib3fv(sr.location,On);break;case 4:s.vertexAttrib4fv(sr.location,On);break;default:s.vertexAttrib1fv(sr.location,On)}}}}De()}function se(){gn();for(const Zt in c){const on=c[Zt];for(const Dn in on){const Ln=on[Dn];for(const Sn in Ln)R(Ln[Sn].object),delete Ln[Sn];delete on[Dn]}delete c[Zt]}}function Ue(Zt){if(c[Zt.id]===void 0)return;const on=c[Zt.id];for(const Dn in on){const Ln=on[Dn];for(const Sn in Ln)R(Ln[Sn].object),delete Ln[Sn];delete on[Dn]}delete c[Zt.id]}function Jt(Zt){for(const on in c){const Dn=c[on];if(Dn[Zt.id]===void 0)continue;const Ln=Dn[Zt.id];for(const Sn in Ln)R(Ln[Sn].object),delete Ln[Sn];delete Dn[Zt.id]}}function gn(){Ut(),p=!0,d!==f&&(d=f,b(d.object))}function Ut(){f.geometry=null,f.program=null,f.wireframe=!1}return{setup:_,reset:gn,resetDefaultState:Ut,dispose:se,releaseStatesOfGeometry:Ue,releaseStatesOfProgram:Jt,initAttributes:V,enableAttribute:he,disableUnusedAttributes:De}}function md(s,e,t,n){const r=n.isWebGL2;let o;function l(d){o=d}function c(d,p){s.drawArrays(o,d,p),t.update(p,o,1)}function f(d,p,_){if(_===0)return;let y,b;if(r)y=s,b="drawArraysInstanced";else if(y=e.get("ANGLE_instanced_arrays"),b="drawArraysInstancedANGLE",y===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[b](o,d,p,_),t.update(p,o,_)}this.setMode=l,this.render=c,this.renderInstances=f}function gd(s,e,t){let n;function r(){if(n!==void 0)return n;if(e.has("EXT_texture_filter_anisotropic")===!0){const nt=e.get("EXT_texture_filter_anisotropic");n=s.getParameter(nt.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function o(nt){if(nt==="highp"){if(s.getShaderPrecisionFormat(s.VERTEX_SHADER,s.HIGH_FLOAT).precision>0&&s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT).precision>0)return"highp";nt="mediump"}return nt==="mediump"&&s.getShaderPrecisionFormat(s.VERTEX_SHADER,s.MEDIUM_FLOAT).precision>0&&s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const l=typeof WebGL2RenderingContext!="undefined"&&s.constructor.name==="WebGL2RenderingContext";let c=t.precision!==void 0?t.precision:"highp";const f=o(c);f!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",f,"instead."),c=f);const d=l||e.has("WEBGL_draw_buffers"),p=t.logarithmicDepthBuffer===!0,_=s.getParameter(s.MAX_TEXTURE_IMAGE_UNITS),y=s.getParameter(s.MAX_VERTEX_TEXTURE_IMAGE_UNITS),b=s.getParameter(s.MAX_TEXTURE_SIZE),R=s.getParameter(s.MAX_CUBE_MAP_TEXTURE_SIZE),B=s.getParameter(s.MAX_VERTEX_ATTRIBS),A=s.getParameter(s.MAX_VERTEX_UNIFORM_VECTORS),M=s.getParameter(s.MAX_VARYING_VECTORS),q=s.getParameter(s.MAX_FRAGMENT_UNIFORM_VECTORS),V=y>0,he=l||e.has("OES_texture_float"),Re=V&&he,De=l?s.getParameter(s.MAX_SAMPLES):0;return{isWebGL2:l,drawBuffers:d,getMaxAnisotropy:r,getMaxPrecision:o,precision:c,logarithmicDepthBuffer:p,maxTextures:_,maxVertexTextures:y,maxTextureSize:b,maxCubemapSize:R,maxAttributes:B,maxVertexUniforms:A,maxVaryings:M,maxFragmentUniforms:q,vertexTextures:V,floatFragmentTextures:he,floatVertexTextures:Re,maxSamples:De}}function vd(s){const e=this;let t=null,n=0,r=!1,o=!1;const l=new Vr,c=new Nr,f={value:null,needsUpdate:!1};this.uniform=f,this.numPlanes=0,this.numIntersection=0,this.init=function(_,y){const b=_.length!==0||y||n!==0||r;return r=y,n=_.length,b},this.beginShadows=function(){o=!0,p(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(_,y){t=p(_,y,0)},this.setState=function(_,y,b){const R=_.clippingPlanes,B=_.clipIntersection,A=_.clipShadows,M=s.get(_);if(!r||R===null||R.length===0||o&&!A)o?p(null):d();else{const q=o?0:n,V=q*4;let he=M.clippingState||null;f.value=he,he=p(R,y,V,b);for(let Re=0;Re!==V;++Re)he[Re]=t[Re];M.clippingState=he,this.numIntersection=B?this.numPlanes:0,this.numPlanes+=q}};function d(){f.value!==t&&(f.value=t,f.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function p(_,y,b,R){const B=_!==null?_.length:0;let A=null;if(B!==0){if(A=f.value,R!==!0||A===null){const M=b+B*4,q=y.matrixWorldInverse;c.getNormalMatrix(q),(A===null||A.length<M)&&(A=new Float32Array(M));for(let V=0,he=b;V!==B;++V,he+=4)l.copy(_[V]).applyMatrix4(q,c),l.normal.toArray(A,he),A[he+3]=l.constant}f.value=A,f.needsUpdate=!0}return e.numPlanes=B,e.numIntersection=0,A}}function Cd(s){let e=new WeakMap;function t(l,c){return c===un?l.mapping=wn:c===Tn&&(l.mapping=an),l}function n(l){if(l&&l.isTexture&&l.isRenderTargetTexture===!1){const c=l.mapping;if(c===un||c===Tn)if(e.has(l)){const f=e.get(l).texture;return t(f,l.mapping)}else{const f=l.image;if(f&&f.height>0){const d=new $c(f.height/2);return d.fromEquirectangularTexture(s,l),e.set(l,d),l.addEventListener("dispose",r),t(d.texture,l.mapping)}else return null}}return l}function r(l){const c=l.target;c.removeEventListener("dispose",r);const f=e.get(c);f!==void 0&&(e.delete(c),f.dispose())}function o(){e=new WeakMap}return{get:n,dispose:o}}class ou extends ba{constructor(e=-1,t=1,n=1,r=-1,o=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=o,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,o,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let o=n-e,l=n+e,c=r+t,f=r-t;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=d*this.view.offsetX,l=o+d*this.view.width,c-=p*this.view.offsetY,f=c-p*this.view.height}this.projectionMatrix.makeOrthographic(o,l,c,f,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const wl=4,B0=[.125,.215,.35,.446,.526,.582],F1=20,e0=new ou,U0=new qn;let t0=null;const k1=(1+Math.sqrt(5))/2,bl=1/k1,V0=[new Ee(1,1,1),new Ee(-1,1,1),new Ee(1,1,-1),new Ee(-1,1,-1),new Ee(0,k1,bl),new Ee(0,k1,-bl),new Ee(bl,0,k1),new Ee(-bl,0,k1),new Ee(k1,bl,0),new Ee(-k1,bl,0)];class n0{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){t0=this._renderer.getRenderTarget(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,n,r,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=$0(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=k0(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(t0),e.scissorTest=!1,su(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===wn||e.mapping===an?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),t0=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:dn,minFilter:dn,generateMipmaps:!1,type:It,format:lr,colorSpace:go,depthBuffer:!1},r=F0(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=F0(e,t,n);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_d(o)),this._blurMaterial=yd(o,e,t)}return r}_compileMaterial(e){const t=new fo(this._lodPlanes[0],e);this._renderer.compile(t,e0)}_sceneToCubeUV(e,t,n,r){const c=new Co(90,1,t,n),f=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],p=this._renderer,_=p.autoClear,y=p.toneMapping;p.getClearColor(U0),p.toneMapping=pt,p.autoClear=!1;const b=new ca({name:"PMREM.Background",side:k,depthWrite:!1,depthTest:!1}),R=new fo(new ua,b);let B=!1;const A=e.background;A?A.isColor&&(b.color.copy(A),e.background=null,B=!0):(b.color.copy(U0),B=!0);for(let M=0;M<6;M++){const q=M%3;q===0?(c.up.set(0,f[M],0),c.lookAt(d[M],0,0)):q===1?(c.up.set(0,0,f[M]),c.lookAt(0,d[M],0)):(c.up.set(0,f[M],0),c.lookAt(0,0,d[M]));const V=this._cubeSize;su(r,q*V,M>2?V:0,V,V),p.setRenderTarget(r),B&&p.render(R,c),p.render(e,c)}R.geometry.dispose(),R.material.dispose(),p.toneMapping=y,p.autoClear=_,e.background=A}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===wn||e.mapping===an;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=$0()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=k0());const o=r?this._cubemapMaterial:this._equirectMaterial,l=new fo(this._lodPlanes[0],o),c=o.uniforms;c.envMap.value=e;const f=this._cubeSize;su(t,0,0,3*f,2*f),n.setRenderTarget(t),n.render(l,e0)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const o=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),l=V0[(r-1)%V0.length];this._blur(e,r-1,r,o,l)}t.autoClear=n}_blur(e,t,n,r,o){const l=this._pingPongRenderTarget;this._halfBlur(e,l,t,n,r,"latitudinal",o),this._halfBlur(l,e,n,n,r,"longitudinal",o)}_halfBlur(e,t,n,r,o,l,c){const f=this._renderer,d=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const p=3,_=new fo(this._lodPlanes[r],d),y=d.uniforms,b=this._sizeLods[n]-1,R=isFinite(o)?Math.PI/(2*b):2*Math.PI/(2*F1-1),B=o/R,A=isFinite(o)?1+Math.floor(p*B):F1;A>F1&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${A} samples when the maximum is set to ${F1}`);const M=[];let q=0;for(let nt=0;nt<F1;++nt){const _t=nt/B,se=Math.exp(-_t*_t/2);M.push(se),nt===0?q+=se:nt<A&&(q+=2*se)}for(let nt=0;nt<M.length;nt++)M[nt]=M[nt]/q;y.envMap.value=e.texture,y.samples.value=A,y.weights.value=M,y.latitudinal.value=l==="latitudinal",c&&(y.poleAxis.value=c);const{_lodMax:V}=this;y.dTheta.value=R,y.mipInt.value=V-n;const he=this._sizeLods[r],Re=3*he*(r>V-wl?r-V+wl:0),De=4*(this._cubeSize-he);su(t,Re,De,3*he,2*he),f.setRenderTarget(t),f.render(_,e0)}}function _d(s){const e=[],t=[],n=[];let r=s;const o=s-wl+1+B0.length;for(let l=0;l<o;l++){const c=Math.pow(2,r);t.push(c);let f=1/c;l>s-wl?f=B0[l-s+wl-1]:l===0&&(f=0),n.push(f);const d=1/(c-2),p=-d,_=1+d,y=[p,p,_,p,_,_,p,p,_,_,p,_],b=6,R=6,B=3,A=2,M=1,q=new Float32Array(B*R*b),V=new Float32Array(A*R*b),he=new Float32Array(M*R*b);for(let De=0;De<b;De++){const nt=De%3*2/3-1,_t=De>2?0:-1,se=[nt,_t,0,nt+2/3,_t,0,nt+2/3,_t+1,0,nt,_t,0,nt+2/3,_t+1,0,nt,_t+1,0];q.set(se,B*R*De),V.set(y,A*R*De);const Ue=[De,De,De,De,De,De];he.set(Ue,M*R*De)}const Re=new xn;Re.setAttribute("position",new Vi(q,B)),Re.setAttribute("uv",new Vi(V,A)),Re.setAttribute("faceIndex",new Vi(he,M)),e.push(Re),r>wl&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function F0(s,e,t){const n=new zi(s,e,t);return n.texture.mapping=yt,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function su(s,e,t,n,r){s.viewport.set(e,t,n,r),s.scissor.set(e,t,n,r)}function yd(s,e,t){const n=new Float32Array(F1),r=new Ee(0,1,0);return new ps({name:"SphericalGaussianBlur",defines:{n:F1,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${s}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:r0(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Qt,depthTest:!1,depthWrite:!1})}function k0(){return new ps({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:r0(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Qt,depthTest:!1,depthWrite:!1})}function $0(){return new ps({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:r0(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Qt,depthTest:!1,depthWrite:!1})}function r0(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function xd(s){let e=new WeakMap,t=null;function n(c){if(c&&c.isTexture){const f=c.mapping,d=f===un||f===Tn,p=f===wn||f===an;if(d||p)if(c.isRenderTargetTexture&&c.needsPMREMUpdate===!0){c.needsPMREMUpdate=!1;let _=e.get(c);return t===null&&(t=new n0(s)),_=d?t.fromEquirectangular(c,_):t.fromCubemap(c,_),e.set(c,_),_.texture}else{if(e.has(c))return e.get(c).texture;{const _=c.image;if(d&&_&&_.height>0||p&&_&&r(_)){t===null&&(t=new n0(s));const y=d?t.fromEquirectangular(c):t.fromCubemap(c);return e.set(c,y),c.addEventListener("dispose",o),y.texture}else return null}}}return c}function r(c){let f=0;const d=6;for(let p=0;p<d;p++)c[p]!==void 0&&f++;return f===d}function o(c){const f=c.target;f.removeEventListener("dispose",o);const d=e.get(f);d!==void 0&&(e.delete(f),d.dispose())}function l(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:l}}function wd(s){const e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=s.getExtension("WEBGL_depth_texture")||s.getExtension("MOZ_WEBGL_depth_texture")||s.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=s.getExtension("WEBGL_compressed_texture_s3tc")||s.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||s.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=s.getExtension("WEBGL_compressed_texture_pvrtc")||s.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=s.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const r=t(n);return r===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function bd(s,e,t,n){const r={},o=new WeakMap;function l(_){const y=_.target;y.index!==null&&e.remove(y.index);for(const R in y.attributes)e.remove(y.attributes[R]);y.removeEventListener("dispose",l),delete r[y.id];const b=o.get(y);b&&(e.remove(b),o.delete(y)),n.releaseStatesOfGeometry(y),y.isInstancedBufferGeometry===!0&&delete y._maxInstanceCount,t.memory.geometries--}function c(_,y){return r[y.id]===!0||(y.addEventListener("dispose",l),r[y.id]=!0,t.memory.geometries++),y}function f(_){const y=_.attributes;for(const R in y)e.update(y[R],s.ARRAY_BUFFER);const b=_.morphAttributes;for(const R in b){const B=b[R];for(let A=0,M=B.length;A<M;A++)e.update(B[A],s.ARRAY_BUFFER)}}function d(_){const y=[],b=_.index,R=_.attributes.position;let B=0;if(b!==null){const q=b.array;B=b.version;for(let V=0,he=q.length;V<he;V+=3){const Re=q[V+0],De=q[V+1],nt=q[V+2];y.push(Re,De,De,nt,nt,Re)}}else{const q=R.array;B=R.version;for(let V=0,he=q.length/3-1;V<he;V+=3){const Re=V+0,De=V+1,nt=V+2;y.push(Re,De,De,nt,nt,Re)}}const A=new(ea(y)?il:a1)(y,1);A.version=B;const M=o.get(_);M&&e.remove(M),o.set(_,A)}function p(_){const y=o.get(_);if(y){const b=_.index;b!==null&&y.version<b.version&&d(_)}else d(_);return o.get(_)}return{get:c,update:f,getWireframeAttribute:p}}function Md(s,e,t,n){const r=n.isWebGL2;let o;function l(y){o=y}let c,f;function d(y){c=y.type,f=y.bytesPerElement}function p(y,b){s.drawElements(o,b,c,y*f),t.update(b,o,1)}function _(y,b,R){if(R===0)return;let B,A;if(r)B=s,A="drawElementsInstanced";else if(B=e.get("ANGLE_instanced_arrays"),A="drawElementsInstancedANGLE",B===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}B[A](o,b,c,y*f,R),t.update(b,o,R)}this.setMode=l,this.setIndex=d,this.render=p,this.renderInstances=_}function Ed(s){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(o,l,c){switch(t.calls++,l){case s.TRIANGLES:t.triangles+=c*(o/3);break;case s.LINES:t.lines+=c*(o/2);break;case s.LINE_STRIP:t.lines+=c*(o-1);break;case s.LINE_LOOP:t.lines+=c*o;break;case s.POINTS:t.points+=c*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",l);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}function Sd(s,e){return s[0]-e[0]}function Rd(s,e){return Math.abs(e[1])-Math.abs(s[1])}function Ld(s,e,t){const n={},r=new Float32Array(8),o=new WeakMap,l=new wr,c=[];for(let d=0;d<8;d++)c[d]=[d,0];function f(d,p,_){const y=d.morphTargetInfluences;if(e.isWebGL2===!0){const b=p.morphAttributes.position||p.morphAttributes.normal||p.morphAttributes.color,R=b!==void 0?b.length:0;let B=o.get(p);if(B===void 0||B.count!==R){let Zt=function(){gn.dispose(),o.delete(p),p.removeEventListener("dispose",Zt)};B!==void 0&&B.texture.dispose();const q=p.morphAttributes.position!==void 0,V=p.morphAttributes.normal!==void 0,he=p.morphAttributes.color!==void 0,Re=p.morphAttributes.position||[],De=p.morphAttributes.normal||[],nt=p.morphAttributes.color||[];let _t=0;q===!0&&(_t=1),V===!0&&(_t=2),he===!0&&(_t=3);let se=p.attributes.position.count*_t,Ue=1;se>e.maxTextureSize&&(Ue=Math.ceil(se/e.maxTextureSize),se=e.maxTextureSize);const Jt=new Float32Array(se*Ue*4*R),gn=new wo(Jt,se,Ue,R);gn.type=ct,gn.needsUpdate=!0;const Ut=_t*4;for(let on=0;on<R;on++){const Dn=Re[on],Ln=De[on],Sn=nt[on],Hn=se*Ue*4*on;for(let Bn=0;Bn<Dn.count;Bn++){const hr=Bn*Ut;q===!0&&(l.fromBufferAttribute(Dn,Bn),Jt[Hn+hr+0]=l.x,Jt[Hn+hr+1]=l.y,Jt[Hn+hr+2]=l.z,Jt[Hn+hr+3]=0),V===!0&&(l.fromBufferAttribute(Ln,Bn),Jt[Hn+hr+4]=l.x,Jt[Hn+hr+5]=l.y,Jt[Hn+hr+6]=l.z,Jt[Hn+hr+7]=0),he===!0&&(l.fromBufferAttribute(Sn,Bn),Jt[Hn+hr+8]=l.x,Jt[Hn+hr+9]=l.y,Jt[Hn+hr+10]=l.z,Jt[Hn+hr+11]=Sn.itemSize===4?l.w:1)}}B={count:R,texture:gn,size:new Cn(se,Ue)},o.set(p,B),p.addEventListener("dispose",Zt)}let A=0;for(let q=0;q<y.length;q++)A+=y[q];const M=p.morphTargetsRelative?1:1-A;_.getUniforms().setValue(s,"morphTargetBaseInfluence",M),_.getUniforms().setValue(s,"morphTargetInfluences",y),_.getUniforms().setValue(s,"morphTargetsTexture",B.texture,t),_.getUniforms().setValue(s,"morphTargetsTextureSize",B.size)}else{const b=y===void 0?0:y.length;let R=n[p.id];if(R===void 0||R.length!==b){R=[];for(let V=0;V<b;V++)R[V]=[V,0];n[p.id]=R}for(let V=0;V<b;V++){const he=R[V];he[0]=V,he[1]=y[V]}R.sort(Rd);for(let V=0;V<8;V++)V<b&&R[V][1]?(c[V][0]=R[V][0],c[V][1]=R[V][1]):(c[V][0]=Number.MAX_SAFE_INTEGER,c[V][1]=0);c.sort(Sd);const B=p.morphAttributes.position,A=p.morphAttributes.normal;let M=0;for(let V=0;V<8;V++){const he=c[V],Re=he[0],De=he[1];Re!==Number.MAX_SAFE_INTEGER&&De?(B&&p.getAttribute("morphTarget"+V)!==B[Re]&&p.setAttribute("morphTarget"+V,B[Re]),A&&p.getAttribute("morphNormal"+V)!==A[Re]&&p.setAttribute("morphNormal"+V,A[Re]),r[V]=De,M+=De):(B&&p.hasAttribute("morphTarget"+V)===!0&&p.deleteAttribute("morphTarget"+V),A&&p.hasAttribute("morphNormal"+V)===!0&&p.deleteAttribute("morphNormal"+V),r[V]=0)}const q=p.morphTargetsRelative?1:1-M;_.getUniforms().setValue(s,"morphTargetBaseInfluence",q),_.getUniforms().setValue(s,"morphTargetInfluences",r)}}return{update:f}}function Td(s,e,t,n){let r=new WeakMap;function o(f){const d=n.render.frame,p=f.geometry,_=e.get(f,p);return r.get(_)!==d&&(e.update(_),r.set(_,d)),f.isInstancedMesh&&(f.hasEventListener("dispose",c)===!1&&f.addEventListener("dispose",c),t.update(f.instanceMatrix,s.ARRAY_BUFFER),f.instanceColor!==null&&t.update(f.instanceColor,s.ARRAY_BUFFER)),_}function l(){r=new WeakMap}function c(f){const d=f.target;d.removeEventListener("dispose",c),t.remove(d.instanceMatrix),d.instanceColor!==null&&t.remove(d.instanceColor)}return{update:o,dispose:l}}const j0=new qr,W0=new wo,Z0=new Do,G0=new $a,X0=[],Y0=[],K0=new Float32Array(16),q0=new Float32Array(9),J0=new Float32Array(4);function Ml(s,e,t){const n=s[0];if(n<=0||n>0)return s;const r=e*t;let o=X0[r];if(o===void 0&&(o=new Float32Array(r),X0[r]=o),e!==0){n.toArray(o,0);for(let l=1,c=0;l!==e;++l)c+=t,s[l].toArray(o,c)}return o}function Vo(s,e){if(s.length!==e.length)return!1;for(let t=0,n=s.length;t<n;t++)if(s[t]!==e[t])return!1;return!0}function Fo(s,e){for(let t=0,n=e.length;t<n;t++)s[t]=e[t]}function au(s,e){let t=Y0[e];t===void 0&&(t=new Int32Array(e),Y0[e]=t);for(let n=0;n!==e;++n)t[n]=s.allocateTextureUnit();return t}function Ad(s,e){const t=this.cache;t[0]!==e&&(s.uniform1f(this.addr,e),t[0]=e)}function Pd(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(s.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Vo(t,e))return;s.uniform2fv(this.addr,e),Fo(t,e)}}function Od(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(s.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(s.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Vo(t,e))return;s.uniform3fv(this.addr,e),Fo(t,e)}}function Id(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(s.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Vo(t,e))return;s.uniform4fv(this.addr,e),Fo(t,e)}}function Dd(s,e){const t=this.cache,n=e.elements;if(n===void 0){if(Vo(t,e))return;s.uniformMatrix2fv(this.addr,!1,e),Fo(t,e)}else{if(Vo(t,n))return;J0.set(n),s.uniformMatrix2fv(this.addr,!1,J0),Fo(t,n)}}function Hd(s,e){const t=this.cache,n=e.elements;if(n===void 0){if(Vo(t,e))return;s.uniformMatrix3fv(this.addr,!1,e),Fo(t,e)}else{if(Vo(t,n))return;q0.set(n),s.uniformMatrix3fv(this.addr,!1,q0),Fo(t,n)}}function Nd(s,e){const t=this.cache,n=e.elements;if(n===void 0){if(Vo(t,e))return;s.uniformMatrix4fv(this.addr,!1,e),Fo(t,e)}else{if(Vo(t,n))return;K0.set(n),s.uniformMatrix4fv(this.addr,!1,K0),Fo(t,n)}}function zd(s,e){const t=this.cache;t[0]!==e&&(s.uniform1i(this.addr,e),t[0]=e)}function Bd(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(s.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Vo(t,e))return;s.uniform2iv(this.addr,e),Fo(t,e)}}function Ud(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(s.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Vo(t,e))return;s.uniform3iv(this.addr,e),Fo(t,e)}}function Vd(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(s.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Vo(t,e))return;s.uniform4iv(this.addr,e),Fo(t,e)}}function Fd(s,e){const t=this.cache;t[0]!==e&&(s.uniform1ui(this.addr,e),t[0]=e)}function kd(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(s.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Vo(t,e))return;s.uniform2uiv(this.addr,e),Fo(t,e)}}function $d(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(s.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Vo(t,e))return;s.uniform3uiv(this.addr,e),Fo(t,e)}}function jd(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(s.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Vo(t,e))return;s.uniform4uiv(this.addr,e),Fo(t,e)}}function Q0(s,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(s.uniform1i(this.addr,r),n[0]=r),t.setTexture2D(e||j0,r)}function ef(s,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(s.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||Z0,r)}function Wd(s,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(s.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||G0,r)}function Zd(s,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(s.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||W0,r)}function Gd(s){switch(s){case 5126:return Ad;case 35664:return Pd;case 35665:return Od;case 35666:return Id;case 35674:return Dd;case 35675:return Hd;case 35676:return Nd;case 5124:case 35670:return zd;case 35667:case 35671:return Bd;case 35668:case 35672:return Ud;case 35669:case 35673:return Vd;case 5125:return Fd;case 36294:return kd;case 36295:return $d;case 36296:return jd;case 35678:case 36198:case 36298:case 36306:case 35682:return Q0;case 35679:case 36299:case 36307:return ef;case 35680:case 36300:case 36308:case 36293:return Wd;case 36289:case 36303:case 36311:case 36292:return Zd}}function Xd(s,e){s.uniform1fv(this.addr,e)}function tf(s,e){const t=Ml(e,this.size,2);s.uniform2fv(this.addr,t)}function nf(s,e){const t=Ml(e,this.size,3);s.uniform3fv(this.addr,t)}function Yd(s,e){const t=Ml(e,this.size,4);s.uniform4fv(this.addr,t)}function Kd(s,e){const t=Ml(e,this.size,4);s.uniformMatrix2fv(this.addr,!1,t)}function qd(s,e){const t=Ml(e,this.size,9);s.uniformMatrix3fv(this.addr,!1,t)}function Jd(s,e){const t=Ml(e,this.size,16);s.uniformMatrix4fv(this.addr,!1,t)}function rf(s,e){s.uniform1iv(this.addr,e)}function of(s,e){s.uniform2iv(this.addr,e)}function Qd(s,e){s.uniform3iv(this.addr,e)}function e2(s,e){s.uniform4iv(this.addr,e)}function sf(s,e){s.uniform1uiv(this.addr,e)}function af(s,e){s.uniform2uiv(this.addr,e)}function t2(s,e){s.uniform3uiv(this.addr,e)}function n2(s,e){s.uniform4uiv(this.addr,e)}function r2(s,e,t){const n=this.cache,r=e.length,o=au(t,r);Vo(n,o)||(s.uniform1iv(this.addr,o),Fo(n,o));for(let l=0;l!==r;++l)t.setTexture2D(e[l]||j0,o[l])}function i2(s,e,t){const n=this.cache,r=e.length,o=au(t,r);Vo(n,o)||(s.uniform1iv(this.addr,o),Fo(n,o));for(let l=0;l!==r;++l)t.setTexture3D(e[l]||Z0,o[l])}function o2(s,e,t){const n=this.cache,r=e.length,o=au(t,r);Vo(n,o)||(s.uniform1iv(this.addr,o),Fo(n,o));for(let l=0;l!==r;++l)t.setTextureCube(e[l]||G0,o[l])}function s2(s,e,t){const n=this.cache,r=e.length,o=au(t,r);Vo(n,o)||(s.uniform1iv(this.addr,o),Fo(n,o));for(let l=0;l!==r;++l)t.setTexture2DArray(e[l]||W0,o[l])}function lf(s){switch(s){case 5126:return Xd;case 35664:return tf;case 35665:return nf;case 35666:return Yd;case 35674:return Kd;case 35675:return qd;case 35676:return Jd;case 5124:case 35670:return rf;case 35667:case 35671:return of;case 35668:case 35672:return Qd;case 35669:case 35673:return e2;case 5125:return sf;case 36294:return af;case 36295:return t2;case 36296:return n2;case 35678:case 36198:case 36298:case 36306:case 35682:return r2;case 35679:case 36299:case 36307:return i2;case 35680:case 36300:case 36308:case 36293:return o2;case 36289:case 36303:case 36311:case 36292:return s2}}class cf{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=Gd(t.type)}}class a2{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=lf(t.type)}}class l2{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let o=0,l=r.length;o!==l;++o){const c=r[o];c.setValue(e,t[c.id],n)}}}const i0=/(\w+)(\])?(\[|\.)?/g;function uf(s,e){s.seq.push(e),s.map[e.id]=e}function c2(s,e,t){const n=s.name,r=n.length;for(i0.lastIndex=0;;){const o=i0.exec(n),l=i0.lastIndex;let c=o[1];const f=o[2]==="]",d=o[3];if(f&&(c=c|0),d===void 0||d==="["&&l+2===r){uf(t,d===void 0?new cf(c,s,e):new a2(c,s,e));break}else{let _=t.map[c];_===void 0&&(_=new l2(c),uf(t,_)),t=_}}}class lu{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const o=e.getActiveUniform(t,r),l=e.getUniformLocation(t,o.name);c2(o,l,this)}}setValue(e,t,n,r){const o=this.map[t];o!==void 0&&o.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];r!==void 0&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let o=0,l=t.length;o!==l;++o){const c=t[o],f=n[c.id];f.needsUpdate!==!1&&c.setValue(e,f.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,o=e.length;r!==o;++r){const l=e[r];l.id in t&&n.push(l)}return n}}function ff(s,e,t){const n=s.createShader(e);return s.shaderSource(n,t),s.compileShader(n),n}let u2=0;function f2(s,e){const t=s.split(`
`),n=[],r=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let l=r;l<o;l++){const c=l+1;n.push(`${c===e?">":" "} ${c}: ${t[l]}`)}return n.join(`
`)}function d2(s){switch(s){case go:return["Linear","( value )"];case Sr:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",s),["Linear","( value )"]}}function df(s,e,t){const n=s.getShaderParameter(e,s.COMPILE_STATUS),r=s.getShaderInfoLog(e).trim();if(n&&r==="")return"";const o=/ERROR: 0:(\d+)/.exec(r);if(o){const l=parseInt(o[1]);return t.toUpperCase()+`

`+r+`

`+f2(s.getShaderSource(e),l)}else return r}function h2(s,e){const t=d2(e);return"vec4 "+s+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function p2(s,e){let t;switch(e){case Xe:t="Linear";break;case Be:t="Reinhard";break;case Ct:t="OptimizedCineon";break;case Wt:t="ACESFilmic";break;case Xt:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+s+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function m2(s){return[s.extensionDerivatives||s.envMapCubeUVHeight||s.bumpMap||s.normalMapTangentSpace||s.clearcoatNormalMap||s.flatShading||s.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(s.extensionFragDepth||s.logarithmicDepthBuffer)&&s.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",s.extensionDrawBuffers&&s.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(s.extensionShaderTextureLOD||s.envMap||s.transmission)&&s.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(mc).join(`
`)}function g2(s){const e=[];for(const t in s){const n=s[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function v2(s,e){const t={},n=s.getProgramParameter(e,s.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const o=s.getActiveAttrib(e,r),l=o.name;let c=1;o.type===s.FLOAT_MAT2&&(c=2),o.type===s.FLOAT_MAT3&&(c=3),o.type===s.FLOAT_MAT4&&(c=4),t[l]={type:o.type,location:s.getAttribLocation(e,l),locationSize:c}}return t}function mc(s){return s!==""}function hf(s,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return s.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function pf(s,e){return s.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const C2=/^[ \t]*#include +<([\w\d./]+)>/gm;function o0(s){return s.replace(C2,_2)}function _2(s,e){const t=ui[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return o0(t)}const y2=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function mf(s){return s.replace(y2,ne)}function ne(s,e,t,n){let r="";for(let o=parseInt(e);o<parseInt(t);o++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function fe(s){let e="precision "+s.precision+` float;
precision `+s.precision+" int;";return s.precision==="highp"?e+=`
#define HIGH_PRECISION`:s.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:s.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function re(s){let e="SHADOWMAP_TYPE_BASIC";return s.shadowMapType===ce?e="SHADOWMAP_TYPE_PCF":s.shadowMapType===oe?e="SHADOWMAP_TYPE_PCF_SOFT":s.shadowMapType===xe&&(e="SHADOWMAP_TYPE_VSM"),e}function le(s){let e="ENVMAP_TYPE_CUBE";if(s.envMap)switch(s.envMapMode){case wn:case an:e="ENVMAP_TYPE_CUBE";break;case yt:e="ENVMAP_TYPE_CUBE_UV";break}return e}function ue(s){let e="ENVMAP_MODE_REFLECTION";if(s.envMap)switch(s.envMapMode){case an:e="ENVMAP_MODE_REFRACTION";break}return e}function gc(s){let e="ENVMAP_BLENDING_NONE";if(s.envMap)switch(s.combine){case ot:e="ENVMAP_BLENDING_MULTIPLY";break;case Rt:e="ENVMAP_BLENDING_MIX";break;case Lt:e="ENVMAP_BLENDING_ADD";break}return e}function Gh(s){const e=s.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function Xh(s,e,t,n){const r=s.getContext(),o=t.defines;let l=t.vertexShader,c=t.fragmentShader;const f=re(t),d=le(t),p=ue(t),_=gc(t),y=Gh(t),b=t.isWebGL2?"":m2(t),R=g2(o),B=r.createProgram();let A,M,q=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(A=[R].filter(mc).join(`
`),A.length>0&&(A+=`
`),M=[b,R].filter(mc).join(`
`),M.length>0&&(M+=`
`)):(A=[fe(t),"#define SHADER_NAME "+t.shaderName,R,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(mc).join(`
`),M=[b,fe(t),"#define SHADER_NAME "+t.shaderName,R,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.envMap?"#define "+p:"",t.envMap?"#define "+_:"",y?"#define CUBEUV_TEXEL_WIDTH "+y.texelWidth:"",y?"#define CUBEUV_TEXEL_HEIGHT "+y.texelHeight:"",y?"#define CUBEUV_MAX_MIP "+y.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==pt?"#define TONE_MAPPING":"",t.toneMapping!==pt?ui.tonemapping_pars_fragment:"",t.toneMapping!==pt?p2("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ui.encodings_pars_fragment,h2("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(mc).join(`
`)),l=o0(l),l=hf(l,t),l=pf(l,t),c=o0(c),c=hf(c,t),c=pf(c,t),l=mf(l),c=mf(c),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(q=`#version 300 es
`,A=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+A,M=["#define varying in",t.glslVersion===Mi?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Mi?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+M);const V=q+A+l,he=q+M+c,Re=ff(r,r.VERTEX_SHADER,V),De=ff(r,r.FRAGMENT_SHADER,he);if(r.attachShader(B,Re),r.attachShader(B,De),t.index0AttributeName!==void 0?r.bindAttribLocation(B,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(B,0,"position"),r.linkProgram(B),s.debug.checkShaderErrors){const se=r.getProgramInfoLog(B).trim(),Ue=r.getShaderInfoLog(Re).trim(),Jt=r.getShaderInfoLog(De).trim();let gn=!0,Ut=!0;if(r.getProgramParameter(B,r.LINK_STATUS)===!1)if(gn=!1,typeof s.debug.onShaderError=="function")s.debug.onShaderError(r,B,Re,De);else{const Zt=df(r,Re,"vertex"),on=df(r,De,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(B,r.VALIDATE_STATUS)+`

Program Info Log: `+se+`
`+Zt+`
`+on)}else se!==""?console.warn("THREE.WebGLProgram: Program Info Log:",se):(Ue===""||Jt==="")&&(Ut=!1);Ut&&(this.diagnostics={runnable:gn,programLog:se,vertexShader:{log:Ue,prefix:A},fragmentShader:{log:Jt,prefix:M}})}r.deleteShader(Re),r.deleteShader(De);let nt;this.getUniforms=function(){return nt===void 0&&(nt=new lu(r,B)),nt};let _t;return this.getAttributes=function(){return _t===void 0&&(_t=v2(r,B)),_t},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(B),this.program=void 0},this.name=t.shaderName,this.id=u2++,this.cacheKey=e,this.usedTimes=1,this.program=B,this.vertexShader=Re,this.fragmentShader=De,this}let Yh=0;class Kh{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),o=this._getShaderStage(n),l=this._getShaderCacheForMaterial(e);return l.has(r)===!1&&(l.add(r),r.usedTimes++),l.has(o)===!1&&(l.add(o),o.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new qh(e),t.set(e,n)),n}}class qh{constructor(e){this.id=Yh++,this.code=e,this.usedTimes=0}}function Jh(s,e,t,n,r,o,l){const c=new S1,f=new Kh,d=[],p=r.isWebGL2,_=r.logarithmicDepthBuffer,y=r.vertexTextures;let b=r.precision;const R={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function B(se){return se===1?"uv1":se===2?"uv2":se===3?"uv3":"uv"}function A(se,Ue,Jt,gn,Ut){const Zt=gn.fog,on=Ut.geometry,Dn=se.isMeshStandardMaterial?gn.environment:null,Ln=(se.isMeshStandardMaterial?t:e).get(se.envMap||Dn),Sn=Ln&&Ln.mapping===yt?Ln.image.height:null,Hn=R[se.type];se.precision!==null&&(b=r.getMaxPrecision(se.precision),b!==se.precision&&console.warn("THREE.WebGLProgram.getParameters:",se.precision,"not supported, using",b,"instead."));const Bn=on.morphAttributes.position||on.morphAttributes.normal||on.morphAttributes.color,hr=Bn!==void 0?Bn.length:0;let sr=0;on.morphAttributes.position!==void 0&&(sr=1),on.morphAttributes.normal!==void 0&&(sr=2),on.morphAttributes.color!==void 0&&(sr=3);let fn,On,er,ar;if(Hn){const Yi=da[Hn];fn=Yi.vertexShader,On=Yi.fragmentShader}else fn=se.vertexShader,On=se.fragmentShader,f.update(se),er=f.getVertexShaderID(se),ar=f.getFragmentShaderID(se);const bt=s.getRenderTarget(),Yr=Ut.isInstancedMesh===!0,ei=!!se.map,Kn=!!se.matcap,br=!!Ln,Nn=!!se.aoMap,vn=!!se.lightMap,zn=!!se.bumpMap,mr=!!se.normalMap,rr=!!se.displacementMap,Fr=!!se.emissiveMap,kr=!!se.metalnessMap,Ir=!!se.roughnessMap,vi=se.clearcoat>0,Bi=se.iridescence>0,je=se.sheen>0,Le=se.transmission>0,nn=vi&&!!se.clearcoatMap,Un=vi&&!!se.clearcoatNormalMap,Wn=vi&&!!se.clearcoatRoughnessMap,or=Bi&&!!se.iridescenceMap,Zr=Bi&&!!se.iridescenceThicknessMap,pr=je&&!!se.sheenColorMap,mn=je&&!!se.sheenRoughnessMap,xr=!!se.specularMap,Dr=!!se.specularColorMap,$r=!!se.specularIntensityMap,gr=Le&&!!se.transmissionMap,Lr=Le&&!!se.thicknessMap,Li=!!se.gradientMap,Zi=!!se.alphaMap,So=se.alphaTest>0,Mt=!!se.extensions,hn=!!on.attributes.uv1,Fn=!!on.attributes.uv2,fr=!!on.attributes.uv3;return{isWebGL2:p,shaderID:Hn,shaderName:se.type,vertexShader:fn,fragmentShader:On,defines:se.defines,customVertexShaderID:er,customFragmentShaderID:ar,isRawShaderMaterial:se.isRawShaderMaterial===!0,glslVersion:se.glslVersion,precision:b,instancing:Yr,instancingColor:Yr&&Ut.instanceColor!==null,supportsVertexTextures:y,outputColorSpace:bt===null?s.outputColorSpace:bt.isXRRenderTarget===!0?bt.texture.colorSpace:go,map:ei,matcap:Kn,envMap:br,envMapMode:br&&Ln.mapping,envMapCubeUVHeight:Sn,aoMap:Nn,lightMap:vn,bumpMap:zn,normalMap:mr,displacementMap:y&&rr,emissiveMap:Fr,normalMapObjectSpace:mr&&se.normalMapType===us,normalMapTangentSpace:mr&&se.normalMapType===Br,metalnessMap:kr,roughnessMap:Ir,clearcoat:vi,clearcoatMap:nn,clearcoatNormalMap:Un,clearcoatRoughnessMap:Wn,iridescence:Bi,iridescenceMap:or,iridescenceThicknessMap:Zr,sheen:je,sheenColorMap:pr,sheenRoughnessMap:mn,specularMap:xr,specularColorMap:Dr,specularIntensityMap:$r,transmission:Le,transmissionMap:gr,thicknessMap:Lr,gradientMap:Li,opaque:se.transparent===!1&&se.blending===mt,alphaMap:Zi,alphaTest:So,combine:se.combine,mapUv:ei&&B(se.map.channel),aoMapUv:Nn&&B(se.aoMap.channel),lightMapUv:vn&&B(se.lightMap.channel),bumpMapUv:zn&&B(se.bumpMap.channel),normalMapUv:mr&&B(se.normalMap.channel),displacementMapUv:rr&&B(se.displacementMap.channel),emissiveMapUv:Fr&&B(se.emissiveMap.channel),metalnessMapUv:kr&&B(se.metalnessMap.channel),roughnessMapUv:Ir&&B(se.roughnessMap.channel),clearcoatMapUv:nn&&B(se.clearcoatMap.channel),clearcoatNormalMapUv:Un&&B(se.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Wn&&B(se.clearcoatRoughnessMap.channel),iridescenceMapUv:or&&B(se.iridescenceMap.channel),iridescenceThicknessMapUv:Zr&&B(se.iridescenceThicknessMap.channel),sheenColorMapUv:pr&&B(se.sheenColorMap.channel),sheenRoughnessMapUv:mn&&B(se.sheenRoughnessMap.channel),specularMapUv:xr&&B(se.specularMap.channel),specularColorMapUv:Dr&&B(se.specularColorMap.channel),specularIntensityMapUv:$r&&B(se.specularIntensityMap.channel),transmissionMapUv:gr&&B(se.transmissionMap.channel),thicknessMapUv:Lr&&B(se.thicknessMap.channel),alphaMapUv:Zi&&B(se.alphaMap.channel),vertexTangents:mr&&!!on.attributes.tangent,vertexColors:se.vertexColors,vertexAlphas:se.vertexColors===!0&&!!on.attributes.color&&on.attributes.color.itemSize===4,vertexUv1s:hn,vertexUv2s:Fn,vertexUv3s:fr,pointsUvs:Ut.isPoints===!0&&!!on.attributes.uv&&(ei||Zi),fog:!!Zt,useFog:se.fog===!0,fogExp2:Zt&&Zt.isFogExp2,flatShading:se.flatShading===!0,sizeAttenuation:se.sizeAttenuation===!0,logarithmicDepthBuffer:_,skinning:Ut.isSkinnedMesh===!0,morphTargets:on.morphAttributes.position!==void 0,morphNormals:on.morphAttributes.normal!==void 0,morphColors:on.morphAttributes.color!==void 0,morphTargetsCount:hr,morphTextureStride:sr,numDirLights:Ue.directional.length,numPointLights:Ue.point.length,numSpotLights:Ue.spot.length,numSpotLightMaps:Ue.spotLightMap.length,numRectAreaLights:Ue.rectArea.length,numHemiLights:Ue.hemi.length,numDirLightShadows:Ue.directionalShadowMap.length,numPointLightShadows:Ue.pointShadowMap.length,numSpotLightShadows:Ue.spotShadowMap.length,numSpotLightShadowsWithMaps:Ue.numSpotLightShadowsWithMaps,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:se.dithering,shadowMapEnabled:s.shadowMap.enabled&&Jt.length>0,shadowMapType:s.shadowMap.type,toneMapping:se.toneMapped?s.toneMapping:pt,useLegacyLights:s.useLegacyLights,premultipliedAlpha:se.premultipliedAlpha,doubleSided:se.side===rt,flipSided:se.side===k,useDepthPacking:se.depthPacking>=0,depthPacking:se.depthPacking||0,index0AttributeName:se.index0AttributeName,extensionDerivatives:Mt&&se.extensions.derivatives===!0,extensionFragDepth:Mt&&se.extensions.fragDepth===!0,extensionDrawBuffers:Mt&&se.extensions.drawBuffers===!0,extensionShaderTextureLOD:Mt&&se.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:p||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:p||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:p||n.has("EXT_shader_texture_lod"),customProgramCacheKey:se.customProgramCacheKey()}}function M(se){const Ue=[];if(se.shaderID?Ue.push(se.shaderID):(Ue.push(se.customVertexShaderID),Ue.push(se.customFragmentShaderID)),se.defines!==void 0)for(const Jt in se.defines)Ue.push(Jt),Ue.push(se.defines[Jt]);return se.isRawShaderMaterial===!1&&(q(Ue,se),V(Ue,se),Ue.push(s.outputColorSpace)),Ue.push(se.customProgramCacheKey),Ue.join()}function q(se,Ue){se.push(Ue.precision),se.push(Ue.outputColorSpace),se.push(Ue.envMapMode),se.push(Ue.envMapCubeUVHeight),se.push(Ue.mapUv),se.push(Ue.alphaMapUv),se.push(Ue.lightMapUv),se.push(Ue.aoMapUv),se.push(Ue.bumpMapUv),se.push(Ue.normalMapUv),se.push(Ue.displacementMapUv),se.push(Ue.emissiveMapUv),se.push(Ue.metalnessMapUv),se.push(Ue.roughnessMapUv),se.push(Ue.clearcoatMapUv),se.push(Ue.clearcoatNormalMapUv),se.push(Ue.clearcoatRoughnessMapUv),se.push(Ue.iridescenceMapUv),se.push(Ue.iridescenceThicknessMapUv),se.push(Ue.sheenColorMapUv),se.push(Ue.sheenRoughnessMapUv),se.push(Ue.specularMapUv),se.push(Ue.specularColorMapUv),se.push(Ue.specularIntensityMapUv),se.push(Ue.transmissionMapUv),se.push(Ue.thicknessMapUv),se.push(Ue.combine),se.push(Ue.fogExp2),se.push(Ue.sizeAttenuation),se.push(Ue.morphTargetsCount),se.push(Ue.morphAttributeCount),se.push(Ue.numDirLights),se.push(Ue.numPointLights),se.push(Ue.numSpotLights),se.push(Ue.numSpotLightMaps),se.push(Ue.numHemiLights),se.push(Ue.numRectAreaLights),se.push(Ue.numDirLightShadows),se.push(Ue.numPointLightShadows),se.push(Ue.numSpotLightShadows),se.push(Ue.numSpotLightShadowsWithMaps),se.push(Ue.shadowMapType),se.push(Ue.toneMapping),se.push(Ue.numClippingPlanes),se.push(Ue.numClipIntersection),se.push(Ue.depthPacking)}function V(se,Ue){c.disableAll(),Ue.isWebGL2&&c.enable(0),Ue.supportsVertexTextures&&c.enable(1),Ue.instancing&&c.enable(2),Ue.instancingColor&&c.enable(3),Ue.matcap&&c.enable(4),Ue.envMap&&c.enable(5),Ue.normalMapObjectSpace&&c.enable(6),Ue.normalMapTangentSpace&&c.enable(7),Ue.clearcoat&&c.enable(8),Ue.iridescence&&c.enable(9),Ue.alphaTest&&c.enable(10),Ue.vertexColors&&c.enable(11),Ue.vertexAlphas&&c.enable(12),Ue.vertexUv1s&&c.enable(13),Ue.vertexUv2s&&c.enable(14),Ue.vertexUv3s&&c.enable(15),Ue.vertexTangents&&c.enable(16),se.push(c.mask),c.disableAll(),Ue.fog&&c.enable(0),Ue.useFog&&c.enable(1),Ue.flatShading&&c.enable(2),Ue.logarithmicDepthBuffer&&c.enable(3),Ue.skinning&&c.enable(4),Ue.morphTargets&&c.enable(5),Ue.morphNormals&&c.enable(6),Ue.morphColors&&c.enable(7),Ue.premultipliedAlpha&&c.enable(8),Ue.shadowMapEnabled&&c.enable(9),Ue.useLegacyLights&&c.enable(10),Ue.doubleSided&&c.enable(11),Ue.flipSided&&c.enable(12),Ue.useDepthPacking&&c.enable(13),Ue.dithering&&c.enable(14),Ue.transmission&&c.enable(15),Ue.sheen&&c.enable(16),Ue.opaque&&c.enable(17),Ue.pointsUvs&&c.enable(18),se.push(c.mask)}function he(se){const Ue=R[se.type];let Jt;if(Ue){const gn=da[Ue];Jt=N1.clone(gn.uniforms)}else Jt=se.uniforms;return Jt}function Re(se,Ue){let Jt;for(let gn=0,Ut=d.length;gn<Ut;gn++){const Zt=d[gn];if(Zt.cacheKey===Ue){Jt=Zt,++Jt.usedTimes;break}}return Jt===void 0&&(Jt=new Xh(s,Ue,se,o),d.push(Jt)),Jt}function De(se){if(--se.usedTimes===0){const Ue=d.indexOf(se);d[Ue]=d[d.length-1],d.pop(),se.destroy()}}function nt(se){f.remove(se)}function _t(){f.dispose()}return{getParameters:A,getProgramCacheKey:M,getUniforms:he,acquireProgram:Re,releaseProgram:De,releaseShaderCache:nt,programs:d,dispose:_t}}function Qh(){let s=new WeakMap;function e(o){let l=s.get(o);return l===void 0&&(l={},s.set(o,l)),l}function t(o){s.delete(o)}function n(o,l,c){s.get(o)[l]=c}function r(){s=new WeakMap}return{get:e,remove:t,update:n,dispose:r}}function e5(s,e){return s.groupOrder!==e.groupOrder?s.groupOrder-e.groupOrder:s.renderOrder!==e.renderOrder?s.renderOrder-e.renderOrder:s.material.id!==e.material.id?s.material.id-e.material.id:s.z!==e.z?s.z-e.z:s.id-e.id}function x2(s,e){return s.groupOrder!==e.groupOrder?s.groupOrder-e.groupOrder:s.renderOrder!==e.renderOrder?s.renderOrder-e.renderOrder:s.z!==e.z?e.z-s.z:s.id-e.id}function w2(){const s=[];let e=0;const t=[],n=[],r=[];function o(){e=0,t.length=0,n.length=0,r.length=0}function l(_,y,b,R,B,A){let M=s[e];return M===void 0?(M={id:_.id,object:_,geometry:y,material:b,groupOrder:R,renderOrder:_.renderOrder,z:B,group:A},s[e]=M):(M.id=_.id,M.object=_,M.geometry=y,M.material=b,M.groupOrder=R,M.renderOrder=_.renderOrder,M.z=B,M.group=A),e++,M}function c(_,y,b,R,B,A){const M=l(_,y,b,R,B,A);b.transmission>0?n.push(M):b.transparent===!0?r.push(M):t.push(M)}function f(_,y,b,R,B,A){const M=l(_,y,b,R,B,A);b.transmission>0?n.unshift(M):b.transparent===!0?r.unshift(M):t.unshift(M)}function d(_,y){t.length>1&&t.sort(_||e5),n.length>1&&n.sort(y||x2),r.length>1&&r.sort(y||x2)}function p(){for(let _=e,y=s.length;_<y;_++){const b=s[_];if(b.id===null)break;b.id=null,b.object=null,b.geometry=null,b.material=null,b.group=null}}return{opaque:t,transmissive:n,transparent:r,init:o,push:c,unshift:f,finish:p,sort:d}}function t5(){let s=new WeakMap;function e(n,r){const o=s.get(n);let l;return o===void 0?(l=new w2,s.set(n,[l])):r>=o.length?(l=new w2,o.push(l)):l=o[r],l}function t(){s=new WeakMap}return{get:e,dispose:t}}function n5(){const s={};return{get:function(e){if(s[e.id]!==void 0)return s[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Ee,color:new qn};break;case"SpotLight":t={position:new Ee,direction:new Ee,color:new qn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Ee,color:new qn,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Ee,skyColor:new qn,groundColor:new qn};break;case"RectAreaLight":t={color:new qn,position:new Ee,halfWidth:new Ee,halfHeight:new Ee};break}return s[e.id]=t,t}}}function r5(){const s={};return{get:function(e){if(s[e.id]!==void 0)return s[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Cn};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Cn};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Cn,shadowCameraNear:1,shadowCameraFar:1e3};break}return s[e.id]=t,t}}}let i5=0;function o5(s,e){return(e.castShadow?2:0)-(s.castShadow?2:0)+(e.map?1:0)-(s.map?1:0)}function s5(s,e){const t=new n5,n=r5(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let p=0;p<9;p++)r.probe.push(new Ee);const o=new Ee,l=new Ur,c=new Ur;function f(p,_){let y=0,b=0,R=0;for(let Jt=0;Jt<9;Jt++)r.probe[Jt].set(0,0,0);let B=0,A=0,M=0,q=0,V=0,he=0,Re=0,De=0,nt=0,_t=0;p.sort(o5);const se=_===!0?Math.PI:1;for(let Jt=0,gn=p.length;Jt<gn;Jt++){const Ut=p[Jt],Zt=Ut.color,on=Ut.intensity,Dn=Ut.distance,Ln=Ut.shadow&&Ut.shadow.map?Ut.shadow.map.texture:null;if(Ut.isAmbientLight)y+=Zt.r*on*se,b+=Zt.g*on*se,R+=Zt.b*on*se;else if(Ut.isLightProbe)for(let Sn=0;Sn<9;Sn++)r.probe[Sn].addScaledVector(Ut.sh.coefficients[Sn],on);else if(Ut.isDirectionalLight){const Sn=t.get(Ut);if(Sn.color.copy(Ut.color).multiplyScalar(Ut.intensity*se),Ut.castShadow){const Hn=Ut.shadow,Bn=n.get(Ut);Bn.shadowBias=Hn.bias,Bn.shadowNormalBias=Hn.normalBias,Bn.shadowRadius=Hn.radius,Bn.shadowMapSize=Hn.mapSize,r.directionalShadow[B]=Bn,r.directionalShadowMap[B]=Ln,r.directionalShadowMatrix[B]=Ut.shadow.matrix,he++}r.directional[B]=Sn,B++}else if(Ut.isSpotLight){const Sn=t.get(Ut);Sn.position.setFromMatrixPosition(Ut.matrixWorld),Sn.color.copy(Zt).multiplyScalar(on*se),Sn.distance=Dn,Sn.coneCos=Math.cos(Ut.angle),Sn.penumbraCos=Math.cos(Ut.angle*(1-Ut.penumbra)),Sn.decay=Ut.decay,r.spot[M]=Sn;const Hn=Ut.shadow;if(Ut.map&&(r.spotLightMap[nt]=Ut.map,nt++,Hn.updateMatrices(Ut),Ut.castShadow&&_t++),r.spotLightMatrix[M]=Hn.matrix,Ut.castShadow){const Bn=n.get(Ut);Bn.shadowBias=Hn.bias,Bn.shadowNormalBias=Hn.normalBias,Bn.shadowRadius=Hn.radius,Bn.shadowMapSize=Hn.mapSize,r.spotShadow[M]=Bn,r.spotShadowMap[M]=Ln,De++}M++}else if(Ut.isRectAreaLight){const Sn=t.get(Ut);Sn.color.copy(Zt).multiplyScalar(on),Sn.halfWidth.set(Ut.width*.5,0,0),Sn.halfHeight.set(0,Ut.height*.5,0),r.rectArea[q]=Sn,q++}else if(Ut.isPointLight){const Sn=t.get(Ut);if(Sn.color.copy(Ut.color).multiplyScalar(Ut.intensity*se),Sn.distance=Ut.distance,Sn.decay=Ut.decay,Ut.castShadow){const Hn=Ut.shadow,Bn=n.get(Ut);Bn.shadowBias=Hn.bias,Bn.shadowNormalBias=Hn.normalBias,Bn.shadowRadius=Hn.radius,Bn.shadowMapSize=Hn.mapSize,Bn.shadowCameraNear=Hn.camera.near,Bn.shadowCameraFar=Hn.camera.far,r.pointShadow[A]=Bn,r.pointShadowMap[A]=Ln,r.pointShadowMatrix[A]=Ut.shadow.matrix,Re++}r.point[A]=Sn,A++}else if(Ut.isHemisphereLight){const Sn=t.get(Ut);Sn.skyColor.copy(Ut.color).multiplyScalar(on*se),Sn.groundColor.copy(Ut.groundColor).multiplyScalar(on*se),r.hemi[V]=Sn,V++}}q>0&&(e.isWebGL2||s.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Jn.LTC_FLOAT_1,r.rectAreaLTC2=Jn.LTC_FLOAT_2):s.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Jn.LTC_HALF_1,r.rectAreaLTC2=Jn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=y,r.ambient[1]=b,r.ambient[2]=R;const Ue=r.hash;(Ue.directionalLength!==B||Ue.pointLength!==A||Ue.spotLength!==M||Ue.rectAreaLength!==q||Ue.hemiLength!==V||Ue.numDirectionalShadows!==he||Ue.numPointShadows!==Re||Ue.numSpotShadows!==De||Ue.numSpotMaps!==nt)&&(r.directional.length=B,r.spot.length=M,r.rectArea.length=q,r.point.length=A,r.hemi.length=V,r.directionalShadow.length=he,r.directionalShadowMap.length=he,r.pointShadow.length=Re,r.pointShadowMap.length=Re,r.spotShadow.length=De,r.spotShadowMap.length=De,r.directionalShadowMatrix.length=he,r.pointShadowMatrix.length=Re,r.spotLightMatrix.length=De+nt-_t,r.spotLightMap.length=nt,r.numSpotLightShadowsWithMaps=_t,Ue.directionalLength=B,Ue.pointLength=A,Ue.spotLength=M,Ue.rectAreaLength=q,Ue.hemiLength=V,Ue.numDirectionalShadows=he,Ue.numPointShadows=Re,Ue.numSpotShadows=De,Ue.numSpotMaps=nt,r.version=i5++)}function d(p,_){let y=0,b=0,R=0,B=0,A=0;const M=_.matrixWorldInverse;for(let q=0,V=p.length;q<V;q++){const he=p[q];if(he.isDirectionalLight){const Re=r.directional[y];Re.direction.setFromMatrixPosition(he.matrixWorld),o.setFromMatrixPosition(he.target.matrixWorld),Re.direction.sub(o),Re.direction.transformDirection(M),y++}else if(he.isSpotLight){const Re=r.spot[R];Re.position.setFromMatrixPosition(he.matrixWorld),Re.position.applyMatrix4(M),Re.direction.setFromMatrixPosition(he.matrixWorld),o.setFromMatrixPosition(he.target.matrixWorld),Re.direction.sub(o),Re.direction.transformDirection(M),R++}else if(he.isRectAreaLight){const Re=r.rectArea[B];Re.position.setFromMatrixPosition(he.matrixWorld),Re.position.applyMatrix4(M),c.identity(),l.copy(he.matrixWorld),l.premultiply(M),c.extractRotation(l),Re.halfWidth.set(he.width*.5,0,0),Re.halfHeight.set(0,he.height*.5,0),Re.halfWidth.applyMatrix4(c),Re.halfHeight.applyMatrix4(c),B++}else if(he.isPointLight){const Re=r.point[b];Re.position.setFromMatrixPosition(he.matrixWorld),Re.position.applyMatrix4(M),b++}else if(he.isHemisphereLight){const Re=r.hemi[A];Re.direction.setFromMatrixPosition(he.matrixWorld),Re.direction.transformDirection(M),A++}}}return{setup:f,setupView:d,state:r}}function b2(s,e){const t=new s5(s,e),n=[],r=[];function o(){n.length=0,r.length=0}function l(_){n.push(_)}function c(_){r.push(_)}function f(_){t.setup(n,_)}function d(_){t.setupView(n,_)}return{init:o,state:{lightsArray:n,shadowsArray:r,lights:t},setupLights:f,setupLightsView:d,pushLight:l,pushShadow:c}}function a5(s,e){let t=new WeakMap;function n(o,l=0){const c=t.get(o);let f;return c===void 0?(f=new b2(s,e),t.set(o,[f])):l>=c.length?(f=new b2(s,e),c.push(f)):f=c[l],f}function r(){t=new WeakMap}return{get:n,dispose:r}}class gf extends Uo{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Ao,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class vf extends Uo{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const l5=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,c5=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function u5(s,e,t){let n=new ho;const r=new Cn,o=new Cn,l=new wr,c=new gf({depthPacking:es}),f=new vf,d={},p=t.maxTextureSize,_={[Se]:k,[k]:Se,[rt]:rt},y=new ps({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Cn},radius:{value:4}},vertexShader:l5,fragmentShader:c5}),b=y.clone();b.defines.HORIZONTAL_PASS=1;const R=new xn;R.setAttribute("position",new Vi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const B=new fo(R,y),A=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ce;let M=this.type;this.render=function(Re,De,nt){if(A.enabled===!1||A.autoUpdate===!1&&A.needsUpdate===!1||Re.length===0)return;const _t=s.getRenderTarget(),se=s.getActiveCubeFace(),Ue=s.getActiveMipmapLevel(),Jt=s.state;Jt.setBlending(Qt),Jt.buffers.color.setClear(1,1,1,1),Jt.buffers.depth.setTest(!0),Jt.setScissorTest(!1);const gn=M!==xe&&this.type===xe,Ut=M===xe&&this.type!==xe;for(let Zt=0,on=Re.length;Zt<on;Zt++){const Dn=Re[Zt],Ln=Dn.shadow;if(Ln===void 0){console.warn("THREE.WebGLShadowMap:",Dn,"has no shadow.");continue}if(Ln.autoUpdate===!1&&Ln.needsUpdate===!1)continue;r.copy(Ln.mapSize);const Sn=Ln.getFrameExtents();if(r.multiply(Sn),o.copy(Ln.mapSize),(r.x>p||r.y>p)&&(r.x>p&&(o.x=Math.floor(p/Sn.x),r.x=o.x*Sn.x,Ln.mapSize.x=o.x),r.y>p&&(o.y=Math.floor(p/Sn.y),r.y=o.y*Sn.y,Ln.mapSize.y=o.y)),Ln.map===null||gn===!0||Ut===!0){const Bn=this.type!==xe?{minFilter:Ze,magFilter:Ze}:{};Ln.map!==null&&Ln.map.dispose(),Ln.map=new zi(r.x,r.y,Bn),Ln.map.texture.name=Dn.name+".shadowMap",Ln.camera.updateProjectionMatrix()}s.setRenderTarget(Ln.map),s.clear();const Hn=Ln.getViewportCount();for(let Bn=0;Bn<Hn;Bn++){const hr=Ln.getViewport(Bn);l.set(o.x*hr.x,o.y*hr.y,o.x*hr.z,o.y*hr.w),Jt.viewport(l),Ln.updateMatrices(Dn,Bn),n=Ln.getFrustum(),he(De,nt,Ln.camera,Dn,this.type)}Ln.isPointLightShadow!==!0&&this.type===xe&&q(Ln,nt),Ln.needsUpdate=!1}M=this.type,A.needsUpdate=!1,s.setRenderTarget(_t,se,Ue)};function q(Re,De){const nt=e.update(B);y.defines.VSM_SAMPLES!==Re.blurSamples&&(y.defines.VSM_SAMPLES=Re.blurSamples,b.defines.VSM_SAMPLES=Re.blurSamples,y.needsUpdate=!0,b.needsUpdate=!0),Re.mapPass===null&&(Re.mapPass=new zi(r.x,r.y)),y.uniforms.shadow_pass.value=Re.map.texture,y.uniforms.resolution.value=Re.mapSize,y.uniforms.radius.value=Re.radius,s.setRenderTarget(Re.mapPass),s.clear(),s.renderBufferDirect(De,null,nt,y,B,null),b.uniforms.shadow_pass.value=Re.mapPass.texture,b.uniforms.resolution.value=Re.mapSize,b.uniforms.radius.value=Re.radius,s.setRenderTarget(Re.map),s.clear(),s.renderBufferDirect(De,null,nt,b,B,null)}function V(Re,De,nt,_t){let se=null;const Ue=nt.isPointLight===!0?Re.customDistanceMaterial:Re.customDepthMaterial;if(Ue!==void 0)se=Ue;else if(se=nt.isPointLight===!0?f:c,s.localClippingEnabled&&De.clipShadows===!0&&Array.isArray(De.clippingPlanes)&&De.clippingPlanes.length!==0||De.displacementMap&&De.displacementScale!==0||De.alphaMap&&De.alphaTest>0||De.map&&De.alphaTest>0){const Jt=se.uuid,gn=De.uuid;let Ut=d[Jt];Ut===void 0&&(Ut={},d[Jt]=Ut);let Zt=Ut[gn];Zt===void 0&&(Zt=se.clone(),Ut[gn]=Zt),se=Zt}if(se.visible=De.visible,se.wireframe=De.wireframe,_t===xe?se.side=De.shadowSide!==null?De.shadowSide:De.side:se.side=De.shadowSide!==null?De.shadowSide:_[De.side],se.alphaMap=De.alphaMap,se.alphaTest=De.alphaTest,se.map=De.map,se.clipShadows=De.clipShadows,se.clippingPlanes=De.clippingPlanes,se.clipIntersection=De.clipIntersection,se.displacementMap=De.displacementMap,se.displacementScale=De.displacementScale,se.displacementBias=De.displacementBias,se.wireframeLinewidth=De.wireframeLinewidth,se.linewidth=De.linewidth,nt.isPointLight===!0&&se.isMeshDistanceMaterial===!0){const Jt=s.properties.get(se);Jt.light=nt}return se}function he(Re,De,nt,_t,se){if(Re.visible===!1)return;if(Re.layers.test(De.layers)&&(Re.isMesh||Re.isLine||Re.isPoints)&&(Re.castShadow||Re.receiveShadow&&se===xe)&&(!Re.frustumCulled||n.intersectsObject(Re))){Re.modelViewMatrix.multiplyMatrices(nt.matrixWorldInverse,Re.matrixWorld);const gn=e.update(Re),Ut=Re.material;if(Array.isArray(Ut)){const Zt=gn.groups;for(let on=0,Dn=Zt.length;on<Dn;on++){const Ln=Zt[on],Sn=Ut[Ln.materialIndex];if(Sn&&Sn.visible){const Hn=V(Re,Sn,_t,se);s.renderBufferDirect(nt,null,gn,Hn,Re,Ln)}}}else if(Ut.visible){const Zt=V(Re,Ut,_t,se);s.renderBufferDirect(nt,null,gn,Zt,Re,null)}}const Jt=Re.children;for(let gn=0,Ut=Jt.length;gn<Ut;gn++)he(Jt[gn],De,nt,_t,se)}}function f5(s,e,t){const n=t.isWebGL2;function r(){let Mt=!1;const hn=new wr;let Fn=null;const fr=new wr(0,0,0,0);return{setMask:function(Mr){Fn!==Mr&&!Mt&&(s.colorMask(Mr,Mr,Mr,Mr),Fn=Mr)},setLocked:function(Mr){Mt=Mr},setClear:function(Mr,Yi,Ki,ms,Z1){Z1===!0&&(Mr*=ms,Yi*=ms,Ki*=ms),hn.set(Mr,Yi,Ki,ms),fr.equals(hn)===!1&&(s.clearColor(Mr,Yi,Ki,ms),fr.copy(hn))},reset:function(){Mt=!1,Fn=null,fr.set(-1,0,0,0)}}}function o(){let Mt=!1,hn=null,Fn=null,fr=null;return{setTest:function(Mr){Mr?bt(s.DEPTH_TEST):Yr(s.DEPTH_TEST)},setMask:function(Mr){hn!==Mr&&!Mt&&(s.depthMask(Mr),hn=Mr)},setFunc:function(Mr){if(Fn!==Mr){switch(Mr){case ee:s.depthFunc(s.NEVER);break;case Ae:s.depthFunc(s.ALWAYS);break;case Te:s.depthFunc(s.LESS);break;case $e:s.depthFunc(s.LEQUAL);break;case Je:s.depthFunc(s.EQUAL);break;case it:s.depthFunc(s.GEQUAL);break;case tt:s.depthFunc(s.GREATER);break;case St:s.depthFunc(s.NOTEQUAL);break;default:s.depthFunc(s.LEQUAL)}Fn=Mr}},setLocked:function(Mr){Mt=Mr},setClear:function(Mr){fr!==Mr&&(s.clearDepth(Mr),fr=Mr)},reset:function(){Mt=!1,hn=null,Fn=null,fr=null}}}function l(){let Mt=!1,hn=null,Fn=null,fr=null,Mr=null,Yi=null,Ki=null,ms=null,Z1=null;return{setTest:function(Ro){Mt||(Ro?bt(s.STENCIL_TEST):Yr(s.STENCIL_TEST))},setMask:function(Ro){hn!==Ro&&!Mt&&(s.stencilMask(Ro),hn=Ro)},setFunc:function(Ro,pa,Ka){(Fn!==Ro||fr!==pa||Mr!==Ka)&&(s.stencilFunc(Ro,pa,Ka),Fn=Ro,fr=pa,Mr=Ka)},setOp:function(Ro,pa,Ka){(Yi!==Ro||Ki!==pa||ms!==Ka)&&(s.stencilOp(Ro,pa,Ka),Yi=Ro,Ki=pa,ms=Ka)},setLocked:function(Ro){Mt=Ro},setClear:function(Ro){Z1!==Ro&&(s.clearStencil(Ro),Z1=Ro)},reset:function(){Mt=!1,hn=null,Fn=null,fr=null,Mr=null,Yi=null,Ki=null,ms=null,Z1=null}}}const c=new r,f=new o,d=new l,p=new WeakMap,_=new WeakMap;let y={},b={},R=new WeakMap,B=[],A=null,M=!1,q=null,V=null,he=null,Re=null,De=null,nt=null,_t=null,se=!1,Ue=null,Jt=null,gn=null,Ut=null,Zt=null;const on=s.getParameter(s.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Dn=!1,Ln=0;const Sn=s.getParameter(s.VERSION);Sn.indexOf("WebGL")!==-1?(Ln=parseFloat(/^WebGL (\d)/.exec(Sn)[1]),Dn=Ln>=1):Sn.indexOf("OpenGL ES")!==-1&&(Ln=parseFloat(/^OpenGL ES (\d)/.exec(Sn)[1]),Dn=Ln>=2);let Hn=null,Bn={};const hr=s.getParameter(s.SCISSOR_BOX),sr=s.getParameter(s.VIEWPORT),fn=new wr().fromArray(hr),On=new wr().fromArray(sr);function er(Mt,hn,Fn,fr){const Mr=new Uint8Array(4),Yi=s.createTexture();s.bindTexture(Mt,Yi),s.texParameteri(Mt,s.TEXTURE_MIN_FILTER,s.NEAREST),s.texParameteri(Mt,s.TEXTURE_MAG_FILTER,s.NEAREST);for(let Ki=0;Ki<Fn;Ki++)n&&(Mt===s.TEXTURE_3D||Mt===s.TEXTURE_2D_ARRAY)?s.texImage3D(hn,0,s.RGBA,1,1,fr,0,s.RGBA,s.UNSIGNED_BYTE,Mr):s.texImage2D(hn+Ki,0,s.RGBA,1,1,0,s.RGBA,s.UNSIGNED_BYTE,Mr);return Yi}const ar={};ar[s.TEXTURE_2D]=er(s.TEXTURE_2D,s.TEXTURE_2D,1),ar[s.TEXTURE_CUBE_MAP]=er(s.TEXTURE_CUBE_MAP,s.TEXTURE_CUBE_MAP_POSITIVE_X,6),n&&(ar[s.TEXTURE_2D_ARRAY]=er(s.TEXTURE_2D_ARRAY,s.TEXTURE_2D_ARRAY,1,1),ar[s.TEXTURE_3D]=er(s.TEXTURE_3D,s.TEXTURE_3D,1,1)),c.setClear(0,0,0,1),f.setClear(1),d.setClear(0),bt(s.DEPTH_TEST),f.setFunc($e),rr(!1),Fr(T),bt(s.CULL_FACE),zn(Qt);function bt(Mt){y[Mt]!==!0&&(s.enable(Mt),y[Mt]=!0)}function Yr(Mt){y[Mt]!==!1&&(s.disable(Mt),y[Mt]=!1)}function ei(Mt,hn){return b[Mt]!==hn?(s.bindFramebuffer(Mt,hn),b[Mt]=hn,n&&(Mt===s.DRAW_FRAMEBUFFER&&(b[s.FRAMEBUFFER]=hn),Mt===s.FRAMEBUFFER&&(b[s.DRAW_FRAMEBUFFER]=hn)),!0):!1}function Kn(Mt,hn){let Fn=B,fr=!1;if(Mt)if(Fn=R.get(hn),Fn===void 0&&(Fn=[],R.set(hn,Fn)),Mt.isWebGLMultipleRenderTargets){const Mr=Mt.texture;if(Fn.length!==Mr.length||Fn[0]!==s.COLOR_ATTACHMENT0){for(let Yi=0,Ki=Mr.length;Yi<Ki;Yi++)Fn[Yi]=s.COLOR_ATTACHMENT0+Yi;Fn.length=Mr.length,fr=!0}}else Fn[0]!==s.COLOR_ATTACHMENT0&&(Fn[0]=s.COLOR_ATTACHMENT0,fr=!0);else Fn[0]!==s.BACK&&(Fn[0]=s.BACK,fr=!0);fr&&(t.isWebGL2?s.drawBuffers(Fn):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Fn))}function br(Mt){return A!==Mt?(s.useProgram(Mt),A=Mt,!0):!1}const Nn={[Ot]:s.FUNC_ADD,[Nt]:s.FUNC_SUBTRACT,[Ve]:s.FUNC_REVERSE_SUBTRACT};if(n)Nn[ke]=s.MIN,Nn[dt]=s.MAX;else{const Mt=e.get("EXT_blend_minmax");Mt!==null&&(Nn[ke]=Mt.MIN_EXT,Nn[dt]=Mt.MAX_EXT)}const vn={[Et]:s.ZERO,[Z]:s.ONE,[ye]:s.SRC_COLOR,[ve]:s.SRC_ALPHA,[Oe]:s.SRC_ALPHA_SATURATE,[Y]:s.DST_COLOR,[we]:s.DST_ALPHA,[ge]:s.ONE_MINUS_SRC_COLOR,[_e]:s.ONE_MINUS_SRC_ALPHA,[te]:s.ONE_MINUS_DST_COLOR,[de]:s.ONE_MINUS_DST_ALPHA};function zn(Mt,hn,Fn,fr,Mr,Yi,Ki,ms){if(Mt===Qt){M===!0&&(Yr(s.BLEND),M=!1);return}if(M===!1&&(bt(s.BLEND),M=!0),Mt!==gt){if(Mt!==q||ms!==se){if((V!==Ot||De!==Ot)&&(s.blendEquation(s.FUNC_ADD),V=Ot,De=Ot),ms)switch(Mt){case mt:s.blendFuncSeparate(s.ONE,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA);break;case Pt:s.blendFunc(s.ONE,s.ONE);break;case O:s.blendFuncSeparate(s.ZERO,s.ONE_MINUS_SRC_COLOR,s.ZERO,s.ONE);break;case Ye:s.blendFuncSeparate(s.ZERO,s.SRC_COLOR,s.ZERO,s.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Mt);break}else switch(Mt){case mt:s.blendFuncSeparate(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA);break;case Pt:s.blendFunc(s.SRC_ALPHA,s.ONE);break;case O:s.blendFuncSeparate(s.ZERO,s.ONE_MINUS_SRC_COLOR,s.ZERO,s.ONE);break;case Ye:s.blendFunc(s.ZERO,s.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Mt);break}he=null,Re=null,nt=null,_t=null,q=Mt,se=ms}return}Mr=Mr||hn,Yi=Yi||Fn,Ki=Ki||fr,(hn!==V||Mr!==De)&&(s.blendEquationSeparate(Nn[hn],Nn[Mr]),V=hn,De=Mr),(Fn!==he||fr!==Re||Yi!==nt||Ki!==_t)&&(s.blendFuncSeparate(vn[Fn],vn[fr],vn[Yi],vn[Ki]),he=Fn,Re=fr,nt=Yi,_t=Ki),q=Mt,se=!1}function mr(Mt,hn){Mt.side===rt?Yr(s.CULL_FACE):bt(s.CULL_FACE);let Fn=Mt.side===k;hn&&(Fn=!Fn),rr(Fn),Mt.blending===mt&&Mt.transparent===!1?zn(Qt):zn(Mt.blending,Mt.blendEquation,Mt.blendSrc,Mt.blendDst,Mt.blendEquationAlpha,Mt.blendSrcAlpha,Mt.blendDstAlpha,Mt.premultipliedAlpha),f.setFunc(Mt.depthFunc),f.setTest(Mt.depthTest),f.setMask(Mt.depthWrite),c.setMask(Mt.colorWrite);const fr=Mt.stencilWrite;d.setTest(fr),fr&&(d.setMask(Mt.stencilWriteMask),d.setFunc(Mt.stencilFunc,Mt.stencilRef,Mt.stencilFuncMask),d.setOp(Mt.stencilFail,Mt.stencilZFail,Mt.stencilZPass)),Ir(Mt.polygonOffset,Mt.polygonOffsetFactor,Mt.polygonOffsetUnits),Mt.alphaToCoverage===!0?bt(s.SAMPLE_ALPHA_TO_COVERAGE):Yr(s.SAMPLE_ALPHA_TO_COVERAGE)}function rr(Mt){Ue!==Mt&&(Mt?s.frontFace(s.CW):s.frontFace(s.CCW),Ue=Mt)}function Fr(Mt){Mt!==C?(bt(s.CULL_FACE),Mt!==Jt&&(Mt===T?s.cullFace(s.BACK):Mt===$?s.cullFace(s.FRONT):s.cullFace(s.FRONT_AND_BACK))):Yr(s.CULL_FACE),Jt=Mt}function kr(Mt){Mt!==gn&&(Dn&&s.lineWidth(Mt),gn=Mt)}function Ir(Mt,hn,Fn){Mt?(bt(s.POLYGON_OFFSET_FILL),(Ut!==hn||Zt!==Fn)&&(s.polygonOffset(hn,Fn),Ut=hn,Zt=Fn)):Yr(s.POLYGON_OFFSET_FILL)}function vi(Mt){Mt?bt(s.SCISSOR_TEST):Yr(s.SCISSOR_TEST)}function Bi(Mt){Mt===void 0&&(Mt=s.TEXTURE0+on-1),Hn!==Mt&&(s.activeTexture(Mt),Hn=Mt)}function je(Mt,hn,Fn){Fn===void 0&&(Hn===null?Fn=s.TEXTURE0+on-1:Fn=Hn);let fr=Bn[Fn];fr===void 0&&(fr={type:void 0,texture:void 0},Bn[Fn]=fr),(fr.type!==Mt||fr.texture!==hn)&&(Hn!==Fn&&(s.activeTexture(Fn),Hn=Fn),s.bindTexture(Mt,hn||ar[Mt]),fr.type=Mt,fr.texture=hn)}function Le(){const Mt=Bn[Hn];Mt!==void 0&&Mt.type!==void 0&&(s.bindTexture(Mt.type,null),Mt.type=void 0,Mt.texture=void 0)}function nn(){try{s.compressedTexImage2D.apply(s,arguments)}catch(Mt){console.error("THREE.WebGLState:",Mt)}}function Un(){try{s.compressedTexImage3D.apply(s,arguments)}catch(Mt){console.error("THREE.WebGLState:",Mt)}}function Wn(){try{s.texSubImage2D.apply(s,arguments)}catch(Mt){console.error("THREE.WebGLState:",Mt)}}function or(){try{s.texSubImage3D.apply(s,arguments)}catch(Mt){console.error("THREE.WebGLState:",Mt)}}function Zr(){try{s.compressedTexSubImage2D.apply(s,arguments)}catch(Mt){console.error("THREE.WebGLState:",Mt)}}function pr(){try{s.compressedTexSubImage3D.apply(s,arguments)}catch(Mt){console.error("THREE.WebGLState:",Mt)}}function mn(){try{s.texStorage2D.apply(s,arguments)}catch(Mt){console.error("THREE.WebGLState:",Mt)}}function xr(){try{s.texStorage3D.apply(s,arguments)}catch(Mt){console.error("THREE.WebGLState:",Mt)}}function Dr(){try{s.texImage2D.apply(s,arguments)}catch(Mt){console.error("THREE.WebGLState:",Mt)}}function $r(){try{s.texImage3D.apply(s,arguments)}catch(Mt){console.error("THREE.WebGLState:",Mt)}}function gr(Mt){fn.equals(Mt)===!1&&(s.scissor(Mt.x,Mt.y,Mt.z,Mt.w),fn.copy(Mt))}function Lr(Mt){On.equals(Mt)===!1&&(s.viewport(Mt.x,Mt.y,Mt.z,Mt.w),On.copy(Mt))}function Li(Mt,hn){let Fn=_.get(hn);Fn===void 0&&(Fn=new WeakMap,_.set(hn,Fn));let fr=Fn.get(Mt);fr===void 0&&(fr=s.getUniformBlockIndex(hn,Mt.name),Fn.set(Mt,fr))}function Zi(Mt,hn){const fr=_.get(hn).get(Mt);p.get(hn)!==fr&&(s.uniformBlockBinding(hn,fr,Mt.__bindingPointIndex),p.set(hn,fr))}function So(){s.disable(s.BLEND),s.disable(s.CULL_FACE),s.disable(s.DEPTH_TEST),s.disable(s.POLYGON_OFFSET_FILL),s.disable(s.SCISSOR_TEST),s.disable(s.STENCIL_TEST),s.disable(s.SAMPLE_ALPHA_TO_COVERAGE),s.blendEquation(s.FUNC_ADD),s.blendFunc(s.ONE,s.ZERO),s.blendFuncSeparate(s.ONE,s.ZERO,s.ONE,s.ZERO),s.colorMask(!0,!0,!0,!0),s.clearColor(0,0,0,0),s.depthMask(!0),s.depthFunc(s.LESS),s.clearDepth(1),s.stencilMask(4294967295),s.stencilFunc(s.ALWAYS,0,4294967295),s.stencilOp(s.KEEP,s.KEEP,s.KEEP),s.clearStencil(0),s.cullFace(s.BACK),s.frontFace(s.CCW),s.polygonOffset(0,0),s.activeTexture(s.TEXTURE0),s.bindFramebuffer(s.FRAMEBUFFER,null),n===!0&&(s.bindFramebuffer(s.DRAW_FRAMEBUFFER,null),s.bindFramebuffer(s.READ_FRAMEBUFFER,null)),s.useProgram(null),s.lineWidth(1),s.scissor(0,0,s.canvas.width,s.canvas.height),s.viewport(0,0,s.canvas.width,s.canvas.height),y={},Hn=null,Bn={},b={},R=new WeakMap,B=[],A=null,M=!1,q=null,V=null,he=null,Re=null,De=null,nt=null,_t=null,se=!1,Ue=null,Jt=null,gn=null,Ut=null,Zt=null,fn.set(0,0,s.canvas.width,s.canvas.height),On.set(0,0,s.canvas.width,s.canvas.height),c.reset(),f.reset(),d.reset()}return{buffers:{color:c,depth:f,stencil:d},enable:bt,disable:Yr,bindFramebuffer:ei,drawBuffers:Kn,useProgram:br,setBlending:zn,setMaterial:mr,setFlipSided:rr,setCullFace:Fr,setLineWidth:kr,setPolygonOffset:Ir,setScissorTest:vi,activeTexture:Bi,bindTexture:je,unbindTexture:Le,compressedTexImage2D:nn,compressedTexImage3D:Un,texImage2D:Dr,texImage3D:$r,updateUBOMapping:Li,uniformBlockBinding:Zi,texStorage2D:mn,texStorage3D:xr,texSubImage2D:Wn,texSubImage3D:or,compressedTexSubImage2D:Zr,compressedTexSubImage3D:pr,scissor:gr,viewport:Lr,reset:So}}function d5(s,e,t,n,r,o,l){const c=r.isWebGL2,f=r.maxTextures,d=r.maxCubemapSize,p=r.maxTextureSize,_=r.maxSamples,y=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,b=typeof navigator=="undefined"?!1:/OculusBrowser/g.test(navigator.userAgent),R=new WeakMap;let B;const A=new WeakMap;let M=!1;try{M=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(je){}function q(je,Le){return M?new OffscreenCanvas(je,Le):Ai("canvas")}function V(je,Le,nn,Un){let Wn=1;if((je.width>Un||je.height>Un)&&(Wn=Un/Math.max(je.width,je.height)),Wn<1||Le===!0)if(typeof HTMLImageElement!="undefined"&&je instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&je instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&je instanceof ImageBitmap){const or=Le?oo:Math.floor,Zr=or(Wn*je.width),pr=or(Wn*je.height);B===void 0&&(B=q(Zr,pr));const mn=nn?q(Zr,pr):B;return mn.width=Zr,mn.height=pr,mn.getContext("2d").drawImage(je,0,0,Zr,pr),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+je.width+"x"+je.height+") to ("+Zr+"x"+pr+")."),mn}else return"data"in je&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+je.width+"x"+je.height+")."),je;return je}function he(je){return ns(je.width)&&ns(je.height)}function Re(je){return c?!1:je.wrapS!==Ce||je.wrapT!==Ce||je.minFilter!==Ze&&je.minFilter!==dn}function De(je,Le){return je.generateMipmaps&&Le&&je.minFilter!==Ze&&je.minFilter!==dn}function nt(je){s.generateMipmap(je)}function _t(je,Le,nn,Un,Wn=!1){if(c===!1)return Le;if(je!==null){if(s[je]!==void 0)return s[je];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+je+"'")}let or=Le;return Le===s.RED&&(nn===s.FLOAT&&(or=s.R32F),nn===s.HALF_FLOAT&&(or=s.R16F),nn===s.UNSIGNED_BYTE&&(or=s.R8)),Le===s.RG&&(nn===s.FLOAT&&(or=s.RG32F),nn===s.HALF_FLOAT&&(or=s.RG16F),nn===s.UNSIGNED_BYTE&&(or=s.RG8)),Le===s.RGBA&&(nn===s.FLOAT&&(or=s.RGBA32F),nn===s.HALF_FLOAT&&(or=s.RGBA16F),nn===s.UNSIGNED_BYTE&&(or=Un===Sr&&Wn===!1?s.SRGB8_ALPHA8:s.RGBA8),nn===s.UNSIGNED_SHORT_4_4_4_4&&(or=s.RGBA4),nn===s.UNSIGNED_SHORT_5_5_5_1&&(or=s.RGB5_A1)),(or===s.R16F||or===s.R32F||or===s.RG16F||or===s.RG32F||or===s.RGBA16F||or===s.RGBA32F)&&e.get("EXT_color_buffer_float"),or}function se(je,Le,nn){return De(je,nn)===!0||je.isFramebufferTexture&&je.minFilter!==Ze&&je.minFilter!==dn?Math.log2(Math.max(Le.width,Le.height))+1:je.mipmaps!==void 0&&je.mipmaps.length>0?je.mipmaps.length:je.isCompressedTexture&&Array.isArray(je.image)?Le.mipmaps.length:1}function Ue(je){return je===Ze||je===et||je===qt?s.NEAREST:s.LINEAR}function Jt(je){const Le=je.target;Le.removeEventListener("dispose",Jt),Ut(Le),Le.isVideoTexture&&R.delete(Le)}function gn(je){const Le=je.target;Le.removeEventListener("dispose",gn),on(Le)}function Ut(je){const Le=n.get(je);if(Le.__webglInit===void 0)return;const nn=je.source,Un=A.get(nn);if(Un){const Wn=Un[Le.__cacheKey];Wn.usedTimes--,Wn.usedTimes===0&&Zt(je),Object.keys(Un).length===0&&A.delete(nn)}n.remove(je)}function Zt(je){const Le=n.get(je);s.deleteTexture(Le.__webglTexture);const nn=je.source,Un=A.get(nn);delete Un[Le.__cacheKey],l.memory.textures--}function on(je){const Le=je.texture,nn=n.get(je),Un=n.get(Le);if(Un.__webglTexture!==void 0&&(s.deleteTexture(Un.__webglTexture),l.memory.textures--),je.depthTexture&&je.depthTexture.dispose(),je.isWebGLCubeRenderTarget)for(let Wn=0;Wn<6;Wn++)s.deleteFramebuffer(nn.__webglFramebuffer[Wn]),nn.__webglDepthbuffer&&s.deleteRenderbuffer(nn.__webglDepthbuffer[Wn]);else{if(s.deleteFramebuffer(nn.__webglFramebuffer),nn.__webglDepthbuffer&&s.deleteRenderbuffer(nn.__webglDepthbuffer),nn.__webglMultisampledFramebuffer&&s.deleteFramebuffer(nn.__webglMultisampledFramebuffer),nn.__webglColorRenderbuffer)for(let Wn=0;Wn<nn.__webglColorRenderbuffer.length;Wn++)nn.__webglColorRenderbuffer[Wn]&&s.deleteRenderbuffer(nn.__webglColorRenderbuffer[Wn]);nn.__webglDepthRenderbuffer&&s.deleteRenderbuffer(nn.__webglDepthRenderbuffer)}if(je.isWebGLMultipleRenderTargets)for(let Wn=0,or=Le.length;Wn<or;Wn++){const Zr=n.get(Le[Wn]);Zr.__webglTexture&&(s.deleteTexture(Zr.__webglTexture),l.memory.textures--),n.remove(Le[Wn])}n.remove(Le),n.remove(je)}let Dn=0;function Ln(){Dn=0}function Sn(){const je=Dn;return je>=f&&console.warn("THREE.WebGLTextures: Trying to use "+je+" texture units while this GPU supports only "+f),Dn+=1,je}function Hn(je){const Le=[];return Le.push(je.wrapS),Le.push(je.wrapT),Le.push(je.wrapR||0),Le.push(je.magFilter),Le.push(je.minFilter),Le.push(je.anisotropy),Le.push(je.internalFormat),Le.push(je.format),Le.push(je.type),Le.push(je.generateMipmaps),Le.push(je.premultiplyAlpha),Le.push(je.flipY),Le.push(je.unpackAlignment),Le.push(je.colorSpace),Le.join()}function Bn(je,Le){const nn=n.get(je);if(je.isVideoTexture&&vi(je),je.isRenderTargetTexture===!1&&je.version>0&&nn.__version!==je.version){const Un=je.image;if(Un===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Un.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Yr(nn,je,Le);return}}t.bindTexture(s.TEXTURE_2D,nn.__webglTexture,s.TEXTURE0+Le)}function hr(je,Le){const nn=n.get(je);if(je.version>0&&nn.__version!==je.version){Yr(nn,je,Le);return}t.bindTexture(s.TEXTURE_2D_ARRAY,nn.__webglTexture,s.TEXTURE0+Le)}function sr(je,Le){const nn=n.get(je);if(je.version>0&&nn.__version!==je.version){Yr(nn,je,Le);return}t.bindTexture(s.TEXTURE_3D,nn.__webglTexture,s.TEXTURE0+Le)}function fn(je,Le){const nn=n.get(je);if(je.version>0&&nn.__version!==je.version){ei(nn,je,Le);return}t.bindTexture(s.TEXTURE_CUBE_MAP,nn.__webglTexture,s.TEXTURE0+Le)}const On={[pe]:s.REPEAT,[Ce]:s.CLAMP_TO_EDGE,[Ne]:s.MIRRORED_REPEAT},er={[Ze]:s.NEAREST,[et]:s.NEAREST_MIPMAP_NEAREST,[qt]:s.NEAREST_MIPMAP_LINEAR,[dn]:s.LINEAR,[Me]:s.LINEAR_MIPMAP_NEAREST,[Ke]:s.LINEAR_MIPMAP_LINEAR};function ar(je,Le,nn){if(nn?(s.texParameteri(je,s.TEXTURE_WRAP_S,On[Le.wrapS]),s.texParameteri(je,s.TEXTURE_WRAP_T,On[Le.wrapT]),(je===s.TEXTURE_3D||je===s.TEXTURE_2D_ARRAY)&&s.texParameteri(je,s.TEXTURE_WRAP_R,On[Le.wrapR]),s.texParameteri(je,s.TEXTURE_MAG_FILTER,er[Le.magFilter]),s.texParameteri(je,s.TEXTURE_MIN_FILTER,er[Le.minFilter])):(s.texParameteri(je,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(je,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),(je===s.TEXTURE_3D||je===s.TEXTURE_2D_ARRAY)&&s.texParameteri(je,s.TEXTURE_WRAP_R,s.CLAMP_TO_EDGE),(Le.wrapS!==Ce||Le.wrapT!==Ce)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),s.texParameteri(je,s.TEXTURE_MAG_FILTER,Ue(Le.magFilter)),s.texParameteri(je,s.TEXTURE_MIN_FILTER,Ue(Le.minFilter)),Le.minFilter!==Ze&&Le.minFilter!==dn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const Un=e.get("EXT_texture_filter_anisotropic");if(Le.magFilter===Ze||Le.minFilter!==qt&&Le.minFilter!==Ke||Le.type===ct&&e.has("OES_texture_float_linear")===!1||c===!1&&Le.type===It&&e.has("OES_texture_half_float_linear")===!1)return;(Le.anisotropy>1||n.get(Le).__currentAnisotropy)&&(s.texParameterf(je,Un.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Le.anisotropy,r.getMaxAnisotropy())),n.get(Le).__currentAnisotropy=Le.anisotropy)}}function bt(je,Le){let nn=!1;je.__webglInit===void 0&&(je.__webglInit=!0,Le.addEventListener("dispose",Jt));const Un=Le.source;let Wn=A.get(Un);Wn===void 0&&(Wn={},A.set(Un,Wn));const or=Hn(Le);if(or!==je.__cacheKey){Wn[or]===void 0&&(Wn[or]={texture:s.createTexture(),usedTimes:0},l.memory.textures++,nn=!0),Wn[or].usedTimes++;const Zr=Wn[je.__cacheKey];Zr!==void 0&&(Wn[je.__cacheKey].usedTimes--,Zr.usedTimes===0&&Zt(Le)),je.__cacheKey=or,je.__webglTexture=Wn[or].texture}return nn}function Yr(je,Le,nn){let Un=s.TEXTURE_2D;(Le.isDataArrayTexture||Le.isCompressedArrayTexture)&&(Un=s.TEXTURE_2D_ARRAY),Le.isData3DTexture&&(Un=s.TEXTURE_3D);const Wn=bt(je,Le),or=Le.source;t.bindTexture(Un,je.__webglTexture,s.TEXTURE0+nn);const Zr=n.get(or);if(or.version!==Zr.__version||Wn===!0){t.activeTexture(s.TEXTURE0+nn),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,Le.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Le.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,Le.unpackAlignment),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,s.NONE);const pr=Re(Le)&&he(Le.image)===!1;let mn=V(Le.image,pr,!1,p);mn=Bi(Le,mn);const xr=he(mn)||c,Dr=o.convert(Le.format,Le.colorSpace);let $r=o.convert(Le.type),gr=_t(Le.internalFormat,Dr,$r,Le.colorSpace);ar(Un,Le,xr);let Lr;const Li=Le.mipmaps,Zi=c&&Le.isVideoTexture!==!0,So=Zr.__version===void 0||Wn===!0,Mt=se(Le,mn,xr);if(Le.isDepthTexture)gr=s.DEPTH_COMPONENT,c?Le.type===ct?gr=s.DEPTH_COMPONENT32F:Le.type===Ie?gr=s.DEPTH_COMPONENT24:Le.type===Vn?gr=s.DEPTH24_STENCIL8:gr=s.DEPTH_COMPONENT16:Le.type===ct&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Le.format===ai&&gr===s.DEPTH_COMPONENT&&Le.type!==zt&&Le.type!==Ie&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Le.type=Ie,$r=o.convert(Le.type)),Le.format===Pr&&gr===s.DEPTH_COMPONENT&&(gr=s.DEPTH_STENCIL,Le.type!==Vn&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Le.type=Vn,$r=o.convert(Le.type))),So&&(Zi?t.texStorage2D(s.TEXTURE_2D,1,gr,mn.width,mn.height):t.texImage2D(s.TEXTURE_2D,0,gr,mn.width,mn.height,0,Dr,$r,null));else if(Le.isDataTexture)if(Li.length>0&&xr){Zi&&So&&t.texStorage2D(s.TEXTURE_2D,Mt,gr,Li[0].width,Li[0].height);for(let hn=0,Fn=Li.length;hn<Fn;hn++)Lr=Li[hn],Zi?t.texSubImage2D(s.TEXTURE_2D,hn,0,0,Lr.width,Lr.height,Dr,$r,Lr.data):t.texImage2D(s.TEXTURE_2D,hn,gr,Lr.width,Lr.height,0,Dr,$r,Lr.data);Le.generateMipmaps=!1}else Zi?(So&&t.texStorage2D(s.TEXTURE_2D,Mt,gr,mn.width,mn.height),t.texSubImage2D(s.TEXTURE_2D,0,0,0,mn.width,mn.height,Dr,$r,mn.data)):t.texImage2D(s.TEXTURE_2D,0,gr,mn.width,mn.height,0,Dr,$r,mn.data);else if(Le.isCompressedTexture)if(Le.isCompressedArrayTexture){Zi&&So&&t.texStorage3D(s.TEXTURE_2D_ARRAY,Mt,gr,Li[0].width,Li[0].height,mn.depth);for(let hn=0,Fn=Li.length;hn<Fn;hn++)Lr=Li[hn],Le.format!==lr?Dr!==null?Zi?t.compressedTexSubImage3D(s.TEXTURE_2D_ARRAY,hn,0,0,0,Lr.width,Lr.height,mn.depth,Dr,Lr.data,0,0):t.compressedTexImage3D(s.TEXTURE_2D_ARRAY,hn,gr,Lr.width,Lr.height,mn.depth,0,Lr.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Zi?t.texSubImage3D(s.TEXTURE_2D_ARRAY,hn,0,0,0,Lr.width,Lr.height,mn.depth,Dr,$r,Lr.data):t.texImage3D(s.TEXTURE_2D_ARRAY,hn,gr,Lr.width,Lr.height,mn.depth,0,Dr,$r,Lr.data)}else{Zi&&So&&t.texStorage2D(s.TEXTURE_2D,Mt,gr,Li[0].width,Li[0].height);for(let hn=0,Fn=Li.length;hn<Fn;hn++)Lr=Li[hn],Le.format!==lr?Dr!==null?Zi?t.compressedTexSubImage2D(s.TEXTURE_2D,hn,0,0,Lr.width,Lr.height,Dr,Lr.data):t.compressedTexImage2D(s.TEXTURE_2D,hn,gr,Lr.width,Lr.height,0,Lr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Zi?t.texSubImage2D(s.TEXTURE_2D,hn,0,0,Lr.width,Lr.height,Dr,$r,Lr.data):t.texImage2D(s.TEXTURE_2D,hn,gr,Lr.width,Lr.height,0,Dr,$r,Lr.data)}else if(Le.isDataArrayTexture)Zi?(So&&t.texStorage3D(s.TEXTURE_2D_ARRAY,Mt,gr,mn.width,mn.height,mn.depth),t.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,0,mn.width,mn.height,mn.depth,Dr,$r,mn.data)):t.texImage3D(s.TEXTURE_2D_ARRAY,0,gr,mn.width,mn.height,mn.depth,0,Dr,$r,mn.data);else if(Le.isData3DTexture)Zi?(So&&t.texStorage3D(s.TEXTURE_3D,Mt,gr,mn.width,mn.height,mn.depth),t.texSubImage3D(s.TEXTURE_3D,0,0,0,0,mn.width,mn.height,mn.depth,Dr,$r,mn.data)):t.texImage3D(s.TEXTURE_3D,0,gr,mn.width,mn.height,mn.depth,0,Dr,$r,mn.data);else if(Le.isFramebufferTexture){if(So)if(Zi)t.texStorage2D(s.TEXTURE_2D,Mt,gr,mn.width,mn.height);else{let hn=mn.width,Fn=mn.height;for(let fr=0;fr<Mt;fr++)t.texImage2D(s.TEXTURE_2D,fr,gr,hn,Fn,0,Dr,$r,null),hn>>=1,Fn>>=1}}else if(Li.length>0&&xr){Zi&&So&&t.texStorage2D(s.TEXTURE_2D,Mt,gr,Li[0].width,Li[0].height);for(let hn=0,Fn=Li.length;hn<Fn;hn++)Lr=Li[hn],Zi?t.texSubImage2D(s.TEXTURE_2D,hn,0,0,Dr,$r,Lr):t.texImage2D(s.TEXTURE_2D,hn,gr,Dr,$r,Lr);Le.generateMipmaps=!1}else Zi?(So&&t.texStorage2D(s.TEXTURE_2D,Mt,gr,mn.width,mn.height),t.texSubImage2D(s.TEXTURE_2D,0,0,0,Dr,$r,mn)):t.texImage2D(s.TEXTURE_2D,0,gr,Dr,$r,mn);De(Le,xr)&&nt(Un),Zr.__version=or.version,Le.onUpdate&&Le.onUpdate(Le)}je.__version=Le.version}function ei(je,Le,nn){if(Le.image.length!==6)return;const Un=bt(je,Le),Wn=Le.source;t.bindTexture(s.TEXTURE_CUBE_MAP,je.__webglTexture,s.TEXTURE0+nn);const or=n.get(Wn);if(Wn.version!==or.__version||Un===!0){t.activeTexture(s.TEXTURE0+nn),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,Le.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Le.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,Le.unpackAlignment),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,s.NONE);const Zr=Le.isCompressedTexture||Le.image[0].isCompressedTexture,pr=Le.image[0]&&Le.image[0].isDataTexture,mn=[];for(let hn=0;hn<6;hn++)!Zr&&!pr?mn[hn]=V(Le.image[hn],!1,!0,d):mn[hn]=pr?Le.image[hn].image:Le.image[hn],mn[hn]=Bi(Le,mn[hn]);const xr=mn[0],Dr=he(xr)||c,$r=o.convert(Le.format,Le.colorSpace),gr=o.convert(Le.type),Lr=_t(Le.internalFormat,$r,gr,Le.colorSpace),Li=c&&Le.isVideoTexture!==!0,Zi=or.__version===void 0||Un===!0;let So=se(Le,xr,Dr);ar(s.TEXTURE_CUBE_MAP,Le,Dr);let Mt;if(Zr){Li&&Zi&&t.texStorage2D(s.TEXTURE_CUBE_MAP,So,Lr,xr.width,xr.height);for(let hn=0;hn<6;hn++){Mt=mn[hn].mipmaps;for(let Fn=0;Fn<Mt.length;Fn++){const fr=Mt[Fn];Le.format!==lr?$r!==null?Li?t.compressedTexSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+hn,Fn,0,0,fr.width,fr.height,$r,fr.data):t.compressedTexImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+hn,Fn,Lr,fr.width,fr.height,0,fr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Li?t.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+hn,Fn,0,0,fr.width,fr.height,$r,gr,fr.data):t.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+hn,Fn,Lr,fr.width,fr.height,0,$r,gr,fr.data)}}}else{Mt=Le.mipmaps,Li&&Zi&&(Mt.length>0&&So++,t.texStorage2D(s.TEXTURE_CUBE_MAP,So,Lr,mn[0].width,mn[0].height));for(let hn=0;hn<6;hn++)if(pr){Li?t.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+hn,0,0,0,mn[hn].width,mn[hn].height,$r,gr,mn[hn].data):t.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+hn,0,Lr,mn[hn].width,mn[hn].height,0,$r,gr,mn[hn].data);for(let Fn=0;Fn<Mt.length;Fn++){const Mr=Mt[Fn].image[hn].image;Li?t.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+hn,Fn+1,0,0,Mr.width,Mr.height,$r,gr,Mr.data):t.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+hn,Fn+1,Lr,Mr.width,Mr.height,0,$r,gr,Mr.data)}}else{Li?t.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+hn,0,0,0,$r,gr,mn[hn]):t.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+hn,0,Lr,$r,gr,mn[hn]);for(let Fn=0;Fn<Mt.length;Fn++){const fr=Mt[Fn];Li?t.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+hn,Fn+1,0,0,$r,gr,fr.image[hn]):t.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+hn,Fn+1,Lr,$r,gr,fr.image[hn])}}}De(Le,Dr)&&nt(s.TEXTURE_CUBE_MAP),or.__version=Wn.version,Le.onUpdate&&Le.onUpdate(Le)}je.__version=Le.version}function Kn(je,Le,nn,Un,Wn){const or=o.convert(nn.format,nn.colorSpace),Zr=o.convert(nn.type),pr=_t(nn.internalFormat,or,Zr,nn.colorSpace);n.get(Le).__hasExternalTextures||(Wn===s.TEXTURE_3D||Wn===s.TEXTURE_2D_ARRAY?t.texImage3D(Wn,0,pr,Le.width,Le.height,Le.depth,0,or,Zr,null):t.texImage2D(Wn,0,pr,Le.width,Le.height,0,or,Zr,null)),t.bindFramebuffer(s.FRAMEBUFFER,je),Ir(Le)?y.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,Un,Wn,n.get(nn).__webglTexture,0,kr(Le)):(Wn===s.TEXTURE_2D||Wn>=s.TEXTURE_CUBE_MAP_POSITIVE_X&&Wn<=s.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&s.framebufferTexture2D(s.FRAMEBUFFER,Un,Wn,n.get(nn).__webglTexture,0),t.bindFramebuffer(s.FRAMEBUFFER,null)}function br(je,Le,nn){if(s.bindRenderbuffer(s.RENDERBUFFER,je),Le.depthBuffer&&!Le.stencilBuffer){let Un=s.DEPTH_COMPONENT16;if(nn||Ir(Le)){const Wn=Le.depthTexture;Wn&&Wn.isDepthTexture&&(Wn.type===ct?Un=s.DEPTH_COMPONENT32F:Wn.type===Ie&&(Un=s.DEPTH_COMPONENT24));const or=kr(Le);Ir(Le)?y.renderbufferStorageMultisampleEXT(s.RENDERBUFFER,or,Un,Le.width,Le.height):s.renderbufferStorageMultisample(s.RENDERBUFFER,or,Un,Le.width,Le.height)}else s.renderbufferStorage(s.RENDERBUFFER,Un,Le.width,Le.height);s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,je)}else if(Le.depthBuffer&&Le.stencilBuffer){const Un=kr(Le);nn&&Ir(Le)===!1?s.renderbufferStorageMultisample(s.RENDERBUFFER,Un,s.DEPTH24_STENCIL8,Le.width,Le.height):Ir(Le)?y.renderbufferStorageMultisampleEXT(s.RENDERBUFFER,Un,s.DEPTH24_STENCIL8,Le.width,Le.height):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,Le.width,Le.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,je)}else{const Un=Le.isWebGLMultipleRenderTargets===!0?Le.texture:[Le.texture];for(let Wn=0;Wn<Un.length;Wn++){const or=Un[Wn],Zr=o.convert(or.format,or.colorSpace),pr=o.convert(or.type),mn=_t(or.internalFormat,Zr,pr,or.colorSpace),xr=kr(Le);nn&&Ir(Le)===!1?s.renderbufferStorageMultisample(s.RENDERBUFFER,xr,mn,Le.width,Le.height):Ir(Le)?y.renderbufferStorageMultisampleEXT(s.RENDERBUFFER,xr,mn,Le.width,Le.height):s.renderbufferStorage(s.RENDERBUFFER,mn,Le.width,Le.height)}}s.bindRenderbuffer(s.RENDERBUFFER,null)}function Nn(je,Le){if(Le&&Le.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(s.FRAMEBUFFER,je),!(Le.depthTexture&&Le.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(Le.depthTexture).__webglTexture||Le.depthTexture.image.width!==Le.width||Le.depthTexture.image.height!==Le.height)&&(Le.depthTexture.image.width=Le.width,Le.depthTexture.image.height=Le.height,Le.depthTexture.needsUpdate=!0),Bn(Le.depthTexture,0);const Un=n.get(Le.depthTexture).__webglTexture,Wn=kr(Le);if(Le.depthTexture.format===ai)Ir(Le)?y.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.TEXTURE_2D,Un,0,Wn):s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.TEXTURE_2D,Un,0);else if(Le.depthTexture.format===Pr)Ir(Le)?y.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.TEXTURE_2D,Un,0,Wn):s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.TEXTURE_2D,Un,0);else throw new Error("Unknown depthTexture format")}function vn(je){const Le=n.get(je),nn=je.isWebGLCubeRenderTarget===!0;if(je.depthTexture&&!Le.__autoAllocateDepthBuffer){if(nn)throw new Error("target.depthTexture not supported in Cube render targets");Nn(Le.__webglFramebuffer,je)}else if(nn){Le.__webglDepthbuffer=[];for(let Un=0;Un<6;Un++)t.bindFramebuffer(s.FRAMEBUFFER,Le.__webglFramebuffer[Un]),Le.__webglDepthbuffer[Un]=s.createRenderbuffer(),br(Le.__webglDepthbuffer[Un],je,!1)}else t.bindFramebuffer(s.FRAMEBUFFER,Le.__webglFramebuffer),Le.__webglDepthbuffer=s.createRenderbuffer(),br(Le.__webglDepthbuffer,je,!1);t.bindFramebuffer(s.FRAMEBUFFER,null)}function zn(je,Le,nn){const Un=n.get(je);Le!==void 0&&Kn(Un.__webglFramebuffer,je,je.texture,s.COLOR_ATTACHMENT0,s.TEXTURE_2D),nn!==void 0&&vn(je)}function mr(je){const Le=je.texture,nn=n.get(je),Un=n.get(Le);je.addEventListener("dispose",gn),je.isWebGLMultipleRenderTargets!==!0&&(Un.__webglTexture===void 0&&(Un.__webglTexture=s.createTexture()),Un.__version=Le.version,l.memory.textures++);const Wn=je.isWebGLCubeRenderTarget===!0,or=je.isWebGLMultipleRenderTargets===!0,Zr=he(je)||c;if(Wn){nn.__webglFramebuffer=[];for(let pr=0;pr<6;pr++)nn.__webglFramebuffer[pr]=s.createFramebuffer()}else{if(nn.__webglFramebuffer=s.createFramebuffer(),or)if(r.drawBuffers){const pr=je.texture;for(let mn=0,xr=pr.length;mn<xr;mn++){const Dr=n.get(pr[mn]);Dr.__webglTexture===void 0&&(Dr.__webglTexture=s.createTexture(),l.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(c&&je.samples>0&&Ir(je)===!1){const pr=or?Le:[Le];nn.__webglMultisampledFramebuffer=s.createFramebuffer(),nn.__webglColorRenderbuffer=[],t.bindFramebuffer(s.FRAMEBUFFER,nn.__webglMultisampledFramebuffer);for(let mn=0;mn<pr.length;mn++){const xr=pr[mn];nn.__webglColorRenderbuffer[mn]=s.createRenderbuffer(),s.bindRenderbuffer(s.RENDERBUFFER,nn.__webglColorRenderbuffer[mn]);const Dr=o.convert(xr.format,xr.colorSpace),$r=o.convert(xr.type),gr=_t(xr.internalFormat,Dr,$r,xr.colorSpace,je.isXRRenderTarget===!0),Lr=kr(je);s.renderbufferStorageMultisample(s.RENDERBUFFER,Lr,gr,je.width,je.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+mn,s.RENDERBUFFER,nn.__webglColorRenderbuffer[mn])}s.bindRenderbuffer(s.RENDERBUFFER,null),je.depthBuffer&&(nn.__webglDepthRenderbuffer=s.createRenderbuffer(),br(nn.__webglDepthRenderbuffer,je,!0)),t.bindFramebuffer(s.FRAMEBUFFER,null)}}if(Wn){t.bindTexture(s.TEXTURE_CUBE_MAP,Un.__webglTexture),ar(s.TEXTURE_CUBE_MAP,Le,Zr);for(let pr=0;pr<6;pr++)Kn(nn.__webglFramebuffer[pr],je,Le,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+pr);De(Le,Zr)&&nt(s.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(or){const pr=je.texture;for(let mn=0,xr=pr.length;mn<xr;mn++){const Dr=pr[mn],$r=n.get(Dr);t.bindTexture(s.TEXTURE_2D,$r.__webglTexture),ar(s.TEXTURE_2D,Dr,Zr),Kn(nn.__webglFramebuffer,je,Dr,s.COLOR_ATTACHMENT0+mn,s.TEXTURE_2D),De(Dr,Zr)&&nt(s.TEXTURE_2D)}t.unbindTexture()}else{let pr=s.TEXTURE_2D;(je.isWebGL3DRenderTarget||je.isWebGLArrayRenderTarget)&&(c?pr=je.isWebGL3DRenderTarget?s.TEXTURE_3D:s.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(pr,Un.__webglTexture),ar(pr,Le,Zr),Kn(nn.__webglFramebuffer,je,Le,s.COLOR_ATTACHMENT0,pr),De(Le,Zr)&&nt(pr),t.unbindTexture()}je.depthBuffer&&vn(je)}function rr(je){const Le=he(je)||c,nn=je.isWebGLMultipleRenderTargets===!0?je.texture:[je.texture];for(let Un=0,Wn=nn.length;Un<Wn;Un++){const or=nn[Un];if(De(or,Le)){const Zr=je.isWebGLCubeRenderTarget?s.TEXTURE_CUBE_MAP:s.TEXTURE_2D,pr=n.get(or).__webglTexture;t.bindTexture(Zr,pr),nt(Zr),t.unbindTexture()}}}function Fr(je){if(c&&je.samples>0&&Ir(je)===!1){const Le=je.isWebGLMultipleRenderTargets?je.texture:[je.texture],nn=je.width,Un=je.height;let Wn=s.COLOR_BUFFER_BIT;const or=[],Zr=je.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT,pr=n.get(je),mn=je.isWebGLMultipleRenderTargets===!0;if(mn)for(let xr=0;xr<Le.length;xr++)t.bindFramebuffer(s.FRAMEBUFFER,pr.__webglMultisampledFramebuffer),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+xr,s.RENDERBUFFER,null),t.bindFramebuffer(s.FRAMEBUFFER,pr.__webglFramebuffer),s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0+xr,s.TEXTURE_2D,null,0);t.bindFramebuffer(s.READ_FRAMEBUFFER,pr.__webglMultisampledFramebuffer),t.bindFramebuffer(s.DRAW_FRAMEBUFFER,pr.__webglFramebuffer);for(let xr=0;xr<Le.length;xr++){or.push(s.COLOR_ATTACHMENT0+xr),je.depthBuffer&&or.push(Zr);const Dr=pr.__ignoreDepthValues!==void 0?pr.__ignoreDepthValues:!1;if(Dr===!1&&(je.depthBuffer&&(Wn|=s.DEPTH_BUFFER_BIT),je.stencilBuffer&&(Wn|=s.STENCIL_BUFFER_BIT)),mn&&s.framebufferRenderbuffer(s.READ_FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.RENDERBUFFER,pr.__webglColorRenderbuffer[xr]),Dr===!0&&(s.invalidateFramebuffer(s.READ_FRAMEBUFFER,[Zr]),s.invalidateFramebuffer(s.DRAW_FRAMEBUFFER,[Zr])),mn){const $r=n.get(Le[xr]).__webglTexture;s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,$r,0)}s.blitFramebuffer(0,0,nn,Un,0,0,nn,Un,Wn,s.NEAREST),b&&s.invalidateFramebuffer(s.READ_FRAMEBUFFER,or)}if(t.bindFramebuffer(s.READ_FRAMEBUFFER,null),t.bindFramebuffer(s.DRAW_FRAMEBUFFER,null),mn)for(let xr=0;xr<Le.length;xr++){t.bindFramebuffer(s.FRAMEBUFFER,pr.__webglMultisampledFramebuffer),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+xr,s.RENDERBUFFER,pr.__webglColorRenderbuffer[xr]);const Dr=n.get(Le[xr]).__webglTexture;t.bindFramebuffer(s.FRAMEBUFFER,pr.__webglFramebuffer),s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0+xr,s.TEXTURE_2D,Dr,0)}t.bindFramebuffer(s.DRAW_FRAMEBUFFER,pr.__webglMultisampledFramebuffer)}}function kr(je){return Math.min(_,je.samples)}function Ir(je){const Le=n.get(je);return c&&je.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Le.__useRenderToTexture!==!1}function vi(je){const Le=l.render.frame;R.get(je)!==Le&&(R.set(je,Le),je.update())}function Bi(je,Le){const nn=je.colorSpace,Un=je.format,Wn=je.type;return je.isCompressedTexture===!0||je.format===Ni||nn!==go&&nn!==Po&&(nn===Sr?c===!1?e.has("EXT_sRGB")===!0&&Un===lr?(je.format=Ni,je.minFilter=dn,je.generateMipmaps=!1):Le=t1.sRGBToLinear(Le):(Un!==lr||Wn!==Bt)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",nn)),Le}this.allocateTextureUnit=Sn,this.resetTextureUnits=Ln,this.setTexture2D=Bn,this.setTexture2DArray=hr,this.setTexture3D=sr,this.setTextureCube=fn,this.rebindTextures=zn,this.setupRenderTarget=mr,this.updateRenderTargetMipmap=rr,this.updateMultisampleRenderTarget=Fr,this.setupDepthRenderbuffer=vn,this.setupFrameBufferTexture=Kn,this.useMultisampledRTT=Ir}function M2(s,e,t){const n=t.isWebGL2;function r(o,l=Po){let c;if(o===Bt)return s.UNSIGNED_BYTE;if(o===en)return s.UNSIGNED_SHORT_4_4_4_4;if(o===bn)return s.UNSIGNED_SHORT_5_5_5_1;if(o===En)return s.BYTE;if(o===ln)return s.SHORT;if(o===zt)return s.UNSIGNED_SHORT;if(o===me)return s.INT;if(o===Ie)return s.UNSIGNED_INT;if(o===ct)return s.FLOAT;if(o===It)return n?s.HALF_FLOAT:(c=e.get("OES_texture_half_float"),c!==null?c.HALF_FLOAT_OES:null);if(o===tr)return s.ALPHA;if(o===lr)return s.RGBA;if(o===Ar)return s.LUMINANCE;if(o===ti)return s.LUMINANCE_ALPHA;if(o===ai)return s.DEPTH_COMPONENT;if(o===Pr)return s.DEPTH_STENCIL;if(o===Ni)return c=e.get("EXT_sRGB"),c!==null?c.SRGB_ALPHA_EXT:null;if(o===mi)return s.RED;if(o===D)return s.RED_INTEGER;if(o===j)return s.RG;if(o===m)return s.RG_INTEGER;if(o===v)return s.RGBA_INTEGER;if(o===w||o===S||o===z||o===ae)if(l===Sr)if(c=e.get("WEBGL_compressed_texture_s3tc_srgb"),c!==null){if(o===w)return c.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===S)return c.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===z)return c.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===ae)return c.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(c=e.get("WEBGL_compressed_texture_s3tc"),c!==null){if(o===w)return c.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===S)return c.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===z)return c.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===ae)return c.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===F||o===X||o===P||o===W)if(c=e.get("WEBGL_compressed_texture_pvrtc"),c!==null){if(o===F)return c.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===X)return c.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===P)return c.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===W)return c.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===Fe)return c=e.get("WEBGL_compressed_texture_etc1"),c!==null?c.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===Ge||o===ut)if(c=e.get("WEBGL_compressed_texture_etc"),c!==null){if(o===Ge)return l===Sr?c.COMPRESSED_SRGB8_ETC2:c.COMPRESSED_RGB8_ETC2;if(o===ut)return l===Sr?c.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:c.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===kt||o===Ht||o===ht||o===vt||o===ft||o===Gt||o===An||o===Rn||o===Gn||o===Pn||o===kn||o===Qn||o===cn||o===Zn)if(c=e.get("WEBGL_compressed_texture_astc"),c!==null){if(o===kt)return l===Sr?c.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:c.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===Ht)return l===Sr?c.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:c.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===ht)return l===Sr?c.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:c.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===vt)return l===Sr?c.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:c.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===ft)return l===Sr?c.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:c.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===Gt)return l===Sr?c.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:c.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===An)return l===Sr?c.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:c.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===Rn)return l===Sr?c.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:c.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===Gn)return l===Sr?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:c.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===Pn)return l===Sr?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:c.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===kn)return l===Sr?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:c.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===Qn)return l===Sr?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:c.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===cn)return l===Sr?c.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:c.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===Zn)return l===Sr?c.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:c.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===cr)if(c=e.get("EXT_texture_compression_bptc"),c!==null){if(o===cr)return l===Sr?c.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:c.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(o===Er||o===Kr||o===bi||o===li)if(c=e.get("EXT_texture_compression_rgtc"),c!==null){if(o===cr)return c.COMPRESSED_RED_RGTC1_EXT;if(o===Kr)return c.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(o===bi)return c.COMPRESSED_RED_GREEN_RGTC2_EXT;if(o===li)return c.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return o===Vn?n?s.UNSIGNED_INT_24_8:(c=e.get("WEBGL_depth_texture"),c!==null?c.UNSIGNED_INT_24_8_WEBGL:null):s[o]!==void 0?s[o]:null}return{convert:r}}class E2 extends Co{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class vc extends _i{constructor(){super(),this.isGroup=!0,this.type="Group"}}const h5={type:"move"};class Cf{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new vc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new vc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ee,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ee),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new vc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ee,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ee),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,o=null,l=null;const c=this._targetRay,f=this._grip,d=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(d&&e.hand){l=!0;for(const B of e.hand.values()){const A=t.getJointPose(B,n),M=this._getHandJoint(d,B);A!==null&&(M.matrix.fromArray(A.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),M.matrixWorldNeedsUpdate=!0,M.jointRadius=A.radius),M.visible=A!==null}const p=d.joints["index-finger-tip"],_=d.joints["thumb-tip"],y=p.position.distanceTo(_.position),b=.02,R=.005;d.inputState.pinching&&y>b+R?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&y<=b-R&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else f!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,n),o!==null&&(f.matrix.fromArray(o.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.matrixWorldNeedsUpdate=!0,o.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(o.linearVelocity)):f.hasLinearVelocity=!1,o.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(o.angularVelocity)):f.hasAngularVelocity=!1));c!==null&&(r=t.getPose(e.targetRaySpace,n),r===null&&o!==null&&(r=o),r!==null&&(c.matrix.fromArray(r.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,r.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(r.linearVelocity)):c.hasLinearVelocity=!1,r.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(r.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(h5)))}return c!==null&&(c.visible=r!==null),f!==null&&(f.visible=o!==null),d!==null&&(d.visible=l!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new vc;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class S2 extends qr{constructor(e,t,n,r,o,l,c,f,d,p){if(p=p!==void 0?p:ai,p!==ai&&p!==Pr)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&p===ai&&(n=Ie),n===void 0&&p===Pr&&(n=Vn),super(null,r,o,l,c,f,p,n,d),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=c!==void 0?c:Ze,this.minFilter=f!==void 0?f:Ze,this.flipY=!1,this.generateMipmaps=!1}}class p5 extends gi{constructor(e,t){super();const n=this;let r=null,o=1,l=null,c="local-floor",f=1,d=null,p=null,_=null,y=null,b=null,R=null;const B=t.getContextAttributes();let A=null,M=null;const q=[],V=[],he=new Set,Re=new Map,De=new Co;De.layers.enable(1),De.viewport=new wr;const nt=new Co;nt.layers.enable(2),nt.viewport=new wr;const _t=[De,nt],se=new E2;se.layers.enable(1),se.layers.enable(2);let Ue=null,Jt=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(fn){let On=q[fn];return On===void 0&&(On=new Cf,q[fn]=On),On.getTargetRaySpace()},this.getControllerGrip=function(fn){let On=q[fn];return On===void 0&&(On=new Cf,q[fn]=On),On.getGripSpace()},this.getHand=function(fn){let On=q[fn];return On===void 0&&(On=new Cf,q[fn]=On),On.getHandSpace()};function gn(fn){const On=V.indexOf(fn.inputSource);if(On===-1)return;const er=q[On];er!==void 0&&(er.update(fn.inputSource,fn.frame,d||l),er.dispatchEvent({type:fn.type,data:fn.inputSource}))}function Ut(){r.removeEventListener("select",gn),r.removeEventListener("selectstart",gn),r.removeEventListener("selectend",gn),r.removeEventListener("squeeze",gn),r.removeEventListener("squeezestart",gn),r.removeEventListener("squeezeend",gn),r.removeEventListener("end",Ut),r.removeEventListener("inputsourceschange",Zt);for(let fn=0;fn<q.length;fn++){const On=V[fn];On!==null&&(V[fn]=null,q[fn].disconnect(On))}Ue=null,Jt=null,e.setRenderTarget(A),b=null,y=null,_=null,r=null,M=null,sr.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(fn){o=fn,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(fn){c=fn,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||l},this.setReferenceSpace=function(fn){d=fn},this.getBaseLayer=function(){return y!==null?y:b},this.getBinding=function(){return _},this.getFrame=function(){return R},this.getSession=function(){return r},this.setSession=function(fn){return Fl(this,null,function*(){if(r=fn,r!==null){if(A=e.getRenderTarget(),r.addEventListener("select",gn),r.addEventListener("selectstart",gn),r.addEventListener("selectend",gn),r.addEventListener("squeeze",gn),r.addEventListener("squeezestart",gn),r.addEventListener("squeezeend",gn),r.addEventListener("end",Ut),r.addEventListener("inputsourceschange",Zt),B.xrCompatible!==!0&&(yield t.makeXRCompatible()),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const On={antialias:r.renderState.layers===void 0?B.antialias:!0,alpha:!0,depth:B.depth,stencil:B.stencil,framebufferScaleFactor:o};b=new XRWebGLLayer(r,t,On),r.updateRenderState({baseLayer:b}),M=new zi(b.framebufferWidth,b.framebufferHeight,{format:lr,type:Bt,colorSpace:e.outputColorSpace,stencilBuffer:B.stencil})}else{let On=null,er=null,ar=null;B.depth&&(ar=B.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,On=B.stencil?Pr:ai,er=B.stencil?Vn:Ie);const bt={colorFormat:t.RGBA8,depthFormat:ar,scaleFactor:o};_=new XRWebGLBinding(r,t),y=_.createProjectionLayer(bt),r.updateRenderState({layers:[y]}),M=new zi(y.textureWidth,y.textureHeight,{format:lr,type:Bt,depthTexture:new S2(y.textureWidth,y.textureHeight,er,void 0,void 0,void 0,void 0,void 0,void 0,On),stencilBuffer:B.stencil,colorSpace:e.outputColorSpace,samples:B.antialias?4:0});const Yr=e.properties.get(M);Yr.__ignoreDepthValues=y.ignoreDepthValues}M.isXRRenderTarget=!0,this.setFoveation(f),d=null,l=yield r.requestReferenceSpace(c),sr.setContext(r),sr.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function Zt(fn){for(let On=0;On<fn.removed.length;On++){const er=fn.removed[On],ar=V.indexOf(er);ar>=0&&(V[ar]=null,q[ar].disconnect(er))}for(let On=0;On<fn.added.length;On++){const er=fn.added[On];let ar=V.indexOf(er);if(ar===-1){for(let Yr=0;Yr<q.length;Yr++)if(Yr>=V.length){V.push(er),ar=Yr;break}else if(V[Yr]===null){V[Yr]=er,ar=Yr;break}if(ar===-1)break}const bt=q[ar];bt&&bt.connect(er)}}const on=new Ee,Dn=new Ee;function Ln(fn,On,er){on.setFromMatrixPosition(On.matrixWorld),Dn.setFromMatrixPosition(er.matrixWorld);const ar=on.distanceTo(Dn),bt=On.projectionMatrix.elements,Yr=er.projectionMatrix.elements,ei=bt[14]/(bt[10]-1),Kn=bt[14]/(bt[10]+1),br=(bt[9]+1)/bt[5],Nn=(bt[9]-1)/bt[5],vn=(bt[8]-1)/bt[0],zn=(Yr[8]+1)/Yr[0],mr=ei*vn,rr=ei*zn,Fr=ar/(-vn+zn),kr=Fr*-vn;On.matrixWorld.decompose(fn.position,fn.quaternion,fn.scale),fn.translateX(kr),fn.translateZ(Fr),fn.matrixWorld.compose(fn.position,fn.quaternion,fn.scale),fn.matrixWorldInverse.copy(fn.matrixWorld).invert();const Ir=ei+Fr,vi=Kn+Fr,Bi=mr-kr,je=rr+(ar-kr),Le=br*Kn/vi*Ir,nn=Nn*Kn/vi*Ir;fn.projectionMatrix.makePerspective(Bi,je,Le,nn,Ir,vi),fn.projectionMatrixInverse.copy(fn.projectionMatrix).invert()}function Sn(fn,On){On===null?fn.matrixWorld.copy(fn.matrix):fn.matrixWorld.multiplyMatrices(On.matrixWorld,fn.matrix),fn.matrixWorldInverse.copy(fn.matrixWorld).invert()}this.updateCamera=function(fn){if(r===null)return;se.near=nt.near=De.near=fn.near,se.far=nt.far=De.far=fn.far,(Ue!==se.near||Jt!==se.far)&&(r.updateRenderState({depthNear:se.near,depthFar:se.far}),Ue=se.near,Jt=se.far);const On=fn.parent,er=se.cameras;Sn(se,On);for(let ar=0;ar<er.length;ar++)Sn(er[ar],On);er.length===2?Ln(se,De,nt):se.projectionMatrix.copy(De.projectionMatrix),Hn(fn,se,On)};function Hn(fn,On,er){er===null?fn.matrix.copy(On.matrixWorld):(fn.matrix.copy(er.matrixWorld),fn.matrix.invert(),fn.matrix.multiply(On.matrixWorld)),fn.matrix.decompose(fn.position,fn.quaternion,fn.scale),fn.updateMatrixWorld(!0);const ar=fn.children;for(let bt=0,Yr=ar.length;bt<Yr;bt++)ar[bt].updateMatrixWorld(!0);fn.projectionMatrix.copy(On.projectionMatrix),fn.projectionMatrixInverse.copy(On.projectionMatrixInverse),fn.isPerspectiveCamera&&(fn.fov=Ds*2*Math.atan(1/fn.projectionMatrix.elements[5]),fn.zoom=1)}this.getCamera=function(){return se},this.getFoveation=function(){if(!(y===null&&b===null))return f},this.setFoveation=function(fn){f=fn,y!==null&&(y.fixedFoveation=fn),b!==null&&b.fixedFoveation!==void 0&&(b.fixedFoveation=fn)},this.getPlanes=function(){return he};let Bn=null;function hr(fn,On){if(p=On.getViewerPose(d||l),R=On,p!==null){const er=p.views;b!==null&&(e.setRenderTargetFramebuffer(M,b.framebuffer),e.setRenderTarget(M));let ar=!1;er.length!==se.cameras.length&&(se.cameras.length=0,ar=!0);for(let bt=0;bt<er.length;bt++){const Yr=er[bt];let ei=null;if(b!==null)ei=b.getViewport(Yr);else{const br=_.getViewSubImage(y,Yr);ei=br.viewport,bt===0&&(e.setRenderTargetTextures(M,br.colorTexture,y.ignoreDepthValues?void 0:br.depthStencilTexture),e.setRenderTarget(M))}let Kn=_t[bt];Kn===void 0&&(Kn=new Co,Kn.layers.enable(bt),Kn.viewport=new wr,_t[bt]=Kn),Kn.matrix.fromArray(Yr.transform.matrix),Kn.matrix.decompose(Kn.position,Kn.quaternion,Kn.scale),Kn.projectionMatrix.fromArray(Yr.projectionMatrix),Kn.projectionMatrixInverse.copy(Kn.projectionMatrix).invert(),Kn.viewport.set(ei.x,ei.y,ei.width,ei.height),bt===0&&(se.matrix.copy(Kn.matrix),se.matrix.decompose(se.position,se.quaternion,se.scale)),ar===!0&&se.cameras.push(Kn)}}for(let er=0;er<q.length;er++){const ar=V[er],bt=q[er];ar!==null&&bt!==void 0&&bt.update(ar,On,d||l)}if(Bn&&Bn(fn,On),On.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:On.detectedPlanes});let er=null;for(const ar of he)On.detectedPlanes.has(ar)||(er===null&&(er=[]),er.push(ar));if(er!==null)for(const ar of er)he.delete(ar),Re.delete(ar),n.dispatchEvent({type:"planeremoved",data:ar});for(const ar of On.detectedPlanes)if(!he.has(ar))he.add(ar),Re.set(ar,On.lastChangedTime),n.dispatchEvent({type:"planeadded",data:ar});else{const bt=Re.get(ar);ar.lastChangedTime>bt&&(Re.set(ar,ar.lastChangedTime),n.dispatchEvent({type:"planechanged",data:ar}))}}R=null}const sr=new ss;sr.setAnimationLoop(hr),this.setAnimationLoop=function(fn){Bn=fn},this.dispose=function(){}}}function m5(s,e){function t(A,M){A.matrixAutoUpdate===!0&&A.updateMatrix(),M.value.copy(A.matrix)}function n(A,M){M.color.getRGB(A.fogColor.value,H1(s)),M.isFog?(A.fogNear.value=M.near,A.fogFar.value=M.far):M.isFogExp2&&(A.fogDensity.value=M.density)}function r(A,M,q,V,he){M.isMeshBasicMaterial||M.isMeshLambertMaterial?o(A,M):M.isMeshToonMaterial?(o(A,M),_(A,M)):M.isMeshPhongMaterial?(o(A,M),p(A,M)):M.isMeshStandardMaterial?(o(A,M),y(A,M),M.isMeshPhysicalMaterial&&b(A,M,he)):M.isMeshMatcapMaterial?(o(A,M),R(A,M)):M.isMeshDepthMaterial?o(A,M):M.isMeshDistanceMaterial?(o(A,M),B(A,M)):M.isMeshNormalMaterial?o(A,M):M.isLineBasicMaterial?(l(A,M),M.isLineDashedMaterial&&c(A,M)):M.isPointsMaterial?f(A,M,q,V):M.isSpriteMaterial?d(A,M):M.isShadowMaterial?(A.color.value.copy(M.color),A.opacity.value=M.opacity):M.isShaderMaterial&&(M.uniformsNeedUpdate=!1)}function o(A,M){A.opacity.value=M.opacity,M.color&&A.diffuse.value.copy(M.color),M.emissive&&A.emissive.value.copy(M.emissive).multiplyScalar(M.emissiveIntensity),M.map&&(A.map.value=M.map,t(M.map,A.mapTransform)),M.alphaMap&&(A.alphaMap.value=M.alphaMap,t(M.alphaMap,A.alphaMapTransform)),M.bumpMap&&(A.bumpMap.value=M.bumpMap,t(M.bumpMap,A.bumpMapTransform),A.bumpScale.value=M.bumpScale,M.side===k&&(A.bumpScale.value*=-1)),M.normalMap&&(A.normalMap.value=M.normalMap,t(M.normalMap,A.normalMapTransform),A.normalScale.value.copy(M.normalScale),M.side===k&&A.normalScale.value.negate()),M.displacementMap&&(A.displacementMap.value=M.displacementMap,t(M.displacementMap,A.displacementMapTransform),A.displacementScale.value=M.displacementScale,A.displacementBias.value=M.displacementBias),M.emissiveMap&&(A.emissiveMap.value=M.emissiveMap,t(M.emissiveMap,A.emissiveMapTransform)),M.specularMap&&(A.specularMap.value=M.specularMap,t(M.specularMap,A.specularMapTransform)),M.alphaTest>0&&(A.alphaTest.value=M.alphaTest);const q=e.get(M).envMap;if(q&&(A.envMap.value=q,A.flipEnvMap.value=q.isCubeTexture&&q.isRenderTargetTexture===!1?-1:1,A.reflectivity.value=M.reflectivity,A.ior.value=M.ior,A.refractionRatio.value=M.refractionRatio),M.lightMap){A.lightMap.value=M.lightMap;const V=s.useLegacyLights===!0?Math.PI:1;A.lightMapIntensity.value=M.lightMapIntensity*V,t(M.lightMap,A.lightMapTransform)}M.aoMap&&(A.aoMap.value=M.aoMap,A.aoMapIntensity.value=M.aoMapIntensity,t(M.aoMap,A.aoMapTransform))}function l(A,M){A.diffuse.value.copy(M.color),A.opacity.value=M.opacity,M.map&&(A.map.value=M.map,t(M.map,A.mapTransform))}function c(A,M){A.dashSize.value=M.dashSize,A.totalSize.value=M.dashSize+M.gapSize,A.scale.value=M.scale}function f(A,M,q,V){A.diffuse.value.copy(M.color),A.opacity.value=M.opacity,A.size.value=M.size*q,A.scale.value=V*.5,M.map&&(A.map.value=M.map,t(M.map,A.uvTransform)),M.alphaMap&&(A.alphaMap.value=M.alphaMap),M.alphaTest>0&&(A.alphaTest.value=M.alphaTest)}function d(A,M){A.diffuse.value.copy(M.color),A.opacity.value=M.opacity,A.rotation.value=M.rotation,M.map&&(A.map.value=M.map,t(M.map,A.mapTransform)),M.alphaMap&&(A.alphaMap.value=M.alphaMap),M.alphaTest>0&&(A.alphaTest.value=M.alphaTest)}function p(A,M){A.specular.value.copy(M.specular),A.shininess.value=Math.max(M.shininess,1e-4)}function _(A,M){M.gradientMap&&(A.gradientMap.value=M.gradientMap)}function y(A,M){A.metalness.value=M.metalness,M.metalnessMap&&(A.metalnessMap.value=M.metalnessMap,t(M.metalnessMap,A.metalnessMapTransform)),A.roughness.value=M.roughness,M.roughnessMap&&(A.roughnessMap.value=M.roughnessMap,t(M.roughnessMap,A.roughnessMapTransform)),e.get(M).envMap&&(A.envMapIntensity.value=M.envMapIntensity)}function b(A,M,q){A.ior.value=M.ior,M.sheen>0&&(A.sheenColor.value.copy(M.sheenColor).multiplyScalar(M.sheen),A.sheenRoughness.value=M.sheenRoughness,M.sheenColorMap&&(A.sheenColorMap.value=M.sheenColorMap,t(M.sheenColorMap,A.sheenColorMapTransform)),M.sheenRoughnessMap&&(A.sheenRoughnessMap.value=M.sheenRoughnessMap,t(M.sheenRoughnessMap,A.sheenRoughnessMapTransform))),M.clearcoat>0&&(A.clearcoat.value=M.clearcoat,A.clearcoatRoughness.value=M.clearcoatRoughness,M.clearcoatMap&&(A.clearcoatMap.value=M.clearcoatMap,t(M.clearcoatMap,A.clearcoatMapTransform)),M.clearcoatRoughnessMap&&(A.clearcoatRoughnessMap.value=M.clearcoatRoughnessMap,t(M.clearcoatRoughnessMap,A.clearcoatRoughnessMapTransform)),M.clearcoatNormalMap&&(A.clearcoatNormalMap.value=M.clearcoatNormalMap,t(M.clearcoatNormalMap,A.clearcoatNormalMapTransform),A.clearcoatNormalScale.value.copy(M.clearcoatNormalScale),M.side===k&&A.clearcoatNormalScale.value.negate())),M.iridescence>0&&(A.iridescence.value=M.iridescence,A.iridescenceIOR.value=M.iridescenceIOR,A.iridescenceThicknessMinimum.value=M.iridescenceThicknessRange[0],A.iridescenceThicknessMaximum.value=M.iridescenceThicknessRange[1],M.iridescenceMap&&(A.iridescenceMap.value=M.iridescenceMap,t(M.iridescenceMap,A.iridescenceMapTransform)),M.iridescenceThicknessMap&&(A.iridescenceThicknessMap.value=M.iridescenceThicknessMap,t(M.iridescenceThicknessMap,A.iridescenceThicknessMapTransform))),M.transmission>0&&(A.transmission.value=M.transmission,A.transmissionSamplerMap.value=q.texture,A.transmissionSamplerSize.value.set(q.width,q.height),M.transmissionMap&&(A.transmissionMap.value=M.transmissionMap,t(M.transmissionMap,A.transmissionMapTransform)),A.thickness.value=M.thickness,M.thicknessMap&&(A.thicknessMap.value=M.thicknessMap,t(M.thicknessMap,A.thicknessMapTransform)),A.attenuationDistance.value=M.attenuationDistance,A.attenuationColor.value.copy(M.attenuationColor)),A.specularIntensity.value=M.specularIntensity,A.specularColor.value.copy(M.specularColor),M.specularColorMap&&(A.specularColorMap.value=M.specularColorMap,t(M.specularColorMap,A.specularColorMapTransform)),M.specularIntensityMap&&(A.specularIntensityMap.value=M.specularIntensityMap,t(M.specularIntensityMap,A.specularIntensityMapTransform))}function R(A,M){M.matcap&&(A.matcap.value=M.matcap)}function B(A,M){const q=e.get(M).light;A.referencePosition.value.setFromMatrixPosition(q.matrixWorld),A.nearDistance.value=q.shadow.camera.near,A.farDistance.value=q.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function g5(s,e,t,n){let r={},o={},l=[];const c=t.isWebGL2?s.getParameter(s.MAX_UNIFORM_BUFFER_BINDINGS):0;function f(q,V){const he=V.program;n.uniformBlockBinding(q,he)}function d(q,V){let he=r[q.id];he===void 0&&(R(q),he=p(q),r[q.id]=he,q.addEventListener("dispose",A));const Re=V.program;n.updateUBOMapping(q,Re);const De=e.render.frame;o[q.id]!==De&&(y(q),o[q.id]=De)}function p(q){const V=_();q.__bindingPointIndex=V;const he=s.createBuffer(),Re=q.__size,De=q.usage;return s.bindBuffer(s.UNIFORM_BUFFER,he),s.bufferData(s.UNIFORM_BUFFER,Re,De),s.bindBuffer(s.UNIFORM_BUFFER,null),s.bindBufferBase(s.UNIFORM_BUFFER,V,he),he}function _(){for(let q=0;q<c;q++)if(l.indexOf(q)===-1)return l.push(q),q;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function y(q){const V=r[q.id],he=q.uniforms,Re=q.__cache;s.bindBuffer(s.UNIFORM_BUFFER,V);for(let De=0,nt=he.length;De<nt;De++){const _t=he[De];if(b(_t,De,Re)===!0){const se=_t.__offset,Ue=Array.isArray(_t.value)?_t.value:[_t.value];let Jt=0;for(let gn=0;gn<Ue.length;gn++){const Ut=Ue[gn],Zt=B(Ut);typeof Ut=="number"?(_t.__data[0]=Ut,s.bufferSubData(s.UNIFORM_BUFFER,se+Jt,_t.__data)):Ut.isMatrix3?(_t.__data[0]=Ut.elements[0],_t.__data[1]=Ut.elements[1],_t.__data[2]=Ut.elements[2],_t.__data[3]=Ut.elements[0],_t.__data[4]=Ut.elements[3],_t.__data[5]=Ut.elements[4],_t.__data[6]=Ut.elements[5],_t.__data[7]=Ut.elements[0],_t.__data[8]=Ut.elements[6],_t.__data[9]=Ut.elements[7],_t.__data[10]=Ut.elements[8],_t.__data[11]=Ut.elements[0]):(Ut.toArray(_t.__data,Jt),Jt+=Zt.storage/Float32Array.BYTES_PER_ELEMENT)}s.bufferSubData(s.UNIFORM_BUFFER,se,_t.__data)}}s.bindBuffer(s.UNIFORM_BUFFER,null)}function b(q,V,he){const Re=q.value;if(he[V]===void 0){if(typeof Re=="number")he[V]=Re;else{const De=Array.isArray(Re)?Re:[Re],nt=[];for(let _t=0;_t<De.length;_t++)nt.push(De[_t].clone());he[V]=nt}return!0}else if(typeof Re=="number"){if(he[V]!==Re)return he[V]=Re,!0}else{const De=Array.isArray(he[V])?he[V]:[he[V]],nt=Array.isArray(Re)?Re:[Re];for(let _t=0;_t<De.length;_t++){const se=De[_t];if(se.equals(nt[_t])===!1)return se.copy(nt[_t]),!0}}return!1}function R(q){const V=q.uniforms;let he=0;const Re=16;let De=0;for(let nt=0,_t=V.length;nt<_t;nt++){const se=V[nt],Ue={boundary:0,storage:0},Jt=Array.isArray(se.value)?se.value:[se.value];for(let gn=0,Ut=Jt.length;gn<Ut;gn++){const Zt=Jt[gn],on=B(Zt);Ue.boundary+=on.boundary,Ue.storage+=on.storage}if(se.__data=new Float32Array(Ue.storage/Float32Array.BYTES_PER_ELEMENT),se.__offset=he,nt>0){De=he%Re;const gn=Re-De;De!==0&&gn-Ue.boundary<0&&(he+=Re-De,se.__offset=he)}he+=Ue.storage}return De=he%Re,De>0&&(he+=Re-De),q.__size=he,q.__cache={},this}function B(q){const V={boundary:0,storage:0};return typeof q=="number"?(V.boundary=4,V.storage=4):q.isVector2?(V.boundary=8,V.storage=8):q.isVector3||q.isColor?(V.boundary=16,V.storage=12):q.isVector4?(V.boundary=16,V.storage=16):q.isMatrix3?(V.boundary=48,V.storage=48):q.isMatrix4?(V.boundary=64,V.storage=64):q.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",q),V}function A(q){const V=q.target;V.removeEventListener("dispose",A);const he=l.indexOf(V.__bindingPointIndex);l.splice(he,1),s.deleteBuffer(r[V.id]),delete r[V.id],delete o[V.id]}function M(){for(const q in r)s.deleteBuffer(r[q]);l=[],r={},o={}}return{bind:f,update:d,dispose:M}}function v5(){const s=Ai("canvas");return s.style.display="block",s}class R2{constructor(e={}){const{canvas:t=v5(),context:n=null,depth:r=!0,stencil:o=!0,alpha:l=!1,antialias:c=!1,premultipliedAlpha:f=!0,preserveDrawingBuffer:d=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:_=!1}=e;this.isWebGLRenderer=!0;let y;n!==null?y=n.getContextAttributes().alpha:y=l;let b=null,R=null;const B=[],A=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=Sr,this.useLegacyLights=!0,this.toneMapping=pt,this.toneMappingExposure=1;const M=this;let q=!1,V=0,he=0,Re=null,De=-1,nt=null;const _t=new wr,se=new wr;let Ue=null,Jt=t.width,gn=t.height,Ut=1,Zt=null,on=null;const Dn=new wr(0,0,Jt,gn),Ln=new wr(0,0,Jt,gn);let Sn=!1;const Hn=new ho;let Bn=!1,hr=!1,sr=null;const fn=new Ur,On=new Ee,er={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ar(){return Re===null?Ut:1}let bt=n;function Yr(He,jt){for(let pn=0;pn<He.length;pn++){const Vt=He[pn],_n=t.getContext(Vt,jt);if(_n!==null)return _n}return null}try{const He={alpha:!0,depth:r,stencil:o,antialias:c,premultipliedAlpha:f,preserveDrawingBuffer:d,powerPreference:p,failIfMajorPerformanceCaveat:_};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${L}`),t.addEventListener("webglcontextlost",Lr,!1),t.addEventListener("webglcontextrestored",Li,!1),t.addEventListener("webglcontextcreationerror",Zi,!1),bt===null){const jt=["webgl2","webgl","experimental-webgl"];if(M.isWebGL1Renderer===!0&&jt.shift(),bt=Yr(jt,He),bt===null)throw Yr(jt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}bt.getShaderPrecisionFormat===void 0&&(bt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(He){throw console.error("THREE.WebGLRenderer: "+He.message),He}let ei,Kn,br,Nn,vn,zn,mr,rr,Fr,kr,Ir,vi,Bi,je,Le,nn,Un,Wn,or,Zr,pr,mn,xr,Dr;function $r(){ei=new wd(bt),Kn=new gd(bt,ei,e),ei.init(Kn),mn=new M2(bt,ei,Kn),br=new f5(bt,ei,Kn),Nn=new Ed(bt),vn=new Qh,zn=new d5(bt,ei,br,vn,Kn,mn,Nn),mr=new Cd(M),rr=new xd(M),Fr=new f1(bt,Kn),xr=new pd(bt,ei,Fr,Kn),kr=new bd(bt,Fr,Nn,xr),Ir=new Td(bt,kr,Fr,Nn),or=new Ld(bt,Kn,zn),nn=new vd(vn),vi=new Jh(M,mr,rr,ei,Kn,xr,nn),Bi=new m5(M,vn),je=new t5,Le=new a5(ei,Kn),Wn=new hd(M,mr,rr,br,Ir,y,f),Un=new u5(M,Ir,Kn),Dr=new g5(bt,Nn,Kn,br),Zr=new md(bt,ei,Nn,Kn),pr=new Md(bt,ei,Nn,Kn),Nn.programs=vi.programs,M.capabilities=Kn,M.extensions=ei,M.properties=vn,M.renderLists=je,M.shadowMap=Un,M.state=br,M.info=Nn}$r();const gr=new p5(M,bt);this.xr=gr,this.getContext=function(){return bt},this.getContextAttributes=function(){return bt.getContextAttributes()},this.forceContextLoss=function(){const He=ei.get("WEBGL_lose_context");He&&He.loseContext()},this.forceContextRestore=function(){const He=ei.get("WEBGL_lose_context");He&&He.restoreContext()},this.getPixelRatio=function(){return Ut},this.setPixelRatio=function(He){He!==void 0&&(Ut=He,this.setSize(Jt,gn,!1))},this.getSize=function(He){return He.set(Jt,gn)},this.setSize=function(He,jt,pn=!0){if(gr.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Jt=He,gn=jt,t.width=Math.floor(He*Ut),t.height=Math.floor(jt*Ut),pn===!0&&(t.style.width=He+"px",t.style.height=jt+"px"),this.setViewport(0,0,He,jt)},this.getDrawingBufferSize=function(He){return He.set(Jt*Ut,gn*Ut).floor()},this.setDrawingBufferSize=function(He,jt,pn){Jt=He,gn=jt,Ut=pn,t.width=Math.floor(He*pn),t.height=Math.floor(jt*pn),this.setViewport(0,0,He,jt)},this.getCurrentViewport=function(He){return He.copy(_t)},this.getViewport=function(He){return He.copy(Dn)},this.setViewport=function(He,jt,pn,Vt){He.isVector4?Dn.set(He.x,He.y,He.z,He.w):Dn.set(He,jt,pn,Vt),br.viewport(_t.copy(Dn).multiplyScalar(Ut).floor())},this.getScissor=function(He){return He.copy(Ln)},this.setScissor=function(He,jt,pn,Vt){He.isVector4?Ln.set(He.x,He.y,He.z,He.w):Ln.set(He,jt,pn,Vt),br.scissor(se.copy(Ln).multiplyScalar(Ut).floor())},this.getScissorTest=function(){return Sn},this.setScissorTest=function(He){br.setScissorTest(Sn=He)},this.setOpaqueSort=function(He){Zt=He},this.setTransparentSort=function(He){on=He},this.getClearColor=function(He){return He.copy(Wn.getClearColor())},this.setClearColor=function(){Wn.setClearColor.apply(Wn,arguments)},this.getClearAlpha=function(){return Wn.getClearAlpha()},this.setClearAlpha=function(){Wn.setClearAlpha.apply(Wn,arguments)},this.clear=function(He=!0,jt=!0,pn=!0){let Vt=0;He&&(Vt|=bt.COLOR_BUFFER_BIT),jt&&(Vt|=bt.DEPTH_BUFFER_BIT),pn&&(Vt|=bt.STENCIL_BUFFER_BIT),bt.clear(Vt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Lr,!1),t.removeEventListener("webglcontextrestored",Li,!1),t.removeEventListener("webglcontextcreationerror",Zi,!1),je.dispose(),Le.dispose(),vn.dispose(),mr.dispose(),rr.dispose(),Ir.dispose(),xr.dispose(),Dr.dispose(),vi.dispose(),gr.dispose(),gr.removeEventListener("sessionstart",Mr),gr.removeEventListener("sessionend",Yi),sr&&(sr.dispose(),sr=null),Ki.stop()};function Lr(He){He.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),q=!0}function Li(){console.log("THREE.WebGLRenderer: Context Restored."),q=!1;const He=Nn.autoReset,jt=Un.enabled,pn=Un.autoUpdate,Vt=Un.needsUpdate,_n=Un.type;$r(),Nn.autoReset=He,Un.enabled=jt,Un.autoUpdate=pn,Un.needsUpdate=Vt,Un.type=_n}function Zi(He){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",He.statusMessage)}function So(He){const jt=He.target;jt.removeEventListener("dispose",So),Mt(jt)}function Mt(He){hn(He),vn.remove(He)}function hn(He){const jt=vn.get(He).programs;jt!==void 0&&(jt.forEach(function(pn){vi.releaseProgram(pn)}),He.isShaderMaterial&&vi.releaseShaderCache(He))}this.renderBufferDirect=function(He,jt,pn,Vt,_n,Hr){jt===null&&(jt=er);const jr=_n.isMesh&&_n.matrixWorld.determinant()<0,ni=Ep(He,jt,pn,Vt,_n);br.setMaterial(Vt,jr);let pi=pn.index,yi=1;Vt.wireframe===!0&&(pi=kr.getWireframeAttribute(pn),yi=2);const xi=pn.drawRange,wi=pn.attributes.position;let Gi=xi.start*yi,Ps=(xi.start+xi.count)*yi;Hr!==null&&(Gi=Math.max(Gi,Hr.start*yi),Ps=Math.min(Ps,(Hr.start+Hr.count)*yi)),pi!==null?(Gi=Math.max(Gi,0),Ps=Math.min(Ps,pi.count)):wi!=null&&(Gi=Math.max(Gi,0),Ps=Math.min(Ps,wi.count));const Ia=Ps-Gi;if(Ia<0||Ia===1/0)return;xr.setup(_n,Vt,ni,pn,pi);let Bl,ko=Zr;if(pi!==null&&(Bl=Fr.get(pi),ko=pr,ko.setIndex(Bl)),_n.isMesh)Vt.wireframe===!0?(br.setLineWidth(Vt.wireframeLinewidth*ar()),ko.setMode(bt.LINES)):ko.setMode(bt.TRIANGLES);else if(_n.isLine){let Ti=Vt.linewidth;Ti===void 0&&(Ti=1),br.setLineWidth(Ti*ar()),_n.isLineSegments?ko.setMode(bt.LINES):_n.isLineLoop?ko.setMode(bt.LINE_LOOP):ko.setMode(bt.LINE_STRIP)}else _n.isPoints?ko.setMode(bt.POINTS):_n.isSprite&&ko.setMode(bt.TRIANGLES);if(_n.isInstancedMesh)ko.renderInstances(Gi,Ia,_n.count);else if(pn.isInstancedBufferGeometry){const Ti=pn._maxInstanceCount!==void 0?pn._maxInstanceCount:1/0,nd=Math.min(pn.instanceCount,Ti);ko.renderInstances(Gi,Ia,nd)}else ko.render(Gi,Ia)},this.compile=function(He,jt){function pn(Vt,_n,Hr){Vt.transparent===!0&&Vt.side===rt&&Vt.forceSinglePass===!1?(Vt.side=k,Vt.needsUpdate=!0,N0(Vt,_n,Hr),Vt.side=Se,Vt.needsUpdate=!0,N0(Vt,_n,Hr),Vt.side=rt):N0(Vt,_n,Hr)}R=Le.get(He),R.init(),A.push(R),He.traverseVisible(function(Vt){Vt.isLight&&Vt.layers.test(jt.layers)&&(R.pushLight(Vt),Vt.castShadow&&R.pushShadow(Vt))}),R.setupLights(M.useLegacyLights),He.traverse(function(Vt){const _n=Vt.material;if(_n)if(Array.isArray(_n))for(let Hr=0;Hr<_n.length;Hr++){const jr=_n[Hr];pn(jr,He,Vt)}else pn(_n,He,Vt)}),A.pop(),R=null};let Fn=null;function fr(He){Fn&&Fn(He)}function Mr(){Ki.stop()}function Yi(){Ki.start()}const Ki=new ss;Ki.setAnimationLoop(fr),typeof self!="undefined"&&Ki.setContext(self),this.setAnimationLoop=function(He){Fn=He,gr.setAnimationLoop(He),He===null?Ki.stop():Ki.start()},gr.addEventListener("sessionstart",Mr),gr.addEventListener("sessionend",Yi),this.render=function(He,jt){if(jt!==void 0&&jt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(q===!0)return;He.matrixWorldAutoUpdate===!0&&He.updateMatrixWorld(),jt.parent===null&&jt.matrixWorldAutoUpdate===!0&&jt.updateMatrixWorld(),gr.enabled===!0&&gr.isPresenting===!0&&(gr.cameraAutoUpdate===!0&&gr.updateCamera(jt),jt=gr.getCamera()),He.isScene===!0&&He.onBeforeRender(M,He,jt,Re),R=Le.get(He,A.length),R.init(),A.push(R),fn.multiplyMatrices(jt.projectionMatrix,jt.matrixWorldInverse),Hn.setFromProjectionMatrix(fn),hr=this.localClippingEnabled,Bn=nn.init(this.clippingPlanes,hr),b=je.get(He,B.length),b.init(),B.push(b),ms(He,jt,0,M.sortObjects),b.finish(),M.sortObjects===!0&&b.sort(Zt,on),Bn===!0&&nn.beginShadows();const pn=R.state.shadowsArray;if(Un.render(pn,He,jt),Bn===!0&&nn.endShadows(),this.info.autoReset===!0&&this.info.reset(),Wn.render(b,He),R.setupLights(M.useLegacyLights),jt.isArrayCamera){const Vt=jt.cameras;for(let _n=0,Hr=Vt.length;_n<Hr;_n++){const jr=Vt[_n];Z1(b,He,jr,jr.viewport)}}else Z1(b,He,jt);Re!==null&&(zn.updateMultisampleRenderTarget(Re),zn.updateRenderTargetMipmap(Re)),He.isScene===!0&&He.onAfterRender(M,He,jt),xr.resetDefaultState(),De=-1,nt=null,A.pop(),A.length>0?R=A[A.length-1]:R=null,B.pop(),B.length>0?b=B[B.length-1]:b=null};function ms(He,jt,pn,Vt){if(He.visible===!1)return;if(He.layers.test(jt.layers)){if(He.isGroup)pn=He.renderOrder;else if(He.isLOD)He.autoUpdate===!0&&He.update(jt);else if(He.isLight)R.pushLight(He),He.castShadow&&R.pushShadow(He);else if(He.isSprite){if(!He.frustumCulled||Hn.intersectsSprite(He)){Vt&&On.setFromMatrixPosition(He.matrixWorld).applyMatrix4(fn);const jr=Ir.update(He),ni=He.material;ni.visible&&b.push(He,jr,ni,pn,On.z,null)}}else if((He.isMesh||He.isLine||He.isPoints)&&(!He.frustumCulled||Hn.intersectsObject(He))){He.isSkinnedMesh&&He.skeleton.frame!==Nn.render.frame&&(He.skeleton.update(),He.skeleton.frame=Nn.render.frame);const jr=Ir.update(He),ni=He.material;if(Vt&&(jr.boundingSphere===null&&jr.computeBoundingSphere(),On.copy(jr.boundingSphere.center).applyMatrix4(He.matrixWorld).applyMatrix4(fn)),Array.isArray(ni)){const pi=jr.groups;for(let yi=0,xi=pi.length;yi<xi;yi++){const wi=pi[yi],Gi=ni[wi.materialIndex];Gi&&Gi.visible&&b.push(He,jr,Gi,pn,On.z,wi)}}else ni.visible&&b.push(He,jr,ni,pn,On.z,null)}}const Hr=He.children;for(let jr=0,ni=Hr.length;jr<ni;jr++)ms(Hr[jr],jt,pn,Vt)}function Z1(He,jt,pn,Vt){const _n=He.opaque,Hr=He.transmissive,jr=He.transparent;R.setupLightsView(pn),Bn===!0&&nn.setGlobalState(M.clippingPlanes,pn),Hr.length>0&&Ro(_n,Hr,jt,pn),Vt&&br.viewport(_t.copy(Vt)),_n.length>0&&pa(_n,jt,pn),Hr.length>0&&pa(Hr,jt,pn),jr.length>0&&pa(jr,jt,pn),br.buffers.depth.setTest(!0),br.buffers.depth.setMask(!0),br.buffers.color.setMask(!0),br.setPolygonOffset(!1)}function Ro(He,jt,pn,Vt){if(sr===null){const ni=Kn.isWebGL2;sr=new zi(1024,1024,{generateMipmaps:!0,type:ei.has("EXT_color_buffer_half_float")?It:Bt,minFilter:Ke,samples:ni&&c===!0?4:0})}const _n=M.getRenderTarget();M.setRenderTarget(sr),M.clear();const Hr=M.toneMapping;M.toneMapping=pt,pa(He,pn,Vt),zn.updateMultisampleRenderTarget(sr),zn.updateRenderTargetMipmap(sr);let jr=!1;for(let ni=0,pi=jt.length;ni<pi;ni++){const yi=jt[ni],xi=yi.object,wi=yi.geometry,Gi=yi.material,Ps=yi.group;if(Gi.side===rt&&xi.layers.test(Vt.layers)){const Ia=Gi.side;Gi.side=k,Gi.needsUpdate=!0,Ka(xi,pn,Vt,wi,Gi,Ps),Gi.side=Ia,Gi.needsUpdate=!0,jr=!0}}jr===!0&&(zn.updateMultisampleRenderTarget(sr),zn.updateRenderTargetMipmap(sr)),M.setRenderTarget(_n),M.toneMapping=Hr}function pa(He,jt,pn){const Vt=jt.isScene===!0?jt.overrideMaterial:null;for(let _n=0,Hr=He.length;_n<Hr;_n++){const jr=He[_n],ni=jr.object,pi=jr.geometry,yi=Vt===null?jr.material:Vt,xi=jr.group;ni.layers.test(pn.layers)&&Ka(ni,jt,pn,pi,yi,xi)}}function Ka(He,jt,pn,Vt,_n,Hr){He.onBeforeRender(M,jt,pn,Vt,_n,Hr),He.modelViewMatrix.multiplyMatrices(pn.matrixWorldInverse,He.matrixWorld),He.normalMatrix.getNormalMatrix(He.modelViewMatrix),_n.onBeforeRender(M,jt,pn,Vt,He,Hr),_n.transparent===!0&&_n.side===rt&&_n.forceSinglePass===!1?(_n.side=k,_n.needsUpdate=!0,M.renderBufferDirect(pn,jt,Vt,_n,He,Hr),_n.side=Se,_n.needsUpdate=!0,M.renderBufferDirect(pn,jt,Vt,_n,He,Hr),_n.side=rt):M.renderBufferDirect(pn,jt,Vt,_n,He,Hr),He.onAfterRender(M,jt,pn,Vt,_n,Hr)}function N0(He,jt,pn){jt.isScene!==!0&&(jt=er);const Vt=vn.get(He),_n=R.state.lights,Hr=R.state.shadowsArray,jr=_n.state.version,ni=vi.getParameters(He,_n.state,Hr,jt,pn),pi=vi.getProgramCacheKey(ni);let yi=Vt.programs;Vt.environment=He.isMeshStandardMaterial?jt.environment:null,Vt.fog=jt.fog,Vt.envMap=(He.isMeshStandardMaterial?rr:mr).get(He.envMap||Vt.environment),yi===void 0&&(He.addEventListener("dispose",So),yi=new Map,Vt.programs=yi);let xi=yi.get(pi);if(xi!==void 0){if(Vt.currentProgram===xi&&Vt.lightsStateVersion===jr)return ch(He,ni),xi}else ni.uniforms=vi.getUniforms(He),He.onBuild(pn,ni,M),He.onBeforeCompile(ni,M),xi=vi.acquireProgram(ni,pi),yi.set(pi,xi),Vt.uniforms=ni.uniforms;const wi=Vt.uniforms;(!He.isShaderMaterial&&!He.isRawShaderMaterial||He.clipping===!0)&&(wi.clippingPlanes=nn.uniform),ch(He,ni),Vt.needsLights=Rp(He),Vt.lightsStateVersion=jr,Vt.needsLights&&(wi.ambientLightColor.value=_n.state.ambient,wi.lightProbe.value=_n.state.probe,wi.directionalLights.value=_n.state.directional,wi.directionalLightShadows.value=_n.state.directionalShadow,wi.spotLights.value=_n.state.spot,wi.spotLightShadows.value=_n.state.spotShadow,wi.rectAreaLights.value=_n.state.rectArea,wi.ltc_1.value=_n.state.rectAreaLTC1,wi.ltc_2.value=_n.state.rectAreaLTC2,wi.pointLights.value=_n.state.point,wi.pointLightShadows.value=_n.state.pointShadow,wi.hemisphereLights.value=_n.state.hemi,wi.directionalShadowMap.value=_n.state.directionalShadowMap,wi.directionalShadowMatrix.value=_n.state.directionalShadowMatrix,wi.spotShadowMap.value=_n.state.spotShadowMap,wi.spotLightMatrix.value=_n.state.spotLightMatrix,wi.spotLightMap.value=_n.state.spotLightMap,wi.pointShadowMap.value=_n.state.pointShadowMap,wi.pointShadowMatrix.value=_n.state.pointShadowMatrix);const Gi=xi.getUniforms(),Ps=lu.seqWithValue(Gi.seq,wi);return Vt.currentProgram=xi,Vt.uniformsList=Ps,xi}function ch(He,jt){const pn=vn.get(He);pn.outputColorSpace=jt.outputColorSpace,pn.instancing=jt.instancing,pn.skinning=jt.skinning,pn.morphTargets=jt.morphTargets,pn.morphNormals=jt.morphNormals,pn.morphColors=jt.morphColors,pn.morphTargetsCount=jt.morphTargetsCount,pn.numClippingPlanes=jt.numClippingPlanes,pn.numIntersection=jt.numClipIntersection,pn.vertexAlphas=jt.vertexAlphas,pn.vertexTangents=jt.vertexTangents,pn.toneMapping=jt.toneMapping}function Ep(He,jt,pn,Vt,_n){jt.isScene!==!0&&(jt=er),zn.resetTextureUnits();const Hr=jt.fog,jr=Vt.isMeshStandardMaterial?jt.environment:null,ni=Re===null?M.outputColorSpace:Re.isXRRenderTarget===!0?Re.texture.colorSpace:go,pi=(Vt.isMeshStandardMaterial?rr:mr).get(Vt.envMap||jr),yi=Vt.vertexColors===!0&&!!pn.attributes.color&&pn.attributes.color.itemSize===4,xi=!!Vt.normalMap&&!!pn.attributes.tangent,wi=!!pn.morphAttributes.position,Gi=!!pn.morphAttributes.normal,Ps=!!pn.morphAttributes.color,Ia=Vt.toneMapped?M.toneMapping:pt,Bl=pn.morphAttributes.position||pn.morphAttributes.normal||pn.morphAttributes.color,ko=Bl!==void 0?Bl.length:0,Ti=vn.get(Vt),nd=R.state.lights;if(Bn===!0&&(hr===!0||He!==nt)){const qs=He===nt&&Vt.id===De;nn.setState(Vt,He,qs)}let Qo=!1;Vt.version===Ti.__version?(Ti.needsLights&&Ti.lightsStateVersion!==nd.state.version||Ti.outputColorSpace!==ni||_n.isInstancedMesh&&Ti.instancing===!1||!_n.isInstancedMesh&&Ti.instancing===!0||_n.isSkinnedMesh&&Ti.skinning===!1||!_n.isSkinnedMesh&&Ti.skinning===!0||Ti.envMap!==pi||Vt.fog===!0&&Ti.fog!==Hr||Ti.numClippingPlanes!==void 0&&(Ti.numClippingPlanes!==nn.numPlanes||Ti.numIntersection!==nn.numIntersection)||Ti.vertexAlphas!==yi||Ti.vertexTangents!==xi||Ti.morphTargets!==wi||Ti.morphNormals!==Gi||Ti.morphColors!==Ps||Ti.toneMapping!==Ia||Kn.isWebGL2===!0&&Ti.morphTargetsCount!==ko)&&(Qo=!0):(Qo=!0,Ti.__version=Vt.version);let Ul=Ti.currentProgram;Qo===!0&&(Ul=N0(Vt,jt,_n));let uh=!1,Bu=!1,rd=!1;const Os=Ul.getUniforms(),Vl=Ti.uniforms;if(br.useProgram(Ul.program)&&(uh=!0,Bu=!0,rd=!0),Vt.id!==De&&(De=Vt.id,Bu=!0),uh||nt!==He){if(Os.setValue(bt,"projectionMatrix",He.projectionMatrix),Kn.logarithmicDepthBuffer&&Os.setValue(bt,"logDepthBufFC",2/(Math.log(He.far+1)/Math.LN2)),nt!==He&&(nt=He,Bu=!0,rd=!0),Vt.isShaderMaterial||Vt.isMeshPhongMaterial||Vt.isMeshToonMaterial||Vt.isMeshStandardMaterial||Vt.envMap){const qs=Os.map.cameraPosition;qs!==void 0&&qs.setValue(bt,On.setFromMatrixPosition(He.matrixWorld))}(Vt.isMeshPhongMaterial||Vt.isMeshToonMaterial||Vt.isMeshLambertMaterial||Vt.isMeshBasicMaterial||Vt.isMeshStandardMaterial||Vt.isShaderMaterial)&&Os.setValue(bt,"isOrthographic",He.isOrthographicCamera===!0),(Vt.isMeshPhongMaterial||Vt.isMeshToonMaterial||Vt.isMeshLambertMaterial||Vt.isMeshBasicMaterial||Vt.isMeshStandardMaterial||Vt.isShaderMaterial||Vt.isShadowMaterial||_n.isSkinnedMesh)&&Os.setValue(bt,"viewMatrix",He.matrixWorldInverse)}if(_n.isSkinnedMesh){Os.setOptional(bt,_n,"bindMatrix"),Os.setOptional(bt,_n,"bindMatrixInverse");const qs=_n.skeleton;qs&&(Kn.floatVertexTextures?(qs.boneTexture===null&&qs.computeBoneTexture(),Os.setValue(bt,"boneTexture",qs.boneTexture,zn),Os.setValue(bt,"boneTextureSize",qs.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const id=pn.morphAttributes;if((id.position!==void 0||id.normal!==void 0||id.color!==void 0&&Kn.isWebGL2===!0)&&or.update(_n,pn,Ul),(Bu||Ti.receiveShadow!==_n.receiveShadow)&&(Ti.receiveShadow=_n.receiveShadow,Os.setValue(bt,"receiveShadow",_n.receiveShadow)),Vt.isMeshGouraudMaterial&&Vt.envMap!==null&&(Vl.envMap.value=pi,Vl.flipEnvMap.value=pi.isCubeTexture&&pi.isRenderTargetTexture===!1?-1:1),Bu&&(Os.setValue(bt,"toneMappingExposure",M.toneMappingExposure),Ti.needsLights&&Sp(Vl,rd),Hr&&Vt.fog===!0&&Bi.refreshFogUniforms(Vl,Hr),Bi.refreshMaterialUniforms(Vl,Vt,Ut,gn,sr),lu.upload(bt,Ti.uniformsList,Vl,zn)),Vt.isShaderMaterial&&Vt.uniformsNeedUpdate===!0&&(lu.upload(bt,Ti.uniformsList,Vl,zn),Vt.uniformsNeedUpdate=!1),Vt.isSpriteMaterial&&Os.setValue(bt,"center",_n.center),Os.setValue(bt,"modelViewMatrix",_n.modelViewMatrix),Os.setValue(bt,"normalMatrix",_n.normalMatrix),Os.setValue(bt,"modelMatrix",_n.matrixWorld),Vt.isShaderMaterial||Vt.isRawShaderMaterial){const qs=Vt.uniformsGroups;for(let od=0,Lp=qs.length;od<Lp;od++)if(Kn.isWebGL2){const fh=qs[od];Dr.update(fh,Ul),Dr.bind(fh,Ul)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Ul}function Sp(He,jt){He.ambientLightColor.needsUpdate=jt,He.lightProbe.needsUpdate=jt,He.directionalLights.needsUpdate=jt,He.directionalLightShadows.needsUpdate=jt,He.pointLights.needsUpdate=jt,He.pointLightShadows.needsUpdate=jt,He.spotLights.needsUpdate=jt,He.spotLightShadows.needsUpdate=jt,He.rectAreaLights.needsUpdate=jt,He.hemisphereLights.needsUpdate=jt}function Rp(He){return He.isMeshLambertMaterial||He.isMeshToonMaterial||He.isMeshPhongMaterial||He.isMeshStandardMaterial||He.isShadowMaterial||He.isShaderMaterial&&He.lights===!0}this.getActiveCubeFace=function(){return V},this.getActiveMipmapLevel=function(){return he},this.getRenderTarget=function(){return Re},this.setRenderTargetTextures=function(He,jt,pn){vn.get(He.texture).__webglTexture=jt,vn.get(He.depthTexture).__webglTexture=pn;const Vt=vn.get(He);Vt.__hasExternalTextures=!0,Vt.__hasExternalTextures&&(Vt.__autoAllocateDepthBuffer=pn===void 0,Vt.__autoAllocateDepthBuffer||ei.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Vt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(He,jt){const pn=vn.get(He);pn.__webglFramebuffer=jt,pn.__useDefaultFramebuffer=jt===void 0},this.setRenderTarget=function(He,jt=0,pn=0){Re=He,V=jt,he=pn;let Vt=!0,_n=null,Hr=!1,jr=!1;if(He){const pi=vn.get(He);pi.__useDefaultFramebuffer!==void 0?(br.bindFramebuffer(bt.FRAMEBUFFER,null),Vt=!1):pi.__webglFramebuffer===void 0?zn.setupRenderTarget(He):pi.__hasExternalTextures&&zn.rebindTextures(He,vn.get(He.texture).__webglTexture,vn.get(He.depthTexture).__webglTexture);const yi=He.texture;(yi.isData3DTexture||yi.isDataArrayTexture||yi.isCompressedArrayTexture)&&(jr=!0);const xi=vn.get(He).__webglFramebuffer;He.isWebGLCubeRenderTarget?(_n=xi[jt],Hr=!0):Kn.isWebGL2&&He.samples>0&&zn.useMultisampledRTT(He)===!1?_n=vn.get(He).__webglMultisampledFramebuffer:_n=xi,_t.copy(He.viewport),se.copy(He.scissor),Ue=He.scissorTest}else _t.copy(Dn).multiplyScalar(Ut).floor(),se.copy(Ln).multiplyScalar(Ut).floor(),Ue=Sn;if(br.bindFramebuffer(bt.FRAMEBUFFER,_n)&&Kn.drawBuffers&&Vt&&br.drawBuffers(He,_n),br.viewport(_t),br.scissor(se),br.setScissorTest(Ue),Hr){const pi=vn.get(He.texture);bt.framebufferTexture2D(bt.FRAMEBUFFER,bt.COLOR_ATTACHMENT0,bt.TEXTURE_CUBE_MAP_POSITIVE_X+jt,pi.__webglTexture,pn)}else if(jr){const pi=vn.get(He.texture),yi=jt||0;bt.framebufferTextureLayer(bt.FRAMEBUFFER,bt.COLOR_ATTACHMENT0,pi.__webglTexture,pn||0,yi)}De=-1},this.readRenderTargetPixels=function(He,jt,pn,Vt,_n,Hr,jr){if(!(He&&He.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ni=vn.get(He).__webglFramebuffer;if(He.isWebGLCubeRenderTarget&&jr!==void 0&&(ni=ni[jr]),ni){br.bindFramebuffer(bt.FRAMEBUFFER,ni);try{const pi=He.texture,yi=pi.format,xi=pi.type;if(yi!==lr&&mn.convert(yi)!==bt.getParameter(bt.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const wi=xi===It&&(ei.has("EXT_color_buffer_half_float")||Kn.isWebGL2&&ei.has("EXT_color_buffer_float"));if(xi!==Bt&&mn.convert(xi)!==bt.getParameter(bt.IMPLEMENTATION_COLOR_READ_TYPE)&&!(xi===ct&&(Kn.isWebGL2||ei.has("OES_texture_float")||ei.has("WEBGL_color_buffer_float")))&&!wi){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}jt>=0&&jt<=He.width-Vt&&pn>=0&&pn<=He.height-_n&&bt.readPixels(jt,pn,Vt,_n,mn.convert(yi),mn.convert(xi),Hr)}finally{const pi=Re!==null?vn.get(Re).__webglFramebuffer:null;br.bindFramebuffer(bt.FRAMEBUFFER,pi)}}},this.copyFramebufferToTexture=function(He,jt,pn=0){const Vt=Math.pow(2,-pn),_n=Math.floor(jt.image.width*Vt),Hr=Math.floor(jt.image.height*Vt);zn.setTexture2D(jt,0),bt.copyTexSubImage2D(bt.TEXTURE_2D,pn,0,0,He.x,He.y,_n,Hr),br.unbindTexture()},this.copyTextureToTexture=function(He,jt,pn,Vt=0){const _n=jt.image.width,Hr=jt.image.height,jr=mn.convert(pn.format),ni=mn.convert(pn.type);zn.setTexture2D(pn,0),bt.pixelStorei(bt.UNPACK_FLIP_Y_WEBGL,pn.flipY),bt.pixelStorei(bt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,pn.premultiplyAlpha),bt.pixelStorei(bt.UNPACK_ALIGNMENT,pn.unpackAlignment),jt.isDataTexture?bt.texSubImage2D(bt.TEXTURE_2D,Vt,He.x,He.y,_n,Hr,jr,ni,jt.image.data):jt.isCompressedTexture?bt.compressedTexSubImage2D(bt.TEXTURE_2D,Vt,He.x,He.y,jt.mipmaps[0].width,jt.mipmaps[0].height,jr,jt.mipmaps[0].data):bt.texSubImage2D(bt.TEXTURE_2D,Vt,He.x,He.y,jr,ni,jt.image),Vt===0&&pn.generateMipmaps&&bt.generateMipmap(bt.TEXTURE_2D),br.unbindTexture()},this.copyTextureToTexture3D=function(He,jt,pn,Vt,_n=0){if(M.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Hr=He.max.x-He.min.x+1,jr=He.max.y-He.min.y+1,ni=He.max.z-He.min.z+1,pi=mn.convert(Vt.format),yi=mn.convert(Vt.type);let xi;if(Vt.isData3DTexture)zn.setTexture3D(Vt,0),xi=bt.TEXTURE_3D;else if(Vt.isDataArrayTexture)zn.setTexture2DArray(Vt,0),xi=bt.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}bt.pixelStorei(bt.UNPACK_FLIP_Y_WEBGL,Vt.flipY),bt.pixelStorei(bt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Vt.premultiplyAlpha),bt.pixelStorei(bt.UNPACK_ALIGNMENT,Vt.unpackAlignment);const wi=bt.getParameter(bt.UNPACK_ROW_LENGTH),Gi=bt.getParameter(bt.UNPACK_IMAGE_HEIGHT),Ps=bt.getParameter(bt.UNPACK_SKIP_PIXELS),Ia=bt.getParameter(bt.UNPACK_SKIP_ROWS),Bl=bt.getParameter(bt.UNPACK_SKIP_IMAGES),ko=pn.isCompressedTexture?pn.mipmaps[0]:pn.image;bt.pixelStorei(bt.UNPACK_ROW_LENGTH,ko.width),bt.pixelStorei(bt.UNPACK_IMAGE_HEIGHT,ko.height),bt.pixelStorei(bt.UNPACK_SKIP_PIXELS,He.min.x),bt.pixelStorei(bt.UNPACK_SKIP_ROWS,He.min.y),bt.pixelStorei(bt.UNPACK_SKIP_IMAGES,He.min.z),pn.isDataTexture||pn.isData3DTexture?bt.texSubImage3D(xi,_n,jt.x,jt.y,jt.z,Hr,jr,ni,pi,yi,ko.data):pn.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),bt.compressedTexSubImage3D(xi,_n,jt.x,jt.y,jt.z,Hr,jr,ni,pi,ko.data)):bt.texSubImage3D(xi,_n,jt.x,jt.y,jt.z,Hr,jr,ni,pi,yi,ko),bt.pixelStorei(bt.UNPACK_ROW_LENGTH,wi),bt.pixelStorei(bt.UNPACK_IMAGE_HEIGHT,Gi),bt.pixelStorei(bt.UNPACK_SKIP_PIXELS,Ps),bt.pixelStorei(bt.UNPACK_SKIP_ROWS,Ia),bt.pixelStorei(bt.UNPACK_SKIP_IMAGES,Bl),_n===0&&Vt.generateMipmaps&&bt.generateMipmap(xi),br.unbindTexture()},this.initTexture=function(He){He.isCubeTexture?zn.setTextureCube(He,0):He.isData3DTexture?zn.setTexture3D(He,0):He.isDataArrayTexture||He.isCompressedArrayTexture?zn.setTexture2DArray(He,0):zn.setTexture2D(He,0),br.unbindTexture()},this.resetState=function(){V=0,he=0,Re=null,br.reset(),xr.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Sr?to:Is}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===to?Sr:go}}class L2 extends R2{}L2.prototype.isWebGL1Renderer=!0;class s0{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new qn(e),this.density=t}clone(){return new s0(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class a0{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new qn(e),this.near=t,this.far=n}clone(){return new a0(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class T2 extends _i{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class l0{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=yn,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Oo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,o=this.stride;r<o;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Oo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Oo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ts=new Ee;class El{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Ts.fromBufferAttribute(this,t),Ts.applyMatrix4(e),this.setXYZ(t,Ts.x,Ts.y,Ts.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Ts.fromBufferAttribute(this,t),Ts.applyNormalMatrix(e),this.setXYZ(t,Ts.x,Ts.y,Ts.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Ts.fromBufferAttribute(this,t),Ts.transformDirection(e),this.setXYZ(t,Ts.x,Ts.y,Ts.z);return this}setX(e,t){return this.normalized&&(t=Tr(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Tr(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Tr(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Tr(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ki(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ki(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ki(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ki(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Tr(t,this.array),n=Tr(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Tr(t,this.array),n=Tr(n,this.array),r=Tr(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=Tr(t,this.array),n=Tr(n,this.array),r=Tr(r,this.array),o=Tr(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return new Vi(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new El(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class _f extends Uo{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new qn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Cc;const cu=new Ee,_c=new Ee,yc=new Ee,xc=new Cn,uu=new Cn,A2=new Ur,c0=new Ee,fu=new Ee,u0=new Ee,P2=new Cn,yf=new Cn,O2=new Cn;class I2 extends _i{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",Cc===void 0){Cc=new xn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new l0(t,5);Cc.setIndex([0,1,2,0,2,3]),Cc.setAttribute("position",new El(n,3,0,!1)),Cc.setAttribute("uv",new El(n,2,3,!1))}this.geometry=Cc,this.material=e!==void 0?e:new _f,this.center=new Cn(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_c.setFromMatrixScale(this.matrixWorld),A2.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),yc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_c.multiplyScalar(-yc.z);const n=this.material.rotation;let r,o;n!==0&&(o=Math.cos(n),r=Math.sin(n));const l=this.center;f0(c0.set(-.5,-.5,0),yc,l,_c,r,o),f0(fu.set(.5,-.5,0),yc,l,_c,r,o),f0(u0.set(.5,.5,0),yc,l,_c,r,o),P2.set(0,0),yf.set(1,0),O2.set(1,1);let c=e.ray.intersectTriangle(c0,fu,u0,!1,cu);if(c===null&&(f0(fu.set(-.5,.5,0),yc,l,_c,r,o),yf.set(0,1),c=e.ray.intersectTriangle(c0,u0,fu,!1,cu),c===null))return;const f=e.ray.origin.distanceTo(cu);f<e.near||f>e.far||t.push({distance:f,point:cu.clone(),uv:Bo.getInterpolation(cu,c0,fu,u0,P2,yf,O2,new Cn),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function f0(s,e,t,n,r,o){xc.subVectors(s,t).addScalar(.5).multiply(n),r!==void 0?(uu.x=o*xc.x-r*xc.y,uu.y=r*xc.x+o*xc.y):uu.copy(xc),s.copy(e),s.x+=uu.x,s.y+=uu.y,s.applyMatrix4(A2)}const d0=new Ee,D2=new Ee;class H2 extends _i{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const o=t[n];this.addLevel(o.object.clone(),o.distance,o.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const r=this.levels;let o;for(o=0;o<r.length&&!(t<r[o].distance);o++);return r.splice(o,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let o=t[n].distance;if(t[n].object.visible&&(o-=o*t[n].hysteresis),e<o)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){d0.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(d0);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){d0.setFromMatrixPosition(e.matrixWorld),D2.setFromMatrixPosition(this.matrixWorld);const n=d0.distanceTo(D2)/e.zoom;t[0].object.visible=!0;let r,o;for(r=1,o=t.length;r<o;r++){let l=t[r].distance;if(t[r].object.visible&&(l-=l*t[r].hysteresis),n>=l)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<o;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,o=n.length;r<o;r++){const l=n[r];t.object.levels.push({object:l.object.uuid,distance:l.distance,hysteresis:l.hysteresis})}return t}}const N2=new Ee,z2=new wr,B2=new wr,C5=new Ee,U2=new Ur,wc=new Ee;class V2 extends fo{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ur,this.bindMatrixInverse=new Ur,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new No),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)wc.fromBufferAttribute(t,n),this.applyBoneTransform(n,wc),this.boundingBox.expandByPoint(wc)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ds),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)wc.fromBufferAttribute(t,n),this.applyBoneTransform(n,wc),this.boundingSphere.expandByPoint(wc)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new wr,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;z2.fromBufferAttribute(r.attributes.skinIndex,e),B2.fromBufferAttribute(r.attributes.skinWeight,e),N2.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const l=B2.getComponent(o);if(l!==0){const c=z2.getComponent(o);U2.multiplyMatrices(n.bones[c].matrixWorld,n.boneInverses[c]),t.addScaledVector(C5.copy(N2).applyMatrix4(U2),l)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class xf extends _i{constructor(){super(),this.isBone=!0,this.type="Bone"}}class bc extends qr{constructor(e=null,t=1,n=1,r,o,l,c,f,d=Ze,p=Ze,_,y){super(null,l,c,f,d,p,r,o,_,y),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const F2=new Ur,_5=new Ur;class h0{constructor(e=[],t=[]){this.uuid=Oo(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new Ur)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Ur;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let o=0,l=e.length;o<l;o++){const c=e[o]?e[o].matrixWorld:_5;F2.multiplyMatrices(c,t[o]),F2.toArray(n,o*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new h0(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=va(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new bc(t,e,e,lr,ct);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const o=e.bones[n];let l=t[o];l===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),l=new xf),this.bones.push(l),this.boneInverses.push(new Ur().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,o=t.length;r<o;r++){const l=t[r];e.bones.push(l.uuid);const c=n[r];e.boneInverses.push(c.toArray())}return e}}class Mc extends Vi{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Ec=new Ur,k2=new Ur,p0=[],$2=new No,y5=new Ur,du=new fo,hu=new ds;class j2 extends fo{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Mc(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,y5)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new No),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Ec),$2.copy(e.boundingBox).applyMatrix4(Ec),this.boundingBox.union($2)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new ds),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Ec),hu.copy(e.boundingSphere).applyMatrix4(Ec),this.boundingSphere.union(hu)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(du.geometry=this.geometry,du.material=this.material,du.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),hu.copy(this.boundingSphere),hu.applyMatrix4(n),e.ray.intersectsSphere(hu)!==!1))for(let o=0;o<r;o++){this.getMatrixAt(o,Ec),k2.multiplyMatrices(n,Ec),du.matrixWorld=k2,du.raycast(e,p0);for(let l=0,c=p0.length;l<c;l++){const f=p0[l];f.instanceId=o,f.object=this,t.push(f)}p0.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Mc(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class As extends Uo{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new qn(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const W2=new Ee,Z2=new Ee,G2=new Ur,wf=new Na,m0=new ds;class $1 extends _i{constructor(e=new xn,t=new As){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let r=1,o=t.count;r<o;r++)W2.fromBufferAttribute(t,r-1),Z2.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=W2.distanceTo(Z2);e.setAttribute("lineDistance",new dr(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,o=e.params.Line.threshold,l=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),m0.copy(n.boundingSphere),m0.applyMatrix4(r),m0.radius+=o,e.ray.intersectsSphere(m0)===!1)return;G2.copy(r).invert(),wf.copy(e.ray).applyMatrix4(G2);const c=o/((this.scale.x+this.scale.y+this.scale.z)/3),f=c*c,d=new Ee,p=new Ee,_=new Ee,y=new Ee,b=this.isLineSegments?2:1,R=n.index,A=n.attributes.position;if(R!==null){const M=Math.max(0,l.start),q=Math.min(R.count,l.start+l.count);for(let V=M,he=q-1;V<he;V+=b){const Re=R.getX(V),De=R.getX(V+1);if(d.fromBufferAttribute(A,Re),p.fromBufferAttribute(A,De),wf.distanceSqToSegment(d,p,y,_)>f)continue;y.applyMatrix4(this.matrixWorld);const _t=e.ray.origin.distanceTo(y);_t<e.near||_t>e.far||t.push({distance:_t,point:_.clone().applyMatrix4(this.matrixWorld),index:V,face:null,faceIndex:null,object:this})}}else{const M=Math.max(0,l.start),q=Math.min(A.count,l.start+l.count);for(let V=M,he=q-1;V<he;V+=b){if(d.fromBufferAttribute(A,V),p.fromBufferAttribute(A,V+1),wf.distanceSqToSegment(d,p,y,_)>f)continue;y.applyMatrix4(this.matrixWorld);const De=e.ray.origin.distanceTo(y);De<e.near||De>e.far||t.push({distance:De,point:_.clone().applyMatrix4(this.matrixWorld),index:V,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=r.length;o<l;o++){const c=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=o}}}}}const X2=new Ee,Y2=new Ee;class Xa extends $1{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let r=0,o=t.count;r<o;r+=2)X2.fromBufferAttribute(t,r),Y2.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+X2.distanceTo(Y2);e.setAttribute("lineDistance",new dr(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class K2 extends $1{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class bf extends Uo{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new qn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const q2=new Ur,Mf=new Na,g0=new ds,v0=new Ee;class J2 extends _i{constructor(e=new xn,t=new bf){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,o=e.params.Points.threshold,l=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),g0.copy(n.boundingSphere),g0.applyMatrix4(r),g0.radius+=o,e.ray.intersectsSphere(g0)===!1)return;q2.copy(r).invert(),Mf.copy(e.ray).applyMatrix4(q2);const c=o/((this.scale.x+this.scale.y+this.scale.z)/3),f=c*c,d=n.index,_=n.attributes.position;if(d!==null){const y=Math.max(0,l.start),b=Math.min(d.count,l.start+l.count);for(let R=y,B=b;R<B;R++){const A=d.getX(R);v0.fromBufferAttribute(_,A),Q2(v0,A,f,r,e,t,this)}}else{const y=Math.max(0,l.start),b=Math.min(_.count,l.start+l.count);for(let R=y,B=b;R<B;R++)v0.fromBufferAttribute(_,R),Q2(v0,R,f,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=r.length;o<l;o++){const c=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=o}}}}}function Q2(s,e,t,n,r,o,l){const c=Mf.distanceSqToPoint(s);if(c<t){const f=new Ee;Mf.closestPointToPoint(s,f),f.applyMatrix4(n);const d=r.ray.origin.distanceTo(f);if(d<r.near||d>r.far)return;o.push({distance:d,distanceToRay:Math.sqrt(c),point:f,index:e,face:null,object:l})}}class x5 extends qr{constructor(e,t,n,r,o,l,c,f,d){super(e,t,n,r,o,l,c,f,d),this.isVideoTexture=!0,this.minFilter=l!==void 0?l:dn,this.magFilter=o!==void 0?o:dn,this.generateMipmaps=!1;const p=this;function _(){p.needsUpdate=!0,e.requestVideoFrameCallback(_)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(_)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class w5 extends qr{constructor(e,t,n){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=n,this.magFilter=Ze,this.minFilter=Ze,this.generateMipmaps=!1,this.needsUpdate=!0}}class Ef extends qr{constructor(e,t,n,r,o,l,c,f,d,p,_,y){super(null,l,c,f,d,p,r,o,_,y),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class b5 extends Ef{constructor(e,t,n,r,o,l){super(e,t,n,o,l),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Ce}}class M5 extends qr{constructor(e,t,n,r,o,l,c,f,d){super(e,t,n,r,o,l,c,f,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Pa{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),o=0;t.push(0);for(let l=1;l<=e;l++)n=this.getPoint(l/e),o+=n.distanceTo(r),t.push(o),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const o=n.length;let l;t?l=t:l=e*n[o-1];let c=0,f=o-1,d;for(;c<=f;)if(r=Math.floor(c+(f-c)/2),d=n[r]-l,d<0)c=r+1;else if(d>0)f=r-1;else{f=r;break}if(r=f,n[r]===l)return r/(o-1);const p=n[r],y=n[r+1]-p,b=(l-p)/y;return(r+b)/(o-1)}getTangent(e,t){let r=e-1e-4,o=e+1e-4;r<0&&(r=0),o>1&&(o=1);const l=this.getPoint(r),c=this.getPoint(o),f=t||(l.isVector2?new Cn:new Ee);return f.copy(c).sub(l).normalize(),f}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new Ee,r=[],o=[],l=[],c=new Ee,f=new Ur;for(let b=0;b<=e;b++){const R=b/e;r[b]=this.getTangentAt(R,new Ee)}o[0]=new Ee,l[0]=new Ee;let d=Number.MAX_VALUE;const p=Math.abs(r[0].x),_=Math.abs(r[0].y),y=Math.abs(r[0].z);p<=d&&(d=p,n.set(1,0,0)),_<=d&&(d=_,n.set(0,1,0)),y<=d&&n.set(0,0,1),c.crossVectors(r[0],n).normalize(),o[0].crossVectors(r[0],c),l[0].crossVectors(r[0],o[0]);for(let b=1;b<=e;b++){if(o[b]=o[b-1].clone(),l[b]=l[b-1].clone(),c.crossVectors(r[b-1],r[b]),c.length()>Number.EPSILON){c.normalize();const R=Math.acos(oi(r[b-1].dot(r[b]),-1,1));o[b].applyMatrix4(f.makeRotationAxis(c,R))}l[b].crossVectors(r[b],o[b])}if(t===!0){let b=Math.acos(oi(o[0].dot(o[e]),-1,1));b/=e,r[0].dot(c.crossVectors(o[0],o[e]))>0&&(b=-b);for(let R=1;R<=e;R++)o[R].applyMatrix4(f.makeRotationAxis(r[R],b*R)),l[R].crossVectors(r[R],o[R])}return{tangents:r,normals:o,binormals:l}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class C0 extends Pa{constructor(e=0,t=0,n=1,r=1,o=0,l=Math.PI*2,c=!1,f=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=o,this.aEndAngle=l,this.aClockwise=c,this.aRotation=f}getPoint(e,t){const n=t||new Cn,r=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const l=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=r;for(;o>r;)o-=r;o<Number.EPSILON&&(l?o=0:o=r),this.aClockwise===!0&&!l&&(o===r?o=-r:o=o-r);const c=this.aStartAngle+e*o;let f=this.aX+this.xRadius*Math.cos(c),d=this.aY+this.yRadius*Math.sin(c);if(this.aRotation!==0){const p=Math.cos(this.aRotation),_=Math.sin(this.aRotation),y=f-this.aX,b=d-this.aY;f=y*p-b*_+this.aX,d=y*_+b*p+this.aY}return n.set(f,d)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class e9 extends C0{constructor(e,t,n,r,o,l){super(e,t,n,n,r,o,l),this.isArcCurve=!0,this.type="ArcCurve"}}function Sf(){let s=0,e=0,t=0,n=0;function r(o,l,c,f){s=o,e=c,t=-3*o+3*l-2*c-f,n=2*o-2*l+c+f}return{initCatmullRom:function(o,l,c,f,d){r(l,c,d*(c-o),d*(f-l))},initNonuniformCatmullRom:function(o,l,c,f,d,p,_){let y=(l-o)/d-(c-o)/(d+p)+(c-l)/p,b=(c-l)/p-(f-l)/(p+_)+(f-c)/_;y*=p,b*=p,r(l,c,y,b)},calc:function(o){const l=o*o,c=l*o;return s+e*o+t*l+n*c}}}const _0=new Ee,Rf=new Sf,Lf=new Sf,Tf=new Sf;class t9 extends Pa{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new Ee){const n=t,r=this.points,o=r.length,l=(o-(this.closed?0:1))*e;let c=Math.floor(l),f=l-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/o)+1)*o:f===0&&c===o-1&&(c=o-2,f=1);let d,p;this.closed||c>0?d=r[(c-1)%o]:(_0.subVectors(r[0],r[1]).add(r[0]),d=_0);const _=r[c%o],y=r[(c+1)%o];if(this.closed||c+2<o?p=r[(c+2)%o]:(_0.subVectors(r[o-1],r[o-2]).add(r[o-1]),p=_0),this.curveType==="centripetal"||this.curveType==="chordal"){const b=this.curveType==="chordal"?.5:.25;let R=Math.pow(d.distanceToSquared(_),b),B=Math.pow(_.distanceToSquared(y),b),A=Math.pow(y.distanceToSquared(p),b);B<1e-4&&(B=1),R<1e-4&&(R=B),A<1e-4&&(A=B),Rf.initNonuniformCatmullRom(d.x,_.x,y.x,p.x,R,B,A),Lf.initNonuniformCatmullRom(d.y,_.y,y.y,p.y,R,B,A),Tf.initNonuniformCatmullRom(d.z,_.z,y.z,p.z,R,B,A)}else this.curveType==="catmullrom"&&(Rf.initCatmullRom(d.x,_.x,y.x,p.x,this.tension),Lf.initCatmullRom(d.y,_.y,y.y,p.y,this.tension),Tf.initCatmullRom(d.z,_.z,y.z,p.z,this.tension));return n.set(Rf.calc(f),Lf.calc(f),Tf.calc(f)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new Ee().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function n9(s,e,t,n,r){const o=(n-e)*.5,l=(r-t)*.5,c=s*s,f=s*c;return(2*t-2*n+o+l)*f+(-3*t+3*n-2*o-l)*c+o*s+t}function E5(s,e){const t=1-s;return t*t*e}function S5(s,e){return 2*(1-s)*s*e}function R5(s,e){return s*s*e}function pu(s,e,t,n){return E5(s,e)+S5(s,t)+R5(s,n)}function L5(s,e){const t=1-s;return t*t*t*e}function T5(s,e){const t=1-s;return 3*t*t*s*e}function A5(s,e){return 3*(1-s)*s*s*e}function P5(s,e){return s*s*s*e}function mu(s,e,t,n,r){return L5(s,e)+T5(s,t)+A5(s,n)+P5(s,r)}class Af extends Pa{constructor(e=new Cn,t=new Cn,n=new Cn,r=new Cn){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Cn){const n=t,r=this.v0,o=this.v1,l=this.v2,c=this.v3;return n.set(mu(e,r.x,o.x,l.x,c.x),mu(e,r.y,o.y,l.y,c.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class r9 extends Pa{constructor(e=new Ee,t=new Ee,n=new Ee,r=new Ee){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Ee){const n=t,r=this.v0,o=this.v1,l=this.v2,c=this.v3;return n.set(mu(e,r.x,o.x,l.x,c.x),mu(e,r.y,o.y,l.y,c.y),mu(e,r.z,o.z,l.z,c.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class y0 extends Pa{constructor(e=new Cn,t=new Cn){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Cn){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Cn){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class i9 extends Pa{constructor(e=new Ee,t=new Ee){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Ee){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ee){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Pf extends Pa{constructor(e=new Cn,t=new Cn,n=new Cn){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Cn){const n=t,r=this.v0,o=this.v1,l=this.v2;return n.set(pu(e,r.x,o.x,l.x),pu(e,r.y,o.y,l.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Of extends Pa{constructor(e=new Ee,t=new Ee,n=new Ee){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Ee){const n=t,r=this.v0,o=this.v1,l=this.v2;return n.set(pu(e,r.x,o.x,l.x),pu(e,r.y,o.y,l.y),pu(e,r.z,o.z,l.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class If extends Pa{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Cn){const n=t,r=this.points,o=(r.length-1)*e,l=Math.floor(o),c=o-l,f=r[l===0?l:l-1],d=r[l],p=r[l>r.length-2?r.length-1:l+1],_=r[l>r.length-3?r.length-1:l+2];return n.set(n9(c,f.x,d.x,p.x,_.x),n9(c,f.y,d.y,p.y,_.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new Cn().fromArray(r))}return this}}var Df=Object.freeze({__proto__:null,ArcCurve:e9,CatmullRomCurve3:t9,CubicBezierCurve:Af,CubicBezierCurve3:r9,EllipseCurve:C0,LineCurve:y0,LineCurve3:i9,QuadraticBezierCurve:Pf,QuadraticBezierCurve3:Of,SplineCurve:If});class o9 extends Pa{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new y0(t,e))}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let o=0;for(;o<r.length;){if(r[o]>=n){const l=r[o]-n,c=this.curves[o],f=c.getLength(),d=f===0?0:1-l/f;return c.getPointAt(d,t)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,o=this.curves;r<o.length;r++){const l=o[r],c=l.isEllipseCurve?e*2:l.isLineCurve||l.isLineCurve3?1:l.isSplineCurve?e*l.points.length:e,f=l.getPoints(c);for(let d=0;d<f.length;d++){const p=f[d];n&&n.equals(p)||(t.push(p),n=p)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(new Df[r.type]().fromJSON(r))}return this}}class gu extends o9{constructor(e){super(),this.type="Path",this.currentPoint=new Cn,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new y0(this.currentPoint.clone(),new Cn(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const o=new Pf(this.currentPoint.clone(),new Cn(e,t),new Cn(n,r));return this.curves.push(o),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,o,l){const c=new Af(this.currentPoint.clone(),new Cn(e,t),new Cn(n,r),new Cn(o,l));return this.curves.push(c),this.currentPoint.set(o,l),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new If(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,o,l){const c=this.currentPoint.x,f=this.currentPoint.y;return this.absarc(e+c,t+f,n,r,o,l),this}absarc(e,t,n,r,o,l){return this.absellipse(e,t,n,n,r,o,l),this}ellipse(e,t,n,r,o,l,c,f){const d=this.currentPoint.x,p=this.currentPoint.y;return this.absellipse(e+d,t+p,n,r,o,l,c,f),this}absellipse(e,t,n,r,o,l,c,f){const d=new C0(e,t,n,r,o,l,c,f);if(this.curves.length>0){const _=d.getPoint(0);_.equals(this.currentPoint)||this.lineTo(_.x,_.y)}this.curves.push(d);const p=d.getPoint(1);return this.currentPoint.copy(p),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Sc extends xn{constructor(e=[new Cn(0,-.5),new Cn(.5,0),new Cn(0,.5)],t=12,n=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=oi(r,0,Math.PI*2);const o=[],l=[],c=[],f=[],d=[],p=1/t,_=new Ee,y=new Cn,b=new Ee,R=new Ee,B=new Ee;let A=0,M=0;for(let q=0;q<=e.length-1;q++)switch(q){case 0:A=e[q+1].x-e[q].x,M=e[q+1].y-e[q].y,b.x=M*1,b.y=-A,b.z=M*0,B.copy(b),b.normalize(),f.push(b.x,b.y,b.z);break;case e.length-1:f.push(B.x,B.y,B.z);break;default:A=e[q+1].x-e[q].x,M=e[q+1].y-e[q].y,b.x=M*1,b.y=-A,b.z=M*0,R.copy(b),b.x+=B.x,b.y+=B.y,b.z+=B.z,b.normalize(),f.push(b.x,b.y,b.z),B.copy(R)}for(let q=0;q<=t;q++){const V=n+q*p*r,he=Math.sin(V),Re=Math.cos(V);for(let De=0;De<=e.length-1;De++){_.x=e[De].x*he,_.y=e[De].y,_.z=e[De].x*Re,l.push(_.x,_.y,_.z),y.x=q/t,y.y=De/(e.length-1),c.push(y.x,y.y);const nt=f[3*De+0]*he,_t=f[3*De+1],se=f[3*De+0]*Re;d.push(nt,_t,se)}}for(let q=0;q<t;q++)for(let V=0;V<e.length-1;V++){const he=V+q*e.length,Re=he,De=he+e.length,nt=he+e.length+1,_t=he+1;o.push(Re,De,_t),o.push(nt,_t,De)}this.setIndex(o),this.setAttribute("position",new dr(l,3)),this.setAttribute("uv",new dr(c,2)),this.setAttribute("normal",new dr(d,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sc(e.points,e.segments,e.phiStart,e.phiLength)}}class vu extends Sc{constructor(e=1,t=1,n=4,r=8){const o=new gu;o.absarc(0,-t/2,e,Math.PI*1.5,0),o.absarc(0,t/2,e,0,Math.PI*.5),super(o.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new vu(e.radius,e.length,e.capSegments,e.radialSegments)}}class Cu extends xn{constructor(e=1,t=32,n=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const o=[],l=[],c=[],f=[],d=new Ee,p=new Cn;l.push(0,0,0),c.push(0,0,1),f.push(.5,.5);for(let _=0,y=3;_<=t;_++,y+=3){const b=n+_/t*r;d.x=e*Math.cos(b),d.y=e*Math.sin(b),l.push(d.x,d.y,d.z),c.push(0,0,1),p.x=(l[y]/e+1)/2,p.y=(l[y+1]/e+1)/2,f.push(p.x,p.y)}for(let _=1;_<=t;_++)o.push(_,_+1,0);this.setIndex(o),this.setAttribute("position",new dr(l,3)),this.setAttribute("normal",new dr(c,3)),this.setAttribute("uv",new dr(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cu(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Sl extends xn{constructor(e=1,t=1,n=1,r=32,o=1,l=!1,c=0,f=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:o,openEnded:l,thetaStart:c,thetaLength:f};const d=this;r=Math.floor(r),o=Math.floor(o);const p=[],_=[],y=[],b=[];let R=0;const B=[],A=n/2;let M=0;q(),l===!1&&(e>0&&V(!0),t>0&&V(!1)),this.setIndex(p),this.setAttribute("position",new dr(_,3)),this.setAttribute("normal",new dr(y,3)),this.setAttribute("uv",new dr(b,2));function q(){const he=new Ee,Re=new Ee;let De=0;const nt=(t-e)/n;for(let _t=0;_t<=o;_t++){const se=[],Ue=_t/o,Jt=Ue*(t-e)+e;for(let gn=0;gn<=r;gn++){const Ut=gn/r,Zt=Ut*f+c,on=Math.sin(Zt),Dn=Math.cos(Zt);Re.x=Jt*on,Re.y=-Ue*n+A,Re.z=Jt*Dn,_.push(Re.x,Re.y,Re.z),he.set(on,nt,Dn).normalize(),y.push(he.x,he.y,he.z),b.push(Ut,1-Ue),se.push(R++)}B.push(se)}for(let _t=0;_t<r;_t++)for(let se=0;se<o;se++){const Ue=B[se][_t],Jt=B[se+1][_t],gn=B[se+1][_t+1],Ut=B[se][_t+1];p.push(Ue,Jt,Ut),p.push(Jt,gn,Ut),De+=6}d.addGroup(M,De,0),M+=De}function V(he){const Re=R,De=new Cn,nt=new Ee;let _t=0;const se=he===!0?e:t,Ue=he===!0?1:-1;for(let gn=1;gn<=r;gn++)_.push(0,A*Ue,0),y.push(0,Ue,0),b.push(.5,.5),R++;const Jt=R;for(let gn=0;gn<=r;gn++){const Zt=gn/r*f+c,on=Math.cos(Zt),Dn=Math.sin(Zt);nt.x=se*Dn,nt.y=A*Ue,nt.z=se*on,_.push(nt.x,nt.y,nt.z),y.push(0,Ue,0),De.x=on*.5+.5,De.y=Dn*.5*Ue+.5,b.push(De.x,De.y),R++}for(let gn=0;gn<r;gn++){const Ut=Re+gn,Zt=Jt+gn;he===!0?p.push(Zt,Zt+1,Ut):p.push(Zt+1,Zt,Ut),_t+=3}d.addGroup(M,_t,he===!0?1:2),M+=_t}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sl(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class _u extends Sl{constructor(e=1,t=1,n=32,r=1,o=!1,l=0,c=Math.PI*2){super(0,e,t,n,r,o,l,c),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:o,thetaStart:l,thetaLength:c}}static fromJSON(e){return new _u(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class p1 extends xn{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const o=[],l=[];c(r),d(n),p(),this.setAttribute("position",new dr(o,3)),this.setAttribute("normal",new dr(o.slice(),3)),this.setAttribute("uv",new dr(l,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function c(q){const V=new Ee,he=new Ee,Re=new Ee;for(let De=0;De<t.length;De+=3)b(t[De+0],V),b(t[De+1],he),b(t[De+2],Re),f(V,he,Re,q)}function f(q,V,he,Re){const De=Re+1,nt=[];for(let _t=0;_t<=De;_t++){nt[_t]=[];const se=q.clone().lerp(he,_t/De),Ue=V.clone().lerp(he,_t/De),Jt=De-_t;for(let gn=0;gn<=Jt;gn++)gn===0&&_t===De?nt[_t][gn]=se:nt[_t][gn]=se.clone().lerp(Ue,gn/Jt)}for(let _t=0;_t<De;_t++)for(let se=0;se<2*(De-_t)-1;se++){const Ue=Math.floor(se/2);se%2===0?(y(nt[_t][Ue+1]),y(nt[_t+1][Ue]),y(nt[_t][Ue])):(y(nt[_t][Ue+1]),y(nt[_t+1][Ue+1]),y(nt[_t+1][Ue]))}}function d(q){const V=new Ee;for(let he=0;he<o.length;he+=3)V.x=o[he+0],V.y=o[he+1],V.z=o[he+2],V.normalize().multiplyScalar(q),o[he+0]=V.x,o[he+1]=V.y,o[he+2]=V.z}function p(){const q=new Ee;for(let V=0;V<o.length;V+=3){q.x=o[V+0],q.y=o[V+1],q.z=o[V+2];const he=A(q)/2/Math.PI+.5,Re=M(q)/Math.PI+.5;l.push(he,1-Re)}R(),_()}function _(){for(let q=0;q<l.length;q+=6){const V=l[q+0],he=l[q+2],Re=l[q+4],De=Math.max(V,he,Re),nt=Math.min(V,he,Re);De>.9&&nt<.1&&(V<.2&&(l[q+0]+=1),he<.2&&(l[q+2]+=1),Re<.2&&(l[q+4]+=1))}}function y(q){o.push(q.x,q.y,q.z)}function b(q,V){const he=q*3;V.x=e[he+0],V.y=e[he+1],V.z=e[he+2]}function R(){const q=new Ee,V=new Ee,he=new Ee,Re=new Ee,De=new Cn,nt=new Cn,_t=new Cn;for(let se=0,Ue=0;se<o.length;se+=9,Ue+=6){q.set(o[se+0],o[se+1],o[se+2]),V.set(o[se+3],o[se+4],o[se+5]),he.set(o[se+6],o[se+7],o[se+8]),De.set(l[Ue+0],l[Ue+1]),nt.set(l[Ue+2],l[Ue+3]),_t.set(l[Ue+4],l[Ue+5]),Re.copy(q).add(V).add(he).divideScalar(3);const Jt=A(Re);B(De,Ue+0,q,Jt),B(nt,Ue+2,V,Jt),B(_t,Ue+4,he,Jt)}}function B(q,V,he,Re){Re<0&&q.x===1&&(l[V]=q.x-1),he.x===0&&he.z===0&&(l[V]=Re/2/Math.PI+.5)}function A(q){return Math.atan2(q.z,-q.x)}function M(q){return Math.atan2(-q.y,Math.sqrt(q.x*q.x+q.z*q.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new p1(e.vertices,e.indices,e.radius,e.details)}}class yu extends p1{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,l,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new yu(e.radius,e.detail)}}const x0=new Ee,w0=new Ee,Hf=new Ee,b0=new Bo;class s9 extends xn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),o=Math.cos(qi*t),l=e.getIndex(),c=e.getAttribute("position"),f=l?l.count:c.count,d=[0,0,0],p=["a","b","c"],_=new Array(3),y={},b=[];for(let R=0;R<f;R+=3){l?(d[0]=l.getX(R),d[1]=l.getX(R+1),d[2]=l.getX(R+2)):(d[0]=R,d[1]=R+1,d[2]=R+2);const{a:B,b:A,c:M}=b0;if(B.fromBufferAttribute(c,d[0]),A.fromBufferAttribute(c,d[1]),M.fromBufferAttribute(c,d[2]),b0.getNormal(Hf),_[0]=`${Math.round(B.x*r)},${Math.round(B.y*r)},${Math.round(B.z*r)}`,_[1]=`${Math.round(A.x*r)},${Math.round(A.y*r)},${Math.round(A.z*r)}`,_[2]=`${Math.round(M.x*r)},${Math.round(M.y*r)},${Math.round(M.z*r)}`,!(_[0]===_[1]||_[1]===_[2]||_[2]===_[0]))for(let q=0;q<3;q++){const V=(q+1)%3,he=_[q],Re=_[V],De=b0[p[q]],nt=b0[p[V]],_t=`${he}_${Re}`,se=`${Re}_${he}`;se in y&&y[se]?(Hf.dot(y[se].normal)<=o&&(b.push(De.x,De.y,De.z),b.push(nt.x,nt.y,nt.z)),y[se]=null):_t in y||(y[_t]={index0:d[q],index1:d[V],normal:Hf.clone()})}}for(const R in y)if(y[R]){const{index0:B,index1:A}=y[R];x0.fromBufferAttribute(c,B),w0.fromBufferAttribute(c,A),b.push(x0.x,x0.y,x0.z),b.push(w0.x,w0.y,w0.z)}this.setAttribute("position",new dr(b,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Rl extends gu{constructor(e){super(e),this.uuid=Oo(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(new gu().fromJSON(r))}return this}}const O5={triangulate:function(s,e,t=2){const n=e&&e.length,r=n?e[0]*t:s.length;let o=a9(s,0,r,t,!0);const l=[];if(!o||o.next===o.prev)return l;let c,f,d,p,_,y,b;if(n&&(o=z5(s,e,o,t)),s.length>80*t){c=d=s[0],f=p=s[1];for(let R=t;R<r;R+=t)_=s[R],y=s[R+1],_<c&&(c=_),y<f&&(f=y),_>d&&(d=_),y>p&&(p=y);b=Math.max(d-c,p-f),b=b!==0?32767/b:0}return xu(o,l,t,c,f,b,0),l}};function a9(s,e,t,n,r){let o,l;if(r===X5(s,e,t,n)>0)for(o=e;o<t;o+=n)l=u9(o,s[o],s[o+1],l);else for(o=t-n;o>=e;o-=n)l=u9(o,s[o],s[o+1],l);return l&&M0(l,l.next)&&(bu(l),l=l.next),l}function Ll(s,e){if(!s)return s;e||(e=s);let t=s,n;do if(n=!1,!t.steiner&&(M0(t,t.next)||po(t.prev,t,t.next)===0)){if(bu(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function xu(s,e,t,n,r,o,l){if(!s)return;!l&&o&&k5(s,n,r,o);let c=s,f,d;for(;s.prev!==s.next;){if(f=s.prev,d=s.next,o?D5(s,n,r,o):I5(s)){e.push(f.i/t|0),e.push(s.i/t|0),e.push(d.i/t|0),bu(s),s=d.next,c=d.next;continue}if(s=d,s===c){l?l===1?(s=H5(Ll(s),e,t),xu(s,e,t,n,r,o,2)):l===2&&N5(s,e,t,n,r,o):xu(Ll(s),e,t,n,r,o,1);break}}}function I5(s){const e=s.prev,t=s,n=s.next;if(po(e,t,n)>=0)return!1;const r=e.x,o=t.x,l=n.x,c=e.y,f=t.y,d=n.y,p=r<o?r<l?r:l:o<l?o:l,_=c<f?c<d?c:d:f<d?f:d,y=r>o?r>l?r:l:o>l?o:l,b=c>f?c>d?c:d:f>d?f:d;let R=n.next;for(;R!==e;){if(R.x>=p&&R.x<=y&&R.y>=_&&R.y<=b&&Rc(r,c,o,f,l,d,R.x,R.y)&&po(R.prev,R,R.next)>=0)return!1;R=R.next}return!0}function D5(s,e,t,n){const r=s.prev,o=s,l=s.next;if(po(r,o,l)>=0)return!1;const c=r.x,f=o.x,d=l.x,p=r.y,_=o.y,y=l.y,b=c<f?c<d?c:d:f<d?f:d,R=p<_?p<y?p:y:_<y?_:y,B=c>f?c>d?c:d:f>d?f:d,A=p>_?p>y?p:y:_>y?_:y,M=Nf(b,R,e,t,n),q=Nf(B,A,e,t,n);let V=s.prevZ,he=s.nextZ;for(;V&&V.z>=M&&he&&he.z<=q;){if(V.x>=b&&V.x<=B&&V.y>=R&&V.y<=A&&V!==r&&V!==l&&Rc(c,p,f,_,d,y,V.x,V.y)&&po(V.prev,V,V.next)>=0||(V=V.prevZ,he.x>=b&&he.x<=B&&he.y>=R&&he.y<=A&&he!==r&&he!==l&&Rc(c,p,f,_,d,y,he.x,he.y)&&po(he.prev,he,he.next)>=0))return!1;he=he.nextZ}for(;V&&V.z>=M;){if(V.x>=b&&V.x<=B&&V.y>=R&&V.y<=A&&V!==r&&V!==l&&Rc(c,p,f,_,d,y,V.x,V.y)&&po(V.prev,V,V.next)>=0)return!1;V=V.prevZ}for(;he&&he.z<=q;){if(he.x>=b&&he.x<=B&&he.y>=R&&he.y<=A&&he!==r&&he!==l&&Rc(c,p,f,_,d,y,he.x,he.y)&&po(he.prev,he,he.next)>=0)return!1;he=he.nextZ}return!0}function H5(s,e,t){let n=s;do{const r=n.prev,o=n.next.next;!M0(r,o)&&l9(r,n,n.next,o)&&wu(r,o)&&wu(o,r)&&(e.push(r.i/t|0),e.push(n.i/t|0),e.push(o.i/t|0),bu(n),bu(n.next),n=s=o),n=n.next}while(n!==s);return Ll(n)}function N5(s,e,t,n,r,o){let l=s;do{let c=l.next.next;for(;c!==l.prev;){if(l.i!==c.i&&W5(l,c)){let f=c9(l,c);l=Ll(l,l.next),f=Ll(f,f.next),xu(l,e,t,n,r,o,0),xu(f,e,t,n,r,o,0);return}c=c.next}l=l.next}while(l!==s)}function z5(s,e,t,n){const r=[];let o,l,c,f,d;for(o=0,l=e.length;o<l;o++)c=e[o]*n,f=o<l-1?e[o+1]*n:s.length,d=a9(s,c,f,n,!1),d===d.next&&(d.steiner=!0),r.push(j5(d));for(r.sort(B5),o=0;o<r.length;o++)t=U5(r[o],t);return t}function B5(s,e){return s.x-e.x}function U5(s,e){const t=V5(s,e);if(!t)return e;const n=c9(t,s);return Ll(n,n.next),Ll(t,t.next)}function V5(s,e){let t=e,n=-1/0,r;const o=s.x,l=s.y;do{if(l<=t.y&&l>=t.next.y&&t.next.y!==t.y){const y=t.x+(l-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(y<=o&&y>n&&(n=y,r=t.x<t.next.x?t:t.next,y===o))return r}t=t.next}while(t!==e);if(!r)return null;const c=r,f=r.x,d=r.y;let p=1/0,_;t=r;do o>=t.x&&t.x>=f&&o!==t.x&&Rc(l<d?o:n,l,f,d,l<d?n:o,l,t.x,t.y)&&(_=Math.abs(l-t.y)/(o-t.x),wu(t,s)&&(_<p||_===p&&(t.x>r.x||t.x===r.x&&F5(r,t)))&&(r=t,p=_)),t=t.next;while(t!==c);return r}function F5(s,e){return po(s.prev,s,e.prev)<0&&po(e.next,s,s.next)<0}function k5(s,e,t,n){let r=s;do r.z===0&&(r.z=Nf(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==s);r.prevZ.nextZ=null,r.prevZ=null,$5(r)}function $5(s){let e,t,n,r,o,l,c,f,d=1;do{for(t=s,s=null,o=null,l=0;t;){for(l++,n=t,c=0,e=0;e<d&&(c++,n=n.nextZ,!!n);e++);for(f=d;c>0||f>0&&n;)c!==0&&(f===0||!n||t.z<=n.z)?(r=t,t=t.nextZ,c--):(r=n,n=n.nextZ,f--),o?o.nextZ=r:s=r,r.prevZ=o,o=r;t=n}o.nextZ=null,d*=2}while(l>1);return s}function Nf(s,e,t,n,r){return s=(s-t)*r|0,e=(e-n)*r|0,s=(s|s<<8)&16711935,s=(s|s<<4)&252645135,s=(s|s<<2)&858993459,s=(s|s<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,s|e<<1}function j5(s){let e=s,t=s;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==s);return t}function Rc(s,e,t,n,r,o,l,c){return(r-l)*(e-c)>=(s-l)*(o-c)&&(s-l)*(n-c)>=(t-l)*(e-c)&&(t-l)*(o-c)>=(r-l)*(n-c)}function W5(s,e){return s.next.i!==e.i&&s.prev.i!==e.i&&!Z5(s,e)&&(wu(s,e)&&wu(e,s)&&G5(s,e)&&(po(s.prev,s,e.prev)||po(s,e.prev,e))||M0(s,e)&&po(s.prev,s,s.next)>0&&po(e.prev,e,e.next)>0)}function po(s,e,t){return(e.y-s.y)*(t.x-e.x)-(e.x-s.x)*(t.y-e.y)}function M0(s,e){return s.x===e.x&&s.y===e.y}function l9(s,e,t,n){const r=S0(po(s,e,t)),o=S0(po(s,e,n)),l=S0(po(t,n,s)),c=S0(po(t,n,e));return!!(r!==o&&l!==c||r===0&&E0(s,t,e)||o===0&&E0(s,n,e)||l===0&&E0(t,s,n)||c===0&&E0(t,e,n))}function E0(s,e,t){return e.x<=Math.max(s.x,t.x)&&e.x>=Math.min(s.x,t.x)&&e.y<=Math.max(s.y,t.y)&&e.y>=Math.min(s.y,t.y)}function S0(s){return s>0?1:s<0?-1:0}function Z5(s,e){let t=s;do{if(t.i!==s.i&&t.next.i!==s.i&&t.i!==e.i&&t.next.i!==e.i&&l9(t,t.next,s,e))return!0;t=t.next}while(t!==s);return!1}function wu(s,e){return po(s.prev,s,s.next)<0?po(s,e,s.next)>=0&&po(s,s.prev,e)>=0:po(s,e,s.prev)<0||po(s,s.next,e)<0}function G5(s,e){let t=s,n=!1;const r=(s.x+e.x)/2,o=(s.y+e.y)/2;do t.y>o!=t.next.y>o&&t.next.y!==t.y&&r<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==s);return n}function c9(s,e){const t=new zf(s.i,s.x,s.y),n=new zf(e.i,e.x,e.y),r=s.next,o=e.prev;return s.next=e,e.prev=s,t.next=r,r.prev=t,n.next=t,t.prev=n,o.next=n,n.prev=o,n}function u9(s,e,t,n){const r=new zf(s,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function bu(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function zf(s,e,t){this.i=s,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function X5(s,e,t,n){let r=0;for(let o=e,l=t-n;o<t;o+=n)r+=(s[l]-s[o])*(s[o+1]+s[l+1]),l=o;return r}class Ya{static area(e){const t=e.length;let n=0;for(let r=t-1,o=0;o<t;r=o++)n+=e[r].x*e[o].y-e[o].x*e[r].y;return n*.5}static isClockWise(e){return Ya.area(e)<0}static triangulateShape(e,t){const n=[],r=[],o=[];f9(e),d9(n,e);let l=e.length;t.forEach(f9);for(let f=0;f<t.length;f++)r.push(l),l+=t[f].length,d9(n,t[f]);const c=O5.triangulate(n,r);for(let f=0;f<c.length;f+=3)o.push(c.slice(f,f+3));return o}}function f9(s){const e=s.length;e>2&&s[e-1].equals(s[0])&&s.pop()}function d9(s,e){for(let t=0;t<e.length;t++)s.push(e[t].x),s.push(e[t].y)}class Mu extends xn{constructor(e=new Rl([new Cn(.5,.5),new Cn(-.5,.5),new Cn(-.5,-.5),new Cn(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],o=[];for(let c=0,f=e.length;c<f;c++){const d=e[c];l(d)}this.setAttribute("position",new dr(r,3)),this.setAttribute("uv",new dr(o,2)),this.computeVertexNormals();function l(c){const f=[],d=t.curveSegments!==void 0?t.curveSegments:12,p=t.steps!==void 0?t.steps:1,_=t.depth!==void 0?t.depth:1;let y=t.bevelEnabled!==void 0?t.bevelEnabled:!0,b=t.bevelThickness!==void 0?t.bevelThickness:.2,R=t.bevelSize!==void 0?t.bevelSize:b-.1,B=t.bevelOffset!==void 0?t.bevelOffset:0,A=t.bevelSegments!==void 0?t.bevelSegments:3;const M=t.extrudePath,q=t.UVGenerator!==void 0?t.UVGenerator:Y5;let V,he=!1,Re,De,nt,_t;M&&(V=M.getSpacedPoints(p),he=!0,y=!1,Re=M.computeFrenetFrames(p,!1),De=new Ee,nt=new Ee,_t=new Ee),y||(A=0,b=0,R=0,B=0);const se=c.extractPoints(d);let Ue=se.shape;const Jt=se.holes;if(!Ya.isClockWise(Ue)){Ue=Ue.reverse();for(let Nn=0,vn=Jt.length;Nn<vn;Nn++){const zn=Jt[Nn];Ya.isClockWise(zn)&&(Jt[Nn]=zn.reverse())}}const Ut=Ya.triangulateShape(Ue,Jt),Zt=Ue;for(let Nn=0,vn=Jt.length;Nn<vn;Nn++){const zn=Jt[Nn];Ue=Ue.concat(zn)}function on(Nn,vn,zn){return vn||console.error("THREE.ExtrudeGeometry: vec does not exist"),Nn.clone().addScaledVector(vn,zn)}const Dn=Ue.length,Ln=Ut.length;function Sn(Nn,vn,zn){let mr,rr,Fr;const kr=Nn.x-vn.x,Ir=Nn.y-vn.y,vi=zn.x-Nn.x,Bi=zn.y-Nn.y,je=kr*kr+Ir*Ir,Le=kr*Bi-Ir*vi;if(Math.abs(Le)>Number.EPSILON){const nn=Math.sqrt(je),Un=Math.sqrt(vi*vi+Bi*Bi),Wn=vn.x-Ir/nn,or=vn.y+kr/nn,Zr=zn.x-Bi/Un,pr=zn.y+vi/Un,mn=((Zr-Wn)*Bi-(pr-or)*vi)/(kr*Bi-Ir*vi);mr=Wn+kr*mn-Nn.x,rr=or+Ir*mn-Nn.y;const xr=mr*mr+rr*rr;if(xr<=2)return new Cn(mr,rr);Fr=Math.sqrt(xr/2)}else{let nn=!1;kr>Number.EPSILON?vi>Number.EPSILON&&(nn=!0):kr<-Number.EPSILON?vi<-Number.EPSILON&&(nn=!0):Math.sign(Ir)===Math.sign(Bi)&&(nn=!0),nn?(mr=-Ir,rr=kr,Fr=Math.sqrt(je)):(mr=kr,rr=Ir,Fr=Math.sqrt(je/2))}return new Cn(mr/Fr,rr/Fr)}const Hn=[];for(let Nn=0,vn=Zt.length,zn=vn-1,mr=Nn+1;Nn<vn;Nn++,zn++,mr++)zn===vn&&(zn=0),mr===vn&&(mr=0),Hn[Nn]=Sn(Zt[Nn],Zt[zn],Zt[mr]);const Bn=[];let hr,sr=Hn.concat();for(let Nn=0,vn=Jt.length;Nn<vn;Nn++){const zn=Jt[Nn];hr=[];for(let mr=0,rr=zn.length,Fr=rr-1,kr=mr+1;mr<rr;mr++,Fr++,kr++)Fr===rr&&(Fr=0),kr===rr&&(kr=0),hr[mr]=Sn(zn[mr],zn[Fr],zn[kr]);Bn.push(hr),sr=sr.concat(hr)}for(let Nn=0;Nn<A;Nn++){const vn=Nn/A,zn=b*Math.cos(vn*Math.PI/2),mr=R*Math.sin(vn*Math.PI/2)+B;for(let rr=0,Fr=Zt.length;rr<Fr;rr++){const kr=on(Zt[rr],Hn[rr],mr);bt(kr.x,kr.y,-zn)}for(let rr=0,Fr=Jt.length;rr<Fr;rr++){const kr=Jt[rr];hr=Bn[rr];for(let Ir=0,vi=kr.length;Ir<vi;Ir++){const Bi=on(kr[Ir],hr[Ir],mr);bt(Bi.x,Bi.y,-zn)}}}const fn=R+B;for(let Nn=0;Nn<Dn;Nn++){const vn=y?on(Ue[Nn],sr[Nn],fn):Ue[Nn];he?(nt.copy(Re.normals[0]).multiplyScalar(vn.x),De.copy(Re.binormals[0]).multiplyScalar(vn.y),_t.copy(V[0]).add(nt).add(De),bt(_t.x,_t.y,_t.z)):bt(vn.x,vn.y,0)}for(let Nn=1;Nn<=p;Nn++)for(let vn=0;vn<Dn;vn++){const zn=y?on(Ue[vn],sr[vn],fn):Ue[vn];he?(nt.copy(Re.normals[Nn]).multiplyScalar(zn.x),De.copy(Re.binormals[Nn]).multiplyScalar(zn.y),_t.copy(V[Nn]).add(nt).add(De),bt(_t.x,_t.y,_t.z)):bt(zn.x,zn.y,_/p*Nn)}for(let Nn=A-1;Nn>=0;Nn--){const vn=Nn/A,zn=b*Math.cos(vn*Math.PI/2),mr=R*Math.sin(vn*Math.PI/2)+B;for(let rr=0,Fr=Zt.length;rr<Fr;rr++){const kr=on(Zt[rr],Hn[rr],mr);bt(kr.x,kr.y,_+zn)}for(let rr=0,Fr=Jt.length;rr<Fr;rr++){const kr=Jt[rr];hr=Bn[rr];for(let Ir=0,vi=kr.length;Ir<vi;Ir++){const Bi=on(kr[Ir],hr[Ir],mr);he?bt(Bi.x,Bi.y+V[p-1].y,V[p-1].x+zn):bt(Bi.x,Bi.y,_+zn)}}}On(),er();function On(){const Nn=r.length/3;if(y){let vn=0,zn=Dn*vn;for(let mr=0;mr<Ln;mr++){const rr=Ut[mr];Yr(rr[2]+zn,rr[1]+zn,rr[0]+zn)}vn=p+A*2,zn=Dn*vn;for(let mr=0;mr<Ln;mr++){const rr=Ut[mr];Yr(rr[0]+zn,rr[1]+zn,rr[2]+zn)}}else{for(let vn=0;vn<Ln;vn++){const zn=Ut[vn];Yr(zn[2],zn[1],zn[0])}for(let vn=0;vn<Ln;vn++){const zn=Ut[vn];Yr(zn[0]+Dn*p,zn[1]+Dn*p,zn[2]+Dn*p)}}n.addGroup(Nn,r.length/3-Nn,0)}function er(){const Nn=r.length/3;let vn=0;ar(Zt,vn),vn+=Zt.length;for(let zn=0,mr=Jt.length;zn<mr;zn++){const rr=Jt[zn];ar(rr,vn),vn+=rr.length}n.addGroup(Nn,r.length/3-Nn,1)}function ar(Nn,vn){let zn=Nn.length;for(;--zn>=0;){const mr=zn;let rr=zn-1;rr<0&&(rr=Nn.length-1);for(let Fr=0,kr=p+A*2;Fr<kr;Fr++){const Ir=Dn*Fr,vi=Dn*(Fr+1),Bi=vn+mr+Ir,je=vn+rr+Ir,Le=vn+rr+vi,nn=vn+mr+vi;ei(Bi,je,Le,nn)}}}function bt(Nn,vn,zn){f.push(Nn),f.push(vn),f.push(zn)}function Yr(Nn,vn,zn){Kn(Nn),Kn(vn),Kn(zn);const mr=r.length/3,rr=q.generateTopUV(n,r,mr-3,mr-2,mr-1);br(rr[0]),br(rr[1]),br(rr[2])}function ei(Nn,vn,zn,mr){Kn(Nn),Kn(vn),Kn(mr),Kn(vn),Kn(zn),Kn(mr);const rr=r.length/3,Fr=q.generateSideWallUV(n,r,rr-6,rr-3,rr-2,rr-1);br(Fr[0]),br(Fr[1]),br(Fr[3]),br(Fr[1]),br(Fr[2]),br(Fr[3])}function Kn(Nn){r.push(f[Nn*3+0]),r.push(f[Nn*3+1]),r.push(f[Nn*3+2])}function br(Nn){o.push(Nn.x),o.push(Nn.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return K5(t,n,e)}static fromJSON(e,t){const n=[];for(let o=0,l=e.shapes.length;o<l;o++){const c=t[e.shapes[o]];n.push(c)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new Df[r.type]().fromJSON(r)),new Mu(n,e.options)}}const Y5={generateTopUV:function(s,e,t,n,r){const o=e[t*3],l=e[t*3+1],c=e[n*3],f=e[n*3+1],d=e[r*3],p=e[r*3+1];return[new Cn(o,l),new Cn(c,f),new Cn(d,p)]},generateSideWallUV:function(s,e,t,n,r,o){const l=e[t*3],c=e[t*3+1],f=e[t*3+2],d=e[n*3],p=e[n*3+1],_=e[n*3+2],y=e[r*3],b=e[r*3+1],R=e[r*3+2],B=e[o*3],A=e[o*3+1],M=e[o*3+2];return Math.abs(c-p)<Math.abs(l-d)?[new Cn(l,1-f),new Cn(d,1-_),new Cn(y,1-R),new Cn(B,1-M)]:[new Cn(c,1-f),new Cn(p,1-_),new Cn(b,1-R),new Cn(A,1-M)]}};function K5(s,e,t){if(t.shapes=[],Array.isArray(s))for(let n=0,r=s.length;n<r;n++){const o=s[n];t.shapes.push(o.uuid)}else t.shapes.push(s.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Eu extends p1{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,o,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Eu(e.radius,e.detail)}}class Lc extends p1{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Lc(e.radius,e.detail)}}class Su extends xn{constructor(e=.5,t=1,n=32,r=1,o=0,l=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:o,thetaLength:l},n=Math.max(3,n),r=Math.max(1,r);const c=[],f=[],d=[],p=[];let _=e;const y=(t-e)/r,b=new Ee,R=new Cn;for(let B=0;B<=r;B++){for(let A=0;A<=n;A++){const M=o+A/n*l;b.x=_*Math.cos(M),b.y=_*Math.sin(M),f.push(b.x,b.y,b.z),d.push(0,0,1),R.x=(b.x/t+1)/2,R.y=(b.y/t+1)/2,p.push(R.x,R.y)}_+=y}for(let B=0;B<r;B++){const A=B*(n+1);for(let M=0;M<n;M++){const q=M+A,V=q,he=q+n+1,Re=q+n+2,De=q+1;c.push(V,he,De),c.push(he,Re,De)}}this.setIndex(c),this.setAttribute("position",new dr(f,3)),this.setAttribute("normal",new dr(d,3)),this.setAttribute("uv",new dr(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Su(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Ru extends xn{constructor(e=new Rl([new Cn(0,.5),new Cn(-.5,-.5),new Cn(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],o=[],l=[];let c=0,f=0;if(Array.isArray(e)===!1)d(e);else for(let p=0;p<e.length;p++)d(e[p]),this.addGroup(c,f,p),c+=f,f=0;this.setIndex(n),this.setAttribute("position",new dr(r,3)),this.setAttribute("normal",new dr(o,3)),this.setAttribute("uv",new dr(l,2));function d(p){const _=r.length/3,y=p.extractPoints(t);let b=y.shape;const R=y.holes;Ya.isClockWise(b)===!1&&(b=b.reverse());for(let A=0,M=R.length;A<M;A++){const q=R[A];Ya.isClockWise(q)===!0&&(R[A]=q.reverse())}const B=Ya.triangulateShape(b,R);for(let A=0,M=R.length;A<M;A++){const q=R[A];b=b.concat(q)}for(let A=0,M=b.length;A<M;A++){const q=b[A];r.push(q.x,q.y,0),o.push(0,0,1),l.push(q.x,q.y)}for(let A=0,M=B.length;A<M;A++){const q=B[A],V=q[0]+_,he=q[1]+_,Re=q[2]+_;n.push(V,he,Re),f+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return q5(t,e)}static fromJSON(e,t){const n=[];for(let r=0,o=e.shapes.length;r<o;r++){const l=t[e.shapes[r]];n.push(l)}return new Ru(n,e.curveSegments)}}function q5(s,e){if(e.shapes=[],Array.isArray(s))for(let t=0,n=s.length;t<n;t++){const r=s[t];e.shapes.push(r.uuid)}else e.shapes.push(s.uuid);return e}class Tc extends xn{constructor(e=1,t=32,n=16,r=0,o=Math.PI*2,l=0,c=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:o,thetaStart:l,thetaLength:c},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const f=Math.min(l+c,Math.PI);let d=0;const p=[],_=new Ee,y=new Ee,b=[],R=[],B=[],A=[];for(let M=0;M<=n;M++){const q=[],V=M/n;let he=0;M===0&&l===0?he=.5/t:M===n&&f===Math.PI&&(he=-.5/t);for(let Re=0;Re<=t;Re++){const De=Re/t;_.x=-e*Math.cos(r+De*o)*Math.sin(l+V*c),_.y=e*Math.cos(l+V*c),_.z=e*Math.sin(r+De*o)*Math.sin(l+V*c),R.push(_.x,_.y,_.z),y.copy(_).normalize(),B.push(y.x,y.y,y.z),A.push(De+he,1-V),q.push(d++)}p.push(q)}for(let M=0;M<n;M++)for(let q=0;q<t;q++){const V=p[M][q+1],he=p[M][q],Re=p[M+1][q],De=p[M+1][q+1];(M!==0||l>0)&&b.push(V,he,De),(M!==n-1||f<Math.PI)&&b.push(he,Re,De)}this.setIndex(b),this.setAttribute("position",new dr(R,3)),this.setAttribute("normal",new dr(B,3)),this.setAttribute("uv",new dr(A,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Tc(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Lu extends p1{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Lu(e.radius,e.detail)}}class Tu extends xn{constructor(e=1,t=.4,n=12,r=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:o},n=Math.floor(n),r=Math.floor(r);const l=[],c=[],f=[],d=[],p=new Ee,_=new Ee,y=new Ee;for(let b=0;b<=n;b++)for(let R=0;R<=r;R++){const B=R/r*o,A=b/n*Math.PI*2;_.x=(e+t*Math.cos(A))*Math.cos(B),_.y=(e+t*Math.cos(A))*Math.sin(B),_.z=t*Math.sin(A),c.push(_.x,_.y,_.z),p.x=e*Math.cos(B),p.y=e*Math.sin(B),y.subVectors(_,p).normalize(),f.push(y.x,y.y,y.z),d.push(R/r),d.push(b/n)}for(let b=1;b<=n;b++)for(let R=1;R<=r;R++){const B=(r+1)*b+R-1,A=(r+1)*(b-1)+R-1,M=(r+1)*(b-1)+R,q=(r+1)*b+R;l.push(B,A,q),l.push(A,M,q)}this.setIndex(l),this.setAttribute("position",new dr(c,3)),this.setAttribute("normal",new dr(f,3)),this.setAttribute("uv",new dr(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Tu(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Au extends xn{constructor(e=1,t=.4,n=64,r=8,o=2,l=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:o,q:l},n=Math.floor(n),r=Math.floor(r);const c=[],f=[],d=[],p=[],_=new Ee,y=new Ee,b=new Ee,R=new Ee,B=new Ee,A=new Ee,M=new Ee;for(let V=0;V<=n;++V){const he=V/n*o*Math.PI*2;q(he,o,l,e,b),q(he+.01,o,l,e,R),A.subVectors(R,b),M.addVectors(R,b),B.crossVectors(A,M),M.crossVectors(B,A),B.normalize(),M.normalize();for(let Re=0;Re<=r;++Re){const De=Re/r*Math.PI*2,nt=-t*Math.cos(De),_t=t*Math.sin(De);_.x=b.x+(nt*M.x+_t*B.x),_.y=b.y+(nt*M.y+_t*B.y),_.z=b.z+(nt*M.z+_t*B.z),f.push(_.x,_.y,_.z),y.subVectors(_,b).normalize(),d.push(y.x,y.y,y.z),p.push(V/n),p.push(Re/r)}}for(let V=1;V<=n;V++)for(let he=1;he<=r;he++){const Re=(r+1)*(V-1)+(he-1),De=(r+1)*V+(he-1),nt=(r+1)*V+he,_t=(r+1)*(V-1)+he;c.push(Re,De,_t),c.push(De,nt,_t)}this.setIndex(c),this.setAttribute("position",new dr(f,3)),this.setAttribute("normal",new dr(d,3)),this.setAttribute("uv",new dr(p,2));function q(V,he,Re,De,nt){const _t=Math.cos(V),se=Math.sin(V),Ue=Re/he*V,Jt=Math.cos(Ue);nt.x=De*(2+Jt)*.5*_t,nt.y=De*(2+Jt)*se*.5,nt.z=De*Math.sin(Ue)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Au(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Pu extends xn{constructor(e=new Of(new Ee(-1,-1,0),new Ee(-1,1,0),new Ee(1,1,0)),t=64,n=1,r=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:o};const l=e.computeFrenetFrames(t,o);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;const c=new Ee,f=new Ee,d=new Cn;let p=new Ee;const _=[],y=[],b=[],R=[];B(),this.setIndex(R),this.setAttribute("position",new dr(_,3)),this.setAttribute("normal",new dr(y,3)),this.setAttribute("uv",new dr(b,2));function B(){for(let V=0;V<t;V++)A(V);A(o===!1?t:0),q(),M()}function A(V){p=e.getPointAt(V/t,p);const he=l.normals[V],Re=l.binormals[V];for(let De=0;De<=r;De++){const nt=De/r*Math.PI*2,_t=Math.sin(nt),se=-Math.cos(nt);f.x=se*he.x+_t*Re.x,f.y=se*he.y+_t*Re.y,f.z=se*he.z+_t*Re.z,f.normalize(),y.push(f.x,f.y,f.z),c.x=p.x+n*f.x,c.y=p.y+n*f.y,c.z=p.z+n*f.z,_.push(c.x,c.y,c.z)}}function M(){for(let V=1;V<=t;V++)for(let he=1;he<=r;he++){const Re=(r+1)*(V-1)+(he-1),De=(r+1)*V+(he-1),nt=(r+1)*V+he,_t=(r+1)*(V-1)+he;R.push(Re,De,_t),R.push(De,nt,_t)}}function q(){for(let V=0;V<=t;V++)for(let he=0;he<=r;he++)d.x=V/t,d.y=he/r,b.push(d.x,d.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Pu(new Df[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class h9 extends xn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,r=new Ee,o=new Ee;if(e.index!==null){const l=e.attributes.position,c=e.index;let f=e.groups;f.length===0&&(f=[{start:0,count:c.count,materialIndex:0}]);for(let d=0,p=f.length;d<p;++d){const _=f[d],y=_.start,b=_.count;for(let R=y,B=y+b;R<B;R+=3)for(let A=0;A<3;A++){const M=c.getX(R+A),q=c.getX(R+(A+1)%3);r.fromBufferAttribute(l,M),o.fromBufferAttribute(l,q),p9(r,o,n)===!0&&(t.push(r.x,r.y,r.z),t.push(o.x,o.y,o.z))}}}else{const l=e.attributes.position;for(let c=0,f=l.count/3;c<f;c++)for(let d=0;d<3;d++){const p=3*c+d,_=3*c+(d+1)%3;r.fromBufferAttribute(l,p),o.fromBufferAttribute(l,_),p9(r,o,n)===!0&&(t.push(r.x,r.y,r.z),t.push(o.x,o.y,o.z))}}this.setAttribute("position",new dr(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function p9(s,e,t){const n=`${s.x},${s.y},${s.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${s.x},${s.y},${s.z}`;return t.has(n)===!0||t.has(r)===!0?!1:(t.add(n),t.add(r),!0)}var m9=Object.freeze({__proto__:null,BoxGeometry:ua,CapsuleGeometry:vu,CircleGeometry:Cu,ConeGeometry:_u,CylinderGeometry:Sl,DodecahedronGeometry:yu,EdgesGeometry:s9,ExtrudeGeometry:Mu,IcosahedronGeometry:Eu,LatheGeometry:Sc,OctahedronGeometry:Lc,PlaneGeometry:Xi,PolyhedronGeometry:p1,RingGeometry:Su,ShapeGeometry:Ru,SphereGeometry:Tc,TetrahedronGeometry:Lu,TorusGeometry:Tu,TorusKnotGeometry:Au,TubeGeometry:Pu,WireframeGeometry:h9});class g9 extends Uo{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new qn(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class v9 extends ps{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Bf extends Uo{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new qn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Br,this.normalScale=new Cn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class C9 extends Bf{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Cn(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return oi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new qn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new qn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new qn(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class _9 extends Uo{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new qn(16777215),this.specular=new qn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Br,this.normalScale=new Cn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ot,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class y9 extends Uo{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new qn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Br,this.normalScale=new Cn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class x9 extends Uo{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Br,this.normalScale=new Cn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class w9 extends Uo{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new qn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Br,this.normalScale=new Cn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ot,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class b9 extends Uo{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new qn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Br,this.normalScale=new Cn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class M9 extends As{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function ha(s,e,t){return Uf(s)?new s.constructor(s.subarray(e,t!==void 0?t:s.length)):s.slice(e,t)}function Tl(s,e,t){return!s||!t&&s.constructor===e?s:typeof e.BYTES_PER_ELEMENT=="number"?new e(s):Array.prototype.slice.call(s)}function Uf(s){return ArrayBuffer.isView(s)&&!(s instanceof DataView)}function E9(s){function e(r,o){return s[r]-s[o]}const t=s.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(e),n}function Vf(s,e,t){const n=s.length,r=new s.constructor(n);for(let o=0,l=0;l!==n;++o){const c=t[o]*e;for(let f=0;f!==e;++f)r[l++]=s[c+f]}return r}function Ff(s,e,t,n){let r=1,o=s[0];for(;o!==void 0&&o[n]===void 0;)o=s[r++];if(o===void 0)return;let l=o[n];if(l!==void 0)if(Array.isArray(l))do l=o[n],l!==void 0&&(e.push(o.time),t.push.apply(t,l)),o=s[r++];while(o!==void 0);else if(l.toArray!==void 0)do l=o[n],l!==void 0&&(e.push(o.time),l.toArray(t,t.length)),o=s[r++];while(o!==void 0);else do l=o[n],l!==void 0&&(e.push(o.time),t.push(l)),o=s[r++];while(o!==void 0)}function J5(s,e,t,n,r=30){const o=s.clone();o.name=e;const l=[];for(let f=0;f<o.tracks.length;++f){const d=o.tracks[f],p=d.getValueSize(),_=[],y=[];for(let b=0;b<d.times.length;++b){const R=d.times[b]*r;if(!(R<t||R>=n)){_.push(d.times[b]);for(let B=0;B<p;++B)y.push(d.values[b*p+B])}}_.length!==0&&(d.times=Tl(_,d.times.constructor),d.values=Tl(y,d.values.constructor),l.push(d))}o.tracks=l;let c=1/0;for(let f=0;f<o.tracks.length;++f)c>o.tracks[f].times[0]&&(c=o.tracks[f].times[0]);for(let f=0;f<o.tracks.length;++f)o.tracks[f].shift(-1*c);return o.resetDuration(),o}function Q5(s,e=0,t=s,n=30){n<=0&&(n=30);const r=t.tracks.length,o=e/n;for(let l=0;l<r;++l){const c=t.tracks[l],f=c.ValueTypeName;if(f==="bool"||f==="string")continue;const d=s.tracks.find(function(M){return M.name===c.name&&M.ValueTypeName===f});if(d===void 0)continue;let p=0;const _=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=_/3);let y=0;const b=d.getValueSize();d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=b/3);const R=c.times.length-1;let B;if(o<=c.times[0]){const M=p,q=_-p;B=ha(c.values,M,q)}else if(o>=c.times[R]){const M=R*_+p,q=M+_-p;B=ha(c.values,M,q)}else{const M=c.createInterpolant(),q=p,V=_-p;M.evaluate(o),B=ha(M.resultBuffer,q,V)}f==="quaternion"&&new Ui().fromArray(B).normalize().conjugate().toArray(B);const A=d.times.length;for(let M=0;M<A;++M){const q=M*b+y;if(f==="quaternion")Ui.multiplyQuaternionsFlat(d.values,q,B,0,d.values,q);else{const V=b-y*2;for(let he=0;he<V;++he)d.values[q+he]-=B[he]}}}return s.blendMode=mo,s}const e3={arraySlice:ha,convertArray:Tl,isTypedArray:Uf,getKeyframeOrder:E9,sortedArray:Vf,flattenJSON:Ff,subclip:J5,makeClipAdditive:Q5};class Ou{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],o=t[n-1];e:{t:{let l;n:{r:if(!(e<r)){for(let c=n+2;;){if(r===void 0){if(e<o)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===c)break;if(o=r,r=t[++n],e<r)break t}l=t.length;break n}if(!(e>=o)){const c=t[1];e<c&&(n=2,o=c);for(let f=n-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===f)break;if(r=o,o=t[--n-1],e>=o)break t}l=n,n=0;break n}break e}for(;n<l;){const c=n+l>>>1;e<t[c]?l=c:n=c+1}if(r=t[n],o=t[n-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,o,r)}return this.interpolate_(n,o,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,o=e*r;for(let l=0;l!==r;++l)t[l]=n[o+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class S9 extends Ou{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ro,endingEnd:ro}}intervalChanged_(e,t,n){const r=this.parameterPositions;let o=e-2,l=e+1,c=r[o],f=r[l];if(c===void 0)switch(this.getSettings_().endingStart){case ci:o=e,c=2*t-n;break;case $o:o=r.length-2,c=t+r[o]-r[o+1];break;default:o=e,c=n}if(f===void 0)switch(this.getSettings_().endingEnd){case ci:l=e,f=2*n-t;break;case $o:l=1,f=n+r[1]-r[0];break;default:l=e-1,f=t}const d=(n-t)*.5,p=this.valueSize;this._weightPrev=d/(t-c),this._weightNext=d/(f-n),this._offsetPrev=o*p,this._offsetNext=l*p}interpolate_(e,t,n,r){const o=this.resultBuffer,l=this.sampleValues,c=this.valueSize,f=e*c,d=f-c,p=this._offsetPrev,_=this._offsetNext,y=this._weightPrev,b=this._weightNext,R=(n-t)/(r-t),B=R*R,A=B*R,M=-y*A+2*y*B-y*R,q=(1+y)*A+(-1.5-2*y)*B+(-.5+y)*R+1,V=(-1-b)*A+(1.5+b)*B+.5*R,he=b*A-b*B;for(let Re=0;Re!==c;++Re)o[Re]=M*l[p+Re]+q*l[d+Re]+V*l[f+Re]+he*l[_+Re];return o}}class kf extends Ou{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const o=this.resultBuffer,l=this.sampleValues,c=this.valueSize,f=e*c,d=f-c,p=(n-t)/(r-t),_=1-p;for(let y=0;y!==c;++y)o[y]=l[d+y]*_+l[f+y]*p;return o}}class R9 extends Ou{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Oa{constructor(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Tl(t,this.TimeBufferType),this.values=Tl(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Tl(e.times,Array),values:Tl(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new R9(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new kf(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new S9(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Or:t=this.InterpolantFactoryMethodDiscrete;break;case Gr:t=this.InterpolantFactoryMethodLinear;break;case Di:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Or;case this.InterpolantFactoryMethodLinear:return Gr;case this.InterpolantFactoryMethodSmooth:return Di}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let o=0,l=r-1;for(;o!==r&&n[o]<e;)++o;for(;l!==-1&&n[l]>t;)--l;if(++l,o!==0||l!==r){o>=l&&(l=Math.max(l,1),o=l-1);const c=this.getValueSize();this.times=ha(n,o,l),this.values=ha(this.values,o*c,l*c)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,o=n.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let c=0;c!==o;c++){const f=n[c];if(typeof f=="number"&&isNaN(f)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,c,f),e=!1;break}if(l!==null&&l>f){console.error("THREE.KeyframeTrack: Out of order keys.",this,c,f,l),e=!1;break}l=f}if(r!==void 0&&Uf(r))for(let c=0,f=r.length;c!==f;++c){const d=r[c];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,c,d),e=!1;break}}return e}optimize(){const e=ha(this.times),t=ha(this.values),n=this.getValueSize(),r=this.getInterpolation()===Di,o=e.length-1;let l=1;for(let c=1;c<o;++c){let f=!1;const d=e[c],p=e[c+1];if(d!==p&&(c!==1||d!==e[0]))if(r)f=!0;else{const _=c*n,y=_-n,b=_+n;for(let R=0;R!==n;++R){const B=t[_+R];if(B!==t[y+R]||B!==t[b+R]){f=!0;break}}}if(f){if(c!==l){e[l]=e[c];const _=c*n,y=l*n;for(let b=0;b!==n;++b)t[y+b]=t[_+b]}++l}}if(o>0){e[l]=e[o];for(let c=o*n,f=l*n,d=0;d!==n;++d)t[f+d]=t[c+d];++l}return l!==e.length?(this.times=ha(e,0,l),this.values=ha(t,0,l*n)):(this.times=e,this.values=t),this}clone(){const e=ha(this.times,0),t=ha(this.values,0),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Oa.prototype.TimeBufferType=Float32Array,Oa.prototype.ValueBufferType=Float32Array,Oa.prototype.DefaultInterpolation=Gr;class Al extends Oa{}Al.prototype.ValueTypeName="bool",Al.prototype.ValueBufferType=Array,Al.prototype.DefaultInterpolation=Or,Al.prototype.InterpolantFactoryMethodLinear=void 0,Al.prototype.InterpolantFactoryMethodSmooth=void 0;class $f extends Oa{}$f.prototype.ValueTypeName="color";class Iu extends Oa{}Iu.prototype.ValueTypeName="number";class L9 extends Ou{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const o=this.resultBuffer,l=this.sampleValues,c=this.valueSize,f=(n-t)/(r-t);let d=e*c;for(let p=d+c;d!==p;d+=4)Ui.slerpFlat(o,0,l,d-c,l,d,f);return o}}class Ac extends Oa{InterpolantFactoryMethodLinear(e){return new L9(this.times,this.values,this.getValueSize(),e)}}Ac.prototype.ValueTypeName="quaternion",Ac.prototype.DefaultInterpolation=Gr,Ac.prototype.InterpolantFactoryMethodSmooth=void 0;class Pl extends Oa{}Pl.prototype.ValueTypeName="string",Pl.prototype.ValueBufferType=Array,Pl.prototype.DefaultInterpolation=Or,Pl.prototype.InterpolantFactoryMethodLinear=void 0,Pl.prototype.InterpolantFactoryMethodSmooth=void 0;class Du extends Oa{}Du.prototype.ValueTypeName="vector";class Hu{constructor(e,t=-1,n,r=To){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=Oo(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let l=0,c=n.length;l!==c;++l)t.push(n3(n[l]).scale(r));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,l=n.length;o!==l;++o)t.push(Oa.toJSON(n[o]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const o=t.length,l=[];for(let c=0;c<o;c++){let f=[],d=[];f.push((c+o-1)%o,c,(c+1)%o),d.push(0,1,0);const p=E9(f);f=Vf(f,1,p),d=Vf(d,1,p),!r&&f[0]===0&&(f.push(o),d.push(d[0])),l.push(new Iu(".morphTargetInfluences["+t[c].name+"]",f,d).scale(1/n))}return new this(e,-1,l)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},o=/^([\w-]*?)([\d]+)$/;for(let c=0,f=e.length;c<f;c++){const d=e[c],p=d.name.match(o);if(p&&p.length>1){const _=p[1];let y=r[_];y||(r[_]=y=[]),y.push(d)}}const l=[];for(const c in r)l.push(this.CreateFromMorphTargetSequence(c,r[c],t,n));return l}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(_,y,b,R,B){if(b.length!==0){const A=[],M=[];Ff(b,A,M,R),A.length!==0&&B.push(new _(y,A,M))}},r=[],o=e.name||"default",l=e.fps||30,c=e.blendMode;let f=e.length||-1;const d=e.hierarchy||[];for(let _=0;_<d.length;_++){const y=d[_].keys;if(!(!y||y.length===0))if(y[0].morphTargets){const b={};let R;for(R=0;R<y.length;R++)if(y[R].morphTargets)for(let B=0;B<y[R].morphTargets.length;B++)b[y[R].morphTargets[B]]=-1;for(const B in b){const A=[],M=[];for(let q=0;q!==y[R].morphTargets.length;++q){const V=y[R];A.push(V.time),M.push(V.morphTarget===B?1:0)}r.push(new Iu(".morphTargetInfluence["+B+"]",A,M))}f=b.length*l}else{const b=".bones["+t[_].name+"]";n(Du,b+".position",y,"pos",r),n(Ac,b+".quaternion",y,"rot",r),n(Du,b+".scale",y,"scl",r)}}return r.length===0?null:new this(o,f,r,c)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,r=e.length;n!==r;++n){const o=this.tracks[n];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function t3(s){switch(s.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Iu;case"vector":case"vector2":case"vector3":case"vector4":return Du;case"color":return $f;case"quaternion":return Ac;case"bool":case"boolean":return Al;case"string":return Pl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+s)}function n3(s){if(s.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=t3(s.type);if(s.times===void 0){const t=[],n=[];Ff(s.keys,t,n,"value"),s.times=t,s.values=n}return e.parse!==void 0?e.parse(s):new e(s.name,s.times,s.values,s.interpolation)}const Ol={enabled:!1,files:{},add:function(s,e){this.enabled!==!1&&(this.files[s]=e)},get:function(s){if(this.enabled!==!1)return this.files[s]},remove:function(s){delete this.files[s]},clear:function(){this.files={}}};class jf{constructor(e,t,n){const r=this;let o=!1,l=0,c=0,f;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(p){c++,o===!1&&r.onStart!==void 0&&r.onStart(p,l,c),o=!0},this.itemEnd=function(p){l++,r.onProgress!==void 0&&r.onProgress(p,l,c),l===c&&(o=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(p){r.onError!==void 0&&r.onError(p)},this.resolveURL=function(p){return f?f(p):p},this.setURLModifier=function(p){return f=p,this},this.addHandler=function(p,_){return d.push(p,_),this},this.removeHandler=function(p){const _=d.indexOf(p);return _!==-1&&d.splice(_,2),this},this.getHandler=function(p){for(let _=0,y=d.length;_<y;_+=2){const b=d[_],R=d[_+1];if(b.global&&(b.lastIndex=0),b.test(p))return R}return null}}}const T9=new jf;class Ks{constructor(e){this.manager=e!==void 0?e:T9,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,o){n.load(e,r,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const m1={};class r3 extends Error{constructor(e,t){super(e),this.response=t}}class g1 extends Ks{constructor(e){super(e)}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=Ol.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(m1[e]!==void 0){m1[e].push({onLoad:t,onProgress:n,onError:r});return}m1[e]=[],m1[e].push({onLoad:t,onProgress:n,onError:r});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),c=this.mimeType,f=this.responseType;fetch(l).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream=="undefined"||d.body===void 0||d.body.getReader===void 0)return d;const p=m1[e],_=d.body.getReader(),y=d.headers.get("Content-Length")||d.headers.get("X-File-Size"),b=y?parseInt(y):0,R=b!==0;let B=0;const A=new ReadableStream({start(M){q();function q(){_.read().then(({done:V,value:he})=>{if(V)M.close();else{B+=he.byteLength;const Re=new ProgressEvent("progress",{lengthComputable:R,loaded:B,total:b});for(let De=0,nt=p.length;De<nt;De++){const _t=p[De];_t.onProgress&&_t.onProgress(Re)}M.enqueue(he),q()}})}}});return new Response(A)}else throw new r3(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(f){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(p=>new DOMParser().parseFromString(p,c));case"json":return d.json();default:if(c===void 0)return d.text();{const _=/charset="?([^;"\s]*)"?/i.exec(c),y=_&&_[1]?_[1].toLowerCase():void 0,b=new TextDecoder(y);return d.arrayBuffer().then(R=>b.decode(R))}}}).then(d=>{Ol.add(e,d);const p=m1[e];delete m1[e];for(let _=0,y=p.length;_<y;_++){const b=p[_];b.onLoad&&b.onLoad(d)}}).catch(d=>{const p=m1[e];if(p===void 0)throw this.manager.itemError(e),d;delete m1[e];for(let _=0,y=p.length;_<y;_++){const b=p[_];b.onError&&b.onError(d)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class i3 extends Ks{constructor(e){super(e)}load(e,t,n,r){const o=this,l=new g1(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{t(o.parse(JSON.parse(c)))}catch(f){r?r(f):console.error(f),o.manager.itemError(e)}},n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=Hu.parse(e[n]);t.push(r)}return t}}class o3 extends Ks{constructor(e){super(e)}load(e,t,n,r){const o=this,l=[],c=new Ef,f=new g1(this.manager);f.setPath(this.path),f.setResponseType("arraybuffer"),f.setRequestHeader(this.requestHeader),f.setWithCredentials(o.withCredentials);let d=0;function p(_){f.load(e[_],function(y){const b=o.parse(y,!0);l[_]={width:b.width,height:b.height,format:b.format,mipmaps:b.mipmaps},d+=1,d===6&&(b.mipmapCount===1&&(c.minFilter=dn),c.image=l,c.format=b.format,c.needsUpdate=!0,t&&t(c))},n,r)}if(Array.isArray(e))for(let _=0,y=e.length;_<y;++_)p(_);else f.load(e,function(_){const y=o.parse(_,!0);if(y.isCubemap){const b=y.mipmaps.length/y.mipmapCount;for(let R=0;R<b;R++){l[R]={mipmaps:[]};for(let B=0;B<y.mipmapCount;B++)l[R].mipmaps.push(y.mipmaps[R*y.mipmapCount+B]),l[R].format=y.format,l[R].width=y.width,l[R].height=y.height}c.image=l}else c.image.width=y.width,c.image.height=y.height,c.mipmaps=y.mipmaps;y.mipmapCount===1&&(c.minFilter=dn),c.format=y.format,c.needsUpdate=!0,t&&t(c)},n,r);return c}}class Nu extends Ks{constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=Ol.get(e);if(l!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l;const c=Ai("img");function f(){p(),Ol.add(e,this),t&&t(this),o.manager.itemEnd(e)}function d(_){p(),r&&r(_),o.manager.itemError(e),o.manager.itemEnd(e)}function p(){c.removeEventListener("load",f,!1),c.removeEventListener("error",d,!1)}return c.addEventListener("load",f,!1),c.addEventListener("error",d,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(c.crossOrigin=this.crossOrigin),o.manager.itemStart(e),c.src=e,c}}class s3 extends Ks{constructor(e){super(e)}load(e,t,n,r){const o=new $a,l=new Nu(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);let c=0;function f(d){l.load(e[d],function(p){o.images[d]=p,c++,c===6&&(o.needsUpdate=!0,t&&t(o))},void 0,r)}for(let d=0;d<e.length;++d)f(d);return o}}class a3 extends Ks{constructor(e){super(e)}load(e,t,n,r){const o=this,l=new bc,c=new g1(this.manager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(o.withCredentials),c.load(e,function(f){const d=o.parse(f);d&&(d.image!==void 0?l.image=d.image:d.data!==void 0&&(l.image.width=d.width,l.image.height=d.height,l.image.data=d.data),l.wrapS=d.wrapS!==void 0?d.wrapS:Ce,l.wrapT=d.wrapT!==void 0?d.wrapT:Ce,l.magFilter=d.magFilter!==void 0?d.magFilter:dn,l.minFilter=d.minFilter!==void 0?d.minFilter:dn,l.anisotropy=d.anisotropy!==void 0?d.anisotropy:1,d.colorSpace!==void 0?l.colorSpace=d.colorSpace:d.encoding!==void 0&&(l.encoding=d.encoding),d.flipY!==void 0&&(l.flipY=d.flipY),d.format!==void 0&&(l.format=d.format),d.type!==void 0&&(l.type=d.type),d.mipmaps!==void 0&&(l.mipmaps=d.mipmaps,l.minFilter=Ke),d.mipmapCount===1&&(l.minFilter=dn),d.generateMipmaps!==void 0&&(l.generateMipmaps=d.generateMipmaps),l.needsUpdate=!0,t&&t(l,d))},n,r),l}}class l3 extends Ks{constructor(e){super(e)}load(e,t,n,r){const o=new qr,l=new Nu(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(c){o.image=c,o.needsUpdate=!0,t!==void 0&&t(o)},n,r),o}}class j1 extends _i{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new qn(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class A9 extends j1{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(_i.DEFAULT_UP),this.updateMatrix(),this.groundColor=new qn(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Wf=new Ur,P9=new Ee,O9=new Ee;class Zf{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Cn(512,512),this.map=null,this.mapPass=null,this.matrix=new Ur,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ho,this._frameExtents=new Cn(1,1),this._viewportCount=1,this._viewports=[new wr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;P9.setFromMatrixPosition(e.matrixWorld),t.position.copy(P9),O9.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(O9),t.updateMatrixWorld(),Wf.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Wf),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Wf)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class c3 extends Zf{constructor(){super(new Co(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=Ds*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(n!==t.fov||r!==t.aspect||o!==t.far)&&(t.fov=n,t.aspect=r,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class I9 extends j1{constructor(e,t,n=0,r=Math.PI/3,o=0,l=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(_i.DEFAULT_UP),this.updateMatrix(),this.target=new _i,this.distance=n,this.angle=r,this.penumbra=o,this.decay=l,this.map=null,this.shadow=new c3}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const D9=new Ur,zu=new Ee,Gf=new Ee;class u3 extends Zf{constructor(){super(new Co(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Cn(4,2),this._viewportCount=6,this._viewports=[new wr(2,1,1,1),new wr(0,1,1,1),new wr(3,1,1,1),new wr(1,1,1,1),new wr(3,0,1,1),new wr(1,0,1,1)],this._cubeDirections=[new Ee(1,0,0),new Ee(-1,0,0),new Ee(0,0,1),new Ee(0,0,-1),new Ee(0,1,0),new Ee(0,-1,0)],this._cubeUps=[new Ee(0,1,0),new Ee(0,1,0),new Ee(0,1,0),new Ee(0,1,0),new Ee(0,0,1),new Ee(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,o=e.distance||n.far;o!==n.far&&(n.far=o,n.updateProjectionMatrix()),zu.setFromMatrixPosition(e.matrixWorld),n.position.copy(zu),Gf.copy(n.position),Gf.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Gf),n.updateMatrixWorld(),r.makeTranslation(-zu.x,-zu.y,-zu.z),D9.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(D9)}}class H9 extends j1{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new u3}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class f3 extends Zf{constructor(){super(new ou(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class N9 extends j1{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(_i.DEFAULT_UP),this.updateMatrix(),this.target=new _i,this.shadow=new f3}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class z9 extends j1{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class B9 extends j1{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class U9{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Ee)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,o=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.282095),t.addScaledVector(l[1],.488603*r),t.addScaledVector(l[2],.488603*o),t.addScaledVector(l[3],.488603*n),t.addScaledVector(l[4],1.092548*(n*r)),t.addScaledVector(l[5],1.092548*(r*o)),t.addScaledVector(l[6],.315392*(3*o*o-1)),t.addScaledVector(l[7],1.092548*(n*o)),t.addScaledVector(l[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,o=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.886227),t.addScaledVector(l[1],2*.511664*r),t.addScaledVector(l[2],2*.511664*o),t.addScaledVector(l[3],2*.511664*n),t.addScaledVector(l[4],2*.429043*n*r),t.addScaledVector(l[5],2*.429043*r*o),t.addScaledVector(l[6],.743125*o*o-.247708),t.addScaledVector(l[7],2*.429043*n*o),t.addScaledVector(l[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const n=e.x,r=e.y,o=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*o,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*o,t[6]=.315392*(3*o*o-1),t[7]=1.092548*n*o,t[8]=.546274*(n*n-r*r)}}class R0 extends j1{constructor(e=new U9,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class L0 extends Ks{constructor(e){super(e),this.textures={}}load(e,t,n,r){const o=this,l=new g1(o.manager);l.setPath(o.path),l.setRequestHeader(o.requestHeader),l.setWithCredentials(o.withCredentials),l.load(e,function(c){try{t(o.parse(JSON.parse(c)))}catch(f){r?r(f):console.error(f),o.manager.itemError(e)}},n,r)}parse(e){const t=this.textures;function n(o){return t[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),t[o]}const r=L0.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new qn().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const o in e.uniforms){const l=e.uniforms[o];switch(r.uniforms[o]={},l.type){case"t":r.uniforms[o].value=n(l.value);break;case"c":r.uniforms[o].value=new qn().setHex(l.value);break;case"v2":r.uniforms[o].value=new Cn().fromArray(l.value);break;case"v3":r.uniforms[o].value=new Ee().fromArray(l.value);break;case"v4":r.uniforms[o].value=new wr().fromArray(l.value);break;case"m3":r.uniforms[o].value=new Nr().fromArray(l.value);break;case"m4":r.uniforms[o].value=new Ur().fromArray(l.value);break;default:r.uniforms[o].value=l.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const o in e.extensions)r.extensions[o]=e.extensions[o];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=n(e.map)),e.matcap!==void 0&&(r.matcap=n(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),r.normalScale=new Cn().fromArray(o)}return e.displacementMap!==void 0&&(r.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=n(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Cn().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=n(e.thicknessMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:g9,SpriteMaterial:_f,RawShaderMaterial:v9,ShaderMaterial:ps,PointsMaterial:bf,MeshPhysicalMaterial:C9,MeshStandardMaterial:Bf,MeshPhongMaterial:_9,MeshToonMaterial:y9,MeshNormalMaterial:x9,MeshLambertMaterial:w9,MeshDepthMaterial:gf,MeshDistanceMaterial:vf,MeshBasicMaterial:ca,MeshMatcapMaterial:b9,LineDashedMaterial:M9,LineBasicMaterial:As,Material:Uo};return new t[e]}}class Xf{static decodeText(e){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(n){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class V9 extends xn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class F9 extends Ks{constructor(e){super(e)}load(e,t,n,r){const o=this,l=new g1(o.manager);l.setPath(o.path),l.setRequestHeader(o.requestHeader),l.setWithCredentials(o.withCredentials),l.load(e,function(c){try{t(o.parse(JSON.parse(c)))}catch(f){r?r(f):console.error(f),o.manager.itemError(e)}},n,r)}parse(e){const t={},n={};function r(b,R){if(t[R]!==void 0)return t[R];const A=b.interleavedBuffers[R],M=o(b,A.buffer),q=so(A.type,M),V=new l0(q,A.stride);return V.uuid=A.uuid,t[R]=V,V}function o(b,R){if(n[R]!==void 0)return n[R];const A=b.arrayBuffers[R],M=new Uint32Array(A).buffer;return n[R]=M,M}const l=e.isInstancedBufferGeometry?new V9:new xn,c=e.data.index;if(c!==void 0){const b=so(c.type,c.array);l.setIndex(new Vi(b,1))}const f=e.data.attributes;for(const b in f){const R=f[b];let B;if(R.isInterleavedBufferAttribute){const A=r(e.data,R.data);B=new El(A,R.itemSize,R.offset,R.normalized)}else{const A=so(R.type,R.array),M=R.isInstancedBufferAttribute?Mc:Vi;B=new M(A,R.itemSize,R.normalized)}R.name!==void 0&&(B.name=R.name),R.usage!==void 0&&B.setUsage(R.usage),R.updateRange!==void 0&&(B.updateRange.offset=R.updateRange.offset,B.updateRange.count=R.updateRange.count),l.setAttribute(b,B)}const d=e.data.morphAttributes;if(d)for(const b in d){const R=d[b],B=[];for(let A=0,M=R.length;A<M;A++){const q=R[A];let V;if(q.isInterleavedBufferAttribute){const he=r(e.data,q.data);V=new El(he,q.itemSize,q.offset,q.normalized)}else{const he=so(q.type,q.array);V=new Vi(he,q.itemSize,q.normalized)}q.name!==void 0&&(V.name=q.name),B.push(V)}l.morphAttributes[b]=B}e.data.morphTargetsRelative&&(l.morphTargetsRelative=!0);const _=e.data.groups||e.data.drawcalls||e.data.offsets;if(_!==void 0)for(let b=0,R=_.length;b!==R;++b){const B=_[b];l.addGroup(B.start,B.count,B.materialIndex)}const y=e.data.boundingSphere;if(y!==void 0){const b=new Ee;y.center!==void 0&&b.fromArray(y.center),l.boundingSphere=new ds(b,y.radius)}return e.name&&(l.name=e.name),e.userData&&(l.userData=e.userData),l}}class d3 extends Ks{constructor(e){super(e)}load(e,t,n,r){const o=this,l=this.path===""?Xf.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||l;const c=new g1(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(f){let d=null;try{d=JSON.parse(f)}catch(_){r!==void 0&&r(_),console.error("THREE:ObjectLoader: Can't parse "+e+".",_.message);return}const p=d.metadata;if(p===void 0||p.type===void 0||p.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}o.parse(d,t)},n,r)}loadAsync(e,t){return Fl(this,null,function*(){const n=this,r=this.path===""?Xf.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const o=new g1(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const l=yield o.loadAsync(e,t),c=JSON.parse(l),f=c.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return yield n.parseAsync(c)})}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,r),l=this.parseImages(e.images,function(){t!==void 0&&t(d)}),c=this.parseTextures(e.textures,l),f=this.parseMaterials(e.materials,c),d=this.parseObject(e.object,o,f,c,n),p=this.parseSkeletons(e.skeletons,d);if(this.bindSkeletons(d,p),t!==void 0){let _=!1;for(const y in l)if(l[y].data instanceof HTMLImageElement){_=!0;break}_===!1&&t(d)}return d}parseAsync(e){return Fl(this,null,function*(){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),o=yield this.parseImagesAsync(e.images),l=this.parseTextures(e.textures,o),c=this.parseMaterials(e.materials,l),f=this.parseObject(e.object,r,c,l,t),d=this.parseSkeletons(e.skeletons,f);return this.bindSkeletons(f,d),f})}parseShapes(e){const t={};if(e!==void 0)for(let n=0,r=e.length;n<r;n++){const o=new Rl().fromJSON(e[n]);t[o.uuid]=o}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse(function(o){o.isBone&&(r[o.uuid]=o)}),e!==void 0)for(let o=0,l=e.length;o<l;o++){const c=new h0().fromJSON(e[o],r);n[c.uuid]=c}return n}parseGeometries(e,t){const n={};if(e!==void 0){const r=new F9;for(let o=0,l=e.length;o<l;o++){let c;const f=e[o];switch(f.type){case"BufferGeometry":case"InstancedBufferGeometry":c=r.parse(f);break;default:f.type in m9?c=m9[f.type].fromJSON(f,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${f.type}"`)}c.uuid=f.uuid,f.name!==void 0&&(c.name=f.name),f.userData!==void 0&&(c.userData=f.userData),n[f.uuid]=c}}return n}parseMaterials(e,t){const n={},r={};if(e!==void 0){const o=new L0;o.setTextures(t);for(let l=0,c=e.length;l<c;l++){const f=e[l];n[f.uuid]===void 0&&(n[f.uuid]=o.parse(f)),r[f.uuid]=n[f.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const r=e[n],o=Hu.parse(r);t[o.uuid]=o}return t}parseImages(e,t){const n=this,r={};let o;function l(f){return n.manager.itemStart(f),o.load(f,function(){n.manager.itemEnd(f)},void 0,function(){n.manager.itemError(f),n.manager.itemEnd(f)})}function c(f){if(typeof f=="string"){const d=f,p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:n.resourcePath+d;return l(p)}else return f.data?{data:so(f.type,f.data),width:f.width,height:f.height}:null}if(e!==void 0&&e.length>0){const f=new jf(t);o=new Nu(f),o.setCrossOrigin(this.crossOrigin);for(let d=0,p=e.length;d<p;d++){const _=e[d],y=_.url;if(Array.isArray(y)){const b=[];for(let R=0,B=y.length;R<B;R++){const A=y[R],M=c(A);M!==null&&(M instanceof HTMLImageElement?b.push(M):b.push(new bc(M.data,M.width,M.height)))}r[_.uuid]=new Ws(b)}else{const b=c(_.url);r[_.uuid]=new Ws(b)}}}return r}parseImagesAsync(e){return Fl(this,null,function*(){const t=this,n={};let r;function o(l){return Fl(this,null,function*(){if(typeof l=="string"){const c=l,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:t.resourcePath+c;return yield r.loadAsync(f)}else return l.data?{data:so(l.type,l.data),width:l.width,height:l.height}:null})}if(e!==void 0&&e.length>0){r=new Nu(this.manager),r.setCrossOrigin(this.crossOrigin);for(let l=0,c=e.length;l<c;l++){const f=e[l],d=f.url;if(Array.isArray(d)){const p=[];for(let _=0,y=d.length;_<y;_++){const b=d[_],R=yield o(b);R!==null&&(R instanceof HTMLImageElement?p.push(R):p.push(new bc(R.data,R.width,R.height)))}n[f.uuid]=new Ws(p)}else{const p=yield o(f.url);n[f.uuid]=new Ws(p)}}}return n})}parseTextures(e,t){function n(o,l){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),l[o])}const r={};if(e!==void 0)for(let o=0,l=e.length;o<l;o++){const c=e[o];c.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',c.uuid),t[c.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",c.image);const f=t[c.image],d=f.data;let p;Array.isArray(d)?(p=new $a,d.length===6&&(p.needsUpdate=!0)):(d&&d.data?p=new bc:p=new qr,d&&(p.needsUpdate=!0)),p.source=f,p.uuid=c.uuid,c.name!==void 0&&(p.name=c.name),c.mapping!==void 0&&(p.mapping=n(c.mapping,h3)),c.channel!==void 0&&(p.channel=c.channel),c.offset!==void 0&&p.offset.fromArray(c.offset),c.repeat!==void 0&&p.repeat.fromArray(c.repeat),c.center!==void 0&&p.center.fromArray(c.center),c.rotation!==void 0&&(p.rotation=c.rotation),c.wrap!==void 0&&(p.wrapS=n(c.wrap[0],k9),p.wrapT=n(c.wrap[1],k9)),c.format!==void 0&&(p.format=c.format),c.internalFormat!==void 0&&(p.internalFormat=c.internalFormat),c.type!==void 0&&(p.type=c.type),c.colorSpace!==void 0&&(p.colorSpace=c.colorSpace),c.encoding!==void 0&&(p.encoding=c.encoding),c.minFilter!==void 0&&(p.minFilter=n(c.minFilter,$9)),c.magFilter!==void 0&&(p.magFilter=n(c.magFilter,$9)),c.anisotropy!==void 0&&(p.anisotropy=c.anisotropy),c.flipY!==void 0&&(p.flipY=c.flipY),c.generateMipmaps!==void 0&&(p.generateMipmaps=c.generateMipmaps),c.premultiplyAlpha!==void 0&&(p.premultiplyAlpha=c.premultiplyAlpha),c.unpackAlignment!==void 0&&(p.unpackAlignment=c.unpackAlignment),c.userData!==void 0&&(p.userData=c.userData),r[c.uuid]=p}return r}parseObject(e,t,n,r,o){let l;function c(y){return t[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",y),t[y]}function f(y){if(y!==void 0){if(Array.isArray(y)){const b=[];for(let R=0,B=y.length;R<B;R++){const A=y[R];n[A]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",A),b.push(n[A])}return b}return n[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),n[y]}}function d(y){return r[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",y),r[y]}let p,_;switch(e.type){case"Scene":l=new T2,e.background!==void 0&&(Number.isInteger(e.background)?l.background=new qn(e.background):l.background=d(e.background)),e.environment!==void 0&&(l.environment=d(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?l.fog=new a0(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(l.fog=new s0(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(l.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(l.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":l=new Co(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(l.focus=e.focus),e.zoom!==void 0&&(l.zoom=e.zoom),e.filmGauge!==void 0&&(l.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(l.filmOffset=e.filmOffset),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"OrthographicCamera":l=new ou(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(l.zoom=e.zoom),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"AmbientLight":l=new z9(e.color,e.intensity);break;case"DirectionalLight":l=new N9(e.color,e.intensity);break;case"PointLight":l=new H9(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":l=new B9(e.color,e.intensity,e.width,e.height);break;case"SpotLight":l=new I9(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":l=new A9(e.color,e.groundColor,e.intensity);break;case"LightProbe":l=new R0().fromJSON(e);break;case"SkinnedMesh":p=c(e.geometry),_=f(e.material),l=new V2(p,_),e.bindMode!==void 0&&(l.bindMode=e.bindMode),e.bindMatrix!==void 0&&l.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(l.skeleton=e.skeleton);break;case"Mesh":p=c(e.geometry),_=f(e.material),l=new fo(p,_);break;case"InstancedMesh":p=c(e.geometry),_=f(e.material);const y=e.count,b=e.instanceMatrix,R=e.instanceColor;l=new j2(p,_,y),l.instanceMatrix=new Mc(new Float32Array(b.array),16),R!==void 0&&(l.instanceColor=new Mc(new Float32Array(R.array),R.itemSize));break;case"LOD":l=new H2;break;case"Line":l=new $1(c(e.geometry),f(e.material));break;case"LineLoop":l=new K2(c(e.geometry),f(e.material));break;case"LineSegments":l=new Xa(c(e.geometry),f(e.material));break;case"PointCloud":case"Points":l=new J2(c(e.geometry),f(e.material));break;case"Sprite":l=new I2(f(e.material));break;case"Group":l=new vc;break;case"Bone":l=new xf;break;default:l=new _i}if(l.uuid=e.uuid,e.name!==void 0&&(l.name=e.name),e.matrix!==void 0?(l.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(l.matrixAutoUpdate=e.matrixAutoUpdate),l.matrixAutoUpdate&&l.matrix.decompose(l.position,l.quaternion,l.scale)):(e.position!==void 0&&l.position.fromArray(e.position),e.rotation!==void 0&&l.rotation.fromArray(e.rotation),e.quaternion!==void 0&&l.quaternion.fromArray(e.quaternion),e.scale!==void 0&&l.scale.fromArray(e.scale)),e.up!==void 0&&l.up.fromArray(e.up),e.castShadow!==void 0&&(l.castShadow=e.castShadow),e.receiveShadow!==void 0&&(l.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(l.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(l.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(l.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&l.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(l.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(l.visible=e.visible),e.frustumCulled!==void 0&&(l.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(l.renderOrder=e.renderOrder),e.userData!==void 0&&(l.userData=e.userData),e.layers!==void 0&&(l.layers.mask=e.layers),e.children!==void 0){const y=e.children;for(let b=0;b<y.length;b++)l.add(this.parseObject(y[b],t,n,r,o))}if(e.animations!==void 0){const y=e.animations;for(let b=0;b<y.length;b++){const R=y[b];l.animations.push(o[R])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(l.autoUpdate=e.autoUpdate);const y=e.levels;for(let b=0;b<y.length;b++){const R=y[b],B=l.getObjectByProperty("uuid",R.object);B!==void 0&&l.addLevel(B,R.distance,R.hysteresis)}}return l}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const r=t[n.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(r,n.bindMatrix)}})}}const h3={UVMapping:Yt,CubeReflectionMapping:wn,CubeRefractionMapping:an,EquirectangularReflectionMapping:un,EquirectangularRefractionMapping:Tn,CubeUVReflectionMapping:yt},k9={RepeatWrapping:pe,ClampToEdgeWrapping:Ce,MirroredRepeatWrapping:Ne},$9={NearestFilter:Ze,NearestMipmapNearestFilter:et,NearestMipmapLinearFilter:qt,LinearFilter:dn,LinearMipmapNearestFilter:Me,LinearMipmapLinearFilter:Ke};class p3 extends Ks{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=Ol.get(e);if(l!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l;const c={};c.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",c.headers=this.requestHeader,fetch(e,c).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(f){Ol.add(e,f),t&&t(f),o.manager.itemEnd(e)}).catch(function(f){r&&r(f),o.manager.itemError(e),o.manager.itemEnd(e)}),o.manager.itemStart(e)}}let T0;class Yf{static getContext(){return T0===void 0&&(T0=new(window.AudioContext||window.webkitAudioContext)),T0}static setContext(e){T0=e}}class m3 extends Ks{constructor(e){super(e)}load(e,t,n,r){const o=this,l=new g1(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(f){try{const d=f.slice(0);Yf.getContext().decodeAudioData(d,function(_){t(_)},c)}catch(d){c(d)}},n,r);function c(f){r?r(f):console.error(f),o.manager.itemError(e)}}}class g3 extends R0{constructor(e,t,n=1){super(void 0,n),this.isHemisphereLightProbe=!0;const r=new qn().set(e),o=new qn().set(t),l=new Ee(r.r,r.g,r.b),c=new Ee(o.r,o.g,o.b),f=Math.sqrt(Math.PI),d=f*Math.sqrt(.75);this.sh.coefficients[0].copy(l).add(c).multiplyScalar(f),this.sh.coefficients[1].copy(l).sub(c).multiplyScalar(d)}}class v3 extends R0{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const n=new qn().set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const j9=new Ur,W9=new Ur,Il=new Ur;class C3{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Co,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Co,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Il.copy(e.projectionMatrix);const r=t.eyeSep/2,o=r*t.near/t.focus,l=t.near*Math.tan(qi*t.fov*.5)/t.zoom;let c,f;W9.elements[12]=-r,j9.elements[12]=r,c=-l*t.aspect+o,f=l*t.aspect+o,Il.elements[0]=2*t.near/(f-c),Il.elements[8]=(f+c)/(f-c),this.cameraL.projectionMatrix.copy(Il),c=-l*t.aspect-o,f=l*t.aspect-o,Il.elements[0]=2*t.near/(f-c),Il.elements[8]=(f+c)/(f-c),this.cameraR.projectionMatrix.copy(Il)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(W9),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(j9)}}class Z9{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=G9(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=G9();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function G9(){return(typeof performance=="undefined"?Date:performance).now()}const Dl=new Ee,X9=new Ui,_3=new Ee,Hl=new Ee;class y3 extends _i{constructor(){super(),this.type="AudioListener",this.context=Yf.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Z9}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Dl,X9,_3),Hl.set(0,0,-1).applyQuaternion(X9),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Dl.x,r),t.positionY.linearRampToValueAtTime(Dl.y,r),t.positionZ.linearRampToValueAtTime(Dl.z,r),t.forwardX.linearRampToValueAtTime(Hl.x,r),t.forwardY.linearRampToValueAtTime(Hl.y,r),t.forwardZ.linearRampToValueAtTime(Hl.z,r),t.upX.linearRampToValueAtTime(n.x,r),t.upY.linearRampToValueAtTime(n.y,r),t.upZ.linearRampToValueAtTime(n.z,r)}else t.setPosition(Dl.x,Dl.y,Dl.z),t.setOrientation(Hl.x,Hl.y,Hl.z,n.x,n.y,n.z)}}class Y9 extends _i{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Nl=new Ee,K9=new Ui,x3=new Ee,zl=new Ee;class w3 extends Y9{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Nl,K9,x3),zl.set(0,0,1).applyQuaternion(K9);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Nl.x,n),t.positionY.linearRampToValueAtTime(Nl.y,n),t.positionZ.linearRampToValueAtTime(Nl.z,n),t.orientationX.linearRampToValueAtTime(zl.x,n),t.orientationY.linearRampToValueAtTime(zl.y,n),t.orientationZ.linearRampToValueAtTime(zl.z,n)}else t.setPosition(Nl.x,Nl.y,Nl.z),t.setOrientation(zl.x,zl.y,zl.z)}}class b3{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class q9{constructor(e,t,n){this.binding=e,this.valueSize=n;let r,o,l;switch(t){case"quaternion":r=this._slerp,o=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":r=this._select,o=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:r=this._lerp,o=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=o,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,o=e*r+r;let l=this.cumulativeWeight;if(l===0){for(let c=0;c!==r;++c)n[o+c]=n[c];l=t}else{l+=t;const c=t/l;this._mixBufferRegion(n,o,0,c,r)}this.cumulativeWeight=l}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,o=this.cumulativeWeight,l=this.cumulativeWeightAdditive,c=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const f=t*this._origIndex;this._mixBufferRegion(n,r,f,1-o,t)}l>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let f=t,d=t+t;f!==d;++f)if(n[f]!==n[f+t]){c.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let o=n,l=r;o!==l;++o)t[o]=t[r+o%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,o){if(r>=.5)for(let l=0;l!==o;++l)e[t+l]=e[n+l]}_slerp(e,t,n,r){Ui.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,o){const l=this._workIndex*o;Ui.multiplyQuaternionsFlat(e,l,e,t,e,n),Ui.slerpFlat(e,t,e,t,e,l,r)}_lerp(e,t,n,r,o){const l=1-r;for(let c=0;c!==o;++c){const f=t+c;e[f]=e[f]*l+e[n+c]*r}}_lerpAdditive(e,t,n,r,o){for(let l=0;l!==o;++l){const c=t+l;e[c]=e[c]+e[n+l]*r}}}const Kf="\\[\\]\\.:\\/",M3=new RegExp("["+Kf+"]","g"),qf="[^"+Kf+"]",E3="[^"+Kf.replace("\\.","")+"]",S3=/((?:WC+[\/:])*)/.source.replace("WC",qf),R3=/(WCOD+)?/.source.replace("WCOD",E3),L3=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",qf),T3=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",qf),A3=new RegExp("^"+S3+R3+L3+T3+"$"),P3=["material","materials","bones","map"];class O3{constructor(e,t,n){const r=n||Oi.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=n.length;r!==o;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class Oi{constructor(e,t,n){this.path=t,this.parsedPath=n||Oi.parseTrackName(t),this.node=Oi.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Oi.Composite(e,t,n):new Oi(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(M3,"")}static parseTrackName(e){const t=A3.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const o=n.nodeName.substring(r+1);P3.indexOf(o)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=o)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(o){for(let l=0;l<o.length;l++){const c=o[l];if(c.name===t||c.uuid===t)return c;const f=n(c.children);if(f)return f}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,o=n.length;r!==o;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,o=n.length;r!==o;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,o=n.length;r!==o;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,o=n.length;r!==o;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let o=t.propertyIndex;if(e||(e=Oi.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){let d=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let p=0;p<e.length;p++)if(e[p].name===d){d=p;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(d!==void 0){if(e[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[d]}}const l=e[r];if(l===void 0){const d=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+r+" but it wasn't found.",e);return}let c=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?c=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let f=this.BindingType.Direct;if(o!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}f=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=o}else l.fromArray!==void 0&&l.toArray!==void 0?(f=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(f=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=r;this.getValue=this.GetterByBindingType[f],this.setValue=this.SetterByBindingTypeAndVersioning[f][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Oi.Composite=O3,Oi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Oi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Oi.prototype.GetterByBindingType=[Oi.prototype._getValue_direct,Oi.prototype._getValue_array,Oi.prototype._getValue_arrayElement,Oi.prototype._getValue_toArray],Oi.prototype.SetterByBindingTypeAndVersioning=[[Oi.prototype._setValue_direct,Oi.prototype._setValue_direct_setNeedsUpdate,Oi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Oi.prototype._setValue_array,Oi.prototype._setValue_array_setNeedsUpdate,Oi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Oi.prototype._setValue_arrayElement,Oi.prototype._setValue_arrayElement_setNeedsUpdate,Oi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Oi.prototype._setValue_fromArray,Oi.prototype._setValue_fromArray_setNeedsUpdate,Oi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class I3{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Oo(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,o=this._bindings,l=o.length;let c,f=e.length,d=this.nCachedObjects_;for(let p=0,_=arguments.length;p!==_;++p){const y=arguments[p],b=y.uuid;let R=t[b];if(R===void 0){R=f++,t[b]=R,e.push(y);for(let B=0,A=l;B!==A;++B)o[B].push(new Oi(y,n[B],r[B]))}else if(R<d){c=e[R];const B=--d,A=e[B];t[A.uuid]=R,e[R]=A,t[b]=B,e[B]=y;for(let M=0,q=l;M!==q;++M){const V=o[M],he=V[B];let Re=V[R];V[R]=he,Re===void 0&&(Re=new Oi(y,n[M],r[M])),V[B]=Re}}else e[R]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=d}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let o=this.nCachedObjects_;for(let l=0,c=arguments.length;l!==c;++l){const f=arguments[l],d=f.uuid,p=t[d];if(p!==void 0&&p>=o){const _=o++,y=e[_];t[y.uuid]=p,e[p]=y,t[d]=_,e[_]=f;for(let b=0,R=r;b!==R;++b){const B=n[b],A=B[_],M=B[p];B[p]=A,B[_]=M}}}this.nCachedObjects_=o}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let o=this.nCachedObjects_,l=e.length;for(let c=0,f=arguments.length;c!==f;++c){const d=arguments[c],p=d.uuid,_=t[p];if(_!==void 0)if(delete t[p],_<o){const y=--o,b=e[y],R=--l,B=e[R];t[b.uuid]=_,e[_]=b,t[B.uuid]=y,e[y]=B,e.pop();for(let A=0,M=r;A!==M;++A){const q=n[A],V=q[y],he=q[R];q[_]=V,q[y]=he,q.pop()}}else{const y=--l,b=e[y];y>0&&(t[b.uuid]=_),e[_]=b,e.pop();for(let R=0,B=r;R!==B;++R){const A=n[R];A[_]=A[y],A.pop()}}}this.nCachedObjects_=o}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const o=this._bindings;if(r!==void 0)return o[r];const l=this._paths,c=this._parsedPaths,f=this._objects,d=f.length,p=this.nCachedObjects_,_=new Array(d);r=o.length,n[e]=r,l.push(e),c.push(t),o.push(_);for(let y=p,b=f.length;y!==b;++y){const R=f[y];_[y]=new Oi(R,e,t)}return _}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const r=this._paths,o=this._parsedPaths,l=this._bindings,c=l.length-1,f=l[c],d=e[c];t[d]=n,l[n]=f,l.pop(),o[n]=o[c],o.pop(),r[n]=r[c],r.pop()}}}class J9{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const o=t.tracks,l=o.length,c=new Array(l),f={endingStart:ro,endingEnd:ro};for(let d=0;d!==l;++d){const p=o[d].createInterpolant(null);c[d]=p,p.settings=f}this._interpolantSettings=f,this._interpolants=c,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Ci,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const r=this._clip.duration,o=e._clip.duration,l=o/r,c=r/o;e.warp(1,l,t),this.warp(c,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,o=r.time,l=this.timeScale;let c=this._timeScaleInterpolant;c===null&&(c=r._lendControlInterpolant(),this._timeScaleInterpolant=c);const f=c.parameterPositions,d=c.sampleValues;return f[0]=o,f[1]=o+n,d[0]=e/l,d[1]=t/l,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}const o=this._startTime;if(o!==null){const f=(e-o)*n;f<0||n===0?t=0:(this._startTime=null,t=n*f)}t*=this._updateTimeScale(e);const l=this._updateTime(t),c=this._updateWeight(e);if(c>0){const f=this._interpolants,d=this._propertyBindings;switch(this.blendMode){case mo:for(let p=0,_=f.length;p!==_;++p)f[p].evaluate(l),d[p].accumulateAdditive(c);break;case To:default:for(let p=0,_=f.length;p!==_;++p)f[p].evaluate(l),d[p].accumulate(r,c)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,o=this._loopCount;const l=n===Ii;if(e===0)return o===-1?r:l&&(o&1)===1?t-r:r;if(n===fi){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),r>=t||r<0){const c=Math.floor(r/t);r-=t*c,o+=Math.abs(c);const f=this.repetitions-o;if(f<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(f===1){const d=e<0;this._setEndings(d,!d,l)}else this._setEndings(!1,!1,l);this._loopCount=o,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:c})}}else this.time=r;if(l&&(o&1)===1)return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=ci,r.endingEnd=ci):(e?r.endingStart=this.zeroSlopeAtStart?ci:ro:r.endingStart=$o,t?r.endingEnd=this.zeroSlopeAtEnd?ci:ro:r.endingEnd=$o)}_scheduleFading(e,t,n){const r=this._mixer,o=r.time;let l=this._weightInterpolant;l===null&&(l=r._lendControlInterpolant(),this._weightInterpolant=l);const c=l.parameterPositions,f=l.sampleValues;return c[0]=o,f[0]=t,c[1]=o+e,f[1]=n,this}}const D3=new Float32Array(1);class H3 extends gi{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,o=r.length,l=e._propertyBindings,c=e._interpolants,f=n.uuid,d=this._bindingsByRootAndName;let p=d[f];p===void 0&&(p={},d[f]=p);for(let _=0;_!==o;++_){const y=r[_],b=y.name;let R=p[b];if(R!==void 0)++R.referenceCount,l[_]=R;else{if(R=l[_],R!==void 0){R._cacheIndex===null&&(++R.referenceCount,this._addInactiveBinding(R,f,b));continue}const B=t&&t._propertyBindings[_].binding.parsedPath;R=new q9(Oi.create(n,b,B),y.ValueTypeName,y.getValueSize()),++R.referenceCount,this._addInactiveBinding(R,f,b),l[_]=R}c[_].resultBuffer=R.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,r=e._clip.uuid,o=this._actionsByClip[r];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,r,n)}const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const o=t[n];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const o=t[n];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,o=this._actionsByClip;let l=o[t];if(l===void 0)l={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[t]=l;else{const c=l.knownActions;e._byClipCacheIndex=c.length,c.push(e)}e._cacheIndex=r.length,r.push(e),l.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const o=e._clip.uuid,l=this._actionsByClip,c=l[o],f=c.knownActions,d=f[f.length-1],p=e._byClipCacheIndex;d._byClipCacheIndex=p,f[p]=d,f.pop(),e._byClipCacheIndex=null;const _=c.actionByRoot,y=(e._localRoot||this._root).uuid;delete _[y],f.length===0&&delete l[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const o=t[n];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,o=t[r];e._cacheIndex=r,t[r]=e,o._cacheIndex=n,t[n]=o}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,o=t[r];e._cacheIndex=r,t[r]=e,o._cacheIndex=n,t[n]=o}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,o=this._bindings;let l=r[t];l===void 0&&(l={},r[t]=l),l[n]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,o=n.path,l=this._bindingsByRootAndName,c=l[r],f=t[t.length-1],d=e._cacheIndex;f._cacheIndex=d,t[d]=f,t.pop(),delete c[o],Object.keys(c).length===0&&delete l[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,o=t[r];e._cacheIndex=r,t[r]=e,o._cacheIndex=n,t[n]=o}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,o=t[r];e._cacheIndex=r,t[r]=e,o._cacheIndex=n,t[n]=o}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new kf(new Float32Array(2),new Float32Array(2),1,D3),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,o=t[r];e.__cacheIndex=r,t[r]=e,o.__cacheIndex=n,t[n]=o}clipAction(e,t,n){const r=t||this._root,o=r.uuid;let l=typeof e=="string"?Hu.findByName(r,e):e;const c=l!==null?l.uuid:e,f=this._actionsByClip[c];let d=null;if(n===void 0&&(l!==null?n=l.blendMode:n=To),f!==void 0){const _=f.actionByRoot[o];if(_!==void 0&&_.blendMode===n)return _;d=f.knownActions[0],l===null&&(l=d._clip)}if(l===null)return null;const p=new J9(this,l,t,n);return this._bindAction(p,d),this._addInactiveAction(p,c,o),p}existingAction(e,t){const n=t||this._root,r=n.uuid,o=typeof e=="string"?Hu.findByName(n,e):e,l=o?o.uuid:e,c=this._actionsByClip[l];return c!==void 0&&c.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,o=Math.sign(e),l=this._accuIndex^=1;for(let d=0;d!==n;++d)t[d]._update(r,e,o,l);const c=this._bindings,f=this._nActiveBindings;for(let d=0;d!==f;++d)c[d].apply(l);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,o=r[n];if(o!==void 0){const l=o.knownActions;for(let c=0,f=l.length;c!==f;++c){const d=l[c];this._deactivateAction(d);const p=d._cacheIndex,_=t[t.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,_._cacheIndex=p,t[p]=_,t.pop(),this._removeInactiveBindingsForAction(d)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const l in n){const c=n[l].actionByRoot,f=c[t];f!==void 0&&(this._deactivateAction(f),this._removeInactiveAction(f))}const r=this._bindingsByRootAndName,o=r[t];if(o!==void 0)for(const l in o){const c=o[l];c.restoreOriginalState(),this._removeInactiveBinding(c)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class Jf{constructor(e){this.value=e}clone(){return new Jf(this.value.clone===void 0?this.value:this.value.clone())}}let N3=0;class z3 extends gi{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:N3++}),this.name="",this.usage=yn,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,r=t.length;n<r;n++)this.uniforms.push(t[n].clone());return this}clone(){return new this.constructor().copy(this)}}class B3 extends l0{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class U3{constructor(e,t,n,r,o){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class V3{constructor(e,t,n=0,r=1/0){this.ray=new Na(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new S1,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return Qf(e,this,n,t),n.sort(Q9),n}intersectObjects(e,t=!0,n=[]){for(let r=0,o=e.length;r<o;r++)Qf(e[r],this,n,t);return n.sort(Q9),n}}function Q9(s,e){return s.distance-e.distance}function Qf(s,e,t,n){if(s.layers.test(e.layers)&&s.raycast(e,t),n===!0){const r=s.children;for(let o=0,l=r.length;o<l;o++)Qf(r[o],e,t,!0)}}class F3{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(oi(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class k3{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}const eh=new Cn;class $3{constructor(e=new Cn(1/0,1/0),t=new Cn(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=eh.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,eh).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const th=new Ee,A0=new Ee;class j3{constructor(e=new Ee,t=new Ee){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){th.subVectors(e,this.start),A0.subVectors(this.end,this.start);const n=A0.dot(A0);let o=A0.dot(th)/n;return t&&(o=oi(o,0,1)),o}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const nh=new Ee;class W3 extends _i{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new xn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let l=0,c=1,f=32;l<f;l++,c++){const d=l/f*Math.PI*2,p=c/f*Math.PI*2;r.push(Math.cos(d),Math.sin(d),1,Math.cos(p),Math.sin(p),1)}n.setAttribute("position",new dr(r,3));const o=new As({fog:!1,toneMapped:!1});this.cone=new Xa(n,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),nh.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(nh),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const W1=new Ee,P0=new Ur,ed=new Ur;class Z3 extends Xa{constructor(e){const t=rh(e),n=new xn,r=[],o=[],l=new qn(0,0,1),c=new qn(0,1,0);for(let d=0;d<t.length;d++){const p=t[d];p.parent&&p.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),o.push(l.r,l.g,l.b),o.push(c.r,c.g,c.b))}n.setAttribute("position",new dr(r,3)),n.setAttribute("color",new dr(o,3));const f=new As({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,f),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");ed.copy(this.root.matrixWorld).invert();for(let o=0,l=0;o<t.length;o++){const c=t[o];c.parent&&c.parent.isBone&&(P0.multiplyMatrices(ed,c.matrixWorld),W1.setFromMatrixPosition(P0),r.setXYZ(l,W1.x,W1.y,W1.z),P0.multiplyMatrices(ed,c.parent.matrixWorld),W1.setFromMatrixPosition(P0),r.setXYZ(l+1,W1.x,W1.y,W1.z),l+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function rh(s){const e=[];s.isBone===!0&&e.push(s);for(let t=0;t<s.children.length;t++)e.push.apply(e,rh(s.children[t]));return e}class G3 extends fo{constructor(e,t,n){const r=new Tc(t,4,2),o=new ca({wireframe:!0,fog:!1,toneMapped:!1});super(r,o),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const X3=new Ee,ih=new qn,oh=new qn;class Y3 extends _i{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new Lc(t);r.rotateY(Math.PI*.5),this.material=new ca({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=r.getAttribute("position"),l=new Float32Array(o.count*3);r.setAttribute("color",new Vi(l,3)),this.add(new fo(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");ih.copy(this.light.color),oh.copy(this.light.groundColor);for(let n=0,r=t.count;n<r;n++){const o=n<r/2?ih:oh;t.setXYZ(n,o.r,o.g,o.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(X3.setFromMatrixPosition(this.light.matrixWorld).negate())}}class K3 extends Xa{constructor(e=10,t=10,n=4473924,r=8947848){n=new qn(n),r=new qn(r);const o=t/2,l=e/t,c=e/2,f=[],d=[];for(let y=0,b=0,R=-c;y<=t;y++,R+=l){f.push(-c,0,R,c,0,R),f.push(R,0,-c,R,0,c);const B=y===o?n:r;B.toArray(d,b),b+=3,B.toArray(d,b),b+=3,B.toArray(d,b),b+=3,B.toArray(d,b),b+=3}const p=new xn;p.setAttribute("position",new dr(f,3)),p.setAttribute("color",new dr(d,3));const _=new As({vertexColors:!0,toneMapped:!1});super(p,_),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class q3 extends Xa{constructor(e=10,t=16,n=8,r=64,o=4473924,l=8947848){o=new qn(o),l=new qn(l);const c=[],f=[];if(t>1)for(let _=0;_<t;_++){const y=_/t*(Math.PI*2),b=Math.sin(y)*e,R=Math.cos(y)*e;c.push(0,0,0),c.push(b,0,R);const B=_&1?o:l;f.push(B.r,B.g,B.b),f.push(B.r,B.g,B.b)}for(let _=0;_<n;_++){const y=_&1?o:l,b=e-e/n*_;for(let R=0;R<r;R++){let B=R/r*(Math.PI*2),A=Math.sin(B)*b,M=Math.cos(B)*b;c.push(A,0,M),f.push(y.r,y.g,y.b),B=(R+1)/r*(Math.PI*2),A=Math.sin(B)*b,M=Math.cos(B)*b,c.push(A,0,M),f.push(y.r,y.g,y.b)}}const d=new xn;d.setAttribute("position",new dr(c,3)),d.setAttribute("color",new dr(f,3));const p=new As({vertexColors:!0,toneMapped:!1});super(d,p),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const sh=new Ee,O0=new Ee,ah=new Ee;class J3 extends _i{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new xn;r.setAttribute("position",new dr([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const o=new As({fog:!1,toneMapped:!1});this.lightPlane=new $1(r,o),this.add(this.lightPlane),r=new xn,r.setAttribute("position",new dr([0,0,0,0,0,1],3)),this.targetLine=new $1(r,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),sh.setFromMatrixPosition(this.light.matrixWorld),O0.setFromMatrixPosition(this.light.target.matrixWorld),ah.subVectors(O0,sh),this.lightPlane.lookAt(O0),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(O0),this.targetLine.scale.z=ah.length()}}const I0=new Ee,_o=new ba;class Q3 extends Xa{constructor(e){const t=new xn,n=new As({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],o=[],l={};c("n1","n2"),c("n2","n4"),c("n4","n3"),c("n3","n1"),c("f1","f2"),c("f2","f4"),c("f4","f3"),c("f3","f1"),c("n1","f1"),c("n2","f2"),c("n3","f3"),c("n4","f4"),c("p","n1"),c("p","n2"),c("p","n3"),c("p","n4"),c("u1","u2"),c("u2","u3"),c("u3","u1"),c("c","t"),c("p","c"),c("cn1","cn2"),c("cn3","cn4"),c("cf1","cf2"),c("cf3","cf4");function c(R,B){f(R),f(B)}function f(R){r.push(0,0,0),o.push(0,0,0),l[R]===void 0&&(l[R]=[]),l[R].push(r.length/3-1)}t.setAttribute("position",new dr(r,3)),t.setAttribute("color",new dr(o,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update();const d=new qn(16755200),p=new qn(16711680),_=new qn(43775),y=new qn(16777215),b=new qn(3355443);this.setColors(d,p,_,y,b)}setColors(e,t,n,r,o){const c=this.geometry.getAttribute("color");c.setXYZ(0,e.r,e.g,e.b),c.setXYZ(1,e.r,e.g,e.b),c.setXYZ(2,e.r,e.g,e.b),c.setXYZ(3,e.r,e.g,e.b),c.setXYZ(4,e.r,e.g,e.b),c.setXYZ(5,e.r,e.g,e.b),c.setXYZ(6,e.r,e.g,e.b),c.setXYZ(7,e.r,e.g,e.b),c.setXYZ(8,e.r,e.g,e.b),c.setXYZ(9,e.r,e.g,e.b),c.setXYZ(10,e.r,e.g,e.b),c.setXYZ(11,e.r,e.g,e.b),c.setXYZ(12,e.r,e.g,e.b),c.setXYZ(13,e.r,e.g,e.b),c.setXYZ(14,e.r,e.g,e.b),c.setXYZ(15,e.r,e.g,e.b),c.setXYZ(16,e.r,e.g,e.b),c.setXYZ(17,e.r,e.g,e.b),c.setXYZ(18,e.r,e.g,e.b),c.setXYZ(19,e.r,e.g,e.b),c.setXYZ(20,e.r,e.g,e.b),c.setXYZ(21,e.r,e.g,e.b),c.setXYZ(22,e.r,e.g,e.b),c.setXYZ(23,e.r,e.g,e.b),c.setXYZ(24,t.r,t.g,t.b),c.setXYZ(25,t.r,t.g,t.b),c.setXYZ(26,t.r,t.g,t.b),c.setXYZ(27,t.r,t.g,t.b),c.setXYZ(28,t.r,t.g,t.b),c.setXYZ(29,t.r,t.g,t.b),c.setXYZ(30,t.r,t.g,t.b),c.setXYZ(31,t.r,t.g,t.b),c.setXYZ(32,n.r,n.g,n.b),c.setXYZ(33,n.r,n.g,n.b),c.setXYZ(34,n.r,n.g,n.b),c.setXYZ(35,n.r,n.g,n.b),c.setXYZ(36,n.r,n.g,n.b),c.setXYZ(37,n.r,n.g,n.b),c.setXYZ(38,r.r,r.g,r.b),c.setXYZ(39,r.r,r.g,r.b),c.setXYZ(40,o.r,o.g,o.b),c.setXYZ(41,o.r,o.g,o.b),c.setXYZ(42,o.r,o.g,o.b),c.setXYZ(43,o.r,o.g,o.b),c.setXYZ(44,o.r,o.g,o.b),c.setXYZ(45,o.r,o.g,o.b),c.setXYZ(46,o.r,o.g,o.b),c.setXYZ(47,o.r,o.g,o.b),c.setXYZ(48,o.r,o.g,o.b),c.setXYZ(49,o.r,o.g,o.b),c.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,r=1;_o.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Eo("c",t,e,_o,0,0,-1),Eo("t",t,e,_o,0,0,1),Eo("n1",t,e,_o,-n,-r,-1),Eo("n2",t,e,_o,n,-r,-1),Eo("n3",t,e,_o,-n,r,-1),Eo("n4",t,e,_o,n,r,-1),Eo("f1",t,e,_o,-n,-r,1),Eo("f2",t,e,_o,n,-r,1),Eo("f3",t,e,_o,-n,r,1),Eo("f4",t,e,_o,n,r,1),Eo("u1",t,e,_o,n*.7,r*1.1,-1),Eo("u2",t,e,_o,-n*.7,r*1.1,-1),Eo("u3",t,e,_o,0,r*2,-1),Eo("cf1",t,e,_o,-n,0,1),Eo("cf2",t,e,_o,n,0,1),Eo("cf3",t,e,_o,0,-r,1),Eo("cf4",t,e,_o,0,r,1),Eo("cn1",t,e,_o,-n,0,-1),Eo("cn2",t,e,_o,n,0,-1),Eo("cn3",t,e,_o,0,-r,-1),Eo("cn4",t,e,_o,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Eo(s,e,t,n,r,o,l){I0.set(r,o,l).unproject(n);const c=e[s];if(c!==void 0){const f=t.getAttribute("position");for(let d=0,p=c.length;d<p;d++)f.setXYZ(c[d],I0.x,I0.y,I0.z)}}const D0=new No;class ep extends Xa{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),o=new xn;o.setIndex(new Vi(n,1)),o.setAttribute("position",new Vi(r,3)),super(o,new As({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&D0.setFromObject(this.object),D0.isEmpty())return;const t=D0.min,n=D0.max,r=this.geometry.attributes.position,o=r.array;o[0]=n.x,o[1]=n.y,o[2]=n.z,o[3]=t.x,o[4]=n.y,o[5]=n.z,o[6]=t.x,o[7]=t.y,o[8]=n.z,o[9]=n.x,o[10]=t.y,o[11]=n.z,o[12]=n.x,o[13]=n.y,o[14]=t.z,o[15]=t.x,o[16]=n.y,o[17]=t.z,o[18]=t.x,o[19]=t.y,o[20]=t.z,o[21]=n.x,o[22]=t.y,o[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class tp extends Xa{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new xn;o.setIndex(new Vi(n,1)),o.setAttribute("position",new dr(r,3)),super(o,new As({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class np extends $1{constructor(e,t=1,n=16776960){const r=n,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],l=new xn;l.setAttribute("position",new dr(o,3)),l.computeBoundingSphere(),super(l,new As({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const c=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],f=new xn;f.setAttribute("position",new dr(c,3)),f.computeBoundingSphere(),this.add(new fo(f,new ca({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const lh=new Ee;let H0,td;class rp extends _i{constructor(e=new Ee(0,0,1),t=new Ee(0,0,0),n=1,r=16776960,o=n*.2,l=o*.2){super(),this.type="ArrowHelper",H0===void 0&&(H0=new xn,H0.setAttribute("position",new dr([0,0,0,0,1,0],3)),td=new Sl(0,.5,1,5,1),td.translate(0,-.5,0)),this.position.copy(t),this.line=new $1(H0,new As({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new fo(td,new ca({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,o,l)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{lh.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(lh,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class ip extends Xa{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new xn;r.setAttribute("position",new dr(t,3)),r.setAttribute("color",new dr(n,3));const o=new As({vertexColors:!0,toneMapped:!1});super(r,o),this.type="AxesHelper"}setColors(e,t,n){const r=new qn,o=this.geometry.attributes.color.array;return r.set(e),r.toArray(o,0),r.toArray(o,3),r.set(t),r.toArray(o,6),r.toArray(o,9),r.set(n),r.toArray(o,12),r.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class op{constructor(){this.type="ShapePath",this.color=new qn,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new gu,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,o,l){return this.currentPath.bezierCurveTo(e,t,n,r,o,l),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(M){const q=[];for(let V=0,he=M.length;V<he;V++){const Re=M[V],De=new Rl;De.curves=Re.curves,q.push(De)}return q}function n(M,q){const V=q.length;let he=!1;for(let Re=V-1,De=0;De<V;Re=De++){let nt=q[Re],_t=q[De],se=_t.x-nt.x,Ue=_t.y-nt.y;if(Math.abs(Ue)>Number.EPSILON){if(Ue<0&&(nt=q[De],se=-se,_t=q[Re],Ue=-Ue),M.y<nt.y||M.y>_t.y)continue;if(M.y===nt.y){if(M.x===nt.x)return!0}else{const Jt=Ue*(M.x-nt.x)-se*(M.y-nt.y);if(Jt===0)return!0;if(Jt<0)continue;he=!he}}else{if(M.y!==nt.y)continue;if(_t.x<=M.x&&M.x<=nt.x||nt.x<=M.x&&M.x<=_t.x)return!0}}return he}const r=Ya.isClockWise,o=this.subPaths;if(o.length===0)return[];let l,c,f;const d=[];if(o.length===1)return c=o[0],f=new Rl,f.curves=c.curves,d.push(f),d;let p=!r(o[0].getPoints());p=e?!p:p;const _=[],y=[];let b=[],R=0,B;y[R]=void 0,b[R]=[];for(let M=0,q=o.length;M<q;M++)c=o[M],B=c.getPoints(),l=r(B),l=e?!l:l,l?(!p&&y[R]&&R++,y[R]={s:new Rl,p:B},y[R].s.curves=c.curves,p&&R++,b[R]=[]):b[R].push({h:c,p:B[0]});if(!y[0])return t(o);if(y.length>1){let M=!1,q=0;for(let V=0,he=y.length;V<he;V++)_[V]=[];for(let V=0,he=y.length;V<he;V++){const Re=b[V];for(let De=0;De<Re.length;De++){const nt=Re[De];let _t=!0;for(let se=0;se<y.length;se++)n(nt.p,y[se].p)&&(V!==se&&q++,_t?(_t=!1,_[se].push(nt)):M=!0);_t&&_[V].push(nt)}}q>0&&M===!1&&(b=_)}let A;for(let M=0,q=y.length;M<q;M++){f=y[M].s,d.push(f),A=b[M];for(let V=0,he=A.length;V<he;V++)f.holes.push(A[V].h)}return d}}class sp extends ua{constructor(e,t,n,r,o,l){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,n,r,o,l)}}class ap extends vu{constructor(e,t,n,r){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,n,r)}}class lp extends Cu{constructor(e,t,n,r){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,n,r)}}class cp extends _u{constructor(e,t,n,r,o,l,c){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,n,r,o,l,c)}}class up extends Sl{constructor(e,t,n,r,o,l,c,f){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,n,r,o,l,c,f)}}class fp extends yu{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class dp extends Mu{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class hp extends Eu{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class pp extends Sc{constructor(e,t,n,r){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,n,r)}}class mp extends Lc{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class gp extends Xi{constructor(e,t,n,r){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,n,r)}}class vp extends p1{constructor(e,t,n,r){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,n,r)}}class Cp extends Su{constructor(e,t,n,r,o,l){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,n,r,o,l)}}class _p extends Ru{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class yp extends Tc{constructor(e,t,n,r,o,l,c){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,n,r,o,l,c)}}class xp extends Lu{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class wp extends Tu{constructor(e,t,n,r,o){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,n,r,o)}}class bp extends Au{constructor(e,t,n,r,o,l){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,n,r,o,l)}}class Mp extends Pu{constructor(e,t,n,r,o){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,n,r,o)}}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:L}})),typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=L)}}]);
}());